!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var c=function(e){function t(e,n,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);(o=s(this,r(t).call(this,game,e,n,i))).animations.add("run_anim"+i);return o.anchor.set(.5),o.animations.play("run_anim"+i,32,!0),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"tweenPosX",value:function(e,t){game.add.tween(this).to({x:e},t,"Linear",!0).start()}}])&&a(n.prototype,i),o&&a(n,o),t}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function t(e,n){var i,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=f(t).call(this,game,e,n,"loadStar");(i=!a||"object"!==h(a)&&"function"!=typeof a?g(o):a).animations.add("run_anim");i.anchor.set(.5),i.kill();var s=.5+3*Math.random();return i.timeTween=game.time.events.add(Phaser.Timer.SECOND*s,function(){i.revive(),i.animations.play("run_anim",22,!0)},g(g(i))),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"destroy",value:function(){game.time.events.remove(this.timeTween),d(f(t.prototype),"destroy",this).call(this)}}])&&u(n.prototype,i),o&&u(n,o),t}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=w(this,_(t).call(this,game,game.rnd.between(100,game.width-100),game.height+100,"loadingNewSprites",e))).arrBubble=["Circle","Circle_White"],i.anchor.set(.5),i.scale.set(.1*game.rnd.between(5,10)),i.index=n,i.addBezier(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"addBezier",value:function(){var e=this,t=[{x:this.position.x,y:this.position.y},{x:game.rnd.between(100,game.width-100),y:game.height-1136+900},{x:game.rnd.between(100,game.width-100),y:game.height-1136+700},{x:game.rnd.between(100,game.width-100),y:game.height-1136+550}];this.timeTweenBezier=game.time.events.add(Phaser.Timer.SECOND*(.45*this.index),function(){e.timeTweenAlpha=game.time.events.add(1.9*Phaser.Timer.SECOND,function(){game.add.tween(e).to({alpha:.1},1e3,"Linear",!1).start()});var n=game.add.tween(e).to({x:[t[0].x,t[1].x,t[2].x,t[3].x],y:[t[0].y,t[1].y,t[2].y,t[3].y]},3e3,Phaser.Easing.Linear.In,!1,0,0).interpolation(function(e,t){return Phaser.Math.bezierInterpolation(e,t)});n.start(),n.onComplete.add(function(){e.position.x=game.rnd.between(100,game.width-100),e.position.y=game.height+100,e.alpha=1,e.scale.set(.1*game.rnd.between(5,10)),e.loadTexture("loadingNewSprites",e.arrBubble[Math.floor(Math.random()*e.arrBubble.length)]),e.addBezier()})})}},{key:"destroy",value:function(){game.time.events.remove(this.timeTweenBezier),game.time.events.remove(this.timeTweenAlpha),b(_(t.prototype),"destroy",this).call(this)}}])&&v(n.prototype,i),o&&v(n,o),t}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=P(this,O(t).call(this,game,e,n,"loadingNewSprites",i))).addAnim(o),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"addAnim",value:function(e){game.add.tween(this).to({y:this.position.y+e},300,"Linear",!0,0,-1).yoyo(!0,0)}}])&&k(n.prototype,i),o&&k(n,o),t}();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=A(this,L(t).call(this,game,e,n,"loadingNewSprites",i))).anchor.set(.5,1),a.angle=o,a.addShake(o),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"addShake",value:function(e){game.add.tween(this).to({angle:-e},400,"Linear",!0,0,-1).yoyo(!0,0)}}])&&I(n.prototype,i),o&&I(n,o),t}();function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e,t,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B(this,U(t).call(this,game))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,Phaser.Group),n=t,(i=[{key:"destroy",value:function(){this.removeAllItem(),j(U(t.prototype),"destroy",this).call(this);var e="";for(var n in this)null!==this[n]&&void 0!==this[n]&&("Array"!==(e=this[n].constructor.name)&&"Object"!==e||(game.tweens.removeFrom(this[n]),"Array"===e?this[n].length=0:this[n]=null));e=null}},{key:"removeAllItem",value:function(){if(null!==this.children)for(;this.children.length>0;){var e=this.children[0];null!==e&&(this.removeChild(e),e.destroy(),e={},e=null)}}}])&&N(n.prototype,i),o&&N(n,o),t}();function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Q(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e,t,n){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Q(this,q(t).call(this,game))).positionBootConfig=JSON.parse(game.cache.getText("positionBootConfig")),e.STANDARD_HEIGHT=1136,e.yep=n,e.afterInit(),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,Z),n=t,(o=[{key:"afterInit",value:function(){this.addStage(),this.addRedGirl(),this.addBlackGirl(),this.addWhiteGirl(),this.addStar(),this.addBezierBubble(),this.addBg(),this.addHead(),this.addArm()}},{key:"addStage",value:function(){this.stage=new Phaser.Sprite(game,this.positionBootConfig.loadingScreen.stage.x,game.height-this.STANDARD_HEIGHT+this.positionBootConfig.loadingScreen.stage.y,this.positionBootConfig.loadingScreen.stage.nameAtlas,this.positionBootConfig.loadingScreen.stage.nameSprite),this.stage.anchor.set(.5,1),this.addChild(this.stage)}},{key:"addBg",value:function(){this.bg=new Phaser.Sprite(game,this.positionBootConfig.loadingScreen.bg.x,game.height-this.STANDARD_HEIGHT+this.positionBootConfig.loadingScreen.bg.y,this.positionBootConfig.loadingScreen.bg.nameAtlas,this.positionBootConfig.loadingScreen.bg.nameSprite),this.bg.anchor.set(.5,1),this.addChild(this.bg)}},{key:"addWhiteGirl",value:function(){this.whiteGirl=new c(this.positionBootConfig.loadingScreen.whiteGirl.x,game.height-this.STANDARD_HEIGHT+this.positionBootConfig.loadingScreen.whiteGirl.y,this.positionBootConfig.loadingScreen.whiteGirl.nameSprite),this.addChild(this.whiteGirl)}},{key:"addRedGirl",value:function(){0==this.yep?(this.redGirl=new c(game.width+300,game.height-this.STANDARD_HEIGHT+this.positionBootConfig.loadingScreen.redGirl.y,this.positionBootConfig.loadingScreen.redGirl.nameSprite),this.redGirl.tweenPosX(this.positionBootConfig.loadingScreen.redGirl.x,800),this.addChild(this.redGirl)):(this.redGirl=new c(this.positionBootConfig.loadingScreen.redGirl.x,game.height-this.STANDARD_HEIGHT+this.positionBootConfig.loadingScreen.redGirl.y,this.positionBootConfig.loadingScreen.redGirl.nameSprite),this.redGirl.tweenPosX(this.positionBootConfig.loadingScreen.redGirl.x,800),this.addChild(this.redGirl))}},{key:"addBlackGirl",value:function(){0==this.yep?(this.blackGirl=new c(-300,game.height-this.STANDARD_HEIGHT+this.positionBootConfig.loadingScreen.blackGirl.y,this.positionBootConfig.loadingScreen.blackGirl.nameSprite),this.blackGirl.tweenPosX(this.positionBootConfig.loadingScreen.blackGirl.x,700),this.addChild(this.blackGirl)):(this.blackGirl=new c(this.positionBootConfig.loadingScreen.blackGirl.x,game.height-this.STANDARD_HEIGHT+this.positionBootConfig.loadingScreen.blackGirl.y,this.positionBootConfig.loadingScreen.blackGirl.nameSprite),this.blackGirl.tweenPosX(this.positionBootConfig.loadingScreen.blackGirl.x,700),this.addChild(this.blackGirl))}},{key:"addStar",value:function(){for(i=0;i<this.positionBootConfig.loadingScreen.stars.length;i++){var e=new y(this.positionBootConfig.loadingScreen.stars[i].x,game.height-this.STANDARD_HEIGHT+this.positionBootConfig.loadingScreen.stars[i].y);this.addChild(e)}}},{key:"addBezierBubble",value:function(){for(var e=["Circle","Circle_White"],t=0;t<4;t++){var n=e[Math.floor(Math.random()*e.length)],i=new E(n,t);this.addChild(i)}}},{key:"addArm",value:function(){this.arm1=new x(0,game.height-1136+850,"Arm_01",-10),this.addChild(this.arm1),this.arm2=new x(80,game.height-1136+940,"Arm_02",10),this.addChild(this.arm2),this.arm3=new x(220,game.height-1136+1e3,"Arm_03",-10),this.addChild(this.arm3),this.arm4=new x(280,game.height-1136+1035,"Arm_04",10),this.addChild(this.arm4),this.arm5=new x(445,game.height-1136+975,"Arm_05",-10),this.addChild(this.arm5),this.arm6=new x(475,game.height-1136+880,"Arm_06",10),this.addChild(this.arm6),this.arm7=new x(540,game.height-1136+900,"Arm_07",-10),this.addChild(this.arm7)}},{key:"addHead",value:function(){this.head1=new G(-20,game.height-1136+1080,"Head_01",0),this.addChild(this.head1),this.head2=new G(170,game.height-1136+1150,"Head_02",5),this.addChild(this.head2),this.head3=new G(380,game.height-1136+1135,"Head_03",-5),this.addChild(this.head3),this.head4=new G(580,game.height-1136+1120,"Head_04",3),this.addChild(this.head4),this.head5=new G(660,game.height-1136+1080,"Head_05",6),this.addChild(this.head5)}},{key:"destroy",value:function(){if(null!==this.children){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}W(q(t.prototype),"destroy",this).call(this)}}])&&V(n.prototype,o),a&&V(n,a),t}();function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var X=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t}var t,n,i;return t=e,(n=[{key:"preload",value:function(){game.load.atlas("loadingSprites","img/atlas/loadingScreen.png"+"?v=".concat(window.VersionClient),"img/atlas/loadingScreen.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("loadingNewSprites","img/atlas/loadingNewScreen.png"+"?v=".concat(window.VersionClient),"img/atlas/loadingNewScreen.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.image("bg_create_room","img/background/BG.png"+"?v=".concat(window.VersionClient)),game.load.text("languageGame","img/language/language.json"+"?v=".concat(window.VersionClient)),game.load.text("positionBootConfig","./img/config/positionBootConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("positionLoadConfig","./img/config/positionLoadConfig.json"+"?v=".concat(window.VersionClient)),game.load.spritesheet("loadingPlay","img/animations/Loading/sprites.png"+"?v=".concat(window.VersionClient),134,137,32),game.load.text("positionPlayConfig","img/config/positionPlayConfig.json"+"?v=".concat(window.VersionClient)),game.load.spritesheet("loadBlackGirl","img/animations/NewLoading/BlackGirl.png"+"?v=".concat(window.VersionClient),193,330,18),game.load.spritesheet("loadWhiteGirl","img/animations/NewLoading/WhiteGirl.png"+"?v=".concat(window.VersionClient),125,380,14),game.load.spritesheet("loadRedGirl","img/animations/NewLoading/RedGirl.png"+"?v=".concat(window.VersionClient),160,330,22),game.load.spritesheet("loadStar","img/animations/NewLoading/Star.png"+"?v=".concat(window.VersionClient),29,30,11),game.load.image("screen-dim","img/assetss/Practice/reward/screen-dim.png"+"?v=".concat(window.VersionClient)),game.load.image("screen-dim1","img/assetss/Practice/reward/screen-dim1.png"+"?v=".concat(window.VersionClient)),game.load.image("screen-dim2","img/assetss/Practice/reward/screen-dim2.png"+"?v=".concat(window.VersionClient)),game.load.spritesheet("firework","img/atlas/firework.png"+"?v=".concat(window.VersionClient),400,212,40),game.load.spritesheet("fireworktet","img/atlas/fireworktet.png"+"?v=".concat(window.VersionClient),435,231,32)}},{key:"createSprites",value:function(){this.positionBootConfig=this.getpositionBootConfig(),this.addBackgroundSprite(),this.addLogoSprite(),this.addDance(),this.addTermText()}},{key:"getpositionBootConfig",value:function(){return JSON.parse(this.state.cache.getText("positionBootConfig"))}},{key:"addDance",value:function(){var e=new z;this.state.add.existing(e)}},{key:"addBackgroundSprite",value:function(){game.stage.background=game.add.sprite(this.positionBootConfig.bg_load.x*window.GameConfig.RESIZE,this.positionBootConfig.bg_load.y*window.GameConfig.RESIZE,"bg_create_room")}},{key:"addLogoSprite",value:function(){var e=game.add.sprite(this.positionBootConfig.logo.x*window.GameConfig.RESIZE,this.positionBootConfig.logo.y*window.GameConfig.RESIZE,"".concat(this.positionBootConfig.logo.nameAtlas),"".concat(this.positionBootConfig.logo.nameSprite));return e.anchor.set(.5),e}},{key:"addTermText",value:function(){var e=game.add.text(this.positionBootConfig.txt_term.x*window.GameConfig.RESIZE,(game.height-26)*window.GameConfig.RESIZE,this.positionBootConfig.txt_term.text,this.positionBootConfig.txt_term.configs);return e.anchor.set(.5),e.addColor("#ffa33a",37),e}}])&&Y(t.prototype,n),i&&Y(t,i),e}();function J(){window.MQ.achievementPractice=[{answer:2,reward:10},{answer:5,reward:15},{answer:8,reward:20},{answer:12,reward:30},{answer:18,reward:50},{answer:25,reward:100},{answer:33,reward:150},{answer:45,reward:200},{answer:56,reward:500}],window.MQ.posCirclePractice=[{num:2,x:147,y:300},{num:5,x:320,y:300},{num:8,x:493,y:300},{num:12,x:493,y:419},{num:18,x:320,y:419},{num:25,x:147,y:419},{num:33,x:147,y:536},{num:45,x:320,y:536},{num:56,x:493,y:536}],window.MQ.posDotPractice=[{num:1,x:-15,y:-15},{num:2,x:-15,y:-15},{num:3,x:204,y:299.5},{num:4,x:262,y:299.5},{num:5,x:-15,y:-15},{num:6,x:378,y:299.5},{num:7,x:436,y:299.5},{num:8,x:-15,y:-15},{num:9,x:493,y:330},{num:10,x:493,y:360},{num:11,x:493,y:390},{num:12,x:-15,y:-15},{num:13,x:464,y:419},{num:14,x:435,y:419},{num:15,x:406,y:419},{num:16,x:377,y:419},{num:17,x:348,y:419},{num:18,x:-15,y:-15},{num:19,x:295,y:419},{num:20,x:270,y:419},{num:21,x:245,y:419},{num:22,x:220,y:419},{num:23,x:195,y:419},{num:24,x:170,y:419},{num:25,x:-15,y:-15},{num:26,x:146,y:434},{num:27,x:146,y:449},{num:28,x:146,y:461},{num:29,x:146,y:473},{num:30,x:146,y:485},{num:31,x:146,y:497},{num:32,x:146,y:509},{num:33,x:-15,y:-15},{num:34,x:173,y:535},{num:35,x:185,y:535},{num:36,x:197,y:535},{num:37,x:209,y:535},{num:38,x:221,y:535},{num:39,x:233,y:535},{num:40,x:245,y:535},{num:41,x:257,y:535},{num:42,x:269,y:535},{num:43,x:281,y:535},{num:44,x:293,y:535},{num:45,x:-15,y:-15},{num:46,x:350,y:535},{num:47,x:362,y:535},{num:48,x:374,y:535},{num:49,x:386,y:535},{num:50,x:398,y:535},{num:51,x:410,y:535},{num:52,x:424,y:535},{num:53,x:436,y:535},{num:54,x:448,y:535},{num:55,x:460,y:535},{num:56,x:-15,y:-15}],window.MQ.posAchievementPractice=[{diamondPosX:145,diamondPosY:261,answerPosX:145,answerPosY:335},{diamondPosX:320,diamondPosY:261,answerPosX:320,answerPosY:335},{diamondPosX:492,diamondPosY:261,answerPosX:477,answerPosY:335},{diamondPosX:456,diamondPosY:379,answerPosX:492,answerPosY:455},{diamondPosX:320,diamondPosY:379,answerPosX:320,answerPosY:455},{diamondPosX:146,diamondPosY:379,answerPosX:175,answerPosY:455},{diamondPosX:204,diamondPosY:500,answerPosX:145,answerPosY:572},{diamondPosX:320,diamondPosY:500,answerPosX:320,answerPosY:572},{diamondPosX:492,diamondPosY:500,answerPosX:492,answerPosY:572}]}function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var te=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dataBetCreateRoom=null,this.idbetCreateRoom=null,this._dataPlaylistCreateRoom=null,this.idPlaylistCreateRoom=null,this._dataGenresQuickPlay=null,this.idGenresQuickPlay=null,this._dataListRoomEventMode=null,this.idListRoomEventMode=null,this._dataRankingEventmode=null,this.idRankingEventMode=null,this._dataRankingDiamond=null,this.idRankingDiamond=null,this._dataRankingLevel=null,this.idRankingLevel=null,this._dataRankingOnlineMode=null,this.idRankingOnlineMode=null,this._dataRankingTurnBase=null,this.idRankingTurnBase=null}var t,n,i;return t=e,(n=[{key:"removeIdBetCreateRoom",value:function(){null!==this.idbetCreateRoom&&(game.time.events.remove(this.idbetCreateRoom),this.idbetCreateRoom=null)}},{key:"callResetDataBetCreateRoom",value:function(){this.removeIdBetCreateRoom(),this.idbetCreateRoom=game.time.events.add(30*Phaser.Timer.SECOND,this.resetDataBetCreateRoom,this)}},{key:"resetDataBetCreateRoom",value:function(){this._dataBetCreateRoom=null}},{key:"removeIdPlaylistCreateRoom",value:function(){null!==this.idPlaylistCreateRoom&&(game.time.events.remove(this.idPlaylistCreateRoom),this.idPlaylistCreateRoom=null)}},{key:"callResetDataPlaylistCreateRoom",value:function(){this.removeIdPlaylistCreateRoom(),this.idPlaylistCreateRoom=game.time.events.add(30*Phaser.Timer.SECOND,this.resetDataPlaylistCreateRoom,this)}},{key:"resetDataPlaylistCreateRoom",value:function(){this._dataPlaylistCreateRoom=null}},{key:"removeIdGenresQuickPlay",value:function(){null!==this.idGenresQuickPlay&&(game.time.events.remove(this.idGenresQuickPlay),this.idGenresQuickPlay=null)}},{key:"callResetDataGenresQuickPlay",value:function(){this.removeIdGenresQuickPlay(),this.idGenresQuickPlay=game.time.events.add(30*Phaser.Timer.SECOND,this.resetDataGenresQuickPlay,this)}},{key:"resetDataGenresQuickPlay",value:function(){this._dataGenresQuickPlay=null}},{key:"removeIdListRoomEventMode",value:function(){null!==this.idListRoomEventMode&&(game.time.events.remove(this.idListRoomEventMode),this.idListRoomEventMode=null)}},{key:"callResetListRoomEventMode",value:function(){this.removeIdListRoomEventMode(),this.idListRoomEventMode=game.time.events.add(30*Phaser.Timer.SECOND,this.resetDataListRoomEventMode,this)}},{key:"resetDataListRoomEventMode",value:function(){this._dataListRoomEventMode=null}},{key:"removeIdRankingEventmode",value:function(){null!==this.idRankingEventMode&&(game.time.events.remove(this.idRankingEventMode),this.idRankingEventMode=null)}},{key:"callResetRankingEventmode",value:function(){this.removeIdRankingEventmode(),this.idRankingEventMode=game.time.events.add(5*Phaser.Timer.SECOND,this.resetDataRankingEventmode,this)}},{key:"resetDataRankingEventmode",value:function(){this._dataRankingEventmode=null}},{key:"removeIdRankingDiamond",value:function(){null!==this.idRankingDiamond&&(game.time.events.remove(this.idRankingDiamond),this.idRankingDiamond=null)}},{key:"callResetRankingDiamond",value:function(){this.removeIdRankingDiamond(),this.idRankingDiamond=game.time.events.add(60*Phaser.Timer.SECOND,this.resetDataRankingDiamond,this)}},{key:"resetDataRankingDiamond",value:function(){this._dataRankingDiamond=null}},{key:"removeIdRankingLevel",value:function(){null!==this.idRankingLevel&&(game.time.events.remove(this.idRankingLevel),this.idRankingLevel=null)}},{key:"callResetRankingLevel",value:function(){this.removeIdRankingLevel(),this.idRankingLevel=game.time.events.add(60*Phaser.Timer.SECOND,this.resetDataRankingLevel,this)}},{key:"resetDataRankingLevel",value:function(){this._dataRankingLevel=null}},{key:"removeIdRankingOnlineMode",value:function(){null!==this.idRankingOnlineMode&&(game.time.events.remove(this.idRankingOnlineMode),this.idRankingOnlineMode=null)}},{key:"callResetRankingOnlineMode",value:function(){this.removeIdRankingOnlineMode(),this.idRankingOnlineMode=game.time.events.add(60*Phaser.Timer.SECOND,this.resetDataRankingOnlineMode,this)}},{key:"resetDataRankingOnlineMode",value:function(){this._dataRankingOnlineMode=null}},{key:"removeIdRankingTurnBase",value:function(){null!==this.idRankingTurnBase&&(game.time.events.remove(this.idRankingTurnBase),this.idRankingTurnBase=null)}},{key:"callResetRankingTurnBase",value:function(){this.removeIdRankingTurnBase(),this.idRankingTurnBase=game.time.events.add(60*Phaser.Timer.SECOND,this.resetDataRankingTurnBase,this)}},{key:"resetDataRankingTurnBase",value:function(){this._dataRankingTurnBase=null}},{key:"resetDataServer",value:function(){this.removeIdBetCreateRoom(),this._dataBetCreateRoom=null,this.removeIdPlaylistCreateRoom(),this._dataPlaylistCreateRoom=null,this.removeIdGenresQuickPlay(),this._dataGenresQuickPlay=null,this.removeIdListRoomEventMode(),this._dataListRoomEventMode=null,this.removeIdRankingEventmode(),this._dataRankingEventmode=null,this.removeIdRankingDiamond(),this._dataRankingDiamond=null,this.removeIdRankingLevel(),this._dataRankingLevel=null,this.removeIdRankingOnlineMode(),this._dataRankingOnlineMode=null,this.removeIdRankingTurnBase(),this._dataRankingTurnBase=null}},{key:"dataBetCreateRoom",get:function(){return this._dataBetCreateRoom},set:function(e){this._dataBetCreateRoom=e}},{key:"dataPlaylistCreateRoom",get:function(){return this._dataPlaylistCreateRoom},set:function(e){this._dataPlaylistCreateRoom=e,this.callResetDataPlaylistCreateRoom()}},{key:"dataGenresQuickPlay",get:function(){return this._dataGenresQuickPlay},set:function(e){this._dataGenresQuickPlay=e}},{key:"dataListRoomEventMode",get:function(){return this._dataListRoomEventMode},set:function(e){this._dataListRoomEventMode=e,this.callResetListRoomEventMode()}},{key:"dataRankingEventmode",get:function(){return this._dataRankingEventmode},set:function(e){this._dataRankingEventmode=e,this.callResetRankingEventmode()}},{key:"dataRankingDiamond",get:function(){return this._dataRankingDiamond},set:function(e){this._dataRankingDiamond=e,this.callResetRankingDiamond()}},{key:"dataRankingLevel",get:function(){return this._dataRankingLevel},set:function(e){this._dataRankingLevel=e,this.callResetRankingLevel()}},{key:"dataRankingOnlineMode",get:function(){return this._dataRankingOnlineMode},set:function(e){this._dataRankingOnlineMode=e,this.callResetRankingOnlineMode()}},{key:"dataRankingTurnBase",get:function(){return this._dataRankingTurnBase},set:function(e){this._dataRankingTurnBase=e,this.callResetRankingTurnBase()}}])&&ee(t.prototype,n),i&&ee(t,i),e}();function ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ie(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),e}var oe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.positionCreateRoomData=null,this.positionDefaultResourceData=null,this.positionPopupData=null,this.positionEventModeData=null,this.positionRankingData=null,this.positionShopData=null,this.positionUserProfileData=null,this.positionDetailPlaylistData=null,this.silentchatData=null,this.udid="",this.referrer="",this.dataShop=null,this.dataPackage=null,this.ktUpdate=!1,this.isShowLoading=!1,this.playlist_reload_at="",this.MODEPLAY={OnlineMode:"OnlineMode",OnlineModeRoom:"OnlineModeRoom"},this.platform="",this.response=null,this.ktPlayAgainOnlineMode=!1,this.state="",this.modeplay="OnlineMode",this.dataPlayOnlineMode={id:0,genre_id:0,bet_id:0,bet_place:0},this.scale=1,this.dataJoinRoom=null,this.dataGennes={},this.typeMenuGenes="Local",this.playScript={playing_guide:"",play_script_questions:[]},this.botChallenge={value:0,gameLogId:0,requestId:0,opponentEntity:{},mode:"isChallengeGame",can_be_poked:0,weeklyResult:{userWon:0,opponentWon:0}},this.SIZE_AVA_UPLOAD=2097152,this.STANDARD_HEIGHT=1136,this.LOGED_IN=!1,this.LOG_IN_BY_FB=!1,this.userDescription="",this.isGetUserProfileSearch=!1,this.android_storage_link="market://details?id=com.wazzat.musicgame",this.ios_storage_link="itms-apps://itunes.apple.com/app/1440442421",this.idxHighest=-1,this.isScrollChange=!1,this.tokenYanAccount="",this.menuLoadResponses=null,this.menuOpponentsResponse=null,this.init_quests_count=0,this.new_friend_request_count=0,this.started_event_count=0,this.hoursReward=null,this.isRefreshMenu={checking:!1,updated:0},this.userOneSingal="",this.tokenOneSignal="",this.menuDragging=!1,this.dataServer=new te,this.isChallengeGameFindOpponents={checking:!1,updated:0},this.friendLists=[],this.suggestion_users=[],this.random_user=null,this.isMainQuestLoad={checking:!1,updated:0},this.mainQuestLists=[],this.mainQuestLogLists=[],this.mainNextQuest=null,this.isSoloModePlaylistRequest={checking:!1,updated:0},this.soloModePlaylists=[],this.isDailyQuestLoad={checking:!1,updated:0},this.dailyQuestLists=[],this.isAchievementLoad={checking:!1,updated:0},this.achievements=[],this.messageTurnbases=["Làm ván đi em eeii!","Chơi với em đi hihi","Khó quắc à, anh chơi đi!","Goddd damn it!"],this.checkLoadMail=0,this.checkLoadMessage=0,this.mailData=null,this.messageData=null,this.dataMessagesLocal=null,this.systemMessagesLocal=null,this.zoneSFS="",this.soloModeReward=null}return ie(e,null,[{key:"instance",value:function(){return this.mainData||(this.mainData=new e),this.mainData}},{key:"VERSION_AND",get:function(){return"0.1.2"}},{key:"VERSION_IOS",get:function(){return"0.0.6"}}]),ie(e,[{key:"positionCreateRoom",get:function(){return null===this.positionCreateRoomData&&(this.positionCreateRoomData=JSON.parse(game.cache.getText("positionCreateRoom"))),this.positionCreateRoomData}},{key:"positionDefaultSource",get:function(){return null===this.positionDefaultResourceData&&(this.positionDefaultResourceData=JSON.parse(game.cache.getText("positionDefaultSource"))),this.positionDefaultResourceData}},{key:"positionPopup",get:function(){return null===this.positionPopupData&&(this.positionPopupData=JSON.parse(game.cache.getText("positionPopup"))),this.positionPopupData}},{key:"positionEventMode",get:function(){return null===this.positionEventModeData&&(this.positionEventModeData=JSON.parse(game.cache.getText("positionEventMode"))),this.positionEventModeData}},{key:"positionRanking",get:function(){return null===this.positionRankingData&&(this.positionRankingData=JSON.parse(game.cache.getText("positionRanking"))),this.positionRankingData}},{key:"positionShop",get:function(){return null===this.positionShopData&&(this.positionShopData=JSON.parse(game.cache.getText("positionShop"))),this.positionShopData}},{key:"positionUserProfile",get:function(){return null===this.positionUserProfileData&&(this.positionUserProfileData=JSON.parse(game.cache.getText("positionUserProfile"))),this.positionUserProfileData}},{key:"positionDetailPlaylist",get:function(){return null===this.positionDetailPlaylistData&&(this.positionDetailPlaylistData=JSON.parse(game.cache.getText("positionDetailPlaylist"))),this.positionDetailPlaylistData}},{key:"silentchat",get:function(){if(null===this.silentchatData){this.silentchatData={};for(var e=game.cache.getText("silentchat").split(","),t=0;t<e.length;t++){var n=e[t].trim();this.silentchatData[n]=n}}return this.silentchatData}}]),e}();function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function re(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,le(t).call(this))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,Phaser.State),n=t,(i=[{key:"init",value:function(){game.stage.backgroundColor="#1e0e46";var e=0;e="ios"===oe.instance().platform?screen.width/screen.height:window.innerWidth/window.innerHeight;var t=window.GameConfig.GAME_WIDTH/window.GameConfig.GAME_HEIGHT;if(e>t);else if(e<t){var n=Math.ceil(window.GameConfig.GAME_WIDTH/e);game.scale.setGameSize(window.GameConfig.GAME_WIDTH,n),window.distanceHeight=n-window.GameConfig.GAME_HEIGHT,window.GameConfig.GAME_HEIGHT=n}game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.pageAlignHorizontally=!0,game.time.advancedTiming=!0,game.stage.disableVisibilityChange=!0,game.sound.context.resume(),this.bootModule=new X(this)}},{key:"preload",value:function(){this.bootModule.preload()}},{key:"create",value:function(){J(),game.state.start("Load",!0,!1,{}),$("#dangtai").remove(),$("#lds-heart").remove()}},{key:"update",value:function(){}},{key:"render",value:function(){}}])&&se(n.prototype,i),o&&se(n,o),t}();function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var de=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentLanguage="en",this.ktFirst=!0,this.dataLanguage={},this.changeDataLanguage()}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.language||(this.language=new e),this.language}}],(n=[{key:"changeDataLanguage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";this.currentLanguage===e.toLowerCase()?!0===this.ktFirst&&(this.ktFirst=!1,this.currentLanguage=e.toLowerCase(),this.dataLanguage=JSON.parse(game.cache.getText("languageGame"))[this.currentLanguage]):(this.currentLanguage=e.toLowerCase(),this.dataLanguage=JSON.parse(game.cache.getText("languageGame"))[this.currentLanguage])}},{key:"getData",value:function(e){return this.dataLanguage.hasOwnProperty(e)?this.dataLanguage[e]:(console.log("khong ton tai key"),"")}}])&&ue(t.prototype,n),i&&ue(t,i),e}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ge(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ge(this,ye(t).call(this,game))).positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addAnim(),this.addTextLoading()}},{key:"addTextLoading",value:function(){this.txtLoading=new Phaser.Text(game,this.positionPlayConfig.txtLoading.x*window.GameConfig.RESIZE,this.positionPlayConfig.txtLoading.y*window.GameConfig.RESIZE,de.instance().getData(185),this.positionPlayConfig.txtLoading.configs),this.txtLoading.anchor.set(.5),this.addChild(this.txtLoading)}},{key:"addAnim",value:function(){this.animLoad=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,460*window.GameConfig.RESIZE,"loadingPlay");this.animLoad.animations.add("run_anim_load");this.animLoad.anchor.set(.5),this.animLoad.animations.play("run_anim_load",32,!0),this.addChild(this.animLoad)}},{key:"moveTxtLoading",value:function(){this.txtLoading.y=(this.positionPlayConfig.txtLoading.y+500)*window.GameConfig.RESIZE}},{key:"deleteTxtLoading",value:function(){this.txtLoading.destroy()}}])&&pe(n.prototype,i),o&&pe(n,o),t}();function we(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var be=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sound=null,this.playId=null,this.currentLoad=null,this.dic={},this.arrSrc=[],this.idxLoad=0,this.isLoading=!1,this.arrsSoundFx=[e.buttonclick,e.dailyreward,e.clickbuttonplayeventmode,e.getrewardsolomode,e.joineventmode,e.losesolomode,e.popupeventmodeend,e.popupfinishachievement,e.popupfinishquest,e.popupinviteroom,e.popuplevelup,e.showranking,e.takereward,e.winturnbase,e.winturnbasepartymode,e.loseturnbasepartymode,e.gameovereventmode,e.streakanswer]}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.controllSound||(this.controllSound=new e),this.controllSound}},{key:"buttonclick",get:function(){return"img/sound/soundfx/buttonclick.mp3"}},{key:"dailyreward",get:function(){return"img/sound/soundfx/dailyreward.mp3"}},{key:"clickbuttonplayeventmode",get:function(){return"img/sound/soundfx/clickbuttonplayeventmode.mp3"}},{key:"getrewardsolomode",get:function(){return"img/sound/soundfx/getrewardsolomode.mp3"}},{key:"joineventmode",get:function(){return"img/sound/soundfx/joineventmode.mp3"}},{key:"losesolomode",get:function(){return"img/sound/soundfx/losesolomode.mp3"}},{key:"popupeventmodeend",get:function(){return"img/sound/soundfx/popupeventmodeend.mp3"}},{key:"loseturnbase",get:function(){return"img/sound/soundfx/loseturnbasepartymode.mp3"}},{key:"popupfinishachievement",get:function(){return"img/sound/soundfx/popupfinishachievement.mp3"}},{key:"popupfinishquest",get:function(){return"img/sound/soundfx/popupfinishquest.mp3"}},{key:"popupinviteroom",get:function(){return"img/sound/soundfx/popupinviteroom.mp3"}},{key:"popuplevelup",get:function(){return"img/sound/soundfx/popuplevelup.mp3"}},{key:"showranking",get:function(){return"img/sound/soundfx/showranking.mp3"}},{key:"takereward",get:function(){return"img/sound/soundfx/takereward.mp3"}},{key:"winturnbase",get:function(){return"img/sound/soundfx/winturnbase.mp3"}},{key:"winturnbasepartymode",get:function(){return"img/sound/soundfx/winturnbasepartymode.mp3"}},{key:"loseturnbasepartymode",get:function(){return"img/sound/soundfx/loseturnbasepartymode.mp3"}},{key:"gameovereventmode",get:function(){return"img/sound/soundfx/gameovereventmode.mp3"}},{key:"streakanswer",get:function(){return"img/sound/soundfx/streakanswer.mp3"}}],(n=[{key:"loadSoundArray",value:function(e){!1===this.isLoading&&(this.arrSrc=e,this.isLoading=!0,this.idxLoad=0,this.loadItemInArray(this.arrSrc[this.idxLoad]))}},{key:"loadItemInArray",value:function(e){var t=this;this.dic[e]?this.checkLoadContinuteArray():(this.dic[e]=new Howl({src:[e]}),this.dic[e].on("load",function(){t.checkLoadContinuteArray()}),this.dic[e].on("loaderror",function(){t.checkLoadContinuteArray()}))}},{key:"checkLoadContinuteArray",value:function(){this.idxLoad++,this.idxLoad<this.arrSrc.length?this.loadItemInArray(this.arrSrc[this.idxLoad]):this.isLoading=!1,this.removeSound()}},{key:"beginLoad",value:function(){LogConsole.log("beginLoad sound -------------------"),this.loadSoundArray(this.arrsSoundFx)}},{key:"playSound",value:function(e){!1===game.paused&&1==window.GameConfig.SOUND_FX&&(this.removeSound(),"ctx"in Howler&&null!==Howler.ctx&&("suspended"!==Howler.ctx.state&&"interrupted"!==Howler.ctx.state||Howler.ctx.resume()),Howler.mute(!1),Howler.volume(1),Howler._autoResume(),this.src=e,this.dic[e]?(this.sound=this.dic[e],this.playId=this.sound.play()):(this.sound=new Howl({src:[e]}),this.sound.on("end",function(){}),this.playId=this.sound.play()))}},{key:"removeSound",value:function(){null!==this.sound&&null!==this.playId&&(this.sound.stop(this.playId),this.sound=null)}}])&&we(t.prototype,n),i&&we(t,i),e}();function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ee(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ee(this,Ce(t).call(this,game))).positionBootConfig=JSON.parse(game.cache.getText("positionBootConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addFireWork(),this.addFlower1(),this.addFlower2()}},{key:"addFireWork",value:function(){this.fireWork=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,180*window.GameConfig.RESIZE,"firework"),this.fireWork.anchor.set(.5),this.fireWork.scale.set(1.3),this.addChild(this.fireWork);this.fireWork.animations.add("run_firework");this.fireWork.animations.play("run_firework",30,!0)}},{key:"addFlower1",value:function(){this.flower1=new Phaser.Sprite(game,this.positionBootConfig.tet_theme.flower1.x,this.positionBootConfig.tet_theme.flower1.y,this.positionBootConfig.tet_theme.flower1.nameAtlas,this.positionBootConfig.tet_theme.flower1.nameSprite),this.flower1.angle=4,this.addChild(this.flower1),game.add.tween(this.flower1).to({angle:0},1500,Phaser.Easing.Linear.None,!0,0,-1).yoyo(!0,0)}},{key:"addFlower2",value:function(){this.flower2=new Phaser.Sprite(game,this.positionBootConfig.tet_theme.flower2.x,this.positionBootConfig.tet_theme.flower2.y,this.positionBootConfig.tet_theme.flower2.nameAtlas,this.positionBootConfig.tet_theme.flower2.nameSprite),this.flower2.angle=5,this.addChild(this.flower2),game.add.tween(this.flower2).to({angle:0},2e3,Phaser.Easing.Linear.None,!0,0,-1).yoyo(!0,0)}}])&&Se(n.prototype,i),o&&Se(n,o),t}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xe(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xe(this,Te(t).call(this,e))).isLoadAfterComplete=!1,n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,X),n=t,(i=[{key:"preloadForLoad",value:function(){be.instance().beginLoad(),game.load.text("positionDefaultSource","img/config/positionDefaultSource.json"+"?v=".concat(window.VersionClient)),game.load.text("positionIsNewUserConfig","img/config/positionIsNewUserConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("positionPopup","img/config/positionPopup.json"+"?v=".concat(window.VersionClient)),game.load.text("playScript","img/config/playScript.json"+"?v=".concat(window.VersionClient)),this.loadXML(),game.load.text("positionMenuConfig","img/config/positionMenuConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("dailyRewardConfig","img/config/dailyRewardConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("positionSetting","img/config/positionSetting.json"+"?v=".concat(window.VersionClient)),game.load.text("songDetailScreenConfig","img/config/songDetailScreenConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("positionDisconnectConfig","img/config/positionDisconnectConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("positionIsNewUserConfig","img/config/positionIsNewUserConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("positionChatScreenConfig","img/config/positionChatScreenConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("positionFriendRequestConfig","img/config/positionFriendRequestConfig.json"+"?v=".concat(window.VersionClient)),game.load.text("silentchat","img/config/silentchat.txt"+"?v=".concat(window.VersionClient)),game.load.text("positionUserProfile","img/config/positionUserProfile.json"+"?v=".concat(window.VersionClient)),game.load.text("positionQAndAConfig","img/config/questAndAchieveConfig.json"+"?v=".concat(window.VersionClient)),game.load.spritesheet("disconnect","img/animations/Disconnect/sprites.png"+"?v=".concat(window.VersionClient),210,200.5,9),game.load.spritesheet("btnRankAnim","img/animations/Fireworks_Squence/buttonRankAnim.png"+"?v=".concat(window.VersionClient),64,62,26),game.load.spritesheet("CircleScale","img/animations/CircleScale/sprites.png"+"?v=".concat(window.VersionClient),215.25,215.25,30),game.load.spritesheet("ButtonEvent","img/animations/EventBtn/sprites.png"+"?v=".concat(window.VersionClient),89,89,10),game.load.spritesheet("ButtonGift","img/animations/GiftBtn/sprites.png"+"?v=".concat(window.VersionClient),89,89,12),game.load.spritesheet("ButtonQuest","img/animations/QuestBtn/sprites.png"+"?v=".concat(window.VersionClient),89,89,12),game.load.spritesheet("ButtonRank","img/animations/RankBtn/sprites.png"+"?v=".concat(window.VersionClient),89,89,18),game.load.spritesheet("FindGameButton","img/animations/FindGameBtn/sprites.png"+"?v=".concat(window.VersionClient),177,115,18),game.load.spritesheet("PracticeButton","img/animations/PracticeBtn/sprites.png"+"?v=".concat(window.VersionClient),177,115,14),game.load.spritesheet("PartyButton","img/animations/PartyBtn/sprites.png"+"?v=".concat(window.VersionClient),177,115,18),game.load.spritesheet("56Questions","img/animations/56Questions/sprites.png"+"?v=".concat(window.VersionClient),125,125,30),game.load.spritesheet("ButtonShop","img/animations/ShopBtn/shopBtn.png"+"?v=".concat(window.VersionClient),90,90,12),game.load.spritesheet("VipAva","img/animations/UpToVip/ava.png"+"?v=".concat(window.VersionClient),219,227,58),game.load.spritesheet("VipLabel","img/animations/UpToVip/label.png"+"?v=".concat(window.VersionClient),90,41,40),game.load.spritesheet("VipStar","img/animations/UpToVip/star.png"+"?v=".concat(window.VersionClient),126,83,32),game.load.image("bg-playlist","img/background/bg-playlist.png"+"?v=".concat(window.VersionClient)),game.load.image("bg_scrollMenu","img/assetss/playlist/bg_scrollMenu.png"+"?v=".concat(window.VersionClient)),game.load.image("BG_Opacity","img/background/BG_Opacity.png"+"?v=".concat(window.VersionClient)),game.load.image("BG_Opacity_100","img/background/BG_Opacity_100.png"+"?v=".concat(window.VersionClient)),game.load.onFileComplete.add(this.fileComplete,this)}},{key:"fileComplete",value:function(e,t,n,i,o){var a=e;this.loadingTxt.setText("".concat(de.instance().getData(184)," ").concat(a," %")),100==e&&(game.load.onFileComplete.removeAll(),game.load.onLoadComplete.add(this.onLoadAfterComplete),game.load.start())}},{key:"onLoadAfterComplete",value:function(){LogConsole.log("on load complete")}},{key:"loadXML",value:function(){game.load.atlas("defaultSource","img/atlas/defaultSource.png"+"?v=".concat(window.VersionClient),"img/atlas/defaultSource.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("vipSource","img/atlas/vip.png"+"?v=".concat(window.VersionClient),"img/atlas/vip.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("popup","img/atlas/popup.png"+"?v=".concat(window.VersionClient),"img/atlas/popup.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.spritesheet("trueanswer","img/atlas/TrueAnswer.png"+"?v=".concat(window.VersionClient),180,180,19),game.load.spritesheet("failanswer","img/atlas/FailAnswer.png"+"?v=".concat(window.VersionClient),180,180,19),game.load.atlas("limitTurn","img/atlas/limitTurn.png"+"?v=".concat(window.VersionClient),"img/atlas/limitTurn.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("playlistSprites","img/atlas/choosePlaylist.png"+"?v=".concat(window.VersionClient),"img/atlas/choosePlaylist.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("otherSprites","img/atlas/OtherSprites.png"+"?v=".concat(window.VersionClient),"img/atlas/OtherSprites.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.spritesheet("actionphaseanswer1","img/atlas/ActionPhaseAnswer1.png"+"?v=".concat(window.VersionClient),350,350,24),game.load.spritesheet("actionphaseanswer2","img/atlas/ActionPhaseAnswer2.png"+"?v=".concat(window.VersionClient),336,317,24),game.load.spritesheet("actionphaseanswer3","img/atlas/ActionPhaseAnswer3.png"+"?v=".concat(window.VersionClient),382,320,23),game.load.atlas("dailyRewardSprites","img/atlas/dailyReward.png"+"?v=".concat(window.VersionClient),"img/atlas/dailyReward.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("mainMenuSprites","img/atlas/mainMenu.png"+"?v=".concat(window.VersionClient),"img/atlas/mainMenu.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("songDetailSprites","img/atlas/songDetail.png"+"?v=".concat(window.VersionClient),"img/atlas/songDetail.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.spritesheet("EffectAchiment","img/atlas/EffectAchiment.png"+"?v=".concat(window.VersionClient),112*oe.instance().scale,114*oe.instance().scale,20),game.load.spritesheet("SoloModeStar","img/animations/SoloModeStar/SoloModeStar.png"+"?v=".concat(window.VersionClient),125*oe.instance().scale,125*oe.instance().scale,26),game.load.atlas("questAndAchieveSprites","img/atlas/questAchievement.png"+"?v=".concat(window.VersionClient),"img/atlas/questAchievement.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.spritesheet("LevelUp","img/atlas/LevelUp.png"+"?v=".concat(window.VersionClient),240,146,61),game.load.atlas("IconChatOnlineMode","img/atlas/IconChatGame.png"+"?v=".concat(window.VersionClient),"img/atlas/IconChatGame.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("disconnectSprites","img/atlas/disconnect.png"+"?v=".concat(window.VersionClient),"img/atlas/disconnect.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("isNewUserSprites","img/atlas/newUser.png"+"?v=".concat(window.VersionClient),"img/atlas/newUser.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("practicePopupSprites","img/assetss/Practice/Ingame/sprites.png"+"?v=".concat(window.VersionClient),"img/assetss/Practice/Ingame/sprites.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("mailSprites","img/atlas/mail.png"+"?v=".concat(window.VersionClient),"img/atlas/mail.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("friendRequestSprites","img/atlas/friendRequest.png"+"?v=".concat(window.VersionClient),"img/atlas/friendRequest.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.atlas("settingSprites","img/atlas/setting.png"+"?v=".concat(window.VersionClient),"img/atlas/setting.json"+"?v=".concat(window.VersionClient),Phaser.Loader.TEXTURE_ATLAS_JSON_HASH),game.load.audio("beep_audio","img/assetss/sound/PipCountDown.mp3"+"?v=".concat(window.VersionClient)),game.load.image("ava_bot","img/ava_bot.jpg")}},{key:"createSpritesForLoadState",value:function(){this.positionBootConfig=this.getpositionBootConfig(),this.addBackgroundSprite(),this.addLogoSprite(),this.addAnimLoading(),this.addLoadingProgressTxt(),this.addTermText(),this.addDance()}},{key:"addLoadingProgressTxt",value:function(){this.loadingTxt=game.add.text(this.positionBootConfig.txt_loading.x*window.GameConfig.RESIZE,this.positionBootConfig.txt_loading.y*window.GameConfig.RESIZE,de.instance().getData(184),this.positionBootConfig.txt_loading.configs),this.loadingTxt.anchor.set(.5)}},{key:"addAnimLoading",value:function(){var e=new ve;this.state.add.existing(e),e.deleteTxtLoading()}},{key:"addThemeTET",value:function(){var e=new Pe;this.state.add.existing(e)}}])&&Re(n.prototype,i),o&&Re(n,o),t}();function Le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var De=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"LOGIN",get:function(){return"screen_login"}},{key:"MAIN_MENU",get:function(){return"screen_main_menu"}},{key:"QUEST_ACHIEVEMENT",get:function(){return"screen_quest_achievement"}},{key:"EVENT_MODE",get:function(){return"screen_event_mode"}},{key:"QUICK_PLAY",get:function(){return"screen_quick_play"}},{key:"RANKING_ALL",get:function(){return"screen_ranking_all"}},{key:"SOLO_MODE",get:function(){return"screen_solo_mode"}},{key:"ONLINE_MODE",get:function(){return"screen_online_mode"}},{key:"MAIL",get:function(){return"screen_mail"}},{key:"ADD_FRIEND",get:function(){return"screen_add_friend"}},{key:"NEW_USER",get:function(){return"screen_new_user"}},{key:"TURN_BASE",get:function(){return"screen_turn_base"}},{key:"POPUP_ILLEGAL_TURN",get:function(){return"screen_popup_illegal_turn"}},{key:"DAILY_REWARD",get:function(){return"screen_daily_reward"}},{key:"SOLOMODE_TIMEOUT",get:function(){return"popup_solomode_timeout"}},{key:"SOLOMODE_LOSE_POPUP",get:function(){return"popup_solomode_lose"}},{key:"SOLOMODE_REWARD",get:function(){return"popup_solomode_reward"}},{key:"SOLOMODE_NOT_REWARD",get:function(){return"popup_solomode_not_reward"}},{key:"SOLOMODE_DONE",get:function(){return"popup_solomode_done"}},{key:"ANIM_CLAIM_REWARD",get:function(){return"anim_claim_reward"}},{key:"QUEST_CLAIM_POPUP",get:function(){return"popup_claim_quest"}},{key:"ACHIEVEMENT_CLAIM_POPUP",get:function(){return"popup_claim_achievement"}},{key:"CHAT_SCREEN",get:function(){return"chat_screen"}},{key:"SETTING_GAME",get:function(){return"screen_setting"}}],(n=null)&&Le(t.prototype,n),i&&Le(t,i),e}();function Ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"LEVEL_UP_NOTIFICATION",get:function(){return"LEVEL_UP_NOTIFICATION"}},{key:"CHAT_ONLINE_MODE",get:function(){return"CHAT_ONLINE_MODE"}},{key:"CHAT_EVENT_MODE",get:function(){return"CHAT_EVENT_MODE"}},{key:"FB_USER_INVITE_FRIEND_REQUEST",get:function(){return"FB_USER_INVITE_FRIEND_REQUEST"}},{key:"FB_USER_INVITE_FRIEND_RESPONSE",get:function(){return"FB_USER_INVITE_FRIEND_RESPONSE"}},{key:"FB_USER_SHARED_RESULT_REQUEST",get:function(){return"FB_USER_SHARED_RESULT_REQUEST"}},{key:"FB_USER_SHARED_RESULT_RESPONSE",get:function(){return"FB_USER_SHARED_RESULT_RESPONSE"}},{key:"BROADCASH_NOTIFICATION",get:function(){return"BROADCASH_NOTIFICATION"}},{key:"INIT_CLIENT_GAME_DATA_REQUEST",get:function(){return"INIT_CLIENT_GAME_DATA_REQUEST"}},{key:"INIT_CLIENT_GAME_DATA_RESPONSE",get:function(){return"INIT_CLIENT_GAME_DATA_RESPONSE"}},{key:"TURNBASE_RELOAD_RANDOM_OPPONENT_REQUEST",get:function(){return"TURNBASE_RELOAD_RANDOM_OPPONENT_REQUEST"}},{key:"TURNBASE_RELOAD_RANDOM_OPPONENT_RESPONSE",get:function(){return"TURNBASE_RELOAD_RANDOM_OPPONENT_RESPONSE"}},{key:"INIT_ONLINE_MODE_BET_REQUEST",get:function(){return"INIT_ONLINE_MODE_BET_REQUEST"}},{key:"INIT_ONLINE_MODE_BET_RESPONSE",get:function(){return"INIT_ONLINE_MODE_BET_RESPONSE"}},{key:"INIT_ONLINE_MODE_ROOM_BET_REQUEST",get:function(){return"INIT_ONLINE_MODE_ROOM_BET_REQUEST"}},{key:"INIT_ONLINE_MODE_ROOM_BET_RESPONSE",get:function(){return"INIT_ONLINE_MODE_ROOM_BET_RESPONSE"}},{key:"INIT_EVENT_LIST_REQUEST",get:function(){return"INIT_EVENT_LIST_REQUEST"}},{key:"INIT_EVENT_LIST_RESPONSE",get:function(){return"INIT_EVENT_LIST_RESPONSE"}},{key:"INIT_SUGGESTION_OPPONENT_REQUEST",get:function(){return"INIT_SUGGESTION_OPPONENT_REQUEST"}},{key:"INIT_SUGGESTION_OPPONENT_RESPONSE",get:function(){return"INIT_SUGGESTION_OPPONENT_RESPONSE"}},{key:"INIT_PLAYLIST_LEVEL_SETTING_REQUEST",get:function(){return"INIT_PLAYLIST_LEVEL_SETTING_REQUEST"}},{key:"INIT_PLAYLIST_LEVEL_SETTING_RESPONSE",get:function(){return"INIT_PLAYLIST_LEVEL_SETTING_RESPONSE"}},{key:"INIT_MAIN_QUEST_DATA_REQUEST",get:function(){return"INIT_MAIN_QUEST_DATA_REQUEST"}},{key:"INIT_MAIN_QUEST_DATA_RESPONSE",get:function(){return"INIT_MAIN_QUEST_DATA_RESPONSE"}},{key:"INIT_SHOP_PLAYLIST_REQUEST",get:function(){return"INIT_SHOP_PLAYLIST_REQUEST"}},{key:"INIT_SHOP_PLAYLIST_RESPONSE",get:function(){return"INIT_SHOP_PLAYLIST_RESPONSE"}},{key:"INIT_USER_PLAYLIST_MAPPING_REQUEST",get:function(){return"INIT_USER_PLAYLIST_MAPPING_REQUEST"}},{key:"INIT_USER_PLAYLIST_MAPPING_RESPONSE",get:function(){return"INIT_USER_PLAYLIST_MAPPING_RESPONSE"}},{key:"EVENT_UPDATE",get:function(){return"EVENT_UPDATE"}},{key:"ONE_SIGNAL_UPDATE_REQUEST",get:function(){return"ONE_SIGNAL_UPDATE_REQUEST"}}],(n=null)&&Ge(t.prototype,n),i&&Ge(t,i),e}();function Ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Be=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){LogConsole.log("SendFbUserInvite : ");for(var n=new SFS2X.SFSArray,i=0;i<t.length;i++)LogConsole.log(t[i]),n.addUtfString(t[i]);var o=new SFS2X.SFSObject;return o.putUtfString("invite_id",e),o.putSFSArray("fb_ids",n),o}}],(n=null)&&Ne(t.prototype,n),i&&Ne(t,i),e}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Fe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event={loginComplete:new Phaser.Signal,loginError:new Phaser.Signal,logoutDone:new Phaser.Signal,logoutErr:new Phaser.Signal,loginStatusUnknown:new Phaser.Signal}}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.fbMobile||(this.fbMobile=new e),this.fbMobile}}],(n=[{key:"init",value:function(){facebookConnectPlugin.getLoginStatus(this.getLoginStatusSuccess.bind(this),this.getLoginStatusFail.bind(this))}},{key:"getLoginStatusSuccess",value:function(e){console.log("getLoginStatus succeed, statua written in log"),console.log(e),"connected"===e.status?(oe.instance().LOG_IN_BY_FB=!0,this.onLoginSuccess(e)):"unknown"===e.status&&this.event.loginStatusUnknown.dispatch()}},{key:"login",value:function(){facebookConnectPlugin.login(["public_profile","email","user_gender","user_friends"],this.onLoginSuccess.bind(this),this.onLoginError.bind(this))}},{key:"logout",value:function(e){facebookConnectPlugin.logout(function(t){oe.instance().LOG_IN_BY_FB=!1;var n="";"OK"==t&&(n="unknown"),e({status:n})},function(t){console.log("logout fail!"),console.log(t),e(t)})}},{key:"getLoginStatusFail",value:function(e){console.log("getLoginStatus fail, error written in log"),console.log(e)}},{key:"onLoginSuccess",value:function(e){console.log("login succeed, userData written in log"),console.log(e),this.event.loginComplete.dispatch(e.authResponse)}},{key:"onLoginError",value:function(e){console.log("login fail, error written in log"),console.log(e),this.event.loginError.dispatch()}},{key:"logEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;facebookConnectPlugin.logEvent(oe.instance().platform+"_"+e,{},t,this.onLogEventSuccess.bind(this),this.onLogEventError.bind(this))}},{key:"onLogEventSuccess",value:function(e){console.log("onLogEventSuccess"),console.log(e)}},{key:"onLogEventError",value:function(e){console.log("onLogEventError"),console.log(e)}},{key:"share",value:function(){var e=game.canvas.toDataURL("image/png");console.log("data image------------"),console.log(e);var t={message:"Wazzat so tài âm nhạc",subject:"Wazzat",files:[e]};window.plugins.socialsharing.shareWithOptions(t,function(e){console.log("share ok"),console.log(e),dV.instance().sendData(Me.FB_USER_SHARED_RESULT_REQUEST,null)},function(e){console.log("share fail"),console.log(e)})}},{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),i=new Uint8Array(n),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([n],{type:"image/png"})}},{key:"shareSuccess",value:function(e){console.log("showDialog success, data written in log"),console.log(e),dV.instance().sendData(Me.FB_USER_SHARED_RESULT_REQUEST,null)}},{key:"shareError",value:function(e){console.log("showDialog fail, error written in log"),console.log(e)}},{key:"invite",value:function(){console.log("invite");facebookConnectPlugin.showDialog({method:"apprequests",message:"So Tài Âm Nhạc",data:{},title:"So Tài Âm Nhạc",actionType:"askfor",filters:"app_non_users"},this.inviteSuccess.bind(this),this.inviteError.bind(this))}},{key:"inviteSuccess",value:function(e){console.log("inviteSuccess success, data written in log"),console.log(e),"object"===je(e)&&e.hasOwnProperty("requestId")&&dV.instance().sendData(Me.FB_USER_INVITE_FRIEND_REQUEST,Be.begin(e.requestId,e.recipientsIds))}},{key:"inviteError",value:function(e){console.log("inviteError fail, error written in log"),console.log(e)}}])&&Ue(t.prototype,n),i&&Ue(t,i),e}();function Ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var He=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.fbChecking||(this.fbChecking=new e),this.fbChecking}},{key:"Login_buttons",get:function(){return"Button_Login"}},{key:"Choose_genre_Buttons",get:function(){return"Button_Choose_genre"}},{key:"Find_Game_turnbase_mode_button",get:function(){return"Button_turnbase_mode"}},{key:"Find_Game_turbase_random_opponent_button",get:function(){return"Button_turbase_random_opponent"}},{key:"Find_Game_Suggestion_Opponent_profile_button",get:function(){return"Button_Suggestion_Opponent_profile"}},{key:"Party_online_mode_button",get:function(){return"Button_Party_online_mode"}},{key:"Party_online_mode_quickplay_button",get:function(){return"Button_quickplay"}},{key:"Party_online_mode_Creatroom_button",get:function(){return"Button_Creatroom"}},{key:"Solo_mode_button",get:function(){return"Button_Solo_mode"}},{key:"Solo_mode_quiz_play_button",get:function(){return"Button_Solo_mode_quiz_play"}},{key:"Solo_mode_ranking_button",get:function(){return"Button_Solo_mode_ranking"}},{key:"Event_mode_button",get:function(){return"Button_Event_mode"}},{key:"Event_mode_join_room_button",get:function(){return"Button_Event_mode_join_room"}},{key:"Event_mode_play_button",get:function(){return"Button_Event_mode_play"}},{key:"Ranking_level_button",get:function(){return"Button_Ranking_level"}},{key:"Ranking_diamond_button",get:function(){return"Button_Ranking_diamond"}},{key:"Ranking_turnbase_button",get:function(){return"Button_Ranking_turnbase"}},{key:"Ranking_online_button",get:function(){return"Button_Ranking_online"}},{key:"Quest_main_button",get:function(){return"Button_Quest_main"}},{key:"Quest_Achievement_button",get:function(){return"Button_Quest_Achievement"}},{key:"Quest_Daily_button",get:function(){return"Button_Quest_Daily"}},{key:"Mail_button",get:function(){return"Button_Mail"}},{key:"Shop_playlist_button",get:function(){return"Button_Shop_playlist"}},{key:"Shop_resource_button",get:function(){return"Button_Shop_resource"}},{key:"Shop_items_support_butotn",get:function(){return"Button_Shop_items_support_butotn"}},{key:"Shop_Vip_button",get:function(){return"Button_Shop_Vip"}},{key:"Friend_add_button",get:function(){return"Button_Friend_add"}},{key:"Loading",get:function(){return"Sreen_Loading"}},{key:"LoginScreen",get:function(){return"Sreen_LoginScreen"}},{key:"Mainmenu",get:function(){return"Sreen_Mainmenu"}},{key:"Choose_genre",get:function(){return"Sreen_Choose_genre"}},{key:"Main_menu",get:function(){return"Sreen_Main_menu"}},{key:"Daily_reward",get:function(){return"Sreen_Daily_reward"}},{key:"Find_Game_turnbase_mode",get:function(){return"Sreen_Find_Game_turnbase_mode"}},{key:"Find_Game_turbase_random_opponent",get:function(){return"Sreen_turbase_random_opponent"}},{key:"Find_Game_Suggestion_Opponent_profile",get:function(){return"Sreen_Suggestion_Opponent_profile"}},{key:"Party_online_mode",get:function(){return"Sreen_Party_online_mode"}},{key:"Party_online_mode_quickplay",get:function(){return"Sreen_Party_online_mode_quickplay"}},{key:"Party_online_mode_Creatroom",get:function(){return"Sreen_Party_online_mode_Creatroom"}},{key:"Solo_mode",get:function(){return"Sreen_Solo_mode"}},{key:"Solo_mode_quiz_play",get:function(){return"Sreen_Solo_mode_quiz_play"}},{key:"Solo_mode_ranking",get:function(){return"Sreen_Solo_mode_ranking"}},{key:"Event_mode",get:function(){return"Sreen_Event_mode"}},{key:"Event_mode_join_room",get:function(){return"Sreen_Event_mode_join_room"}},{key:"Event_mode_play",get:function(){return"Sreen_Event_mode_play"}},{key:"Ranking_level",get:function(){return"Sreen_Ranking_level"}},{key:"Ranking_diamond",get:function(){return"Sreen_Ranking_diamond"}},{key:"Ranking_turnbase",get:function(){return"Sreen_Ranking_turnbase"}},{key:"Ranking_online",get:function(){return"Sreen_Ranking_online"}},{key:"Quest_main",get:function(){return"Sreen_Quest_main"}},{key:"Quest_Achievement",get:function(){return"Sreen_Quest_Achievement"}},{key:"Quest_Daily",get:function(){return"Sreen_Quest_Daily"}},{key:"Mail",get:function(){return"Sreen_Mail"}},{key:"Shop_playlist",get:function(){return"Sreen_Shop_playlist"}},{key:"Shop_resource",get:function(){return"Sreen_Shop_resource"}},{key:"Shop_items_support",get:function(){return"Sreen_Shop_items_support"}},{key:"Shop_Vip",get:function(){return"Sreen_Shop_Vip"}},{key:"Friend_add",get:function(){return"Sreen_Friend_add"}},{key:"Popup_Quest",get:function(){return"Sreen_Popup_Quest"}},{key:"Popup_Achievement",get:function(){return"Sreen_Popup_Achievement"}},{key:"Popup_invite_online_room",get:function(){return"Sreen_Popup_invite_online_room"}},{key:"Screen_Play_Script",get:function(){return"screen_play_script"}},{key:"Screen_Play_Script_Skip",get:function(){return"screen_play_script_skip"}},{key:"total_time",get:function(){return"total_time"}},{key:"play_time",get:function(){return"play_time"}},{key:"pro_bad_imp",get:function(){return"pro_bad_imp"}},{key:"pro_bad_click",get:function(){return"pro_bad_click"}},{key:"pro_fad_imp",get:function(){return"pro_fad_imp"}},{key:"pro_fad_click",get:function(){return"pro_fad_click"}},{key:"pro_rad_imp",get:function(){return"pro_rad_imp"}},{key:"pro_quiz_start_createroom",get:function(){return"pro_quiz_start_createroom"}},{key:"pro_quiz_end_createroom",get:function(){return"pro_quiz_end_createroom"}},{key:"pro_quiz_start_quickplay",get:function(){return"pro_quiz_start_quickplay"}},{key:"pro_quiz_end_quickplay",get:function(){return"pro_quiz_end_quickplay"}},{key:"pro_quiz_start_turnbase",get:function(){return"pro_quiz_start_turnbase"}},{key:"pro_quiz_end_turnbase",get:function(){return"pro_quiz_end_turnbase"}},{key:"pro_quiz_start_solomode",get:function(){return"pro_quiz_start_solomode"}},{key:"pro_quiz_end_solomode",get:function(){return"pro_quiz_end_solomode"}},{key:"pro_quiz_start_eventmode",get:function(){return"pro_quiz_start_eventmode"}},{key:"pro_quiz_end_eventmode",get:function(){return"pro_quiz_end_eventmode"}},{key:"InterstitialTurnBase",get:function(){return"InterstitialTurnBase"}},{key:"InterstitialQuickPlay",get:function(){return"InterstitialQuickPlay"}},{key:"InterstitialCreateRoom",get:function(){return"InterstitialCreateRoom"}},{key:"InterstitialSoloModeWin",get:function(){return"InterstitialSoloModeWin"}},{key:"InterstitialSoloModeGameOver",get:function(){return"InterstitialSoloModeGameOver"}},{key:"InterstitialQuest",get:function(){return"InterstitialQuest"}},{key:"InterstitialAchievement",get:function(){return"InterstitialAchievement"}},{key:"InterstitialDoneSoloMode",get:function(){return"InterstitialDoneSoloMode"}},{key:"InterstitialEventMode",get:function(){return"InterstitialEventMode"}},{key:"RewardVideoInappDiamond",get:function(){return"RewardVideoInappDiamond"}},{key:"RewardVideoInappTicket",get:function(){return"RewardVideoInappTicket"}},{key:"RewardVideoInappHeart",get:function(){return"RewardVideoInappHeart"}},{key:"RewardVideoInappSupportItem",get:function(){return"RewardVideoInappSupportItem"}},{key:"RewardVideoX2DailyReward",get:function(){return"RewardVideoX2DailyReward"}},{key:"RewardVideoGetHeartInSoloMode",get:function(){return"RewardVideoGetHeartInSoloMode"}},{key:"RewardVideoX2DiamondButtonSoloMode",get:function(){return"RewardVideoX2DiamondButtonSoloMode"}},{key:"RewardVideoLuckyWheel",get:function(){return"RewardVideoLuckyWheel"}},{key:"BannerQuest",get:function(){return"BannerQuest"}},{key:"BannerEventRoom",get:function(){return"BannerEventRoom"}},{key:"BannerUserProfile",get:function(){return"BannerUserProfile"}},{key:"BannerViewAllFriend",get:function(){return"BannerViewAllFriend"}},{key:"BannerInfoSong",get:function(){return"BannerInfoSong"}},{key:"BannerPartyMode",get:function(){return"BannerPartyMode"}},{key:"BannerQuickPlayModeRoom",get:function(){return"BannerQuickPlayModeRoom"}},{key:"BannerChooseBettingQuickPlay",get:function(){return"BannerChooseBettingQuickPlay"}},{key:"BannerWaitingRoomQuickPlayScreen",get:function(){return"BannerWaitingRoomQuickPlayScreen"}},{key:"BannerChoosePlayListQuickPlay",get:function(){return"BannerChoosePlayListQuickPlay"}},{key:"BannerChooseBettingCreateRoom",get:function(){return"BannerChooseBettingCreateRoom"}},{key:"BannerInviteOtherFriend",get:function(){return"BannerInviteOtherFriend"}},{key:"SuggetRatingShow",get:function(){return"SuggetRatingShow"}},{key:"SuggetRatingVoteSau",get:function(){return"SuggetRatingVoteSau"}},{key:"SuggetRatingVoteNgay",get:function(){return"SuggetRatingVoteNgay"}},{key:"SuggetRatingClose",get:function(){return"SuggetRatingClose"}}],(n=[{key:"logEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;!0===window.isTest&&(window.cordova&&"undefined"!=typeof device?Fe.instance().logEvent(e,t):FB.AppEvents.logEvent(oe.instance().platform+"_"+e,t))}}])&&Ze(t.prototype,n),i&&Ze(t,i),e}();function Ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Qe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callMessageFromChatScreen=!0,this.event={updateGemPlayer:new Phaser.Signal,tweenAllClaimDailyQuestDone:new Phaser.Signal,onConnectServer:new Phaser.Signal,chooseExitBadConnection:new Phaser.Signal,bad_connection:new Phaser.Signal,updateDescription:new Phaser.Signal,clickOKDialog:new Phaser.Signal,searchFriendBackUserProfile:new Phaser.Signal,backButton:new Phaser.Signal,chooseNoPopupConfirm:new Phaser.Signal,turnBaseUpdate:new Phaser.Signal,backChat:new Phaser.Signal,backSystemChat:new Phaser.Signal,backLastWeek:new Phaser.Signal,newMessage:new Phaser.Signal,loadMessagesDone:new Phaser.Signal,loadSystemMessagesDone:new Phaser.Signal}}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.eventgame||(this.eventgame=new e),this.eventgame}}],(n=null)&&Ve(t.prototype,n),i&&Ve(t,i),e}();function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ke(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e,t,n){return(ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ye(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ke(this,Ye(t).call(this,game,null))).afterCreate(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,Phaser.Group),n=t,(i=[{key:"afterCreate",value:function(){}},{key:"checkShowInvite",value:function(e){}},{key:"formatName",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.length>t){var i=e.substring(0,t);return!1===n?i:i.trim()+"..."}return e}},{key:"swap",value:function(e,t,n){var i=e[n];e[n]=e[t],e[t]=i}},{key:"financial",value:function(e){return Number.parseFloat(e).toFixed(1)}},{key:"compare",value:function(e,t){return e.score<t.score?1:e.score>t.score?-1:0}},{key:"compareOwner",value:function(e,t){return e.is_owner<t.is_owner?1:e.is_owner>t.is_owner?-1:0}},{key:"compareUserPlaylistMappingUpdate",value:function(e,t){if(e.hasOwnProperty("user")&&t.hasOwnProperty("user"))return e.user.updated<t.user.updated?1:e.user.updated>t.user.updated?-1:0}},{key:"sortAZ",value:function(e,t){var n=e.name.toUpperCase(),i=t.name.toUpperCase();return n<i?-1:n>i?1:0}},{key:"sortNewPlayList",value:function(e,t){var n=e.created,i=t.created;return n<i?1:n>i?-1:0}},{key:"sortPhoBien",value:function(e,t){var n=e.purchased_count,i=t.purchased_count;return n<i?1:n>i?-1:0}},{key:"getTime",value:function(){return(new Date).getTime()}},{key:"xoa_dau",value:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/đ/g,"d")).replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g,"A")).replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g,"E")).replace(/Ì|Í|Ị|Ỉ|Ĩ/g,"I")).replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g,"O")).replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g,"U")).replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g,"Y")).replace(/Đ/g,"D")}},{key:"tweenItemPopup",value:function(e,t){game.add.tween(e).to({y:t},200,Phaser.Easing.Exponential.In,!0)}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){}},{key:"destroy",value:function(){if(this.removeAllItem(),ze(Ye(t.prototype),"destroy",this).call(this),null!==this){var e="";for(var n in this)if(null!==this[n]&&void 0!==this[n]&&("Array"===(e=this[n].constructor.name)||"Object"===e)){try{game.tweens.removeFrom(this[n])}catch(e){console.log(e)}"Array"===e?this[n].length=0:this[n]=null}e=null}}},{key:"removeAllItem",value:function(){if(null!==this&&this.children)for(;this.children.length>0;){var e=this.children[0];null!==e&&(this.removeChild(e),e.destroy(),e={},e=null)}}},{key:"kill",value:function(){this.callAll("kill")}},{key:"revive",value:function(){this.callAll("revive")}}])&&qe(n.prototype,i),o&&qe(n,o),t}();function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ot=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=tt(this,nt(t).call(this,game))).positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,Je),n=t,(i=[{key:"afterInit",value:function(){this.addAnim(),this.addTextLoading()}},{key:"addTextLoading",value:function(){this.txtLoading=new Phaser.Text(game,this.positionPlayConfig.txtLoading.x*window.GameConfig.RESIZE,this.positionPlayConfig.txtLoading.y*window.GameConfig.RESIZE,de.instance().getData(185),this.positionPlayConfig.txtLoading.configs),this.txtLoading.anchor.set(.5),this.addChild(this.txtLoading)}},{key:"addAnim",value:function(){this.animLoad=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,600*window.GameConfig.RESIZE,"loadingPlay");this.animLoad.animations.add("run_anim_load");this.animLoad.anchor.set(.5),this.animLoad.animations.play("run_anim_load",32,!0),this.addChild(this.animLoad)}},{key:"moveTxtLoading",value:function(){this.txtLoading.y=-200*window.GameConfig.RESIZE}},{key:"kill",value:function(){this.callAll("kill")}},{key:"revive",value:function(){this.callAll("revive")}}])&&et(n.prototype,i),o&&et(n,o),t}();function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rt(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ht=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=rt(this,lt(t).call(this,game))).idShowResult=null,e.bg=null,e.loading=null,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,Phaser.Group),n=t,o=[{key:"instance",value:function(){return this.controllLoading||(this.controllLoading=new t),this.controllLoading}}],(i=[{key:"showLoading",value:function(){this.removeAllItem(),this.bg=new Phaser.Button(game,0,0,"screen-dim2",this.chooseBgLoading,this),this.addChild(this.bg),this.loading=new ot,this.addChild(this.loading),oe.instance().isShowLoading=!0,this.removeShowResult(),this.idShowResult=game.time.events.add(20*Phaser.Timer.SECOND,this.hideLoading,this)}},{key:"chooseBgLoading",value:function(){}},{key:"removeShowResult",value:function(){null!==this.idShowResult&&(game.time.events.remove(this.idShowResult),this.idShowResult=null)}},{key:"hideLoading",value:function(){oe.instance().isShowLoading=!1,this.removeAllItem(),this.removeShowResult()}},{key:"removeAllItem",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.bg=null,this.loading=null}}])&&st(n.prototype,i),o&&st(n,o),t}();function ut(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var dt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getNamePlatform",value:function(){return"and"===oe.instance().platform?e.ANDROID:"ios"===oe.instance().platform?e.IOS:e.WEB}},{key:"ANDROID",get:function(){return"ANDROID"}},{key:"IOS",get:function(){return"IOS"}},{key:"WEB",get:function(){return"WEB"}},{key:"UNKNOWN",get:function(){return"UNKNOWN"}}],(n=null)&&ut(t.prototype,n),i&&ut(t,i),e}();var ft=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=0,this.code="",this.genre="",this.active=0,this.id=1,this.priority=1,this.region="",this.choosed=!1};function pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var gt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.objData={},this.arrLocal=[],this.arrInternational=[],this.arrAll=[]}var t,n,i;return t=e,(n=[{key:"resetData",value:function(){this.objData={},this.arrLocal=[],this.arrInternational=[],this.arrAll=[]}},{key:"setDataGenres",value:function(e){var t=new ft;t=Object.assign({},t,e),this.objData[t.id]=t,"Local"===t.region?this.arrLocal.push(t.id):this.arrInternational.push(t.id),this.arrAll.push(t.id)}},{key:"getDataGenresByLocal",value:function(e){var t=[];if("Local"===e)for(var n=0;n<this.arrLocal.length;n++)t.push(this.objData[this.arrLocal[n]]);else for(var i=0;i<this.arrInternational.length;i++)"au_my"===this.objData[this.arrInternational[i]].code||t.push(this.objData[this.arrInternational[i]]);return t}},{key:"getAll",value:function(){for(var e=[],t=0;t<this.arrAll.length;t++)e.push(this.objData[this.arrAll[t]]);return e}}])&&pt(t.prototype,n),i&&pt(t,i),e}();function yt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var mt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.playingLogic||(this.playingLogic=new e),this.playingLogic}}],(n=[{key:"randomNumber",value:function(e,t){return Math.floor(Math.random()*(t+1)+e)}},{key:"convertVersionToInt",value:function(e){for(var t=e.split("."),n=0,i=0;i<t.length;i++)n+=0==i?100*parseInt(t[i]):1==i?10*parseInt(t[i]):parseInt(t[i]);return n}},{key:"genUrlSound",value:function(e){var t=dV.instance().dataMySeft.lag_value;LogConsole.log("ping------------- : "+t);var n=320;return n=t>2048?320:t>1024?192:t>512?128:64,e=(e=e.replace("QUANTITY",n)).replace("quantity",n),LogConsole.log("url------------- : "+e),e}},{key:"format",value:function(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}},{key:"shortenLargeNumber",value:function(e,t){for(var n,i=["k","M","G","T","P","E","Z","Y"],o=i.length-1;o>=0;o--)if(e<=-(n=Math.pow(1e3,o+1))||e>=n)return+(e/n).toFixed(t)+i[o];return e}},{key:"getChangeHeight",value:function(){console.log("innerHeight "+window.innerHeight),console.log("documentElement  "+document.documentElement.clientHeight),console.log("body  "+document.body.clientHeight),console.log("screen  "+screen.height),console.log("game.height "+game.height),console.log("game.scale.scaleFactorInversed.y : "+game.scale.scaleFactorInversed.y);var e=screen.height-window.innerHeight;return e>0&&(e=(e+15)/(1-game.scale.scaleFactorInversed.y)),e}}])&&yt(t.prototype,n),i&&yt(t,i),e}();var vt=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user_id=0,this.level=0,this.playlist_id=0,this.exp_score=0,this.created=0,this.active=0,this.id=0,this.current_level_score=0,this.next_level_score=0,this.updated=0,this.master=0,this.active=0};var wt=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.is_highlight=0,this.used_times=0,this.thumb="",this.created=0,this.is_owner=0,this.description="",this.active=0,this.is_default=0,this.genre_id=0,this.price=0,this.is_general=0,this.name="",this.purchased_count=0,this.id=0,this.vipInt=0,this.vip=!1,this.is_solo_mode=0,this.updated=0,this.country_id=0,this.region="",this.user=new vt};function bt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.zoneName="",this.event={get_config_data_complete:new Phaser.Signal,reset_data_shop_playlist_complete:new Phaser.Signal,insert_data_shop_playlist_complete:new Phaser.Signal,update_playlist_reload_at_complete:new Phaser.Signal,reset_data_user_playlist_mapping_complete:new Phaser.Signal,insert_data_user_playlist_mapping_complete:new Phaser.Signal,insert_data_playlist_level_setting_complete:new Phaser.Signal,get_data_shop_playlist_complete:new Phaser.Signal,get_data_playlist_complete:new Phaser.Signal,get_data_me_playlist_complete:new Phaser.Signal,get_data_genres_complete:new Phaser.Signal,get_playlist_level_setting_complete:new Phaser.Signal,get_check_vote:new Phaser.Signal,get_messages_complete:new Phaser.Signal,get_user_messages_complete:new Phaser.Signal,get_system_messages_complete:new Phaser.Signal},document.addEventListener("deviceready",this.onDeviceReady.bind(this),!1)}var t,n,o;return t=e,o=[{key:"instance",value:function(){return this.sqlLite||(this.sqlLite=new e),this.sqlLite}}],(n=[{key:"onDeviceReady",value:function(){"web"===oe.instance().platform?this.db=window.openDatabase("wazzat","1.0","Data",10485760):this.db=window.sqlitePlugin.openDatabase({name:"wazzat.db",location:"default",androidDatabaseProvider:"system",androidLockWorkaround:1})}},{key:"getConfigData",value:function(){var e=this;this.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS config_data (playlist_reload_at text, check_vote text, id integer, stt integer primary key)"),e.executeSql("select * from config_data where id = 0",[],function(e,t){console.log("data config"),console.log(t),t.rows.length>0?oe.instance().playlist_reload_at=t.rows.item(0).playlist_reload_at:(e.executeSql("INSERT OR REPLACE INTO config_data (playlist_reload_at, id, check_vote) VALUES (?,?,?)",["",0,""],function(e,t){console.log("insert config"),console.log(t)},function(e,t){console.log(t)}),oe.instance().playlist_reload_at="")},function(e,t){console.log(t)})},function(t){console.log(t),e.event.get_config_data_complete.dispatch()},function(){e.event.get_config_data_complete.dispatch()})}},{key:"getCheckVote",value:function(){var e=this;this.db.transaction(function(t){t.executeSql("select * from config_data where id = 0",[],function(t,n){console.log("-----------"),console.log(n),n.rows.length>0?e.event.get_check_vote.dispatch(n.rows.item(0).check_vote):e.event.get_check_vote.dispatch("")},function(t,n){e.event.get_check_vote.dispatch("")})},function(t){e.event.get_check_vote.dispatch("")},function(){})}},{key:"updateCheckVote",value:function(e){this.db.transaction(function(t){t.executeSql("update config_data set check_vote = '"+e+"' where id = 0",[],function(e,t){},function(e,t){console.log(t)})},function(e){console.log(e)},function(){})}},{key:"updatePlaylistReloadAt",value:function(){var e=this;this.db.transaction(function(e){e.executeSql("UPDATE config_data SET playlist_reload_at = '"+window.RESOURCE.playlist_reload_at+"' WHERE id = 0",[],function(e,t){},function(e,t){console.log("ERROR: "+t.message),console.log(t)})},function(t){e.event.update_playlist_reload_at_complete.dispatch()},function(){e.event.update_playlist_reload_at_complete.dispatch()})}},{key:"insertTablePlaylistLevelSetting",value:function(e){var t=this;this.db.transaction(function(n){t.createTablePlaylistLevelSetting(n);for(var i=0;i<e.length;i++){var o=e[i];n.executeSql("INSERT OR REPLACE INTO playlist_level_setting (level, exp_score, id, song_number) VALUES (?,?,?,?)",[o.level,o.exp_score,o.id,o.song_number],function(e,t){},function(e,t){})}},function(e){t.event.insert_data_playlist_level_setting_complete.dispatch()},function(){t.event.insert_data_playlist_level_setting_complete.dispatch()})}},{key:"getPlaylistLevelSetting",value:function(){var e=this;this.db.transaction(function(t){t.executeSql("select * from playlist_level_setting",[],function(t,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o));e.event.get_playlist_level_setting_complete.dispatch(i)},function(t,n){e.event.get_playlist_level_setting_complete.dispatch([])})},function(t){e.event.get_playlist_level_setting_complete.dispatch([])},function(){})}},{key:"createTablePlaylistLevelSetting",value:function(e){e.executeSql("CREATE TABLE IF NOT EXISTS playlist_level_setting (level integer, exp_score integer, song_number integer, id integer primary key)")}},{key:"resetTableShopPlaylist",value:function(){var e=this;this.db.transaction(function(t){t.executeSql("DROP TABLE IF EXISTS playlist_level_setting"),t.executeSql("DROP TABLE IF EXISTS shop_playlist"),t.executeSql("DROP TABLE IF EXISTS genres"),t.executeSql("DROP TABLE IF EXISTS user_playlist_mappings"),t.executeSql("DROP TABLE IF EXISTS messages"),t.executeSql("DROP TABLE IF EXISTS system_messages"),t.executeSql("DROP TABLE IF EXISTS user_messages"),e.createTableShopPlaylist(t),e.createTableGenres(t),e.createTablePlaylistLevelSetting(t),e.createTableMessages(t)},function(t){e.event.reset_data_shop_playlist_complete.dispatch()},function(){e.event.reset_data_shop_playlist_complete.dispatch()})}},{key:"createTableShopPlaylist",value:function(e){e.executeSql("CREATE TABLE IF NOT EXISTS shop_playlist (is_highlight integer, used_times integer, thumb text, created text, is_owner integer, description text, active integer, is_default integer, genre_id integer, price integer, is_general integer, name text, purchased_count integer, playlist_id integer, vip integer, is_solo_mode integer, updated text, country_id integer, region text, id integer primary key)")}},{key:"createTableGenres",value:function(e){e.executeSql("CREATE TABLE IF NOT EXISTS genres (parent integer, code text, genre text, created text, active integer, genres_id integer, priority integer, region text, id integer primary key, zone text)")}},{key:"insertDataShopPlaylist",value:function(e){var t=this;this.db.transaction(function(n){t.createTableShopPlaylist(n),console.log(e);for(var i=0;i<e.playlists.length;i++){var o=e.playlists[i];n.executeSql("INSERT OR REPLACE INTO shop_playlist (id, is_highlight, used_times, thumb, created, is_owner, description, active, is_default, genre_id, price, is_general, name, purchased_count, playlist_id, vip, is_solo_mode, updated, country_id, region) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",[o.id,o.is_highlight,o.used_times,o.thumb,o.created,o.is_owner,o.description,o.active,o.is_default,o.genre_id,o.price,o.is_general,o.name,o.purchased_count,o.id,o.vip,o.is_solo_mode,o.updated,o.country_id,o.region],function(e,t){},function(e,t){console.log("ERROR: "+t.message)})}t.createTableGenres(n);for(var a=0;a<e.genres.length;a++){var s=e.genres[a];n.executeSql("INSERT OR REPLACE INTO genres (id, parent, code, genre, active, genres_id, priority, region, zone) VALUES (?,?,?,?,?,?,?,?, ?)",[s.id,s.parent,s.code,s.genre,s.active,s.id,s.priority,s.region,t.zoneName],function(e,t){},function(e,t){console.log("ERROR: "+t.message)})}},function(e){t.event.insert_data_shop_playlist_complete.dispatch()},function(){t.event.insert_data_shop_playlist_complete.dispatch()})}},{key:"getDataShop",value:function(){var e=this;this.db.transaction(function(t){t.executeSql("select * from shop_playlist where playlist_id not in (select playlist_id from user_playlist_mappings where user_playlist_mappings.user_id = "+dV.instance().dataMySeft.user_id+" and user_playlist_mappings.zone = '"+e.zoneName+"')",[],function(t,n){for(var i=[],o=0;o<n.rows.length;o++)i.push(e.setDataUserPlaylist(n.rows.item(o)));e.event.get_data_shop_playlist_complete.dispatch(i)},function(t,n){console.log(n),e.event.get_data_shop_playlist_complete.dispatch([])})},function(t){console.log(t),e.event.get_data_shop_playlist_complete.dispatch([])},function(){})}},{key:"setDataUserPlaylist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new wt;return n.is_highlight=e.is_highlight,n.used_times=e.used_times,n.thumb=e.thumb,n.created=parseInt(e.created),n.is_owner=e.is_owner,n.description=e.description,n.active=e.active,n.is_default=e.is_default,n.genre_id=e.genre_id,n.price=e.price,n.is_general=e.is_general,n.name=e.name,n.purchased_count=e.purchased_count,n.id=e.playlist_id,n.vipInt=e.vip,0===n.vipInt?n.vip=!1:n.vip=!0,n.is_solo_mode=e.is_solo_mode,n.updated=parseInt(e.updated),n.country_id=e.country_id,n.region=e.region,!0===t&&(n.user.user_id=e.user_id,n.user.level=e.level,n.user.playlist_id=e.playlist_id,n.user.exp_score=e.exp_score,n.user.active=e.active,n.user.id=e.id,n.user.current_level_score=e.current_level_score,n.user.next_level_score=e.next_level_score,n.user.updated=parseInt(e.updated),n.user.master=e.master,n.user.active=e.active),n}},{key:"getPlaylistMe",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.db.transaction(function(n){console.log("this.zoneName : "+e.zoneName),n.executeSql("select * from shop_playlist inner join user_playlist_mappings on shop_playlist.playlist_id = user_playlist_mappings.playlist_id WHERE user_playlist_mappings.user_id = "+dV.instance().dataMySeft.user_id+" and user_playlist_mappings.zone = '"+e.zoneName+"'",[],function(n,i){console.log(i);for(var o=[],a=0;a<i.rows.length;a++)o.push(e.setDataUserPlaylist(i.rows.item(a),!0));!0===t?n.executeSql("select * from shop_playlist where playlist_id not in (select playlist_id from user_playlist_mappings where user_playlist_mappings.user_id = "+dV.instance().dataMySeft.user_id+" and user_playlist_mappings.zone = '"+e.zoneName+"')",[],function(t,n){if(n.rows.length>0){var i=mt.instance().randomNumber(0,n.rows.length-1);e.event.get_data_me_playlist_complete.dispatch({playlist:o,suggestion_playlist:e.setDataUserPlaylist(n.rows.item(i))})}else e.event.get_data_me_playlist_complete.dispatch({playlist:o,suggestion_playlist:null})},function(t,n){console.log(n),e.event.get_data_me_playlist_complete.dispatch({playlist:o,suggestion_playlist:null})}):e.event.get_data_me_playlist_complete.dispatch(o)},function(t,n){console.log(n),e.event.get_data_me_playlist_complete.dispatch([])})},function(t){console.log(t),e.event.get_data_me_playlist_complete.dispatch([])},function(){})}},{key:"getPlaylistMeByGenres",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.db.transaction(function(i){i.executeSql("select * from shop_playlist inner join user_playlist_mappings on shop_playlist.playlist_id = user_playlist_mappings.playlist_id WHERE user_playlist_mappings.user_id = "+dV.instance().dataMySeft.user_id+" and user_playlist_mappings.zone = '"+t.zoneName+"' AND shop_playlist.genre_id = "+e,[],function(e,i){console.log("thanh cong"),console.log(i);for(var o=[],a=0;a<i.rows.length;a++)o.push(t.setDataUserPlaylist(i.rows.item(a),!0));!0===n?e.executeSql("select * from shop_playlist where playlist_id not in (select playlist_id from user_playlist_mappings where user_playlist_mappings.user_id = "+dV.instance().dataMySeft.user_id+" and user_playlist_mappings.zone = '"+t.zoneName+"')",[],function(e,n){if(n.rows.length>0){var i=mt.instance().randomNumber(0,n.rows.length-1);t.event.get_data_me_playlist_complete.dispatch({playlist:o,suggestion_playlist:t.setDataUserPlaylist(n.rows.item(i))})}else{mt.instance().randomNumber(0,n.rows.length-1);t.event.get_data_me_playlist_complete.dispatch({playlist:o,suggestion_playlist:null})}},function(e,n){t.event.get_data_me_playlist_complete.dispatch({playlist:o,suggestion_playlist:null})}):t.event.get_data_me_playlist_complete.dispatch(o)},function(e,n){t.event.get_data_me_playlist_complete.dispatch([])})},function(e){t.event.get_data_me_playlist_complete.dispatch([])},function(){})}},{key:"getQuickplayPlaylistByGenres",value:function(e){var t=this;this.db.transaction(function(n){n.executeSql("select * from shop_playlist inner join user_playlist_mappings on shop_playlist.playlist_id = user_playlist_mappings.playlist_id Where shop_playlist.genre_id = "+e+" and user_playlist_mappings.user_id = "+dV.instance().dataMySeft.user_id+" and user_playlist_mappings.zone = '"+t.zoneName+"'",[],function(n,i){console.log(i);for(var o=[],a=0;a<i.rows.length;a++)o.push(t.setDataUserPlaylist(i.rows.item(a),!0));n.executeSql("select * from shop_playlist where playlist_id not in (select playlist_id from user_playlist_mappings where user_playlist_mappings.user_id = "+dV.instance().dataMySeft.user_id+" and user_playlist_mappings.zone = '"+t.zoneName+"') AND shop_playlist.genre_id = "+e,[],function(e,n){for(var i=0;i<n.rows.length;i++)o.push(t.setDataUserPlaylist(n.rows.item(i)));t.event.get_data_me_playlist_complete.dispatch(o)},function(e,n){t.event.get_data_me_playlist_complete.dispatch(o)})},function(e,n){t.event.get_data_me_playlist_complete.dispatch([])})},function(e){t.event.get_data_me_playlist_complete.dispatch([])},function(){})}},{key:"changeActivePlaylist",value:function(e,t){var n=this;this.db.transaction(function(i){var o="update user_playlist_mappings set active = "+t+" where playlist_id = "+e+" and user_id = "+dV.instance().dataMySeft.user_id+" and zone = '"+n.zoneName+"'";console.log(o),i.executeSql(o,[],function(e,t){},function(e,t){console.log(t)})},function(e){console.log(e)},function(){console.log("thanh cong--------")})}},{key:"getPlaylistById",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=[];this.db.transaction(function(a){a.executeSql("select * from shop_playlist where playlist_id in ("+e+")",[],function(e,a){for(var s=function(s){var r=t.setDataUserPlaylist(a.rows.item(s));null!==n&&(r.user=n[r.id]),null!==i&&i===dV.instance().dataMySeft.user_id&&e.executeSql("select * from user_playlist_mappings where playlist_id = "+r.id+" and zone = '"+t.zoneName+"' and user_id = "+i,[],function(e,t){console.log(t),t.rows.length>0&&(r.user.user_id=t.rows.item(0).user_id,r.user.level=t.rows.item(0).level,r.user.playlist_id=t.rows.item(0).playlist_id,r.user.exp_score=t.rows.item(0).exp_score,r.user.active=t.rows.item(0).active,r.user.id=t.rows.item(0).id,r.user.current_level_score=t.rows.item(0).current_level_score,r.user.next_level_score=t.rows.item(0).next_level_score,r.user.updated=parseInt(t.rows.item(0).updated),r.user.master=t.rows.item(0).master,r.user.active=t.rows.item(0).active)},function(e,t){}),o.push(r)},r=0;r<a.rows.length;r++)s(r)},function(e,n){t.event.get_data_playlist_complete.dispatch([])})},function(e){t.event.get_data_playlist_complete.dispatch([])},function(){console.log("du lieu gui di -------"),console.log(o),o.length>1?t.event.get_data_playlist_complete.dispatch(o):t.event.get_data_playlist_complete.dispatch(o[0])})}},{key:"getGenresAll",value:function(){var e=this;this.db.transaction(function(t){t.executeSql("select * from genres where zone ='"+e.zoneName+"'",[],function(t,n){console.log(n);for(var i=[],o=0;o<n.rows.length;o++){var a=new ft;a.parent=n.rows.item(o).parent,a.code=n.rows.item(o).code,a.genre=n.rows.item(o).genre,a.active=n.rows.item(o).active,a.id=n.rows.item(o).genres_id,a.priority=n.rows.item(o).priority,a.region=n.rows.item(o).region,i.push(a)}e.event.get_data_genres_complete.dispatch(i)},function(t,n){console.log(n),e.event.get_data_genres_complete.dispatch([])})},function(t){e.event.get_data_genres_complete.dispatch([])},function(){})}},{key:"resetTableUserPlaylistMappings",value:function(){var e=this;this.db.transaction(function(t){e.createTableUserPlaylistMappings(t)},function(t){e.event.reset_data_user_playlist_mapping_complete.dispatch()},function(){e.event.reset_data_user_playlist_mapping_complete.dispatch()})}},{key:"insertTableUserPlaylistMappings",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("insertTableUserPlaylistMappings "),console.log(e),this.db.transaction(function(i){t.createTableUserPlaylistMappings(i);for(var o=0;o<e.length;o++){var a=e[o];i.executeSql("INSERT OR REPLACE INTO user_playlist_mappings (id, user_id, level, playlist_id, exp_score, created, active, current_level_score, next_level_score, updated, master, zone) VALUES (?,?,?,?,?,?,?,?,?,?,?,?)",[a.playlist_id,a.user_id,a.level,a.playlist_id,a.exp_score,a.created,a.active,a.current_level_score,a.next_level_score,a.updated,a.master,t.zoneName],function(e,t){console.log(t)},function(e,t){console.log(t)}),!0===n&&t.updatePlaylistTime(i,a.playlist_id)}},function(e){console.log(e),t.event.insert_data_user_playlist_mapping_complete.dispatch()},function(){t.event.insert_data_user_playlist_mapping_complete.dispatch()})}},{key:"updateExpPlaylist",value:function(e){var t=this;this.db.transaction(function(n){n.executeSql("SELECT * FROM user_playlist_mappings WHERE playlist_id ="+e+" and user_id = "+dV.instance().dataMySeft.user_id+" and zone = '"+t.zoneName+"'",[],function(n,i){if(i.rows.length>0){var o=i.rows.item(0);o.exp_score=o.exp_score+2,o.exp_score-o.current_level_score>o.next_level_score-o.current_level_score&&(o.level=o.level+1,o.current_level_score=o.next_level_score,ak.instance().playlist_level_setting[dataPlayList.user.level+1]&&(o.next_level_score=ak.instance().playlist_level_setting[o.level+1].exp_score)),n.executeSql("UPDATE user_playlist_mappings SET  exp_score = "+o.exp_score+", level = "+o.level+", current_level_score = "+o.current_level_score+", next_level_score = "+o.next_level_score+", updated = "+Date.now()+" WHERE playlist_id ="+e+" AND user_id = "+dV.instance().dataMySeft.user_id+" and zone = '"+t.zoneName+"'",[],function(e,t){},function(e,t){})}},function(e,t){console.log(t)}),t.updatePlaylistTime(n,e)},function(e){console.log(e)},function(){})}},{key:"updatePlaylistTime",value:function(e,t){console.log("playlist_id : "+t),e.executeSql("UPDATE shop_playlist SET updated = "+Date.now()+" WHERE id = "+t,[],function(e,t){console.log(t)},function(e,t){console.log(t)})}},{key:"createTableUserPlaylistMappings",value:function(e){e.executeSql("CREATE TABLE IF NOT EXISTS user_playlist_mappings (user_id integer, level integer, playlist_id integer, exp_score integer, created text, active integer, current_level_score integer, next_level_score integer, updated text, master integer, id integer primary key, zone text)")}},{key:"createTableMessages",value:function(e){e.executeSql("CREATE TABLE IF NOT EXISTS messages (is_read integer, created_sfs text, from_id integer, user_id integer, to_id integer, state text, message text, updated_sfs text, id integer primary key, zone text)",[],function(e,t){},function(e){console.log("err")})}},{key:"createTableSystemMessages",value:function(e){e.executeSql("CREATE TABLE IF NOT EXISTS system_messages (is_read integer, created_sfs text, control text, title text, message text, user_id integer, message_content_id integer, id integer primary key, zone text)",[],function(e,t){console.log("success")},function(e){console.log("err")})}},{key:"createTableUserMessages",value:function(e){e.executeSql("CREATE TABLE IF NOT EXISTS user_messages (level integer, user_name text, user_id integer, id integer primary key, avatar text, vip integer, is_online integer, zone text)",[],function(e,t){},function(e){console.log("err")})}},{key:"getUserMessages",value:function(e,t){var n=this;this.db.transaction(function(o){n.createTableUserMessages(o),o.executeSql("SELECT * from user_messages WHERE zone=? and user_id=?",[e,t],function(e,t){var o=t.rows.length,a=[];for(i=0;i<o;i++){var s=t.rows.item(i).level,r=t.rows.item(i).id,l=t.rows.item(i).user_name,c=t.rows.item(i).avatar,h=t.rows.item(i).vip,u=t.rows.item(i).is_online;h=1===h,u=!1,a.push({level:s,user_name:l,id:r,avatar:c,vip:h,is_online:u})}n.event.get_user_messages_complete.dispatch(a)},function(e){console.warn("ERRgetMesseges"),console.log(e),n.event.get_user_messages_complete.dispatch(null)})})}},{key:"updateUserMessages",value:function(e){var t=this;this.db.transaction(function(n){t.createTableUserMessages(n);!0===e.vip?e.vip=1:e.vip=0,!0===e.is_online?e.is_online=1:e.is_online=0,n.executeSql("INSERT OR REPLACE INTO user_messages (level, user_name, user_id, id, avatar, is_online, vip, zone) VALUES (?,?,?,?,?,?,?,?)",[e.level,e.user_name,e.user_id,e.id,e.avatar,e.is_online,e.vip,e.zone],function(e,t){},function(e){console.log("error user")})})}},{key:"getMesseges",value:function(e,t){var n=this;this.db.transaction(function(o){n.createTableMessages(o),o.executeSql("SELECT * FROM messages WHERE zone=?",[e],function(e,o){var a=o.rows.length,s=[];for(i=0;i<a;i++){var r=o.rows.item(i).is_read,l=parseInt(o.rows.item(i).created_sfs),c=o.rows.item(i).from_id,h=o.rows.item(i).id,u=o.rows.item(i).to_id,d=o.rows.item(i).state,f=o.rows.item(i).message,p=parseInt(o.rows.item(i).updated_sfs);c!=t&&u!=t||s.push({is_read:r,created:l,from:c,id:h,to:u,state:d,message:f,updated:p})}s.sort(function(e,t){return e.id-t.id}),n.event.get_messages_complete.dispatch(s)},function(e){console.warn("ERRgetMesseges"),console.log(e),n.event.get_messages_complete.dispatch(null)})})}},{key:"updateNewMessage",value:function(e){var t=this;this.db.transaction(function(n){t.createTableMessages(n);n.executeSql("INSERT OR REPLACE INTO messages (is_read, created_sfs, from_id, id, user_id, to_id, state, message, updated_sfs, zone) VALUES (?,?,?,?,?,?,?,?,?,?)",[e.is_read,e.created,e.from,e.id,e.user_id,e.to,e.state,e.message,e.updated,e.zone],function(e,t){},function(e){alert("Something went Wrong"),console.log(e)})})}},{key:"getSystemMessages",value:function(e,t){var n=this;this.db.transaction(function(o){n.createTableSystemMessages(o),o.executeSql("SELECT * FROM system_messages WHERE zone=? and user_id=?",[e,t],function(e,t){var o=t.rows.length,a=[];for(i=0;i<o;i++){var s=t.rows.item(i).is_read,r=parseInt(t.rows.item(i).created_sfs),l=t.rows.item(i).message_content_id,c=t.rows.item(i).control,h=t.rows.item(i).title,u=t.rows.item(i).message;a.push({is_read:s,created:r,message_content_id:l,control:c,title:h,message:u})}a.sort(function(e,t){return e.message_content_id-t.message_content_id}),n.event.get_system_messages_complete.dispatch(a)},function(e){console.warn("ERRgetMesseges"),console.log(e),n.event.get_system_messages_complete.dispatch(null)})})}},{key:"markAsReadMessage",value:function(e,t){this.db.transaction(function(n){n.executeSql("UPDATE messages SET is_read=? WHERE to_id=? and from_id=?",[1,e,t],function(e,t){console.log("SUCESS UPDATE2")},function(e){console.log("ERR UPDATE")})})}},{key:"markAsReadSystemMessage",value:function(e,t){this.db.transaction(function(n){n.executeSql("UPDATE system_messages SET is_read=? WHERE message_content_id=? and user_id=?",[1,e,t],function(e,t){console.log("SUCESS UPDATE")},function(e){console.log("ERR UPDATE")})})}},{key:"updateNewSystemMessage",value:function(e){var t=this;this.db.transaction(function(n){t.createTableSystemMessages(n);n.executeSql("INSERT OR REPLACE INTO system_messages (is_read, created_sfs, control, title, message, user_id, message_content_id, zone) VALUES (?,?,?,?,?,?,?,?)",[e.is_read,e.created,e.control,e.title,e.message,e.user_id,e.message_content_id,e.zone],function(e,t){console.log("Updated system successfully")},function(e){alert("Something went Wrong"),console.log(e)})})}}])&&bt(t.prototype,n),o&&bt(t,o),e}();function St(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.objData={},this.objGenres={},this.arrShop=[],this.arrMe=[]}var t,n,i;return t=e,(n=[{key:"resetData",value:function(){this.objData={},this.objGenres={},this.arrShop=[],this.arrMe=[]}},{key:"setExpPlaylistById",value:function(e){_t.instance().updateExpPlaylist(e)}}])&&St(t.prototype,n),i&&St(t,i),e}();function Ct(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var kt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"SHOP_PLAYLIST_LOAD_REQUEST",get:function(){return"SHOP_PLAYLIST_LOAD_REQUEST"}},{key:"SHOP_PLAYLIST_LOAD_RESPONSE",get:function(){return"SHOP_PLAYLIST_LOAD_RESPONSE"}},{key:"SHOP_BUY_PLAYLIST_REQUEST",get:function(){return"SHOP_BUY_PLAYLIST_REQUEST"}},{key:"SHOP_BUY_PLAYLIST_RESPONSE",get:function(){return"SHOP_BUY_PLAYLIST_RESPONSE"}},{key:"PLAYLIST_DETAIL_REQUEST",get:function(){return"PLAYLIST_DETAIL_REQUEST"}},{key:"PLAYLIST_DETAIL_RESPONSE",get:function(){return"PLAYLIST_DETAIL_RESPONSE"}},{key:"PLAYLIST_CHANGE_ACTIVE_REQUEST",get:function(){return"PLAYLIST_CHANGE_ACTIVE_REQUEST"}},{key:"PLAYLIST_CHANGE_ACTIVE_RESPONSE",get:function(){return"PLAYLIST_CHANGE_ACTIVE_RESPONSE"}},{key:"RESOURCE_PACKAGE_LOAD_REQUEST",get:function(){return"RESOURCE_PACKAGE_LOAD_REQUEST"}},{key:"RESOURCE_PACKAGE_LOAD_RESPONSE",get:function(){return"RESOURCE_PACKAGE_LOAD_RESPONSE"}},{key:"RESOURCE_BUY_SUPPORT_ITEM_REQUEST",get:function(){return"RESOURCE_BUY_SUPPORT_ITEM_REQUEST"}},{key:"RESOURCE_BUY_SUPPORT_ITEM_RESPONSE",get:function(){return"RESOURCE_BUY_SUPPORT_ITEM_RESPONSE"}},{key:"RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_REQUEST",get:function(){return"RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_REQUEST"}},{key:"RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_RESPONSE",get:function(){return"RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_RESPONSE"}}],(n=null)&&Ct(t.prototype,n),i&&Ct(t,i),e}();function Pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(){return new SFS2X.SFSObject}}],(n=null)&&Pt(t.prototype,n),i&&Pt(t,i),e}();function Rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var xt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"genres",get:function(){return"genres"}},{key:"parent",get:function(){return"parent"}},{key:"code",get:function(){return"code"}},{key:"genre",get:function(){return"genre"}},{key:"id",get:function(){return"id"}},{key:"priority",get:function(){return"priority"}},{key:"region",get:function(){return"region"}},{key:"playlists",get:function(){return"playlists"}},{key:"is_highlight",get:function(){return"is_highlight"}},{key:"thumb",get:function(){return"thumb"}},{key:"created",get:function(){return"created"}},{key:"is_owner",get:function(){return"is_owner"}},{key:"is_default",get:function(){return"is_default"}},{key:"genre_id",get:function(){return"genre_id"}},{key:"purchased",get:function(){return"purchased"}},{key:"songs",get:function(){return"songs"}},{key:"price",get:function(){return"price"}},{key:"is_general",get:function(){return"is_general"}},{key:"name",get:function(){return"name"}},{key:"vip",get:function(){return"vip"}},{key:"is_solo_mode",get:function(){return"is_solo_mode"}},{key:"updated",get:function(){return"updated"}},{key:"country_id",get:function(){return"country_id"}},{key:"status",get:function(){return"status"}},{key:"user_playlist_mapping",get:function(){return"user_playlist_mapping"}},{key:"user_id",get:function(){return"user_id"}},{key:"level",get:function(){return"level"}},{key:"playlist_id",get:function(){return"playlist_id"}},{key:"exp_score",get:function(){return"exp_score"}},{key:"active",get:function(){return"active"}},{key:"current_level_score",get:function(){return"current_level_score"}},{key:"next_level_score",get:function(){return"next_level_score"}},{key:"playlist",get:function(){return"playlist"}},{key:"author",get:function(){return"author"}},{key:"title",get:function(){return"title"}},{key:"singer",get:function(){return"singer"}},{key:"avatar",get:function(){return"avatar"}},{key:"file_path",get:function(){return"file_path"}},{key:"used_times",get:function(){return"used_times"}},{key:"song_links",get:function(){return"song_links"}},{key:"link_type",get:function(){return"link_type"}},{key:"song_id",get:function(){return"song_id"}},{key:"is_movie",get:function(){return"is_movie"}},{key:"link",get:function(){return"link"}},{key:"purchased_count",get:function(){return"purchased_count"}},{key:"description",get:function(){return"description"}}],(n=null)&&Rt(t.prototype,n),i&&Rt(t,i),e}();function Tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var It=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event={call_load:new Phaser.Signal},this.arrUser=[]}var t,n,i;return t=e,(n=[{key:"resetData",value:function(){this.arrUser=[]}},{key:"setUser",value:function(e){this.arrUser.push(e)}},{key:"getUser",value:function(){if(this.arrUser.length>0){var e=this.arrUser[0];return this.arrUser.splice(0,1),1===this.arrUser.length&&this.event.call_load.dispatch(),e}return null}},{key:"getArrLenght",value:function(){return this.arrUser.length}}])&&Tt(t.prototype,n),i&&Tt(t,i),e}();var At=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.finish_at=0,this.created=0,this.description=0,this.banner=0,this.active=0,this.start_at=0,this.event_type="",this.name="",this.medal="",this.id=0,this.state="",this.updated=0,this.number_user=0,this.reward_1st={}};function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gt(e,t){return!t||"object"!==Lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Gt(this,Mt(t).call(this,game,e.x*oe.instance().scale,e.y*oe.instance().scale,e.nameAtlas,e.nameSprite)),e.hasOwnProperty("tint")&&(n.tint=e.tint),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,Phaser.Image),n=t,(i=[{key:"setSize",value:function(e,t){this.width=e,this.height=t}}])&&Dt(n.prototype,i),o&&Dt(n,o),t}();function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ft(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vt={font:"Gilroy",fontSize:40*oe.instance().scale,fill:"white",align:"center",boundsAlignH:"center",boundsAlignV:"middle"},Qt=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Ft(this,Zt(t).call(this,game,e.x*oe.instance().scale,e.y*oe.instance().scale,n,Object.assign({},Vt,e.style)))).changeStyle(e.style),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,Phaser.Text),n=t,(i=[{key:"setButton",value:function(e,t){this.onInputUp=new Phaser.Signal,this.onInputUp.add(e,t),this.inputEnabled=!0,this.events.onInputOver.add(this.over,this),this.events.onInputOut.add(this.out,this),this.events.onInputDown.add(this.down,this),this.events.onInputUp.add(this.up,this)}},{key:"over",value:function(e){LogConsole.log("over text button")}},{key:"out",value:function(e){LogConsole.log("out text button")}},{key:"down",value:function(e){LogConsole.log("down text button")}},{key:"up",value:function(e){LogConsole.log("up text button"),be.instance().playSound(be.buttonclick),this.onInputUp.dispatch(e)}},{key:"changeStyle",value:function(e){var t={};for(var n in e)"maxLines"===n||(Number.isFinite(e[n])?t[n]=e[n]*oe.instance().scale:t[n]=e[n]);t=Object.assign({},this.style,t),this.setStyle(t)}}])&&Ut(n.prototype,i),o&&Ut(n,o),t}();function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kt(e,t){return!t||"object"!==Wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e,t,n){return(zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yt(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Kt(this,Yt(t).call(this,game,null))).countNumber=0,e.timerToCountTime=null,e.event={complete:new Phaser.Signal},e.ktRed=!1,e.ktPlayTween=!1,e.positionEventMode=oe.instance().positionEventMode,e.clock=new Bt(e.positionEventMode.selectroom_icon_clock),e.addChild(e.clock),e.txtCount=new Qt(e.positionEventMode.selectroom_text_time_clock,""),e.txtCount.setTextBounds(0,0,77*oe.instance().scale,24*oe.instance().scale),e.addChild(e.txtCount),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(t,Je),n=t,(i=[{key:"setTimer",value:function(e){var t=e-(new Date).getTime();this.countNumber=parseInt(t/1e3),this.setTextTimer(),this.stopCountTime(),this.timerToCountTime=this.game.time.create(!0),this.timerToCountTime.loop(1e3,this.onTimerToCountTime,this),this.timerToCountTime.start()}},{key:"setTextTimer",value:function(){var e,t="",n=parseInt(this.countNumber/3600),i=0,o=0;n>0?(t=n>9?n+":":"0"+n+":",i=parseInt(this.countNumber%3600/60),o=this.countNumber-(3600*n+60*i)):(i=parseInt(this.countNumber/60),o=this.countNumber%60),e=t+(i>9?i+":":"0"+i+":")+(o>9?o+"":"0"+o),0===n&&i<5?!1===this.ktPlayTween&&(this.ktPlayTween=!0):!0===this.ktPlayTween&&(this.ktPlayTween=!1),this.txtCount.text=e}},{key:"onTimerToCountTime",value:function(){this.countNumber--,this.countNumber<0&&(this.countNumber=0),0===this.countNumber&&(this.stopCountTime(),this.event.complete.dispatch()),!0===this.ktPlayTween&&(!1===this.ktRed?(this.ktRed=!0,this.clock.tint=16711680):(this.ktRed=!1,this.clock.tint=16777215)),this.setTextTimer()}},{key:"getTime",value:function(){return this.countNumber}},{key:"stopCountTime",value:function(){null!==this.timerToCountTime&&(this.timerToCountTime.stop(),this.timerToCountTime.destroy(),this.timerToCountTime=null)}},{key:"destroy",value:function(){this.stopCountTime(),this.removeAllItem(),zt(Yt(t.prototype),"destroy",this).call(this)}}])&&qt(n.prototype,i),o&&qt(n,o),t}();function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tn(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var an=function(e){function t(e,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=tn(this,nn(t).call(this,game,null));var o="",a=new Date(e),s=new Date(n),r=a.getDate(),l=a.getMonth()+1,c=(a.getFullYear(),a.getHours()),h=a.getMinutes(),u=s.getDate(),d=s.getMonth()+1,f=s.getFullYear(),p=s.getHours(),g=s.getMinutes();return o=u===r?c+"h"+h+" - "+p+"h"+g+" "+u+"/"+d+"/"+f:c+"h"+h+" "+r+"/"+l+" - "+p+"h"+g+" "+u+"/"+d+"/"+f,LogConsole.log(r),LogConsole.log(l),i.positionEventMode=JSON.parse(game.cache.getText("positionEventMode")),i.clock=new Bt(i.positionEventMode.selectroom_icon_clock),i.clock.x=0,i.clock.y=2*oe.instance().scale,i.addChild(i.clock),i.txtTime=new Qt(i.positionEventMode.selectroom_text_time,o),i.addChild(i.txtTime),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(t,Je),n=t,(i=[{key:"width",get:function(){return this.clock.width+this.txtTime.width+6*oe.instance().scale}}])&&en(n.prototype,i),o&&en(n,o),t}();function sn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.arrUrl=[],this.ktLoad=!1,this.event={load_image_complate:new Phaser.Signal},this.loader=new Phaser.Loader(game),this.loader.crossOrigin="anonymous",this.loader.onLoadStart.add(this.loadStart,this),this.loader.onLoadComplete.add(this.loadComplete,this)}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.controlLoad||(this.controlLoad=new e),this.controlLoad}}],(n=[{key:"loadStart",value:function(){console.log("loadStart")}},{key:"loadComplete",value:function(){console.log("loadComplete"),this.event.load_image_complate.dispatch(),this.arrUrl.splice(0,1),this.arrUrl.length>0?this.beginLoad():this.ktLoad=!1}},{key:"addLoader",value:function(e){this.arrUrl.push(e),!1===this.ktLoad&&this.beginLoad()}},{key:"beginLoad",value:function(){if(this.ktLoad=!0,this.arrUrl.length>0){var e=this.arrUrl[0];game.cache.checkImageKey(e)?(this.arrUrl.splice(0,1),this.arrUrl.length>0?this.beginLoad():this.ktLoad=!1):(this.loader.image(e,e),this.loader.start())}else this.ktLoad=!0}},{key:"resetLoad",value:function(){this.arrUrl=[],this.ktLoad=!1,this.loader.reset(),this.loader.removeAll()}}])&&sn(t.prototype,n),i&&sn(t,i),e}();function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e,t,n){return(un="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dn(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"otherSprites",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Nhactre";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=hn(this,dn(t).call(this,game,0,0,n,i))).defaultImage=i,e.defaultAtlas=n,e._width=0,e._height=0,e.countLoad=0,e.isDefault=!0,e.icon=null,e.afterCreate(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(t,Phaser.Image),n=t,(i=[{key:"afterCreate",value:function(){this.url="",this.loader=null,this.idTimeOut=null}},{key:"setSize",value:function(e,t){this._width=e,this._height=t,this.width=e,this.height=t}},{key:"beginLoad",value:function(e,t){this.url=e,this.idx=t,this.clearTimeout(),""===this.url?this.default():game.cache.checkImageKey(this.url)?this.loadImageComplete():(rn.instance().addLoader(this.url),rn.instance().event.load_image_complate.add(this.loadImageComplete,this))}},{key:"default",value:function(){this.removeImage(),this.clearTimeout(),!0===this.isDefault||(this.isDefault=!0,this.width=this._width,this.height=this._height)}},{key:"loadImageComplete",value:function(){var e=this;this.clearTimeout(),game.cache.checkImageKey(this.url)&&(rn.instance().event.load_image_complate.remove(this.loadImageComplete,this),this.idTimeOut=setTimeout(function(){e.showImage()},50*(this.idx+1)))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.idTimeOut&&(clearTimeout(this.idTimeOut),this.idTimeOut=null)})},{key:"showImage",value:function(){game.cache.checkImageKey(this.url)&&(this.isDefault=!1,this.removeImage(),this.icon=game.add.image(0,0,this.url),this.addChild(this.icon),this.width=this._width,this.height=this._height)}},{key:"removeImage",value:function(){null!==this.icon&&(this.removeChild(this.icon),this.icon.destroy(),this.icon=null)}},{key:"destroy",value:function(){this.clearTimeout(),this.removeImage(),un(dn(t.prototype),"destroy",this).call(this)}}])&&cn(n.prototype,i),o&&cn(n,o),t}();function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mn(e,t){return!t||"object"!==gn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vn(e,t,n){return(vn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wn(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bn(e,t){return(bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _n=function(e){function t(e,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mn(this,wn(t).call(this,game,e.x*oe.instance().scale,e.y*oe.instance().scale,e.nameAtlas,n,i,null,e.nameSprite))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}(t,Phaser.Button),n=t,(i=[{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),vn(wn(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}}])&&yn(n.prototype,i),o&&yn(n,o),t}();function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cn(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e,t,n){return(kn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pn(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rn=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Cn(this,Pn(t).call(this,game,e.x*oe.instance().scale,e.y*oe.instance().scale,null,i,o))).objConfig=e,game.cache.addNinePatch(e.name,e.nameAtlas,e.nameSprite,e.left*oe.instance().scale,e.right*oe.instance().scale,e.top*oe.instance().scale,e.bot*oe.instance().scale),a.bg=new Phaser.NinePatchImage(game,0,0,e.name),a.bg.targetWidth=e.width*oe.instance().scale,a.bg.targetHeight=e.height*oe.instance().scale,a.bg.UpdateImageSizes(),a.addChild(a.bg),a.addChild(a.bg),a.icon=null,e.icon&&(a.icon=new Bt(e.icon),e.icon.width&&(a.icon.width=e.icon.width*oe.instance().scale),e.icon.height&&(a.icon.height=e.icon.height*oe.instance().scale),a.addChild(a.icon)),a.lbBtn=new Qt(e.configText,n),a.reSize(),a.addChild(a.lbBtn),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(t,Phaser.Button),n=t,(i=[{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),kn(Pn(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"reSize",value:function(){var e=0,t=0,n=0,i=0,o=0,a=0;this.objConfig.configText.hasOwnProperty("paddingLeft")&&(n=this.objConfig.configText.paddingLeft*oe.instance().scale),this.objConfig.configText.hasOwnProperty("paddingRight")&&(i=this.objConfig.configText.paddingRight*oe.instance().scale),this.objConfig.configText.hasOwnProperty("paddingTop")&&(o=this.objConfig.configText.paddingTop*oe.instance().scale),this.objConfig.configText.hasOwnProperty("paddingBot")&&(a=this.objConfig.configText.paddingBot*oe.instance().scale),null==this.icon?(e=this.objConfig.configText.width?this.objConfig.configText.width*oe.instance().scale-i-n:this.width-i-n,t=this.objConfig.configText.height?this.objConfig.configText.height*oe.instance().scale-o-a:this.height-o-a,this.lbBtn.setTextBounds(0,0,e,t),this.lbBtn.x=i>0?this.width-i-e:n>0?n:(this.width-e)/2,this.lbBtn.y=o>0?o:a>0?this.height-a:(this.height-t)/2):(e=this.objConfig.configText.width?this.objConfig.configText.width*oe.instance().scale-i-n:"right"==this.objConfig.icon.align?this.width-this.icon.x-6*oe.instance().scale-i-n:this.width-this.icon.x-this.icon.width-6*oe.instance().scale-i-n,t=this.objConfig.configText.height?this.objConfig.configText.height*oe.instance().scale-o-a:this.height-o-a,this.objConfig.hasOwnProperty("alignAll")?this.setKCTextCenter():(this.lbBtn.setTextBounds(0,0,e,t),"right"==this.objConfig.icon.align?this.lbBtn.x=i>0?this.width-i-e:n>0?n:this.icon.x-e-6*oe.instance().scale:this.lbBtn.x=i>0?this.width-i-e:n>0?n:this.icon.x+this.icon.width+6*oe.instance().scale,this.lbBtn.y=o>0?o:a>0?this.height-a:(this.height-t)/2))}},{key:"setKCTextCenter",value:function(){var e=0,t=0;this.objConfig.configText.hasOwnProperty("paddingTop")&&(e=this.objConfig.configText.paddingTop*oe.instance().scale),this.objConfig.configText.hasOwnProperty("paddingBot")&&(t=this.objConfig.configText.paddingBot*oe.instance().scale);var n=6*oe.instance().scale;this.objConfig.hasOwnProperty("kc")&&(n=this.objConfig.hasOwnProperty("kc")*oe.instance().scale),"right"==this.objConfig.icon.align?(this.lbBtn.x=(this.width-(this.lbBtn.width+n+this.icon.width))/2,this.icon.x=this.lbBtn.x+this.lbBtn.width+n):(this.icon.x=(this.width-(this.lbBtn.width+n+this.icon.width))/2,this.lbBtn.x=this.icon.x+this.icon.width+n),this.lbBtn.y=e>0?e:t>0?this.height-t:(this.height-this.lbBtn.height)/2}},{key:"text",set:function(e){this.lbBtn.text=e,this.reSize()}},{key:"width",get:function(){return this.bg.targetWidth},set:function(e){this.bg.targetWidth=e,this.bg.UpdateImageSizes()}},{key:"height",get:function(){return this.bg.targetHeight},set:function(e){this.bg.targetHeight=e,this.bg.UpdateImageSizes()}}])&&En(n.prototype,i),o&&En(n,o),t}();function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function In(e,t){return!t||"object"!==xn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ln(e,t){return(Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=In(this,An(t).call(this,game,e.x*oe.instance().scale,e.y*oe.instance().scale,null)),game.cache.addNinePatch(e.name,e.nameAtlas,e.nameSprite,e.left*oe.instance().scale,e.right*oe.instance().scale,e.top*oe.instance().scale,e.bot*oe.instance().scale),n.bg=new Phaser.NinePatchImage(game,0,0,e.name),n.bg.targetWidth=e.width*oe.instance().scale,n.bg.targetHeight=e.height*oe.instance().scale,n.bg.UpdateImageSizes(),n.addChild(n.bg),n.addChild(n.bg),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ln(e,t)}(t,Phaser.Image),n=t,(i=[{key:"tint",set:function(e){if(this.bg)for(var t=0;t<this.bg.children.length;t++)this.bg.children[t].tint=e}},{key:"alpha",set:function(e){if(this.bg)for(var t=0;t<this.bg.children.length;t++)this.bg.children[t].alpha=e}},{key:"width",get:function(){return this.bg.targetWidth},set:function(e){this.bg.targetWidth=e,this.bg.UpdateImageSizes()}},{key:"height",get:function(){return this.bg.targetHeight},set:function(e){this.bg.targetHeight=e,this.bg.UpdateImageSizes()}}])&&Tn(n.prototype,i),o&&Tn(n,o),t}();function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nn(e,t){return!t||"object"!==Gn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Un=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Nn(this,Bn(t).call(this,game,null))).positionEventMode=JSON.parse(game.cache.getText("positionEventMode")),n.bg=new Dn(n.positionEventMode.queueroom_bg_win_item),n.addChild(n.bg),i&&(n.bg.height=50);var o=12*oe.instance().scale;return LogConsole.log("---------------------------------"),e.diamond>0&&(n.txtDiamond=new Qt(n.positionEventMode.queueroom_txt_win,e.diamond),i&&n.txtDiamond.changeStyle({fontSize:24}),n.txtDiamond.x=o,n.txtDiamond.y=(n.bg.height-n.txtDiamond.height)/2+3*oe.instance().scale,n.addChild(n.txtDiamond),n.iconDiamon=new Bt(n.positionEventMode.queueroom_icon_win_diamond),n.iconDiamon.x=n.txtDiamond.x+n.txtDiamond.width+3*oe.instance().scale,n.iconDiamon.y=(n.bg.height-n.iconDiamon.height)/2,n.addChild(n.iconDiamon),o=n.iconDiamon.x+n.iconDiamon.width+12*oe.instance().scale),e.ticket>0&&(n.txtTicket=new Qt(n.positionEventMode.queueroom_txt_win,e.ticket),i&&n.txtTicket.changeStyle({fontSize:24}),n.txtTicket.x=o,n.txtTicket.y=(n.bg.height-n.txtTicket.height)/2+3*oe.instance().scale,n.addChild(n.txtTicket),n.iconTicket=new Bt(n.positionEventMode.queueroom_icon_win_ticket),n.iconTicket.x=n.txtTicket.x+n.txtTicket.width+3*oe.instance().scale,n.iconTicket.y=(n.bg.height-n.iconTicket.height)/2,o=n.iconTicket.x+n.iconTicket.width+12*oe.instance().scale,n.addChild(n.iconTicket)),e.support_item>0&&(n.txtSup=new Qt(n.positionEventMode.queueroom_txt_win,e.support_item),i&&n.txtSup.changeStyle({fontSize:24}),n.txtSup.x=o,n.txtSup.y=(n.bg.height-n.txtSup.height)/2+3*oe.instance().scale,n.addChild(n.txtSup),n.iconSup=new Bt(n.positionEventMode.queueroom_icon_win_mic),n.iconSup.x=n.txtSup.x+n.txtSup.width+3*oe.instance().scale,n.iconSup.y=(n.bg.height-n.iconSup.height)/2,n.addChild(n.iconSup),o=n.iconSup.x+n.iconSup.width+12*oe.instance().scale),LogConsole.log("end ---------------------------------"),n.bg.width=o,n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(t,Je),n=t,(i=[{key:"hideBg",value:function(){this.bg.visible=!1}},{key:"width",get:function(){return this.bg.width}},{key:"height",get:function(){return this.bg.height}}])&&Mn(n.prototype,i),o&&Mn(n,o),t}();function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vn(e,t,n){return(Vn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qn(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e,t){return(Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qn=function(e){function t(e,n,i,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Hn(this,Qn(t).call(this,e,i,o))).objConfig=e,a.icon=null,e.icon&&(a.icon=new Bt(e.icon),e.icon.width&&(a.icon.width=e.icon.width*oe.instance().scale),e.icon.height&&(a.icon.height=e.icon.height*oe.instance().scale),a.addChild(a.icon)),a.lbBtn=new Qt(e.configText,n);var s=0,r=0,l=0,c=0,h=0,u=0;return e.configText.hasOwnProperty("paddingLeft")&&(l=e.configText.paddingLeft*oe.instance().scale),e.configText.hasOwnProperty("paddingRight")&&(c=e.configText.paddingRight*oe.instance().scale),e.configText.hasOwnProperty("paddingTop")&&(h=e.configText.paddingTop*oe.instance().scale),e.configText.hasOwnProperty("paddingBot")&&(u=e.configText.paddingBot*oe.instance().scale),null==a.icon?(s=a.objConfig.configText.width?a.objConfig.configText.width*oe.instance().scale-c-l:a.width-c-l,r=a.objConfig.configText.height?a.objConfig.configText.height*oe.instance().scale-h-u:a.height-h-u,a.lbBtn.setTextBounds(0,0,s,r),a.lbBtn.x=c>0?a.width-c-s:l>0?l:(a.width-s)/2,a.lbBtn.y=h>0?h:u>0?a.height-u:(a.height-r)/2):(s=a.objConfig.configText.width?a.objConfig.configText.width*oe.instance().scale-c-l:"right"==a.objConfig.icon.align?a.width-a.icon.x-6*oe.instance().scale-c-l:a.width-a.icon.x-a.icon.width-6*oe.instance().scale-c-l,r=a.objConfig.configText.height?a.objConfig.configText.height*oe.instance().scale-h-u:a.height-h-u,e.hasOwnProperty("alignAll")?a.setKCTextCenter():(a.lbBtn.setTextBounds(0,0,s,r),"right"==a.objConfig.icon.align?a.lbBtn.x=c>0?a.width-c:l>0?l:a.icon.x-s-6*oe.instance().scale:a.lbBtn.x=c>0?a.width-c:l>0?l:a.icon.x+a.icon.width+6*oe.instance().scale,a.lbBtn.y=h>0?h:u>0?a.height-u:(a.height-r)/2)),a.addChild(a.lbBtn),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)}(t,_n),n=t,(i=[{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),Vn(Qn(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"setKCTextCenter",value:function(){var e=0,t=0;this.objConfig.configText.hasOwnProperty("paddingTop")&&(e=this.objConfig.configText.paddingTop),this.objConfig.configText.hasOwnProperty("paddingBot")&&(t=this.objConfig.configText.paddingBot);var n=6*oe.instance().scale;this.objConfig.hasOwnProperty("kc")&&(n=this.objConfig.hasOwnProperty("kc")),"right"==this.objConfig.icon.align?(this.lbBtn.x=(this.width-(this.lbBtn.width+n+this.icon.width))/2,this.icon.x=this.lbBtn.x+this.lbBtn.width+n):(this.icon.x=(this.width-(this.lbBtn.width+n+this.icon.width))/2,this.lbBtn.x=this.icon.x+this.icon.width+n),this.lbBtn.y=e>0?e:t>0?this.height-t:(this.height-this.lbBtn.height)/2}},{key:"setText",value:function(e){this.lbBtn.text=e,this.objConfig.hasOwnProperty("alignAll")&&this.setKCTextCenter()}}])&&Zn(n.prototype,i),o&&Zn(n,o),t}();function Kn(e){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Yn(e,t,n){return(Yn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xn(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ei=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Xn(t).call(this,game,null))||"object"!==Kn(i)&&"function"!=typeof i?$n(n):i).event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.positionPopup=oe.instance().positionPopup,e.topBg=new Bt(e.positionPopup.popup_confirm_top_bg),e.addChild(e.topBg),e.bgText=new Dn(e.positionPopup.popup_confirm_bg_text),e.addChild(e.bgText),e.btnOk=new qn(e.positionPopup.popup_confirm_button_ok_full,de.instance().getData("102"),e.chooseOK,$n($n(e))),e.addChild(e.btnOk),e.txtContent=new Qt(e.positionPopup.popup_confirm_text_content,o),e.txtContent.setTextBounds(0,0,545*oe.instance().scale,278*oe.instance().scale),e.addChild(e.txtContent),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(t,Je),n=t,(i=[{key:"setHeight",value:function(e){this.bgText.height=e,this.txtContent.setTextBounds(0,0,545*oe.instance().scale,this.bgText.height-168*oe.instance().scale),this.btnOk.y=this.bgText.targetHeight-103*oe.instance().scale}},{key:"chooseOK",value:function(){LogConsole.log("chooseOK"),this.event.OK.dispatch()}},{key:"setTextButton",value:function(e){this.btnOk.setText(e)}},{key:"setContent",value:function(e){this.txtContent.setText(e)}},{key:"destroy",value:function(){this.topBg.destroy(),this.bgText.destroy(),this.txtContent.destroy(),this.btnOk.destroy(),Yn(Xn(t.prototype),"destroy",this).call(this)}}])&&zn(n.prototype,i),o&&zn(n,o),t}();function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ii(e,t){return!t||"object"!==ti(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oi(e,t,n){return(oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ai(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ai(e){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t){return(si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ri=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ii(this,ai(t).call(this,game))).positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),n.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),n.score=e,n.positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),n.signalBtn=new Phaser.Signal,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&si(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.screenDim,this.tabGem,this.tabHeart,this.popup,this.addScreenDim(),this.addGemAndHeart(),this.addEventExtension()}},{key:"addEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.add(this.onUpdateUserVars,this)}},{key:"removeEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.onUpdateUserVars,this)}},{key:"onUpdateUserVars",value:function(){dV.instance().dataMySeft.heart!==parseInt(this.txtHeart.text)&&(this.txtHeart.text=dV.instance().dataMySeft.heart)}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.addChild(this.screenDim)}},{key:"addGemAndHeart",value:function(){this.tabGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabGem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.nameAtlas,this.positionPracticePopupConfig.tabGem.nameSprite),this.addGemDetail(),this.addChild(this.tabGem),this.tabHeart=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabHeart.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.nameAtlas,this.positionPracticePopupConfig.tabHeart.nameSprite),this.addHeartDetail(),this.addChild(this.tabHeart)}},{key:"addGemDetail",value:function(){var e,t;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.gem_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.gem_reward.nameAtlas,this.positionPracticePopupConfig.gem_reward.nameSprite),t=new Phaser.Text(game,0,this.positionPracticePopupConfig.gem_reward_txt.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,this.positionPracticePopupConfig.gem_reward_txt.configs);var n=e.width+t.width;t.x=(this.tabGem.width-n)/2-5*window.GameConfig.RESIZE,e.x=(this.tabGem.width-n)/2+t.width+5*window.GameConfig.RESIZE,this.tabGem.addChild(e),this.tabGem.addChild(t)}},{key:"addHeartDetail",value:function(){var e;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.heart_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.heart_reward.nameAtlas,this.positionPracticePopupConfig.heart_reward.nameSprite),this.txtHeart=new Phaser.Text(game,0,this.positionPracticePopupConfig.heart_reward_txt.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("heart").value,this.positionPracticePopupConfig.heart_reward_txt.configs);var t=e.width+this.txtHeart.width;this.txtHeart.x=(this.tabHeart.width-t)/2-5*window.GameConfig.RESIZE,e.x=(this.tabHeart.width-t)/2+this.txtHeart.width+10*window.GameConfig.RESIZE,this.tabHeart.addChild(e),this.tabHeart.addChild(this.txtHeart)}},{key:"addPopup",value:function(){this.btnRank,this.btnHome,this.btnReplay,this.animTimeout,this.txtLose;var e=new Phaser.Sprite(game,this.positionPracticePopupConfig.popup_confirm_top_bg.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.nameAtlas,this.positionPracticePopupConfig.popup_confirm_top_bg.nameSprite);this.popup=new Phaser.Sprite(game,this.positionPracticePopupConfig.box_lose_practice.x*window.GameConfig.RESIZE,1136*window.GameConfig.RESIZE,null),this.popup.addChild(e);var t=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.box_lose_practice.nameAtlas,this.positionPracticePopupConfig.box_lose_practice.nameSprite);this.popup.addChild(t),this.addBtnRank(),this.addBtnHome(),this.addBtnReplay(),this.addTxtLose(),this.addAnimTimeOut(),this.addChild(this.popup)}},{key:"addBtnRank",value:function(){this.btnRank=new Phaser.Button(game,this.positionPracticePopupConfig.btn_rank_practice_lose.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_rank_practice_lose.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_rank_practice_lose.nameAtlas,function(){},this,null,this.positionPracticePopupConfig.btn_rank_practice_lose.nameSprite);var e=new Bt(this.positionPracticePopupConfig.icon_rank);this.btnRank.addChild(e);var t=new Qt(this.positionPracticePopupConfig.txt_icon_rank,de.instance().getData("235"));this.btnRank.addChild(t),this.btnRank.events.onInputUp.add(this.onClickRank,this);var n=new Phaser.Sprite(game,80*window.GameConfig.RESIZE,11*window.GameConfig.RESIZE,"btnRankAnim");this.btnRank.addChild(n);n.animations.add("run_rank");n.animations.play("run_rank",26,!0),this.popup.addChild(this.btnRank)}},{key:"onClickRank",value:function(){be.instance().playSound(be.buttonclick),this.signalBtn.dispatch({type:"RANK"}),He.instance().logEvent(He.Solo_mode_ranking_button)}},{key:"addBtnHome",value:function(){this.btnHome=new Phaser.Button(game,this.positionPracticePopupConfig.btn_home_practice_lose.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_home_practice_lose.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_home_practice_lose.nameAtlas,function(){},this,null,this.positionPracticePopupConfig.btn_home_practice_lose.nameSprite),this.popup.addChild(this.btnHome),this.btnHome.events.onInputUp.addOnce(this.onClickHome,this)}},{key:"onClickHome",value:function(){be.instance().playSound(be.buttonclick),this.signalBtn.dispatch({type:"HOME"})}},{key:"addBtnReplay",value:function(){this.btnReplay=new Phaser.Button(game,this.positionPracticePopupConfig.btn_replay_practice.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_replay_practice.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_replay_practice.nameAtlas,function(){},this,null,this.positionPracticePopupConfig.btn_replay_practice.nameSprite);var e=new Bt(this.positionPracticePopupConfig.icon_heart);this.btnReplay.addChild(e);var t=new Qt(this.positionPracticePopupConfig.txt_icon_heart,"".concat(de.instance().getData("236")).concat(de.instance().getData("321")));t.addColor("#ffd3b5",de.instance().getData("236").length),this.btnReplay.addChild(t),t.x=(this.btnReplay.width-t.width-e.width-15)/2,e.x=t.x+t.width+15,this.popup.addChild(this.btnReplay),this.btnReplay.events.onInputUp.add(this.onClickReplay,this)}},{key:"onClickReplay",value:function(){var e=this;this.btnReplay.inputEnabled=!1,this.signalBtn.dispatch({type:"REPLAY"}),this.timeoutInput=setTimeout(function(){e.btnReplay.inputEnabled=!0},500)}},{key:"addTxtLose",value:function(){this.txtLose=new Phaser.Text(game,this.positionPracticePopupConfig.txt_lose_timeout.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_lose_timeout.y*window.GameConfig.RESIZE,"".concat(de.instance().getData("237")," : ").concat(this.score),this.positionPracticePopupConfig.txt_lose_timeout.configs),this.txtLose.anchor.set(.5,0),this.popup.addChild(this.txtLose)}},{key:"addAnimTimeOut",value:function(){this.animTimeout=new Phaser.Sprite(game,285*window.GameConfig.RESIZE,73*window.GameConfig.RESIZE,"timeout_practice"),this.animTimeout.anchor.set(.5,0);this.animTimeout.animations.add("run_load_timeout");this.animTimeout.animations.play("run_load_timeout",24,!0),this.popup.addChild(this.animTimeout)}},{key:"makeTweenPopup",value:function(){be.instance().playSound(be.losesolomode),game.add.tween(this.popup).to({y:(game.height-oe.instance().STANDARD_HEIGHT+this.positionPracticePopupConfig.box_lose_practice.y)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Bounce.Out,!1).start()}},{key:"destroy",value:function(){clearTimeout(this.timeoutInput),this.removeEventExtension(),oi(ai(t.prototype),"destroy",this).call(this)}}])&&ni(n.prototype,i),o&&ni(n,o),t}();function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ci(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hi(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ui(e,t,n){return(ui="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=di(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function di(e){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hi(this,di(t).call(this,game))).positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),n.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),n.score=e,n.positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),n.signalBtn=new Phaser.Signal,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fi(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.screenDim,this.tabGem,this.tabHeart,this.addScreenDim(),this.addGemAndHeart(),this.addEventExtension()}},{key:"addEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.add(this.onUpdateUserVars,this)}},{key:"removeEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.onUpdateUserVars,this)}},{key:"onUpdateUserVars",value:function(){dV.instance().dataMySeft.heart!==parseInt(this.txtHeart.text)&&(this.txtHeart.text=dV.instance().dataMySeft.heart)}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.addChild(this.screenDim)}},{key:"addGemAndHeart",value:function(){this.tabGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabGem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.nameAtlas,this.positionPracticePopupConfig.tabGem.nameSprite),this.addGemDetail(),this.addChild(this.tabGem),this.tabHeart=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabHeart.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.nameAtlas,this.positionPracticePopupConfig.tabHeart.nameSprite),this.addHeartDetail(),this.addChild(this.tabHeart)}},{key:"addGemDetail",value:function(){var e,t;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.gem_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.gem_reward.nameAtlas,this.positionPracticePopupConfig.gem_reward.nameSprite),t=new Phaser.Text(game,0,this.positionPracticePopupConfig.gem_reward_txt.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,this.positionPracticePopupConfig.gem_reward_txt.configs);var n=e.width+t.width;t.x=(this.tabGem.width-n)/2-5*window.GameConfig.RESIZE,e.x=(this.tabGem.width-n)/2+t.width+10*window.GameConfig.RESIZE,this.tabGem.addChild(e),this.tabGem.addChild(t)}},{key:"addHeartDetail",value:function(){var e;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.heart_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.heart_reward.nameAtlas,this.positionPracticePopupConfig.heart_reward.nameSprite),this.txtHeart=new Phaser.Text(game,0,this.positionPracticePopupConfig.heart_reward_txt.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("heart").value,this.positionPracticePopupConfig.heart_reward_txt.configs);var t=e.width+this.txtHeart.width;this.txtHeart.x=(this.tabHeart.width-t)/2-5*window.GameConfig.RESIZE,e.x=(this.tabHeart.width-t)/2+this.txtHeart.width+10*window.GameConfig.RESIZE,this.tabHeart.addChild(e),this.tabHeart.addChild(this.txtHeart)}},{key:"addPopup",value:function(){this.btnRank,this.btnHome,this.btnReplay,this.animLose,this.txtLose;var e=new Phaser.Sprite(game,this.positionPracticePopupConfig.popup_confirm_top_bg.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.nameAtlas,this.positionPracticePopupConfig.popup_confirm_top_bg.nameSprite);this.popup=new Phaser.Sprite(game,this.positionPracticePopupConfig.box_lose_practice.x*window.GameConfig.RESIZE,1136*window.GameConfig.RESIZE,null),this.popup.addChild(e);var t=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.box_lose_practice.nameAtlas,this.positionPracticePopupConfig.box_lose_practice.nameSprite);this.popup.addChild(t),this.addBtnRank(),this.addBtnHome(),this.addBtnReplay(),this.addTxtLose(),this.addAnimLose(),this.addChild(this.popup)}},{key:"addBtnRank",value:function(){this.btnRank=new Phaser.Button(game,this.positionPracticePopupConfig.btn_rank_practice_lose.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_rank_practice_lose.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_rank_practice_lose.nameAtlas,function(){},this,null,this.positionPracticePopupConfig.btn_rank_practice_lose.nameSprite);var e=new Bt(this.positionPracticePopupConfig.icon_rank);this.btnRank.addChild(e);var t=new Qt(this.positionPracticePopupConfig.txt_icon_rank,de.instance().getData("235"));this.btnRank.addChild(t),this.btnRank.events.onInputUp.add(this.onClickRank,this);var n=new Phaser.Sprite(game,80*window.GameConfig.RESIZE,11*window.GameConfig.RESIZE,"btnRankAnim");this.btnRank.addChild(n);n.animations.add("run_rank");n.animations.play("run_rank",26,!0),this.popup.addChild(this.btnRank)}},{key:"onClickRank",value:function(){be.instance().playSound(be.buttonclick),this.signalBtn.dispatch({type:"RANK"}),He.instance().logEvent(He.Solo_mode_ranking_button)}},{key:"addBtnHome",value:function(){this.btnHome=new Phaser.Button(game,this.positionPracticePopupConfig.btn_home_practice_lose.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_home_practice_lose.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_home_practice_lose.nameAtlas,function(){},this,null,this.positionPracticePopupConfig.btn_home_practice_lose.nameSprite),this.popup.addChild(this.btnHome),this.btnHome.events.onInputUp.addOnce(this.onClickHome,this)}},{key:"onClickHome",value:function(){be.instance().playSound(be.buttonclick),this.signalBtn.dispatch({type:"HOME"})}},{key:"addBtnReplay",value:function(){this.btnReplay=new Phaser.Button(game,this.positionPracticePopupConfig.btn_replay_practice.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_replay_practice.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_replay_practice.nameAtlas,function(){},this,null,this.positionPracticePopupConfig.btn_replay_practice.nameSprite);var e=new Bt(this.positionPracticePopupConfig.icon_heart);this.btnReplay.addChild(e);var t=new Qt(this.positionPracticePopupConfig.txt_icon_heart,"".concat(de.instance().getData("236")).concat(de.instance().getData("321")));t.addColor("#ffd3b5",de.instance().getData("236").length),this.btnReplay.addChild(t),t.x=(this.btnReplay.width-t.width-e.width-15)/2,e.x=t.x+t.width+15,this.popup.addChild(this.btnReplay),this.btnReplay.events.onInputUp.add(this.onClickReplay,this)}},{key:"onClickReplay",value:function(){var e=this;this.btnReplay.inputEnabled=!1,this.signalBtn.dispatch({type:"REPLAY"}),this.timeoutInput=setTimeout(function(){e.btnReplay.inputEnabled=!0},500)}},{key:"addTxtLose",value:function(){this.txtLose=new Phaser.Text(game,this.positionPracticePopupConfig.txt_lose_timeout.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_lose_timeout.y*window.GameConfig.RESIZE,"".concat(de.instance().getData("237")," : ").concat(this.score),this.positionPracticePopupConfig.txt_lose_timeout.configs),this.txtLose.anchor.set(.5,0),this.popup.addChild(this.txtLose)}},{key:"addAnimLose",value:function(){this.animLose=new Phaser.Sprite(game,285*window.GameConfig.RESIZE,73*window.GameConfig.RESIZE,"wrong_practice"),this.animLose.anchor.set(.5,0);this.animLose.animations.add("run_load_wrong");this.popup.addChild(this.animLose)}},{key:"makeTweenPopup",value:function(){var e=this;be.instance().playSound(be.losesolomode);var t=game.add.tween(this.popup).to({y:(game.height-oe.instance().STANDARD_HEIGHT+this.positionPracticePopupConfig.box_lose_practice.y)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Bounce.Out,!1);t.start(),t.onComplete.add(function(){e.animLose.animations.play("run_load_wrong",15,!1)},this)}},{key:"destroy",value:function(){clearTimeout(this.timeoutInput),this.removeEventExtension(),ui(di(t.prototype),"destroy",this).call(this)}}])&&ci(n.prototype,i),o&&ci(n,o),t}();function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mi(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vi(e,t,n){return(vi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wi(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wi(e){return(wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bi(e,t){return(bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _i=function(e){function t(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=mi(this,wi(t).call(this,game))).event={tweenIconPls:new Phaser.Signal,tweenDoneAll:new Phaser.Signal},i.reward=n,i.type=e,i.finishPoint=o,i.definedPosition(),i.afterInit(),i.ktDestroy=!1,i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bi(e,t)}(t,Z),n=t,(i=[{key:"definedPosition",value:function(){this.pointsArrayGem1=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:145*window.GameConfig.RESIZE,y:255*window.GameConfig.RESIZE},{x:459*window.GameConfig.RESIZE,y:118*window.GameConfig.RESIZE},{x:380*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayGem2=[{x:520*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:520*window.GameConfig.RESIZE,y:290*window.GameConfig.RESIZE},{x:459*window.GameConfig.RESIZE,y:118*window.GameConfig.RESIZE},{x:380*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayGem3=[{x:560*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:181*window.GameConfig.RESIZE,y:538*window.GameConfig.RESIZE},{x:384*window.GameConfig.RESIZE,y:208*window.GameConfig.RESIZE},{x:380*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayGem4=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:805*window.GameConfig.RESIZE,y:471*window.GameConfig.RESIZE},{x:339*window.GameConfig.RESIZE,y:302*window.GameConfig.RESIZE},{x:380*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.arrParentGems=[this.pointsArrayGem1,this.pointsArrayGem2,this.pointsArrayGem3,this.pointsArrayGem4],this.pointsArrayMic1=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:396*window.GameConfig.RESIZE,y:313*window.GameConfig.RESIZE},{x:492*window.GameConfig.RESIZE,y:198*window.GameConfig.RESIZE},{x:194*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayMic2=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:307*window.GameConfig.RESIZE,y:349*window.GameConfig.RESIZE},{x:258*window.GameConfig.RESIZE,y:243*window.GameConfig.RESIZE},{x:194*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayMic3=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:307*window.GameConfig.RESIZE,y:349*window.GameConfig.RESIZE},{x:288*window.GameConfig.RESIZE,y:156*window.GameConfig.RESIZE},{x:194*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayMic4=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:136*window.GameConfig.RESIZE,y:417*window.GameConfig.RESIZE},{x:246*window.GameConfig.RESIZE,y:243*window.GameConfig.RESIZE},{x:194*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.arrParentMics=[this.pointsArrayMic1,this.pointsArrayMic2,this.pointsArrayMic3,this.pointsArrayMic4],this.pointsArrayTicket1=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:433*window.GameConfig.RESIZE,y:274*window.GameConfig.RESIZE},{x:287*window.GameConfig.RESIZE,y:123*window.GameConfig.RESIZE},{x:556*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayTicket2=[{x:315*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:580*window.GameConfig.RESIZE,y:324*window.GameConfig.RESIZE},{x:548*window.GameConfig.RESIZE,y:210*window.GameConfig.RESIZE},{x:556*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayTicket3=[{x:325*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:441*window.GameConfig.RESIZE,y:197*window.GameConfig.RESIZE},{x:548*window.GameConfig.RESIZE,y:209*window.GameConfig.RESIZE},{x:556*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayTicket4=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:223*window.GameConfig.RESIZE,y:331*window.GameConfig.RESIZE},{x:491*window.GameConfig.RESIZE,y:234*window.GameConfig.RESIZE},{x:556*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.arrParentTickets=[this.pointsArrayTicket1,this.pointsArrayTicket2,this.pointsArrayTicket3,this.pointsArrayTicket4],this.pointsArrayHeart1=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:396*window.GameConfig.RESIZE,y:313*window.GameConfig.RESIZE},{x:492*window.GameConfig.RESIZE,y:198*window.GameConfig.RESIZE},{x:194*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayHeart2=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:307*window.GameConfig.RESIZE,y:349*window.GameConfig.RESIZE},{x:258*window.GameConfig.RESIZE,y:243*window.GameConfig.RESIZE},{x:194*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayHeart3=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:307*window.GameConfig.RESIZE,y:349*window.GameConfig.RESIZE},{x:288*window.GameConfig.RESIZE,y:156*window.GameConfig.RESIZE},{x:194*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.pointsArrayHeart4=[{x:320*window.GameConfig.RESIZE,y:474*window.GameConfig.RESIZE},{x:136*window.GameConfig.RESIZE,y:417*window.GameConfig.RESIZE},{x:246*window.GameConfig.RESIZE,y:243*window.GameConfig.RESIZE},{x:194*window.GameConfig.RESIZE,y:55*window.GameConfig.RESIZE}],this.arrParentHearts=[this.pointsArrayHeart1,this.pointsArrayHeart2,this.pointsArrayHeart3,this.pointsArrayHeart4],null!==this.finishPoint&&("DIAMOND"==this.type?(this.pointsArrayGem1[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayGem2[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayGem3[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayGem4[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE}):"TICKET"==this.type?(this.pointsArrayTicket1[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayTicket2[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayTicket3[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayTicket4[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE}):"SUPPORT_ITEM"==this.type?(this.pointsArrayMic1[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayMic2[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayMic3[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayMic4[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE}):"HEART"==this.type&&(this.pointsArrayHeart1[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayHeart2[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayHeart3[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE},this.pointsArrayHeart4[3]={x:this.finishPoint.x*window.GameConfig.RESIZE,y:this.finishPoint.y*window.GameConfig.RESIZE}))}},{key:"afterInit",value:function(){0!==this.reward&&this.addIcon()}},{key:"addIcon",value:function(){var e=this;be.instance().playSound(be.takereward);var t="";"DIAMOND"==this.type?t="Gem_Big":"TICKET"==this.type?t="Ticket_Big":"SUPPORT_ITEM"==this.type?t="Mic_Big":"HEART"==this.type&&(t="Heart_Big"),this.icon_big=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,474*window.GameConfig.RESIZE,"otherSprites",t),this.icon_big.anchor.set(.5),this.icon_big.scale.set(.3),this.txtReward=new Phaser.Text(game,320*window.GameConfig.RESIZE,600*window.GameConfig.RESIZE,"+".concat(this.reward),{font:"GilroyBold",fill:"#3aff78",align:"center",fontSize:40}),this.txtReward.anchor.set(.5),this.txtReward.alpha=.5,this.txtReward.scale.set(.5);var n=game.add.tween(this.txtReward.scale).to({x:1,y:1},700,Phaser.Easing.Linear.In,!1);n.start(),n.onUpdateCallback(function(){e.txtReward.alpha+=.05},this),n.onComplete.add(function(){e.txtReward.destroy()},this),game.add.tween(this.icon_big.scale).to({x:1,y:1},300,Phaser.Easing.Linear.In,!1).start();var i=game.add.tween(this.icon_big).to({alpha:1},1e3,Phaser.Easing.Linear.In,!1);i.start();var o=.1;i.onUpdateCallback(function(){e.icon_big.rotation+=o,e.icon_big.rotation>.2?o=-.07:e.icon_big.rotation<-.2&&(o=.07)},this),i.onComplete.add(function(){e.icon_big.rotation=0;var t=game.add.tween(e.icon_big.scale).to({x:.5,y:.5},300,Phaser.Easing.Linear.In,!1);t.start(),t.onComplete.add(function(){e.icon_big.destroy()},e);var n={resoure:parseInt(e.txtReward.text)},i=game.add.tween(n).to({resoure:0},500,"Linear",!1);i.start(),e.txtReward.destroy(),i.onUpdateCallback(function(){},e),i.onComplete.add(function(){!1===e.ktDestroy&&e.event.tweenIconPls.dispatch()},e),e.addIconMoveCurve()},this),this.addStarNim(),this.addChild(this.icon_big),this.addChild(this.txtReward)}},{key:"addStarNim",value:function(){var e=new Phaser.Sprite(game,0,0,"SoloModeStar");e.anchor.set(.5),e.scale.set(1.5);e.animations.add("run_star");e.animations.play("run_star",30,!0),this.icon_big.addChild(e)}},{key:"addIconMoveCurve",value:function(){var e=this,t="",n=[];"DIAMOND"==this.type?(t="Gem_Big",n=this.arrParentGems):"TICKET"==this.type?(t="Ticket_Big",n=this.arrParentTickets):"SUPPORT_ITEM"==this.type?(t="Mic_Big",n=this.arrParentMics):"HEART"==this.type&&(t="Heart_Big",n=this.arrParentHearts);for(var i=function(i){var o=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,474*window.GameConfig.RESIZE,"otherSprites",t);o.scale.set(1),o.anchor.set(.5),e.addChild(o),setTimeout(function(){game.add.tween(o.scale).to({x:.2,y:.2},150,Phaser.Easing.Linear.In,!1).start();var e=game.add.tween(o).to({x:[n[i][0].x,n[i][1].x,n[i][2].x,n[i][3].x],y:[n[i][0].y,n[i][1].y,n[i][2].y,n[i][3].y]},750,Phaser.Easing.Linear.In,!1,0,0).interpolation(function(e,t){return Phaser.Math.bezierInterpolation(e,t)});e.start(),e.onComplete.add(function(){o.destroy()})},100*i),setTimeout(function(){!1===e.ktDestroy&&e.event.tweenDoneAll.dispatch(),Qe.instance().event.tweenAllClaimDailyQuestDone.dispatch()},300*e.arrParentGems.length)},o=0;o<this.arrParentGems.length;o++)i(o)}},{key:"destroy",value:function(){for(this.ktDestroy=!0;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),vi(wi(t.prototype),"destroy",this).call(this)}}])&&yi(n.prototype,i),o&&yi(n,o),t}();function Si(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ei=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.countPlayTurnBase=0,this.countPlayQuickPlay=0,this.countPlayCreateRoom=0,this.countGameOverSoloMode=0,this.countWinAndTakeRewardSoloMode=0,this.countTakeReward=0,this.countTakeAchievementReward=0,this.countEventMode=0,this.strEvent="",this.ktLoadAds=!1,this.ktLoadAdsReward=!1,this.ktRewardWin=!1,this.ktHideBanner=!1,this.ktCallInter=!1,this.ktCallReward=!1,this.event={rewardedVideoAvailabilityChanged:new Phaser.Signal,rewardedVideoRewardReceived:new Phaser.Signal,rewardedVideoStarted:new Phaser.Signal,rewardedVideoEnded:new Phaser.Signal,rewardedVideoOpened:new Phaser.Signal,rewardedVideoClosed:new Phaser.Signal,rewardedVideoFailed:new Phaser.Signal,interstitialLoaded:new Phaser.Signal,interstitialShown:new Phaser.Signal,interstitialShowFailed:new Phaser.Signal,interstitialClicked:new Phaser.Signal,interstitialClosed:new Phaser.Signal,interstitialWillOpen:new Phaser.Signal,interstitialFailedToLoad:new Phaser.Signal,bannerDidLoad:new Phaser.Signal,bannerFailedToLoad:new Phaser.Signal,bannerDidClick:new Phaser.Signal,bannerWillPresentScreen:new Phaser.Signal,bannerDidDismissScreen:new Phaser.Signal,bannerWillLeaveApplication:new Phaser.Signal},this.existAds=!1,"undefined"!=typeof AdMob&&(this.existAds=!0,document.addEventListener("onAdFailLoad",this.onAdFailLoad.bind(this)),document.addEventListener("onAdLoaded",this.onAdLoaded.bind(this)),document.addEventListener("onAdPresent",this.onAdPresent.bind(this)),document.addEventListener("onAdLeaveApp",this.onAdLeaveApp.bind(this)),document.addEventListener("onAdDismiss",this.onAdDismiss.bind(this)),AdMob.setOptions({position:AdMob.AD_POSITION.BOTTOM_CENTER,isTesting:!0,bgColor:"black"}),this.callPrepareInterstitial(),this.callPrepareRewardVideoAd())}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.ironsource||(this.ironsource=new e),this.ironsource}}],(n=[{key:"callPrepareInterstitial",value:function(){if(!1===this.ktCallInter){this.ktCallInter=!0;var e="ca-app-pub-4020852115305939/4910497782";"ios"===oe.instance().platform&&(e="ca-app-pub-4020852115305939/9316646656"),AdMob.prepareInterstitial({license:"dungdt@gmail.com/da56af6429df2d6171acc976a9bb88e1",adId:e,autoShow:!1})}}},{key:"callPrepareRewardVideoAd",value:function(){if(!1===this.ktCallReward){this.ktCallReward=!0;var e="ca-app-pub-4020852115305939/1141028765";"ios"===oe.instance().platform&&(e="ca-app-pub-4020852115305939/1486134386"),AdMob.prepareRewardVideoAd({license:"dungdt@gmail.com/da56af6429df2d6171acc976a9bb88e1",adId:e,autoShow:!1})}}},{key:"onAdFailLoad",value:function(e){console.log("onAdFailLoad-------------"),console.log(e),"interstitial"===e.adType?this.ktCallInter=!1:"rewardvideo"===e.adType&&(this.ktCallReward=!1)}},{key:"onAdLoaded",value:function(e){console.log("onAdLoaded-------------"),console.log(e),"interstitial"===e.adType?(this.ktLoadAds=!0,this.ktCallInter=!1):"rewardvideo"===e.adType&&(this.ktLoadAdsReward=!0,this.ktCallReward=!1)}},{key:"onAdPresent",value:function(e){console.log("onAdPresent-------------"),console.log(e),"rewardvideo"===e.adType&&(this.ktRewardWin=!0)}},{key:"onAdLeaveApp",value:function(e){console.log("onAdLeaveApp-------------"),console.log(e)}},{key:"onAdDismiss",value:function(e){if(console.log("onAdDismiss-------------"),console.log(e),"interstitial"===e.adType){if(this.ktLoadAds=!1,cordova.plugins)if(cordova.plugins.VolumeControl)cordova.plugins.VolumeControl.setVolume(.7);if(this.event.interstitialClosed.dispatch(),""!==this.strEvent){var t=this.strEvent+"Closed";He.instance().logEvent(t)}this.callPrepareInterstitial(),ht.instance().hideLoading()}else if("rewardvideo"===e.adType){if(!0===this.ktRewardWin){if(this.ktRewardWin=!1,this.event.rewardedVideoRewardReceived.dispatch(),""!==this.strEvent){var n=this.strEvent+"RewardReceived";He.instance().logEvent(n)}}else if(this.event.rewardedVideoFailed.dispatch(),""!==this.strEvent){var i=this.strEvent+"Closed";He.instance().logEvent(i)}if(cordova.plugins)if(cordova.plugins.VolumeControl)cordova.plugins.VolumeControl.setVolume(.7);this.ktRewardWin=!1,this.ktLoadAdsReward=!1,this.callPrepareRewardVideoAd(),ht.instance().hideLoading()}}},{key:"playTurnBase",value:function(){console.log("playTurnBase"),this.countPlayTurnBase++,console.log(this.countPlayTurnBase)}},{key:"showInterstitialTurnBase",value:function(){return console.log("showInterstitialTurnBase"),this.countPlayTurnBase>2&&(this.countPlayTurnBase=0,this.strEvent=He.InterstitialTurnBase,this.showInterstitial(),!0)}},{key:"playQuickPlay",value:function(){this.countPlayQuickPlay++}},{key:"showInterstitialQuickPlay",value:function(){return this.countPlayQuickPlay>1&&(this.countPlayQuickPlay=0,this.strEvent=He.InterstitialQuickPlay,this.showInterstitial(),!0)}},{key:"playCreateRoom",value:function(){this.countPlayCreateRoom++}},{key:"showInterstitialCreateRoom",value:function(){return this.countPlayCreateRoom>1&&(this.countPlayCreateRoom=0,this.strEvent=He.InterstitialCreateRoom,this.showInterstitial(),!0)}},{key:"playEventMode",value:function(){this.countEventMode++}},{key:"showInterstitialEventMode",value:function(){return this.countEventMode>0&&(this.countEventMode=0,this.strEvent=He.InterstitialEventMode,this.showInterstitial(),!0)}},{key:"gameoverSoloMode",value:function(){this.countGameOverSoloMode++}},{key:"showInterstitialGameOverSoloMode",value:function(){return this.countGameOverSoloMode>5&&(this.countGameOverSoloMode=0,this.strEvent=He.InterstitialSoloModeGameOver,this.showInterstitial(),!0)}},{key:"showInterstitialDoneSoloMode",value:function(){this.strEvent=He.InterstitialDoneSoloMode,this.showInterstitial()}},{key:"winAndTakeRewarkSoloMode",value:function(){this.countWinAndTakeRewardSoloMode++}},{key:"showInterstitialWinTakeRewarkSoloMode",value:function(){return this.countWinAndTakeRewardSoloMode>0&&(this.countWinAndTakeRewardSoloMode=0,this.strEvent=He.InterstitialSoloModeWin,this.showInterstitial(),!0)}},{key:"questTakeReward",value:function(){this.countTakeReward++}},{key:"showInterstitialQuestTakereward",value:function(){return!1}},{key:"achievementTakeReward",value:function(){this.countTakeAchievementReward++}},{key:"showInterstitialachievementTakeReward",value:function(){return this.countTakeAchievementReward>0&&(this.countTakeAchievementReward=0,this.showInterstitial(),this.strEvent=He.InterstitialAchievement,!0)}},{key:"showRewardVideoInappPurchase",value:function(e){var t="DefaultRewardedVideo";"HEART"===e?(t="IAP_Heart",this.strEvent=He.RewardVideoInappHeart):"SUPPORT_ITEM"===e?this.strEvent=He.RewardVideoInappSupportItem:"DIAMOND"===e?(t="IAP_Diamonds",this.strEvent=He.RewardVideoInappDiamond):"TICKET"===e&&(t="IAP_Ticket",this.strEvent=He.RewardVideoInappTicket),this.showRewardVideoAd(t)}},{key:"showRewardVideoX2Daily",value:function(){this.strEvent=He.RewardVideoX2DailyReward,this.showRewardVideoAd("x2_daily_reward")}},{key:"showRewardVideoTakeHeartSoloMode",value:function(){this.strEvent=He.RewardVideoGetHeartInSoloMode,this.showRewardVideoAd()}},{key:"showRewardVideoX2DiamondSoloMode",value:function(){this.strEvent=He.RewardVideoX2DiamondButtonSoloMode,this.showRewardVideoAd("x2_solo_mode_reward")}},{key:"showRewardVideoLuckyWheel",value:function(){this.strEvent=He.RewardVideoLuckyWheel,this.showRewardVideoAd()}},{key:"showBanerQuestScreen",value:function(){}},{key:"showBanerEventRoomScreen",value:function(){}},{key:"showBanerUserProfileScreen",value:function(){}},{key:"showBanerViewAllFriendScreen",value:function(){}},{key:"showBanerInfoSongScreen",value:function(){}},{key:"showBanerPartyModeScreen",value:function(){this.strEvent=He.BannerPartyMode,this.showBanner()}},{key:"showBanerQuickPlayModeRoomScreen",value:function(){this.strEvent=He.BannerQuickPlayModeRoom,this.showBanner()}},{key:"showBanerChooseBettingQuickPlayScreen",value:function(){this.strEvent=He.BannerChooseBettingQuickPlay,this.showBanner()}},{key:"showBanerWaitingRoomQuickPlayScreen",value:function(){this.strEvent=He.BannerWaitingRoomQuickPlayScreen,this.showBanner()}},{key:"showBanerChoosePlaylistquickPlayScreen",value:function(){}},{key:"showBanerChooseBettingCreateRoomScreen",value:function(){this.strEvent=He.BannerChooseBettingCreateRoom,this.showBanner()}},{key:"showBanerChoosePlaylistCreateRoomScreen",value:function(){}},{key:"showBanerInviteOtherUserWaitingScreen",value:function(){}},{key:"loadRewardVideoAd",value:function(){!0===this.existAds&&IronSourceAds.hasRewardedVideo({onSuccess:function(e){console.log("onSuccess : "+e)},onFailure:function(e){console.log("onFailure"),console.log(e)}})}},{key:"showRewardVideoAd",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0===this.existAds&&(console.log("this.ktLoadAdsReward : "+this.ktLoadAdsReward),!0===this.ktLoadAdsReward?(ht.instance().showLoading(),AdMob.showRewardVideoAd()):(jC.instance().addDialog(de.instance().getData("144")),this.event.rewardedVideoFailed.dispatch(),this.callPrepareRewardVideoAd(),ht.instance().hideLoading()))}},{key:"showInterstitial",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0===this.existAds&&(!0===dV.instance().dataMySeft.vip?this.event.interstitialFailedToLoad.dispatch():(console.log("this.ktLoadAds : "+this.ktLoadAds),!0===this.ktLoadAds?(ht.instance().showLoading(),AdMob.showInterstitial()):(this.callPrepareInterstitial(),this.event.interstitialFailedToLoad.dispatch())))}},{key:"showBanner",value:function(){this.existAds}},{key:"hideBanner",value:function(){this.existAds}}])&&Si(t.prototype,n),i&&Si(t,i),e}();function Ci(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ki=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"MAIN_MENU_LOAD_RESPONSE",get:function(){return"MAIN_MENU_LOAD_RESPONSE"}},{key:"CHALLENGE_GAME_QUESTIONS_RESPONSE",get:function(){return"CHALLENGE_GAME_QUESTIONS_RESPONSE"}},{key:"CHALLENGE_GAME_FIND_OPPONENTS_RESPONSE",get:function(){return"CHALLENGE_GAME_FIND_OPPONENTS_RESPONSE"}},{key:"CHALLENGE_GAME_GET_PLAYLISTS_RESPONSE",get:function(){return"CHALLENGE_GAME_GET_PLAYLISTS_RESPONSE"}},{key:"BECHALLENGED_GAME_OPPONENT_GAME_LOG_RESPONSE",get:function(){return"BECHALLENGED_GAME_OPPONENT_GAME_LOG_RESPONSE"}},{key:"BECHALLENGED_GAME_PLAY_HISTORY_RESPONSE",get:function(){return"BECHALLENGED_GAME_PLAY_HISTORY_RESPONSE"}},{key:"NEW_USER_SELECTED_GENRES_RESPONSE",get:function(){return"NEW_USER_SELECTED_GENRES_RESPONSE"}},{key:"NEW_USER_GENRES_LIST_RESPONSE",get:function(){return"NEW_USER_GENRES_LIST_RESPONSE"}},{key:"SOLO_MODE_PLAYLISTS_RESPONSE",get:function(){return"SOLO_MODE_PLAYLISTS_RESPONSE"}},{key:"SOLO_MODE_PLAYLIST_SELECTED_RESPONSE",get:function(){return"SOLO_MODE_PLAYLIST_SELECTED_RESPONSE"}},{key:"CHALLENGE_GAME_FINISH_RESPONSE",get:function(){return"CHALLENGE_GAME_FINISH_RESPONSE"}},{key:"BECHALLENGED_GAME_FINISH_RESPONSE",get:function(){return"BECHALLENGED_GAME_FINISH_RESPONSE"}},{key:"SOLO_MODE_FINISH_RESPONSE",get:function(){return"SOLO_MODE_FINISH_RESPONSE"}},{key:"SOLO_MODE_GOT_REWARD_RESPONSE",get:function(){return"SOLO_MODE_GOT_REWARD_RESPONSE"}},{key:"SOLO_MODE_TOP10_THIS_WEEK_RESPONSE",get:function(){return"SOLO_MODE_TOP10_THIS_WEEK_RESPONSE"}},{key:"SOLO_MODE_TOP10_LAST_WEEK_RESPONSE",get:function(){return"SOLO_MODE_TOP10_LAST_WEEK_RESPONSE"}},{key:"SHOP_BUY_PLAYLIST_RESPONSE",get:function(){return"SHOP_BUY_PLAYLIST_RESPONSE"}},{key:"QUEST_LOAD_RESPONSE",get:function(){return"QUEST_LOAD_RESPONSE"}},{key:"QUEST_CLAIM_REWARD_RESPONSE",get:function(){return"QUEST_CLAIM_REWARD_RESPONSE"}},{key:"QUEST_ACHIEVED_NOTIFICATION",get:function(){return"QUEST_ACHIEVED_NOTIFICATION"}},{key:"ACHIEVEMENT_LOAD_RESPONSE",get:function(){return"ACHIEVEMENT_LOAD_RESPONSE"}},{key:"USER_PROFILE_LOAD_RESPONSE",get:function(){return"USER_PROFILE_LOAD_RESPONSE"}},{key:"LEVEL_UP_NOTIFICATION",get:function(){return"LEVEL_UP_NOTIFICATION"}},{key:"CHAT_ONLINE_MODE",get:function(){return"CHAT_ONLINE_MODE"}},{key:"ACHIEVEMENT_ACHIEVED_NOTIFICATION",get:function(){return"ACHIEVEMENT_ACHIEVED_NOTIFICATION"}},{key:"ACHIEVEMENT_CLAIM_REWARD_RESPONSE",get:function(){return"ACHIEVEMENT_CLAIM_REWARD_RESPONSE"}},{key:"FRIEND_REQUEST_LOAD_RESPONSE",get:function(){return"FRIEND_REQUEST_LOAD_RESPONSE"}},{key:"FRIEND_REQUEST_LOAD_REQUEST",get:function(){return"FRIEND_REQUEST_LOAD_REQUEST"}},{key:"USER_PROFILE_LOAD_REQUEST",get:function(){return"USER_PROFILE_LOAD_REQUEST"}},{key:"MAIN_MENU_LOAD_REQUEST",get:function(){return"MAIN_MENU_LOAD_REQUEST"}},{key:"QUEST_CLAIM_REWARD_REQUEST",get:function(){return"QUEST_CLAIM_REWARD_REQUEST"}},{key:"NEW_USER_SELECTED_GENRES_REQUEST",get:function(){return"NEW_USER_SELECTED_GENRES_REQUEST"}},{key:"NEW_USER_GENRES_LIST_REQUEST",get:function(){return"NEW_USER_GENRES_LIST_REQUEST"}},{key:"SOLO_MODE_PLAYLISTS_REQUEST",get:function(){return"SOLO_MODE_PLAYLISTS_REQUEST"}},{key:"BECHALLENGED_GAME_PLAY_HISTORY_REQUEST",get:function(){return"BECHALLENGED_GAME_PLAY_HISTORY_REQUEST"}},{key:"BECHALLENGED_GAME_OPPONENT_GAME_LOG_REQUEST",get:function(){return"BECHALLENGED_GAME_OPPONENT_GAME_LOG_REQUEST"}},{key:"SOLO_MODE_PLAYLIST_SELECTED_REQUEST",get:function(){return"SOLO_MODE_PLAYLIST_SELECTED_REQUEST"}},{key:"CHALLENGE_GAME_GET_PLAYLISTS_REQUEST",get:function(){return"CHALLENGE_GAME_GET_PLAYLISTS_REQUEST"}},{key:"CHALLENGE_GAME_FIND_OPPONENTS_REQUEST",get:function(){return"CHALLENGE_GAME_FIND_OPPONENTS_REQUEST"}},{key:"CHALLENGE_GAME_FINISH_REQUEST",get:function(){return"CHALLENGE_GAME_FINISH_REQUEST"}},{key:"BECHALLENGED_GAME_FINISH_REQUEST",get:function(){return"BECHALLENGED_GAME_FINISH_REQUEST"}},{key:"CHALLENGE_GAME_QUESTIONS_REQUEST",get:function(){return"CHALLENGE_GAME_QUESTIONS_REQUEST"}},{key:"SOLO_MODE_FINISH_REQUEST",get:function(){return"SOLO_MODE_FINISH_REQUEST"}},{key:"SOLO_MODE_GOT_REWARD_REQUEST",get:function(){return"SOLO_MODE_GOT_REWARD_REQUEST"}},{key:"SOLO_MODE_TOP10_THIS_WEEK_REQUEST",get:function(){return"SOLO_MODE_TOP10_THIS_WEEK_REQUEST"}},{key:"SOLO_MODE_TOP10_LAST_WEEK_REQUEST",get:function(){return"SOLO_MODE_TOP10_LAST_WEEK_REQUEST"}},{key:"SHOP_BUY_PLAYLIST_REQUEST",get:function(){return"SHOP_BUY_PLAYLIST_REQUEST"}},{key:"QUEST_LOAD_REQUEST",get:function(){return"QUEST_LOAD_REQUEST"}},{key:"ACHIEVEMENT_LOAD_REQUEST",get:function(){return"ACHIEVEMENT_LOAD_REQUEST"}},{key:"ACHIEVEMENT_CLAIM_REWARD_REQUEST",get:function(){return"ACHIEVEMENT_CLAIM_REWARD_REQUEST"}},{key:"USER_FRIEND_REQUEST",get:function(){return"USER_FRIEND_REQUEST"}},{key:"USER_FRIEND_RESPONSE",get:function(){return"USER_FRIEND_RESPONSE"}},{key:"FB_USER_SHARED_RESULT_REQUEST",get:function(){return"FB_USER_SHARED_RESULT_REQUEST"}},{key:"FB_USER_SHARED_RESULT_RESPONSE",get:function(){return"FB_USER_SHARED_RESULT_RESPONSE"}},{key:"USER_SHORT_PROFILE_LOAD_REQUEST",get:function(){return"USER_SHORT_PROFILE_LOAD_REQUEST"}},{key:"USER_SHORT_PROFILE_LOAD_RESPONSE",get:function(){return"USER_SHORT_PROFILE_LOAD_RESPONSE"}},{key:"SUPPORT_REQUEST",get:function(){return"SUPPORT_REQUEST"}},{key:"SUPPORT_RESPONSE",get:function(){return"SUPPORT_RESPONSE"}},{key:"DAILY_REWARD_NOTIFICATION",get:function(){return"DAILY_REWARD_NOTIFICATION"}},{key:"DAILY_REWARD_CLAIM_REQUEST",get:function(){return"DAILY_REWARD_CLAIM_REQUEST"}},{key:"DAILY_REWARD_CLAIM_RESPONSE",get:function(){return"DAILY_REWARD_CLAIM_RESPONSE"}},{key:"DAILY_QUEST_NOTIFICATION",get:function(){return"DAILY_QUEST_NOTIFICATION"}},{key:"DAILY_QUEST_LOAD_REQUEST",get:function(){return"DAILY_QUEST_LOAD_REQUEST"}},{key:"DAILY_QUEST_LOAD_RESPONSE",get:function(){return"DAILY_QUEST_LOAD_RESPONSE"}},{key:"HOURS_REWARD_CLAIM_REQUEST",get:function(){return"HOURS_REWARD_CLAIM_REQUEST"}},{key:"HOURS_REWARD_CLAIM_RESPONSE",get:function(){return"HOURS_REWARD_CLAIM_RESPONSE"}},{key:"POKE_USER_REQUEST",get:function(){return"POKE_USER_REQUEST"}},{key:"PLAY_SCRIPT_DONE_TURNBASE_REQUEST",get:function(){return"PLAY_SCRIPT_DONE_TURNBASE_REQUEST"}},{key:"PLAY_SCRIPT_DONE_TURNBASE_RESPONSE",get:function(){return"PLAY_SCRIPT_DONE_TURNBASE_RESPONSE"}},{key:"PLAY_SCRIPT_DONE_GET_QUEST_REQUEST",get:function(){return"PLAY_SCRIPT_DONE_GET_QUEST_REQUEST"}},{key:"PLAY_SCRIPT_DONE_GET_QUEST_RESPONSE",get:function(){return"PLAY_SCRIPT_DONE_GET_QUEST_RESPONSE"}},{key:"POKE_USER_RESPONSE",get:function(){return"POKE_USER_RESPONSE"}},{key:"PLAY_SCRIPT_DONE_ALL_REQUEST",get:function(){return"PLAY_SCRIPT_DONE_ALL_REQUEST"}},{key:"PLAY_SCRIPT_DONE_ALL_RESPONSE",get:function(){return"PLAY_SCRIPT_DONE_ALL_RESPONSE"}},{key:"SEARCH_USER_BY_ID_REQUEST",get:function(){return"SEARCH_USER_BY_ID_REQUEST"}},{key:"SEARCH_USER_BY_NAME_REQUEST",get:function(){return"SEARCH_USER_BY_NAME_REQUEST"}},{key:"SEARCH_USER_BY_ID_RESPONSE",get:function(){return"SEARCH_USER_BY_ID_RESPONSE"}},{key:"SEARCH_USER_BY_NAME_RESPONSE",get:function(){return"SEARCH_USER_BY_NAME_RESPONSE"}},{key:"GIFT_CODE_CLAIM_REQUEST",get:function(){return"GIFT_CODE_CLAIM_REQUEST"}},{key:"GIFT_CODE_CLAIM_RESPONSE",get:function(){return"GIFT_CODE_CLAIM_RESPONSE"}},{key:"TURNBASE_DELETE_GAME_REQUEST",get:function(){return"TURNBASE_DELETE_GAME_REQUEST"}},{key:"TURNBASE_DELETE_GAME_RESPONSE",get:function(){return"TURNBASE_DELETE_GAME_RESPONSE"}},{key:"ONLINE_ROOM_INVITATION",get:function(){return"ONLINE_ROOM_INVITATION"}},{key:"BROADCASH_NOTIFICATION",get:function(){return"BROADCASH_NOTIFICATION"}},{key:"USER_NOTIFICATION",get:function(){return"USER_NOTIFICATION"}},{key:"ONLINE_MODE_ROOM_FRIEND_LIST_REQUEST",get:function(){return"ONLINE_MODE_ROOM_FRIEND_LIST_REQUEST"}},{key:"ONLINE_MODE_ROOM_FRIEND_LIST_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_FRIEND_LIST_RESPONSE"}},{key:"TURNBASE_CHALLENGE_REQUEST_UPDATE",get:function(){return"TURNBASE_CHALLENGE_REQUEST_UPDATE"}},{key:"MAIN_MENU_CHECK_UPDATE_REQUEST",get:function(){return"MAIN_MENU_CHECK_UPDATE_REQUEST"}},{key:"MAIN_MENU_CHECK_UPDATE_RESPONSE",get:function(){return"MAIN_MENU_CHECK_UPDATE_RESPONSE"}},{key:"INIT_SUGGESTION_OPPONENT_REQUEST",get:function(){return"INIT_SUGGESTION_OPPONENT_REQUEST"}},{key:"INIT_SUGGESTION_OPPONENT_RESPONSE",get:function(){return"INIT_SUGGESTION_OPPONENT_RESPONSE"}},{key:"TURNBASE_FIND_OPPONENT_REQUEST",get:function(){return"TURNBASE_FIND_OPPONENT_REQUEST"}},{key:"TURNBASE_FIND_OPPONENT_RESPONSE",get:function(){return"TURNBASE_FIND_OPPONENT_RESPONSE"}},{key:"INIT_CLIENT_GAME_DATA_REQUEST",get:function(){return"INIT_CLIENT_GAME_DATA_REQUEST"}},{key:"INIT_CLIENT_GAME_DATA_RESPONSE",get:function(){return"INIT_CLIENT_GAME_DATA_RESPONSE"}},{key:"QUEST_CHECK_ACHIEVED_REQUEST",get:function(){return"QUEST_CHECK_ACHIEVED_REQUEST"}},{key:"QUEST_CHECK_ACHIEVED_RESPONSE",get:function(){return"QUEST_CHECK_ACHIEVED_RESPONSE"}},{key:"QUEST_LOG_UPDATE",get:function(){return"QUEST_LOG_UPDATE"}},{key:"USER_FRIEND_LIST_LOAD_REQUEST",get:function(){return"USER_FRIEND_LIST_LOAD_REQUEST"}},{key:"USER_FRIEND_LIST_LOAD_RESPONSE",get:function(){return"USER_FRIEND_LIST_LOAD_RESPONSE"}},{key:"SOLO_MODE_QUESTION_REQUEST",get:function(){return"SOLO_MODE_QUESTION_REQUEST"}},{key:"SOLO_MODE_QUESTION_RESPONSE",get:function(){return"SOLO_MODE_QUESTION_RESPONSE"}},{key:"SOLO_MODE_NEXT_QUESTION_REQUEST",get:function(){return"SOLO_MODE_NEXT_QUESTION_REQUEST"}},{key:"SOLO_MODE_NEXT_QUESTION_RESPONSE",get:function(){return"SOLO_MODE_NEXT_QUESTION_RESPONSE"}},{key:"CHALLENGE_GAME_HISTORY_REQUEST",get:function(){return"CHALLENGE_GAME_HISTORY_REQUEST"}},{key:"CHALLENGE_GAME_HISTORY_RESPONSE",get:function(){return"CHALLENGE_GAME_HISTORY_RESPONSE"}},{key:"CHALLENGE_GAME_UPDATE_MESSAGE_REQUEST",get:function(){return"CHALLENGE_GAME_UPDATE_MESSAGE_REQUEST"}},{key:"CHALLENGE_GAME_UPDATE_MESSAGE_RESPONSE",get:function(){return"CHALLENGE_GAME_UPDATE_MESSAGE_RESPONSE"}},{key:"TURNBASE_LAST_WEEK_RESULT_REQUEST",get:function(){return"TURNBASE_LAST_WEEK_RESULT_REQUEST"}},{key:"TURNBASE_LAST_WEEK_RESULT_RESPONSE",get:function(){return"TURNBASE_LAST_WEEK_RESULT_RESPONSE"}},{key:"USER_MESSAGE_LOAD_REQUEST",get:function(){return"USER_MESSAGE_LOAD_REQUEST"}},{key:"USER_MESSAGE_SEND_REQUEST",get:function(){return"USER_MESSAGE_SEND_REQUEST"}},{key:"USER_MESSAGE_MARK_AS_READ_REQUEST",get:function(){return"USER_MESSAGE_MARK_AS_READ_REQUEST"}},{key:"USER_MESSAGE_LOAD_RESPONSE",get:function(){return"USER_MESSAGE_LOAD_RESPONSE"}},{key:"USER_MESSAGE_SEND_RESPONSE",get:function(){return"USER_MESSAGE_SEND_RESPONSE"}},{key:"USER_MESSAGE_MARK_AS_READ_RESPONSE",get:function(){return"USER_MESSAGE_MARK_AS_READ_RESPONSE"}},{key:"USER_MESSAGE_RECEIVE",get:function(){return"USER_MESSAGE_RECEIVE"}},{key:"SYSTEM_MESSAGE_LOAD_REQUEST",get:function(){return"SYSTEM_MESSAGE_LOAD_REQUEST"}},{key:"SYSTEM_MESSAGE_LOAD_RESPONSE",get:function(){return"SYSTEM_MESSAGE_LOAD_RESPONSE"}},{key:"SYSTEM_MESSAGE_MARK_AS_READ_REQUEST",get:function(){return"SYSTEM_MESSAGE_MARK_AS_READ_REQUEST"}},{key:"SYSTEM_MESSAGE_MARK_AS_READ_RESPONSE",get:function(){return"SYSTEM_MESSAGE_MARK_AS_READ_RESPONSE"}},{key:"INIT_SOLO_MODE_REWARD_REQUEST",get:function(){return"INIT_SOLO_MODE_REWARD_REQUEST"}},{key:"INIT_SOLO_MODE_REWARD_RESPONSE",get:function(){return"INIT_SOLO_MODE_REWARD_RESPONSE"}},{key:"SONG_DETAIL_REQUEST",get:function(){return"SONG_DETAIL_REQUEST"}},{key:"SONG_DETAIL_RESPONSE",get:function(){return"SONG_DETAIL_RESPONSE"}}],(n=null)&&Ci(t.prototype,n),i&&Ci(t,i),e}();function Pi(e){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ri=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event={share:new Phaser.Signal}}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.fbAction||(this.fbAction=new e),this.fbAction}}],(n=[{key:"share",value:function(){if(LogConsole.log("share------------------------------"),window.cordova&&"undefined"!=typeof device)Fe.instance().share();else{FB.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":"https://wazzat.vn/home/","og:title":"So Tài Âm Nhạc","og:description":"So Tài Âm Nhạc","og:image":"https://cdn.gamezoka.com/storage/assets/icon.png"}})},function(e){e.hasOwnProperty("error_code")||dV.instance().sendData(Me.FB_USER_SHARED_RESULT_REQUEST,null)})}}},{key:"inviteFriend",value:function(){window.cordova&&"undefined"!=typeof device?Fe.instance().invite():FB.ui({method:"apprequests",message:"Come and play MusicQuiz with me!"},function(e){"object"===Pi(e)&&dV.instance().sendData(Me.FB_USER_INVITE_FRIEND_REQUEST,Be.begin(e.request,e.to))})}},{key:"logout",value:function(e){window.cordova&&"undefined"!=typeof device?Fe.instance().logout(function(t){e(t)}):FB.logout(function(t){e(t)})}}])&&Oi(t.prototype,n),i&&Oi(t,i),e}();function xi(e){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ii(e,t){return!t||"object"!==xi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ai(e,t,n){return(Ai="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Li(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Di(e,t){return(Di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gi=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Ii(this,Li(t).call(this,game))).positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),o.rewardType=i,o.score=e,o.reward=n,o.isWatchRewardVideo=!1,o.isWatchRewardVideoDone=!1,o.signalNextQuestion=new Phaser.Signal,o.signalStop=new Phaser.Signal,o.signalClaim=new Phaser.Signal,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Di(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.timer=null,this.screenDim,this.tabGem,this.tabHeart,this.addScreenDim(),this.headerResource,this.addHeaderResource()}},{key:"addHeaderResource",value:function(){this.headerResource=new Phaser.Group(game,0,0),this.addChild(this.headerResource),this.txtGem,this.txtTicket,this.txtMic,this.tabGemHeader,this.tabTicketHeader,this.tabMicHeader,this.addTabGemHeader(this.positionPracticePopupConfig.header),this.addTabTicketHeader(this.positionPracticePopupConfig.header),this.addTabMicHeader(this.positionPracticePopupConfig.header)}},{key:"addTabGemHeader",value:function(e){this.tabGemHeader=new Phaser.Sprite(game,e.tabGem.x*window.GameConfig.RESIZE,e.tabGem.y*window.GameConfig.RESIZE,e.tabGem.nameAtlas,e.tabGem.nameSprite);var t=this.addGem(this.positionPracticePopupConfig.header.gem);this.txtGem=this.addTxtGem(this.positionPracticePopupConfig.header.txtResource);var n=t.width+this.txtGem.width;this.txtGem.x=(this.tabGemHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabGemHeader.width-n)/2+this.txtGem.width+10*window.GameConfig.RESIZE,this.tabGemHeader.addChild(t),this.tabGemHeader.addChild(this.txtGem),this.headerResource.addChild(this.tabGemHeader)}},{key:"addGem",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtGem",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,e.configs)}},{key:"addTabTicketHeader",value:function(e){this.tabTicketHeader=new Phaser.Sprite(game,e.tabTicket.x*window.GameConfig.RESIZE,e.tabTicket.y*window.GameConfig.RESIZE,e.tabTicket.nameAtlas,e.tabTicket.nameSprite);var t=this.addTicket(this.positionPracticePopupConfig.header.ticket);this.txtTicket=this.addTxtTicket(this.positionPracticePopupConfig.header.txtResource);var n=t.width+this.txtTicket.width;this.txtTicket.x=(this.tabTicketHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabTicketHeader.width-n)/2+this.txtTicket.width+10*window.GameConfig.RESIZE,this.tabTicketHeader.addChild(t),this.tabTicketHeader.addChild(this.txtTicket),this.headerResource.addChild(this.tabTicketHeader)}},{key:"addTicket",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtTicket",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("ticket").value,e.configs)}},{key:"addTabMicHeader",value:function(e){this.tabMicHeader=new Phaser.Sprite(game,e.tabMic.x*window.GameConfig.RESIZE,e.tabMic.y*window.GameConfig.RESIZE,e.tabMic.nameAtlas,e.tabMic.nameSprite);var t=this.addMic(this.positionPracticePopupConfig.header.micro);this.txtMic=this.addTxtMic(this.positionPracticePopupConfig.header.txtResource);var n=t.width+this.txtMic.width;this.txtMic.x=(this.tabMicHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabMicHeader.width-n)/2+this.txtMic.width+10*window.GameConfig.RESIZE,this.tabMicHeader.addChild(t),this.tabMicHeader.addChild(this.txtMic),this.headerResource.addChild(this.tabMicHeader)}},{key:"addMic",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtMic",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("support_item").value,e.configs)}},{key:"interstitialClosed",value:function(){this.tweenDestroy()}},{key:"interstitialShowFailed",value:function(){this.tweenDestroy()}},{key:"rewardedVideoEnded",value:function(){this.btnWatching.inputEnabled=!0,this.btnContinue.inputEnabled=!0}},{key:"rewardedVideoClosed",value:function(){this.btnWatching.inputEnabled=!0,this.btnContinue.inputEnabled=!0}},{key:"rewardedVideoRewardReceived",value:function(){this.isWatchRewardVideoDone=!0,this.signalClaim.dispatch(1)}},{key:"interstitialFailedToLoad",value:function(){this.tweenDestroy()}},{key:"rewardedVideoFailed",value:function(){this.btnWatching.inputEnabled=!0,this.btnContinue.inputEnabled=!0}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.addChild(this.screenDim)}},{key:"addPopup",value:function(){this.congraTxt,this.txtDetailReward,this.btnContinue,this.timeCountDown,this.txtTimeout,this.iconCircle;var e=new Phaser.Sprite(game,this.positionPracticePopupConfig.popup_confirm_top_bg.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.nameAtlas,this.positionPracticePopupConfig.popup_confirm_top_bg.nameSprite);this.popup=new Phaser.Sprite(game,this.positionPracticePopupConfig.lineRewardPopup.x*window.GameConfig.RESIZE,1140*window.GameConfig.RESIZE,null),this.popup.addChild(e);var t={x:0,y:0,nameAtlas:"defaultSource",nameSprite:"bg_nhaptext",left:30,right:30,top:30,bot:30,width:570,height:490,name:"choose_game_bg_input_text"};!0===dV.instance().dataMySeft.vip&&(t={x:0,y:0,nameAtlas:"defaultSource",nameSprite:"bg_nhaptext",left:30,right:30,top:30,bot:30,width:570,height:380,name:"choose_game_bg_input_text"});var n=new Dn(t);this.popup.addChild(n);var i=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.rewardPopup.nameAtlas,this.positionPracticePopupConfig.rewardPopup.nameSprite);this.popup.addChild(i),this.addChild(this.popup),this.addCongraTxt(),this.addTxtDetailReward(),this.addBtnContinue(),this.addIconCircle(),this.addBtnWatch(),this.addBtnShare(),this.checkDevice()}},{key:"checkDevice",value:function(){window.cordova&&"undefined"!=typeof device||this.btnWatching&&(this.btnWatching.inputEnabled=!1)}},{key:"makeTweenPopup",value:function(){var e=this;be.instance().playSound(be.getrewardsolomode);var t=game.add.tween(this.popup).to({y:(game.height-oe.instance().STANDARD_HEIGHT+this.positionPracticePopupConfig.lineRewardPopup.y)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);t.start(),t.onComplete.add(function(){},this),this.timeAnimGem=game.time.events.add(.5*Phaser.Timer.SECOND,function(){e.addAnimGem()},this)}},{key:"addCongraTxt",value:function(){this.congraTxt=new Phaser.Text(game,this.positionPracticePopupConfig.congrat_txt_reward.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.congrat_txt_reward.y*window.GameConfig.RESIZE,de.instance().getData("238"),this.positionPracticePopupConfig.congrat_txt_reward.configs),this.congraTxt.anchor.set(.5,0),this.popup.addChild(this.congraTxt)}},{key:"addTxtDetailReward",value:function(){this.txtDetailReward=new Phaser.Text(game,this.positionPracticePopupConfig.txt_detail_reward.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_detail_reward.y*window.GameConfig.RESIZE,"".concat(de.instance().getData("239")," ").concat(this.score," ").concat(de.instance().getData("240")),this.positionPracticePopupConfig.txt_detail_reward.configs),this.txtDetailReward.anchor.set(.5,0),this.txtDetailReward.addColor("#ffa33a",de.instance().getData("239").length),this.txtDetailReward.addColor("#333333",de.instance().getData("239").length+3),this.popup.addChild(this.txtDetailReward)}},{key:"addBtnContinue",value:function(){if(!0===dV.instance().dataMySeft.vip){this.btnContinue=new Phaser.Sprite(game,this.positionPracticePopupConfig.btn_continue_reward_vip.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_continue_reward_vip.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_continue_reward_vip.nameAtlas,this.positionPracticePopupConfig.btn_continue_reward_vip.nameSprite),this.btnContinue.anchor.set(.5,0);var e=new Phaser.Text(game,this.positionPracticePopupConfig.txt_btn_continue.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_btn_continue.y*window.GameConfig.RESIZE,de.instance().getData("105"),this.positionPracticePopupConfig.txt_btn_continue.configs);e.anchor.set(.5,0),this.btnContinue.inputEnabled=!0,this.btnContinue.events.onInputUp.add(this.onClickContinue,this),this.btnContinue.addChild(e),this.popup.addChild(this.btnContinue)}else{this.btnContinue=new Phaser.Sprite(game,this.positionPracticePopupConfig.btn_continue_reward.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_continue_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_continue_reward.nameAtlas,this.positionPracticePopupConfig.btn_continue_reward.nameSprite),this.btnContinue.anchor.set(.5,0);var t=new Phaser.Text(game,this.positionPracticePopupConfig.txt_btn_continue.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_btn_continue.y*window.GameConfig.RESIZE,de.instance().getData("105"),this.positionPracticePopupConfig.txt_btn_continue.configs);t.anchor.set(.5,0),this.btnContinue.inputEnabled=!0,this.btnContinue.events.onInputUp.add(this.onClickContinue,this),this.btnContinue.addChild(t),this.popup.addChild(this.btnContinue)}}},{key:"addBtnShare",value:function(){if(this.btnShare=new Phaser.Sprite(game,this.positionPracticePopupConfig.btn_fb_share.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_fb_share.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_fb_share.nameAtlas,this.positionPracticePopupConfig.btn_fb_share.nameSprite),this.btnShare.anchor.set(.5,0),this.btnShare.inputEnabled=!0,this.btnShare.events.onInputUp.add(this.onClickShare,this),"en"==de.instance().currentLanguage){var e=new Phaser.Text(game,-18,30,"SHARE",{font:"GilroyBold",fill:"white",align:"center",fontSize:28});this.btnShare.addChild(e)}else{var t=new Phaser.Text(game,-18,30,"CHIA SẺ",{font:"GilroyBold",fill:"white",align:"center",fontSize:28});this.btnShare.addChild(t)}this.popup.addChild(this.btnShare)}},{key:"onClickShare",value:function(){be.instance().playSound(be.buttonclick),Ri.instance().share()}},{key:"onShared",value:function(){}},{key:"addIconCircle",value:function(){if(this.iconCircle=new Phaser.Sprite(game,this.positionPracticePopupConfig.icon_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.icon_gem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.icon_gem.nameAtlas,this.positionPracticePopupConfig.icon_gem.nameSprite),this.iconCircle.anchor.set(.5),game.time.events.loop(10,this.animationUpdateCircle,this),this.popup.addChild(this.iconCircle),!0===dV.instance().dataMySeft.vip){var e=new Phaser.Text(game,this.positionPracticePopupConfig.reward_icon_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.reward_icon_gem.y*window.GameConfig.RESIZE,"+".concat(2*parseInt(this.reward)),this.positionPracticePopupConfig.reward_icon_gem.configs);e.anchor.set(.5,0),this.popup.addChild(e)}else{var t=new Phaser.Text(game,this.positionPracticePopupConfig.reward_icon_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.reward_icon_gem.y*window.GameConfig.RESIZE,"+".concat(this.reward),this.positionPracticePopupConfig.reward_icon_gem.configs);t.anchor.set(.5,0),this.popup.addChild(t)}}},{key:"animationUpdateCircle",value:function(){null!==this.iconCircle&&(this.iconCircle.angle+=3)}},{key:"addAnimGem",value:function(){"DIAMOND"==this.rewardType?(this.sSGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.anim_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.anim_gem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.anim_gem.nameSprite),this.sSGem.anchor.set(.5),this.animGem=this.sSGem.animations.add("animGemReward"),this.animGem.enableUpdate=!0,this.animGem.onUpdate.add(this.onUpdateGemReward,this),this.animGem.play(35,!1,!1),this.popup.addChild(this.sSGem)):"TICKET"==this.rewardType?(this.sSGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.anim_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.anim_gem.y*window.GameConfig.RESIZE,"rewardTicketSoloMode"),this.sSGem.anchor.set(.5),this.animGem=this.sSGem.animations.add("animTicketReward"),this.animGem.enableUpdate=!0,this.animGem.onUpdate.add(this.onUpdateGemReward,this),this.animGem.play(35,!1,!1),this.popup.addChild(this.sSGem)):"SUPPORT_ITEM"==this.rewardType&&(this.sSGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.anim_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.anim_gem.y*window.GameConfig.RESIZE,"rewardSptSoloMode"),this.sSGem.anchor.set(.5),this.animGem=this.sSGem.animations.add("animSptReward"),this.animGem.enableUpdate=!0,this.animGem.onUpdate.add(this.onUpdateGemReward,this),this.animGem.play(35,!1,!1),this.popup.addChild(this.sSGem))}},{key:"onUpdateGemReward",value:function(e,t){53===t.index&&(e.frame=37)}},{key:"onClickContinue",value:function(){this.isWatchRewardVideo=!1,this.btnWatching&&(this.btnWatching.inputEnabled=!1),this.btnContinue.inputEnabled=!1,this.signalStop.dispatch(),this.signalClaim.dispatch(0)}},{key:"makeAnimWhenClaimed",value:function(){var e=this.reward;1==this.isWatchRewardVideo?e*=2:!0===dV.instance().dataMySeft.vip&&(e*=2);var t={x:0,y:0};"DIAMOND"==this.rewardType?(t.x=351,t.y=55):"TICKET"==this.rewardType?(t.x=529,t.y=55):(t.x=164,t.y=55);var n=new _i(this.rewardType,e,t);if(this.addChild(n),"DIAMOND"==this.rewardType){var i=game.add.tween(this.txtGem).to({text:dV.instance().socket.mySelf.getVariable("diamond").value},300,"Linear",!1);this.tweenTxtRsr(i,this.txtGem)}else if("TICKET"==this.rewardType){var o=game.add.tween(this.txtTicket).to({text:dV.instance().socket.mySelf.getVariable("ticket").value},300,"Linear",!1);this.tweenTxtRsr(o,this.txtTicket)}else{var a=game.add.tween(this.txtMic).to({text:dV.instance().socket.mySelf.getVariable("support_item").value},300,"Linear",!1);this.tweenTxtRsr(a,this.txtMic)}}},{key:"tweenTxtRsr",value:function(e,t){var n=this;this.timeStartTween=game.time.events.add(2*Phaser.Timer.SECOND,function(){e.start()},this),e.onUpdateCallback(function(){t.text=parseInt(t.text)},this),e.onComplete.add(function(){window.cordova&&"undefined"!=typeof device?(n.isWatchRewardVideo,n.tweenDestroy()):n.tweenDestroy()},this)}},{key:"tweenDestroy",value:function(){var e=this,t=game.add.tween(this.popup).to({y:-1200*window.GameConfig.RESIZE},200,"Linear",!1);this.timeTweenDestroy=game.time.events.add(1*Phaser.Timer.SECOND,function(){t.start()},this),t.onComplete.add(function(){e.signalNextQuestion.dispatch(),e.destroy()},this)}},{key:"addBtnWatch",value:function(){if(!0===dV.instance().dataMySeft.vip);else{this.btnWatching=new _n(this.positionPracticePopupConfig.btn_watch_video_reward,this.onClickWatching,this),this.btnWatching.anchor.set(.5,0);var e=new Bt(this.positionPracticePopupConfig.btn_watch_video_reward.camera);this.btnWatching.addChild(e);var t=new Qt(this.positionPracticePopupConfig.btn_watch_video_reward.txt1,de.instance().getData("191"));t.anchor.set(.5,0),t.x=0;var n=new Qt(this.positionPracticePopupConfig.btn_watch_video_reward.txt2,de.instance().getData("190"));n.x=e.x-n.width-4,this.btnWatching.addChild(t),this.btnWatching.addChild(n),this.popup.addChild(this.btnWatching)}}},{key:"onClickWatching",value:function(){this.isWatchRewardVideo=!0,this.btnWatching.inputEnabled=!1,this.btnContinue.inputEnabled=!1,this.signalStop.dispatch(),Ei.instance().showRewardVideoX2DiamondSoloMode()}},{key:"addTimeCountDown",value:function(e){this.timeCountDownThisWeekPractice=e,this.timeCounter=new Phaser.Text(game,this.positionRankingConfig.txt_timeCounter.x*window.GameConfig.RESIZE,this.positionRankingConfig.txt_timeCounter.y*window.GameConfig.RESIZE,this.positionRankingConfig.txt_timeCounter.text,this.positionRankingConfig.txt_timeCounter.configs),this.timer=game.time.create(!1),this.timer.loop(1e3,this.handleTimer,this),this.timer.start(),this.addChild(this.timeCounter)}},{key:"handleTimer",value:function(){this.timeCountDown>0&&(this.timeCountDown--,this.txtTimeout.setText("( ".concat(this.timeCountDown," )"))),0==this.timeCountDown&&(this.signalNextQuestion.dispatch(),this.destroy())}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Ei.instance().event.rewardedVideoRewardReceived.add(this.rewardedVideoRewardReceived,this),Ei.instance().event.interstitialClosed.add(this.interstitialClosed,this),Ei.instance().event.rewardedVideoEnded.add(this.rewardedVideoEnded,this),Ei.instance().event.rewardedVideoClosed.add(this.rewardedVideoClosed,this),Ei.instance().event.interstitialFailedToLoad.add(this.interstitialFailedToLoad,this),Ei.instance().event.rewardedVideoFailed.add(this.rewardedVideoFailed,this),Ei.instance().event.interstitialShowFailed.add(this.interstitialShowFailed,this),Ri.instance().event.share.add(this.onShared,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),Ei.instance().event.rewardedVideoRewardReceived.remove(this.rewardedVideoRewardReceived,this),Ei.instance().event.interstitialClosed.remove(this.interstitialClosed,this),Ei.instance().event.rewardedVideoEnded.remove(this.rewardedVideoEnded,this),Ei.instance().event.rewardedVideoClosed.remove(this.rewardedVideoRewardReceived,this),Ei.instance().event.interstitialFailedToLoad.remove(this.interstitialFailedToLoad,this),Ei.instance().event.interstitialShowFailed.remove(this.interstitialShowFailed,this),Ei.instance().event.rewardedVideoFailed.remove(this.rewardedVideoFailed,this),Ri.instance().event.share.remove(this.onShared,this)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.SOLO_MODE_GOT_REWARD_RESPONSE&&(LogConsole.log(e.params.getDump()),"OK"==e.params.getUtfString("status")&&this.makeAnimWhenClaimed())}},{key:"destroy",value:function(){for(this.removeEventExtension(),game.time.events.remove(this.timeAnimGem),game.time.events.remove(this.timeStartTween),game.time.events.remove(this.timeTweenDestroy),null!==this.timer&&(this.timer.stop(),this.timer.destroy(),this.timer=null);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Ai(Li(t.prototype),"destroy",this).call(this)}}])&&Ti(n.prototype,i),o&&Ti(n,o),t}();function Mi(e){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bi(e,t){return!t||"object"!==Mi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ji(e,t,n){return(ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ui(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ui(e){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fi(e,t){return(Fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bi(this,Ui(t).call(this,game))).positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),n.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),n.positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),n.score=e,n.signalNextQuestion=new Phaser.Signal,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fi(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.timer=null,this.screenDim,this.tabGem,this.tabHeart,this.addScreenDim(),this.addGemAndHeart()}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.addChild(this.screenDim)}},{key:"addGemAndHeart",value:function(){this.tabGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabGem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.nameAtlas,this.positionPracticePopupConfig.tabGem.nameSprite),this.addGemDetail(),this.addChild(this.tabGem),this.tabHeart=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabHeart.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.nameAtlas,this.positionPracticePopupConfig.tabHeart.nameSprite),this.addHeartDetail(),this.addChild(this.tabHeart)}},{key:"addGemDetail",value:function(){var e,t;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.gem_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.gem_reward.nameAtlas,this.positionPracticePopupConfig.gem_reward.nameSprite),t=new Phaser.Text(game,0,this.positionPracticePopupConfig.gem_reward_txt.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,this.positionPracticePopupConfig.gem_reward_txt.configs);var n=e.width+t.width;t.x=(this.tabGem.width-n)/2-5*window.GameConfig.RESIZE,e.x=(this.tabGem.width-n)/2+t.width+10*window.GameConfig.RESIZE,this.tabGem.addChild(e),this.tabGem.addChild(t)}},{key:"addHeartDetail",value:function(){var e,t;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.heart_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.heart_reward.nameAtlas,this.positionPracticePopupConfig.heart_reward.nameSprite),t=new Phaser.Text(game,0,this.positionPracticePopupConfig.heart_reward_txt.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("heart").value,this.positionPracticePopupConfig.heart_reward_txt.configs);var n=e.width+t.width;t.x=(this.tabHeart.width-n)/2-5,e.x=(this.tabHeart.width-n)/2+t.width+10,this.tabHeart.addChild(e),this.tabHeart.addChild(t)}},{key:"addPopup",value:function(){this.congraTxt,this.txtDetailReward,this.btnContinue,this.timeCountDown,this.txtTimeout;var e=new Phaser.Sprite(game,this.positionPracticePopupConfig.popup_confirm_top_bg.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.nameAtlas,this.positionPracticePopupConfig.popup_confirm_top_bg.nameSprite);this.popup=new Phaser.Sprite(game,this.positionPracticePopupConfig.lineRewardPopup.x*window.GameConfig.RESIZE,1140*window.GameConfig.RESIZE,null),this.popup.addChild(e);var t=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.rewardPopup.nameAtlas,this.positionPracticePopupConfig.rewardPopup.nameSprite);this.popup.addChild(t),this.addChild(this.popup),this.addCongraTxt(),this.addTxtDetailReward(),this.addBtnContinue()}},{key:"makeTweenPopup",value:function(){game.add.tween(this.popup).to({y:(game.height-oe.instance().STANDARD_HEIGHT+this.positionPracticePopupConfig.lineRewardPopup.y)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1).start()}},{key:"addCongraTxt",value:function(){this.congraTxt=new Phaser.Text(game,this.positionPracticePopupConfig.congrat_txt_not_reward.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.congrat_txt_not_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.congrat_txt_not_reward.text,this.positionPracticePopupConfig.congrat_txt_not_reward.configs),this.congraTxt.anchor.set(.5,0),this.popup.addChild(this.congraTxt)}},{key:"addTxtDetailReward",value:function(){this.txtDetailReward=new Phaser.Text(game,this.positionPracticePopupConfig.txt_detail_not_reward.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_detail_not_reward.y*window.GameConfig.RESIZE,"".concat(this.positionPracticePopupConfig.txt_detail_not_reward.text1," ").concat(this.score," ").concat(this.positionPracticePopupConfig.txt_detail_not_reward.text2),this.positionPracticePopupConfig.txt_detail_not_reward.configs),this.txtDetailReward.anchor.set(.5,0),this.txtDetailReward.addColor("#ffa33a",19),this.txtDetailReward.addColor("#333333",22),this.popup.addChild(this.txtDetailReward)}},{key:"addBtnContinue",value:function(){this.btnContinue=new Phaser.Sprite(game,this.positionPracticePopupConfig.btn_continue.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_continue.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_continue.nameAtlas,this.positionPracticePopupConfig.btn_continue.nameSprite),this.btnContinue.anchor.set(.5,0);var e=new Phaser.Text(game,this.positionPracticePopupConfig.txt_btn_continue.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_btn_continue.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_btn_continue.text,this.positionPracticePopupConfig.txt_btn_continue.configs);e.anchor.set(.5,0),this.btnContinue.inputEnabled=!0,this.btnContinue.events.onInputUp.add(this.onClickContinue,this),this.btnContinue.addChild(e),this.timeCountDown=9,this.txtTimeout=new Phaser.Text(game,this.positionPracticePopupConfig.txt_timeout_continue.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_timeout_continue.y*window.GameConfig.RESIZE,"( ".concat(this.timeCountDown," )"),this.positionPracticePopupConfig.txt_timeout_continue.configs),this.btnContinue.addChild(this.txtTimeout),this.timer=game.time.create(!1),this.timer.loop(1e3,this.handleTimer,this),this.timer.start(),this.popup.addChild(this.btnContinue)}},{key:"onClickContinue",value:function(){var e=this;be.instance().playSound(be.buttonclick);var t=game.add.tween(this.popup).to({y:-1200*window.GameConfig.RESIZE},200,"Linear",!1);t.start(),t.onComplete.add(function(){e.signalNextQuestion.dispatch(),e.destroy()},this)}},{key:"addTimeCountDown",value:function(e){this.timeCountDownThisWeekPractice=e,this.timeCounter=new Phaser.Text(game,this.positionRankingConfig.txt_timeCounter.x*window.GameConfig.RESIZE,this.positionRankingConfig.txt_timeCounter.y*window.GameConfig.RESIZE,this.positionRankingConfig.txt_timeCounter.text,this.positionRankingConfig.txt_timeCounter.configs),this.timer=game.time.create(!1),this.timer.loop(1e3,this.handleTimer,this),this.timer.start(),this.addChild(this.timeCounter)}},{key:"handleTimer",value:function(){this.timeCountDown>0&&(this.timeCountDown--,this.txtTimeout.setText("( ".concat(this.timeCountDown," )"))),0==this.timeCountDown&&(this.signalNextQuestion.dispatch(),this.destroy())}},{key:"destroy",value:function(){for(null!==this.timer&&(this.timer.stop(),this.timer.destroy(),this.timer=null);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),ji(Ui(t.prototype),"destroy",this).call(this)}}])&&Ni(n.prototype,i),o&&Ni(n,o),t}();function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qi(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wi(e){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ki=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Qi(this,Wi(t).call(this,game))).event={tweenGemPls:new Phaser.Signal},n.reward=e,n.definedPosition(),n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(t,Z),n=t,(i=[{key:"definedPosition",value:function(){this.pointsArrayGem1=[{x:320*window.GameConfig.RESIZE,y:361*window.GameConfig.RESIZE},{x:379*window.GameConfig.RESIZE,y:240*window.GameConfig.RESIZE},{x:619*window.GameConfig.RESIZE,y:192*window.GameConfig.RESIZE},{x:443*window.GameConfig.RESIZE,y:101*window.GameConfig.RESIZE}],this.pointsArrayGem2=[{x:520*window.GameConfig.RESIZE,y:361*window.GameConfig.RESIZE},{x:480*window.GameConfig.RESIZE,y:432*window.GameConfig.RESIZE},{x:321*window.GameConfig.RESIZE,y:352*window.GameConfig.RESIZE},{x:443*window.GameConfig.RESIZE,y:101*window.GameConfig.RESIZE}],this.pointsArrayGem3=[{x:560*window.GameConfig.RESIZE,y:361*window.GameConfig.RESIZE},{x:818*window.GameConfig.RESIZE,y:343*window.GameConfig.RESIZE},{x:321*window.GameConfig.RESIZE,y:352*window.GameConfig.RESIZE},{x:443*window.GameConfig.RESIZE,y:101*window.GameConfig.RESIZE}],this.pointsArrayGem4=[{x:320*window.GameConfig.RESIZE,y:361*window.GameConfig.RESIZE},{x:377*window.GameConfig.RESIZE,y:558*window.GameConfig.RESIZE},{x:83*window.GameConfig.RESIZE,y:395*window.GameConfig.RESIZE},{x:443*window.GameConfig.RESIZE,y:101*window.GameConfig.RESIZE}],this.arrParentGems=[this.pointsArrayGem1,this.pointsArrayGem2,this.pointsArrayGem3,this.pointsArrayGem4]}},{key:"afterInit",value:function(){0!==this.reward&&this.addIconGem()}},{key:"addIconGem",value:function(){var e=this;be.instance().playSound(be.takereward),this.gem_big=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,375*window.GameConfig.RESIZE,"otherSprites","Gem_Big"),this.gem_big.anchor.set(.5),this.gem_big.scale.set(.3),this.txtReward=new Phaser.Text(game,320*window.GameConfig.RESIZE,210*window.GameConfig.RESIZE,"+".concat(this.reward),{font:"GilroyBold",fill:"#ffffff",align:"center",fontSize:30}),this.txtReward.anchor.set(.5),this.addChild(this.txtReward),game.add.tween(this.gem_big.scale).to({x:1,y:1},300,Phaser.Easing.Linear.In,!1).start();var t=game.add.tween(this.gem_big).to({alpha:1},1e3,Phaser.Easing.Linear.In,!1);t.start();var n=.1;t.onUpdateCallback(function(){e.gem_big.rotation+=n,e.gem_big.rotation>.2?n=-.07:e.gem_big.rotation<-.2&&(n=.07)},this),t.onComplete.add(function(){e.gem_big.rotation=0;var t=game.add.tween(e.gem_big.scale).to({x:.5,y:.5},300,Phaser.Easing.Linear.In,!1);t.start(),t.onComplete.add(function(){e.gem_big.destroy()},e);var n={diamond:parseInt(e.txtReward.text)},i=game.add.tween(n).to({diamond:0},600,"Linear",!1);i.start(),i.onUpdateCallback(function(){e.txtReward.text="+"+parseInt(n.diamond)},e),i.onComplete.add(function(){e.event.tweenGemPls.dispatch(),e.txtReward.destroy()},e),e.addGemMoveCurve()},this),this.addStarNim(),this.addChild(this.gem_big)}},{key:"addStarNim",value:function(){var e=new Phaser.Sprite(game,0,0,"SoloModeStar");e.anchor.set(.5),e.scale.set(1.5);e.animations.add("run_star");e.animations.play("run_star",30,!0),this.gem_big.addChild(e)}},{key:"addGemMoveCurve",value:function(){for(var e=this,t=function(t){var n=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,361*window.GameConfig.RESIZE,"practicePopupSprites","GEM");n.scale.set(2),n.anchor.set(.5),e.addChild(n),setTimeout(function(){game.add.tween(n.scale).to({x:1,y:1},800,Phaser.Easing.Linear.In,!1).start();var i=game.add.tween(n).to({x:[320*window.GameConfig.RESIZE,e.arrParentGems[t][1].x,e.arrParentGems[t][2].x,235*window.GameConfig.RESIZE],y:[361*window.GameConfig.RESIZE,e.arrParentGems[t][1].y,e.arrParentGems[t][2].y,65*window.GameConfig.RESIZE]},800,Phaser.Easing.Linear.In,!1,0,0).interpolation(function(e,t){return Phaser.Math.bezierInterpolation(e,t)});i.start(),i.onComplete.add(function(){n.destroy()})},100*t)},n=0;n<this.arrParentGems.length;n++)t(n)}}])&&Vi(n.prototype,i),o&&Vi(n,o),t}();function zi(e){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xi(e,t){return!t||"object"!==zi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ji(e,t,n){return(Ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$i(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $i(e){return($i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var to=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Xi(this,$i(t).call(this,game))).positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),o.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),o.positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),o.score=e,o.reward=n,o.playlist=i,o.isWatchRewardVideo=!1,o.isWatchRewardVideoDone=!1,o.event={goHome:new Phaser.Signal,getRank:new Phaser.Signal,claim:new Phaser.Signal,stopSong:new Phaser.Signal},o.targetTween=o.positionPracticePopupConfig.lineRewardPopup.y,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eo(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.timer=null,this.screenDim,this.tabGem,this.tabHeart,this.addScreenDim(),this.addGemAndHeart(),this.addEventExtension()}},{key:"interstitialClosed",value:function(){this.tweenDestroy()}},{key:"interstitialShowFailed",value:function(){this.tweenDestroy()}},{key:"rewardedVideoEnded",value:function(){}},{key:"rewardedVideoClosed",value:function(){}},{key:"rewardedVideoRewardReceived",value:function(){this.isWatchRewardVideoDone=!0,this.event.claim.dispatch(1)}},{key:"interstitialFailedToLoad",value:function(){this.tweenDestroy()}},{key:"rewardedVideoFailed",value:function(){this.btnClaimNotWatch.inputEnabled=!0,this.btnWatching.inputEnabled=!0}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.addChild(this.screenDim)}},{key:"addGemAndHeart",value:function(){this.tabGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabGem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.nameAtlas,this.positionPracticePopupConfig.tabGem.nameSprite),this.addGemDetail(),this.addChild(this.tabGem),this.tabHeart=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabHeart.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.nameAtlas,this.positionPracticePopupConfig.tabHeart.nameSprite),this.addHeartDetail(),this.addChild(this.tabHeart)}},{key:"addGemDetail",value:function(){var e;this.txtGemReceived,e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.gem_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.gem_reward.nameAtlas,this.positionPracticePopupConfig.gem_reward.nameSprite),this.txtGemReceived=new Phaser.Text(game,0,this.positionPracticePopupConfig.gem_reward_txt.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,this.positionPracticePopupConfig.gem_reward_txt.configs);var t=e.width+this.txtGemReceived.width;this.txtGemReceived.x=(this.tabGem.width-t)/2-5*window.GameConfig.RESIZE,e.x=(this.tabGem.width-t)/2+this.txtGemReceived.width+10*window.GameConfig.RESIZE,this.tabGem.addChild(e),this.tabGem.addChild(this.txtGemReceived)}},{key:"addHeartDetail",value:function(){var e,t;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.heart_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.heart_reward.nameAtlas,this.positionPracticePopupConfig.heart_reward.nameSprite),t=new Phaser.Text(game,0,this.positionPracticePopupConfig.heart_reward_txt.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("heart").value,this.positionPracticePopupConfig.heart_reward_txt.configs);var n=e.width+t.width;t.x=(this.tabHeart.width-n)/2-5*window.GameConfig.RESIZE,e.x=(this.tabHeart.width-n)/2+t.width+10*window.GameConfig.RESIZE,this.tabHeart.addChild(e),this.tabHeart.addChild(t)}},{key:"addPopup",value:function(){this.congraTxt,this.txtDetailReward,this.btnClaimNotWatch,this.timeCountDown,this.txtTimeout,this.iconGem;var e=new Phaser.Sprite(game,this.positionPracticePopupConfig.popup_confirm_top_bg.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.popup_confirm_top_bg.nameAtlas,this.positionPracticePopupConfig.popup_confirm_top_bg.nameSprite);if(this.popup=new Phaser.Sprite(game,this.positionPracticePopupConfig.lineRewardPopup.x*window.GameConfig.RESIZE,1140*window.GameConfig.RESIZE,null),this.popup.addChild(e),0==this.reward){var t=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.rewardPopup.nameAtlas,this.positionPracticePopupConfig.rewardPopup.nameSprite);this.popup.addChild(t)}else if(!0===dV.instance().dataMySeft.vip){var n=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.rewardPopup.nameAtlas,"Box");n.scale.set(1,453/593);var i=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.rewardPopup.nameAtlas,this.positionPracticePopupConfig.rewardPopup.nameSprite);this.popup.addChild(n),this.popup.addChild(i)}else{var o=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.rewardPopup.nameAtlas,"Box");o.scale.set(1,567/593);var a=new Phaser.Sprite(game,0,0,this.positionPracticePopupConfig.rewardPopup.nameAtlas,this.positionPracticePopupConfig.rewardPopup.nameSprite);this.popup.addChild(o),this.popup.addChild(a)}this.addChild(this.popup),this.addCongraTxt(),this.addTxtDetailReward(),this.addIconCircle(),this.addBtnShare(),this.addBtnHome(),this.addBtnRank(),this.addFireWork(),0!==this.reward?(this.addBtnClaim(),this.addBtnWatch(),this.moveChildOfPopup(),this.checkDevice()):(Ei.instance().showInterstitialDoneSoloMode(),this.changePosChild())}},{key:"addBtnShare",value:function(){if(this.btnShare=new Phaser.Sprite(game,this.positionPracticePopupConfig.btn_fb_share.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_fb_share.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_fb_share.nameAtlas,this.positionPracticePopupConfig.btn_fb_share.nameSprite),this.btnShare.anchor.set(.5,0),this.btnShare.inputEnabled=!0,this.btnShare.events.onInputUp.add(this.onClickShare,this),"en"==de.instance().currentLanguage){var e=new Phaser.Text(game,-18,30,"SHARE",{font:"GilroyBold",fill:"white",align:"center",fontSize:28});this.btnShare.addChild(e)}else{var t=new Phaser.Text(game,-18,30,"CHIA SẺ",{font:"GilroyBold",fill:"white",align:"center",fontSize:28});this.btnShare.addChild(t)}this.popup.addChild(this.btnShare)}},{key:"onClickShare",value:function(){be.instance().playSound(be.buttonclick),Ri.instance().share()}},{key:"onShared",value:function(){}},{key:"checkDevice",value:function(){window.cordova&&"undefined"!=typeof device||this.btnWatching&&(this.btnWatching.inputEnabled=!1)}},{key:"moveChildOfPopup",value:function(){this.targetTween-=70,this.congraTxt.y+=70,this.txtDetailReward.y+=70,this.btnShare.y+=70,this.btnRank.y+=70}},{key:"changePosChild",value:function(){this.btnRank.revive(),this.btnShare.kill(),this.btnHome.revive()}},{key:"makeTweenPopup",value:function(){var e=this;be.instance().playSound(be.getrewardsolomode);var t=game.add.tween(this.popup).to({y:(game.height-oe.instance().STANDARD_HEIGHT+this.targetTween)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);t.start(),t.onComplete.add(function(){0!==e.reward&&e.addAnimGem()},this)}},{key:"addGemFly",value:function(){!0===dV.instance().dataMySeft.vip?(this.gemIcon=new Ki(2*this.reward),this.gemIcon.event.tweenGemPls.add(this.tweenGemPls,this),this.addChild(this.gemIcon)):(this.gemIcon=new Ki(this.reward),this.gemIcon.event.tweenGemPls.add(this.tweenGemPls,this),this.addChild(this.gemIcon))}},{key:"addAnimGem",value:function(){this.sSGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.anim_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.anim_gem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.anim_gem.nameSprite),this.sSGem.anchor.set(.5),this.animGem=this.sSGem.animations.add("animGemReward"),this.animGem.enableUpdate=!0,this.animGem.onUpdate.add(this.onUpdateGemReward,this),this.animGem.play(35,!1,!1),this.popup.addChild(this.sSGem)}},{key:"onUpdateGemReward",value:function(e,t){58===t.index&&(e.frame=42)}},{key:"tweenGemPls",value:function(){var e=this,t=game.add.tween(this.txtGemReceived).to({text:dV.instance().dataMySeft.diamond},1e3,"Linear",!1);t.start(),t.onUpdateCallback(function(){e.txtGemReceived.text=parseInt(e.txtGemReceived.text)},this),t.onComplete.add(function(){e.event.goHome.dispatch()})}},{key:"addCongraTxt",value:function(){this.congraTxt=new Phaser.Text(game,this.positionPracticePopupConfig.congrat_txt_reward.x*window.GameConfig.RESIZE,70*window.GameConfig.RESIZE,de.instance().getData("238"),this.positionPracticePopupConfig.congrat_txt_reward.configs),this.congraTxt.anchor.set(.5,0),this.popup.addChild(this.congraTxt)}},{key:"addTxtDetailReward",value:function(){this.txtDetailReward=new Phaser.Text(game,this.positionPracticePopupConfig.txt_detail_reward.x*window.GameConfig.RESIZE,135*window.GameConfig.RESIZE,"".concat(de.instance().getData("241")," ").concat(this.playlist.name),{font:"GilroyMedium",fill:"#333333",align:"center",wordWrap:!0,wordWrapWidth:450,fontSize:24}),this.txtDetailReward.anchor.set(.5,0),this.txtDetailReward.addColor("#ffa33a",45),this.popup.addChild(this.txtDetailReward)}},{key:"addIconCircle",value:function(){if(0!==this.reward)if(this.iconCircle=new Phaser.Sprite(game,this.positionPracticePopupConfig.icon_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.icon_gem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.icon_gem.nameAtlas,this.positionPracticePopupConfig.icon_gem.nameSprite),this.iconCircle.anchor.set(.5),this.popup.addChild(this.iconCircle),!0===dV.instance().dataMySeft.vip){var e=new Phaser.Text(game,this.positionPracticePopupConfig.reward_icon_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.reward_icon_gem.y*window.GameConfig.RESIZE,"+".concat(2*parseInt(this.reward)),this.positionPracticePopupConfig.reward_icon_gem.configs);e.anchor.set(.5,0),game.time.events.loop(10,this.animationUpdateCircle,this),this.popup.addChild(e)}else{var t=new Phaser.Text(game,this.positionPracticePopupConfig.reward_icon_gem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.reward_icon_gem.y*window.GameConfig.RESIZE,"+".concat(this.reward),this.positionPracticePopupConfig.reward_icon_gem.configs);t.anchor.set(.5,0),game.time.events.loop(10,this.animationUpdateCircle,this),this.popup.addChild(t)}}},{key:"animationUpdateCircle",value:function(){this.iconCircle.angle+=3}},{key:"addBtnHome",value:function(){this.btnHome=new Phaser.Button(game,33*window.GameConfig.RESIZE,265*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_home_practice56.nameAtlas,this.onClickHome,this,null,this.positionPracticePopupConfig.btn_home_practice56.nameSprite),0!==this.reward&&(this.btnHome.inputEnabled=!1,this.btnHome.alpha=.5),this.popup.addChild(this.btnHome),this.btnHome.kill()}},{key:"onClickHome",value:function(){be.instance().playSound(be.buttonclick),this.event.goHome.dispatch(),this.destroy()}},{key:"addBtnRank",value:function(){this.btnFoundametal=new Phaser.Sprite(game,149*window.GameConfig.RESIZE,265*window.GameConfig.RESIZE,null),this.btnRank=new Phaser.Button(game,0,0,this.positionPracticePopupConfig.btn_rank_practice56.nameAtlas,this.onClickRank,this,null,this.positionPracticePopupConfig.btn_rank_practice56.nameSprite);var e=new Bt(this.positionPracticePopupConfig.icon_rank);this.btnRank.addChild(e);var t=new Qt(this.positionPracticePopupConfig.txt_icon_rank,de.instance().getData("235"));this.btnRank.addChild(t);var n=new Phaser.Sprite(game,80*window.GameConfig.RESIZE,11*window.GameConfig.RESIZE,"btnRankAnim");this.btnRank.addChild(n);n.animations.add("run_rank");n.animations.play("run_rank",26,!0),this.btnFoundametal.addChild(this.btnRank),this.popup.addChild(this.btnFoundametal),this.btnRank.kill()}},{key:"onClickRank",value:function(){be.instance().playSound(be.buttonclick),this.event.getRank.dispatch()}},{key:"addBtnClaim",value:function(){this.btnClaimNotWatch=new Phaser.Sprite(game,this.positionPracticePopupConfig.btn_continue_reward56.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_continue_reward56.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.btn_continue_reward56.nameAtlas,this.positionPracticePopupConfig.btn_continue_reward56.nameSprite),this.btnClaimNotWatch.anchor.set(.5,0);var e=new Phaser.Text(game,this.positionPracticePopupConfig.txt_btn_continue.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txt_btn_continue.y*window.GameConfig.RESIZE,"NHẬN",this.positionPracticePopupConfig.txt_btn_continue.configs);e.anchor.set(.5,0),this.btnClaimNotWatch.inputEnabled=!0,this.btnClaimNotWatch.events.onInputUp.add(this.onClickClaim,this),this.btnClaimNotWatch.addChild(e),this.popup.addChild(this.btnClaimNotWatch)}},{key:"onClickClaim",value:function(){this.isWatchRewardVideo=!1,this.btnClaimNotWatch.inputEnabled=!1,this.btnWatching&&(this.btnWatching.inputEnabled=!1),this.event.stopSong.dispatch(),this.event.claim.dispatch(0)}},{key:"addBtnWatch",value:function(){if(!0===dV.instance().dataMySeft.vip);else{this.btnWatching=new _n(this.positionPracticePopupConfig.btn_watch_video_reward56,this.onClickWatching,this),this.btnWatching.anchor.set(.5,0);var e=new Bt(this.positionPracticePopupConfig.btn_watch_video_reward56.camera);this.btnWatching.addChild(e);var t=new Qt(this.positionPracticePopupConfig.btn_watch_video_reward56.txt1,de.instance().getData("191"));t.anchor.set(.5,0),t.x=0;var n=new Qt(this.positionPracticePopupConfig.btn_watch_video_reward56.txt2,de.instance().getData("190"));n.x=e.x-n.width-4,this.btnWatching.addChild(t),this.btnWatching.addChild(n),this.popup.addChild(this.btnWatching)}}},{key:"onClickWatching",value:function(){this.isWatchRewardVideo=!0,this.btnClaimNotWatch.inputEnabled=!1,this.btnWatching&&(this.btnWatching.inputEnabled=!1),this.event.stopSong.dispatch(),Ei.instance().showRewardVideoX2DiamondSoloMode()}},{key:"addFireWork",value:function(){var e=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,350*window.GameConfig.RESIZE,"firework");e.anchor.set(.5),e.scale.set(1),this.addChild(e);e.animations.add("run_win");e.animations.play("run_win",40,!0)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.SOLO_MODE_GOT_REWARD_RESPONSE&&(LogConsole.log(e.params.getDump()),"OK"==e.params.getUtfString("status")&&(this.addGemFly(),this.btnClaimNotWatch.alpha=.5,this.btnWatching&&(this.btnWatching.alpha=.5),this.btnHome.inputEnabled=!0,this.btnHome.alpha=1))}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Ei.instance().event.rewardedVideoRewardReceived.add(this.rewardedVideoRewardReceived,this),Ei.instance().event.interstitialClosed.add(this.interstitialClosed,this),Ei.instance().event.rewardedVideoEnded.add(this.rewardedVideoEnded,this),Ei.instance().event.rewardedVideoClosed.add(this.rewardedVideoClosed,this),Ei.instance().event.interstitialFailedToLoad.add(this.interstitialFailedToLoad,this),Ei.instance().event.rewardedVideoFailed.add(this.rewardedVideoFailed,this),Ei.instance().event.interstitialShowFailed.add(this.interstitialShowFailed,this),Ri.instance().event.share.add(this.onShared,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),Ei.instance().event.rewardedVideoRewardReceived.remove(this.rewardedVideoRewardReceived,this),Ei.instance().event.interstitialClosed.remove(this.interstitialClosed,this),Ei.instance().event.rewardedVideoEnded.remove(this.rewardedVideoEnded,this),Ei.instance().event.rewardedVideoClosed.remove(this.rewardedVideoRewardReceived,this),Ei.instance().event.interstitialFailedToLoad.remove(this.interstitialFailedToLoad,this),Ei.instance().event.interstitialShowFailed.remove(this.interstitialShowFailed,this),Ri.instance().event.share.remove(this.onShared,this)}},{key:"destroy",value:function(){for(this.removeEventExtension(),null!==this.timer&&(this.timer.stop(),this.timer.destroy(),this.timer=null);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Ji($i(t.prototype),"destroy",this).call(this)}}])&&Yi(n.prototype,i),o&&Yi(n,o),t}();function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function io(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oo(e){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ao(e,t){return(ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function so(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ro=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=oo(t).call(this,game,null))||"object"!==no(i)&&"function"!=typeof i?so(n):i).event={close:new Phaser.Signal},e.positionPopup=oe.instance().positionPopup,e.topBg=new Bt(e.positionPopup.popup_confirm_top_bg),e.addChild(e.topBg),e.bgText=new Dn(e.positionPopup.popup_confirm_bg_text),e.addChild(e.bgText),e.txtContent=new Qt(e.positionPopup.popup_confirm_text_content,o),e.txtContent.setTextBounds(0,0,920*oe.instance().scale,e.bgText.height),e.addChild(e.txtContent),e.btnClose=new _n(e.positionPopup.popup_close_btn_exit,e.chooseClose,so(so(e))),e.btnClose.x=e.topBg.width-e.btnClose.width/2,e.btnClose.y=-e.btnClose.height/3,e.addChild(e.btnClose),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ao(e,t)}(t,Je),n=t,(i=[{key:"setHeight",value:function(e){this.bgText.height=e,this.txtContent.setTextBounds(0,0,920*oe.instance().scale,this.bgText.height-30*oe.instance().scale)}},{key:"chooseClose",value:function(){LogConsole.log("chooseClose"),this.event.close.dispatch()}}])&&io(n.prototype,i),o&&io(n,o),t}();function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ho(e,t){return!t||"object"!==lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uo(e){return(uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fo(e,t){return(fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var po=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ho(this,uo(t).call(this,game,null))).positionRanking=oe.instance().positionPopup,n.bg=new Dn(n.positionRanking.ranking_bg_help),n.addChild(n.bg),n.txtContent=new Qt(n.positionRanking.ranking_text_help,e),n.txtContent.x=35*oe.instance().scale,n.addChild(n.txtContent),n.bg.width=n.txtContent.x+n.txtContent.width+24*oe.instance().scale,n.bg.height=n.txtContent.y+n.txtContent.height+25*oe.instance().scale,n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fo(e,t)}(t,Je),n=t,(i=[{key:"setWidthHeight",value:function(){this.bg.width=this.txtContent.x+this.txtContent.width+24*oe.instance().scale,this.bg.height=this.txtContent.y+this.txtContent.height+25*oe.instance().scale}},{key:"width",get:function(){return this.bg.width}},{key:"height",get:function(){return this.bg.height}}])&&co(n.prototype,i),o&&co(n,o),t}();function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mo(e,t){return!t||"object"!==go(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vo(e,t,n){return(vo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wo(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e,t){return(bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _o=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=mo(this,wo(t).call(this,game))).playScript=JSON.parse(game.cache.getText("playScript")),e.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.type=n,e.event={step1:new Phaser.Signal,step2:new Phaser.Signal,step3:new Phaser.Signal,step4:new Phaser.Signal,step5:new Phaser.Signal,step6:new Phaser.Signal,step7:new Phaser.Signal,step8:new Phaser.Signal},e.stepVal=0,e.indexOfAnswer=5,e.arrTutorial=[de.instance().getData("196"),de.instance().getData("197"),de.instance().getData("198"),de.instance().getData("199"),de.instance().getData("200"),de.instance().getData("201"),de.instance().getData("202"),de.instance().getData("203")],e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bo(e,t)}(t,Phaser.Group),n=t,o=[{key:"instance",value:function(){return this.playScriptScreen||(this.playScriptScreen=new t),this.playScriptScreen}},{key:"STEP1",get:function(){return"step1"}},{key:"STEP2",get:function(){return"step2"}},{key:"STEP3",get:function(){return"step3"}},{key:"STEP4",get:function(){return"step8"}},{key:"STEP5",get:function(){return"step5"}},{key:"STEP6",get:function(){return"step6"}},{key:"STEP7",get:function(){return"step7"}},{key:"STEP8",get:function(){return"step4"}},{key:"STEP9",get:function(){return"step9"}},{key:"INIT",get:function(){return"INIT"}},{key:"DONE_TURNBASE",get:function(){return"DONE_TURNBASE"}},{key:"DONE_GET_QUEST",get:function(){return"DONE_GET_QUEST"}},{key:"DONE_ALL",get:function(){return"DONE_ALL"}}],(i=[{key:"afterInit",value:function(){this.bg=new Phaser.Button(game,0,0,"BG_Opacity"),this.addChild(this.bg),this.addButtonSkip(),this.addEventExtension()}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.PLAY_SCRIPT_DONE_GET_QUEST_RESPONSE&&"OK"==e.params.getUtfString("status")&&this.destroy()}},{key:"addButtonSkip",value:function(){this.btnSkip=new _n(this.playScript.play_script_btn_skip,this.onSkipPS,this),this.btnSkip.y=game.height-oe.instance().STANDARD_HEIGHT+this.playScript.play_script_btn_skip.y,this.btnSkip.anchor.set(.5);var e=new Qt(this.playScript.play_script_btn_skip.text,de.instance().getData(195));e.anchor.set(.5),this.btnSkip.addChild(e),this.btnSkip.kill(),this.addChild(this.btnSkip)}},{key:"onSkipPS",value:function(){He.instance().logEvent(He.Screen_Play_Script_Skip+"_"+this.stepVal),be.instance().playSound(be.buttonclick),dV.instance().sendData(ki.PLAY_SCRIPT_DONE_ALL_REQUEST,null)}},{key:"addHand",value:function(e,t){this.hand=new Phaser.Sprite(game,e,t,this.playScript.play_script_hand.nameAtlas,this.playScript.play_script_hand.nameSprite),game.add.tween(this.hand).to({y:"+30"},200,Phaser.Easing.Linear.None,!0,0,1,!0).loop(!0).start(),this.addChild(this.hand)}},{key:"addHelperStep1",value:function(){var e=new po(this.arrTutorial[0]);e.txtContent.changeStyle({font:"Gilroy",fill:"#333333",fontSize:28,wordWrap:!0,wordWrapWidth:500,align:"center"}),e.setWidthHeight(),e.position.x=(game.width-e.width)/2,e.position.y=60,this.addChild(e),this.btnSkip.revive()}},{key:"addStep1ChooseAnswerQuest1",value:function(e,n){He.instance().logEvent(He.Screen_Play_Script+"_step1"),this.indexOfAnswer=5;var i=e.correctAnswer;this.indexOfAnswer=i-1;var o=e.answers[i-1];this.stepVal=t.STEP1,this.bg.loadTexture("BG_Opacity"),this.countQuiz=n;var a=new _n({x:0,y:0,nameAtlas:"playSprites",nameSprite:"Tab_Dapan_01"},this.onClickTab,this);a.anchor.set(.5),a.position.x=320,a.position.y=1==i?game.height-576:2==i?game.height-576+122:3==i?game.height-576+244:game.height-576+366;var s=new Qt({x:0,y:0,text:"",style:{font:"GilroyMedium",fill:"black",align:"center",fontSize:28,boundsAlignH:"center",boundsAlignV:"middle",wordWrap:!0,wordWrapWidth:400}},o);s.anchor.set(.5),a.addChild(s),game.add.tween(a.scale).to({x:1.1,y:1.1},300,Phaser.Easing.Linear.None,!0,0,1,!0).loop(!0).start(),this.addChild(a),this.addHand(a.x+150,a.y)}},{key:"addHelperStep2",value:function(){var e=new po(this.arrTutorial[1]);e.txtContent.changeStyle({font:"Gilroy",fill:"#333333",fontSize:28,wordWrap:!0,wordWrapWidth:500,align:"center"}),e.setWidthHeight(),e.position.x=(game.width-e.width)/2,e.position.y=90,this.addChild(e),this.btnSkip.revive()}},{key:"addStep2ChooseAnswerQuest2",value:function(e,n){He.instance().logEvent(He.Screen_Play_Script+"_step2"),this.indexOfAnswer=5;var i=e.correctAnswer;this.indexOfAnswer=i-1;var o=e.answers[i-1];this.stepVal=t.STEP2,this.bg.loadTexture("BG_Opacity"),this.countQuiz=n;var a=new _n({x:0,y:0,nameAtlas:"playSprites",nameSprite:"Tab_Dapan_01"},this.onClickTab,this);a.anchor.set(.5),a.position.x=320,a.position.y=1==i?game.height-576:2==i?game.height-576+122:3==i?game.height-576+244:game.height-576+366;var s=new Qt({x:0,y:0,text:"",style:{font:"GilroyMedium",fill:"black",align:"center",fontSize:28,boundsAlignH:"center",boundsAlignV:"middle",wordWrap:!0,wordWrapWidth:400}},o);s.anchor.set(.5),a.addChild(s),game.add.tween(a.scale).to({x:1.1,y:1.1},300,Phaser.Easing.Linear.None,!0,0,1,!0).loop(!0).start(),this.addChild(a),this.addHand(a.x+150,a.y)}},{key:"addHelperStep3",value:function(){var e=new po(this.arrTutorial[2]);e.txtContent.changeStyle({font:"Gilroy",fill:"#333333",fontSize:28,wordWrap:!0,wordWrapWidth:500,align:"center"}),e.setWidthHeight(),e.position.x=(game.width-e.width)/2,e.position.y=90,this.addChild(e),this.btnSkip.revive()}},{key:"addStep3ChooseAnswerQuest3",value:function(e,n){He.instance().logEvent(He.Screen_Play_Script+"_step3"),this.indexOfAnswer=5;var i=e.correctAnswer;this.indexOfAnswer=i-1;var o=e.answers[i-1];this.stepVal=t.STEP3,this.bg.loadTexture("BG_Opacity"),this.countQuiz=n;var a=new _n({x:0,y:0,nameAtlas:"playSprites",nameSprite:"Tab_Dapan_01"},this.onClickTab,this);a.anchor.set(.5),a.position.x=320,a.position.y=1==i?game.height-576:2==i?game.height-576+122:3==i?game.height-576+244:game.height-576+366;var s=new Qt({x:0,y:0,text:"",style:{font:"GilroyMedium",fill:"black",align:"center",fontSize:28,boundsAlignH:"center",boundsAlignV:"middle",wordWrap:!0,wordWrapWidth:400}},o);s.anchor.set(.5),a.addChild(s),game.add.tween(a.scale).to({x:1.1,y:1.1},300,Phaser.Easing.Linear.None,!0,0,1,!0).loop(!0).start(),this.addChild(a),this.addHand(a.x+150,a.y)}},{key:"addHelperStep4",value:function(){var e=new po(this.arrTutorial[3]);e.txtContent.changeStyle({font:"Gilroy",fill:"#333333",fontSize:28,wordWrap:!0,wordWrapWidth:500,align:"center"}),e.setWidthHeight(),e.position.x=(game.width-e.width)/2,e.position.y=650,this.addChild(e)}},{key:"addStep4UseSupportItem",value:function(){He.instance().logEvent(He.Screen_Play_Script+"_step8"),this.stepVal=t.STEP4,this.bg.loadTexture("BG_Opacity_100"),this.btn_remove_answer=new Phaser.Button(game,this.positionPlayConfig.btn_remove_answer.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.btn_remove_answer.y)*window.GameConfig.RESIZE,this.positionPlayConfig.btn_remove_answer.nameAtlas,function(){},this,null,this.positionPlayConfig.btn_remove_answer.nameSprite),this.btn_remove_answer.anchor.set(.5);var e=new Phaser.Text(game,this.positionPlayConfig.txt_remove_answer.x*window.GameConfig.RESIZE,this.positionPlayConfig.txt_remove_answer.y*window.GameConfig.RESIZE,de.instance().getData("271"),this.positionPlayConfig.txt_remove_answer.configs);e.anchor.set(.5);var n=new Qt(this.positionPlayConfig.txt_dis_one,this.positionPlayConfig.txt_dis_one.text);n.anchor.set(.5),this.btn_remove_answer.addChild(n);var i=new Phaser.Sprite(game,this.positionPlayConfig.diamond_remove_answer.x*window.GameConfig.RESIZE,this.positionPlayConfig.diamond_remove_answer.y*window.GameConfig.RESIZE,this.positionPlayConfig.diamond_remove_answer.nameAtlas,this.positionPlayConfig.diamond_remove_answer.nameSprite);i.anchor.set(1,.5);var o=new Bt(this.positionPlayConfig.mic_so_luong);o.anchor.set(.5),this.countMic=dV.instance().socket.mySelf.getVariable("support_item").value,this.numberOfSptItem=new Qt(this.positionPlayConfig.number_mic_so_luong,dV.instance().socket.mySelf.getVariable("support_item").value),this.numberOfSptItem.anchor.set(.5),o.addChild(this.numberOfSptItem),this.btn_remove_answer.addChild(o),this.btn_remove_answer.addChild(i),this.btn_remove_answer.addChild(e),this.btn_remove_answer.events.onInputUp.add(this.inputBtnRemoveAnswer,this),this.addChild(this.btn_remove_answer),game.add.tween(this.btn_remove_answer.scale).to({x:1.1,y:1.1},300,Phaser.Easing.Linear.None,!0,0,1,!0).loop(!0).start(),this.addBtnYellow()}},{key:"inputBtnRemoveAnswer",value:function(){be.instance().playSound(be.buttonclick),this.event.step4.dispatch(),this.destroy()}},{key:"addStep5ReceiveFirstReward",value:function(){var e=this;He.instance().logEvent(He.Screen_Play_Script+"_step4"),this.btnSkip.revive(),this.stepVal=t.STEP5,this.bg.loadTexture("BG_Opacity");var n=new po(this.arrTutorial[4]);n.txtContent.changeStyle({font:"Gilroy",fill:"#333333",fontSize:28,wordWrap:!0,wordWrapWidth:500,align:"center"}),n.setWidthHeight(),n.position.x=(game.width-n.width)/2,n.position.y=90,this.addChild(n),this.btnClaim=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,(game.height-481)*window.GameConfig.RESIZE,"questAndAchieveSprites","Button_Nhan_popup"),this.btnClaim.anchor.set(.5,0);var i=new Phaser.Text(game,0,24*window.GameConfig.RESIZE,"NHẬN",{font:"GilroyBold",fill:"#ffffff",align:"center",fontSize:30});i.anchor.set(.5,0),this.btnClaim.addChild(i),this.btnClaim.inputEnabled=!0,this.btnClaim.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),e.onClickTab()},this),this.addChild(this.btnClaim),this.addHand(this.btnClaim.x+50,this.btnClaim.y+40)}},{key:"claimReward",value:function(){}},{key:"addStep6BtnReceiveInQAndA",value:function(){He.instance().logEvent(He.Screen_Play_Script+"_step5"),this.btnSkip.revive(),this.stepVal=t.STEP6}},{key:"onClaim",value:function(){this.quest.destroy(),this.hand.destroy(),t.instance().event.step6.dispatch()}},{key:"addStep7CloseQAndA",value:function(){He.instance().logEvent(He.Screen_Play_Script+"_step6"),this.btnSkip.revive(),this.stepVal=t.STEP7,this.bg.loadTexture("BG_Opacity"),this.btnBack=new Phaser.Sprite(game,this.playScript.btn_back.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.playScript.btn_back.y)*window.GameConfig.RESIZE,this.playScript.btn_back.nameAtlas,this.playScript.btn_back.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.addChild(this.btnBack),this.addHand(this.btnBack.x-25,this.btnBack.y)}},{key:"onBack",value:function(){this.onClickTab()}},{key:"addStep8AcceptChallenge",value:function(){He.instance().logEvent(He.Screen_Play_Script+"_step7"),this.btnSkip.revive(),this.stepVal=t.STEP8,this.bg.loadTexture("BG_Opacity");var e=new po(this.arrTutorial[6]);e.txtContent.changeStyle({font:"Gilroy",fill:"#333333",fontSize:28,wordWrap:!0,wordWrapWidth:500,align:"center"}),e.setWidthHeight(),e.position.x=(game.width-e.width)/2,e.position.y=90,this.addChild(e),this.btnAccept=new Phaser.Button(game,this.playScript.btn_accept.x*window.GameConfig.RESIZE,this.playScript.btn_accept.y*window.GameConfig.RESIZE,"otherSprites",this.onAccept,this,null,"btnFirstGame"),this.btnAccept.anchor.set(.5),this.addChild(this.btnAccept),game.add.tween(this.btnAccept.scale).to({x:1.1,y:1.1},300,Phaser.Easing.Linear.None,!0,0,1,!0).loop(!0).start(),this.addHand(this.btnAccept.x,this.btnAccept.y)}},{key:"addBtnYellow",value:function(){var e=new Phaser.Sprite(game,this.playScript.btn_yellow.x,this.playScript.btn_yellow.y,this.playScript.btn_yellow.nameAtlas,this.playScript.btn_yellow.nameSprite);e.anchor.set(.5),game.add.tween(e).to({y:"+30"},500,Phaser.Easing.Linear.None,!0,0,1,!0).loop(!0).start(),this.addChild(e)}},{key:"onAccept",value:function(){this.onClickTab()}},{key:"addStep9GoodLuck",value:function(){var e=this;He.instance().logEvent(He.Screen_Play_Script+"_step9"),this.stepVal=t.STEP9,this.bg.destroy();var n=new po(this.arrTutorial[7]);n.txtContent.changeStyle({font:"Gilroy",fill:"#333333",fontSize:28,wordWrap:!0,wordWrapWidth:500,align:"center"}),n.setWidthHeight(),n.position.x=(game.width-n.width)/2,n.position.y=90,this.addChild(n),this.tweenDestroy9=game.time.events.add(3*Phaser.Timer.SECOND,function(){var t=game.add.tween(n).to({y:-500},2e3,Phaser.Easing.Back.InOut,!0);t.start(),t.onComplete.add(function(){e.destroy()},e)})}},{key:"onClickTab",value:function(){this.stepVal==t.STEP1&&this.event.step1.dispatch(this.indexOfAnswer),this.stepVal==t.STEP2&&this.event.step2.dispatch(this.indexOfAnswer),this.stepVal==t.STEP3&&this.event.step3.dispatch(this.indexOfAnswer),this.stepVal==t.STEP4&&this.event.step4.dispatch(),this.stepVal==t.STEP5&&(this.event.step5.dispatch(),t.instance().event.step5.dispatch()),this.stepVal==t.STEP6&&t.instance().event.step6.dispatch(),this.stepVal==t.STEP7&&(this.event.step7.dispatch(),t.instance().event.step7.dispatch()),this.stepVal==t.STEP8&&(this.event.step8.dispatch(),t.instance().event.step8.dispatch()),this.destroy()}},{key:"changeBg",value:function(){this.bg.loadTexture("BG_Opacity_100")}},{key:"removeAllTut",value:function(){this.bg.destroy(),this.btnSkip.destroy()}},{key:"destroy",value:function(){for(this.removeEventExtension(),game.time.events.remove(this.tweenDestroy9);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),vo(wo(t.prototype),"destroy",this).call(this)}}])&&yo(n.prototype,i),o&&yo(n,o),t}();function So(e){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Co(e,t){return!t||"object"!==So(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ko(e,t,n){return(ko="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Po(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oo(e,t){return(Oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ro=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Co(this,Po(t).call(this,game))).quest=e,n.positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),n.eventInput={claim:new Phaser.Signal},n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oo(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.screenDim,this.popup,this.addScreenDim(),this.addPopup(),this.addEventExtension(),He.instance().logEvent(He.Popup_Quest)}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.addChild(this.screenDim)}},{key:"addPopup",value:function(){this.txtPopup,this.rewardClaimed,this.txtQuestReward,this.btnClaim,this.popup=new ro,this.popup.x=35*window.GameConfig.RESIZE,this.popup.y=1136*window.GameConfig.RESIZE,this.popup.setHeight(400*window.GameConfig.RESIZE),this.popup.event.close.add(this.onClose,this),this.addTxtPopup(),this.addRewardClaimed(),this.addTxtQuestReward(),this.addBtnClaim(),this.addChild(this.popup)}},{key:"addTxtPopup",value:function(){this.txtPopup=new Phaser.Text(game,this.positionQAndAConfig.txtPopupClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.txtPopupClaim.y*window.GameConfig.RESIZE,de.instance().getData("272"),this.positionQAndAConfig.txtPopupClaim.configs),this.txtPopup.anchor.set(.5,0),this.popup.addChild(this.txtPopup)}},{key:"addRewardClaimed",value:function(){if(this.rewardClaimed=new Phaser.Text(game,this.positionQAndAConfig.rewardClaimed.x*window.GameConfig.RESIZE,this.positionQAndAConfig.rewardClaimed.y*window.GameConfig.RESIZE,this.quest.reward,this.positionQAndAConfig.rewardClaimed.configs),"DIAMOND"==this.quest.reward_type)(e=new Phaser.Sprite(game,this.positionQAndAConfig.gemClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.gemClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.gemClaim.nameAtlas,this.positionQAndAConfig.gemClaim.nameSprite)).scale.set(1.2);else if("TICKET"==this.quest.reward_type){(e=new Phaser.Sprite(game,this.positionQAndAConfig.ticketClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.ticketClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.ticketClaim.nameAtlas,this.positionQAndAConfig.ticketClaim.nameSprite)).scale.set(1.2)}else{var e;(e=new Phaser.Sprite(game,this.positionQAndAConfig.sptItemClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.sptItemClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.sptItemClaim.nameAtlas,this.positionQAndAConfig.sptItemClaim.nameSprite)).scale.set(1.2)}var t=this.rewardClaimed.width+e.width;this.rewardClaimed.x=(570*window.GameConfig.RESIZE-t)/2-5*window.GameConfig.RESIZE,e.x=(570*window.GameConfig.RESIZE-t)/2+this.rewardClaimed.width+5*window.GameConfig.RESIZE,this.popup.addChild(this.rewardClaimed),this.popup.addChild(e)}},{key:"addTxtQuestReward",value:function(){this.txtQuestReward=new Phaser.Text(game,this.positionQAndAConfig.questReward.x*window.GameConfig.RESIZE,this.positionQAndAConfig.questReward.y*window.GameConfig.RESIZE,this.quest.quest,this.positionQAndAConfig.questReward.configs),this.txtQuestReward.anchor.set(.5,0),this.popup.addChild(this.txtQuestReward)}},{key:"addBtnClaim",value:function(){var e=this;this.btnClaim=new Phaser.Sprite(game,285*window.GameConfig.RESIZE,295*window.GameConfig.RESIZE,"questAndAchieveSprites","Button_Nhan_popup"),this.btnClaim.anchor.set(.5,0);var t=new Phaser.Text(game,0,27*window.GameConfig.RESIZE,de.instance().getData("189"),{font:"GilroyBold",fill:"#ffffff",align:"center",fontSize:30});t.anchor.set(.5,0),this.btnClaim.addChild(t),this.btnClaim.inputEnabled=!0,this.btnClaim.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick);var t=game.add.tween(e.popup).to({y:-249*window.GameConfig.RESIZE},200,Phaser.Easing.Linear.Out,!1);t.start(),t.onComplete.add(function(){e.eventInput.claim.dispatch(),e.destroy()},e)},this),this.popup.addChild(this.btnClaim)}},{key:"makeTweenPopup",value:function(){var e=this;be.instance().playSound(be.popupfinishquest);var t=game.add.tween(this.popup).to({y:(game.height-776)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);t.start(),t.onComplete.add(function(){if(oe.instance().playScript.playing_guide==_o.DONE_TURNBASE){var t=new _o;t.afterInit(),e.addChild(t),t.event.step5.add(e.step5ReceiveFristReward,e),t.addStep5ReceiveFirstReward()}},this)}},{key:"step5ReceiveFristReward",value:function(){this.eventInput.claim.dispatch(),this.destroy()}},{key:"onClose",value:function(){var e=this,t=game.add.tween(this.popup).to({y:-420*window.GameConfig.RESIZE},200,Phaser.Easing.Linear.Out,!1);t.start(),t.onComplete.add(function(){e.destroy()},this),this.popup.event.close.remove(this.onClose,this)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.PLAY_SCRIPT_DONE_ALL_RESPONSE&&"OK"==e.params.getUtfString("status")&&(oe.instance().playScript.playing_guide=_o.DONE_ALL,this.destroy())}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"destroy",value:function(){if(this.removeEventExtension(),null!==this.children){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}ko(Po(t.prototype),"destroy",this).call(this)}}])&&Eo(n.prototype,i),o&&Eo(n,o),t}();function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Io(e,t){return!t||"object"!==xo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Do=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Io(this,Ao(t).call(this,game,null))).positionPopup=oe.instance().positionPopup,e.topBg=new Bt(e.positionPopup.popup_confirm_top_bg),e.addChild(e.topBg),e.bgText=new Dn(e.positionPopup.popup_confirm_bg_text),e.addChild(e.bgText),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(t,Je),n=t,(i=[{key:"setHeight",value:function(e){this.bgText.height=e}},{key:"setWidth",value:function(e){this.bgText.width=e,this.topBg.width=e}},{key:"width",get:function(){return this.topBg.width}}])&&To(n.prototype,i),o&&To(n,o),t}();function Go(e){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function No(e,t){return!t||"object"!==Go(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bo(e){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jo(e,t){return(jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Uo=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=No(this,Bo(t).call(this,game))).x=e,a.y=n,a.level=i,a.scaleSet=o,a.addLevel(),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jo(e,t)}(t,Z),n=t,(i=[{key:"addLevel",value:function(){if(1==this.level){var e=new Phaser.Sprite(game,0*this.scaleSet,0*this.scaleSet,"questAndAchieveSprites","Stars");e.anchor.set(.5),e.scale.set(this.scaleSet),this.addChild(e)}else if(2==this.level){var t=new Phaser.Sprite(game,-16*this.scaleSet,0,"questAndAchieveSprites","Stars");t.anchor.set(.5),t.scale.set(.8*this.scaleSet),this.addChild(t);var n=new Phaser.Sprite(game,16*this.scaleSet,0,"questAndAchieveSprites","Stars");n.anchor.set(.5),n.scale.set(.8*this.scaleSet),this.addChild(n)}else if(3==this.level){var i=new Phaser.Sprite(game,-40*this.scaleSet,10*this.scaleSet,"questAndAchieveSprites","Stars");i.anchor.set(.5),i.scale.set(.8*this.scaleSet),this.addChild(i);var o=new Phaser.Sprite(game,40*this.scaleSet,10*this.scaleSet,"questAndAchieveSprites","Stars");o.anchor.set(.5),o.scale.set(.8*this.scaleSet),this.addChild(o);var a=new Phaser.Sprite(game,0,0,"questAndAchieveSprites","Stars");a.anchor.set(.5),a.scale.set(this.scaleSet),this.addChild(a)}else if(4==this.level){var s=new Phaser.Sprite(game,-16*this.scaleSet,0,"questAndAchieveSprites","Stars");s.anchor.set(.5),s.scale.set(.8*this.scaleSet),this.addChild(s);var r=new Phaser.Sprite(game,16*this.scaleSet,0,"questAndAchieveSprites","Stars");r.anchor.set(.5),r.scale.set(.8*this.scaleSet),this.addChild(r);var l=new Phaser.Sprite(game,-40*this.scaleSet,10*this.scaleSet,"questAndAchieveSprites","Stars");l.anchor.set(.5),l.scale.set(.6*this.scaleSet),this.addChild(l);var c=new Phaser.Sprite(game,40*this.scaleSet,10*this.scaleSet,"questAndAchieveSprites","Stars");c.anchor.set(.5),c.scale.set(.6*this.scaleSet),this.addChild(c)}else{var h=new Phaser.Sprite(game,0,0,"questAndAchieveSprites","Stars");h.anchor.set(.5),h.scale.set(this.scaleSet),this.addChild(h);var u=new Phaser.Sprite(game,32*this.scaleSet,10*this.scaleSet,"questAndAchieveSprites","Stars");u.anchor.set(.5),u.scale.set(.8*this.scaleSet),this.addChild(u);var d=new Phaser.Sprite(game,-32*this.scaleSet,10*this.scaleSet,"questAndAchieveSprites","Stars");d.anchor.set(.5),d.scale.set(.8*this.scaleSet),this.addChild(d);var f=new Phaser.Sprite(game,-60*this.scaleSet,30*this.scaleSet,"questAndAchieveSprites","Stars");f.anchor.set(.5),f.scale.set(.6*this.scaleSet),this.addChild(f);var p=new Phaser.Sprite(game,60*this.scaleSet,30*this.scaleSet,"questAndAchieveSprites","Stars");p.anchor.set(.5),p.scale.set(.6*this.scaleSet),this.addChild(p)}}}])&&Mo(n.prototype,i),o&&Mo(n,o),t}();function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ho(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qo(e,t){return(Qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ho(this,Vo(t).call(this,game))).achievement=e,n.positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),n.eventInput={claim:new Phaser.Signal},n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qo(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){var e=this;this.screenDim,this.popup,this.addScreenDim(),this.addPopup(),this.timeoutPopup=setTimeout(function(){e.makeTweenPopup()},1e3)}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.addChild(this.screenDim)}},{key:"addPopup",value:function(){this.txtPopup,this.rewardClaimed,this.txtQuestReward,this.btnClaim,this.medal,this.congraTxt,this.popup=new Do,this.popup.x=35*window.GameConfig.RESIZE,this.popup.y=1500*window.GameConfig.RESIZE,this.popup.setHeight(486*window.GameConfig.RESIZE),this.addChild(this.popup),this.addTxtPopup(),this.addCongraTxt(),this.addRewardClaimed(),this.addAchievementTitle(),this.addBtnClaim(),this.addMedal(),this.addFireWork(),this.loadMedal(this.achievement.medal),this.addStars(),He.instance().logEvent(He.Popup_Achievement)}},{key:"addStars",value:function(){this.stars=new Uo(285,-125,this.achievement.new_level,1),this.popup.addChild(this.stars)}},{key:"addTxtPopup",value:function(){this.txtPopup=new Phaser.Text(game,this.positionQAndAConfig.achievement.txtPopupClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.txtPopupClaim.y*window.GameConfig.RESIZE,de.instance().getData("273"),this.positionQAndAConfig.achievement.txtPopupClaim.configs),this.txtPopup.anchor.set(.5,0);var e=new Qt(this.positionQAndAConfig.achievement.txt_phan_thuonng,de.instance().getData("233"));e.anchor.set(.5,0),this.popup.addChild(e),this.popup.addChild(this.txtPopup)}},{key:"addCongraTxt",value:function(){this.congraTxt=new Phaser.Text(game,this.positionQAndAConfig.achievement.congrat_txt_reward.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.congrat_txt_reward.y*window.GameConfig.RESIZE,de.instance().getData("238"),this.positionQAndAConfig.achievement.congrat_txt_reward.configs),this.congraTxt.anchor.set(.5,0),this.popup.addChild(this.congraTxt)}},{key:"addRewardClaimed",value:function(){if(this.rewardClaimed=new Phaser.Text(game,this.positionQAndAConfig.achievement.rewardClaimed.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.rewardClaimed.y*window.GameConfig.RESIZE,this.achievement.reward,this.positionQAndAConfig.achievement.rewardClaimed.configs),"DIAMOND"==this.achievement.reward_type)(e=new Phaser.Sprite(game,this.positionQAndAConfig.achievement.gemClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.gemClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.gemClaim.nameAtlas,this.positionQAndAConfig.achievement.gemClaim.nameSprite)).scale.set(1.2);else if("TICKET"==this.achievement.reward_type){(e=new Phaser.Sprite(game,this.positionQAndAConfig.achievement.ticketClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.ticketClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.ticketClaim.nameAtlas,this.positionQAndAConfig.achievement.ticketClaim.nameSprite)).scale.set(1.2)}else{var e;(e=new Phaser.Sprite(game,this.positionQAndAConfig.achievement.sptItemClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.sptItemClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.sptItemClaim.nameAtlas,this.positionQAndAConfig.achievement.sptItemClaim.nameSprite)).scale.set(1.2)}var t=this.rewardClaimed.width+e.width;this.rewardClaimed.x=(570*window.GameConfig.RESIZE-t)/2-5*window.GameConfig.RESIZE,e.x=(570*window.GameConfig.RESIZE-t)/2+this.rewardClaimed.width+5*window.GameConfig.RESIZE,this.popup.addChild(this.rewardClaimed),this.popup.addChild(e)}},{key:"addAchievementTitle",value:function(){this.txtQuestReward=new Phaser.Text(game,this.positionQAndAConfig.achievement.achievement_title.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.achievement_title.y*window.GameConfig.RESIZE,"".concat(this.achievement.title," ").concat(this.achievement.new_level),this.positionQAndAConfig.achievement.achievement_title.configs),this.txtQuestReward.anchor.set(.5,0),this.popup.addChild(this.txtQuestReward)}},{key:"addBtnClaim",value:function(){var e=this;this.btnClaim=new Phaser.Sprite(game,285*window.GameConfig.RESIZE,385*window.GameConfig.RESIZE,"practicePopupSprites","Button_Tiep_Tuc"),this.btnClaim.anchor.set(.5,0);var t=new Phaser.Text(game,0,21*window.GameConfig.RESIZE,de.instance().getData("189"),{font:"GilroyBold",fill:"#ffffff",align:"center",fontSize:31});t.anchor.set(.5,0),this.btnClaim.addChild(t),this.btnClaim.inputEnabled=!0,this.btnClaim.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick);var t=game.add.tween(e.popup).to({y:-420*window.GameConfig.RESIZE},200,Phaser.Easing.Linear.Out,!1);t.start(),t.onComplete.add(function(){e.eventInput.claim.dispatch(),e.destroy()},e)},this),this.popup.addChild(this.btnClaim)}},{key:"addMedal",value:function(){this.medal=new Phaser.Sprite(game,this.positionQAndAConfig.achievement.medal_popup.x,this.positionQAndAConfig.achievement.medal_popup.y,this.positionQAndAConfig.achievement.medal_popup.nameAtlas,this.positionQAndAConfig.achievement.medal_popup.nameSprite),this.medal.anchor.set(.5),this.medal.scale.set(.6),this.popup.addChild(this.medal)}},{key:"loadMedal",value:function(e){this.key=e,game.cache.checkImageKey(e)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.key))}},{key:"onLoad",value:function(){rn.instance().event.load_image_complate.remove(this.onLoad,this);try{game.cache.checkImageKey(this.key)&&this&&this.medal.loadTexture("".concat(this.key))}catch(e){}}},{key:"loadStart",value:function(){LogConsole.log("loadStart")}},{key:"addFireWork",value:function(){var e=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,355*window.GameConfig.RESIZE,"firework");e.anchor.set(.5),this.addChild(e);e.animations.add("run_win");e.animations.play("run_win",40,!0)}},{key:"makeTweenPopup",value:function(){be.instance().playSound(be.popupfinishachievement),game.add.tween(this.popup).to({y:(game.height-781)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1).start()}},{key:"onClose",value:function(){var e=this,t=game.add.tween(this.popup).to({y:-420*window.GameConfig.RESIZE},200,Phaser.Easing.Linear.Out,!1);t.start(),t.onComplete.add(function(){e.destroy()},this),this.popup.event.close.remove(this.onClose,this)}}])&&Zo(n.prototype,i),o&&Zo(n,o),t}();function qo(e){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ko(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zo(e,t){return!t||"object"!==qo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yo(e){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xo(e,t){return(Xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jo=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zo(this,Yo(t).call(this,game,e,n,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xo(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"add",value:function(e){this.addChild(e)}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&Ko(n.prototype,i),o&&Ko(n,o),t}();function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ta(e,t){return!t||"object"!==$o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function na(e){return(na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oa=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=ta(this,na(t).call(this,game,e,n,null))).dailyRewardConfig=JSON.parse(game.cache.getText("dailyRewardConfig")),a.configs=i,a.state=o,a.afterInit(),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(t,Phaser.Sprite),n=t,o=[{key:"DIAMOND",get:function(){return"DIAMOND"}},{key:"SUPPORT_ITEM",get:function(){return"SUPPORT_ITEM"}},{key:"TICKET",get:function(){return"TICKET"}},{key:"INIT",get:function(){return"INIT"}},{key:"NOT_INIT",get:function(){return"NOT_INIT"}},{key:"REWARDED",get:function(){return"REWARDED"}}],(i=[{key:"afterInit",value:function(){this.box,this.resourceSprite,this.rewardTxt,this.day,LogConsole.log(this.configs),this.addBox(),this.addResourceSprite(),this.addRewardTxt(),this.addDay()}},{key:"addBox",value:function(){LogConsole.log("addBox"),this.state==t.INIT?(this.box=new Bt(this.dailyRewardConfig.daily_reward.box_init),this.addChild(this.box)):(this.box=new Bt(this.dailyRewardConfig.daily_reward.box),this.addChild(this.box))}},{key:"addResourceSprite",value:function(){var e=this;if(LogConsole.log("addResourceSprite"),this.configs.reward_type==t.DIAMOND?(this.resourceSprite=new Bt(this.dailyRewardConfig.daily_reward.resource.diamond),this.resourceSprite.anchor.set(.5),this.addChild(this.resourceSprite)):this.configs.reward_type==t.SUPPORT_ITEM?(this.resourceSprite=new Bt(this.dailyRewardConfig.daily_reward.resource.spt_item),this.resourceSprite.anchor.set(.5),this.addChild(this.resourceSprite)):(this.resourceSprite=new Bt(this.dailyRewardConfig.daily_reward.resource.ticket),this.resourceSprite.anchor.set(.5),this.addChild(this.resourceSprite)),this.state==t.INIT){this.tweenParent=game.add.tween(this.resourceSprite).to({alpha:1},1e3,Phaser.Easing.Linear.In,!0),this.tweenParent.loop();var n=.1;this.tweenParent.onUpdateCallback(function(){e.resourceSprite.rotation+=n,e.resourceSprite.rotation>.2?n=-.07:e.resourceSprite.rotation<-.2&&(n=.07)},this)}}},{key:"addRewardTxt",value:function(){LogConsole.log("addRewardTxt"),this.state==t.REWARDED?(this.rewardTxt=new Bt(this.dailyRewardConfig.daily_reward.icon_rewarded),this.rewardTxt.anchor.set(.5),this.addChild(this.rewardTxt)):(this.rewardTxt=new Phaser.Text(game,this.dailyRewardConfig.daily_reward.txt_reward.x*window.GameConfig.RESIZE,this.dailyRewardConfig.daily_reward.txt_reward.y*window.GameConfig.RESIZE,this.configs.reward,this.dailyRewardConfig.daily_reward.txt_reward.style),this.rewardTxt.anchor.set(.5,0),this.addChild(this.rewardTxt))}},{key:"addDay",value:function(){LogConsole.log("addDay"),this.day=new Phaser.Text(game,this.dailyRewardConfig.daily_reward.txt_day.x*window.GameConfig.RESIZE,this.dailyRewardConfig.daily_reward.txt_day.y*window.GameConfig.RESIZE,"".concat(de.instance().getData(187)," ").concat(this.configs.day),this.dailyRewardConfig.daily_reward.txt_day.style),this.day.anchor.set(.5,0),this.addChild(this.day)}},{key:"changeRewarded",value:function(){this.tweenParent.stop(),this.resourceSprite.rotation=0,this.rewardTxt.destroy(),this.rewardTxt=null,this.rewardTxt=new Bt(this.dailyRewardConfig.daily_reward.icon_rewarded),this.rewardTxt.anchor.set(.5),this.addChild(this.rewardTxt)}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}}])&&ea(n.prototype,i),o&&ea(n,o),t}(),aa={AUTO_DETECT_THRESHOLD:8};function sa(e,t){return e["nominal".concat((n=t,n.charAt(0).toUpperCase()+n.slice(1)))]||e[t];var n}function ra(e,t,n){if("onInputUp"!=n||!function(e){var t=Math.abs(e.positionDown.x-e.positionUp.x),n=Math.abs(e.positionDown.y-e.positionUp.y);return e.timeUp,e.timeDown,t>aa.AUTO_DETECT_THRESHOLD||n>aa.AUTO_DETECT_THRESHOLD}(e)){var i=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return!1;for(var o=0;o<t.length;o++){var a=t[o];if(a){if(n.call(i,a))return a;var s=e(a.children,n,i);if(s)return s}}return!1}(t,function(t){var n=t.worldPosition,i=t.anchor,o=t.pivot,a=t.width,s=t.height,r=t.scale,l=n.x-(i?i.x*a:0)-o.x*r.x,c=n.y-(i?i.y*s:0)-o.y*r.y;return t.inputEnabled&&new Phaser.Rectangle(l,c,t.width,t.height).contains(e.x,e.y)});return i&&i.events&&i.events[n]&&i.events[n].dispatch&&i.events[n].dispatch(i,e,!0),i}}function la(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ca={direction:"y",autocull:!0,padding:10},ha=function(){function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.parent=n,this.bounds=i,this.idx=0,this.o=this.options=Object.assign({},ca,o),this.items=[],"y"==this.o.direction?this.p={xy:"y",wh:"height"}:this.p={xy:"x",wh:"width"},this.grp=this.game.add.group(n),this.grp.position.set(i.x,i.y),this.events={onAdded:new Phaser.Signal,changeIndex:new Phaser.Signal},this.position=0,this.grp.mask=this._addMask(i)}var t,n,i;return t=e,(n=[{key:"add",value:function(e){this.items.push(e);var t=0;if(this.grp.children.length>0){var n=this.grp.getChildAt(this.grp.children.length-1);t=n[this.p.xy]+sa(n,this.p.wh)+this.o.padding}return e[this.p.xy]=t,this.grp.addChild(e),this.length=t+sa(e,this.p.wh),this.events.onAdded.dispatch(this.length-this.bounds[this.p.wh]),e}},{key:"addMultiple",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(this.add,this)}},{key:"remove",value:function(e){LogConsole.log("remove child-listview"),this.grp.removeChild(e);var t=this.items.indexOf(e);if(-1!=t)return this.items.splice(t,1),e}},{key:"destroy",value:function(){if(LogConsole.log("destroy-listview"),null!=this.events&&(this.events.onAdded.dispose(),this.events.changeIndex.dispose(),this.events=null),null!==this.grp){for(;this.grp.children.length>0;){var e=this.grp.children[0];this.remove(e),e.destroy(),e=null}this.grp.destroy(),this.grp=null}this.game=null,this.parent=null,this.items=null}},{key:"removeAll",value:function(){if(null!==this.grp){for(;this.grp.children.length>0;){var e=this.grp.children[0];this.remove(e),e.destroy(),e=null}this.grp.removeAll()}this.items=[]}},{key:"cull",value:function(){for(var e=[],t=0;t<this.items.length;t++){var n=this.items[t];n[this.p.xy]+sa(n,this.p.wh)+this.grp[this.p.xy]<this.bounds[this.p.xy]?n.visible=!1:n[this.p.xy]+this.grp[this.p.xy]>this.bounds[this.p.xy]+this.bounds[this.p.wh]?n.visible=!1:(n.visible=!0,this.idx=t,this.events.changeIndex.dispatch(),e.push(n))}this.scroller.registerClickables(e)}},{key:"getIdx",value:function(){return this.idx}},{key:"getPositionByItemIndex",value:function(e){return-this.items[e][this.p.xy]}},{key:"setPosition",value:function(e){this.moveToPosition(e)}},{key:"moveToPosition",value:function(e){this.scroller.setTo(e)}},{key:"moveToItem",value:function(e){this.scroller.setTo(this.getPositionByItemIndex(e))}},{key:"tweenToPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.scroller.tweenTo(t,e)}},{key:"tweenToItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.scroller.tweenTo(t,this.getPositionByItemIndex(e))}},{key:"_setPosition",value:function(e){this.position=e,this.grp[this.p.xy]=this.bounds[this.p.xy]+e,this.o.autocull&&this.cull()}},{key:"_addMask",value:function(e){var t=this.game.add.graphics(0,0,this.parent);return t.beginFill(16711680).drawRect(e.x,e.y,e.width,e.height),t.alpha=0,this.bounds.height=e.height,t}}])&&la(t.prototype,n),i&&la(t,i),e}(),ua={nearestMultiple:function(e,t){return Math.round(e/t)*t},scaleBetween:function(e,t,n){return e+(t-e)*n},percentageBetween2:function(e,t,n){return(e-t)/(n-t)}};function da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pa=new Phaser.Point,ga={from:0,to:200,direction:"y",momentum:!1,snapping:!1,bouncing:!1,deceleration:.5,overflow:20,snapStep:10,emitMoving:!1,duration:2,speedLimit:3,flickTimeThreshold:100,offsetThreshold:30,acceleration:.5,accelerationT:250,maxAcceleration:4,time:{},multiplier:1,swipeEnabled:!1,swipeThreshold:5,swipeTimeThreshold:250,minDuration:.5,addListeners:!0},ya=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.clickObject=n,this.maskLimits=i,this.o=this.options=Object.assign({},ga,o),this._updateMinMax(),this.dispatchValues={step:0,total:0,percent:0},this.addListeners(),this.clickables=[],this.isDown=!1,this.isScrolling=!1,this.scrollObject={},this.init(),this.tweenScroll=this.game.add.tween(this.scrollObject).to({},0,Phaser.Easing.Quartic.Out),this.tweenScroll.onUpdateCallback(this.handleUpdate,this),this.tweenScroll.onComplete.add(this.handleComplete,this)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){LogConsole.log("destroy"),this.tweenScroll.stop(),this.removeListeners(),this.clickObject.destroy(),this.clickables=null,this.options=this.o=null,this.maskLimits=null,this.enabled=!1,this.game=null,this.dispatchValues=null,this.isDown=null,this.target=null,this.destroyed=!0}},{key:"addListeners",value:function(){this.events={onUpdate:new Phaser.Signal,onInputUp:new Phaser.Signal,onInputDown:new Phaser.Signal,onInputMove:new Phaser.Signal,onComplete:new Phaser.Signal,onSwipe:new Phaser.Signal},this.o.addListeners&&(this.clickObject.inputEnabled=!0,this.clickObject.events.onInputDown.add(this.handleDown,this),this.clickObject.events.onInputUp.add(this.handleUp,this))}},{key:"removeListeners",value:function(){for(var e in this.o.addListeners&&(this.clickObject.events.onInputDown.remove(this.handleDown,this),this.clickObject.events.onInputUp.remove(this.handleUp,this)),this.events)this.events.hasOwnProperty(e)&&this.events[e].dispose()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"init",value:function(){this.scrollObject[this.o.direction]=this.o.from,this.maxOffset=this.maskLimits[this.o.direction]*this.o.speedLimit,this.enable()}},{key:"reset",value:function(){this.tweenScroll.pause(),this.o.multiplier=1,this.init()}},{key:"setFromTo",value:function(e,t){this.o.from=e,this.o.to=t,this._updateMinMax()}},{key:"isTweening",value:function(){return this.tweenScroll.isRunning}},{key:"registerClickables",value:function(e){this.clickables=e}},{key:"handleDown",value:function(e,t){this.enabled&&(this.isDown=!0,this.target=this.requested=this.scrollObject[this.o.direction],this.o.time.down=t.timeDown,this.o.addListeners&&this.game.input.addMoveCallback(this.handleMove,this),this.isTweening()&&this.o.time.down-this.o.time.up<this.o.accelerationT?this.o.multiplier+=this.o.acceleration:this.o.multiplier=1,this.tweenScroll.stop(),this.tweenScroll.pendingDelete=!1,ra(t,this.clickables,"onInputDown"),this.events.onInputDown.dispatch(e,t))}},{key:"handleMove",value:function(e,t,n){this.enabled&&(this.isScrolling=!0,pa.set(t,n),this.diff=this.old-pa[this.o.direction],this.diff=this._requestDiff(this.diff,this.target,this.min,this.max,this.o.overflow),this.target-=this.diff,this.old=pa[this.o.direction],this.o.time.move=this.game.time.time,this.acc=Math.min(Math.abs(this.diff/30),this.o.maxAcceleration),this.scrollObject[this.o.direction]=this.target,this.handleUpdate(),this.o.emitMoving&&this.events.onInputMove.dispatch(e,t,n))}},{key:"handleUp",value:function(e,t){this.isDown=!1,this.o.addListeners&&this.game.input.deleteMoveCallback(this.handleMove,this),this.o.time.up=t.timeUp,this.o.time.up-this.o.time.down>this.o.accelerationT&&(this.o.multiplier=1);var n={duration:.5,target:this.target};this.o.bouncing||(n.duration=.01),!this.o.infinite&&this.scrollObject[this.o.direction]>this.max?(this.target=this.max,this.tweenTo(n.duration,this.target)):!this.o.infinite&&this.scrollObject[this.o.direction]<this.min?(this.target=this.min,this.tweenTo(n.duration,this.target)):(this._addMomentum(n),this._addSwiping(n,t),this._addSnapping(n),this._addLimits(n),this._calculateDuration(n),this.tweenTo(n.duration,n.target)),ra(t,this.clickables,"onInputUp"),this.events.onInputUp.dispatch(e,t,ra)}},{key:"_addMomentum",value:function(e){if(!this.o.momentum)return e.target;var t=Math.pow(this.acc,2)*this.maskLimits[this.o.direction];return t=Math.min(this.maxOffset,t),t=this.diff>0?-this.o.multiplier*t:this.o.multiplier*t,this.o.time.up-this.o.time.move<this.o.flickTimeThreshold&&0!==t&&Math.abs(t)>this.o.offsetThreshold&&(e.target+=t),e}},{key:"_addSwiping",value:function(e,t){var n=Math.abs(this.down-this.current);if(this.o.swipeEnabled&&this.o.time.up-this.o.time.down<this.o.swipeTimeThreshold&&n>this.o.swipeThreshold){var i=t[this.o.direction]<this.down?"forward":"backward";"forward"==i?e.target-=this.o.snapStep/2:e.target+=this.o.snapStep/2,this.events.onSwipe.dispatch(i)}return e}},{key:"_addSnapping",value:function(e){return this.o.snapping?(e.target=ua.nearestMultiple(e.target,this.o.snapStep),e):e}},{key:"_addLimits",value:function(e){return this.o.infinite?e:(e.target=Math.max(e.target,this.min),e.target=Math.min(e.target,this.max),e)}},{key:"_calculateDuration",value:function(e){var t=Math.abs(e.target-this.scrollObject[this.o.direction]);return e.duration=this.o.duration*t/this.maxOffset,e.duration=Math.max(this.o.minDuration,e.duration),e}},{key:"_requestDiff",value:function(e,t,n,i,o){if(this.o.infinite)return e;return t>i?e*=(i+o-t)/o:t<n&&(e*=-(n-o-t)/o),e}},{key:"tweenToSnap",value:function(e,t){var n=this.o.from-this.o.snapStep*t;this.tweenTo(e,n)}},{key:"tweenTo",value:function(e,t){if(0===e)return this.setTo(t);da({},this.o.direction,t);t>this.max&&(t=this.max),t<this.min&&(t=this.min),this.tweenScroll.stop(),this.game.tweens.remove(this.tweenScroll),this.tweenScroll=this.game.add.tween(this.scrollObject).to(da({},this.o.direction,t),1e3*e,Phaser.Easing.Quartic.Out),this.tweenScroll.onUpdateCallback(this.handleUpdate,this),this.tweenScroll.onComplete.add(this.handleComplete,this),this.tweenScroll.start()}},{key:"cancel",value:function(){this.isDown=!1}},{key:"setTo",value:function(e){e>this.max&&(e=this.max),e<this.min&&(e=this.min),this.scrollObject[this.o.direction]=e,this.tweenScroll.stop(),this.handleUpdate(),this.handleComplete()}},{key:"handleUpdate",value:function(){if(this.enabled){this.o.infinite?this.dispatchValues.total=Phaser.Math.wrap(this.scrollObject[this.o.direction],this.min,this.max):this.dispatchValues.total=this.scrollObject[this.o.direction];var e=this.dispatchValues.total-this.previousTotal;e<-this.length/2?e+=this.length:e>this.length/2&&(e-=this.length),this.dispatchValues.step=e,this.dispatchValues.percent=ua.percentageBetween2(this.dispatchValues.total,this.o.from,this.o.to),this.events.onUpdate.dispatch(this.dispatchValues),this.previousTotal=this.dispatchValues.total}}},{key:"handleComplete",value:function(){LogConsole.log("handleComplete"),this.enabled&&(this.isScrolling=!1,this.o.multiplier=1,this.events.onComplete.dispatch())}},{key:"_updateMinMax",value:function(){this.min=Math.min(this.o.from,this.o.to),this.max=Math.max(this.o.from,this.o.to),this.length=Math.abs(this.max-this.min),this.previousTotal=this.o.from}}])&&fa(t.prototype,n),i&&fa(t,i),e}();function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function va(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wa(e,t){return!t||"object"!==ma(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ba(e,t,n){return(ba="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_a(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sa(e,t){return(Sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ea=function(e){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wa(this,_a(t).call(this,e,n,{x:n.width,y:n.height},i))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sa(e,t)}(t,ya),n=t,(i=[{key:"handleDown",value:function(e,n){this.old=this.down=n[this.o.direction],ba(_a(t.prototype),"handleDown",this).call(this,e,n)}},{key:"handleUp",value:function(e,n){this.current=n[this.o.direction],ba(_a(t.prototype),"handleUp",this).call(this,e,n)}}])&&va(n.prototype,i),o&&va(n,o),t}();function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ka(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pa(e,t){return!t||"object"!==Ca(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oa(e,t,n){return(Oa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ra(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ta={direction:"y",autocull:!0,momentum:!0,bouncing:!0,snapping:!1,overflow:100,padding:10,searchForClicks:!1},Ia=function(e){function t(e,n,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Pa(this,Ra(t).call(this,e,n,function(e){return e.x=e.x?e.x:0,e.y=e.y?e.y:0,e.width<=0?console.warn("PhaserListView: bounds.width <= 0"):e.height<=0&&console.warn("PhaserListView: bounds.height <= 0"),e}(i),Object.assign({},Ta,a)))).scroller=new Ea(o.game,o._addMask(i),Object.assign({from:0,to:0},o.options)),o.scroller.events.onUpdate.add(function(e){o._setPosition(e.total)}),o.events.onAdded.add(function(e){var t=Math.min(-e,0);o.scroller.setFromTo(0,t),o.options.searchForClicks&&o.scroller.registerClickables(o.items)}),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}(t,ha),n=t,(i=[{key:"destroy",value:function(){null!==this.scroller&&(this.scroller.destroy(),this.scroller=null),Oa(Ra(t.prototype),"destroy",this).call(this)}},{key:"reset",value:function(){this._setPosition(0),this.scroller.reset()}}])&&ka(n.prototype,i),o&&ka(n,o),t}();function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Da(e,t){return!t||"object"!==Aa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ma(e,t){return(Ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Na=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Da(this,Ga(t).call(this,game,0,1140*window.GameConfig.RESIZE,null))).dailyRewardConfig=JSON.parse(game.cache.getText("dailyRewardConfig")),i.dailyRewardSettings=e,i.dailyRewardLog=n,i.popup,i.event={claimDailyReward:new Phaser.Signal},i.addPopup(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ma(e,t)}(t,Phaser.Sprite),n=t,o=[{key:"INIT",get:function(){return"INIT"}},{key:"NOT_INIT",get:function(){return"NOT_INIT"}},{key:"REWARDED",get:function(){return"REWARDED"}}],(i=[{key:"addPopup",value:function(){this.addEventExtension(),this.popup=new Bt(this.dailyRewardConfig.popup),this.popup.x=18*window.GameConfig.RESIZE,this.popup.y=233*window.GameConfig.RESIZE,this.addChild(this.popup),this.addDecoPopup(),this.addListReward()}},{key:"addDecoPopup",value:function(){this.boxGift,this.ribbon,this.btnClaim,this.txtHeader,this.initRewardIndex=-1,this.rewardObj,this.addBoxGift(),this.addBtnClaim(),this.addBtnWatch(),this.addTxtHeader()}},{key:"addBoxGift",value:function(){this.boxGift=new Bt(this.dailyRewardConfig.decorate.box_gift),this.boxGift.anchor.set(.5),this.popup.addChild(this.boxGift)}},{key:"addRibbon",value:function(){this.ribbon=new Bt(this.dailyRewardConfig.decorate.ribbon),this.popup.addChild(this.ribbon)}},{key:"addBtnClaim",value:function(){if(!0===dV.instance().dataMySeft.vip){this.btnClaim=new _n(this.dailyRewardConfig.decorate.btn_claim_vip,this.onClickClaim,this),this.btnClaim.anchor.set(.5);var e=new Qt(this.dailyRewardConfig.decorate.txt_btn,de.instance().getData(188));e.anchor.set(.5),this.btnClaim.addChild(e),this.popup.addChild(this.btnClaim)}else{this.btnClaim=new _n(this.dailyRewardConfig.decorate.btn_claim,this.onClickClaim,this),this.btnClaim.anchor.set(.5);var t=new Qt(this.dailyRewardConfig.decorate.txt_btn,de.instance().getData(189));t.anchor.set(.5),this.btnClaim.addChild(t),this.popup.addChild(this.btnClaim)}}},{key:"onClickClaim",value:function(){this.btnClaim.inputEnabled=!1,this.btnWatch&&(this.btnWatch.inputEnabled=!1),!0===dV.instance().dataMySeft.vip?this.event.claimDailyReward.dispatch(this.rewardObj,1):this.event.claimDailyReward.dispatch(this.rewardObj,0)}},{key:"changeItemChildInit",value:function(){this.btnClaim.kill(),this.btnWatch&&this.btnWatch.kill(),this.groupPlaylists.children[this.initRewardIndex-1].changeRewarded()}},{key:"addBtnWatch",value:function(){if(!0===dV.instance().dataMySeft.vip);else{this.btnWatch=new _n(this.dailyRewardConfig.decorate.btn_watch_video_reward,this.onClickWatch,this),this.btnWatch.anchor.set(.5);var e=new Bt(this.dailyRewardConfig.decorate.btn_watch_video_reward.camera);this.btnWatch.addChild(e);var t=new Qt(this.dailyRewardConfig.decorate.btn_watch_video_reward.txt1,de.instance().getData("191")),n=new Qt(this.dailyRewardConfig.decorate.btn_watch_video_reward.txt2,de.instance().getData("190"));this.btnWatch.addChild(t),this.btnWatch.addChild(n),this.popup.addChild(this.btnWatch)}}},{key:"onClickWatch",value:function(){"web"==oe.instance().platform||(this.btnClaim.inputEnabled=!1,this.btnWatch&&(this.btnWatch.inputEnabled=!1),Ei.instance().showRewardVideoX2Daily())}},{key:"addTxtHeader",value:function(){this.txtHeader=new Qt(this.dailyRewardConfig.decorate.txt_header,de.instance().getData(186)),this.txtHeader.anchor.set(.5),this.popup.addChild(this.txtHeader)}},{key:"addListReward",value:function(){var e=0,n=35*window.GameConfig.RESIZE;this.groupPlaylists=new Jo(0,0*window.GameConfig.RESIZE);var i=new Phaser.Group(game,this);i.x=0,i.y=148*window.GameConfig.RESIZE,this.popup.addChild(i);var o=new Phaser.Rectangle(17*window.GameConfig.RESIZE,0,570*window.GameConfig.RESIZE,551*window.GameConfig.RESIZE);this.listView=new Ia(game,i,o,{direction:"y",overflow:100,padding:0,searchForClicks:!0});for(var a=1;a<this.dailyRewardSettings.length+1;a++){if(this.dailyRewardSettings[a-1].day<this.dailyRewardLog.day){var s=new oa(e,n,this.dailyRewardSettings[a-1],t.REWARDED);this.groupPlaylists.add(s)}else if(this.dailyRewardSettings[a-1].day==this.dailyRewardLog.day){var r=new oa(e,n,this.dailyRewardSettings[a-1],this.dailyRewardLog.state);this.rewardObj=this.dailyRewardSettings[a-1],this.initRewardIndex=a,this.groupPlaylists.add(r)}else{var l=new oa(e,n,this.dailyRewardSettings[a-1],t.NOT_INIT);this.groupPlaylists.add(l)}a%5==0&&a>0?(e=0,n+=window.GameConfig.CONFIGS_DAILY_REWARD.y*window.GameConfig.RESIZE,this.groupPlaylists.height+=window.GameConfig.CONFIGS_DAILY_REWARD.y*window.GameConfig.RESIZE):e+=window.GameConfig.CONFIGS_DAILY_REWARD.x*window.GameConfig.RESIZE}this.listView.add(this.groupPlaylists)}},{key:"addEventExtension",value:function(){Ei.instance().event.rewardedVideoRewardReceived.add(this.rewardedVideoRewardReceived,this),Ei.instance().event.rewardedVideoFailed.add(this.rewardedVideoFailed,this),Ei.instance().event.rewardedVideoClosed.add(this.rewardedVideoClosed,this)}},{key:"removeEventExtension",value:function(){Ei.instance().event.rewardedVideoRewardReceived.remove(this.rewardedVideoRewardReceived,this),Ei.instance().event.rewardedVideoFailed.remove(this.rewardedVideoFailed,this),Ei.instance().event.rewardedVideoClosed.remove(this.rewardedVideoClosed,this)}},{key:"rewardedVideoClosed",value:function(){this.btnWatch.inputEnabled=!0,this.btnClaim.inputEnabled=!0}},{key:"rewardedVideoRewardReceived",value:function(){this.event.claimDailyReward.dispatch(this.rewardObj,1)}},{key:"rewardedVideoFailed",value:function(){console.log("Co vao day ko?"),this.btnClaim.inputEnabled=!0,this.btnWatch&&(this.btnWatch.inputEnabled=!0)}},{key:"destroy",value:function(){for(this.removeEventExtension(),this.listView.removeAll(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&La(n.prototype,i),o&&La(n,o),t}();function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ua(e,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fa(e,t,n){return(Fa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Za(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ha(e,t){return(Ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Va=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Ua(this,Za(t).call(this,game))).dailyRewardConfig=JSON.parse(game.cache.getText("dailyRewardConfig")),i.dailyRewardSettings=e,i.dailyRewardLog=n,i.event={claimDone:new Phaser.Signal},i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ha(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.bg,this.headerResource,this.popup,this.addBg(),this.addHeaderResource(),this.addPopup(),He.instance().logEvent(He.Daily_reward)}},{key:"addBg",value:function(){this.bg=new Phaser.Button(game,0,0,"bg_create_room"),this.addChild(this.bg)}},{key:"addHeaderResource",value:function(){this.headerResource=new Phaser.Group(game),this.addChild(this.headerResource),this.txtGem,this.txtTicket,this.txtMic,this.tabGemHeader,this.tabTicketHeader,this.tabMicHeader,this.addTabGemHeader(this.dailyRewardConfig.header),this.addTabTicketHeader(this.dailyRewardConfig.header),this.addTabMicHeader(this.dailyRewardConfig.header)}},{key:"addTabGemHeader",value:function(e){this.tabGemHeader=new Phaser.Sprite(game,e.tabGem.x*window.GameConfig.RESIZE,e.tabGem.y*window.GameConfig.RESIZE,e.tabGem.nameAtlas,e.tabGem.nameSprite);var t=this.addGem(this.dailyRewardConfig.header.gem);this.txtGem=this.addTxtGem(this.dailyRewardConfig.header.txtResource);var n=t.width+this.txtGem.width;this.txtGem.x=(this.tabGemHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabGemHeader.width-n)/2+this.txtGem.width+5*window.GameConfig.RESIZE,this.tabGemHeader.addChild(t),this.tabGemHeader.addChild(this.txtGem),this.headerResource.addChild(this.tabGemHeader)}},{key:"addGem",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtGem",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,e.configs)}},{key:"addTabTicketHeader",value:function(e){this.tabTicketHeader=new Phaser.Sprite(game,e.tabTicket.x*window.GameConfig.RESIZE,e.tabTicket.y*window.GameConfig.RESIZE,e.tabTicket.nameAtlas,e.tabTicket.nameSprite);var t=this.addTicket(this.dailyRewardConfig.header.ticket);this.txtTicket=this.addTxtTicket(this.dailyRewardConfig.header.txtResource);var n=t.width+this.txtTicket.width;this.txtTicket.x=(this.tabTicketHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabTicketHeader.width-n)/2+this.txtTicket.width+5*window.GameConfig.RESIZE,this.tabTicketHeader.addChild(t),this.tabTicketHeader.addChild(this.txtTicket),this.headerResource.addChild(this.tabTicketHeader)}},{key:"addTicket",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtTicket",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("ticket").value,e.configs)}},{key:"addTabMicHeader",value:function(e){this.tabMicHeader=new Phaser.Sprite(game,e.tabMic.x*window.GameConfig.RESIZE,e.tabMic.y*window.GameConfig.RESIZE,e.tabMic.nameAtlas,e.tabMic.nameSprite);var t=this.addMic(this.dailyRewardConfig.header.micro);this.txtMic=this.addTxtMic(this.dailyRewardConfig.header.txtResource);var n=t.width+this.txtMic.width;this.txtMic.x=(this.tabMicHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabMicHeader.width-n)/2+this.txtMic.width+10*window.GameConfig.RESIZE,this.tabMicHeader.addChild(t),this.tabMicHeader.addChild(this.txtMic),this.headerResource.addChild(this.tabMicHeader)}},{key:"addMic",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtMic",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("support_item").value,e.configs)}},{key:"addPopup",value:function(){this.popup=new Na(this.dailyRewardSettings,this.dailyRewardLog),this.popup.event.claimDailyReward.add(this.onClaimDaily,this),this.addChild(this.popup),game.add.tween(this.popup).to({y:game.height-oe.instance().STANDARD_HEIGHT},1800,Phaser.Easing.Elastic.Out,!1).start(),be.instance().playSound(be.dailyreward)}},{key:"onClaimDaily",value:function(e,t){this.rewardObj=e,this.is_watched_ads=t,this.sendClaim()}},{key:"sendClaim",value:function(){var e=new SFS2X.SFSObject;e.putInt("is_watched_ads",this.is_watched_ads),dV.instance().sendData(ki.DAILY_REWARD_CLAIM_REQUEST,e)}},{key:"onClaimDailyDone",value:function(){var e=this;this.popup.changeItemChildInit();var t={x:0,y:0};"DIAMOND"==this.rewardObj.reward_type?(t.x=351,t.y=54):"TICKET"==this.rewardObj.reward_type?(t.x=529,t.y=54):(t.x=164,t.y=54);var n=this.rewardObj.reward;1==this.is_watched_ads&&(n*=2),jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,{type:this.rewardObj.reward_type,reward:n,finishPoint:t}),this.timeTweenUpdateRs=game.time.events.add(2*Phaser.Timer.SECOND,function(){e.updateVariableResource(e.rewardObj),e.timeTweenDispatchClaim=game.time.events.add(1.5*Phaser.Timer.SECOND,function(){e.event.claimDone.dispatch(),e.destroy()},e)},this)}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.DAILY_REWARD_CLAIM_RESPONSE&&"OK"==e.params.getUtfString("status")&&this.onClaimDailyDone()}},{key:"updateVariableResource",value:function(e){var t=this;if("DIAMOND"==e.reward_type){this.txtGem.setText(dV.instance().socket.mySelf.getVariable("diamond").value-e.reward);var n=game.add.tween(this.txtGem).to({text:dV.instance().socket.mySelf.getVariable("diamond").value},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.txtGem.text=parseInt(t.txtGem.text)},this)}else if("TICKET"==e.reward_type){this.txtTicket.setText(dV.instance().socket.mySelf.getVariable("ticket").value-e.reward);var i=game.add.tween(this.txtTicket).to({text:dV.instance().socket.mySelf.getVariable("ticket").value},300,"Linear",!1);i.start(),i.onUpdateCallback(function(){t.txtTicket.text=parseInt(t.txtTicket.text)},this)}else if("SUPPORT_ITEM"==e.reward_type){this.txtMic.setText(dV.instance().socket.mySelf.getVariable("support_item").value-e.reward);var o=game.add.tween(this.txtMic).to({text:dV.instance().socket.mySelf.getVariable("support_item").value},300,"Linear",!1);o.start(),o.onUpdateCallback(function(){t.txtMic.text=parseInt(t.txtMic.text)},this)}}},{key:"destroy",value:function(){for(this.removeEventExtension(),this.popup.event.claimDailyReward.remove(this.onClaimDaily,this),game.time.events.remove(this.timeTweenDispatchClaim),game.time.events.remove(this.timeTweenDispatchClaim);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Fa(Za(t.prototype),"destroy",this).call(this)}}])&&ja(n.prototype,i),o&&ja(n,o),t}();var Qa=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName="",this.diamond=0,this.userId=0,this.avatar="",this.isOnline=!1,this.vip=!1};function Wa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"avatar",get:function(){return"avatar"}},{key:"diamond",get:function(){return"diamond"}},{key:"is_online",get:function(){return"is_online"}},{key:"userId",get:function(){return"userId"}},{key:"userName",get:function(){return"userName"}},{key:"user_id",get:function(){return"user_id"}},{key:"user_name",get:function(){return"user_name"}},{key:"room_master",get:function(){return"room_master"}},{key:"gender",get:function(){return"gender"}},{key:"experience_score",get:function(){return"experience_score"}},{key:"heart",get:function(){return"heart"}},{key:"ticket",get:function(){return"ticket"}},{key:"weekly_high_score",get:function(){return"weekly_high_score"}},{key:"all_time_high_score",get:function(){return"all_time_high_score"}},{key:"level",get:function(){return"level"}},{key:"online_mode_genre",get:function(){return"online_mode_genre"}},{key:"online_mode_room_ready",get:function(){return"online_mode_room_ready"}},{key:"online_mode_loaded",get:function(){return"online_mode_loaded"}},{key:"is_playing_game",get:function(){return"is_playing_game"}},{key:"status",get:function(){return"status"}},{key:"playlists",get:function(){return"playlists"}},{key:"bets",get:function(){return"bets"}},{key:"id",get:function(){return"id"}},{key:"bet_place",get:function(){return"bet_place"}},{key:"percent_of_fee",get:function(){return"percent_of_fee"}},{key:"suggestion_playlist",get:function(){return"suggestion_playlist"}},{key:"score",get:function(){return"score"}},{key:"is_correct_answer",get:function(){return"is_correct_answer"}},{key:"diamond_change",get:function(){return"diamond_change"}},{key:"exp_score",get:function(){return"exp_score"}},{key:"players",get:function(){return"players"}},{key:"users",get:function(){return"users"}},{key:"streak",get:function(){return"streak"}},{key:"friends",get:function(){return"friends"}},{key:"vip",get:function(){return"vip"}}],(n=null)&&Wa(t.prototype,n),i&&Wa(t,i),e}();function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ya(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xa(e){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ja(e,t){return(Ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $a=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Ya(this,Xa(t).call(this,game))).index=n,i.afterCreate(e),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ja(e,t)}(t,Z),n=t,(i=[{key:"afterCreate",value:function(e){this._width=e,this._height=272*window.GameConfig.RESIZE,this.key="",this.ava=new Phaser.Sprite(game,0,0,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.signalInput=new Phaser.Signal,this.maskAva=new Phaser.Graphics(game,0,0),this.addChild(this.ava)}},{key:"addInput",value:function(e,t){this.removeEventInput(e,t),this.addEventInput(e,t),this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(this.onClickSprite,this)}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}},{key:"onClickSprite",value:function(){be.instance().playSound(be.buttonclick),this.signalInput.dispatch(this.value)}},{key:"addNameAva",value:function(e,t){this.txtName=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,t,e.configs),this.txtName.anchor.set(.5,0),this.addChild(this.txtName)}},{key:"addMaskAva",value:function(e){this.maskAva.beginFill(),this.maskAva.drawCircle(this.ava.x,this.ava.y,e),this.maskAva.endFill(),this.ava.mask=this.maskAva,this.addChild(this.maskAva)}},{key:"setChallenged",value:function(){this.ava.alpha=.7,this.txtName.alpha=.7}},{key:"setValue",value:function(e){this.value=e}},{key:"setScale",value:function(e){this.ava.width=108,this.ava.height=108}},{key:"beginLoad",value:function(e){this.key=e,game.cache.checkImageKey(e)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(e))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){try{game.cache.checkImageKey(e.key)&&e&&(""!==e.key?(e.ava.loadTexture("".concat(e.key)),e.ava.width=108,e.ava.height=108):e.ava.loadTexture("songDetailSprites","ava-default"))}catch(e){}},150*this.index)}},{key:"loadStart",value:function(){LogConsole.log("loadStart")}},{key:"width",set:function(e){this._width=e},get:function(){return this._width}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&za(n.prototype,i),o&&za(n,o),t}();function es(e){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ts(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ns(e,t){return!t||"object"!==es(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function os(e,t){return(os=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var as=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ns(this,is(t).call(this,game))).positionMainConfig=JSON.parse(game.cache.getText("positionMainConfig")),e.findOpponentConfig=JSON.parse(game.cache.getText("findOpponentConfig")),e.event={challengeGame:new Phaser.Signal},e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&os(e,t)}(t,Z),n=t,(i=[{key:"addGroupSuggestionFriend",value:function(){null!=this.group&&null!=this.group||(this.group=new Phaser.Group(game),this.addChild(this.group))}},{key:"addSuggestionFriend",value:function(e,t){var n=this;this.addTabScreenSuggestionFriend(),e&&this.shuffleFriendList(e,function(e){for(var i=0;i<e.length;i++)n.createSuggestionFriend(i,e[i]);t()})}},{key:"addTabScreenSuggestionFriend",value:function(){this.tabHeaderSuggestFriend,this.addTabHeaderSuggestFriend()}},{key:"addTabHeaderSuggestFriend",value:function(){this.tabHeaderSuggestFriend=new Phaser.Sprite(game,this.findOpponentConfig.tab_header.x*window.GameConfig.RESIZE,this.findOpponentConfig.tab_header.y*window.GameConfig.RESIZE,this.findOpponentConfig.tab_header.nameAtlas,this.findOpponentConfig.tab_header.nameSprite),this.group.add(this.tabHeaderSuggestFriend),this.addTxtAndLineGradient(this.findOpponentConfig.txt_famous_user,this.findOpponentConfig.line_famous_user),this.addBgSuggestFriend()}},{key:"addTxtAndLineGradient",value:function(e,t){var n=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("243"),e.configs);n.anchor.set(.5);var i=new Phaser.Sprite(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,t.nameAtlas,t.nameSprite);this.tabHeaderSuggestFriend.addChild(n),this.tabHeaderSuggestFriend.addChild(i)}},{key:"addBgSuggestFriend",value:function(){var e=new Phaser.Sprite(game,this.findOpponentConfig.bg_suggest_friend.x*window.GameConfig.RESIZE,this.findOpponentConfig.bg_suggest_friend.y*window.GameConfig.RESIZE,this.findOpponentConfig.bg_suggest_friend.nameAtlas,this.findOpponentConfig.bg_suggest_friend.nameSprite);this.tabHeaderSuggestFriend.addChild(e)}},{key:"createSuggestionFriend",value:function(e,t){if(oe.instance().menuOpponentsResponse.filter(function(e){return"THEIR_TURN"==e.status}).filter(function(e){return e.opponentEntity.id===t.id}).length>0){var n=new $a(0,e);n.x=(140+181*e)*window.GameConfig.RESIZE,n.y=298*window.GameConfig.RESIZE,n.beginLoad(t.avatar),n.width=164*window.GameConfig.RESIZE,n.addMaskAva(108),n.setScale(window.GameConfig.SCALE_AVA_FAMOUS_USER*window.GameConfig.RESIZE),n.addNameAva(this.findOpponentConfig.txt_suggest_friend,de.instance().getData("311")),n.setValue(t),n.addInput(this.onInputSuggestionFriend,this),n.setChallenged(),this.group.add(n),this.addFrameAva(e,t.vip,!0),this.addDotOnline(t,e,!0)}else{var i=new $a(0,e);i.x=(140+181*e)*window.GameConfig.RESIZE,i.y=298*window.GameConfig.RESIZE,i.beginLoad(t.avatar),i.width=164*window.GameConfig.RESIZE,i.addMaskAva(108),i.setScale(window.GameConfig.SCALE_AVA_FAMOUS_USER*window.GameConfig.RESIZE),i.addNameAva(this.findOpponentConfig.txt_suggest_friend,t.user_name),i.setValue(t),i.addInput(this.onInputSuggestionFriend,this),this.group.add(i),this.addFrameAva(e,t.vip,!1),this.addDotOnline(t,e,!1)}}},{key:"addFrameAva",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!0===t?(this.frameAva=new Phaser.Sprite(game,(140+181*e)*window.GameConfig.RESIZE,301*window.GameConfig.RESIZE,"vipSource","Ava_Opponents"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.05),this.group.add(this.frameAva),!0===n&&(this.frameAva.alpha=.7)):(this.frameAva=new Phaser.Sprite(game,(140+181*e)*window.GameConfig.RESIZE,298*window.GameConfig.RESIZE,"playSprites","Khung_Ava_Thuong"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.4),this.group.add(this.frameAva),!1===n&&(this.frameAva.alpha=.7))}},{key:"addDotOnline",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=185+181*t;1==e.isOnline?(this.dotOnline=new Bt({x:i,y:295,nameAtlas:"findOpponentSprites",nameSprite:"Online"}),this.group.add(this.dotOnline),!0===n&&(this.dotOnline.alpha=.7)):(this.dotOnline=new Bt({x:i,y:295,nameAtlas:"findOpponentSprites",nameSprite:"Offline"}),this.group.add(this.dotOnline),!0===n&&(this.dotOnline.alpha=.7))}},{key:"shuffleFriendList",value:function(e,t){t(e.sort(function(){return Math.random()-.5}))}},{key:"removeGroup",value:function(){this.group.destroy(),this.group=null}},{key:"onInputSuggestionFriend",value:function(e){He.instance().logEvent(He.Find_Game_Suggestion_Opponent_profile),He.instance().logEvent(He.Find_Game_Suggestion_Opponent_profile_button),jC.instance().addUserProfile(e.id)}}])&&ts(n.prototype,i),o&&ts(n,o),t}();function ss(e){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ls(e){return(ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cs(e,t){return(cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var us=function(e){function t(e,n){var i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=ls(t).call(this,game,e.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+e.y)*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite))||"object"!==ss(a)&&"function"!=typeof a?hs(o):a).anchor.set(.5),i.configs=n,i.signalInput=new Phaser.Signal,i.inputEnabled=!0,i.events.onInputUp.add(i.onClickBtn,hs(hs(i))),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cs(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"update",value:function(){}},{key:"addInput",value:function(e,t){this.removeEventInput(e,t),this.addEventInput(e,t),this.inputEnabled=!0,this.events.onInputUp.add(this.onClickBtn,this)}},{key:"onClickBtn",value:function(){be.instance().playSound(be.buttonclick),this.signalInput.dispatch(this.configs)}},{key:"addTextInCenter",value:function(e){var t=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("246"),e.configs);t.anchor.set(.5),this.addChild(t)}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}}])&&rs(n.prototype,i),o&&rs(n,o),t}();function ds(e){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ps(e,t){return!t||"object"!==ds(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gs(e){return(gs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ys(e,t){return(ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ms=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ps(this,gs(t).call(this,game))).positionMainConfig=JSON.parse(game.cache.getText("positionMainConfig")),e.findOpponentConfig=JSON.parse(game.cache.getText("findOpponentConfig")),e.event={challengeGame:new Phaser.Signal},e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ys(e,t)}(t,Z),n=t,(i=[{key:"initGroup",value:function(){null!=this.group&&null!=this.group||(this.group=game.add.group(),this.addChild(this.group))}},{key:"addButtonRandomUser",value:function(e){if(null==e.id||null==e.id);else{He.instance().logEvent(He.Find_Game_turbase_random_opponent);var t=new us(this.findOpponentConfig.Button_Random,e);t.addTextInCenter(this.findOpponentConfig.txt_random_user),t.addInput(this.onClickBtn,this),this.group.addChild(t)}}},{key:"addBtnInviteFriendFB",value:function(){var e=new Phaser.Sprite(game,this.findOpponentConfig.Button_FB.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.findOpponentConfig.Button_FB.y)*window.GameConfig.RESIZE,this.findOpponentConfig.Button_FB.nameAtlas,this.findOpponentConfig.Button_FB.nameSprite);e.anchor.set(0,.5),e.inputEnabled=!0,e.events.onInputUp.add(this.inviteFriendFB,this);var t=new Phaser.Sprite(game,this.findOpponentConfig.Icon_Button_FB.x*window.GameConfig.RESIZE,this.findOpponentConfig.Icon_Button_FB.y*window.GameConfig.RESIZE,this.findOpponentConfig.Icon_Button_FB.nameAtlas,this.findOpponentConfig.Icon_Button_FB.nameSprite);t.anchor.set(0,.5),e.addChild(t);var n=new Phaser.Text(game,this.findOpponentConfig.txt_Button_FB.x*window.GameConfig.RESIZE,this.findOpponentConfig.txt_Button_FB.y*window.GameConfig.RESIZE,de.instance().getData("248"),this.findOpponentConfig.txt_Button_FB.configs);n.anchor.set(0,.5),e.addChild(n),this.group.add(e)}},{key:"inviteFriendFB",value:function(){be.instance().playSound(be.buttonclick),Ri.instance().inviteFriend()}},{key:"onClickBtn",value:function(e){He.instance().logEvent(He.Find_Game_turbase_random_opponent_button),LogConsole.log(e),this.event.challengeGame.dispatch(e)}},{key:"removeGroup",value:function(){this.group.destroy(),this.group=null}}])&&fs(n.prototype,i),o&&fs(n,o),t}();function vs(e){return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ws(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bs(e,t,n){return(bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_s(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _s(e){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ss(e,t){return(Ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Es(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Cs=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=_s(t).call(this,game,null))||"object"!==vs(i)&&"function"!=typeof i?Es(n):i).event={back:new Phaser.Signal},e.positionUserProfile=JSON.parse(game.cache.getText("positionUserProfile")),e.bg=new Bt(e.positionUserProfile.header_bg),e.bg.visible=!1,e.addChild(e.bg),e.bgVip=new Bt(e.positionUserProfile.header_bg_vip),e.bgVip.visible=!1,e.addChild(e.bgVip),e.txtHeader=new Qt(e.positionUserProfile.header_txt_content,""),e.txtHeader.setTextBounds(0,0,e.bg.width,e.bg.height),e.addChild(e.txtHeader),e.btnBack=new _n(e.positionUserProfile.header_button_back,e.chooseBack,Es(Es(e))),e.addChild(e.btnBack),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ss(e,t)}(t,Je),n=t,(i=[{key:"chooseBack",value:function(){this.event.back.dispatch(),1==oe.instance().isGetUserProfileSearch&&(Qe.instance().event.searchFriendBackUserProfile.dispatch(),oe.instance().isGetUserProfileSearch=!1)}},{key:"setBg",value:function(e){!0===e?(this.bgVip.visible=!0,this.bg.visible=!1):(this.bgVip.visible=!1,this.bg.visible=!0)}},{key:"setTitle",value:function(e){this.txtHeader.text=e}},{key:"destroy",value:function(){bs(_s(t.prototype),"destroy",this).call(this)}}])&&ws(n.prototype,i),o&&ws(n,o),t}();function ks(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ps=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"NO_GAME",get:function(){return"NO_GAME"}},{key:"THEIR_TURN",get:function(){return"THEIR_TURN"}},{key:"YOUR_TURN",get:function(){return"YOUR_TURN"}},{key:"ARCHIVED",get:function(){return"ARCHIVED"}},{key:"NO_FRIEND",get:function(){return"NO_FRIEND"}},{key:"PENDING_YOU",get:function(){return"PENDING_YOU"}},{key:"PENDING_THEM",get:function(){return"PENDING_THEM"}},{key:"FRIEND",get:function(){return"FRIEND"}}],(n=null)&&ks(t.prototype,n),i&&ks(t,i),e}();function Os(e){return(Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xs(e,t){return!t||"object"!==Os(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Is(e,t){return(Is=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var As=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=xs(this,Ts(t).call(this,game))).findOpponentConfig=JSON.parse(game.cache.getText("findOpponentConfig")),i.oppEnt=e,i.index=n,i.afterCreate(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Is(e,t)}(t,Z),n=t,(i=[{key:"afterCreate",value:function(){this.signalInputAva=new Phaser.Signal,this._height=106*window.GameConfig.RESIZE,this.key="",this.ava=new Phaser.Sprite(game,40*window.GameConfig.RESIZE,55*window.GameConfig.RESIZE,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(this.clickAva,this),this.signalInput=new Phaser.Signal,this.addChild(this.ava),this.addFrameAva(),this.addLineUnder()}},{key:"clickAva",value:function(){this.signalInputAva.dispatch()}},{key:"addBtnPlay",value:function(e){if(this.value.status==Ps.NO_GAME){this.btnPlay=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnPlay.inputEnabled=!0,this.btnPlay.anchor.set(.5),this.btnPlay.events.onInputUp.add(this.onClickSprite,this);var t=new Phaser.Text(game,this.findOpponentConfig.txt_btn_play_findGame.x*window.GameConfig.RESIZE,this.findOpponentConfig.txt_btn_play_findGame.y*window.GameConfig.RESIZE,de.instance().getData("24"),this.findOpponentConfig.txt_btn_play_findGame.configs);t.anchor.set(.5),this.btnPlay.addChild(t),this.addChild(this.btnPlay)}else if(this.value.status==Ps.YOUR_TURN){var n=new Phaser.Text(game,570*window.GameConfig.RESIZE,58*window.GameConfig.RESIZE,de.instance().getData("249"),{font:"Gilroy",fill:"#93909d",fontSize:21});n.anchor.set(1,.5),this.addChild(n)}else if(this.value.status==Ps.THEIR_TURN){var i=new Phaser.Text(game,570*window.GameConfig.RESIZE,58*window.GameConfig.RESIZE,de.instance().getData("247"),{font:"Gilroy",fill:"#93909d",fontSize:21});i.anchor.set(1,.5),this.addChild(i)}}},{key:"addFrameAva",value:function(){!0===this.oppEnt.vip?(this.frameAva=new Phaser.Sprite(game,40*window.GameConfig.RESIZE,57*window.GameConfig.RESIZE,"vipSource","Ava_Opponents_Nho"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.075),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,40*window.GameConfig.RESIZE,55*window.GameConfig.RESIZE,"playSprites","Khung_Ava_Thuong"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(.9),this.addChild(this.frameAva))}},{key:"addLineUnder",value:function(){var e=new Phaser.Sprite(game,this.findOpponentConfig.line_friend_list.x*window.GameConfig.RESIZE,this.findOpponentConfig.line_friend_list.y*window.GameConfig.RESIZE,this.findOpponentConfig.line_friend_list.nameAtlas,this.findOpponentConfig.line_friend_list.nameSprite);this.addChild(e)}},{key:"addInput",value:function(e,t){this.removeEventInput(e,t),this.addEventInput(e,t)}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}},{key:"onClickSprite",value:function(){be.instance().playSound(be.buttonclick),this.signalInput.dispatch({id:this.value.id,userName:this.value.user_name,is_online:this.value.is_online,vip:this.value.vip,avatar:this.value.avatar})}},{key:"addNameAva",value:function(e,t){this.txtName=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,t,e.configs),this.addChild(this.txtName)}},{key:"addMaskAva",value:function(e){this.maskAva=new Phaser.Graphics(game,0,0),this.maskAva.beginFill(),this.maskAva.drawCircle(this.ava.x,this.ava.y,e),this.maskAva.endFill(),this.maskAva.anchor.set(.5),this.ava.mask=this.maskAva,this.addChild(this.maskAva)}},{key:"setStateFriend",value:function(){1==this.value.is_online?this.setStateOnline():this.setStateOffline()}},{key:"setStateOnline",value:function(){var e=new Phaser.Sprite(game,66*window.GameConfig.RESIZE,51*window.GameConfig.RESIZE,"findOpponentSprites","Online");this.addChild(e)}},{key:"setStateOffline",value:function(){var e=new Phaser.Sprite(game,66*window.GameConfig.RESIZE,51*window.GameConfig.RESIZE,"findOpponentSprites","Offline");this.addChild(e)}},{key:"setValue",value:function(e){this.value=e,this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick)},this)}},{key:"setScale",value:function(e){this.ava.width=70,this.ava.height=70}},{key:"beginLoad",value:function(e){this.key=e,game.cache.checkImageKey(e)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(e))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){try{game.cache.checkImageKey(e.key)&&e&&(""!==e.key?e.ava.loadTexture("".concat(e.key)):e.ava.loadTexture("songDetailSprites","ava-default"),e.ava.width=70,e.ava.height=70)}catch(e){}},100*this.index)}},{key:"loadStart",value:function(){LogConsole.log("loadStart")}},{key:"width",set:function(e){this._width=e},get:function(){return this._width}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&Rs(n.prototype,i),o&&Rs(n,o),t}();function Ls(e){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ds(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gs(e,t,n){return(Gs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ms(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ms(e){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ns(e,t){return(Ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var js=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Ms(t).call(this,game))||"object"!==Ls(i)&&"function"!=typeof i?Bs(n):i).positionUserProfile=JSON.parse(game.cache.getText("positionUserProfile")),e.positionMainConfig=JSON.parse(game.cache.getText("positionMainConfig")),e.findOpponentConfig=JSON.parse(game.cache.getText("findOpponentConfig")),e.event={back:new Phaser.Signal,challengeGame:new Phaser.Signal},e.bg=new Phaser.Button(game,0,0,"bg_create_room"),e.addChild(e.bg),e.header=new Cs,e.header.event.back.add(e.chooseBack,Bs(Bs(e))),e.header.setBg(!1),e.header.setTitle(de.instance().getData("163")),e.addChild(e.header),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ns(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){if(Qe.instance().event.backButton.add(this.chooseBack,this),null==this.group||null==this.group){this.group=new Phaser.Group(game);var e=new Phaser.Rectangle(35*window.GameConfig.RESIZE,125*window.GameConfig.RESIZE,game.width-35,980*window.GameConfig.RESIZE);this.listView=new Ia(game,this.group,e,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.addChild(this.group)}this.addListFriend(this.friendsList)}},{key:"addListFriend",value:function(e){for(var t=0;t<e.length;t++)this.createTabFriennd(t,e[t])}},{key:"setData",value:function(e){var t=[];for(var n in e)t.push(e[n]);this.friendsList=t,this.afterInit()}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"createTabFriennd",value:function(e,t){var n=this,i=new As(t,e);i.beginLoad(t.avatar),i.setValue(t),i.setScale(window.GameConfig.SCALE_AVA_FRIEND*window.GameConfig.RESIZE),i.addMaskAva(70),i.addNameAva(this.findOpponentConfig.txt_friend_list,t.user_name),i.setStateFriend(),i.addInput(this.onInputFriend,this),i.addBtnPlay(this.findOpponentConfig.btn_play_findGame),i.signalInputAva.add(function(){jC.instance().addUserProfile(t.id),n.chooseBack(),n.destroy()},this),this.listView.add(i)}},{key:"onInputFriend",value:function(e){this.event.challengeGame.dispatch(e),this.destroy()}},{key:"destroy",value:function(){for(Qe.instance().event.backButton.remove(this.chooseBack,this),null!==this.listView&&(this.listView.removeAll(),this.listView.destroy());this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Gs(Ms(t.prototype),"destroy",this).call(this)}}])&&Ds(n.prototype,i),o&&Ds(n,o),t}();function Us(e){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hs(e,t){return!t||"object"!==Us(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vs(e,t,n){return(Vs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qs(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Qs(e){return(Qs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ws(e,t){return(Ws=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qs=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Hs(this,Qs(t).call(this,game))).positionMainConfig=JSON.parse(game.cache.getText("positionMainConfig")),e.findOpponentConfig=JSON.parse(game.cache.getText("findOpponentConfig")),e.event={onBack:new Phaser.Signal,challengeGame:new Phaser.Signal,onSearch:new Phaser.Signal},e.onClickShowAll=!1,e.showAllFriend=null,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ws(e,t)}(t,Z),n=t,(i=[{key:"addHeader",value:function(e,t){this.friends=t,this.addTxtAndLineGradient(this.findOpponentConfig.txt_friend,this.findOpponentConfig.line_friend,e);var n=new Phaser.Sprite(game,this.positionMainConfig.tab_chonplaylist.x*window.GameConfig.RESIZE,this.positionMainConfig.tab_chonplaylist.y*window.GameConfig.RESIZE,this.positionMainConfig.tab_chonplaylist.nameAtlas,this.positionMainConfig.tab_chonplaylist.nameSprite);n.anchor.set(.5,0);var i=new Phaser.Text(game,this.findOpponentConfig.txt_findGame.x*window.GameConfig.RESIZE,this.findOpponentConfig.txt_findGame.y*window.GameConfig.RESIZE,de.instance().getData("242"),this.findOpponentConfig.txt_findGame.configs);i.anchor.set(.5),n.addChild(i),this.addEventExtension(),this.addChild(n),this.addSearchButton(n),this.addArrowBackMenu(n)}},{key:"addSearchButton",value:function(e){var t=new Phaser.Button(game,this.findOpponentConfig.Search_Icon.x*window.GameConfig.RESIZE,this.findOpponentConfig.Search_Icon.y*window.GameConfig.RESIZE,this.findOpponentConfig.Search_Icon.nameAtlas,this.onClickSearchBtn,this,null,this.findOpponentConfig.Search_Icon.nameSprite);t.anchor.set(1,.5),e.addChild(t)}},{key:"onClickSearchBtn",value:function(){be.instance().playSound(be.buttonclick),this.event.onSearch.dispatch()}},{key:"addArrowBackMenu",value:function(e){var t=new Phaser.Button(game,this.positionMainConfig.arrow_chonplaylist.x*window.GameConfig.RESIZE,this.positionMainConfig.arrow_chonplaylist.y*window.GameConfig.RESIZE,this.positionMainConfig.arrow_chonplaylist.nameAtlas,function(){},this,null,this.positionMainConfig.arrow_chonplaylist.nameSprite);t.anchor.set(.5),e.addChild(t),t.events.onInputUp.add(this.onBack,this)}},{key:"onBack",value:function(){0==this.onClickShowAll&&(be.instance().playSound(be.buttonclick),this.event.onBack.dispatch())}},{key:"addShowAllText",value:function(e,t){var n=this,i=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("1"),e.configs);i.anchor.set(1,0),i.inputEnabled=!0,i.events.onInputUp.add(function(){n.onClickShowAll=!0,be.instance().playSound(be.buttonclick),n.addShowAllFriend()}),this.addChild(i);var o=new Phaser.Sprite(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,t.nameAtlas,t.nameSprite);this.addChild(o)}},{key:"addShowAllFriend",value:function(){var e=this;this.removeShowAllFriend(),this.showAllFriend=new js,this.showAllFriend.setData(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Fs(e,t,n[t])})}return e}({},this.friends)),this.showAllFriend.event.challengeGame.add(function(t){e.onClickShowAll=!1,e.event.challengeGame.dispatch(t),e.showAllFriend.destroy()},this),this.showAllFriend.event.back.add(function(){e.onClickShowAll=!1,e.removeShowAllFriend()}),jC.instance().addChild(this.showAllFriend)}},{key:"removeShowAllFriend",value:function(){null!==this.showAllFriend&&(jC.instance().removeChild(this.showAllFriend),this.showAllFriend.destroy(),this.showAllFriend=null)}},{key:"addTxtAndLineGradient",value:function(e,t,n){var i=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,"".concat(de.instance().getData("244")," ( ").concat(n," )"),e.configs),o=new Phaser.Sprite(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,t.nameAtlas,t.nameSprite);this.addChild(i),this.addChild(o),this.addShowAllText(this.findOpponentConfig.txt_show_all,this.findOpponentConfig.line_under_showall)}},{key:"addBtnInviteFriend",value:function(){this.btn_invite=new Phaser.Button(game,this.positionMainConfig.btn_invite.x*window.GameConfig.RESIZE,this.positionMainConfig.btn_invite.y*window.GameConfig.RESIZE,this.positionMainConfig.btn_invite.nameAtlas,this.onClickBtnInvite,this,null,this.positionMainConfig.btn_invite.nameSprite),this.btn_invite.anchor.set(1,.5),this.addChild(this.btn_invite)}},{key:"onClickBtnInvite",value:function(){be.instance().playSound(be.buttonclick),Ri.instance().inviteFriend()}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Vs(Qs(t.prototype),"destroy",this).call(this)}}])&&Zs(n.prototype,i),o&&Zs(n,o),t}();function Ks(e){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ys(e,t){return!t||"object"!==Ks(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xs(e){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Js(e,t){return(Js=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $s=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Ys(this,Xs(t).call(this,game))).positionMainConfig=JSON.parse(game.cache.getText("positionMainConfig")),i.findOpponentConfig=JSON.parse(game.cache.getText("findOpponentConfig")),i.event={challengeGame:new Phaser.Signal},i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Js(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){if(null==this.group||null==this.group){this.group=game.add.group();var e=new Phaser.Rectangle(35*window.GameConfig.RESIZE,534*window.GameConfig.RESIZE,game.width-35*window.GameConfig.RESIZE,(game.height-646)*window.GameConfig.RESIZE);this.listView=new Ia(game,this.group,e,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.addChild(this.group)}}},{key:"addListFriend",value:function(e){for(var t=0;t<e.length;t++)this.createTabFriennd(t,e[t])}},{key:"removeGroup",value:function(){this.group.destroy(),this.group=null}},{key:"createTabFriennd",value:function(e,t){var n=new As(t,e);n.beginLoad(t.avatar),n.setValue(t),n.setScale(window.GameConfig.SCALE_AVA_FRIEND*window.GameConfig.RESIZE),n.addMaskAva(70),n.addNameAva(this.findOpponentConfig.txt_friend_list,t.user_name),n.setStateFriend(),n.addInput(this.onInputFriend,this),n.addBtnPlay(this.findOpponentConfig.btn_play_findGame),n.signalInputAva.add(function(){jC.instance().addUserProfile(t.id)},this),this.listView.add(n)}},{key:"onInputFriend",value:function(e){console.log("GNJDNF"),console.log(e),this.event.challengeGame.dispatch(e)}}])&&zs(n.prototype,i),o&&zs(n,o),t}();function er(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"user_founds",get:function(){return"user_founds"}},{key:"friend_status",get:function(){return"friend_status"}},{key:"user_name",get:function(){return"user_name"}},{key:"is_online",get:function(){return"is_online"}},{key:"id",get:function(){return"id"}},{key:"avatar",get:function(){return"avatar"}},{key:"vip",get:function(){return"vip"}}],(n=null)&&er(t.prototype,n),i&&er(t,i),e}();function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function or(e,t){return!t||"object"!==nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rr=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=or(this,ar(t).call(this,game))).findOpponentConfig=JSON.parse(game.cache.getText("findOpponentConfig")),i.index=n,i.configsValue=e,i.signalInputAva=new Phaser.Signal,i.signalInput=new Phaser.Signal,i.afterCreate(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,Z),n=t,(i=[{key:"afterCreate",value:function(){this.key="",this.ava=new Phaser.Sprite(game,75*window.GameConfig.RESIZE,55*window.GameConfig.RESIZE,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(this.clickAva,this),this.setScale(window.GameConfig.SCALE_AVA_FRIEND*window.GameConfig.RESIZE),this.addMaskAva(200),this.addChild(this.ava),this.addFrameAva(),this.addNameAva(this.findOpponentConfig.txt_friend_list,this.configsValue.user_name),this.setStateFriend(),this.addBtnPlay(this.findOpponentConfig.btn_play_findGame),this.addLineUnder(),this.beginLoad(this.configsValue.avatar)}},{key:"clickAva",value:function(){this.signalInputAva.dispatch(this.configsValue.id)}},{key:"addBtnPlay",value:function(e){if(this.configsValue.friend_status==Ps.PENDING_YOU){this.btnInput=new Phaser.Sprite(game,(e.x+45)*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnInput.inputEnabled=!0,this.btnInput.anchor.set(.5),this.btnInput.events.onInputUp.add(this.onClickSprite,this);var t=new Phaser.Text(game,this.findOpponentConfig.txt_btn_play_findGame.x*window.GameConfig.RESIZE,(this.findOpponentConfig.txt_btn_play_findGame.y+2)*window.GameConfig.RESIZE,de.instance().getData("313"),{font:"GilroyBold",fill:"#ffffff",fontSize:18});t.anchor.set(.5),this.btnInput.addChild(t),this.addChild(this.btnInput)}else if(this.configsValue.friend_status==Ps.FRIEND){var n=new Phaser.Text(game,605*window.GameConfig.RESIZE,58*window.GameConfig.RESIZE,de.instance().getData("315"),{font:"Gilroy",fill:"#93909d",fontSize:21});n.anchor.set(1,.5),this.addChild(n)}else if(this.configsValue.friend_status==Ps.PENDING_THEM){var i=new Phaser.Text(game,605*window.GameConfig.RESIZE,58*window.GameConfig.RESIZE,de.instance().getData("316"),{font:"Gilroy",fill:"#93909d",fontSize:21});i.anchor.set(1,.5),this.addChild(i)}else if(this.configsValue.friend_status==Ps.NO_FRIEND){this.btnInput=new Phaser.Sprite(game,(e.x+45)*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnInput.inputEnabled=!0,this.btnInput.anchor.set(.5),this.btnInput.events.onInputUp.add(this.onClickSprite,this);var o=new Phaser.Text(game,this.findOpponentConfig.txt_btn_play_findGame.x*window.GameConfig.RESIZE,(this.findOpponentConfig.txt_btn_play_findGame.y+2)*window.GameConfig.RESIZE,de.instance().getData("317"),{font:"GilroyBold",fill:"#ffffff",fontSize:18});o.anchor.set(.5),this.btnInput.addChild(o),this.addChild(this.btnInput)}}},{key:"addFrameAva",value:function(){!0===this.configsValue.vip?(this.frameAva=new Phaser.Sprite(game,75*window.GameConfig.RESIZE,55*window.GameConfig.RESIZE,"vipSource","Ava_Opponents_Nho"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.065),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,75*window.GameConfig.RESIZE,55*window.GameConfig.RESIZE,"playSprites","Khung_Ava_Thuong"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(.9),this.addChild(this.frameAva))}},{key:"addLineUnder",value:function(){var e=new Phaser.Sprite(game,(this.findOpponentConfig.line_friend_list.x+35)*window.GameConfig.RESIZE,this.findOpponentConfig.line_friend_list.y*window.GameConfig.RESIZE,this.findOpponentConfig.line_friend_list.nameAtlas,this.findOpponentConfig.line_friend_list.nameSprite);this.addChild(e)}},{key:"addInput",value:function(e,t){this.removeEventInput(e,t),this.addEventInput(e,t)}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}},{key:"onClickSprite",value:function(){be.instance().playSound(be.buttonclick),this.signalInput.dispatch(this.configsValue.friend_status,this.configsValue.id)}},{key:"addNameAva",value:function(e,t){this.txtName=new Phaser.Text(game,(e.x+35)*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,t,e.configs),this.addChild(this.txtName)}},{key:"addMaskAva",value:function(e){this.maskAva=new Phaser.Graphics(game,0,0),this.maskAva.beginFill(),this.maskAva.drawCircle(0,0,e),this.maskAva.endFill(),this.maskAva.anchor.set(.5),this.ava.mask=this.maskAva,this.ava.addChild(this.maskAva)}},{key:"setStateFriend",value:function(){1==this.configsValue.is_online?this.setStateOnline():this.setStateOffline()}},{key:"setStateOnline",value:function(){var e=new Phaser.Sprite(game,100*window.GameConfig.RESIZE,50*window.GameConfig.RESIZE,"findOpponentSprites","Online");this.addChild(e)}},{key:"setStateOffline",value:function(){var e=new Phaser.Sprite(game,100*window.GameConfig.RESIZE,50*window.GameConfig.RESIZE,"findOpponentSprites","Offline");this.addChild(e)}},{key:"setValue",value:function(e){this.value=e,this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick)},this)}},{key:"setScale",value:function(e){this.ava.scale.set(e)}},{key:"beginLoad",value:function(e){this.key=e,game.cache.checkImageKey(e)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(e))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){try{game.cache.checkImageKey(e.key)&&e&&(""!==e.key?e.ava.loadTexture("".concat(e.key)):e.ava.loadTexture("songDetailSprites","ava-default"))}catch(e){}},100*this.index)}},{key:"loadStart",value:function(){LogConsole.log("loadStart")}},{key:"width",set:function(e){this._width=e},get:function(){return this._width}},{key:"height",set:function(e){this._height=e},get:function(){return 106}}])&&ir(n.prototype,i),o&&ir(n,o),t}();function lr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var cr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"USER_PROFILE_LOAD_REQUEST",get:function(){return"USER_PROFILE_LOAD_REQUEST"}},{key:"USER_PROFILE_LOAD_RESPONSE",get:function(){return"USER_PROFILE_LOAD_RESPONSE"}},{key:"USER_FRIEND_REQUEST",get:function(){return"USER_FRIEND_REQUEST"}},{key:"USER_FRIEND_RESPONSE",get:function(){return"USER_FRIEND_RESPONSE"}},{key:"USER_DETAIL_LOAD_REQUEST",get:function(){return"USER_DETAIL_LOAD_REQUEST"}},{key:"USER_DETAIL_LOAD_RESPONSE",get:function(){return"USER_DETAIL_LOAD_RESPONSE"}},{key:"USER_DETAIL_PLAYLIST_LOAD_REQUEST",get:function(){return"USER_DETAIL_PLAYLIST_LOAD_REQUEST"}},{key:"USER_DETAIL_PLAYLIST_LOAD_RESPONSE",get:function(){return"USER_DETAIL_PLAYLIST_LOAD_RESPONSE"}},{key:"USER_DETAIL_ACHIEVEMENT_LOAD_REQUEST",get:function(){return"USER_DETAIL_ACHIEVEMENT_LOAD_REQUEST"}},{key:"USER_DETAIL_ACHIEVEMENT_LOAD_RESPONSE",get:function(){return"USER_DETAIL_ACHIEVEMENT_LOAD_RESPONSE"}},{key:"USER_DETAIL_FRIEND_LOAD_REQUEST",get:function(){return"USER_DETAIL_FRIEND_LOAD_REQUEST"}},{key:"USER_DETAIL_FRIEND_LOAD_RESPONSE",get:function(){return"USER_DETAIL_FRIEND_LOAD_RESPONSE"}},{key:"USER_FRIEND_LIST_LOAD_REQUEST",get:function(){return"USER_FRIEND_LIST_LOAD_REQUEST"}},{key:"USER_FRIEND_LIST_LOAD_RESPONSE",get:function(){return"USER_FRIEND_LIST_LOAD_RESPONSE"}},{key:"USER_FRIEND_ONLINE_STATUS_UPDATE",get:function(){return"USER_FRIEND_ONLINE_STATUS_UPDATE"}},{key:"USER_FRIEND_STATUS_UPDATE",get:function(){return"USER_FRIEND_STATUS_UPDATE"}}],(n=null)&&lr(t.prototype,n),i&&lr(t,i),e}();function hr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ur=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){LogConsole.log("action "+e),LogConsole.log("friend_id "+t);var n=new SFS2X.SFSObject;return n.putUtfString("action",e),n.putInt("friend_id",t),n}},{key:"ACTION_ADD_FRIEND",get:function(){return"ADD_FRIEND"}},{key:"ACTION_ACCEPT_ADD_REQUEST",get:function(){return"ACCEPT_ADD_REQUEST"}},{key:"ACTION_REFUSE_ADD_REQUEST",get:function(){return"REFUSE_ADD_REQUEST"}},{key:"ACTION_REMOVE_FRIEND",get:function(){return"REMOVE_FRIEND"}}],(n=null)&&hr(t.prototype,n),i&&hr(t,i),e}();function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pr(e,t){return!t||"object"!==dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pr(this,gr(t).call(this,game,0,102,"bg_create_room"))).users=e,n.event={refreshSearch:new Phaser.Signal,getUserProfile:new Phaser.Signal},n.afterInit(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,Phaser.Button),n=t,(o=[{key:"afterInit",value:function(){this.addEventExtension();var e=new Phaser.Group(game);e.x=0,e.y=40*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-159)*window.GameConfig.RESIZE);for(this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),i=0;i<this.users.length;i++){var n=new rr(this.users[i],i);n.addInput(this.onInputFriend,this),n.signalInputAva.add(this.inputAva,this),this.listView.add(n)}if(0==this.users.length){var o=new Phaser.Text(game,320,270,"Không có kết quả phù hợp.",{font:"GilroyMedium",fill:"#eeeeee",fontSize:30});o.anchor.set(.5),this.addChild(o)}}},{key:"inputAva",value:function(e){this.event.getUserProfile.dispatch(e)}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.USER_FRIEND_RESPONSE&&"OK"==e.params.getUtfString("status")&&this.event.refreshSearch.dispatch()}},{key:"onInputFriend",value:function(e,t){e==Ps.NO_FRIEND&&this.sendUserFriendRequest(t),e==Ps.PENDING_YOU&&this.sendAcceptFriend(t)}},{key:"sendUserFriendRequest",value:function(e){dV.instance().sendData(cr.USER_FRIEND_REQUEST,ur.begin(ur.ACTION_ADD_FRIEND,e))}},{key:"sendAcceptFriend",value:function(e){dV.instance().sendData(cr.USER_FRIEND_REQUEST,ur.begin(ur.ACTION_ACCEPT_ADD_REQUEST,e))}},{key:"destroy",value:function(){for(this.listView.removeAll(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&fr(n.prototype,o),a&&fr(n,a),t}();function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function br(e,t){return!t||"object"!==vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _r(e,t,n){return(_r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sr(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cr=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=br(this,Sr(t).call(this,game))).event={choose_playlist:new Phaser.Signal,onBack:new Phaser.Signal,challengeGame:new Phaser.Signal},e.typeOfSearchFriend=t.NAME,e.valueKeyboard="",e.screenSearchResult=null,e.isClickSearch=!1,e.afterInit(),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(t,Z),n=t,a=[{key:"NAME",get:function(){return"NAME"}},{key:"ID",get:function(){return"ID"}},{key:"MUST_INT",get:function(){return"Bạn phải nhập đúng ID(là số)!"}},{key:"MUST_GREATER_3",get:function(){return"Bạn phải nhập ít nhất 3 ký tự!"}}],(o=[{key:"afterInit",value:function(){this.findOpponentConfig=JSON.parse(game.cache.getText("findOpponentConfig")),this.findgameGroup=null,this.findGameSuggestionFriend=new as,this.findGameSuggestionFriend.event.challengeGame.add(this.challengeGame,this),this.findGameRandomUser=new ms,this.findGameRandomUser.event.challengeGame.add(this.challengeGame,this),this.findGameHeaderAndTextInField=new qs,this.findGameHeaderAndTextInField.event.challengeGame.add(this.getChallengeGame,this),this.findGameHeaderAndTextInField.event.onBack.add(this.onBackFindGame,this),this.findGameHeaderAndTextInField.event.onSearch.add(this.onSearchFriend,this),this.findGameFriendlist=new $s,this.findGameFriendlist.event.challengeGame.add(this.challengeGame,this),this.addEventExtension(),this.sendRequestFindGame(),He.instance().logEvent(He.Find_Game_turnbase_mode)}},{key:"sendRequestFindGame",value:function(){this.checkRequestSocketFindGame(),0==oe.instance().isChallengeGameFindOpponents.checking?(oe.instance().friendLists=[],oe.instance().suggestion_users=[],oe.instance().random_user=null,this.sendTurnBaseFindOpponentRequest()):this.sendTurnBaseFindOpponentRequest()}},{key:"sendTurnBaseFindOpponentRequest",value:function(){!0===ak.instance().ktLoadFriend?this.loadListFriendComplete():ak.instance().sendGetFriendsList(),oe.instance().isChallengeGameFindOpponents.checking=!0,oe.instance().isChallengeGameFindOpponents.updated=Date.now()}},{key:"checkRequestSocketFindGame",value:function(){1==oe.instance().isChallengeGameFindOpponents.checking?Date.now()-oe.instance().isChallengeGameFindOpponents.updated<6e3?oe.instance().isChallengeGameFindOpponents.checking=!0:oe.instance().isChallengeGameFindOpponents.checking=!1:oe.instance().isChallengeGameFindOpponents.checking=!1}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Qe.instance().event.clickOKDialog.add(this.clickOKDialog,this),Qe.instance().event.searchFriendBackUserProfile.add(this.searchFriendBackUserProfile,this),Ir.instance().event.changeTypeSearch.add(this.changeTypeSearch,this),Ir.instance().event.enter.add(this.onSubmitSearch,this),Ir.instance().event.submit.add(this.onSubmitSearch,this),Ir.instance().event.cancle.add(this.keyboardCancle,this),ak.instance().event.load_random_opponent_complete.add(this.loadRandomOpponentComplete,this),ak.instance().event.load_suggestion_opponent_complete.add(this.loadSuggestionUsersComplete,this),ak.instance().event.load_list_friend_complete.add(this.loadListFriendComplete,this)}},{key:"loadRandomOpponentComplete",value:function(){oe.instance().random_user=ak.instance().random_opponents.getUser(),this.doneHandleFindOpponentsRandomAndSuggestionResponse()}},{key:"loadSuggestionUsersComplete",value:function(){for(var e=[],t=0;t<3;t++)if(ak.instance().suggestion_opponents[t]){var n=ak.instance().suggestion_opponents[t];e.push(n)}oe.instance().suggestion_users=e,this.handleRandomUser()}},{key:"loadListFriendComplete",value:function(){oe.instance().friendLists=ak.instance().listFriend.getFriends();for(var e=0;e<oe.instance().friendLists.length;e++)for(var t=0;t<oe.instance().menuOpponentsResponse.length;t++)if(oe.instance().friendLists[e].id==oe.instance().menuOpponentsResponse[t].opponentEntity.id){oe.instance().friendLists[e].status=oe.instance().menuOpponentsResponse[t].status;break}this.handleParamsOnFindOpponentsResponse(1,function(){})}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),Ir.instance().event.changeTypeSearch.remove(this.changeTypeSearch,this),Ir.instance().event.submit.remove(this.onSubmitSearch,this),Ir.instance().event.enter.remove(this.onSubmitSearch,this),Qe.instance().event.clickOKDialog.remove(this.clickOKDialog,this),Qe.instance().event.searchFriendBackUserProfile.remove(this.searchFriendBackUserProfile,this),Ir.instance().event.cancle.remove(this.keyboardCancle,this),ak.instance().event.load_random_opponent_complete.remove(this.loadRandomOpponentComplete,this),ak.instance().event.load_suggestion_opponent_complete.remove(this.loadSuggestionUsersComplete,this),ak.instance().event.load_list_friend_complete.remove(this.loadListFriendComplete,this)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.SEARCH_USER_BY_ID_RESPONSE&&(this.searchedUsers=this.handleSearchResponse(e.params),this.addScreenSearch(this.searchedUsers),ht.instance().hideLoading()),e.cmd==ki.SEARCH_USER_BY_NAME_RESPONSE&&(this.searchedUsers=this.handleSearchResponse(e.params),this.addScreenSearch(this.searchedUsers),ht.instance().hideLoading())}},{key:"handleParamsFriendList",value:function(e,t){if("OK"==e.getUtfString("status"))for(var n=e.getSFSArray("friends"),i=0;i<n.size();i++){for(var o=n.getSFSObject(i),a=o.getUtfString("user_name"),s=o.getUtfString("avatar"),r=o.getInt("id"),l=o.getBool("is_online"),c="NO_GAME",h=o.getBool("vip"),u=0;u<oe.instance().menuOpponentsResponse.length;u++)if(r==oe.instance().menuOpponentsResponse[u].opponentEntity.id){c=oe.instance().menuOpponentsResponse[u].status;break}oe.instance().friendLists.push({userName:a,avatar:s,id:r,isOnline:l,status:c,vip:h})}t()}},{key:"doneHandleFindOpponentsRandomAndSuggestionResponse",value:function(){this.findGameSuggestionFriend.addGroupSuggestionFriend(),this.findGameSuggestionFriend.addSuggestionFriend(oe.instance().suggestion_users,function(){}),this.findGameRandomUser.initGroup(),this.findGameRandomUser.addButtonRandomUser(oe.instance().random_user),this.findGameRandomUser.addBtnInviteFriendFB(),this.doneHandleFindOpponentsResponse()}},{key:"doneHandleFindOpponentsResponse",value:function(){this.createFindGameScreenChooseFriend(),this.addChildInScreen()}},{key:"addChildInScreen",value:function(){this.addChild(this.findGameHeaderAndTextInField),this.addChild(this.findGameFriendlist),this.addChild(this.findGameSuggestionFriend),this.addChild(this.findGameRandomUser),ht.instance().hideLoading()}},{key:"addScreenSearch",value:function(e){this.removeScreenSearch(),this.screenSearchResult=new mr(e),this.screenSearchResult.event.refreshSearch.add(this.refreshSearch,this),this.screenSearchResult.event.getUserProfile.add(this.getUserProfile,this),this.addChild(this.screenSearchResult)}},{key:"refreshSearch",value:function(){this.removeScreenSearch(),this.searchFriend(this.typeOfSearchFriend,this.valueKeyboard)}},{key:"getUserProfile",value:function(e){oe.instance().isGetUserProfileSearch=!0,Ir.instance().hide(),jC.instance().addUserProfile(e)}},{key:"searchFriendBackUserProfile",value:function(){this.onSearchFriend()}},{key:"removeScreenSearch",value:function(){null!==this.screenSearchResult&&(this.screenSearchResult.event.refreshSearch.remove(this.refreshSearch,this),this.screenSearchResult.event.getUserProfile.remove(this.getUserProfile,this),this.removeChild(this.screenSearchResult),this.screenSearchResult.destroy(),this.isClickSearch=!1,this.screenSearchResult=null)}},{key:"handleSearchResponse",value:function(e){var t=[];if(e.containsKey("user_founds")){var n=e.getSFSArray(tr.user_founds);for(i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getUtfString(tr.friend_status),s=o.getUtfString(tr.user_name),r=o.getBool(tr.is_online),l=o.getInt(tr.id),c=o.getUtfString(tr.avatar),h=o.getBool(tr.vip);t.push({friend_status:a,user_name:s,is_online:r,id:l,avatar:c,vip:h})}}return t}},{key:"handleParamsOnFindOpponentsResponse",value:function(e,t){1==e&&(this.handleSuggestionUsers(),t())}},{key:"handleParamsFriendsOnFindOpponentsResponse",value:function(e,t){if("OK"==e.getUtfString("status"))for(var n=e.getSFSArray("friends"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getUtfString("user_name"),s=o.getUtfString("avatar"),r=o.getInt("id"),l=o.getUtfString("status"),c=o.getBool("is_online");oe.instance().friendLists.push({userName:a,avatar:s,id:r,isOnline:c,status:l})}t()}},{key:"handleRandomUser",value:function(){1==ak.instance().ktLoadRandomOpponent?this.loadRandomOpponentComplete():ak.instance().sendReloadRandomOpponent()}},{key:"handleSuggestionUsers",value:function(){1==ak.instance().ktLoadSuggestionOpponent?this.loadSuggestionUsersComplete():ak.instance().sendGetSuggestionOpponent()}},{key:"getBuddyListFriend",value:function(e){this.listBuddy=[];for(var t=dV.instance().socket.buddyManager.getBuddyList(),n=0;n<t.length;n++){var i=t[n],o=new Qa;o.avatar=i.getVariable("$"+qa.avatar).value,o.diamond=i.getVariable("$"+qa.diamond).value,o.isOnline=i[qa.isOnline],o.userId=i.getVariable("$"+qa.userId).value,o.userName=i.getVariable("$"+qa.userName).value,this.listBuddy.push(o)}this.listBuddy=this.listBuddy.sort(this.compareOnline),e()}},{key:"compareOnline",value:function(e){return 1==e.isOnline?-1:1}},{key:"createFindGameScreenChooseFriend",value:function(){var e=this;this.sortFriendlistsOfStatus(oe.instance().friendLists,function(t){if(null==e.findgameGroup||null==e.findgameGroup){e.findgameGroup=new Phaser.Group(game),e.addChild(e.findgameGroup);var n=new Phaser.Button(game,0,0,"bg_create_room");e.findgameGroup.add(n),e.findGameFriendlist.afterInit(),e.findGameFriendlist.addListFriend(t),e.findGameHeaderAndTextInField.addHeader(t.length,t)}e.findgameGroup.position.x=0})}},{key:"getChallengeGame",value:function(e){LogConsole.log(e),this.event.challengeGame.dispatch(e)}},{key:"mergeListOnlineToListFriend",value:function(e){for(var t=[],n=0;n<this.listBuddy.length;n++)for(var i=0;i<this.friendLists.length;i++)if(this.friendLists[i].id==this.listBuddy[n].userId){var o={avatar:this.friendLists[i].avatar,id:this.friendLists[i].id,isOnline:this.listBuddy[n].isOnline,userName:this.friendLists[i].userName,status:this.friendLists[i].status};t.push(o)}e(t)}},{key:"sortFriendlistsOfStatus",value:function(e,t){t(e=e.sort(function(e){if("NO_GAME"===e.status)return-1}))}},{key:"onBackFindGame",value:function(){0==this.isClickSearch?FH.instance().changeScreen(De.MAIN_MENU):(this.removeScreenSearch(),this.isClickSearch=!1)}},{key:"onSearchFriend",value:function(){var e=this;this.url="onSearchFriend";var t="";""==this.valueKeyboard&&(t="Nhập tên"),setTimeout(function(){e.isClickSearch=!0,Ir.instance().show({maxLength:"",showTransparent:!0,placeholder:t,isSearch:!0,isSearchFriend:!0,typeSearch:e.typeOfSearchFriend}),""!==e.valueKeyboard&&Ir.instance().setValue(e.valueKeyboard)},100)}},{key:"challengeGame",value:function(e){this.event.challengeGame.dispatch(e)}},{key:"changeTypeSearch",value:function(e){this.typeOfSearchFriend=e}},{key:"onSubmitSearch",value:function(){if(this.valueKeyboard=Ir.instance().getValue(),this.typeOfSearchFriend==t.ID){var e=this.valueKeyboard;"NaN"!==e&&e>0?this.searchFriend(this.typeOfSearchFriend,this.valueKeyboard):jC.instance().addDialog(t.MUST_INT)}else this.typeOfSearchFriend==t.NAME&&(this.valueKeyboard.length>2?this.searchFriend(this.typeOfSearchFriend,this.valueKeyboard):jC.instance().addDialog(t.MUST_GREATER_3,this.url));Ir.instance().hide()}},{key:"searchFriend",value:function(e,n){this.searchedUsers=[];var i=new SFS2X.SFSObject;e==t.ID&&(i.putInt("user_id",parseInt(n)),dV.instance().sendData(ki.SEARCH_USER_BY_ID_REQUEST,i),ht.instance().showLoading()),e==t.NAME&&(i.putUtfString("user_name",n),dV.instance().sendData(ki.SEARCH_USER_BY_NAME_REQUEST,i),ht.instance().showLoading())}},{key:"clickOKDialog",value:function(e){e==this.url&&this.onSearchFriend()}},{key:"keyboardCancle",value:function(){this.removeScreenSearch()}},{key:"destroy",value:function(){for(this.removeEventExtension(),Ir.instance().hide();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),_r(Sr(t.prototype),"destroy",this).call(this)}}])&&wr(n.prototype,o),a&&wr(n,a),t}();function kr(e){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){return!t||"object"!==kr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xr(e,t,n){return t&&Rr(e.prototype,t),n&&Rr(e,n),e}function Tr(e,t){return(Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ir=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Pr(this,Or(t).call(this,game,null))).event={enter:new Phaser.Signal,change:new Phaser.Signal,submit:new Phaser.Signal,cancle:new Phaser.Signal,changeHeight:new Phaser.Signal,hideKeyboard:new Phaser.Signal,changeTypeSearch:new Phaser.Signal},e.opened=!1,e.transparentObj=null,e.container=null,e.layoutChat=null,e.keyboardHeight=game.height,e.varTimeout=null,e.varTimeoutChange=null,window.addEventListener("resize",function(){e.varTimeout=setTimeout(function(){e.setStyleInput()},50)}),window.addEventListener("keyboardDidShow",function(t){console.log(t),"ios"===oe.instance().platform?e.keyboardHeight=game.height-(screen.height-t.keyboardHeight)/game.scale.scaleFactorInversed.y+120:e.keyboardHeight=t.keyboardHeight/game.scale.scaleFactorInversed.y+mt.instance().getChangeHeight()+120,"ios"!==oe.instance().platform&&"and"!==oe.instance().platform||(e.event.changeHeight.dispatch(e.keyboardHeight),e.changeHeightText())}),window.addEventListener("keyboardDidHide",function(t){console.log(t),e.event.hideKeyboard.dispatch()}),window.addEventListener("keyboardHeightWillChange",function(t){console.log(t.keyboardHeight);var n=0;n="ios"===oe.instance().platform?game.height-(screen.height-t.keyboardHeight)/game.scale.scaleFactorInversed.y+120:t.keyboardHeight/game.scale.scaleFactorInversed.y+mt.instance().getChangeHeight()+120,e.keyboardHeight!==n&&(e.keyboardHeight=n,"ios"!==oe.instance().platform&&"and"!==oe.instance().platform||(e.event.changeHeight.dispatch(e.keyboardHeight),e.changeHeightText()))}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(t,Je),xr(t,null,[{key:"instance",value:function(){return this.keyBoard||(this.keyBoard=new t),this.keyBoard}}]),xr(t,[{key:"changeHeightText",value:function(){null!==this.layoutChat&&(this.layoutChat.y=game.height-this.keyboardHeight,this.layoutChat.y<0&&(this.layoutChat.y=0),this.setStyleInput()),game.world.add(this)}},{key:"setStyleInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(LogConsole.log("setStyleInput"),LogConsole.log(game.canvas.getBoundingClientRect()),$("#chatInput").length){var t=game.canvas.getBoundingClientRect().width/game.width,n=game.canvas.getBoundingClientRect().height/game.height,i=Math.min(t,n);console.log(this.options.configText);var o=(window.innerWidth-game.canvas.getBoundingClientRect().width)/2,a={};a="input"===this.options.typeInputText?{top:game.canvas.getBoundingClientRect().top+this.options.configText.y*i+"px",left:o+this.options.configText.x*i+"px",width:(this.options.configText.width-24)*i+"px",height:(this.options.configText.height-5)*i+"px",position:"absolute"}:"chat"===this.options.typeInputText?!0===e?{top:"10px",left:o+20*i+"px",width:480*i+"px",height:85*i+"px",position:"absolute"}:{top:(game.canvas.getBoundingClientRect().top+(this.layoutChat.y+10))*i+"px",left:o+20*i+"px",width:480*i+"px",height:85*i+"px",position:"absolute"}:{top:game.canvas.getBoundingClientRect().top+105*i+"px",left:o+37*i+"px",width:460*i+"px",height:85*i+"px",position:"absolute"},console.log(a),a["font-size"]=30*i+"px",a["padding-left"]=10*i+"px",a["padding-right"]=10*i+"px",this.setStyleOnElement($("#chatInput"),a),setTimeout(function(){$("#chatInput").focus()},500)}}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout(function(){if(e.options=Object.assign({},{maxLength:"",showTransparent:!0,placeholder:"Nhập id phòng",isSearch:!1,isSearchFriend:!1,typeSearch:"NAME",typeInputText:"search",configText:{width:0,height:0,x:0,y:0}},t),null===e.container)e.container=game.add.group(),e.addChild(e.container);else for(null!=e.layoutChat&&(e.container.removeChild(e.layoutChat),e.layoutChat.destroy(!0),e.layoutChat=null);e.container.children.length>0;){var n=e.container.children[0];e.container.removeChild(n),n.destroy(),n=null}"input"===t.typeInputText||("chat"===t.typeInputText?e.addChat():e.addSearch()),!1===e.opened?(e.opened=!0,e.open(t.maxLength,t.placeholder||"")):e.setStyleInput(!0),t.defaultText&&e.setValue(t.defaultText),game.world.add(e)},100)}},{key:"onUpBg",value:function(){this.hide()}},{key:"addSearch",value:function(){var e=this;null!=this.layoutChat&&(this.container.removeChild(this.layoutChat),this.layoutChat.destroy(!0),this.layoutChat=null);var t={x:0,y:0,nameAtlas:"defaultSource",nameSprite:"BG",left:4,right:4,top:4,bot:4,width:game.width,height:222,name:"chatBgkeyboard",configText:{x:0,y:0,style:{fontSize:25,font:"GilroyMedium",align:"left",boundsAlignH:"left",boundsAlignV:"middle"}}},n=new Rn(t,"");n.input.useHandCursor=!1,this.container.addChild(n),this.options.hasOwnProperty("isSearchFriend")&&!0===this.options.isSearchFriend&&(this.isSearchFriend=!0,this.textName=new Phaser.Text(game,40,45,de.instance().getData("250"),{fontSize:25,font:"GilroyMedium",align:"left",fill:"#ffffff"}),n.addChild(this.textName),this.textName.inputEnabled=!0,this.options.hasOwnProperty("typeSearch")&&"ID"!==this.options.typeSearch?this.textName.activeTxt=!0:(this.textName.activeTxt=!1,this.textName.addColor("#8a8a8a",0)),this.textName.events.onInputUp.add(function(){1==e.textName.activeTxt||(e.textName.addColor("#ffffff",0),e.textName.activeTxt=!0),e.event.changeTypeSearch.dispatch(Cr.NAME)},this),n.addChild(this.addDoc(160,48)));var i={x:530,y:108,nameAtlas:"defaultSource",nameSprite:"Send_Icon"};this.options.hasOwnProperty("isSearch")&&!0===this.options.isSearch?i.nameSprite="Btn_Search_Icon":i.nameSprite="Send_Icon";var o=new _n(i,this.onSubmit,this),a=new _n({x:582,y:38,nameAtlas:"defaultSource",nameSprite:"Exit"},this.onCancel,this);n.addChild(o),n.addChild(a)}},{key:"addChat",value:function(){if(null===this.layoutChat){this.layoutChat=game.add.group();var e={x:0,y:0,nameAtlas:"defaultSource",nameSprite:"BG",left:4,right:4,top:4,bot:4,width:game.width,height:120,name:"chatBgkeyboard",configText:{x:0,y:0,style:{fontSize:25,font:"GilroyMedium",align:"left",boundsAlignH:"left",boundsAlignV:"middle"}}},t=new Rn(e,"");t.input.useHandCursor=!1,this.layoutChat.addChild(t);var n=new _n({x:545,y:23,nameAtlas:"defaultSource",nameSprite:"Close_Icon"},this.onCancel,this);this.layoutChat.addChild(n),this.layoutChat.y=game.height-this.keyboardHeight,this.layoutChat.y<0&&(this.layoutChat.y=0)}this.container.addChild(this.layoutChat)}},{key:"onSubmit",value:function(){this.event.submit.dispatch()}},{key:"onCancel",value:function(){this.event.cancle.dispatch(),this.hide()}},{key:"hide",value:function(){this.opened=!1,this.keyboardHeight=game.height,window.navigationbar&&window.navigationbar.hideNavigationBar(),"undefined"!=typeof StatusBar&&StatusBar.hide(),null!=this.layoutChat&&(this.container.removeChild(this.layoutChat),this.layoutChat.destroy(!0),this.layoutChat=null),null!=this.container&&(this.removeChild(this.container),this.container.destroy(!0),this.container=null),null!=this.transparentObj&&(this.transparentObj.destroy(!0),this.transparentObj=null),this.parent&&game.world.remove(this),null!==this.varTimeout&&(clearTimeout(this.varTimeout),this.varTimeout=null),null!=this.varTimeoutChange&&(clearTimeout(this.varTimeoutChange),this.varTimeoutChange=null),this.close()}},{key:"open",value:function(e,t){this.appendDOM(e,t)}},{key:"close",value:function(){$("#chatInput").length&&($("#game").remove("#chatInput"),$("#chatInput").remove())}},{key:"setValue",value:function(e){$("#chatInput").length&&$("#chatInput").val(e)}},{key:"getValue",value:function(){return $("#chatInput").length?$("#chatInput").val():""}},{key:"appendDOM",value:function(e,t){var n=this;this.close(),$("#game").append('<input id="chatInput" type="text" placeholder="'+t+'" value="" maxlength="'+e+'" autofocus>'),$("#chatInput").keypress(function(e){LogConsole.log("event.key : "+e.which),null!=n.varTimeoutChange&&clearTimeout(n.varTimeoutChange),13===e.which?(LogConsole.log("enter"),n.event.enter.dispatch()):n.varTimeoutChange=setTimeout(function(){n.event.change.dispatch()},300)}),this.setStyleInput(!0)}},{key:"addDoc",value:function(e,t){return new Phaser.Image(game,e,t,"defaultSource","LineDoc")}},{key:"setStyleOnElement",value:function(e,t){e.css(t)}}]),t}();function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Dr(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nr=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Dr(this,Gr(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),o.txtMess=":)"==e||"(:"==e?"(smile)":":("==e||"):"==e?"(sad)":e,o.timeValue=n,o.checkShowTime=!1,o.isLastMess=i,o.index=0,o.event={showTime:new Phaser.Signal,hideTime:new Phaser.Signal},o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.bgText=new Phaser.Group(game),this.addChild(this.bgText),this.text=new Qt(this.positionMenuConfig.chat_screen.txt_mess,this.txtMess),this.addChild(this.text);var e=40*window.GameConfig.RESIZE,t=70*window.GameConfig.RESIZE;this.configHeight=40*window.GameConfig.RESIZE;var n={x:35,y:22,nameAtlas:"mailSprites",nameSprite:"R_Chat_Violet",left:25,right:25,top:25,bot:25,width:0,height:0,name:"messageYour"};n.width=(this.text.width+e)/window.GameConfig.RESIZE,n.height=(this.text.height+e)/window.GameConfig.RESIZE,this.bg=new Dn(n),this.bgText.addChild(this.bg),this.text.x=this.bg.x+e/2,this.text.y=this.bg.y+e/2,this.addTimeSent(),1==this.isLastMess?this.height=this.bg.height+this.configHeight:this.height=this.bg.height+3,this.width=this.bg.width+t,this.bgText.x=window.GameConfig.GAME_WIDTH-this.width,this.text.x+=window.GameConfig.GAME_WIDTH-this.width,this.bg.inputEnabled=!0,this.bg.events.onInputUp.add(this.showTime,this)}},{key:"showTime",value:function(){0==this.checkShowTime?(this.event.showTime.dispatch(this.index),this.txtTime.revive(),this.checkShowTime=!0):(this.event.hideTime.dispatch(this.index),this.txtTime.kill(),this.checkShowTime=!1)}},{key:"setPosMess",value:function(e){void 0!==e?e.type==al.THEIR_MESS&&(this.height=this.bg.height+this.configHeight):this.height=this.bg.height+this.configHeight}},{key:"addTimeSent",value:function(){this.timeValue=this.handleTime(),this.txtTime=new Phaser.Text(game,this.positionMenuConfig.chat_screen.txt_mess_time.x*window.GameConfig.RESIZE,this.bg.height+this.positionMenuConfig.chat_screen.txt_mess_time.y*window.GameConfig.RESIZE,"".concat(this.timeValue[1]," - ").concat(this.timeValue[0]),this.positionMenuConfig.chat_screen.txt_mess_time.style),this.addChild(this.txtTime),this.txtTime.kill()}},{key:"handleTime",value:function(){var e=new Date(this.timeValue).toISOString().split("T");return e[1]=e[1].split(".000Z"),e[1]=e[1][0],[e[0],e[1]]}},{key:"width",set:function(e){this._width=e},get:function(){return this._width}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&Lr(n.prototype,i),o&&Lr(n,o),t}();function Br(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var jr=function(){function e(t,n,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thumbUrl=o,this.index=a,this.sprite=game.add.sprite(t,n,"songDetailSprites",i),this.event={loadAvaDone:new Phaser.Signal},this.loadUrl()}var t,n,i;return t=e,(n=[{key:"loadUrl",value:function(){game.cache.checkImageKey(this.thumbUrl)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.thumbUrl))}},{key:"loadStart",value:function(){}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){try{game.cache.checkImageKey(e.thumbUrl)?(""!==e.thumbUrl?e.sprite.loadTexture(e.thumbUrl):e.sprite.loadTexture("songDetailSprites","ava-default"),e.event.loadAvaDone.dispatch(e.thumbUrl)):e.event.loadAvaDone.dispatch(e.thumbUrl)}catch(e){}},100*this.index)}}])&&Br(t.prototype,n),i&&Br(t,i),e}();function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zr(e,t){return!t||"object"!==Ur(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hr(e){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vr(e,t){return(Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qr=function(e){function t(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:al.YOUR_MESS,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Zr(this,Hr(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),i.friend=e,i.txtMess=":)"==n||"(:"==n?"(smile)":":("==n||"):"==n?"(sad)":n,i.beforeType=o,i.timeValue=a,i.checkShowTime=!1,i.isLastMess=s,i.index=0,i.event={clickAva:new Phaser.Signal,showTime:new Phaser.Signal,hideTime:new Phaser.Signal},i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vr(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.bgText=new Phaser.Group(game),this.addChild(this.bgText),this.text=new Qt(this.positionMenuConfig.chat_screen.txt_mess_friend,this.txtMess),this.addChild(this.text),this.beforeType==al.YOUR_MESS&&this.addAvaCircle();var e=40*window.GameConfig.RESIZE,t=35*window.GameConfig.RESIZE,n=70*window.GameConfig.RESIZE;this.configHeight=40*window.GameConfig.RESIZE;var i={x:77,y:22,nameAtlas:"mailSprites",nameSprite:"L_Chat_White",left:25,right:25,top:25,bot:25,width:0,height:0,name:"messageTheir"};i.width=(this.text.width+e)/window.GameConfig.RESIZE,i.height=(this.text.height+e)/window.GameConfig.RESIZE,this.bg=new Dn(i),this.bgText.addChild(this.bg),this.text.x=this.bg.x+e/2,this.text.y=this.bg.y+e/2,this.addTimeSent(),1==this.isLastMess?this.height=this.bg.height+this.configHeight:this.height=this.bg.height+3,this.width=this.bg.width+n,this.bgText.x=t,this.text.x+=t,this.ava&&(this.ava.x+=t,this.maskAva.x+=t),this.bg.inputEnabled=!0,this.bg.events.onInputUp.add(this.showTime,this),this.addFrameVip()}},{key:"setPosMess",value:function(e){void 0!==e?e.type==al.YOUR_MESS&&(this.height=this.bg.height+this.configHeight):this.height=this.bg.height+this.configHeight}},{key:"addFrameVip",value:function(){!0!==this.friend.vip&&1!==this.friend.vip||(this.ava&&(this.frameVip=new Phaser.Sprite(game,69,58,"vipSource","Ava_Nho"),this.frameVip.anchor.set(.5),this.frameVip.scale.set(1.1),this.addChild(this.frameVip)),this.bgText.x+=15,this.text.x+=15,this.txtTime.x+=15)}},{key:"addAvaCircle",value:function(){var e=this;this.ava=new jr(this.positionMenuConfig.chat_screen.ava_friend.x*window.GameConfig.RESIZE,this.positionMenuConfig.chat_screen.ava_friend.y*window.GameConfig.RESIZE,"ava-default",this.friend.avatar),this.ava.sprite.inputEnabled=!0,this.ava.sprite.events.onInputUp.add(this.clickAva,this),this.ava.event.loadAvaDone.add(function(){e.ava.sprite.width=70,e.ava.sprite.height=70},this),this.addChild(this.ava.sprite),this.maskAva=new Phaser.Graphics(game,0,0),this.maskAva.beginFill(16777215),this.maskAva.drawCircle(35*window.GameConfig.RESIZE,55*window.GameConfig.RESIZE,69*window.GameConfig.RESIZE),this.maskAva.anchor.set(.5),this.addChild(this.maskAva),this.ava.sprite.mask=this.maskAva}},{key:"clickAva",value:function(){jC.instance().addUserProfile(this.friend.id),this.event.clickAva.dispatch()}},{key:"showTime",value:function(){0==this.checkShowTime?(this.event.showTime.dispatch(this.index),this.txtTime.revive(),this.checkShowTime=!0):(this.event.hideTime.dispatch(this.index),this.txtTime.kill(),this.checkShowTime=!1)}},{key:"addTimeSent",value:function(){this.timeValue=this.handleTime(),this.txtTime=new Phaser.Text(game,this.positionMenuConfig.chat_screen.txt_mess_time_their.x*window.GameConfig.RESIZE,this.bg.height+this.positionMenuConfig.chat_screen.txt_mess_time_their.y*window.GameConfig.RESIZE,"".concat(this.timeValue[1]," - ").concat(this.timeValue[0]),this.positionMenuConfig.chat_screen.txt_mess_time_their.style),this.addChild(this.txtTime),this.txtTime.kill()}},{key:"handleTime",value:function(){var e=new Date(this.timeValue).toISOString().split("T");return e[1]=e[1].split(".000Z"),e[1]=e[1][0],[e[0],e[1]]}},{key:"width",set:function(e){this._width=e},get:function(){return this._width}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&Fr(n.prototype,i),o&&Fr(n,o),t}();function Wr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ktSupport=!1,"undefined"!=typeof Storage&&(this.ktSupport=!0),"undefined"!=typeof NativeStorage&&(this.ktSupport=!0)}var t,n,i;return t=e,i=[{key:"VOTE",value:function(){return"vote"}},{key:"instance",value:function(){return this.controllStorage||(this.controllStorage=new e),this.controllStorage}}],(n=[{key:"setItem",value:function(e,t){this.ktSupport&&("web"===oe.instance().platform?localStorage.setItem(e,t):NativeStorage.setItem(e,t,function(e){},function(e){}))}},{key:"getItem",value:function(e){if(this.ktSupport){if("web"===oe.instance().platform)return localStorage.getItem(e);NativeStorage.getItem(e,function(e){return e},function(e){return"error"})}return"error"}},{key:"removeItem",value:function(e){this.ktSupport&&("web"===oe.instance().platform?localStorage.removeItem(e):NativeStorage.remove(e,function(e){},function(e){}))}}])&&Wr(t.prototype,n),i&&Wr(t,i),e}();function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){zr(e,t,n[t])})}return e}function zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Xr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.ajaxMessages||(this.ajaxMessages=new e),this.ajaxMessages}}],(n=[{key:"countMessage",value:function(e,t){for(var n=0,i=0;i<e.length;i++)e[i].to==dV.instance().dataMySeft.user_id&&0==e[i].is_read&&n++;for(var o=0;o<t.length;o++)0==t[o].is_read&&n++;return n}},{key:"countNewMessages",value:function(e){if(e){for(var t=0,n=0;n<e.length;n++)e[n].to==dV.instance().dataMySeft.user_id&&0==e[n].is_read&&t++;return t}}},{key:"countSystemMessages",value:function(e){if(e){for(var t=0,n=0;n<e.length;n++)0==e[n].is_read&&t++;return t}}},{key:"listConversation",value:function(e){for(var t=[],n=[],i=0;i<e.dataMessages.length;i++)if(e.dataMessages[i].from!==dV.instance().dataMySeft.user_id){for(var o=!1,a=0;a<n.length;a++)e.dataMessages[i].from===n[a]&&(o=!0);0==o&&n.push(e.dataMessages[i].from)}for(var s=0;s<e.dataMessages.length;s++)if(e.dataMessages[s].to!==dV.instance().dataMySeft.user_id){for(var r=!1,l=0;l<n.length;l++)e.dataMessages[s].to===n[l]&&(r=!0);0==r&&n.push(e.dataMessages[s].to)}for(var c=0;c<n.length;c++){var h=this.getLastestConversation(n[c],e.dataMessages);t.push(h)}for(var u=function(n){if(t[n].from==dV.instance().dataMySeft.user_id){var i=e.users.find(function(e){return e.id==t[n].to});t[n].user=i}if(t[n].to==dV.instance().dataMySeft.user_id){var o=e.users.find(function(e){return e.id==t[n].from});t[n].user=o}},d=0;d<t.length;d++)u(d);return t.sort(function(e,t){if(e.updated>t.updated)return-1}),t}},{key:"getLastestConversation",value:function(e,t){for(var n={created:0,from:0,id:0,is_read:0,message:"",state:"",to:0,updated:0},i=t.length-1;i>=0;i--)if(e===t[i].from||e===t[i].to){var o=t[i];n.updated<o.updated&&(n=o)}return n}},{key:"listMessage",value:function(e,t){for(var n=[],i=0;i<e.length;i++)e[i].from!=t.id&&e[i].to!=t.id||n.push(e[i]);return n.sort(function(e,t){if(e.updated<t.updated)return 1}),Kr({},n)}},{key:"sendMessage",value:function(e,t){var n=new SFS2X.SFSObject;n.putInt("to",e),n.putUtfString("message",t),dV.instance().sendData(ki.USER_MESSAGE_SEND_REQUEST,n)}},{key:"sendMarkAsRead",value:function(e){var t=new SFS2X.SFSObject;t.putInt("user_id",e),dV.instance().sendData(ki.USER_MESSAGE_MARK_AS_READ_REQUEST,t)}},{key:"markAsRead",value:function(e,t){var n=[];for(var i in t)t[i].from!=e.id&&t[i].to!=e.id||(t[i].is_read=1),n.push(t[i]);oe.instance().dataMessagesLocal.dataMessages=n,_t.instance().markAsReadMessage(dV.instance().dataMySeft.user_id,e.id)}},{key:"getNotiSystem",value:function(e){var t=Kr({},e);return Object.keys(t).map(function(e){return t[e]}).reverse()}},{key:"seeNoticeSystem",value:function(e,t){for(var n=null,i=0;i<t.length;i++)if(t[i].message_content_id==e){n=t[i];break}return n}},{key:"sendSystemMarkAsRead",value:function(e){var t=new SFS2X.SFSObject;t.putLong("message_content_id",e),dV.instance().sendData(ki.SYSTEM_MESSAGE_MARK_AS_READ_REQUEST,t)}},{key:"systemMarkAsRead",value:function(e,t){for(var n=[],i=0;i<t.length;i++)t[i].message_content_id==e&&(t[i].is_read=1),n.push(t[i]);_t.instance().markAsReadSystemMessage(e,dV.instance().dataMySeft.user_id)}}])&&Yr(t.prototype,n),i&&Yr(t,i),e}();function Jr(e){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function el(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tl(e,t){return!t||"object"!==Jr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nl(e,t,n){return(nl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=il(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function il(e){return(il=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ol(e,t){return(ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var al=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tl(this,il(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),n.friend=e,n.clickAvaFriend=!1,n.countMessSend=0,n.afterInit(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ol(e,t)}(t,Z),n=t,a=[{key:"YOUR_MESS",get:function(){return"YOUR_MESS"}},{key:"THEIR_MESS",get:function(){return"THEIR_MESS"}}],(o=[{key:"afterInit",value:function(){this.listView=null,this.heightDefault=144,this.listMessageOld=[],this.isHasNewMess=!1,this.bg,this.headerTab,this.scrollListChat,this.boxKeyboard,this.addBG(),this.addScrollListChat(),this.ajaxGetMessages(),this.addBoxKeyboard(),this.addEventExtension(),this.addHeaderTab()}},{key:"ajaxGetMessages",value:function(){this.onGetListConversationCallback(Xr.instance().listMessage(oe.instance().dataMessagesLocal.dataMessages,this.friend))}},{key:"onGetListConversationCallback",value:function(e){this.listMessageNew=[],ht.instance().hideLoading();var n=[];for(var i in e)n.push(e[i]);for(var o=[],a=(n=n.length>20?n.slice(n.length-20).reverse():n.reverse()).length;a>0;a--){var s=n[a-1];s.from==this.friend.id?s.type=t.THEIR_MESS:s.type=t.YOUR_MESS,o.push(s)}if(this.listMessageNew=o,this.listMessageOld.length>19)if(this.listMessageNew[this.listMessageNew.length-1].message==this.listMessageOld[this.listMessageOld.length-1].message&&this.listMessageNew[this.listMessageNew.length-1].created==this.listMessageOld[this.listMessageOld.length-1].created);else for(var r=this.listMessageNew.length;r>0;r--)if(this.listMessageNew[r-1].message==this.listMessageOld[this.listMessageOld.length-1].message&&this.listMessageNew[r-1].created==this.listMessageOld[this.listMessageOld.length-1].created){this.listMessageOld.splice(0,this.listMessageNew.length-r);break}this.addListMess()}},{key:"addBG",value:function(){this.bg=new Phaser.Button(game,0,0,"bg_create_room"),this.addChild(this.bg)}},{key:"addHeaderTab",value:function(){this.headerTab=new Phaser.Group(game,0,0),this.tab=new Bt(this.positionMenuConfig.chat_screen.header.tab),this.headerTab.addChild(this.tab),this.btnBack=new _n(this.positionMenuConfig.chat_screen.header.back,this.onBack,this),this.btnBack.anchor.set(.5),this.headerTab.addChild(this.btnBack),this.nameFriend=new Qt(this.positionMenuConfig.chat_screen.header.name,this.friend.user_name),this.nameFriend.anchor.set(.5),this.headerTab.addChild(this.nameFriend),this.addChild(this.headerTab)}},{key:"onBack",value:function(){0==this.clickAvaFriend?this.destroy():this.clickAvaFriend=!1}},{key:"addScrollListChat",value:function(){this.removeScrollListChat(),this.group=new Phaser.Group(game),this.addChild(this.group);var e=new Phaser.Rectangle(0,0*window.GameConfig.RESIZE,game.width,(game.height-this.heightDefault-30)*window.GameConfig.RESIZE);this.group.y=66,this.listView=new Ia(game,this.group,e,{direction:"y",overflow:100,padding:0,searchForClicks:!0})}},{key:"removeScrollListChat",value:function(){null!==this.listView&&(this.removeChild(this.group),this.group.remove(this.listView),this.listView.removeAll(),this.listView.destroy(),this.listView=null,this.group=null)}},{key:"addListMess",value:function(){for(var e=this.listMessageOld.length;e<this.listMessageNew.length;e++){this.isHasNewMess=!0;var n=!1;if(e==this.listMessageNew.length-1&&(n=!0),this.listMessageNew[e].type==t.YOUR_MESS){e>0&&e===this.listMessageOld.length&&this.listMessageNew[e-1].type==t.THEIR_MESS&&(this.listView.grp.children[this.listView.grp.children.length-1].height=this.listView.grp.children[this.listView.grp.children.length-1].bg.height+40);var i=new Nr(this.listMessageNew[e].message,this.listMessageNew[e].created,n);i.event.showTime.add(this.onClickShowTime,this),i.event.hideTime.add(this.onHideTimeItem,this),i.setPosMess(this.listMessageNew[e+1]),this.listView.add(i),i.index=this.listView.grp.children.length-1}else if(e>0){this.listMessageNew[e-1].type==t.THEIR_MESS&&(this.listView.grp.children[this.listView.grp.children.length-1].height=this.listView.grp.children[this.listView.grp.children.length-1].bg.height+3);var o=new Qr(this.friend,this.listMessageNew[e].message,this.listMessageNew[e-1].type,this.listMessageNew[e].created,n);o.event.clickAva.add(this.onClickAvaFr,this),o.event.showTime.add(this.onClickShowTime,this),o.event.hideTime.add(this.onHideTimeItem,this),o.setPosMess(this.listMessageNew[e+1]),this.listView.add(o),o.index=this.listView.grp.children.length-1}else{var a=new Qr(this.friend,this.listMessageNew[e].message,t.YOUR_MESS,this.listMessageNew[e].created,n);a.event.clickAva.add(this.onClickAvaFr,this),a.event.showTime.add(this.onClickShowTime,this),a.event.hideTime.add(this.onHideTimeItem,this),a.setPosMess(this.listMessageNew[e+1]),this.listView.add(a),a.index=this.listView.grp.children.length-1}this.listMessageOld.push(this.listMessageNew[e])}1==this.isHasNewMess&&(this.isHasNewMess=!1,this.listView.grp.children.length>0&&this.listView.tweenToItem(this.listView.grp.children.length-1)),this.listMessageOld[this.listMessageOld.length-1]&&0==this.listMessageOld[this.listMessageOld.length-1].is_read&&this.listMessageOld[this.listMessageOld.length-1].to===dV.instance().dataMySeft.user_id&&(Xr.instance().sendMarkAsRead(this.friend.id),Xr.instance().markAsRead(this.friend,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){$r(e,t,n[t])})}return e}({},oe.instance().dataMessagesLocal.dataMessages)))}},{key:"onClickShowTime",value:function(e){for(i=e;i<this.listView.grp.children.length-1;i++){game.add.tween(this.listView.grp.children[i+1]).to({y:this.listView.grp.children[i+1].y+30},100,"Linear",!0).start()}}},{key:"onHideTimeItem",value:function(e){for(i=e;i<this.listView.grp.children.length-1;i++){game.add.tween(this.listView.grp.children[i+1]).to({y:this.listView.grp.children[i+1].y-30},100,"Linear",!0).start()}}},{key:"onClickAvaFr",value:function(){this.clickAvaFriend=!0,this.destroy()}},{key:"addBoxKeyboard",value:function(){this.boxKeyboard=new Bt(this.positionMenuConfig.chat_screen.keyboard.bg),this.boxKeyboard.y=game.height-107,this.addChild(this.boxKeyboard),this.whiteSpace=new Dn(this.positionMenuConfig.chat_screen.white_space),this.boxKeyboard.addChild(this.whiteSpace);var e=new Qt(this.positionMenuConfig.chat_screen.txt_white_space,this.positionMenuConfig.chat_screen.txt_white_space.text);this.whiteSpace.addChild(e),this.btnSend=new _n(this.positionMenuConfig.chat_screen.btn_send,this.onClickSend,this),this.boxKeyboard.addChild(this.btnSend),this.boxKeyboard.inputEnabled=!0,this.boxKeyboard.events.onInputUp.add(this.inputKeyboard,this)}},{key:"onClickSend",value:function(){this.keyboardDone()}},{key:"inputKeyboard",value:function(){if(be.instance().playSound(be.buttonclick),"web"===oe.instance().platform){var e={maxLength:"",showTransparent:!0,placeholder:"Nhắn tin",isSearch:!1,typeInputText:"input",configText:{width:this.whiteSpace.width,height:this.whiteSpace.height,x:this.boxKeyboard.x+36,y:this.boxKeyboard.y+21}};Ir.instance().show(e)}else{"chat";var t={maxLength:"",showTransparent:!0,placeholder:"Nhắn tin",isSearch:!1,typeInputText:"chat",configText:{width:this.whiteSpace.width,height:this.whiteSpace.height,x:this.boxKeyboard.x+35,y:this.boxKeyboard.y+17}};Ir.instance().show(t)}}},{key:"keyboardClose",value:function(){Ir.instance().hide(),this.boxKeyboard.revive(),this.heightDefault=144,this.listMessageOld=[],this.addScrollListChat(),this.addListMess()}},{key:"keyboardDone",value:function(){this.message=Ir.instance().getValue(),this.message.length>0&&(this.message.length<255?(this.addNewMessage(),Ir.instance().setValue("")):Ck.instance().addDialog("Số ký tự quá dài :(."))}},{key:"hideKeyboard",value:function(){this.keyboardClose()}},{key:"addNewMessage",value:function(){ht.instance().showLoading(),Xr.instance().sendMessage(this.friend.id,this.message)}},{key:"handleNewTime",value:function(){var e=(new Date).toISOString().split("T");return e[1]=e[1].split(".000Z"),e[1]=e[1][0],e[0]+" "+e[1]}},{key:"onSendSuccess",value:function(e){this.listView.grp.children.length>0&&(this.listView.grp.children[this.listView.grp.children.length-1].height=this.listView.grp.children[this.listView.grp.children.length-1].bg.height+3)}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.onBack,this),Ir.instance().event.changeHeight.add(this.onChangeHeightKeyboard,this),Ir.instance().event.cancle.add(this.keyboardClose,this),Ir.instance().event.enter.add(this.keyboardDone,this),Ir.instance().event.submit.add(this.keyboardDone,this),Ir.instance().event.hideKeyboard.add(this.hideKeyboard,this),dV.instance().events.onExtensionResponse.add(this.onExtensionResponse,this),Qe.instance().event.newMessage.add(this.newMessage,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.onBack,this),Ir.instance().event.changeHeight.remove(this.onChangeHeightKeyboard,this),Ir.instance().event.cancle.remove(this.keyboardClose,this),Ir.instance().event.enter.remove(this.keyboardDone,this),Ir.instance().event.submit.remove(this.keyboardDone,this),Ir.instance().event.hideKeyboard.remove(this.hideKeyboard,this),dV.instance().events.onExtensionResponse.remove(this.onExtensionResponse,this),Qe.instance().event.newMessage.remove(this.newMessage,this)}},{key:"newMessage",value:function(){this.ajaxGetMessages()}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.USER_MESSAGE_SEND_RESPONSE&&"OK"==e.params.getUtfString("status")&&(this.onSendSuccess(),Qe.instance().callMessageFromChatScreen=!0,dV.instance().sendRequestDataMessages()),e.cmd==ki.USER_MESSAGE_LOAD_RESPONSE&&e.params.getUtfString("status")}},{key:"onChangeHeightKeyboard",value:function(e){this.listMessageOld=[],this.heightDefault=e+35,this.addScrollListChat(),this.addListMess()}},{key:"destroy",value:function(){if(this.removeEventExtension(),Ir.instance().hide(),Qe.instance().event.backChat.dispatch(),null!==this.listView&&(this.listView.removeAll(),this.listView.destroy(),this.listView=null),game.time.events.remove(this.timeCounting),null!==this.children){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}nl(il(t.prototype),"destroy",this).call(this)}}])&&el(n.prototype,o),a&&el(n,a),t}();function sl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var rl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sound=null,this.playId=null,this.isLoading=!1,this.src="",this.event={loadComplete:new Phaser.Signal,playSoundComplete:new Phaser.Signal,loadFail:new Phaser.Signal},this.currentLoad=null,this.dic={},this.arrSrc=[],this.idxLoad=0,this.idDelayCall=null}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.controllSound||(this.controllSound=new e),this.controllSound}}],(n=[{key:"loadSound",value:function(e){var t=this;console.log("loadSound : ------- : "+e),this.dic[e]=new Howl({src:[mt.instance().genUrlSound(e)]}),this.dic[e].once("load",function(e){t.event.loadComplete.dispatch()}),this.dic[e].once("loaderror",function(){console.log("load fail------------------- : "+e),t.loadSound(e),t.event.loadFail.dispatch()})}},{key:"loadSoundArray",value:function(e){!1===this.isLoading&&(this.src="",this.arrSrc=e,this.isLoading=!0,this.idxLoad=0,this.loadItemInArray(this.arrSrc[this.idxLoad]),this.removeDelayCall(),this.idDelayCall=game.time.events.add(30*Phaser.Timer.SECOND,this.callLoadFail,this))}},{key:"removeDelayCall",value:function(){null!==this.idDelayCall&&(game.time.events.remove(this.idDelayCall),this.idDelayCall=null)}},{key:"callLoadFail",value:function(){this.event.loadFail.dispatch(),this.removeAllSound()}},{key:"loadItemInArray",value:function(e){var t=this;this.dic[e]?this.checkLoadContinuteArray():(this.dic[e]=new Howl({src:[mt.instance().genUrlSound(e)]}),this.dic[e].once("load",function(){t.checkLoadContinuteArray()}),this.dic[e].once("loaderror",function(){t.idxLoad--,t.checkLoadContinuteArray()}))}},{key:"checkLoadContinuteArray",value:function(){LogConsole.log("cccccccheckLoadContinuteArray"),this.idxLoad++,this.idxLoad<this.arrSrc.length?this.loadItemInArray(this.arrSrc[this.idxLoad]):(LogConsole.log("checkLoadContinuteArray"),this.isLoading=!1,this.event.loadComplete.dispatch(),this.removeDelayCall())}},{key:"playsound",value:function(e){!1===game.paused&&(this.removeSound(),this.src=e,console.log(" playsound :  "+this.src),console.log(this.dic),"ctx"in Howler&&null!==Howler.ctx&&("suspended"!==Howler.ctx.state&&"interrupted"!==Howler.ctx.state||Howler.ctx.resume()),Howler.mute(!1),Howler.volume(1),Howler._autoResume(),this.dic.hasOwnProperty(e)?(console.log("load roi ---------"),this.sound=this.dic[e],this.playId=this.sound.play()):(console.log("chua load ---------"),this.sound=this.dic[e]=new Howl({src:[mt.instance().genUrlSound(e)]}),this.sound.once("end",function(){console.log("Finish play")}),this.playId=this.sound.play()))}},{key:"pauseSound",value:function(){!1===game.paused&&null!=this.sound&&this.sound.pause(this.playId)}},{key:"resumeSound",value:function(){!1===game.paused&&null!=this.sound&&this.sound.play(this.playId)}},{key:"removeAllSound",value:function(){for(var e in console.log("removeAllSound--------"),this.dic){var t=this.dic[e];t.stop(),t.unload(),t=null}this.dic={},this.isLoading=!1,this.removeSound(),this.src="",null!==this.currentLoad&&(this.currentLoad.stop(this.playId),this.currentLoad.unload(),this.currentLoad=null)}},{key:"removeSound",value:function(){if(console.log("removeSound : "+this.src),null!==this.sound&&(this.sound.stop(this.playId),this.sound.unload(),this.sound=null),""!==this.src&&this.dic[this.src]){var e=this.dic[this.src];e.stop(),e.unload(),e=null,delete this.dic[this.src],this.src=""}}},{key:"removeSoundFromUrl",value:function(e){if(console.log("removeSoundFromUrl---------------- : "+e),""!==e&&this.dic[e]){var t=this.dic[e];t.stop(),t.unload(),t=null,delete this.dic[e]}}}])&&sl(t.prototype,n),i&&sl(t,i),e}();function ll(e){return(ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hl(e,t){return!t||"object"!==ll(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ul(e){return(ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dl(e,t){return(dl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fl=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=hl(this,ul(t).call(this,game,e,n,null))).ava,o.btnPlay,o.btnPause,o.nameSong,o.nameSinger,o.checkAudioStop=!1,o.configsValue=i,o.songListen,o.urlSong=o.configsValue.listenLink,o.key="",o.isPlay=!1,o.tween,o.spriteTween,o.songDetailScreenConfig=JSON.parse(game.cache.getText("songDetailScreenConfig")),o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dl(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addAva(this.songDetailScreenConfig.songDetail.ava),this.addNameSong(this.songDetailScreenConfig.songDetail.nameSong),this.addNameSinger(this.songDetailScreenConfig.songDetail.nameSinger),this.loadToPlay()}},{key:"loadToPlay",value:function(){if(this.checkAudioStop=!1,game.cache.checkSoundKey(this.urlSong))this.onLoadAudio();else{var e=new Phaser.Loader(game);e.crossOrigin="anonymous",e.onLoadComplete.addOnce(this.onLoadAudio,this),rl.instance().loadSound(this.urlSong),e.start()}}},{key:"addAva",value:function(e){this.ava=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.ava.scale.set(1*window.GameConfig.RESIZE),this.ava.anchor.set(.5,0),this.addChild(this.ava);var t=new Phaser.Graphics(game,0,0);t.beginFill(16777215),t.drawRoundedRect((e.x-118)*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,237*window.GameConfig.RESIZE,237*window.GameConfig.RESIZE,15),t.anchor.set(.5),this.addChild(t),this.ava.mask=t,this.beginLoad(this.configsValue.thumb)}},{key:"beginLoad",value:function(e){e&&(this.key=e),game.cache.checkImageKey(this.key)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.key))}},{key:"onLoad",value:function(){rn.instance().event.load_image_complate.remove(this.onLoad,this),game.cache.checkImageKey(this.key)&&this.ava.loadTexture(this.key)}},{key:"addBtnPlayAndPause",value:function(e){this.btnPlay=new Phaser.Sprite(game,e.btn_play.x*window.GameConfig.RESIZE,e.btn_play.y*window.GameConfig.RESIZE,e.btn_play.nameAtlas,e.btn_play.nameSprite),this.btnPlay.inputEnabled=!0,this.btnPlay.events.onInputUp.add(this.onPlay,this),this.btnPause=new Phaser.Sprite(game,e.btn_pause.x*window.GameConfig.RESIZE,e.btn_pause.y*window.GameConfig.RESIZE,e.btn_pause.nameAtlas,e.btn_pause.nameSprite),this.btnPause.inputEnabled=!0,this.btnPause.events.onInputUp.add(this.onPause,this),this.btnPause.kill(),this.addChild(this.btnPlay),this.addChild(this.btnPause)}},{key:"onPlay",value:function(){be.instance().playSound(be.buttonclick),this.isPlay?(this.tween.resume(),rl.instance().resumeSound(this.urlSong)):(this.spriteTween=new Phaser.Sprite(game,this.ava.x-118*window.GameConfig.RESIZE,this.ava.y+237*window.GameConfig.RESIZE,"otherSprites","tween-time"),this.addChild(this.spriteTween),this.tween=game.add.tween(this.spriteTween.scale).to({x:27,y:1},10500,"Linear"),rl.instance().playsound(this.urlSong),this.tween.start(),this.tween.onComplete.add(this.tweenComplete,this),this.checkAudioStop=!1,this.isPlay=!0),this.btnPlay.kill(),this.btnPause.revive()}},{key:"onPause",value:function(){be.instance().playSound(be.buttonclick),this.tween.pause(),rl.instance().pauseSound(this.urlSong),this.btnPlay.revive(),this.btnPause.kill()}},{key:"onLoadAudio",value:function(){this.addBtnPlayAndPause(this.songDetailScreenConfig.songDetail)}},{key:"tweenComplete",value:function(){null!==this.spriteTween&&(this.spriteTween.destroy(),this.spriteTween=null,this.stopAudio())}},{key:"stopAudio",value:function(){0==this.checkAudioStop&&(this.checkAudioStop=!0,this.isPlay=!1,this.btnPause.kill(),this.btnPlay.revive(),rl.instance().removeSound(this.urlSong))}},{key:"removeMethod",value:function(){rl.instance().removeAllSound()}},{key:"addNameSong",value:function(e){this.nameSong=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,this.configsValue.title,e.configs),this.nameSong.anchor.set(.5,0),this.addChild(this.nameSong)}},{key:"addNameSinger",value:function(e){this.nameSinger=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,this.configsValue.singer,e.configs),this.nameSinger.anchor.set(.5,0),this.addChild(this.nameSinger)}}])&&cl(n.prototype,i),o&&cl(n,o),t}();function pl(e){return(pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yl(e,t){return!t||"object"!==pl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ml(e){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vl(e,t){return(vl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wl=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=yl(this,ml(t).call(this,game,e,n,null))).songDetailScreenConfig=JSON.parse(game.cache.getText("songDetailScreenConfig")),o.iconShareActive,o.txtShareActive,o.btnShareActive,o.btnShareDisactive,o.txtShareDisactive,o.iconShareDisactive,o.configsValue=i,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vl(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addDisactive(this.songDetailScreenConfig.btn_share.disactive),this.addActive(this.songDetailScreenConfig.btn_share.active)}},{key:"addDisactive",value:function(e){this.btnShareDisactive=new Phaser.Sprite(game,e.btn.x*window.GameConfig.RESIZE,e.btn.y*window.GameConfig.RESIZE,e.btn.nameAtlas,e.btn.nameSprite),this.btnShareDisactive.inputEnabled=!0,this.btnShareDisactive.events.onInputUp.addOnce(this.onActive,this),this.addChild(this.btnShareDisactive),this.iconShareDisactive=new Phaser.Sprite(game,e.icon.x*window.GameConfig.RESIZE,e.icon.y*window.GameConfig.RESIZE,e.icon.nameAtlas,e.icon.nameSprite),this.btnShareDisactive.addChild(this.iconShareDisactive),this.txtShareDisactive=new Phaser.Text(game,e.txt.x*window.GameConfig.RESIZE,e.txt.y*window.GameConfig.RESIZE,de.instance().getData("263"),e.txt.configs),this.btnShareDisactive.addChild(this.txtShareDisactive)}},{key:"addActive",value:function(e){this.btnShareActive=new Phaser.Sprite(game,e.btn.x*window.GameConfig.RESIZE,e.btn.y*window.GameConfig.RESIZE,e.btn.nameAtlas,e.btn.nameSprite),this.btnShareActive.kill(),this.addChild(this.btnShareActive),this.iconShareActive=new Phaser.Sprite(game,e.icon.x*window.GameConfig.RESIZE,e.icon.y*window.GameConfig.RESIZE,e.icon.nameAtlas,e.icon.nameSprite),this.btnShareActive.addChild(this.iconShareActive),this.txtShareActive=new Phaser.Text(game,e.txt.x*window.GameConfig.RESIZE,e.txt.y*window.GameConfig.RESIZE,de.instance().getData("262"),e.txt.configs),this.btnShareActive.addChild(this.txtShareActive)}},{key:"onActive",value:function(){be.instance().playSound(be.buttonclick),this.btnShareDisactive.destroy(),this.btnShareActive.revive()}}])&&gl(n.prototype,i),o&&gl(n,o),t}();function bl(e){return(bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Sl(e,t){return!t||"object"!==bl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function El(e){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cl(e,t){return(Cl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kl=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Sl(this,El(t).call(this,game,e,n,null))).songDetailScreenConfig=JSON.parse(game.cache.getText("songDetailScreenConfig")),o.iconLikeActive,o.txtLikeActive,o.btnLikeActive,o.btnLikeDisactive,o.txtLikeDisactive,o.iconLikeDisactive,o.configsValue=i,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cl(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addDisactive(this.songDetailScreenConfig.btn_like.disactive),this.addActive(this.songDetailScreenConfig.btn_like.active)}},{key:"addDisactive",value:function(e){this.btnLikeDisactive=new Phaser.Sprite(game,e.btn.x*window.GameConfig.RESIZE,e.btn.y*window.GameConfig.RESIZE,e.btn.nameAtlas,e.btn.nameSprite),this.btnLikeDisactive.inputEnabled=!0,this.btnLikeDisactive.events.onInputUp.addOnce(this.onActive,this),this.addChild(this.btnLikeDisactive),this.iconLikeDisactive=new Phaser.Sprite(game,e.icon.x*window.GameConfig.RESIZE,e.icon.y*window.GameConfig.RESIZE,e.icon.nameAtlas,e.icon.nameSprite),this.btnLikeDisactive.addChild(this.iconLikeDisactive),this.txtLikeDisactive=new Phaser.Text(game,e.txt.x*window.GameConfig.RESIZE,e.txt.y*window.GameConfig.RESIZE,de.instance().getData("265"),e.txt.configs),this.btnLikeDisactive.addChild(this.txtLikeDisactive)}},{key:"addActive",value:function(e){this.btnLikeActive=new Phaser.Sprite(game,e.btn.x*window.GameConfig.RESIZE,e.btn.y*window.GameConfig.RESIZE,e.btn.nameAtlas,e.btn.nameSprite),this.btnLikeActive.kill(),this.addChild(this.btnLikeActive),this.iconLikeActive=new Phaser.Sprite(game,e.icon.x*window.GameConfig.RESIZE,e.icon.y*window.GameConfig.RESIZE,e.icon.nameAtlas,e.icon.nameSprite),this.btnLikeActive.addChild(this.iconLikeActive),this.txtLikeActive=new Phaser.Text(game,e.txt.x*window.GameConfig.RESIZE,e.txt.y*window.GameConfig.RESIZE,de.instance().getData("264"),e.txt.configs),this.btnLikeActive.addChild(this.txtLikeActive)}},{key:"onActive",value:function(){be.instance().playSound(be.buttonclick),this.btnLikeDisactive.destroy(),this.btnLikeActive.revive()}}])&&_l(n.prototype,i),o&&_l(n,o),t}();function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ol(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rl(e,t){return!t||"object"!==Pl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xl(e){return(xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tl(e,t){return(Tl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Il=function(e){function t(e,n,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Rl(this,xl(t).call(this,game,e,n,null))).configsValue=i,o.linkMp3="",o.linkYoutube="";for(var a=0;a<o.configsValue.song_links.length;a++){var s=o.configsValue.song_links[a];s.link_type==Fl.LINK_ZING_MP3&&(o.linkMp3=s.link),s.link_type==Fl.LINK_YOUTUBE&&(o.linkYoutube=s.link)}return o.songDetailScreenConfig=JSON.parse(game.cache.getText("songDetailScreenConfig")),o.txtListenFull,o.line,o.iconZing,o.iconYoutube,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tl(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addTxtListenFull(this.songDetailScreenConfig.otherOnBottom.txtListenFull),this.addLine(this.songDetailScreenConfig.otherOnBottom),this.addIconZing(this.songDetailScreenConfig.otherOnBottom.icon_zing),this.addIconYoutube(this.songDetailScreenConfig.otherOnBottom.icon_youtube)}},{key:"addTxtListenFull",value:function(e){this.txtListenFull=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("261"),e.configs),this.txtListenFull.anchor.set(.5,0),this.addChild(this.txtListenFull)}},{key:"addLine",value:function(e){this.line=new Phaser.Sprite(game,e.line_long.x*window.GameConfig.RESIZE,e.line_long.y*window.GameConfig.RESIZE,e.line_long.nameAtlas,e.line_long.nameSprite),this.line.anchor.set(.5,0);var t=new Phaser.Sprite(game,e.line.x*window.GameConfig.RESIZE,e.line.y*window.GameConfig.RESIZE,e.line.nameAtlas,e.line.nameSprite);t.anchor.set(.5),this.line.addChild(t),this.addChild(this.line)}},{key:"addIconZing",value:function(e){this.icon_zing=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.icon_zing.anchor.set(.5),this.icon_zing.inputEnabled=!0,this.icon_zing.events.onInputUp.add(this.clickZing,this),this.addChild(this.icon_zing)}},{key:"clickZing",value:function(){be.instance().playSound(be.buttonclick),jC.instance().addDialog("Hệ thống đang phát triển tính năng này. Bạn vui lòng quay lại sau nhé!")}},{key:"addIconYoutube",value:function(e){this.icon_youtube=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.icon_youtube.anchor.set(.5),this.icon_youtube.inputEnabled=!0,this.icon_youtube.events.onInputUp.add(this.clickYoutube,this),this.addChild(this.icon_youtube)}},{key:"clickYoutube",value:function(){be.instance().playSound(be.buttonclick),LogConsole.log("Youtube: ".concat(this.configsValue.songLink)),jC.instance().addDialog("Hệ thống đang phát triển tính năng này. Bạn vui lòng quay lại sau nhé!")}}])&&Ol(n.prototype,i),o&&Ol(n,o),t}();function Al(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ll=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"user_id",get:function(){return"user_id"}},{key:"user_name",get:function(){return"user_name"}},{key:"avatar",get:function(){return"avatar"}},{key:"weekly_result",get:function(){return"weekly_result"}},{key:"user_won",get:function(){return"user_won"}},{key:"opponent_won",get:function(){return"opponent_won"}},{key:"status",get:function(){return"status"}},{key:"turn_count",get:function(){return"turn_count"}},{key:"is_online",get:function(){return"is_online"}},{key:"can_be_poked",get:function(){return"can_be_poked"}},{key:"poked",get:function(){return"poked"}},{key:"poked_at",get:function(){return"poked_at"}},{key:"updated",get:function(){return"updated"}},{key:"challenge_request_id",get:function(){return"challenge_request_id"}},{key:"challenge_msg",get:function(){return"challenge_msg"}},{key:"vip",get:function(){return"vip"}}],(n=null)&&Al(t.prototype,n),i&&Al(t,i),e}();function Dl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Gl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"switchButton",value:function(e,t,n,i){for(var o=0;o<t.length;o++)t[o].kill();for(var a=0;a<e.length;a++)e[a].revive();n.kill(),i.revive()}},{key:"show",value:function(e){game.add.tween(e).to({x:0},100,"Linear",!0)}},{key:"hide",value:function(e){game.add.tween(e).to({x:game.width},100,"Linear",!0)}},{key:"handleArrsGames",value:function(e,t,n){if(e.size()>0)for(var i=0;i<e.size();i++){var o=e.getSFSObject(i),a=o.getSFSObject("opponent_entity"),s=a.getUtfString("user_name"),r=a.getUtfString("avatar"),l=a.getInt("experience_score"),c=a.getInt("id"),h=o.getInt("turn_count"),u=o.getSFSObject("weekly_result"),d=u.getInt("user_won"),f=u.getInt("opponent_won"),p=o.getLong("user_play_log"),g=o.getLong("id");t.push({opponentEntity:{userName:s,avatar:r,experienceScore:l,id:c},turnCount:h,weeklyResult:{userWon:d,opponentWon:f},id:g,userGameLog:p,mode:n})}}},{key:"handleArrMainMenuLoad",value:function(t,n,i){if(t.size()>0)for(var o=0;o<t.size();o++){var a=t.getSFSObject(o),s=a.getInt(Ll.user_id),r=a.getUtfString(Ll.user_name),l=a.getUtfString(Ll.avatar),c=a.getSFSObject(Ll.weekly_result),h=c.getInt(Ll.user_won),u=c.getInt(Ll.opponent_won),d=a.getUtfString(Ll.status),f=a.getLong(Ll.updated),p=e.formatChallengeGameUpdated(f),g=a.getUtfString(Ll.challenge_msg),y=a.getBool(Ll.vip),m=null,v=0,w=0;"THEIR_TURN"==d?a.containsKey(Ll.can_be_poked)&&(m=a.getInt(Ll.can_be_poked)):"YOUR_TURN"==d&&a.containsKey(Ll.poked)&&(v=a.getInt(Ll.poked),w=a.getLong(Ll.poked_at));var b=a.getInt(Ll.turn_count),_=a.getBool(Ll.is_online),S=a.getLong(Ll.challenge_request_id);n.push({opponentEntity:{id:s,userName:r,avatar:l,is_online:_,vip:y},weeklyResult:{userWon:h,opponentWon:u},turnCount:b,status:d,can_be_poked:m,poked:v,poked_at:w,updated:p,base_updated:f,challenge_request_id:S,challenge_msg:g})}i()}},{key:"handleCheckUpdateMainMenu",value:function(e,t){var n=e.getInt("init_quests_count"),i=e.getLong("new_friend_request_count"),o=e.getLong("started_event_count"),a={playing_guide:"",play_script_questions:[]};if(e.containsKey("play_script")){var s=e.getSFSObject("play_script");s.containsKey("playing_guide")&&(a.playing_guide=s.getUtfString("playing_guide"))}if(a.playing_guide==_o.DONE_GET_QUEST&&(oe.instance().botChallenge={value:0,gameLogId:oe.instance().menuLoadResponses.challengeGames[0].userGameLog,requestId:oe.instance().menuLoadResponses.challengeGames[0].id,opponentEntity:oe.instance().menuLoadResponses.challengeGames[0].opponentEntity,mode:"isChallengeGame",can_be_poked:oe.instance().menuLoadResponses.challengeGames[0].can_be_poked,weeklyResult:{userWon:0,opponentWon:0}}),e.containsKey("hours_reward")){var r=e.getSFSObject("hours_reward");r.getInt("hours_reward_id"),r.getInt("user_id"),r.getLong("created"),r.getUtfString("state"),r.getLong("updated")}t(n,i,o,{},a)}},{key:"getGender",value:function(e){return"UNKNOWN"==e.gender?"MALE":"FEMALE"}},{key:"getTwoOfFourAnswer",value:function(e,t,n,i,o){LogConsole.log(o);var a=[],s=[];1==o.correctAnswer?(a.push(e),s.push(t),s.push(n),s.push(i)):2==o.correctAnswer?(a.push(t),s.push(e),s.push(n),s.push(i)):3==o.correctAnswer?(a.push(n),s.push(t),s.push(e),s.push(i)):(a.push(i),s.push(t),s.push(n),s.push(e)),s.splice(Math.floor(Math.random()*s.length),1);for(var r=0;r<s.length;r++)s[r].hide()}},{key:"formatName",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.length>t){var i=e.substring(0,t);return!1===n?i:i.trim()+"..."}return e}},{key:"formatChallengeGameUpdated",value:function(e){var t="",n=Date.now()-e;n=parseInt(n/1e3);var i=parseInt((n/2592e3).toFixed(0));if(i>0)t="".concat(i," tháng trước");else{var o=parseInt(n/604800);if(o>0)t="".concat(o," tuần trước");else{var a=parseInt(n/86400);if(a>0)t="".concat(a," ngày trước");else{var s=parseInt(n/3600);if(s>0)t="".concat(s," giờ trước");else{var r=parseInt(n/60);t=r>0?"".concat(r," phút trước"):"vài giây trước"}}}}return t}},{key:"handleRankingList",value:function(e,t,n,i){if(e.containsKey("solo_mode_top10_last_week"))var o=e.getSFSArray("solo_mode_top10_last_week");else o=e.getSFSArray("solo_mode_top10_this_week");for(var a=0;a<o.size();a++){var s=o.getSFSObject(a),r=s.getInt("user_id"),l=s.getInt("number_of_correct"),c=s.getInt("playlist_id"),h=s.getUtfString("avatar"),u=s.getUtfString("user_name"),d=!1;s.containsKey("vip")&&(d=s.getBool("vip"));var f={rank:a+1,user_id:r,playlist_id:c,number_of_correct:l,user_name:u,avatar:h,vip:d};t.push(f)}if(e.containsKey("position")){var p=e.getSFSObject("position");if("[ Empty SFSObject ]"!==p.getDump()){var g=p.getLong("pos"),y=p.getInt("user_id"),m=p.getInt("playlist_id"),v=p.getInt("number_of_correct");n.rank=g,n.user_id=y,n.playlist_id=m,n.number_of_correct=v}}i()}},{key:"handleTime",value:function(e,t){var n=e.getLong("expired_timestamp"),i=Date.now();t(parseInt((n-i)/1e3))}},{key:"setQuestLogs",value:function(e,t){null!==e&&t.push(e)}},{key:"changeQuestLogsOnClaim",value:function(e,t){console.log(t);for(var n=0;n<t.length;n++)t[n].id==e&&(t[n].state="REWARDED")}},{key:"getGame",value:function(e){var t=window.linkResource;$.ajax({type:"GET",url:t,success:function(t){e(t)},error:function(t,n,i){e({status:"ERROR"})}})}},{key:"filterResponseGames",value:function(){oe.instance().menuLoadResponses.waitingGames=oe.instance().menuOpponentsResponse.filter(function(e){return"THEIR_TURN"==e.status}),oe.instance().menuLoadResponses.doneGames=oe.instance().menuOpponentsResponse.filter(function(e){return"NO_GAME"==e.status}),oe.instance().menuLoadResponses.challengeGames=oe.instance().menuOpponentsResponse.filter(function(e){return"YOUR_TURN"==e.status}),oe.instance().menuLoadResponses.waitingGames=oe.instance().menuLoadResponses.waitingGames.sort(function(e,t){return t.can_be_poked-e.can_be_poked}),oe.instance().menuLoadResponses.challengeGames=oe.instance().menuLoadResponses.challengeGames.sort(function(e,t){return t.poked-e.poked}),oe.instance().menuLoadResponses.challengeGames=oe.instance().menuLoadResponses.challengeGames.sort(function(e,t){return t.poked_at-e.poked_at})}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"shortValueNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>999999)for(var n,i=[" k"," M"," G"," T"," P"," E"," Z"," Y"],o=i.length-1;o>=0;o--)if(e<=-(n=Math.pow(1e3,o+1))||e>=n)return+(e/n).toFixed(t)+i[o];return e}}],(n=null)&&Dl(t.prototype,n),i&&Dl(t,i),e}();function Ml(e){return(Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bl(e,t){return!t||"object"!==Ml(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jl(e){return(jl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ul(e,t){return(Ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fl=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bl(this,jl(t).call(this,game,0,0,"bg_create_room"))).songDetailScreenConfig=JSON.parse(game.cache.getText("songDetailScreenConfig")),n.configsValue=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ul(e,t)}(t,Phaser.Button),n=t,o=[{key:"LINK_ZING_MP3",get:function(){return"mp3zing"}},{key:"LINK_YOUTUBE",get:function(){return"youtube"}}],(i=[{key:"afterInit",value:function(){this.headerTab,this.songDetail,this.btnShare,this.btnLike,this.otherOnBottom,this.addHeaderTab(this.songDetailScreenConfig.header),this.addBtnShare(),this.addBtnLike(),Ei.instance().showBanerInfoSongScreen(),this.addEventExtension(),this.sendGetDetail()}},{key:"sendGetDetail",value:function(){ht.instance().showLoading();var e=new SFS2X.SFSObject;e.putLong("song_id",this.configsValue.id),dV.instance().sendData(ki.SONG_DETAIL_REQUEST,e)}},{key:"addEventExtension",value:function(){dV.instance().events.onExtensionResponse.add(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().events.onExtensionResponse.remove(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.SONG_DETAIL_RESPONSE&&"OK"==e.params.getUtfString("status")&&(this.handleResponseSong(e.params),ht.instance().hideLoading(),this.addSongDetail(),this.addOtherOnBottom())}},{key:"handleResponseSong",value:function(e){var t=e.getSFSObject("song");if(t.containsKey("file_path")){var n=t.getUtfString("file_path"),i=t.getSFSObject("singer").getUtfString("avatar"),o=t.getUtfString("title");this.configsValue.fileName=n,this.configsValue.listenLink=n,this.configsValue.thumb=i,this.configsValue.title=o}}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.borderDiamond,this.diamond,this.txtDiamond,this.addButtonBack(e),this.addBorderDiamond(e),this.addDiamond(e)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.btn_back.x*window.GameConfig.RESIZE,e.btn_back.y*window.GameConfig.RESIZE,e.btn_back.nameAtlas,e.btn_back.nameSprite),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerTab.addChild(this.btnBack)}},{key:"onBack",value:function(){be.instance().playSound(be.buttonclick),this.destroy(),this.songDetail.removeMethod()}},{key:"addBorderDiamond",value:function(e){this.borderDiamond=new Phaser.Sprite(game,e.border_diamond.x*window.GameConfig.RESIZE,e.border_diamond.y*window.GameConfig.RESIZE,e.border_diamond.nameAtlas,e.border_diamond.nameSprite),this.headerTab.addChild(this.borderDiamond)}},{key:"addDiamond",value:function(e){this.diamond=new Phaser.Sprite(game,e.diamond.x*window.GameConfig.RESIZE,e.diamond.y*window.GameConfig.RESIZE,e.diamond.nameAtlas,e.diamond.nameSprite),this.borderDiamond.addChild(this.diamond),this.txtDiamond=new Phaser.Text(game,e.txt_diamond.x*window.GameConfig.RESIZE,e.txt_diamond.y*window.GameConfig.RESIZE,Gl.shortValueNumber(dV.instance().dataMySeft.diamond,2),e.txt_diamond.configs),this.borderDiamond.addChild(this.txtDiamond);var t=this.diamond.width+this.txtDiamond.width;this.txtDiamond.x=(this.borderDiamond.width-t)/2,this.diamond.x=this.txtDiamond.x+this.txtDiamond.width+10}},{key:"addSongDetail",value:function(){this.songDetail=new fl(320*window.GameConfig.RESIZE,160*window.GameConfig.RESIZE,this.configsValue),this.addChild(this.songDetail)}},{key:"addBtnShare",value:function(){this.btnShare=new wl(35*window.GameConfig.RESIZE,535*window.GameConfig.RESIZE),this.addChild(this.btnShare)}},{key:"addBtnLike",value:function(){this.btnLike=new kl(329*window.GameConfig.RESIZE,535*window.GameConfig.RESIZE),this.addChild(this.btnLike)}},{key:"addOtherOnBottom",value:function(){this.otherOnBottom=new Il(0,705*window.GameConfig.RESIZE,this.configsValue),this.addChild(this.otherOnBottom)}},{key:"destroy",value:function(){for(this.removeEventExtension(),Ei.instance().hideBanner();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&Nl(n.prototype,i),o&&Nl(n,o),t}();function Zl(e){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vl(e,t,n){return(Vl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ql(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ql(e){return(Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wl(e,t){return(Wl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ql(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Kl=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Ql(t).call(this,game,null))||"object"!==Zl(i)&&"function"!=typeof i?ql(n):i).event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.positionPopup=oe.instance().positionPopup,e.topBg=new Bt(e.positionPopup.popup_confirm_top_bg),e.addChild(e.topBg),e.bgText=new Dn(e.positionPopup.popup_confirm_bg_text),e.addChild(e.bgText),e.btnOk=new qn(e.positionPopup.popup_confirm_button_ok,de.instance().getData("102"),e.chooseOK,ql(ql(e))),e.addChild(e.btnOk),e.btnCancle=new qn(e.positionPopup.popup_confirm_button_cancle,de.instance().getData("117"),e.chooseCancle,ql(ql(e))),e.addChild(e.btnCancle),e.txtContent=new Qt(e.positionPopup.popup_confirm_text_content,o),e.txtContent.setTextBounds(0,0,545*oe.instance().scale,278*oe.instance().scale),e.addChild(e.txtContent),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wl(e,t)}(t,Je),n=t,(i=[{key:"setHeight",value:function(e){this.bgText.height=e,this.txtContent.setTextBounds(0,0,545*oe.instance().scale,this.bgText.height-168*oe.instance().scale),this.btnCancle.y=this.bgText.height-103*oe.instance().scale,this.btnOk.y=this.bgText.height-103*oe.instance().scale}},{key:"setTextCancle",value:function(e){this.btnCancle.setText(e)}},{key:"setTextOk",value:function(e){this.btnOk.setText(e)}},{key:"setContent",value:function(e){this.txtContent.setText(e)}},{key:"chooseOK",value:function(){LogConsole.log("chooseOK"),this.btnOk.inputEnabled=!1,this.btnCancle.inputEnabled=!1,this.event.OK.dispatch()}},{key:"chooseCancle",value:function(){LogConsole.log("chooseCancle"),this.btnOk.inputEnabled=!1,this.btnCancle.inputEnabled=!1,this.event.CANCLE.dispatch()}},{key:"destroy",value:function(){this.topBg.destroy(),this.bgText.destroy(),this.btnOk.destroy(),this.btnCancle.destroy(),this.txtContent.destroy(),Vl(Ql(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.bgText.width}}])&&Hl(n.prototype,i),o&&Hl(n,o),t}();function zl(e){return(zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xl(e,t){return!t||"object"!==zl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jl(e){return(Jl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $l(e,t){return($l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ec=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xl(this,Jl(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$l(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.ava=new pn,this.addChild(this.ava),this.maskAva=new Phaser.Graphics(game,this.ava.x,this.ava.x),this.maskAva.beginFill(16711680,1),this.maskAva.drawRoundedRect(this.ava.x,this.ava.y,this.ava.width,this.ava.height,10),this.maskAva.endFill(),this.addChild(this.maskAva),this.ava.mask=this.maskAva}},{key:"setSize",value:function(e,t){this.ava.setSize(e,t),this.maskAva.clear(),this.maskAva.beginFill(16711680,1),this.maskAva.drawRoundedRect(this.ava.x,this.ava.y,this.ava.width,this.ava.height,10),this.maskAva.endFill()}},{key:"beginLoad",value:function(e,t){this.ava.beginLoad(e,t)}},{key:"width",get:function(){return this.ava.width}},{key:"height",get:function(){return this.ava.height}}])&&Yl(n.prototype,i),o&&Yl(n,o),t}();function tc(e){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ic(e,t){return!t||"object"!==tc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oc(e){return(oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ac(e,t){return(ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sc=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ic(this,oc(t).call(this,game,null))).positionShop=oe.instance().positionDefaultSource,n.loaderPerc=0,n.beginLoad=!1,n.maxLoading=0,n.bg=new Bt(e?n.positionShop.gennes_current_level_deactive1:n.positionShop.gennes_current_level_deactive),n.addChild(n.bg),n.bgLoading=new Bt(e?n.positionShop.gennes_current_level_active1:n.positionShop.gennes_current_level_active),n.addChild(n.bgLoading),n.maskLoading=new Phaser.Graphics(game,n.bgLoading.width/2,n.bgLoading.height/2),n.maskLoading.anchor.setTo(.5,.5),n.addChild(n.maskLoading),n.bgLoading.mask=n.maskLoading,n.drawMask(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ac(e,t)}(t,Je),n=t,(i=[{key:"drawMask",value:function(){this.maxLoading<100&&this.maxLoading>0&&(this.loaderPerc=this.maxLoading,this.maskLoading.clear(),this.maskLoading.beginFill(16777215),this.maskLoading.arc(0,0,this.bgLoading.width/2,this.game.math.degToRad(-220),this.game.math.degToRad(3.6*this.loaderPerc-220)),this.maskLoading.endFill())}},{key:"setMaxLoading",value:function(e){this.maxLoading=80*e/100,0===this.maxLoading&&(this.maxLoading=1),this.drawMask()}},{key:"width",get:function(){return this.bgLoading.width}}])&&nc(n.prototype,i),o&&nc(n,o),t}();function rc(e){return(rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cc(e,t){return!t||"object"!==rc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hc(e){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uc(e,t){return(uc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=cc(this,hc(t).call(this,game,null))).user=new vt,e.setData(n,i),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uc(e,t)}(t,Je),n=t,(i=[{key:"setData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.user=Object.assign({},this.user,e),this.removeAllItem(),this.user.level<5){for(var n=0,i=0;i<5;i++){var o=null;if(i==e.level)(o=new sc(t)).setMaxLoading(100*(this.user.exp_score-this.user.current_level_score)/(this.user.next_level_score-this.user.current_level_score));else{var a={x:0,y:10,nameAtlas:"defaultSource",nameSprite:"LevelActive"};t?i<this.user.level?a.nameSprite="LevelActive1":a.nameSprite="LevelDeactive1":i<this.user.level?a.nameSprite="LevelActive":a.nameSprite="LevelDeactive",o=new Bt(a)}o.x=n,this.addChild(o),n+=i<4?o.width+7*oe.instance().scale:o.width}LogConsole.log(this.children.length),this._width=n}else{var s=new Bt({x:4,y:7,nameAtlas:"defaultSource",nameSprite:"Master_Icon"});this.addChild(s),this._width=s.width+5}}},{key:"width",get:function(){return this._width}}])&&lc(n.prototype,i),o&&lc(n,o),t}();function fc(e){return(fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gc(e,t,n){return(gc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yc(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yc(e){return(yc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mc(e,t){return(mc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var wc=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=yc(t).call(this,game,null))||"object"!==fc(i)&&"function"!=typeof i?vc(n):i).event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.data=null,e.positionPopup=oe.instance().positionPopup,e.bgConfirm=new Kl,e.bgConfirm.event.OK.add(e.chooseOk,vc(vc(e))),e.bgConfirm.event.CANCLE.add(e.chooseCancle,vc(vc(e))),e.bgConfirm.x=0,e.bgConfirm.y=74*oe.instance().scale,e.addChild(e.bgConfirm),e.avaPlayList=new ec,e.avaPlayList.setSize(200*oe.instance().scale,200*oe.instance().scale),e.avaPlayList.x=177*oe.instance().scale,e.avaPlayList.y=0,e.addChild(e.avaPlayList),e.textName=new Qt(e.positionPopup.popup_buy_playlist_text_name,""),e.textName.setTextBounds(0,0,560*oe.instance().scale,47*oe.instance().scale),e.addChild(e.textName),e.textContent=new Qt(e.positionPopup.popup_buy_playlist_text_content,de.instance().getData("116")),e.textContent.setTextBounds(0,0,560*oe.instance().scale,88*oe.instance().scale),e.addChild(e.textContent),e.levePlayList=new dc({},!1),e.levePlayList.y=266*oe.instance().scale,e.levePlayList.x=e.avaPlayList.x+(e.avaPlayList.width-e.levePlayList.width)/2,e.addChild(e.levePlayList),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mc(e,t)}(t,Je),n=t,(i=[{key:"setContent",value:function(e){this.textContent.text=e}},{key:"setData",value:function(e){this.data=e,this.textName.text=this.formatName(this.data.name,25),this.levePlayList.setData(new vt,!1),this.levePlayList.x=this.avaPlayList.x+(this.avaPlayList.width-this.levePlayList.width)/2,this.avaPlayList.beginLoad(this.data.thumb,1)}},{key:"chooseOk",value:function(){this.event.OK.dispatch()}},{key:"chooseCancle",value:function(){this.event.CANCLE.dispatch()}},{key:"destroy",value:function(){this.bgConfirm.destroy(),this.avaPlayList.destroy(),gc(yc(t.prototype),"destroy",this).call(this)}}])&&pc(n.prototype,i),o&&pc(n,o),t}();var bc=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.is_highlight=0,this.thumb="",this.created=0,this.is_owner=0,this.is_default=0,this.genre_id=0,this.songs="",this.price=0,this.is_general=0,this.name="",this.id=0,this.vip=0,this.is_solo_mode=0,this.updated=0,this.country_id=0,this.user=new vt,this.region="",this.arrSong=[],this.questions="",this.bet_id=0,this.purchased_count=0,this.description=""};function _c(e){return(_c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ec(e,t,n){return(Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cc(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Cc(e){return(Cc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kc(e,t){return(kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Oc=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Cc(t).call(this,game,null))||"object"!==_c(i)&&"function"!=typeof i?Pc(n):i).data=new bc,e.event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.bg=new Phaser.Button(game,0,0,"screen-dim"),e.addChild(e.bg),e.itemConfirm=new wc,e.itemConfirm.event.OK.add(e.chooseOk,Pc(Pc(e))),e.itemConfirm.event.CANCLE.add(e.chooseCancle,Pc(Pc(e))),e.itemConfirm.x=35*oe.instance().scale,e.itemConfirm.y=game.height+237*oe.instance().scale,e.addChild(e.itemConfirm),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kc(e,t)}(t,Je),n=t,(i=[{key:"setContent",value:function(e){this.itemConfirm.setContent(e)}},{key:"setData",value:function(e){this.data=Object.assign({},this.data,e),this.itemConfirm.setData(e),this.tweenItemPopup(this.itemConfirm,game.height-900*oe.instance().scale)}},{key:"chooseOk",value:function(){this.event.OK.dispatch(this.data)}},{key:"chooseCancle",value:function(){this.event.CANCLE.dispatch()}},{key:"destroy",value:function(){this.bg.destroy(),this.itemConfirm.destroy(),Ec(Cc(t.prototype),"destroy",this).call(this)}}])&&Sc(n.prototype,i),o&&Sc(n,o),t}();function Rc(e){return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Tc(e,t,n){return(Tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ic(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ic(e){return(Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ac(e,t){return(Ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Dc=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Ic(t).call(this,game,null))||"object"!==Rc(i)&&"function"!=typeof i?Lc(n):i).event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.data=null,e.positionPopup=oe.instance().positionPopup,LogConsole.log(e.positionPopup),e.bgConfirm=new ei,e.bgConfirm.setTextButton(de.instance().getData("105")),e.bgConfirm.event.OK.add(e.chooseOk,Lc(Lc(e))),e.bgConfirm.x=0,e.bgConfirm.y=74*oe.instance().scale,e.addChild(e.bgConfirm),e.avaPlayList=new ec,e.avaPlayList.setSize(200*oe.instance().scale,200*oe.instance().scale),e.avaPlayList.x=175*oe.instance().scale,e.avaPlayList.y=0,e.addChild(e.avaPlayList),e.textName=new Qt(e.positionPopup.popup_buy_playlist_text_name,""),e.textName.setTextBounds(0,0,560*oe.instance().scale,47*oe.instance().scale),e.addChild(e.textName),e.textContent=new Qt(e.positionPopup.popup_buy_playlist_text_content,de.instance().getData("106")),e.textContent.setTextBounds(0,0,560*oe.instance().scale,88*oe.instance().scale),e.addChild(e.textContent),e.levePlayList=new dc({},!1),e.levePlayList.y=266*oe.instance().scale,e.levePlayList.x=e.avaPlayList.x+(e.avaPlayList.width-e.levePlayList.width)/2,e.addChild(e.levePlayList),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ac(e,t)}(t,Je),n=t,(i=[{key:"setContent",value:function(e){this.textContent.text=e}},{key:"setData",value:function(e){this.data=e,this.textName.text=this.formatName(this.data.name,25),this.levePlayList.setData(new vt,!1),this.levePlayList.x=this.avaPlayList.x+(this.avaPlayList.width-this.levePlayList.width)/2,this.avaPlayList.beginLoad(this.data.thumb,1)}},{key:"chooseOk",value:function(){this.event.OK.dispatch()}},{key:"destroy",value:function(){this.bgConfirm.destroy(),this.avaPlayList.destroy(),Tc(Ic(t.prototype),"destroy",this).call(this)}}])&&xc(n.prototype,i),o&&xc(n,o),t}();function Gc(e){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nc(e,t,n){return(Nc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bc(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Bc(e){return(Bc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jc(e,t){return(jc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Fc=function(e){function t(e){var n,i,o,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=Bc(t).call(this,game,null))||"object"!==Gc(o)&&"function"!=typeof o?Uc(i):o).isSoloMode=a,n.playlist_id=e,n.data=new bc,n.event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},n.bg=new Phaser.Button(game,0,0,"screen-dim"),n.addChild(n.bg),n.itemConfirm=new Dc,n.itemConfirm.event.OK.add(n.chooseOk,Uc(Uc(n))),n.itemConfirm.x=35*oe.instance().scale,n.itemConfirm.y=game.height+237*oe.instance().scale,n.addChild(n.itemConfirm),n.addEvent(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jc(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){var e=this;if(!1===this.isSoloMode)_t.instance().getPlaylistById(this.playlist_id),_t.instance().event.get_data_playlist_complete.add(this.getDataPlayListComplete,this);else{console.log(oe.instance().soloModePlaylists);var t=oe.instance().soloModePlaylists.find(function(t){return t.id===e.playlist_id});this.setData(t)}}},{key:"removeEvent",value:function(){}},{key:"getDataPlayListComplete",value:function(e){_t.instance().event.get_data_playlist_complete.remove(this.getDataPlayListComplete,this),this.setData(e)}},{key:"getData",value:function(e){}},{key:"setContent",value:function(e){this.itemConfirm.setContent(e)}},{key:"setData",value:function(e){this.data=Object.assign({},this.data,e),this.itemConfirm.setData(e),this.tweenItemPopup(this.itemConfirm,game.height-810*oe.instance().scale)}},{key:"chooseOk",value:function(){this.event.OK.dispatch(this.data)}},{key:"destroy",value:function(){this.removeEvent(),this.bg.destroy(),this.itemConfirm.destroy(),Nc(Bc(t.prototype),"destroy",this).call(this)}}])&&Mc(n.prototype,i),o&&Mc(n,o),t}();function Zc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Hc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putInt("playlist_id",e),t}}],(n=null)&&Zc(t.prototype,n),i&&Zc(t,i),e}();function Vc(e){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wc(e,t){return!t||"object"!==Vc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qc(e){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kc(e,t){return(Kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zc=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Wc(this,qc(t).call(this,game,null))).maskAva=null,e.ava=new pn("songDetailSprites","ava-default"),e.addChild(e.ava),e.createMask(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kc(e,t)}(t,Phaser.Image),n=t,(i=[{key:"setSize",value:function(e,t){this.ava.setSize(e,t),this.createMask()}},{key:"setAvatar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.ava.beginLoad(e,t)}},{key:"createMask",value:function(){this.removeMask(),this.maskAva=new Phaser.Graphics(game,this.ava.x,this.ava.y),this.maskAva.beginFill(16711680,1),this.maskAva.drawCircle(this.ava.width/2,this.ava.height/2,this.ava.width-4*oe.instance().scale),this.maskAva.endFill(),this.addChild(this.maskAva),this.ava.mask=this.maskAva}},{key:"removeMask",value:function(){null!==this.maskAva&&(this.maskAva.clear(),this.maskAva.destroy(),this.maskAva=null)}},{key:"width",get:function(){return this.ava.width}},{key:"height",get:function(){return this.ava.height}}])&&Qc(n.prototype,i),o&&Qc(n,o),t}();function Yc(e){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jc(e){return(Jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $c(e,t){return($c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var th=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Jc(t).call(this,game,null))||"object"!==Yc(i)&&"function"!=typeof i?eh(n):i).event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.positionPopup=oe.instance().positionPopup,e.popup=new Kl,e.popup.setHeight(562*oe.instance().scale),e.popup.y=59*oe.instance().scale,e.popup.event.OK.add(e.chooseOk,eh(eh(e))),e.popup.event.CANCLE.add(e.chooseCancle,eh(eh(e))),e.addChild(e.popup),e.ava=new zc,e.ava.setSize(197*oe.instance().scale,197*oe.instance().scale),e.ava.x=185*oe.instance().scale,e.ava.y=0,e.addChild(e.ava),e.txtName=new Qt(e.positionPopup.popup_invite_friend_txt_name,""),e.txtName.setTextBounds(0,0,568*oe.instance().scale,47*oe.instance().scale),e.addChild(e.txtName),e.txtDes=new Qt(e.positionPopup.popup_invite_friend_txt_des,""),e.txtDes.setTextBounds(0,0,568*oe.instance().scale,77*oe.instance().scale),e.addChild(e.txtDes),e.txtMucCuoc=new Qt(e.positionPopup.popup_invite_friend_txt_muccuoc,de.instance().getData("43")),e.txtMucCuoc.setTextBounds(0,0,568*oe.instance().scale,35*oe.instance().scale),e.addChild(e.txtMucCuoc),e.btnMucCuoc=new qn(e.positionPopup.popup_invite_friend_btn_muccuoc,1e3),e.addChild(e.btnMucCuoc),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$c(e,t)}(t,Je),n=t,(i=[{key:"setAvatar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.ava.setAvatar(e,1),!0===t&&(this.frameVip=new Phaser.Sprite(game,this.ava.x+98,this.ava.y+101.5,"vipSource","Ava_Popup"),this.frameVip.anchor.set(.5),this.addChild(this.frameVip))}},{key:"setContent",value:function(e,t){this.txtName.text=e,this.txtDes.text=e+" "+de.instance().getData("118")+" "+t,this.txtDes.addColor("#FEAC4F",0),this.txtDes.addColor("#333333",e.length),this.txtDes.addColor("#FEAC4F",e.length+de.instance().getData("118").length+1)}},{key:"setMucCuoc",value:function(e){this.btnMucCuoc.setText(e)}},{key:"chooseOk",value:function(){this.event.OK.dispatch()}},{key:"chooseCancle",value:function(){this.event.CANCLE.dispatch()}}])&&Xc(n.prototype,i),o&&Xc(n,o),t}();function nh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ih=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataBlock={}}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.controllInvatation||(this.controllInvatation=new e),this.controllInvatation}}],(n=[{key:"getUserBlock",value:function(e){return!!this.dataBlock.hasOwnProperty(e)}},{key:"addBlock",value:function(e){this.dataBlock.hasOwnProperty(e)?this.removeIdTime(this.dataBlock[e].idTime):this.dataBlock[e]={},this.dataBlock[e].idTime=game.time.events.add(180*Phaser.Timer.SECOND,this.removeUserBlock,this,e)}},{key:"removeUserBlock",value:function(e){console.log("removeUserBlock : "+e),this.dataBlock.hasOwnProperty(e)&&delete this.dataBlock[e],console.log(this.dataBlock)}},{key:"removeIdTime",value:function(e){null!==this.idTime&&(game.time.events.remove(this.idTime),this.idTime=null)}}])&&nh(t.prototype,n),i&&nh(t,i),e}();function oh(e){return(oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ah(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sh(e){return(sh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rh(e,t){return(rh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ch=function(e){function t(e){var n,i,o,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=sh(t).call(this,game,null))||"object"!==oh(o)&&"function"!=typeof o?lh(i):o).invitation=e,n.cmd=a,n.event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal,OK_CMD:new Phaser.Signal,CANCLE_CMD:new Phaser.Signal},n.bg=new Phaser.Button(game,0,0,"screen-dim"),n.addChild(n.bg),n.popup=new th,n.popup.event.OK.add(n.chooseOk,lh(lh(n))),n.popup.event.CANCLE.add(n.chooseCancle,lh(lh(n))),n.popup.x=35*oe.instance().scale,n.popup.y=266*oe.instance().scale,n.addChild(n.popup),n.popup.y=game.height+237*oe.instance().scale,n.tweenItemPopup(n.popup,game.height-870*oe.instance().scale),!1===a?(n.setContent(e.inviter.getVariable("user_name").value,e.params.getInt("room_id")),n.popup.setAvatar(e.inviter.getVariable("avatar").value,e.getBool("inviter_vip")),n.popup.setMucCuoc(e.params.getInt("bet_place"))):(n.setContent(e.getUtfString("inviter_name"),e.getInt("room_id")),n.popup.setAvatar(e.getUtfString("inviter_avatar"),e.getBool("inviter_vip")),n.popup.setMucCuoc(e.getInt("bet_place"))),be.instance().playSound(be.popupinviteroom),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rh(e,t)}(t,Je),n=t,(i=[{key:"setContent",value:function(e,t){this.popup.setContent(e,t)}},{key:"chooseOk",value:function(){this.cmd?this.event.OK_CMD.dispatch(this.invitation.getInt("room_id"),this.invitation.getInt("bet_place")):this.event.OK.dispatch(this.invitation)}},{key:"chooseCancle",value:function(){this.cmd?(ih.instance().addBlock(this.invitation.getInt("inviter_id")),this.event.CANCLE_CMD.dispatch()):this.event.CANCLE.dispatch(this.invitation)}}])&&ah(n.prototype,i),o&&ah(n,o),t}();function hh(e){return(hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dh(e){return(dh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fh(e,t){return(fh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ph(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var gh=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=dh(t).call(this,game,null))||"object"!==hh(i)&&"function"!=typeof i?ph(n):i).url=a,e.event={OK:new Phaser.Signal},e.bg=new Phaser.Button(game,0,0,"screen-dim"),e.addChild(e.bg),e.popup=new ei(o),e.popup.x=35*oe.instance().scale,e.popup.y=325*oe.instance().scale,e.addChild(e.popup),e.popup.event.OK.add(e.chooseOk,ph(ph(e))),e.popup.y=game.height+237*oe.instance().scale,e.tweenItemPopup(e.popup,game.height-900*oe.instance().scale),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fh(e,t)}(t,Je),n=t,(i=[{key:"setContentButton",value:function(e){this.popup.setTextButton(e)}},{key:"setContent",value:function(e){this.popup.setContent(e)}},{key:"chooseOk",value:function(){""!==this.url&&("maintaince"==this.url?FH.instance().changeScreen(De.LOGIN):"onSearchFriend"==this.url||window.open(this.url)),Qe.instance().event.clickOKDialog.dispatch(this.url),this.event.OK.dispatch()}}])&&uh(n.prototype,i),o&&uh(n,o),t}();function yh(e){return(yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vh(e){return(vh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wh(e,t){return(wh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _h=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=vh(t).call(this,game,null))||"object"!==yh(i)&&"function"!=typeof i?bh(n):i).tryNo=a,e.event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.bg=new Phaser.Button(game,0,0,"screen-dim"),e.addChild(e.bg),e.popup=new Kl(o),e.popup.x=35*oe.instance().scale,e.addChild(e.popup),e.popup.event.OK.add(e.chooseOk,bh(bh(e))),e.popup.event.CANCLE.add(e.chooseCancle,bh(bh(e))),e.popup.y=game.height+237*oe.instance().scale,e.tweenItemPopup(e.popup,game.height-900*oe.instance().scale),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wh(e,t)}(t,Je),n=t,(i=[{key:"setContent",value:function(e){this.popup.setContent(e)}},{key:"chooseOk",value:function(){this.event.OK.dispatch()}},{key:"chooseCancle",value:function(){Qe.instance().event.chooseNoPopupConfirm.dispatch(this.tryNo),this.event.CANCLE.dispatch()}}])&&mh(n.prototype,i),o&&mh(n,o),t}();function Sh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Eh(e,t,n){return t&&Sh(e.prototype,t),n&&Sh(e,n),e}var Ch=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tween1=null,this.tween2=null,this.timeTween=200,this.ktComplete=!1,this.event={tweenComplete:new Phaser.Signal}}return Eh(e,null,[{key:"instance",value:function(){return this.switch||(this.switch=new e),this.switch}}]),Eh(e,[{key:"beginSwitch",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=0;this.removeAllTween(),this.ktComplete=!1,null!==t&&(t.x=n?-game.width:game.width,this.tween2=game.add.tween(t).to({x:0},this.timeTween,Phaser.Easing.Power1,!0,i),this.tween2.onComplete.add(this.onCompleteTween,this)),null!==e&&(o=n?game.width:-game.width,e.x=0,this.tween1=game.add.tween(e).to({x:o},this.timeTween,Phaser.Easing.Power1,!0,i),this.tween1.onComplete.add(this.onCompleteTween,this))}},{key:"onCompleteTween",value:function(){!1===this.ktComplete&&(this.ktComplete=!0,this.event.tweenComplete.dispatch(),this.removeAllTween())}},{key:"removeTween1",value:function(){null!==this.tween1&&(this.tween1.stop(),game.tweens.remove(this.tween1),this.tween1=null)}},{key:"removeTween2",value:function(){null!==this.tween2&&(this.tween2.stop(),game.tweens.remove(this.tween2),this.tween2=null)}},{key:"removeAllTween",value:function(){this.removeTween1(),this.removeTween2()}}]),e}();function kh(e){return(kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ph(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oh(e,t){return!t||"object"!==kh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rh(e){return(Rh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xh(e,t){return(xh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Th=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Oh(this,Rh(t).call(this,game))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.event={chooseSetting:new Phaser.Signal},e.name,e.btn,e.addLine(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xh(e,t)}(t,Z),n=t,o=[{key:"SETTING_GAME",get:function(){return"setting_game"}},{key:"SETTING_ACCOUNT",get:function(){return"setting_account"}},{key:"SETTING_PROFILE",get:function(){return"setting_profile"}},{key:"SETTING_NOTI",get:function(){return"setting_noti"}},{key:"SETTING_SECRET",get:function(){return"setting_secret"}},{key:"SETTING_LANGUAGE",get:function(){return"setting_language"}},{key:"SETTING_TERMS",get:function(){return"setting_terms"}},{key:"SETTING_FOLLOW",get:function(){return"setting_follow"}},{key:"GIFT_CODE",get:function(){return"gift_code"}},{key:"REPORT_BUG",get:function(){return"report_bug"}},{key:"SYNS_FB",get:function(){return"syns_fb"}},{key:"VERSION_PLATFORM",get:function(){return"version_platform"}}],(i=[{key:"addLine",value:function(){var e=new Bt(this.positionSetting.setting_item.line);this.addChild(e)}},{key:"addLanguage",value:function(){this.txtLanguage=new Qt(this.positionSetting.setting_item.config_language,de.instance().getData("304")),this.addChild(this.txtLanguage)}},{key:"addVersion",value:function(){"and"==oe.instance().platform?(this.txtVersion=new Qt(this.positionSetting.setting_item.config_version,"".concat(oe.instance().platform.toUpperCase()," ").concat(this.positionSetting.setting_item.config_version.text," ").concat(oe.VERSION_AND)),this.txtVersion.anchor.set(1,0),this.addChild(this.txtVersion)):(this.txtVersion=new Qt(this.positionSetting.setting_item.config_version,"".concat(oe.instance().platform.toUpperCase()," ").concat(this.positionSetting.setting_item.config_version.text," ").concat(oe.VERSION_IOS)),this.txtVersion.anchor.set(1,0),this.addChild(this.txtVersion))}},{key:"addType",value:function(e){this.type=e}},{key:"addNameSetting",value:function(e){this.name=new Qt(this.positionSetting.setting_item.name,e),this.addChild(this.name)}},{key:"addButtonRight",value:function(){this.btn=new _n(this.positionSetting.setting_item.button_right,this.clickButton,this),this.btn.anchor.set(.5),this.addChild(this.btn)}},{key:"addButtonTop",value:function(){}},{key:"addButtonBottom",value:function(){}},{key:"addFacebookIcon",value:function(){this.fbIcon=new Bt(this.positionSetting.setting_item.fb_icon),this.addChild(this.fbIcon),this.fbIcon.inputEnabled=!0,this.fbIcon.events.onInputUp.add(this.clickFBIcon,this)}},{key:"clickFBIcon",value:function(){be.instance().playSound(be.buttonclick),window.open("https://www.facebook.com/wazzat.sotaiamnhac","_system")}},{key:"addInstagramIcon",value:function(){this.instaIcon=new Bt(this.positionSetting.setting_item.insta_icon),this.addChild(this.instaIcon),this.instaIcon.inputEnabled=!0,this.instaIcon.events.onInputUp.add(this.clickInstaIcon,this)}},{key:"clickInstaIcon",value:function(){be.instance().playSound(be.buttonclick),window.open("https://www.instagram.com/wazzat.sotaiamnhac","_system")}},{key:"setDisactive",value:function(){this.alpha=.4}},{key:"clickButton",value:function(){this.event.chooseSetting.dispatch(this.type)}},{key:"height",get:function(){return 102*window.GameConfig.RESIZE}}])&&Ph(n.prototype,i),o&&Ph(n,o),t}();function Ih(e){return(Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ah(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Lh(e,t){return!t||"object"!==Ih(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dh(e){return(Dh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gh(e,t){return(Gh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Lh(this,Dh(t).call(this,game,0,0,"bg-playlist"))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.signalInputX=new Phaser.Signal,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gh(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addHeaderTab(this.positionSetting.header),this.addListSetting(),this.addEventExtension()}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.addButtonBack(e.btn_back),this.addTxtSetting(e.txt_setting)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerTab.addChild(this.btnBack)}},{key:"onBack",value:function(){var e=this;be.instance().playSound(be.buttonclick),this.signalInputX.dispatch();var t=game.add.tween(this).to({x:640*window.GameConfig.RESIZE},200,"Linear",!1);t.start(),t.onComplete.add(function(){e.destroy()},this)}},{key:"addTxtSetting",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("288"),e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addListSetting",value:function(){var e=new Phaser.Group(game,this);e.x=0,e.y=109*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0*window.GameConfig.RESIZE,0,640*window.GameConfig.RESIZE,(game.height-130)*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.settingGame,this.settingAccount,this.settingProfile,this.settingNoti,this.settingSecret,this.settingLanguage,this.settingTerms,this.settingFollow,this.reportBug,this.giftCode,this.synsFB,this.addSettingGame(),this.addSettingAccount(),this.addSettingProfile(),this.addSynsFB(),this.addSettingNoti(),this.addSettingSecret(),this.addSettingLanguage(),this.addSettingTerms(),this.addSettingFollow(),this.addReportBug(),this.addVersionPlatform(),""==oe.instance().tokenYanAccount&&this.addBtnLogout()}},{key:"addSettingGame",value:function(){this.settingGame=new Th,this.settingGame.addType(Th.SETTING_GAME),this.settingGame.event.chooseSetting.add(this.chooseSetting,this),this.settingGame.addNameSetting(de.instance().getData("276")),this.settingGame.addButtonRight(),this.listView.add(this.settingGame)}},{key:"addSettingAccount",value:function(){this.settingAccount=new Th,this.settingAccount.addType(Th.SETTING_ACCOUNT),this.settingAccount.event.chooseSetting.add(this.chooseSetting,this),this.settingAccount.addNameSetting(de.instance().getData("277")),this.settingAccount.addButtonRight(),this.listView.add(this.settingAccount)}},{key:"addSettingProfile",value:function(){this.settingProfile=new Th,this.settingProfile.addType(Th.SETTING_PROFILE),this.settingProfile.event.chooseSetting.add(this.chooseSetting,this),this.settingProfile.addNameSetting(de.instance().getData("278")),this.settingProfile.addButtonRight(),this.listView.add(this.settingProfile)}},{key:"addSettingNoti",value:function(){this.settingNoti=new Th,this.settingNoti.addType(Th.SETTING_NOTI),this.settingNoti.event.chooseSetting.add(this.chooseSetting,this),this.settingNoti.addNameSetting(de.instance().getData("279")),this.settingNoti.addButtonRight(),this.settingNoti.setDisactive(),this.listView.add(this.settingNoti)}},{key:"addSettingSecret",value:function(){this.settingSecret=new Th,this.settingSecret.addType(Th.SETTING_SECRET),this.settingSecret.event.chooseSetting.add(this.chooseSetting,this),this.settingSecret.addNameSetting(de.instance().getData("280")),this.settingSecret.addButtonRight(),this.settingSecret.setDisactive(),this.listView.add(this.settingSecret)}},{key:"addSettingLanguage",value:function(){this.settingLanguage=new Th,this.settingLanguage.addType(Th.SETTING_LANGUAGE),this.settingLanguage.event.chooseSetting.add(this.chooseSetting,this),this.settingLanguage.addNameSetting(de.instance().getData("281")),this.settingLanguage.addLanguage(),this.settingLanguage.addButtonRight(),this.settingLanguage.setDisactive(),this.listView.add(this.settingLanguage)}},{key:"addSettingTerms",value:function(){this.settingTerms=new Th,this.settingTerms.addType(Th.SETTING_TERMS),this.settingTerms.event.chooseSetting.add(this.chooseSetting,this),this.settingTerms.addNameSetting(de.instance().getData("282")),this.settingTerms.addButtonRight(),this.settingTerms.setDisactive(),this.listView.add(this.settingTerms)}},{key:"addSettingFollow",value:function(){this.settingFollow=new Th,this.settingFollow.addType(Th.SETTING_FOLLOW),this.settingFollow.event.chooseSetting.add(this.chooseSetting,this),this.settingFollow.addNameSetting(de.instance().getData("283")),this.settingFollow.addFacebookIcon(),this.settingFollow.addInstagramIcon(),this.listView.add(this.settingFollow)}},{key:"addReportBug",value:function(){this.reportBug=new Th,this.reportBug.addType(Th.REPORT_BUG),this.reportBug.event.chooseSetting.add(this.chooseSetting,this),this.reportBug.addNameSetting(de.instance().getData("284")),this.reportBug.addButtonRight(),this.reportBug.setDisactive(),this.listView.add(this.reportBug)}},{key:"addGiftCode",value:function(){this.giftCode=new Th,this.giftCode.addType(Th.GIFT_CODE),this.giftCode.event.chooseSetting.add(this.chooseSetting,this),this.giftCode.addNameSetting(de.instance().getData("285")),this.giftCode.addButtonRight(),this.listView.add(this.giftCode)}},{key:"addSynsFB",value:function(){this.synsFB=new Th,this.synsFB.addType(Th.SYNS_FB),this.synsFB.event.chooseSetting.add(this.chooseSetting,this),this.synsFB.addNameSetting(de.instance().getData("286")),this.synsFB.addButtonRight(),this.listView.add(this.synsFB)}},{key:"addVersionPlatform",value:function(){this.versionPlatform=new Th,this.versionPlatform.addType(Th.VERSION_PLATFORM),this.versionPlatform.event.chooseSetting.add(this.chooseSetting,this),this.versionPlatform.addNameSetting(de.instance().getData("287")),this.versionPlatform.addVersion(),this.versionPlatform.setDisactive(),this.listView.add(this.versionPlatform)}},{key:"chooseSetting",value:function(e){switch(e){case Th.SETTING_GAME:jC.instance().addSettingGameScreen();break;case Th.SETTING_ACCOUNT:jC.instance().addSettingAccountScreen();break;case Th.SETTING_PROFILE:jC.instance().addSettingProfileScreen();break;case Th.GIFT_CODE:jC.instance().addSettingGiftcode();break;case Th.SYNS_FB:this.synsWithFacebook()}}},{key:"addBtnLogout",value:function(){this.btnLogout=new Phaser.Button(game,this.positionSetting.btn_logout.x,game.height-oe.instance().STANDARD_HEIGHT+this.positionSetting.btn_logout.y,this.positionSetting.btn_logout.nameAtlas,this.onClickLogout,this,null,this.positionSetting.btn_logout.nameSprite),this.btnLogout.anchor.set(.5,0);var e=new Qt(this.positionSetting.txt_logout,de.instance().getData("303"));e.anchor.set(.5),this.btnLogout.addChild(e),this.listView.add(this.btnLogout)}},{key:"onClickLogout",value:function(){1==oe.instance().LOG_IN_BY_FB?Ri.instance().logout(function(e){"unknown"==e.status&&(oe.instance().LOG_IN_BY_FB=!1,dV.instance().sendLogout())}):dV.instance().sendLogout()}},{key:"synsWithFacebook",value:function(){!0!==oe.instance().LOG_IN_BY_FB?(ht.instance().showLoading(),"web"!==oe.instance().platform?(Fe.instance().login(),ht.instance().showLoading()):FB.login(function(e){if("unknown"==e.status&&alert("Đăng nhập lỗi, hãy đăng nhập lại! :'("),"connected"==e.status){var t=e.authResponse,n={userId:dV.instance().dataMySeft.user_id,fbId:t.userID,accessToken:t.accessToken};$.ajax({type:"POST",url:window.RESOURCE.fb_sync_api,data:n,dataType:"json",success:function(e){"Failed"==e.status?Ck.instance().addDialog(e.message):"OK"==e.status&&(FH.instance().changeScreen(De.LOGIN),jC.instance().removeAllItem(),Ck.instance().removeAllItem())},error:function(){Ck.instance().addDialog("Liên kết bị lỗi")}})}},{scope:"email, user_gender, user_friends"})):Ck.instance().addDialog("It's already login FB!")}},{key:"addEventExtension",value:function(){Fe.instance().event.loginComplete.add(this.loginFbMobileComplete,this),Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtension",value:function(){Fe.instance().event.loginComplete.remove(this.loginFbMobileComplete,this),Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"loginFbMobileComplete",value:function(e){var t={userId:dV.instance().dataMySeft.user_id,fbId:e.userID,accessToken:e.accessToken};$.ajax({type:"POST",url:window.RESOURCE.fb_sync_api,data:t,dataType:"json",success:function(e){"Failed"==e.status?Ck.instance().addDialog(e.message):"OK"==e.status&&(FH.instance().changeScreen(De.LOGIN),jC.instance().removeAllItem(),Ck.instance().removeAllItem())}})}},{key:"destroy",value:function(){for(this.removeEventExtension(),this.listView.removeAll(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&Ah(n.prototype,i),o&&Ah(n,o),t}();function Nh(e){return(Nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jh(e,t){return!t||"object"!==Nh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uh(e){return(Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fh(e,t){return(Fh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=jh(this,Uh(t).call(this,game))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.event={onSetting:new Phaser.Signal,offSetting:new Phaser.Signal},e.name,e.btnOn,e.btnOff,e.boolean=!1,e.addLine(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fh(e,t)}(t,Z),n=t,o=[{key:"SOUND_FX",get:function(){return"setting_game_soundfx"}},{key:"INVITE_PARTY",get:function(){return"setting_game_invite_party"}}],(i=[{key:"addType",value:function(e){this.type=e}},{key:"addNameSetting",value:function(e){this.name=new Qt(this.positionSetting.setting_item.name,e),this.addChild(this.name)}},{key:"addButton",value:function(e){this.boolean=e,1==e?(this.addButtonOn(1,1),this.addButtonOff(0,1)):(this.addButtonOn(0,1),this.addButtonOff(1,1)),this.txtBtnOn=new Qt(this.positionSetting.setting_item.txt_button_on,this.positionSetting.setting_item.txt_button_on.text),this.txtBtnOn.kill(),this.txtBtnOff=new Qt(this.positionSetting.setting_item.txt_button_off,this.positionSetting.setting_item.txt_button_off.text),this.txtBtnOff.kill(),this.addChild(this.txtBtnOn),this.addChild(this.txtBtnOff),1==this.boolean?this.txtBtnOn.revive():this.txtBtnOff.revive()}},{key:"addButtonOn",value:function(e,t){this.btnOn=new _n(this.positionSetting.setting_item.button_on,this.clickOn,this),this.btnOn.scale.set(e,t),this.addChild(this.btnOn)}},{key:"addButtonOff",value:function(e,t){this.btnOff=new _n(this.positionSetting.setting_item.button_off,this.clickOff,this),this.btnOff.anchor.set(1,0),this.btnOff.scale.set(e,t),this.addChild(this.btnOff)}},{key:"clickOn",value:function(){this.boolean=!1,this.event.offSetting.dispatch(),this.addTweenButton()}},{key:"clickOff",value:function(){this.boolean=!0,this.event.onSetting.dispatch(),this.addTweenButton()}},{key:"addTweenButton",value:function(){1==this.boolean?(this.txtBtnOn.revive(),this.txtBtnOff.kill(),game.add.tween(this.btnOn.scale).to({x:1,y:1},250,"Linear",!1).start(),game.add.tween(this.btnOff.scale).to({x:0,y:1},250,"Linear",!1).start()):(this.txtBtnOff.revive(),this.txtBtnOn.kill(),game.add.tween(this.btnOff.scale).to({x:1,y:1},250,"Linear",!1).start(),game.add.tween(this.btnOn.scale).to({x:0,y:1},250,"Linear",!1).start())}},{key:"setDisactive",value:function(){this.alpha=.4,this.inputEnabled=!1,this.btnOff.inputEnabled=!1,this.btnOn.inputEnabled=!1}},{key:"addLine",value:function(){var e=new Bt(this.positionSetting.setting_item.line);this.addChild(e)}},{key:"height",get:function(){return 102*window.GameConfig.RESIZE}}])&&Bh(n.prototype,i),o&&Bh(n,o),t}();function Hh(e){return(Hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qh(e,t){return!t||"object"!==Hh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wh(e){return(Wh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qh(e,t){return(qh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Qh(this,Wh(t).call(this,game,0,0,"bg-playlist"))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.signalInputX=new Phaser.Signal,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qh(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.addHeaderTab(this.positionSetting.header),this.addListSetting()}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.addButtonBack(e.btn_back),this.addTxtSetting(e.txt_setting_game)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerTab.addChild(this.btnBack)}},{key:"onBack",value:function(){var e=this;be.instance().playSound(be.buttonclick),this.signalInputX.dispatch();var t=game.add.tween(this).to({x:640*window.GameConfig.RESIZE},200,"Linear",!1);t.start(),t.onComplete.add(function(){e.destroy()},this)}},{key:"addTxtSetting",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("291"),e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addListSetting",value:function(){var e=new Phaser.Group(game,this);e.x=0,e.y=109*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0*window.GameConfig.RESIZE,0,640*window.GameConfig.RESIZE,885*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.settingSoundFx,this.settingInviteParty,this.addSettingSoundFx(),this.addSettingInviteParty()}},{key:"addSettingSoundFx",value:function(){this.settingSoundFx=new Zh,this.settingSoundFx.event.onSetting.add(this.onSettingSoundFX,this),this.settingSoundFx.event.offSetting.add(this.offSettingSoundFX,this),this.settingSoundFx.addType(Zh.SOUND_FX),this.settingSoundFx.addNameSetting(de.instance().getData("289")),this.settingSoundFx.addButton(window.GameConfig.SOUND_FX),this.listView.add(this.settingSoundFx)}},{key:"onSettingSoundFX",value:function(){window.GameConfig.SOUND_FX=!0}},{key:"offSettingSoundFX",value:function(){window.GameConfig.SOUND_FX=!1}},{key:"addSettingInviteParty",value:function(){this.settingInviteParty=new Zh,this.settingInviteParty.addType(Zh.INVITE_PARTY),this.settingInviteParty.addNameSetting(de.instance().getData("290")),this.settingInviteParty.addButton(!0),this.settingInviteParty.setDisactive(),this.listView.add(this.settingInviteParty)}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"destroy",value:function(){for(this.removeEventExtension(),this.listView.removeAll(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&Vh(n.prototype,i),o&&Vh(n,o),t}();function zh(e){return(zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xh(e,t){return!t||"object"!==zh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jh(e){return(Jh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $h(e,t){return($h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eu=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Xh(this,Jh(t).call(this,game))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.event={chooseSetting:new Phaser.Signal},e.name,e.btn,e.txtOnRight,e.addLine(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$h(e,t)}(t,Z),n=t,o=[{key:"SETTING_ACCOUNT_VIP",get:function(){return"setting_account_vip"}},{key:"SETTING_ACCOUNT_USERNAME",get:function(){return"setting_account_username"}},{key:"SETTING_ACCOUNT_EMAIL",get:function(){return"setting_account_email"}},{key:"SETTING_ACCOUNT_PASSWORD",get:function(){return"setting_account_password"}},{key:"SETTING_ACCOUNT_GENDER",get:function(){return"setting_account_gender"}}],(i=[{key:"addLine",value:function(){var e=new Bt(this.positionSetting.setting_item.line);this.addChild(e)}},{key:"addTxtOnright",value:function(e){this.txtOnRight=new Qt(this.positionSetting.setting_item.txt_on_right,e),this.txtOnRight.anchor.set(1,0),this.addChild(this.txtOnRight)}},{key:"addType",value:function(e){this.type=e}},{key:"addNameSetting",value:function(e){this.name=new Qt(this.positionSetting.setting_item.name,e),this.addChild(this.name)}},{key:"addButtonRight",value:function(){this.btn=new _n(this.positionSetting.setting_item.button_right,this.clickButton,this),this.btn.anchor.set(.5),this.addChild(this.btn)}},{key:"addButtonTop",value:function(){}},{key:"addButtonBottom",value:function(){}},{key:"setDisactive",value:function(){this.alpha=.4}},{key:"clickButton",value:function(){this.event.chooseSetting.dispatch(this.type)}},{key:"height",get:function(){return 102*window.GameConfig.RESIZE}}])&&Yh(n.prototype,i),o&&Yh(n,o),t}();function tu(e){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function iu(e){return(iu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ou(e,t){return(ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function au(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var su=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=iu(t).call(this,game))||"object"!==tu(i)&&"function"!=typeof i?au(n):i).event={choose_gender:new Phaser.Signal},e.positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.bgGenres=new _n(e.positionSetting.sort_play_list_bg_search_menu),e.bgGenres.height=120*oe.instance().scale,e.bgGenres.width=161*oe.instance().scale,e.addChild(e.bgGenres),e.arrSort=["MALE","FEMALE"];for(var o=10,a=0;a<e.arrSort.length;a++){var s=new qn(e.positionSetting.bg_tab_menu_select_item,e.arrSort[a],e.chooseItem,au(au(e)));s.name=a,s.y=o,s.x=10,o+=45,e.addChild(s)}return e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ou(e,t)}(t,Z),n=t,(i=[{key:"chooseItem",value:function(e){LogConsole.log("chooseItem : "+e.name),this.event.choose_gender.dispatch(e.name,this.arrSort[parseInt(e.name)])}}])&&nu(n.prototype,i),o&&nu(n,o),t}();function ru(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var lu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.coreUrl=window.RESOURCE.admin_domain,this.mainUrl="",this.method="",this.params={}}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.ajaxServer||(this.ajaxServer=new e),this.ajaxServer}},{key:"LIMIT_10",get:function(){return 20}},{key:"OFF_SET_0",get:function(){return 0}}],(n=[{key:"sendData",value:function(e){$.ajax({type:this.method,url:this.mainUrl,data:this.params,dataType:"JSON",success:function(t){e(t)},error:function(e){LogConsole.log(e),Ck.instance().addDialog("Lỗi"),ht.instance().hideLoading()}})}},{key:"countMessage",value:function(e){this.cleanData(),this.mainUrl="".concat(this.coreUrl,"api/countMessage"),this.params={user_id:e,token:oe.instance().token},this.method="GET"}},{key:"listConversation",value:function(e,t,n,i){this.cleanData(),this.mainUrl="".concat(this.coreUrl,"api/listConversation"),this.params={user_from:e,user_to:t,limit:n,offset:i,token:oe.instance().token},this.method="GET"}},{key:"listMessage",value:function(e,t,n){this.cleanData(),this.mainUrl="".concat(this.coreUrl,"api/getMessenger"),this.params={user_id:e,limit:t,offset:n,token:oe.instance().token},this.method="GET"}},{key:"sendMessage",value:function(e,t,n){this.cleanData(),this.mainUrl="".concat(this.coreUrl,"api/sendMessenger"),this.params={user_from:e,user_to:t,message:n,token:oe.instance().token},this.method="GET"}},{key:"getNotiSystem",value:function(e,t,n){this.cleanData(),this.mainUrl="".concat(this.coreUrl,"api/getNotification"),this.params={user_id:e,limit:t,offset:n,token:oe.instance().token},this.method="GET"}},{key:"seeNoticeSystem",value:function(e,t){this.cleanData(),this.mainUrl="".concat(this.coreUrl,"api/seenNotification"),this.params={user_id:e,message_id:t,token:oe.instance().token},this.method="GET"}},{key:"settingAccount",value:function(e,t,n,i,o){this.cleanData(),this.mainUrl="".concat(this.coreUrl,"api/settingGame"),this.params={user_id:e,user_name:t,gender:n,avatar:i,description:o,token:oe.instance().token},this.method="POST"}},{key:"cleanData",value:function(){this.coreUrl=window.RESOURCE.admin_domain,this.mainUrl="",this.method="",this.params={}}}])&&ru(t.prototype,n),i&&ru(t,i),e}();function cu(e){return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function uu(e,t){return!t||"object"!==cu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function du(e){return(du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fu(e,t){return(fu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pu=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=uu(this,du(t).call(this,game,0,0,"bg-playlist"))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.signalInputX=new Phaser.Signal,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fu(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){this.settingGender=null,this.addHeaderTab(this.positionSetting.header),this.addListSetting()}},{key:"addEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.add(this.onUpdateUserVars,this),Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.onUpdateUserVars,this),Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"onUpdateUserVars",value:function(){this.userName.txtOnRight.setText(dV.instance().dataMySeft.user_name),this.gender.txtOnRight.setText(dV.instance().dataMySeft.gender)}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.addButtonBack(e.btn_back),this.addTxtSetting(e.txt_setting_account)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerTab.addChild(this.btnBack)}},{key:"onBack",value:function(){var e=this;be.instance().playSound(be.buttonclick),this.signalInputX.dispatch();var t=game.add.tween(this).to({x:640*window.GameConfig.RESIZE},200,"Linear",!1);t.start(),t.onComplete.add(function(){e.destroy()},this)}},{key:"addTxtSetting",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("297"),e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addListSetting",value:function(){var e=new Phaser.Group(game,this);e.x=0,e.y=109*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0*window.GameConfig.RESIZE,0,640*window.GameConfig.RESIZE,885*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.vip,this.userName,this.gender,this.email,this.password,this.addVip(),this.addUserName(),this.addGender(),this.addEmail(),this.addPassword(),this.addEventExtension()}},{key:"addVip",value:function(){this.vip=new eu,this.vip.addNameSetting(de.instance().getData("292")),this.vip.addType(eu.SETTING_ACCOUNT_VIP),this.vip.addTxtOnright(de.instance().getData("298")),this.vip.event.chooseSetting.add(this.chooseSetting,this),this.listView.add(this.vip)}},{key:"addGender",value:function(){this.gender=new eu,this.gender.addNameSetting(de.instance().getData("294")),this.gender.addType(eu.SETTING_ACCOUNT_GENDER),this.gender.addButtonRight(),null!==dV.instance().socket.mySelf?this.gender.addTxtOnright(dV.instance().dataMySeft.gender):this.gender.addTxtOnright(de.instance().getData("298")),this.gender.event.chooseSetting.add(this.chooseSetting,this),this.listView.add(this.gender)}},{key:"addUserName",value:function(){this.userName=new eu,this.userName.addNameSetting(de.instance().getData("293")),this.userName.addType(eu.SETTING_ACCOUNT_USERNAME),this.userName.addButtonRight(),null!==dV.instance().socket.mySelf?this.userName.addTxtOnright(dV.instance().dataMySeft.user_name):this.userName.addTxtOnright(de.instance().getData("298")),this.userName.event.chooseSetting.add(this.chooseSetting,this),this.listView.add(this.userName)}},{key:"addEmail",value:function(){this.email=new eu,this.email.addNameSetting(de.instance().getData("295")),this.email.addType(eu.SETTING_ACCOUNT_EMAIL),this.email.addButtonRight(),this.email.addTxtOnright("anh******@gmail.com"),this.email.event.chooseSetting.add(this.chooseSetting,this),this.email.setDisactive(),this.listView.add(this.email)}},{key:"addPassword",value:function(){this.password=new eu,this.password.addNameSetting(de.instance().getData("296")),this.password.addType(eu.SETTING_ACCOUNT_PASSWORD),this.password.addButtonRight(),this.password.addTxtOnright("*********"),this.password.event.chooseSetting.add(this.chooseSetting,this),this.password.setDisactive(),this.listView.add(this.password)}},{key:"chooseSetting",value:function(e){switch(e){case eu.SETTING_ACCOUNT_USERNAME:jC.instance().addSettingAccountUserNameScreen();break;case eu.SETTING_ACCOUNT_GENDER:this.addSettingGender()}}},{key:"addSettingGender",value:function(){this.removeSettingGender(),this.settingGender=new su,this.settingGender.x=430,this.settingGender.y=360,this.settingGender.event.choose_gender.add(this.choosedGender,this),this.addChild(this.settingGender)}},{key:"removeSettingGender",value:function(){null!==this.settingGender&&(this.removeChild(this.settingGender),this.settingGender.destroy(),this.settingGender=null)}},{key:"choosedGender",value:function(e,t){this.settingGender.destroy(),lu.instance().settingAccount(dV.instance().socket.mySelf.getVariable("user_id").value,dV.instance().dataMySeft.user_name,t,null),lu.instance().sendData(this.onChangeGender.bind(this))}},{key:"onChangeGender",value:function(e){if("ok"==e.code){var t=[];t.push(new SFS2X.SFSUserVariable("gender",e.data.gender)),dV.instance().socket.send(new SFS2X.SetUserVariablesRequest(t)),dV.instance().dataMySeft.setGender(e.data.gender)}}},{key:"destroy",value:function(){for(this.listView.removeAll(),this.removeEventExtension(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&hu(n.prototype,i),o&&hu(n,o),t}();function gu(e){return(gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mu(e,t){return!t||"object"!==gu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vu(e){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wu(e,t){return(wu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bu=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=mu(this,vu(t).call(this,game,0,0,"bg-playlist"))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.signalInputX=new Phaser.Signal,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wu(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){null!==dV.instance().socket.mySelf?this.nameChange=dV.instance().dataMySeft.user_name:this.nameChange="NameXXX_XXX",this.addEventExtension(),this.addHeaderTab(this.positionSetting.header),this.txtSettingHead,this.boxText,this.txtBoxText,this.btnSave,this.tick,this.addTxtSettingHead(),this.addBoxText(),this.addTxtBoxText(),this.addBtnSave(),this.addTick()}},{key:"addTxtSettingHead",value:function(){this.txtSettingHead=new Qt(this.positionSetting.setting_account.txt_setting_head,this.positionSetting.setting_account.txt_setting_head.text),this.txtSettingHead.anchor.set(.5),this.addChild(this.txtSettingHead)}},{key:"addBoxText",value:function(){this.boxText=new _n(this.positionSetting.setting_account.box_text,this.clickBoxText,this),this.boxText.anchor.set(.5),this.addChild(this.boxText)}},{key:"addTxtBoxText",value:function(){this.txtBoxText=new Qt(this.positionSetting.setting_account.txt_box_text,this.nameChange),this.txtBoxText.anchor.set(.5),this.boxText.addChild(this.txtBoxText)}},{key:"addBtnSave",value:function(){this.btnSave=new _n(this.positionSetting.setting_account.btn_save,this.clickSave,this),this.btnSave.anchor.set(.5);var e=new Qt(this.positionSetting.setting_account.txt_btn_save,this.positionSetting.setting_account.txt_btn_save.text);e.anchor.set(.5),this.btnSave.addChild(e),this.addChild(this.btnSave)}},{key:"addTick",value:function(){this.tick=new Bt(this.positionSetting.setting_account.tick),this.boxText.addChild(this.tick)}},{key:"clickBoxText",value:function(){this.tick.kill(),this.inputKeyboard()}},{key:"inputKeyboard",value:function(){var e={maxLength:"",showTransparent:!0,placeholder:"Nhập tên thay đổi",isSearch:!1,typeInputText:"input",configText:{width:this.boxText.width-70,height:this.boxText.height-5,x:this.boxText.x-this.boxText.width/2,y:this.boxText.y-this.boxText.height/2}};Ir.instance().event.cancle.add(this.keyboardClose,this),Ir.instance().event.enter.add(this.keyboardDone,this),Ir.instance().event.submit.add(this.keyboardDone,this),Ir.instance().show(e),Ir.instance().setValue(this.nameChange)}},{key:"keyboardClose",value:function(){Ir.instance().event.cancle.remove(this.keyboardClose,this),Ir.instance().event.enter.remove(this.keyboardDone,this),Ir.instance().event.submit.remove(this.keyboardDone,this),Ir.instance().hide(),this.boxText.revive(),this.btnSave.revive()}},{key:"keyboardDone",value:function(){""!==this.nameChange&&""==Ir.instance().getValue()||(this.nameChange=Ir.instance().getValue(),LogConsole.log(this.nameChange)),this.changeTxtBoxText(),this.keyboardClose()}},{key:"changeTxtBoxText",value:function(){this.txtBoxText.setText(this.nameChange)}},{key:"clickSave",value:function(){this.keyboardDone(),this.nameChange==dV.instance().dataMySeft.user_name||(this.btnSave.kill(),lu.instance().settingAccount(dV.instance().socket.mySelf.getVariable("user_id").value,this.nameChange,dV.instance().socket.mySelf.getVariable("gender").value,null),lu.instance().sendData(this.onSendSettingDone.bind(this)))}},{key:"onSendSettingDone",value:function(e){if(LogConsole.log(e),this.btnSave.revive(),"ok"==e.code){this.tick.revive(),Ck.instance().addDialog("Đổi tên thành công");var t=[];t.push(new SFS2X.SFSUserVariable("user_name",this.nameChange)),dV.instance().socket.send(new SFS2X.SetUserVariablesRequest(t)),dV.instance().dataMySeft.setUserName(this.nameChange)}}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.addButtonBack(e.btn_back),this.addTxtSetting(e.txt_setting_account_username)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerTab.addChild(this.btnBack)}},{key:"onBack",value:function(){var e=this;be.instance().playSound(be.buttonclick),this.signalInputX.dispatch();var t=game.add.tween(this).to({x:640*window.GameConfig.RESIZE},200,"Linear",!1);t.start(),t.onComplete.add(function(){e.destroy()},this)}},{key:"addTxtSetting",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.text,e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"destroy",value:function(){for(Ir.instance().hide(),this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&yu(n.prototype,i),o&&yu(n,o),t}();var _u=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.login_id=0,this.gender="",this.ticket=0,this.login_type="",this.level=0,this.user_name="",this.all_time_high_score=0,this.last_login=0,this.created=0,this.heart_updated=0,this.active=0,this.avatar=0,this.experience_score=0,this.heart=0,this.support_item=0,this.diamond=0,this.weekly_high_score=0,this.id=0,this.is_online=!1,this.email="",this.count_login=0,this.vip=!1,this.support_item=0,this.level_title=""};function Su(e){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cu(e,t){return!t||"object"!==Su(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ku(e){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pu(e,t){return(Pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ou=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Cu(this,ku(t).call(this,game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite))).configsValue=n,i.initChild(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pu(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"addEvent",value:function(){ak.instance().event.buy_playlist.add(this.buyPlaylistDone,this)}},{key:"removeEvent",value:function(){ak.instance().event.buy_playlist.remove(this.buyPlaylistDone,this)}},{key:"getData",value:function(e){switch(e.cmd){case kt.SHOP_BUY_PLAYLIST_RESPONSE:this.signalInput.dispatch({isBuyDone:!0})}}},{key:"buyPlaylistDone",value:function(){this.signalInput.dispatch({isBuyDone:!0})}},{key:"initChild",value:function(){this.avaThumb=null,this.tabGem=null,this.txtPlaylist=null,this.txtGem=null,this.signalInput=new Phaser.Signal,this.inputEnabled=!0,this.txtNoHasPlaylist=null,this.addEvent()}},{key:"checkHasSuggestPlaylist",value:function(e,t){e?null==e.id?t(!1):t(!0):t(!1)}},{key:"addInput",value:function(e,t){this.removeEventInput(e,t),this.addEventInput(e,t),this.events.onInputUp.add(this.onClickSprite,this)}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}},{key:"onClickSprite",value:function(){if(be.instance().playSound(be.buttonclick),1==this.configsValue.isFree&&this.signalInput.dispatch({id:this.configsValue.id,isBuy:null}),0==this.configsValue.isFree){var e=new bc;e=Object.assign({},e,this.configsValue),jC.instance().buyItem(e)}}},{key:"addThumb",value:function(){this.thumb=new Phaser.Sprite(game,35*window.GameConfig.RESIZE,19*window.GameConfig.RESIZE,"songDetailSprites","Nhactre"),this.thumb.scale.set(105/165);var e=new Phaser.Graphics(game,0,0);e.beginFill(16777215),e.drawRoundedRect(35*window.GameConfig.RESIZE,19*window.GameConfig.RESIZE,105*window.GameConfig.RESIZE,105*window.GameConfig.RESIZE,20*window.GameConfig.RESIZE),this.addChild(e),this.addChild(this.thumb),this.thumb.mask=e}},{key:"addTextNoHasPlaylist",value:function(){this.txtNoHasPlaylist=new Phaser.Text(game,this.width/2*window.GameConfig.RESIZE,this.height/2*window.GameConfig.RESIZE,"BẠN ĐÃ ĐỦ HẾT PLAYLIST",{font:"GilroyBold",fill:"white",align:"center",fontSize:30}),this.txtNoHasPlaylist.anchor.set(.5),this.addChild(this.txtNoHasPlaylist)}},{key:"addTabGem",value:function(e,t){0==this.configsValue.isFree?(this.tabGem=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.addChild(this.tabGem)):1==this.configsValue.isFree&&(this.tabGem=new Phaser.Text(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,t.text,t.configs),this.tabGem.anchor.set(1,0),this.addChild(this.tabGem))}},{key:"addTxtPlaylist",value:function(e,t){this.txtPlaylist=new Phaser.Text(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,e,t.configs),this.addChild(this.txtPlaylist)}},{key:"addTxtGem",value:function(e,t){if(0==this.configsValue.isFree){this.txtGem=new Phaser.Text(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,e,t.configs);var n=new Bt(t.gem);this.tabGem.addChild(n),this.tabGem.addChild(this.txtGem)}}},{key:"beginLoadThumb",value:function(e){this.key=e,game.cache.checkImageKey(e)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(e))}},{key:"loadStart",value:function(){}},{key:"onLoad",value:function(){rn.instance().event.load_image_complate.remove(this.onLoad,this),game.cache.checkImageKey(this.key)&&this.thumb.loadTexture("".concat(this.key))}},{key:"destroy",value:function(){for(this.removeEvent();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}}])&&Eu(n.prototype,i),o&&Eu(n,o),t}();function Ru(e){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Tu(e,t){return!t||"object"!==Ru(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Iu(e,t,n){return(Iu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Au(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Au(e){return(Au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lu(e,t){return(Lu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Du=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Tu(this,Au(t).call(this,game))).positionMainConfig=JSON.parse(game.cache.getText("positionMainConfig")),e.signalBuyPlaylistDone=new Phaser.Signal,e.event={choosedPlaylist:new Phaser.Signal},e.friend=n,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lu(e,t)}(t,Z),n=t,(i=[{key:"afterGetPlaylistDone",value:function(e){this.playlist=e,null!=this.group&&null!=this.group||(this.group=new Phaser.Group(game),this.addChild(this.group))}},{key:"addSuggestPlaylist",value:function(){var e=this,t=new Ou(this.positionMainConfig.tab_recent,this.playlist);this.addChild(t),t.checkHasSuggestPlaylist(this.playlist,function(n){n?(t.addThumb(),t.beginLoadThumb(e.playlist.thumb),t.addTabGem(e.positionMainConfig.Tab_gem,e.positionMainConfig.txt_try_suggest_playlist_free),t.addTxtGem(e.playlist.price,e.positionMainConfig.txt_price_suggest_playlist),t.addTxtPlaylist(e.playlist.name,e.positionMainConfig.txt_suggest_playlist),t.addInput(e.onClickSuggestPlaylist,e)):e.destroy()})}},{key:"addOwnerPlaylist",value:function(){}},{key:"onClickSuggestPlaylist",value:function(e){LogConsole.log(e),e.isBuyDone?1==e.isBuyDone&&this.signalBuyPlaylistDone.dispatch():!0===e.isBuy?(LogConsole.log("true: ".concat(e.isBuy)),this.sendRequestBuyPlaylist(e.id)):!1===e.isBuy?LogConsole.log("false: ".concat(e.isBuy)):(this.questions=[],this.playlistId=e.id,this.playlistName=e.name,this.sendRequestChoosePlaylist(e.id))}},{key:"removeGroup",value:function(){null!==this.group&&this.group.destroy(),this.group=null}},{key:"sendRequestChoosePlaylist",value:function(e){this.event.choosedPlaylist.dispatch({id:e,name:this.playlist.name})}},{key:"sendRequestBuyPlaylist",value:function(e){var t=new SFS2X.SFSObject;t.putInt("playlist_id",e),dV.instance().sendData(ki.SHOP_BUY_PLAYLIST_REQUEST,t)}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}Iu(Au(t.prototype),"destroy",this).call(this)}}])&&xu(n.prototype,i),o&&xu(n,o),t}();function Gu(e){return(Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nu(e,t){return!t||"object"!==Gu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bu(e,t,n){return(Bu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ju(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ju(e){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uu(e,t){return(Uu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fu=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Nu(this,ju(t).call(this,game))).positionMainConfig=JSON.parse(game.cache.getText("positionMainConfig")),n.friend=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uu(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.signalBuyPlaylistDone=new Phaser.Signal,this.event={choosePlaylist:new Phaser.Signal,backScreen:new Phaser.Signal}}},{key:"addChallPlayListGroup",value:function(e,t){if(this.listView,this.addGroupChallPlaylist(),this.addTabHeaderChoosePlaylist(),this.addTextHeader(),this.addBtnBackToMenu(),this.getPlaylistSuggestPlaylist=new Du,this.getPlaylistSuggestPlaylist.event.choosedPlaylist.add(this.choosedSuggestPlaylist,this),this.getPlaylistSuggestPlaylist.afterGetPlaylistDone(t),this.getPlaylistSuggestPlaylist.signalBuyPlaylistDone.add(this.suggestPlaylistCallback,this),this.getPlaylistSuggestPlaylist.addSuggestPlaylist(),this.addChild(this.getPlaylistSuggestPlaylist),null!==t)if(null==t.id){(o=new Phaser.Group(game)).x=0,o.y=105*window.GameConfig.RESIZE,this.addChild(o);var n=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-381)*window.GameConfig.RESIZE);this.listView=new Ia(game,o,n,{direction:"y",overflow:100,padding:0,searchForClicks:!0})}else{(o=new Phaser.Group(game)).x=0,o.y=248*window.GameConfig.RESIZE,this.addChild(o);var i=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-381)*window.GameConfig.RESIZE);this.listView=new Ia(game,o,i,{direction:"y",overflow:100,padding:0,searchForClicks:!0})}else{var o;(o=new Phaser.Group(game)).x=0,o.y=105*window.GameConfig.RESIZE,this.addChild(o);var a=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-270)*window.GameConfig.RESIZE);this.listView=new Ia(game,o,a,{direction:"y",overflow:100,padding:0,searchForClicks:!0})}for(var s=0;s<e.length;s++)this.createTabPlaylist(e[s],s);this.loadLayerClassPlaylist()}},{key:"choosedSuggestPlaylist",value:function(e){this.event.choosePlaylist.dispatch(e)}},{key:"suggestPlaylistCallback",value:function(){this.signalBuyPlaylistDone.dispatch(),this.removeAllChild(),this.destroyAll(),this.destroy()}},{key:"addGroupChallPlaylist",value:function(){this.challPlaylistGroup=new Phaser.Group(game),this.addChild(this.challPlaylistGroup),this.challPlaylistGroup.position.x=0;var e=new Phaser.Button(game,0,0,"bg_create_room");this.addChild(e)}},{key:"addTabHeaderChoosePlaylist",value:function(){this.tab_chonplaylist=new Phaser.Sprite(game,this.positionMainConfig.tab_chonplaylist.x*window.GameConfig.RESIZE,this.positionMainConfig.tab_chonplaylist.y*window.GameConfig.RESIZE,this.positionMainConfig.tab_chonplaylist.nameAtlas,this.positionMainConfig.tab_chonplaylist.nameSprite),this.tab_chonplaylist.anchor.set(.5,0),this.addChild(this.tab_chonplaylist)}},{key:"addTextHeader",value:function(){var e=new Phaser.Text(game,this.positionMainConfig.txt_chonplaylist.x*window.GameConfig.RESIZE,this.positionMainConfig.txt_chonplaylist.y*window.GameConfig.RESIZE,de.instance().getData("251"),this.positionMainConfig.txt_chonplaylist.configs);e.anchor.set(.5),this.tab_chonplaylist.addChild(e)}},{key:"addBtnBackToMenu",value:function(){var e=this,t=new Phaser.Button(game,this.positionMainConfig.arrow_chonplaylist.x*window.GameConfig.RESIZE,this.positionMainConfig.arrow_chonplaylist.y*window.GameConfig.RESIZE,this.positionMainConfig.arrow_chonplaylist.nameAtlas,function(){},this,null,this.positionMainConfig.arrow_chonplaylist.nameSprite);t.anchor.set(.5),this.tab_chonplaylist.addChild(t),t.events.onInputDown.add(function(){be.instance().playSound(be.buttonclick),e.event.backScreen.dispatch(),e.destroyAll()})}},{key:"loadLayerClassPlaylist",value:function(){var e=new Phaser.Sprite(game,this.positionMainConfig.tab_gem_playlist.x*window.GameConfig.RESIZE,this.positionMainConfig.tab_gem_playlist.y*window.GameConfig.RESIZE,this.positionMainConfig.tab_gem_playlist.nameAtlas,this.positionMainConfig.tab_gem_playlist.nameSprite);e.anchor.set(1,0);var t=new Phaser.Sprite(game,this.positionMainConfig.gem_playlist.x*window.GameConfig.RESIZE,this.positionMainConfig.gem_playlist.y*window.GameConfig.RESIZE,this.positionMainConfig.gem_playlist.nameAtlas,this.positionMainConfig.gem_playlist.nameSprite);e.addChild(t);var n=new Phaser.Text(game,this.positionMainConfig.txt_gem_playlist.x*window.GameConfig.RESIZE,this.positionMainConfig.txt_gem_playlist.y*window.GameConfig.RESIZE,"".concat(dV.instance().socket.mySelf.getVariable("diamond").value),this.positionMainConfig.txt_gem_playlist.configs);e.addChild(n);var i=t.width+n.width;n.x=(e.width-i)/2-2.5-e.width,t.x=(e.width-i)/2+n.width+5-e.width,this.tab_chonplaylist.addChild(e);var o=new Phaser.Button(game,this.positionMainConfig.btn_change_playlist.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionMainConfig.btn_change_playlist.y)*window.GameConfig.RESIZE,this.positionMainConfig.btn_change_playlist.nameAtlas,this.onClickChangePlaylist,this,null,this.positionMainConfig.btn_change_playlist.nameSprite);o.anchor.set(.5),this.addChild(o);var a=new Phaser.Text(game,this.positionMainConfig.txt_change_playlist.x*window.GameConfig.RESIZE,this.positionMainConfig.txt_change_playlist.y*window.GameConfig.RESIZE,de.instance().getData("252"),this.positionMainConfig.txt_change_playlist.configs);a.anchor.set(.5),o.addChild(a)}},{key:"onClickChangePlaylist",value:function(){be.instance().playSound(be.buttonclick),jC.instance().addShop(0)}},{key:"createTabPlaylist",value:function(e,t){var n=this,i=new Phaser.Button(game,this.positionMainConfig.tab_playlist.x*window.GameConfig.RESIZE,(this.positionMainConfig.tab_playlist.y+193*t)*window.GameConfig.RESIZE,this.positionMainConfig.tab_playlist.nameAtlas,function(){},this,null,this.positionMainConfig.tab_playlist.nameSprite);i.anchor.set(.5,0);var o=new Phaser.Graphics(game,0,0);o.beginFill(16777215),o.drawRoundedRect(-283*window.GameConfig.RESIZE,5*window.GameConfig.RESIZE,105*window.GameConfig.RESIZE,105*window.GameConfig.RESIZE,10*window.GameConfig.RESIZE),i.addChild(o);var a=new jr(-283*window.GameConfig.RESIZE,5,"Nhactre",e.thumb,t);a.sprite.scale.set(105/165),a.sprite.mask=o,i.addChild(a.sprite);var s=new Phaser.Text(game,this.positionMainConfig.txt_playlist.x*window.GameConfig.RESIZE,this.positionMainConfig.txt_playlist.y*window.GameConfig.RESIZE,"".concat(e.name),this.positionMainConfig.txt_playlist.configs);i.addChild(s);var r=new dc;if(r.x=this.positionMainConfig.level_playlist.x*window.GameConfig.RESIZE,r.y=this.positionMainConfig.level_playlist.y*window.GameConfig.RESIZE,e.user&&r.setData(e.user),i.addChild(r),this.resizeTxtAndLevel(s,r),console.log("BDHSFBD"),console.log(e),!0===e.vip){var l=new Phaser.Sprite(game,-282.5,82,"vipSource","Lable_Vip");i.addChild(l)}i.id=e.id,i.name=e.name,this.addChild(i),i.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),n.event.choosePlaylist.dispatch({id:i.id,name:i.name})}),LogConsole.log(i.height),this.addLineUnder(i),this.listView.add(i)}},{key:"resizeTxtAndLevel",value:function(e,t){var n=(139-(e.height+t.height))/2;e.y=n-15*window.GameConfig.RESIZE,t.y=e.y+e.height+7}},{key:"addLineUnder",value:function(e){var t=new Bt(this.positionMainConfig.line_under);e.addChild(t)}},{key:"destroyAll",value:function(){this.removeAllChild(),this.destroy(),this.listView&&(this.listView.removeAll(),this.listView.y&&this.listView.reset(),this.listView.destroy())}},{key:"removeAllChild",value:function(){if(null!==this.children)for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}},{key:"destroy",value:function(){if(this.listView.removeAll(),this.listView.destroy(),null!==this.children){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}Bu(ju(t.prototype),"destroy",this).call(this)}}])&&Mu(n.prototype,i),o&&Mu(n,o),t}();function Zu(e){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vu(e,t){return!t||"object"!==Zu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qu(e,t,n){return(Qu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wu(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Wu(e){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qu(e,t){return(qu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ku=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vu(this,Wu(t).call(this,game))).friend=e,n.afterInit(),n.playlist={id:null,name:null},n.event={choosePlaylist:new Phaser.Signal,backScreen:new Phaser.Signal},n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qu(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.challPlaylistGroupMenuModule=null,this.sendRequestGetPlaylist()}},{key:"sendRequestGetPlaylist",value:function(){_t.instance().event.get_data_me_playlist_complete.add(this.getDataMePlaylistComplete,this),_t.instance().getPlaylistMe(!0)}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.add(this.choosePlaylistBack,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.remove(this.choosePlaylistBack,this)}},{key:"getDataMePlaylistComplete",value:function(e){_t.instance().event.get_data_me_playlist_complete.remove(this.getDataMePlaylistComplete,this),this.responseSQlPlaylistMe=e,this.loadPlaylistComplete()}},{key:"onExtensionResponse",value:function(e){}},{key:"loadPlaylistComplete",value:function(){var e=this;this.handleParamsOnGetPlaylistResponse(1,function(){e.addChallPlaylist(),ht.instance().hideLoading()})}},{key:"signalBuyPlaylistDone",value:function(){this.sendRequestGetPlaylist(this.friend.id)}},{key:"handleParamsOnGetPlaylistResponse",value:function(e,t){this.playlists=[],1==e&&(this.playlists=this.responseSQlPlaylistMe.playlist,this.playlists=this.playlists.sort(this.sortPlaylists),this.handleSuggestionPlaylist(),t())}},{key:"sortPlaylists",value:function(e,t){return e.user?e.user.updated>t.user.updated?-1:e.user.updated<t.user.updated?1:0:1}},{key:"handleSuggestionPlaylist",value:function(){null!==this.responseSQlPlaylistMe.suggestion_playlist?(this.suggestion_playlist=this.responseSQlPlaylistMe.suggestion_playlist,this.suggestion_playlist.isFree=Math.round(Math.random())):this.suggestion_playlist=null}},{key:"addChallPlaylist",value:function(){this.removeChallPlaylist(),this.challPlaylistGroupMenuModule=new Fu(this.friend),this.challPlaylistGroupMenuModule.signalBuyPlaylistDone.add(this.signalBuyPlaylistDone,this),this.challPlaylistGroupMenuModule.event.choosePlaylist.add(this.choosePlaylist,this),this.challPlaylistGroupMenuModule.event.backScreen.add(this.choosePlaylistBack,this),this.challPlaylistGroupMenuModule.addChallPlayListGroup(this.playlists,this.suggestion_playlist),this.addChild(this.challPlaylistGroupMenuModule)}},{key:"choosePlaylistBack",value:function(){this.event.backScreen.dispatch()}},{key:"choosePlaylist",value:function(e){this.playlist=e,this.event.choosePlaylist.dispatch(this.playlist)}},{key:"removeChallPlaylist",value:function(){null!==this.challPlaylistGroupMenuModule&&(this.removeChild(this.challPlaylistGroupMenuModule),this.challPlaylistGroupMenuModule.destroy(),this.challPlaylistGroupMenuModule=null)}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Qu(Wu(t.prototype),"destroy",this).call(this)}}])&&Hu(n.prototype,i),o&&Hu(n,o),t}();function zu(e){return(zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xu(e,t){return!t||"object"!==zu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ju(e){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $u(e,t){return($u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ed=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xu(this,Ju(t).call(this,game))).positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),n.configs=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$u(e,t)}(t,Z),n=t,(i=[{key:"setPosition",value:function(){this.x=this.positionPlayConfig.ava_fb.x*window.GameConfig.RESIZE}},{key:"afterInit",value:function(){this.maskAva,this.ava,this.frameAva,this.name,this.nameValue,this.scoreText,this.scoreValue,this.trueOrFalse}},{key:"setAva",value:function(e,t){this.keyAva=e,this.vip=t,this.addAva()}},{key:"setNameAndScore",value:function(e,t){this.nameValue=e,this.scoreValue=t,this.addNameAndScore()}},{key:"setLevelPlaylist",value:function(e){this.playlistLevel=new dc,this.playlistLevel.x=413*window.GameConfig.RESIZE,this.playlistLevel.y=this.positionPlayConfig.scoreText.y*window.GameConfig.RESIZE,this.playlistLevel.setData(e),this.addChild(this.playlistLevel)}},{key:"makeTweenAvaLoading",value:function(){game.add.tween(this).to({x:0},1200,Phaser.Easing.Exponential.Out,!1).start()}},{key:"makeTweenAva",value:function(){var e=this,t=game.add.tween(this.playlistLevel).to({y:310*window.GameConfig.RESIZE},300,"Linear",!1);t.start(),t.onComplete.add(function(){e.scoreText.revive()},this),this.scoreText.revive()}},{key:"makeDefaultScreenNotTween",value:function(){this.playlistLevel.y=310*window.GameConfig.RESIZE,this.scoreText.revive()}},{key:"addAva",value:function(){game.cache.checkImageKey(this.keyAva)?this.ava=new Phaser.Sprite(game,this.positionPlayConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionPlayConfig.ava_fb.y*window.GameConfig.RESIZE,this.keyAva):this.ava=new Phaser.Sprite(game,this.positionPlayConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionPlayConfig.ava_fb.y*window.GameConfig.RESIZE,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.ava.width=151,this.ava.height=151,this.maskAva=new Phaser.Graphics(game,0,0),this.maskAva.beginFill(16777215),this.maskAva.drawCircle(this.positionPlayConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionPlayConfig.ava_fb.y*window.GameConfig.RESIZE,151),this.maskAva.anchor.set(.5),this.ava.mask=this.maskAva,this.addChild(this.ava),this.addChild(this.maskAva),!0===this.vip?(this.frameAva=new Phaser.Sprite(game,this.positionPlayConfig.ava_fb.x*window.GameConfig.RESIZE,(this.positionPlayConfig.ava_fb.y+2)*window.GameConfig.RESIZE,this.positionPlayConfig.frame_ava_vip_right.nameAtlas,this.positionPlayConfig.frame_ava_vip_right.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.5*window.GameConfig.RESIZE),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,this.positionPlayConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionPlayConfig.ava_fb.y*window.GameConfig.RESIZE,this.positionPlayConfig.frame_ava_right.nameAtlas,this.positionPlayConfig.frame_ava_right.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.875*window.GameConfig.RESIZE),this.addChild(this.frameAva))}},{key:"addNameAndScore",value:function(){this.name=new Phaser.Text(game,this.positionPlayConfig.nameFB.x*window.GameConfig.RESIZE,this.positionPlayConfig.nameFB.y*window.GameConfig.RESIZE,this.nameValue,this.positionPlayConfig.nameFB.configs),this.name.anchor.set(.5),this.addChild(this.name),this.scoreText=new Phaser.Text(game,this.positionPlayConfig.scoreText.x*window.GameConfig.RESIZE,this.positionPlayConfig.scoreText.y*window.GameConfig.RESIZE,this.scoreValue,this.positionPlayConfig.scoreText.configs),this.scoreText.anchor.set(.5),this.scoreText.kill(),this.addChild(this.scoreText)}},{key:"setScore",value:function(e){var t=this,n=game.add.tween(this.scoreText).to({text:e},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.scoreText.text=parseInt(t.scoreText.text)},this)}},{key:"addDotOnline",value:function(){this.dotOnline=new Bt(this.positionPlayConfig.dot_online_right),this.addChild(this.dotOnline)}}])&&Yu(n.prototype,i),o&&Yu(n,o),t}();function td(e){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nd(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function id(e,t){return!t||"object"!==td(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function od(e){return(od=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ad(e,t){return(ad=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=id(this,od(t).call(this,game))).positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),n.configs=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ad(e,t)}(t,Z),n=t,(i=[{key:"setPosition",value:function(){this.x=-this.positionPlayConfig.avaOpp.x*window.GameConfig.RESIZE}},{key:"afterInit",value:function(){this.maskAva,this.ava,this.frameAva,this.name,this.nameValue,this.scoreText,this.scoreValue,this.trueOrFalse,this.playlistLevel}},{key:"setAva",value:function(e,t){this.keyAva=e,this.vip=t,this.addAva()}},{key:"setNameAndScore",value:function(e,t){this.nameValue=e,this.scoreValue=t,this.addNameAndScore()}},{key:"setLevelPlaylist",value:function(e){this.playlistLevel=new dc,this.playlistLevel.x=78*window.GameConfig.RESIZE,this.playlistLevel.y=this.positionPlayConfig.scoreTextOpp.y*window.GameConfig.RESIZE,this.playlistLevel.setData(e),this.addChild(this.playlistLevel)}},{key:"makeTweenAvaLoading",value:function(){game.add.tween(this).to({x:0},1200,Phaser.Easing.Exponential.Out,!1).start()}},{key:"makeTweenAva",value:function(){var e=this,t=game.add.tween(this.playlistLevel).to({y:310*window.GameConfig.RESIZE},300,"Linear",!1);t.start(),t.onComplete.add(function(){e.scoreText.revive()},this),this.scoreText.revive()}},{key:"makeDefaultScreenNotTween",value:function(){this.playlistLevel.y=310*window.GameConfig.RESIZE,this.scoreText.revive()}},{key:"addAva",value:function(){var e=this;this.ava=new jr(this.positionPlayConfig.avaOpp.x*window.GameConfig.RESIZE,this.positionPlayConfig.avaOpp.y*window.GameConfig.RESIZE,"ava-default",this.keyAva,1),this.ava.sprite.anchor.set(.5),this.ava.event.loadAvaDone.add(function(t){e.ava.sprite.width=151,e.ava.sprite.height=151},this),this.maskAva=new Phaser.Graphics(game,0,0),this.maskAva.beginFill(16777215),this.maskAva.drawCircle(this.positionPlayConfig.avaOpp.x*window.GameConfig.RESIZE,this.positionPlayConfig.avaOpp.y*window.GameConfig.RESIZE,151),this.maskAva.anchor.set(.5),this.ava.sprite.mask=this.maskAva,this.addChild(this.ava.sprite),this.addChild(this.maskAva),!0===this.vip?(this.frameAva=new Phaser.Sprite(game,this.positionPlayConfig.avaOpp.x*window.GameConfig.RESIZE,(this.positionPlayConfig.avaOpp.y+2)*window.GameConfig.RESIZE,this.positionPlayConfig.frame_ava_vip_left.nameAtlas,this.positionPlayConfig.frame_ava_vip_left.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.5*window.GameConfig.RESIZE),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,this.positionPlayConfig.avaOpp.x*window.GameConfig.RESIZE,this.positionPlayConfig.avaOpp.y*window.GameConfig.RESIZE,this.positionPlayConfig.frame_ava_left.nameAtlas,this.positionPlayConfig.frame_ava_left.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.875*window.GameConfig.RESIZE),this.addChild(this.frameAva))}},{key:"addNameAndScore",value:function(){this.name=new Phaser.Text(game,this.positionPlayConfig.nameFBOpp.x*window.GameConfig.RESIZE,this.positionPlayConfig.nameFBOpp.y*window.GameConfig.RESIZE,this.nameValue,this.positionPlayConfig.nameFBOpp.configs),this.name.anchor.set(.5),this.addChild(this.name),this.scoreText=new Phaser.Text(game,this.positionPlayConfig.scoreTextOpp.x*window.GameConfig.RESIZE,this.positionPlayConfig.scoreTextOpp.y*window.GameConfig.RESIZE,this.scoreValue,this.positionPlayConfig.scoreTextOpp.configs),this.scoreText.anchor.set(.5),this.scoreText.kill(),this.addChild(this.scoreText)}},{key:"setScore",value:function(e){var t=this,n=game.add.tween(this.scoreText).to({text:e},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.scoreText.text=parseInt(t.scoreText.text)},this)}},{key:"addDotOnline",value:function(){1==this.configs.is_online?this.dotOnline=new Bt(this.positionPlayConfig.dot_online_left):this.dotOnline=new Bt(this.positionPlayConfig.dot_offline_left),this.addChild(this.dotOnline)}}])&&nd(n.prototype,i),o&&nd(n,o),t}();function rd(e){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ld(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cd(e,t,n){return(cd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hd(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function hd(e){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ud(e,t){return(ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var fd=function(e){function t(e,n,i){var o,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,s=hd(t).call(this,game),(o=!s||"object"!==rd(s)&&"function"!=typeof s?dd(a):s).posX=e,o.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),o.sprite=new Phaser.Button(game,e+640,n,o.positionPlayConfig.answer_tab.nameAtlas,function(){},dd(dd(o)),null,o.positionPlayConfig.answer_tab.nameSprite),o.sprite.anchor=new Phaser.Point(.5,.5),o.sprite.update=o.update.bind(dd(dd(o))),o.sprite.inputEnabled=!0,o.configs=i,o.choosed=!1,o.addChild(o.sprite),o.event={answer:new Phaser.Signal},o.addTextToTabAnswer(),o.sprite.events.onInputDown.add(function(){o.choosed=!0,o.event.answer.dispatch(o.configs.index)}),o.addTweenSprite(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ud(e,t)}(t,Z),n=t,(i=[{key:"addTweenSprite",value:function(){var e=this;setTimeout(function(){game.add.tween(e.sprite).to({x:e.posX},300,Phaser.Easing.Power1,!1).start()},200*(this.configs.index+1))}},{key:"update",value:function(){}},{key:"displayScreenWhenAnswerRight",value:function(){this.sprite.inputEnabled=!1,this.answerText.addColor("#01c66a",0)}},{key:"displayScreenWhenAnswerWrong",value:function(){this.sprite.inputEnabled=!1,this.answerText.addColor("#ff0000",0)}},{key:"displayScreenWhenAnswerNotChoosed",value:function(){this.answerText.addColor("#ffffff",0),this.sprite.inputEnabled=!1,this.sprite.alpha=.15}},{key:"addTextToTabAnswer",value:function(){this.answerText=new Phaser.Text(game,0,0,"".concat(this.configs.questions[this.configs.countQuiz].answers[this.configs.index]),{font:"GilroyMedium",fill:"#000000",align:"center",fontSize:28,boundsAlignH:"center",boundsAlignV:"middle",wordWrap:!0,wordWrapWidth:500}),this.answerText.anchor.set(.5),this.sprite.value=this.configs.index+1,this.sprite.addChild(this.answerText)}},{key:"hide",value:function(){this.answerText.addColor("#ffffff",0),this.sprite.alpha=.15,this.sprite.inputEnabled=!1}},{key:"activeInput",value:function(){this.sprite.inputEnabled=!0}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),cd(hd(t.prototype),"destroy",this).call(this)}}])&&ld(n.prototype,i),o&&ld(n,o),t}();function pd(e){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gd(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yd(e,t,n){return(yd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=md(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function md(e){return(md=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vd(e,t){return(vd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var bd=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=md(t).call(this,game,null))||"object"!==pd(i)&&"function"!=typeof i?wd(n):i).trueAnswer=new Phaser.Sprite(game,0,0,"trueanswer"),e.trueAnswer.animations.add("trueanswer").onComplete.add(e.animTrueAnswerComplete,wd(wd(e))),e.trueAnswer.visible=!1,e.addChild(e.trueAnswer),e.failAnswer=new Phaser.Sprite(game,0,0,"failanswer"),e.failAnswer.animations.add("failanswer").onComplete.add(e.animFailAnswerComplete,wd(wd(e))),e.failAnswer.visible=!1,e.addChild(e.failAnswer),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vd(e,t)}(t,Je),n=t,(i=[{key:"setSize",value:function(e,t){this.trueAnswer.width=e,this.trueAnswer.height=t,this.failAnswer.width=e,this.failAnswer.height=t}},{key:"animTrueAnswerComplete",value:function(){this.trueAnswer.visible=!1}},{key:"animFailAnswerComplete",value:function(){this.failAnswer.visible=!1}},{key:"setTrueAnswer",value:function(){this.trueAnswer.visible=!0,this.trueAnswer.animations.play("trueanswer",20,!1)}},{key:"setFailtAnswer",value:function(){this.failAnswer.visible=!0,this.failAnswer.animations.play("failanswer",20,!1)}},{key:"destroy",value:function(){this.failAnswer.destroy(),this.trueAnswer.destroy(),yd(md(t.prototype),"destroy",this).call(this)}}])&&gd(n.prototype,i),o&&gd(n,o),t}();function _d(e){return(_d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sd(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ed(e,t){return!t||"object"!==_d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cd(e,t,n){return(Cd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kd(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kd(e){return(kd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pd(e,t){return(Pd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Od=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ed(this,kd(t).call(this,game,null))).tween=null,e.countTween=0,e.scaleMin=.8,e.arrStr=[de.instance().getData("32"),de.instance().getData("33"),de.instance().getData("34"),de.instance().getData("35"),de.instance().getData("36"),de.instance().getData("37"),de.instance().getData("38"),de.instance().getData("39"),de.instance().getData("40")],e.arrColor=["#0cdb69","#fff222","#0ff5f8"],e.arrSpriteStreak=["actionphaseanswer1","actionphaseanswer2","actionphaseanswer3"],e.arrSize=[70,70,65,70,70,65,70,60,70],e.action=null,e.lbText=new Qt(oe.instance().positionCreateRoom.text_action_phase_true_answer,""),e.lbText.anchor.set(.5),e.lbText.x=e.getWidth()/2,e.lbText.y=e.getHeight()/2,e.addChild(e.lbText),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pd(e,t)}(t,Je),n=t,(i=[{key:"addStreak",value:function(){this.removeStreak(),be.instance().playSound(be.streakanswer),this.action=new Phaser.Sprite(game,0,0,this.arrSpriteStreak[mt.instance().randomNumber(0,2)]),this.action.animations.add("actionphaseanswer"),this.action.animations.play("actionphaseanswer",30),this.action.x=(this.getWidth()-this.action.width)/2,this.action.y=(this.getHeight()-this.action.height)/2,this.addChildAt(this.action,0)}},{key:"removeStreak",value:function(){null!==this.action&&(this.removeChild(this.action),this.action.destroy(),this.action=null)}},{key:"getWidth",value:function(){return 280}},{key:"getHeight",value:function(){return 280}},{key:"setStreak",value:function(e){(e-=1)<0&&(e=0),e>this.arrStr.length-1&&(e=this.arrStr.length-1),this.countTween=0,this.scaleMin=.8,this.addStreak();var t={fontSize:this.arrSize[e],fill:this.arrColor[mt.instance().randomNumber(0,2)]};this.bounces=100,this.lbText.scale.set(0),this.lbText.changeStyle(t),this.lbText.text=this.arrStr[e].toUpperCase(),this.beginTween(),this.removeIdTime(),this.idTime=game.time.events.add(1.5*Phaser.Timer.SECOND,this.setDefault,this)}},{key:"beginTween",value:function(){this.removeTween(),this.countTween++,1===this.countTween?this.tween=game.add.tween(this.lbText.scale).to({x:1,y:1},150,Phaser.Easing.Sinusoidal.InOut,!0):this.tween=game.add.tween(this.lbText.scale).to({x:1,y:1},this.bounces,Phaser.Easing.Sinusoidal.InOut,!0),this.tween.onComplete.add(this.onCompleteTween,this),this.bounces+=50}},{key:"onCompleteTween",value:function(){this.removeTween(),this.countTween<2&&(this.tween=game.add.tween(this.lbText.scale).to({x:this.scaleMin,y:this.scaleMin},this.bounces,Phaser.Easing.Sinusoidal.InOut,!0),this.tween.onComplete.add(this.beginTween,this),this.bounces+=50,this.scaleMin+=.1)}},{key:"removeTween",value:function(){null!==this.tween&&(game.tweens.remove(this.tween),this.tween=null)}},{key:"removeIdTime",value:function(){null!==this.idTime&&game.time.events.remove(this.idTime)}},{key:"setDefault",value:function(){this.removeIdTime(),this.removeStreak(),this.lbText.text=""}},{key:"destroy",value:function(){this.arrStr.length=0,this.arrColor.length=0,this.arrSpriteStreak.length=0,this.arrSize.length=0,this.setDefault(),Cd(kd(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.getWidth()}}])&&Sd(n.prototype,i),o&&Sd(n,o),t}();function Rd(e){return(Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xd(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Td(e,t){return!t||"object"!==Rd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Id(e,t,n){return(Id="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ad(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ad(e){return(Ad=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ld(e,t){return(Ld=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dd=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Td(this,Ad(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),e.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.event={resultGame:new Phaser.Signal},e.checkUseSpt=!1,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ld(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.addScreenLoadTurnBase()}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"addScreenLoadTurnBase",value:function(){this.score=0,this.scoreOpp=0,this.countQuiz=0,this.correctList=[],this.wrongList=[],this.streak=1,this.answers=[],this.result,this.bg=new Phaser.Sprite(game,0,0,"bg_create_room"),this.addChild(this.bg);var e=new Bt(this.positionPlayConfig.line_top);this.addChild(e),this.loadScreenPlayChallenged("Lượt tiếp"),this.addNamePlaylistAndTextLoading(),this.addActionPhase()}},{key:"addNamePlaylistAndTextLoading",value:function(){this.namePlaylist=new Phaser.Text(game,this.positionPlayConfig.namePlaylist.x*window.GameConfig.RESIZE,(this.positionPlayConfig.namePlaylist.y+80)*window.GameConfig.RESIZE,this.playlist.name,this.positionPlayConfig.namePlaylist.configs),this.namePlaylist.anchor.set(.5),this.addChild(this.namePlaylist),game.add.tween(this.namePlaylist).to({y:this.positionPlayConfig.namePlaylist.y*window.GameConfig.RESIZE},300,Phaser.Easing.Linear.Out,!1).start(),this.loadingAnim=new ot,this.addChild(this.loadingAnim)}},{key:"addActionPhase",value:function(){this.actionPhase=new Od,this.actionPhase.position.x=(this.game.width-this.actionPhase.width)/2,this.addChild(this.actionPhase)}},{key:"loadScreenPlayChallenged",value:function(e){var t=new Phaser.Sprite(game,this.positionPlayConfig.versus.x*window.GameConfig.RESIZE,this.positionPlayConfig.versus.y*window.GameConfig.RESIZE,this.positionPlayConfig.versus.nameAtlas,this.positionPlayConfig.versus.nameSprite);t.anchor.set(.5);var n=new Phaser.Text(game,this.positionPlayConfig.txt_versus.x*window.GameConfig.RESIZE,this.positionPlayConfig.txt_versus.y*window.GameConfig.RESIZE,this.positionPlayConfig.txt_versus.text,this.positionPlayConfig.txt_versus.configs);n.anchor.set(.5),t.addChild(n),t.scale.set(.1),this.addChild(t),game.add.tween(t.scale).to({x:1,y:1},400,"Linear").start(),this.UserSpriteRight=new ed,this.UserSpriteRight.setAva("ava_fb",dV.instance().dataMySeft.vip),this.UserSpriteRight.setPosition(),this.UserSpriteRight.setNameAndScore("You",this.score),this.UserSpriteRight.setLevelPlaylist(this.user_playlist_mapping),this.UserSpriteRight.addDotOnline(),this.addChild(this.UserSpriteRight),this.UserSpriteRight.makeTweenAvaLoading(),this.trueOrFalseUser=new bd,this.trueOrFalseUser.setSize(330*window.GameConfig.RESIZE,330*window.GameConfig.RESIZE),this.trueOrFalseUser.x=320*window.GameConfig.RESIZE,this.trueOrFalseUser.y=-25*window.GameConfig.RESIZE,this.addChild(this.trueOrFalseUser),this.UserSpriteLeft=new sd(this.opponent),this.UserSpriteLeft.setAva(this.opponent.avatar,this.opponent.vip),this.UserSpriteLeft.setPosition(),this.UserSpriteLeft.setNameAndScore(this.opponent.userName,e),this.UserSpriteLeft.setLevelPlaylist(this.opponent_playlist_mapping),this.UserSpriteLeft.addDotOnline(),this.addChild(this.UserSpriteLeft),this.trueOrFalseOpp=new bd,this.trueOrFalseOpp.setSize(330*window.GameConfig.RESIZE,330*window.GameConfig.RESIZE),this.trueOrFalseOpp.x=-10*window.GameConfig.RESIZE,this.trueOrFalseOpp.y=-25*window.GameConfig.RESIZE,this.addChild(this.trueOrFalseOpp),this.UserSpriteLeft.makeTweenAvaLoading(),this.loadAfter()}},{key:"loadAfter",value:function(){for(var e=[],t=0;t<5;t++)e.push(this.questions[t].songEntity.fileUrl);rl.instance().loadSoundArray(e),rl.instance().event.loadComplete.add(this.loadComplete,this)}},{key:"setData",value:function(e,t,n,i,o){this.questions=e,this.opponent=t,this.user_playlist_mapping=n,this.opponent_playlist_mapping=i,this.playlist=o}},{key:"loadComplete",value:function(){LogConsole.log("load complete"),this.loadingAnim.destroy(),this.makeTweenToPlay()}},{key:"loadStart",value:function(){}},{key:"makeTweenToPlay",value:function(){0==this.countQuiz&&(this.UserSpriteLeft.makeTweenAva(),this.UserSpriteRight.makeTweenAva()),this.addBtnRemoveAnswer(),this.createGamePlayChallenged()}},{key:"createGamePlayChallenged",value:function(){this.timeCounter=game.time.create(),0==this.countQuiz?this.createLoadingScreenAfterStart():this.displayAnswering()}},{key:"addCircleNormal",value:function(){for(var e=this,t=function(t){0==e.countQuiz&&setTimeout(function(){var n=new Phaser.Sprite(game,(e.positionPlayConfig.circleNormal.x+62*t)*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+e.positionPlayConfig.circleNormal.y+50)*window.GameConfig.RESIZE,e.positionPlayConfig.circleNormal.nameAtlas,e.positionPlayConfig.circleNormal.nameSprite);n.anchor.set(.5),game.add.tween(n).to({y:(game.height-oe.instance().STANDARD_HEIGHT+e.positionPlayConfig.circleNormal.y)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1).start(),e.addChild(n)},50*t)},n=0;n<5;n++)t(n)}},{key:"addCorrectListSprites",value:function(){for(var e=0;e<this.correctList.length;e++){var t=new Phaser.Sprite(game,(this.positionPlayConfig.circleWhite.x+62*this.correctList[e].countQuiz)*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.circleWhite.y)*window.GameConfig.RESIZE,this.positionPlayConfig.circleWhite.nameAtlas,this.positionPlayConfig.circleWhite.nameSprite);t.anchor.set(.5),this.addChild(t);var n=new Phaser.Text(game,0,3*window.GameConfig.RESIZE,this.correctList[e].time.toFixed(1),{font:"GilroyBold",fontSize:15});n.anchor.set(.5),t.addChild(n)}}},{key:"addWrongListSprites",value:function(){for(var e=0;e<this.wrongList.length;e++){var t=new Phaser.Sprite(game,(this.positionPlayConfig.circleWhite.x+62*this.wrongList[e])*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.circleWhite.y)*window.GameConfig.RESIZE,this.positionPlayConfig.circleWhite.nameAtlas,this.positionPlayConfig.circleWhite.nameSprite);t.anchor.set(.5),this.addChild(t);var n=new Phaser.Sprite(game,0,0,this.positionPlayConfig.wrongMini.nameAtlas,this.positionPlayConfig.wrongMini.nameSprite);n.anchor.set(.5),t.addChild(n)}}},{key:"createLoadingScreenAfterStart",value:function(){var e=this,t=game.add.audio("beep_audio"),n=new Phaser.Text(game,this.positionPlayConfig.countdownNumber.x*window.GameConfig.RESIZE,(this.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,"3",this.positionPlayConfig.countdownNumber.configs);n.anchor.set(.5),this.addChild(n);var i=game.add.tween(n).to({y:this.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,n.setText("2");var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,n.setText("1");var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){He.instance().logEvent(He.pro_quiz_start_turnbase),n.setText(de.instance().getData("270")),n.scale.set(.5),n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE;var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),i.onComplete.add(function(){n.destroy(),t.destroy(),e.addCircleNormal(),e.displayAnswering()})})})})}},{key:"displayAnswering",value:function(){var e=this;this.namePlaylist.destroy(),this.btn_remove_answer.revive(),rl.instance().playsound(this.questions[this.countQuiz].songEntity.fileUrl),this.timeTweenBegin=game.time.events.add(.5*Phaser.Timer.SECOND,function(){e.spriteTime=new Phaser.Sprite(game,0,(game.height-746)*window.GameConfig.RESIZE,"otherSprites","tween-time"),e.spriteTime.anchor.set(0,.5),e.addChild(e.spriteTime),e.tweenSpriteTime=game.add.tween(e.spriteTime.scale).to({x:70,y:1},1e4,"Linear"),e.createFourAnswer(),e.timeTweenStart=game.time.events.add(.2*Phaser.Timer.SECOND,function(){e.tweenSpriteTime.start(),e.timeCounter.start()},e),e.btn_remove_answer.inputEnabled=!0,e.btn_remove_answer.alpha=1,e.tweenSpriteTime.onComplete.add(function(){})})}},{key:"activeAnswer",value:function(){this.answerA.activeInput(),this.answerB.activeInput(),this.answerC.activeInput(),this.answerD.activeInput()}},{key:"addBtnRemoveAnswer",value:function(){this.btn_remove_answer=new Phaser.Button(game,this.positionPlayConfig.btn_remove_answer.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.btn_remove_answer.y)*window.GameConfig.RESIZE,this.positionPlayConfig.btn_remove_answer.nameAtlas,function(){},this,null,this.positionPlayConfig.btn_remove_answer.nameSprite),this.btn_remove_answer.anchor.set(.5),this.btn_remove_answer.kill();var e=new Phaser.Text(game,this.positionPlayConfig.txt_remove_answer.x*window.GameConfig.RESIZE,this.positionPlayConfig.txt_remove_answer.y*window.GameConfig.RESIZE,de.instance().getData("271"),this.positionPlayConfig.txt_remove_answer.configs);e.anchor.set(.5);var t=new Qt(this.positionPlayConfig.txt_dis_one,this.positionPlayConfig.txt_dis_one.text);t.anchor.set(.5),t.x=e.x+e.width/2+15,this.btn_remove_answer.addChild(t);var n=new Phaser.Sprite(game,this.positionPlayConfig.diamond_remove_answer.x*window.GameConfig.RESIZE,this.positionPlayConfig.diamond_remove_answer.y*window.GameConfig.RESIZE,this.positionPlayConfig.diamond_remove_answer.nameAtlas,this.positionPlayConfig.diamond_remove_answer.nameSprite);n.anchor.set(1,.5);var i=new Bt(this.positionPlayConfig.mic_so_luong);i.anchor.set(.5),this.countMic=dV.instance().socket.mySelf.getVariable("support_item").value,this.numberOfSptItem=new Qt(this.positionPlayConfig.number_mic_so_luong,dV.instance().socket.mySelf.getVariable("support_item").value),this.numberOfSptItem.anchor.set(.5),i.addChild(this.numberOfSptItem),this.btn_remove_answer.addChild(i),this.btn_remove_answer.addChild(n),this.btn_remove_answer.addChild(e),this.btn_remove_answer.inputEnabled=!1,this.btn_remove_answer.events.onInputDown.add(this.sendRemoveAnswer,this),this.addChild(this.btn_remove_answer)}},{key:"removeAnswer",value:function(){this.countMic--,this.numberOfSptItem.setText(this.countMic),this.btn_remove_answer.inputEnabled=!1,this.btn_remove_answer.alpha=.5,Gl.getTwoOfFourAnswer(this.answerA,this.answerB,this.answerC,this.answerD,this.questions[this.countQuiz])}},{key:"sendRemoveAnswer",value:function(){this.btn_remove_answer.inputEnabled=!1,be.instance().playSound(be.buttonclick),0==this.checkUseSpt&&(dV.instance().dataMySeft.support_item>0?dV.instance().sendData(ki.SUPPORT_REQUEST,null):jC.instance().addDialog("Bạn không đủ Míc"))}},{key:"createFourAnswer",value:function(){for(var e=0;e<4;e++)0==e&&(this.answerA=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerA.event.answer.add(this.updateOnClickAnswer,this),this.addChild(this.answerA)),1==e&&(this.answerB=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerB.event.answer.add(this.updateOnClickAnswer,this),this.addChild(this.answerB)),2==e&&(this.answerC=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerC.event.answer.add(this.updateOnClickAnswer,this),this.addChild(this.answerC)),3==e&&(this.answerD=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerD.event.answer.add(this.updateOnClickAnswer,this),this.addChild(this.answerD))}},{key:"updateOnClickAnswer",value:function(e){if(this.answerA.sprite.inputEnabled=!1,this.answerB.sprite.inputEnabled=!1,this.answerC.sprite.inputEnabled=!1,this.answerD.sprite.inputEnabled=!1,this.answered=e,LogConsole.log(this.questions),LogConsole.log(e),e+1==this.questions[this.countQuiz].correctAnswer){if(this.setActionPhaseOnCorrect(),this.setTrueAva(),this.answeredResult=!0,this.timeCounter.ms/1e3>10)this.score+=Math.floor(100*Math.pow(1,(this.streak-1)/4)),this.correctList.push({countQuiz:this.countQuiz,time:10});else{var t=parseFloat((this.timeCounter.ms/1e3).toFixed(1));this.score+=Math.floor(100*(11-t)*Math.pow(11-t,(this.streak-1)/4)),this.correctList.push({countQuiz:this.countQuiz,time:t})}this.setScore(this.score),_t.instance().updateExpPlaylist(this.playlist.id)}else this.setFalseAva(),this.answeredResult=!1,this.wrongList.push(this.countQuiz);for(var n=0;n<4;n++)0==n&&this.setTrueFalseTabAnswer(this.answerA,n),1==n&&this.setTrueFalseTabAnswer(this.answerB,n),2==n&&this.setTrueFalseTabAnswer(this.answerC,n),3==n&&this.setTrueFalseTabAnswer(this.answerD,n);this.pushResultAnswer(),this.addCorrectListSprites(),this.addWrongListSprites(),this.timeNextQuestion=game.time.events.add(1*Phaser.Timer.SECOND,this.resetQuestion,this)}},{key:"setActionPhaseOnCorrect",value:function(){this.questions[this.countQuiz].correctAnswer>2?this.actionPhase.position.y=game.height-636:this.actionPhase.position.y=game.height-416,this.actionPhase.setStreak(this.streak),this.addChild(this.actionPhase)}},{key:"pushResultAnswer",value:function(){var e="INCORRECT";if(1==this.answeredResult&&(e="CORRECT"),this.timeCounter.ms/1e3>10)this.answers.push({answer_time:10,result:e,answer:this.answered+1,streak:this.streak,question_id:this.questions[this.countQuiz].id,created:Date.now(),index:0});else{var t=parseFloat((this.timeCounter.ms/1e3).toFixed(1));this.answers.push({answer_time:t,result:e,answer:this.answered+1,streak:this.streak,question_id:this.questions[this.countQuiz].id,created:Date.now(),index:0})}}},{key:"removeTimeNextQuestion",value:function(){null!==this.timeNextQuestion&&game.time.events.remove(this.timeNextQuestion)}},{key:"resetQuestion",value:function(){this.removeTimeNextQuestion(),this.tweenSpriteTime.stop(),this.timeCounter.stop(),this.actionPhase.setDefault(),this.spriteTime.destroy(),this.timeCounter.destroy(),this.checkUseSpt=!1,this.answerA.destroy(),this.answerB.destroy(),this.answerC.destroy(),this.answerD.destroy(),1==this.answeredResult?this.streak++:this.streak=1,this.countQuiz<4?(this.countQuiz+=1,this.createGamePlayChallenged()):(rl.instance().removeSound(),this.result={answers:this.answers,score:this.score,opponent_id:this.opponent.id,playlist_id:this.playlist.id},this.event.resultGame.dispatch(this.result))}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.SUPPORT_RESPONSE&&"OK"==e.params.getUtfString("status")&&this.removeAnswer()}},{key:"setTrueFalseTabAnswer",value:function(e,t){t==this.answered?t==this.questions[this.countQuiz].correctAnswer-1?e.displayScreenWhenAnswerRight():e.displayScreenWhenAnswerWrong():t==this.questions[this.countQuiz].correctAnswer-1?e.displayScreenWhenAnswerRight():e.displayScreenWhenAnswerNotChoosed()}},{key:"setTrueAva",value:function(){this.trueOrFalseUser.setTrueAnswer()}},{key:"setFalseAva",value:function(){this.trueOrFalseUser.setFailtAnswer()}},{key:"setTrueAvaOpp",value:function(){this.trueOrFalseOpp.setTrueAnswer()}},{key:"setFalseAvaOpp",value:function(){this.trueOrFalseOpp.setFailtAnswer()}},{key:"setScore",value:function(e){this.UserSpriteRight.setScore(e)}},{key:"setScoreOpp",value:function(e){this.UserSpriteLeft.setScore(e)}},{key:"destroy",value:function(){for(this.removeEventExtension(),game.time.events.remove(this.timeTweenBegin),game.time.events.remove(this.timeTweenStart),rl.instance().event.loadComplete.remove(this.loadComplete,this);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Id(Ad(t.prototype),"destroy",this).call(this)}}])&&xd(n.prototype,i),o&&xd(n,o),t}();function Gd(e){return(Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Md(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nd(e,t){return!t||"object"!==Gd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bd(e){return(Bd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jd(e,t){return(jd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ud=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Nd(this,Bd(t).call(this,game,0,0,e.tab.nameAtlas,function(){},o,null,e.tab.nameSprite))).configs=e,a.gemCount=n,a.expCount=i,a.anchor.set(.5),a.gem,a.exp,a.txtGem,a.txtExp,a.addGemAndExp(),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jd(e,t)}(t,Phaser.Button),n=t,(i=[{key:"addGemAndExp",value:function(){this.gem=new Bt(this.configs.gem),this.addChild(this.gem),this.exp=new Bt(this.configs.exp),this.addChild(this.exp),this.txtGem=new Qt(this.configs.txt1,"+".concat(this.gemCount)),this.addChild(this.txtGem),this.txtExp=new Qt(this.configs.txt2,"+".concat(this.expCount)),this.addChild(this.txtExp);var e=this.gem.width+this.txtGem.width,t=this.exp.width+this.txtExp.width;this.txtGem.x=(-this.width/2-e)/2+5*window.GameConfig.RESIZE,this.gem.x=(-this.width/2-e)/2+this.txtGem.width+10*window.GameConfig.RESIZE,this.txtExp.x=(this.width/2-t)/2-10*window.GameConfig.RESIZE,this.exp.x=(this.width/2-t)/2+this.txtGem.width-5*window.GameConfig.RESIZE}}])&&Md(n.prototype,i),o&&Md(n,o),t}();function Fd(e){return(Fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zd(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hd(e,t){return!t||"object"!==Fd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vd(e){return(Vd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qd(e,t){return(Qd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Hd(this,Vd(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),n.configs=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qd(e,t)}(t,Z),n=t,(i=[{key:"setPosition",value:function(){this.x=this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE}},{key:"afterInit",value:function(){this.maskAva,this.ava,this.frameAva,this.name,this.nameValue,this.scoreText,this.scoreValue,this.trueOrFalse}},{key:"setAva",value:function(e,t){this.keyAva=e,this.vip=t,this.addAva()}},{key:"setNameAndScore",value:function(e,t){this.nameValue=e,this.scoreValue=t,this.addNameAndScore()}},{key:"setLevelPlaylist",value:function(e){this.playlistLevel=new dc,this.playlistLevel.x=355*window.GameConfig.RESIZE,this.playlistLevel.y=155*window.GameConfig.RESIZE,this.playlistLevel.setData(e),this.addChild(this.playlistLevel)}},{key:"makeTweenAvaLoading",value:function(){game.add.tween(this).to({x:0},1200,Phaser.Easing.Exponential.Out,!1).start()}},{key:"makeTweenAva",value:function(){var e=this,t=game.add.tween(this.playlistLevel).to({y:200*window.GameConfig.RESIZE},300,"Linear",!1);t.start(),t.onComplete.add(function(){e.scoreText.revive()},this),this.scoreText.revive()}},{key:"makeDefaultScreenNotTween",value:function(){this.playlistLevel.y=190*window.GameConfig.RESIZE,this.scoreText.revive()}},{key:"addAva",value:function(){game.cache.checkImageKey(this.keyAva)?this.ava=new Phaser.Sprite(game,this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,168*window.GameConfig.RESIZE,this.keyAva):this.ava=new Phaser.Sprite(game,this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,168*window.GameConfig.RESIZE,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.ava.width=80,this.ava.height=80;var e=new Phaser.Graphics(game,0,0);e.beginFill(16777215),e.drawCircle(this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,168*window.GameConfig.RESIZE,80),e.anchor.set(.5),this.ava.mask=e,this.addChild(e),this.addChild(this.ava),!0===this.vip?(this.frameAva=new Phaser.Sprite(game,this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,170*window.GameConfig.RESIZE,this.positionWinConfig.frame_ava_vip_right.nameAtlas,this.positionWinConfig.frame_ava_vip_right.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(.98*window.GameConfig.RESIZE),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,168*window.GameConfig.RESIZE,this.positionWinConfig.frame_ava_right.nameAtlas,this.positionWinConfig.frame_ava_right.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.025*window.GameConfig.RESIZE),this.addChild(this.frameAva))}},{key:"addNameAndScore",value:function(){this.name=new Phaser.Text(game,this.positionWinConfig.nameFB.x*window.GameConfig.RESIZE,140*window.GameConfig.RESIZE,this.nameValue,this.positionWinConfig.nameFB.configs),this.name.anchor.set(1,.5),this.addChild(this.name),this.scoreText=new Phaser.Text(game,this.positionWinConfig.scoreText.x*window.GameConfig.RESIZE,175*window.GameConfig.RESIZE,this.scoreValue,this.positionWinConfig.scoreText.configs),this.scoreText.anchor.set(1,.5),this.scoreText.kill(),this.addChild(this.scoreText),1==this.vip&&(this.name.x-=15,this.scoreText.x-=15)}},{key:"setScore",value:function(e){var t=this,n=game.add.tween(this.scoreText).to({text:e},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.scoreText.text=parseInt(t.scoreText.text)},this)}},{key:"addDotOnline",value:function(){this.dotOnline=new Bt(this.positionWinConfig.dot_online_right_challen),this.addChild(this.dotOnline)}},{key:"addBtnChallenGemAndExp",value:function(){var e=this;this.btnGemAndExp=new Ud(this.positionWinConfig.btn_gem_exp,1,1),this.btnGemAndExp.x=320,this.btnGemAndExp.y=275,this.btnGemAndExp.scale.set(0),this.addChild(this.btnGemAndExp),game.time.events.add(1*Phaser.Timer.SECOND,function(){game.add.tween(e.btnGemAndExp.scale).to({x:1,y:1},200,"Linear",!0).start()},this)}}])&&Zd(n.prototype,i),o&&Zd(n,o),t}();function qd(e){return(qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kd(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zd(e,t){return!t||"object"!==qd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yd(e){return(Yd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xd(e,t){return(Xd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=zd(this,Yd(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),n.configs=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xd(e,t)}(t,Z),n=t,(i=[{key:"setPosition",value:function(){this.x=this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE}},{key:"afterInit",value:function(){this.maskAva,this.ava,this.frameAva,this.name,this.nameValue,this.scoreText,this.scoreValue,this.trueOrFalse}},{key:"setAva",value:function(e,t){this.keyAva=e,this.vip=t,this.addAva()}},{key:"setNameAndScore",value:function(e,t){this.nameValue=e,this.scoreValue=t,this.addNameAndScore()}},{key:"setLevelPlaylist",value:function(e){this.playlistLevel=new dc,this.playlistLevel.x=140*window.GameConfig.RESIZE,this.playlistLevel.y=155*window.GameConfig.RESIZE,this.playlistLevel.setData(e),this.addChild(this.playlistLevel)}},{key:"makeTweenAvaLoading",value:function(){game.add.tween(this).to({x:0},1200,Phaser.Easing.Exponential.Out,!1).start()}},{key:"makeTweenAva",value:function(){var e=this,t=game.add.tween(this.playlistLevel).to({y:200*window.GameConfig.RESIZE},300,"Linear",!1);t.start(),t.onComplete.add(function(){e.scoreText.revive()},this),this.scoreText.revive()}},{key:"makeDefaultScreenNotTween",value:function(){this.playlistLevel.y=190*window.GameConfig.RESIZE,this.scoreText.revive()}},{key:"addAva",value:function(){var e=this;this.ava=new jr(this.positionWinConfig.avaOpp.x*window.GameConfig.RESIZE,168*window.GameConfig.RESIZE,"ava-default",this.keyAva,0),this.ava.sprite.anchor.set(.5),this.ava.sprite.inputEnabled=!0,this.ava.event.loadAvaDone.add(function(){e.ava.sprite.width=80,e.ava.sprite.height=80},this),this.ava.sprite.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),jC.instance().addUserProfile(e.configs.id)},this);var t=new Phaser.Graphics(game,0,0);t.beginFill(16777215),t.drawCircle(this.positionWinConfig.avaOpp.x*window.GameConfig.RESIZE,168*window.GameConfig.RESIZE,80),t.anchor.set(.5),this.ava.sprite.mask=t,this.addChild(t),this.addChild(this.ava.sprite),!0===this.vip?(this.frameAva=new Phaser.Sprite(game,this.positionWinConfig.avaOpp.x*window.GameConfig.RESIZE,170*window.GameConfig.RESIZE,this.positionWinConfig.frame_ava_vip_left.nameAtlas,this.positionWinConfig.frame_ava_vip_left.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(.98*window.GameConfig.RESIZE),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,this.positionWinConfig.avaOpp.x*window.GameConfig.RESIZE,168*window.GameConfig.RESIZE,this.positionWinConfig.frame_ava_left.nameAtlas,this.positionWinConfig.frame_ava_left.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.025*window.GameConfig.RESIZE),this.addChild(this.frameAva))}},{key:"addNameAndScore",value:function(){this.name=new Phaser.Text(game,this.positionWinConfig.nameFBOpp.x*window.GameConfig.RESIZE,140*window.GameConfig.RESIZE,this.nameValue,this.positionWinConfig.nameFBOpp.configs),this.name.anchor.set(0,.5),this.addChild(this.name),this.scoreText=new Phaser.Text(game,this.positionWinConfig.scoreTextOpp.x*window.GameConfig.RESIZE,170*window.GameConfig.RESIZE,this.scoreValue,{font:"GilroyMedium",fill:"#93909d",fontSize:23}),this.scoreText.anchor.set(0,.5),this.scoreText.kill(),this.addChild(this.scoreText),1==this.vip&&(this.name.x+=15,this.scoreText.x+=15)}},{key:"setScore",value:function(e){var t=this,n=game.add.tween(this.scoreText).to({text:e},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.scoreText.text=parseInt(t.scoreText.text)},this)}},{key:"addDotOnline",value:function(){1==this.configs.is_online?this.dotOnline=new Bt(this.positionWinConfig.dot_online_left_challen):this.dotOnline=new Bt(this.positionWinConfig.dot_offline_left_challen),this.addChild(this.dotOnline)}}])&&Kd(n.prototype,i),o&&Kd(n,o),t}();function $d(e){return($d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ef(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tf(e,t){return!t||"object"!==$d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nf(e){return(nf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function of(e,t){return(of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var af=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=tf(this,nf(t).call(this,game,e,n,"songDetailSprites","Ava_Playlist"))).anchor.set(.5),o.scale.set(65/165*window.GameConfig.RESIZE),o.positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),o.configValues=i,o.ktPlay=!1,o.ktPause=!1,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&of(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.key="",this.btn,this.addUnBtn(this.positionWinConfig.songDetail_btn_pause),this.addBtn(this.positionWinConfig.songDetail_btn_play)}},{key:"loadAva",value:function(e,t){this.key=e||"",this.idx=t,this.beginLoad()}},{key:"addBtn",value:function(e){this.btn=new Phaser.Sprite(game,e.x,e.y,e.nameAtlas,e.nameSprite),this.btn.scale.set(80/65*window.GameConfig.RESIZE),this.addChild(this.btn)}},{key:"addUnBtn",value:function(e){this.unBtn=new Phaser.Sprite(game,e.x,e.y,e.nameAtlas,e.nameSprite),this.unBtn.scale.set(80/65*window.GameConfig.RESIZE),this.unBtn.kill(),this.addChild(this.unBtn)}},{key:"beginLoad",value:function(){game.cache.checkImageKey(this.key)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.key))}},{key:"playsound",value:function(){this.btn.kill(),this.unBtn.revive()}},{key:"stopSound",value:function(){this.btn.revive(),this.unBtn.kill()}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){game.cache.checkImageKey(e.key)&&e.loadTexture(e.key)},100*this.idx)}},{key:"width",get:function(){return 65}},{key:"height",get:function(){return 65}}])&&ef(n.prototype,i),o&&ef(n,o),t}();function sf(e){return(sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rf(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lf(e,t){return!t||"object"!==sf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cf(e){return(cf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hf(e,t){return(hf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uf=function(e){function t(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=lf(this,cf(t).call(this,game,285,0,null))).configValues=e,i.result=n,i.opponentResult=o,i.inputEnabled=!0,i.ktPlay=!1,i.index=a,i.anchor.set(.5,0),i.event={playSound:new Phaser.Signal,pauseSound:new Phaser.Signal},i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hf(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){var e=this,t=new Phaser.Button(game,-114,0,"otherSprites",function(){var t=new Fl(e.configValues);jC.instance().addChild(t)},this,null,"Song_Result");this.addChild(t);var n=new Phaser.Sprite(game,0,135*window.GameConfig.RESIZE,"otherSprites","line-box-win");n.anchor.set(.5),this.addChild(n),this.imgAlbum=new af(-160*window.GameConfig.RESIZE,70*window.GameConfig.RESIZE,this.configValues),this.imgAlbum.loadAva(this.configValues.thumb,this.index),this.imgAlbum.inputEnabled=!0,this.imgAlbum.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),1==e.ktPlay?e.pauseSound():e.event.playSound.dispatch(e.index)},this);var i=new Phaser.Graphics(game,0*window.GameConfig.RESIZE,0*window.GameConfig.RESIZE);i.beginFill(16777215),i.drawRoundedRect(-110*window.GameConfig.RESIZE,-110*window.GameConfig.RESIZE,220*window.GameConfig.RESIZE,220*window.GameConfig.RESIZE,10),i.anchor.set(.5),this.imgAlbum.mask=i,this.imgAlbum.addChild(i);var o=this.configValues.song;o=(new Je).formatName(o,21);var a=new Phaser.Text(game,-99*window.GameConfig.RESIZE,55*window.GameConfig.RESIZE,"".concat(o),{font:"Gilroy",fill:"#ffffff",wordWrap:!0,wordWrapWidth:500,maxLines:1,fontSize:22});a.anchor.set(0,.5),this.addChild(a);var s=new Phaser.Text(game,-99*window.GameConfig.RESIZE,81*window.GameConfig.RESIZE,"".concat(this.configValues.singer),{font:"Gilroy",fill:"#93909d",fontSize:19});if(s.anchor.set(0,.5),this.addChild(s),"CORRECT"==this.result.result.toUpperCase()){var r=game.add.sprite(230*window.GameConfig.RESIZE,51*window.GameConfig.RESIZE,"otherSprites","v_icon");r.anchor.set(.5),this.addChild(r);var l=new Phaser.Text(game,230*window.GameConfig.RESIZE,77*window.GameConfig.RESIZE,"".concat(this.result.answer_time.toFixed(1),"s"),{font:"GilroyMedium",fill:"#07cf81",fontSize:17});l.anchor.set(.5),this.addChild(l)}else{var c=game.add.sprite(230*window.GameConfig.RESIZE,51*window.GameConfig.RESIZE,"otherSprites","x_icon");c.anchor.set(.5),this.addChild(c);var h=new Phaser.Text(game,230*window.GameConfig.RESIZE,77*window.GameConfig.RESIZE,"".concat(this.result.answer_time.toFixed(1),"s"),{font:"GilroyMedium",fill:"#ff1d58",fontSize:17});h.anchor.set(.5),this.addChild(h)}if(null!==this.opponentResult)if("CORRECT"==this.opponentResult.result.toUpperCase()){var u=game.add.sprite(-230*window.GameConfig.RESIZE,51*window.GameConfig.RESIZE,"otherSprites","v_icon");u.anchor.set(.5),this.addChild(u);var d=new Phaser.Text(game,-230*window.GameConfig.RESIZE,77*window.GameConfig.RESIZE,"".concat(this.opponentResult.answer_time.toFixed(1),"s"),{font:"GilroyMedium",fill:"#07cf81",fontSize:17});d.anchor.set(.5),this.addChild(d)}else{var f=game.add.sprite(-230*window.GameConfig.RESIZE,51*window.GameConfig.RESIZE,"otherSprites","x_icon");f.anchor.set(.5),this.addChild(f);var p=new Phaser.Text(game,-230*window.GameConfig.RESIZE,77*window.GameConfig.RESIZE,"".concat(this.opponentResult.answer_time.toFixed(1),"s"),{font:"GilroyMedium",fill:"#ff1d58",fontSize:17});p.anchor.set(.5),this.addChild(p)}this.addChild(this.imgAlbum)}},{key:"pauseSound",value:function(){this.ktPlay=!1,this.imgAlbum.stopSound(),rl.instance().pauseSound()}},{key:"stopSound",value:function(){this.ktPlay=!1,this.imgAlbum.stopSound()}},{key:"playSound",value:function(){!1===this.ktPlay&&(this.ktPlay=!0,rl.instance().playsound(this.configValues.listenLink),this.imgAlbum.playsound())}},{key:"height",get:function(){return 135}}])&&rf(n.prototype,i),o&&rf(n,o),t}();function df(e){return(df="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ff(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pf(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gf(e,t){return!t||"object"!==df(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yf(e,t,n){return(yf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mf(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function mf(e){return(mf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vf(e,t){return(vf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wf=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=gf(this,mf(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),e.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.bg=new Phaser.Sprite(game,0,0,"bg_create_room"),e.addChild(e.bg),e.event={reHome:new Phaser.Signal,nextGame:new Phaser.Signal},e.challenge_msg_updated=0,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vf(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){var e=this;this.addEventExtension(),this.loadDisplayChallenge(function(){e.handleBtnNext()}),this.timeOutHideLoading=setTimeout(function(){ht.instance().hideLoading()},1e3)}},{key:"handleBtnNext",value:function(){var e=this;this.listGame=[],this.gamesList=[],this.challengeGames=[],this.doneGames=[],this.waitingGames=[];var t=[],n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){ff(e,t,n[t])})}return e}({},oe.instance().menuOpponentsResponse);for(var i in n)t.push(n[i]);if(this.gamesList=t,this.filterResponseGames(),this.listGame=this.checkHasGames(),this.listGame=this.listGame.sort(function(e,t){return e.base_updated-t.base_updated}),this.listGame.length>0&&void 0!==this.listGame){(a=new Phaser.Button(game,374*window.GameConfig.RESIZE,(game.height-81)*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"btn_next_game")).anchor.set(.5);var o=new Phaser.Text(game,0,0,"".concat(de.instance().getData("318")," ( ").concat(this.listGame.length," )"),this.positionWinConfig.txt_btn_next_game.configs);o.anchor.set(.5),a.addChild(o),a.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),"YOUR_TURN"==e.listGame[0].status?e.listGame[0].turnCount>0?e.event.nextGame.dispatch({opponent:e.listGame[0].opponentEntity,type:"BECHALLENGED",weeklyResult:{userWon:e.listGame[0].weeklyResult.userWon,opponentWon:e.listGame[0].weeklyResult.opponentWon},isHasHistory:!0,gameLogId:e.listGame[0].userGameLog,requestId:e.listGame[0].id,challenge_msg:e.listGame[0].challenge_msg}):e.event.nextGame.dispatch({opponent:e.listGame[0].opponentEntity,type:"BECHALLENGED",weeklyResult:{userWon:e.listGame[0].weeklyResult.userWon,opponentWon:e.listGame[0].weeklyResult.opponentWon},isHasHistory:!1,gameLogId:e.listGame[0].userGameLog,requestId:e.listGame[0].id,challenge_msg:e.listGame[0].challenge_msg}):"NO_GAME"==e.listGame[0].status&&e.event.nextGame.dispatch({opponent:e.listGame[0].opponentEntity,type:"CHALLENGE",weeklyResult:{userWon:e.listGame[0].weeklyResult.userWon,opponentWon:e.listGame[0].weeklyResult.opponentWon,challenge_msg:e.listGame[0].challenge_msg}})}),this.addChild(a)}else{var a;(a=new Phaser.Button(game,374*window.GameConfig.RESIZE,(game.height-81)*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"btn_next_game")).anchor.set(.5);var s=new Phaser.Text(game,0,0,"".concat(this.positionWinConfig.txt_btn_find_game.text),this.positionWinConfig.txt_btn_next_game.configs);s.anchor.set(.5),a.addChild(s),a.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),FH.instance().changeScreen(De.TURN_BASE)},this),this.addChild(a)}}},{key:"sendRequestMainMenuLoad",value:function(){dV.instance().sendData(ki.MAIN_MENU_LOAD_REQUEST,null)}},{key:"setData",value:function(e,t,n,i,o,a,s,r,l){this.questions=e,this.opponent=t,this.user_playlist_mapping=n,this.opponent_playlist_mapping=i,this.playlist=o,this.result=a,this.play_log_id=r,this.request_id=l,this.challenge_msg=s,this.challenge_msg=Gl.formatName(this.challenge_msg,25),LogConsole.log(this.result),LogConsole.log(this.opponent),LogConsole.log(this.questions),LogConsole.log(this.playlist)}},{key:"loadDisplayChallenge",value:function(e){this.UserSpriteRightWin=new Wd,this.UserSpriteRightWin.setAva("ava_fb",dV.instance().dataMySeft.vip),this.UserSpriteRightWin.setNameAndScore("You",this.result.score),this.UserSpriteRightWin.setLevelPlaylist(this.user_playlist_mapping),this.UserSpriteRightWin.makeDefaultScreenNotTween(),this.UserSpriteRightWin.addDotOnline(),this.addChild(this.UserSpriteRightWin),this.UserSpriteLeftWin=new Jd(this.opponent),this.UserSpriteLeftWin.setAva(this.opponent.avatar,this.opponent.vip),this.UserSpriteLeftWin.setNameAndScore(this.opponent.userName,"Lượt tiếp"),this.UserSpriteLeftWin.setLevelPlaylist(this.opponent_playlist_mapping),this.UserSpriteLeftWin.makeDefaultScreenNotTween(),this.UserSpriteLeftWin.addDotOnline(),this.addChild(this.UserSpriteLeftWin),this.createBoxScoreYourChallen(),this.addEditMessage(),e()}},{key:"createBoxScoreYourChallen",value:function(){var e=new Phaser.Sprite(game,0,0,"playSprites","Header"),t=new Phaser.Text(game,game.width/2,38*window.GameConfig.RESIZE,this.playlist.name,{font:"Gilroy",fill:"white",fontSize:23});t.anchor.set(.5),e.addChild(t),this.addChild(e);var n=new Phaser.Graphics(game,0,(game.height-785)*window.GameConfig.RESIZE);n.beginFill(),n.drawRect(0,0,game.width,(game.height-491)*window.GameConfig.RESIZE),n.endFill(),this.addChild(n);var i=new Phaser.Button(game,game.width/2,1200*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"Box_ketqua_old");i.anchor.set(.5,0),i.mask=n,this.UserSpriteRightWin.addBtnChallenGemAndExp(),this.addChild(i);var o=new Phaser.Group(game,0,0);o.y=1200,this.addChild(o);var a=new Phaser.Rectangle(35,0,615*window.GameConfig.RESIZE,(game.height-510)*window.GameConfig.RESIZE);this.listView=new Ia(game,o,a,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.addTweenBoxResult(i,o);for(var s=0;s<5;s++){var r=new uf(this.questions[s].songEntity,this.result.answers[s],null,s);r.event.playSound.add(this.playSongResult,this),this.listView.add(r)}var l=new Bt(this.positionWinConfig.shadow);l.y=game.height-oe.instance().STANDARD_HEIGHT+this.positionWinConfig.shadow.y,this.addChild(l);var c=new Phaser.Button(game,80*window.GameConfig.RESIZE,(game.height-81)*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"Button_home");c.anchor.set(.5),c.events.onInputUp.add(this.backHome,this),this.addChild(c)}},{key:"addEditMessage",value:function(){this.txtEdit=new Phaser.Text(game,this.positionWinConfig.edit_message.txt.x,this.positionWinConfig.edit_message.txt.y,this.challenge_msg,this.positionWinConfig.edit_message.txt.configs),this.txtEdit.anchor.set(.5),this.addChild(this.txtEdit),this.btnEdit=new Phaser.Button(game,480,329,this.positionWinConfig.edit_message.btn.nameAtlas,this.onClickEditMessage,this,null,this.positionWinConfig.edit_message.btn.nameSprite),this.btnEdit.anchor.set(.5),this.addChild(this.btnEdit)}},{key:"onClickEditMessage",value:function(){Ir.instance().show({maxLength:"",showTransparent:!0,placeholder:"Nhắn tin",isSearch:!1,typeInputText:"search",configText:{width:250,height:40,x:180,y:300}}),Ir.instance().setValue(this.txtEdit.text)}},{key:"backHome",value:function(){be.instance().playSound(be.buttonclick),this.event.reHome.dispatch()}},{key:"playSongResult",value:function(e){rl.instance().pauseSound();for(var t=0;t<this.listView.grp.children.length;t++){var n=this.listView.grp.children[t];n.index!==e?n.stopSound():n.playSound()}}},{key:"addTweenBoxResult",value:function(e,t){game.add.tween(e).to({y:(game.height-765)*window.GameConfig.RESIZE},500,"Linear",!1).start(),game.add.tween(t).to({y:(game.height-765)*window.GameConfig.RESIZE},500,"Linear",!1).start()}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.MAIN_MENU_LOAD_RESPONSE&&("OK"==e.params.getUtfString("status")||console.error("MAIN_MENU_LOAD_RESPONSE not response: ".concat(e.params.errorMessage)))}},{key:"filterResponseGames",value:function(){this.waitingGames=this.gamesList.filter(function(e){return"THEIR_TURN"==e.status}),this.doneGames=this.gamesList.filter(function(e){return"NO_GAME"==e.status}),this.challengeGames=this.gamesList.filter(function(e){return"YOUR_TURN"==e.status})}},{key:"checkHasGames",value:function(){return void 0!==this.challengeGames?this.challengeGames.concat(this.doneGames):[]}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.add(this.backHome,this),Ir.instance().event.enter.add(this.doneKeyboard,this),Ir.instance().event.submit.add(this.doneKeyboard,this)}},{key:"doneKeyboard",value:function(){var e=(new Date).getTime();e-this.challenge_msg_updated>6e3?(this.challenge_msg=Ir.instance().getValue(),this.challenge_msg=Gl.formatName(this.challenge_msg,25),this.txtEdit.setText(this.challenge_msg),this.challenge_msg_updated=e,this.updateChallengeMsg(),Ir.instance().hide()):(Ck.instance().addDialog("Bạn thay đổi quá nhanh, vui lòng thử lại"),Ir.instance().hide())}},{key:"updateChallengeMsg",value:function(){var e=new SFS2X.SFSObject;e.putUtfString("challenge_msg",this.challenge_msg),e.putLong("challenge_request_id",this.request_id),dV.instance().sendData(ki.CHALLENGE_GAME_UPDATE_MESSAGE_REQUEST,e)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.remove(this.backHome,this),Ir.instance().event.enter.remove(this.doneKeyboard,this),Ir.instance().event.submit.remove(this.doneKeyboard,this)}},{key:"destroy",value:function(){for(clearTimeout(this.timeOutHideLoading),this.removeEventExtension(),this.listView.removeAll(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),yf(mf(t.prototype),"destroy",this).call(this)}}])&&pf(n.prototype,i),o&&pf(n,o),t}();function bf(e){return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Sf(e,t){return!t||"object"!==bf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ef(e,t,n){return(Ef="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cf(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Cf(e){return(Cf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kf(e,t){return(kf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Sf(this,Cf(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),n.configs=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kf(e,t)}(t,Z),n=t,(i=[{key:"setPosition",value:function(){this.x=this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE}},{key:"afterInit",value:function(){this.maskAva,this.ava,this.frameAva,this.name,this.nameValue,this.scoreText,this.scoreValue,this.trueOrFalse,this.dotOnline,this.btnGemAndExp}},{key:"setAva",value:function(e,t){this.keyAva=e,this.vip=t,this.addAva()}},{key:"setNameAndScore",value:function(e,t){this.nameValue=e,this.scoreValue=t,this.addNameAndScore()}},{key:"setLevelPlaylist",value:function(e){this.playlistLevel=new dc,this.playlistLevel.x=348*window.GameConfig.RESIZE,this.playlistLevel.y=272*window.GameConfig.RESIZE,this.playlistLevel.setData(e),this.addChild(this.playlistLevel)}},{key:"makeTweenAvaLoading",value:function(){game.add.tween(this).to({x:0},1200,Phaser.Easing.Exponential.Out,!1).start()}},{key:"makeTweenAva",value:function(){var e=this,t=game.add.tween(this.playlistLevel).to({y:323*window.GameConfig.RESIZE},300,"Linear",!1);t.start(),t.onComplete.add(function(){e.scoreText.revive()},this)}},{key:"makeDefaultScreenNotTween",value:function(){this.playlistLevel.y=272*window.GameConfig.RESIZE,this.scoreText.revive()}},{key:"addAva",value:function(){game.cache.checkImageKey(this.keyAva)?this.ava=new Phaser.Sprite(game,this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionWinConfig.ava_fb.y*window.GameConfig.RESIZE,this.keyAva):this.ava=new Phaser.Sprite(game,this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionWinConfig.ava_fb.y*window.GameConfig.RESIZE,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.ava.width=80,this.ava.height=80;var e=new Phaser.Graphics(game,0,0);e.beginFill(16777215),e.drawCircle(this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionWinConfig.ava_fb.y*window.GameConfig.RESIZE,80),e.anchor.set(.5),this.ava.mask=e,this.addChild(e),this.addChild(this.ava),!0===this.vip?(this.frameAva=new Phaser.Sprite(game,(this.positionWinConfig.ava_fb.x+0)*window.GameConfig.RESIZE,(this.positionWinConfig.ava_fb.y+3)*window.GameConfig.RESIZE,this.positionWinConfig.frame_ava_vip_right.nameAtlas,this.positionWinConfig.frame_ava_vip_right.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1*window.GameConfig.RESIZE),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionWinConfig.ava_fb.y*window.GameConfig.RESIZE,this.positionWinConfig.frame_ava_right.nameAtlas,this.positionWinConfig.frame_ava_right.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.035*window.GameConfig.RESIZE),this.addChild(this.frameAva))}},{key:"addNameAndScore",value:function(){this.name=new Phaser.Text(game,this.positionWinConfig.nameFB.x*window.GameConfig.RESIZE,this.positionWinConfig.nameFB.y*window.GameConfig.RESIZE,this.nameValue,this.positionWinConfig.nameFB.configs),this.name.anchor.set(1,.5),this.addChild(this.name),this.scoreText=new Phaser.Text(game,this.positionWinConfig.scoreText.x*window.GameConfig.RESIZE,this.positionWinConfig.scoreText.y*window.GameConfig.RESIZE,this.scoreValue,this.positionWinConfig.scoreText.configs),this.scoreText.anchor.set(1,.5),this.scoreText.kill(),this.addChild(this.scoreText),1==this.vip&&(this.name.x-=15,this.scoreText.x-=15)}},{key:"setScore",value:function(e){var t=this,n=game.add.tween(this.scoreText).to({text:e},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.scoreText.text=parseInt(t.scoreText.text)},this)}},{key:"addDotOnline",value:function(){this.dotOnline=new Bt(this.positionWinConfig.dot_online_right),this.addChild(this.dotOnline)}},{key:"addBtnWinGemAndExp",value:function(){var e=this;this.btnGemAndExp=new Ud(this.positionWinConfig.btn_gem_exp,2,2),this.btnGemAndExp.x=320,this.btnGemAndExp.y=350,this.btnGemAndExp.scale.set(0),this.addChild(this.btnGemAndExp),this.timeTweenBtn=game.time.events.add(1*Phaser.Timer.SECOND,function(){game.add.tween(e.btnGemAndExp.scale).to({x:1,y:1},200,"Linear",!0).start()},this)}},{key:"addBtnLoseGemAndExp",value:function(){var e=this;this.btnGemAndExp=new Ud(this.positionWinConfig.btn_gem_exp,1,1),this.btnGemAndExp.x=320,this.btnGemAndExp.y=350,this.btnGemAndExp.scale.set(0),this.addChild(this.btnGemAndExp),this.timeTweenBtn=game.time.events.add(1*Phaser.Timer.SECOND,function(){game.add.tween(e.btnGemAndExp.scale).to({x:1,y:1},200,"Linear",!0).start()},this)}},{key:"destroy",value:function(){game.time.events.remove(this.timeTweenBtn),Ef(Cf(t.prototype),"destroy",this).call(this)}}])&&_f(n.prototype,i),o&&_f(n,o),t}();function Of(e){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rf(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xf(e,t){return!t||"object"!==Of(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tf(e){return(Tf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function If(e,t){return(If=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Af=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xf(this,Tf(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),n.configs=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&If(e,t)}(t,Z),n=t,(i=[{key:"setPosition",value:function(){this.x=this.positionWinConfig.ava_fb.x*window.GameConfig.RESIZE}},{key:"afterInit",value:function(){this.maskAva,this.ava,this.frameAva,this.name,this.nameValue,this.scoreText,this.scoreValue,this.trueOrFalse}},{key:"setAva",value:function(e,t){this.keyAva=e,this.vip=t,this.addAva()}},{key:"setNameAndScore",value:function(e,t){this.nameValue=e,this.scoreValue=t,this.addNameAndScore()}},{key:"setLevelPlaylist",value:function(e){this.playlistLevel=new dc,this.playlistLevel.x=155*window.GameConfig.RESIZE,this.playlistLevel.y=272*window.GameConfig.RESIZE,this.playlistLevel.setData(e),this.addChild(this.playlistLevel)}},{key:"makeTweenAvaLoading",value:function(){game.add.tween(this).to({x:0},1200,Phaser.Easing.Exponential.Out,!1).start()}},{key:"makeTweenAva",value:function(){var e=this,t=game.add.tween(this.playlistLevel).to({y:324*window.GameConfig.RESIZE},300,"Linear",!1);t.start(),t.onComplete.add(function(){e.scoreText.revive()},this)}},{key:"makeDefaultScreenNotTween",value:function(){this.playlistLevel.y=272*window.GameConfig.RESIZE,this.scoreText.revive()}},{key:"addAva",value:function(){var e=this;this.ava=new jr(this.positionWinConfig.avaOpp.x*window.GameConfig.RESIZE,this.positionWinConfig.avaOpp.y*window.GameConfig.RESIZE,"ava-default",this.keyAva,0),this.ava.sprite.anchor.set(.5),this.ava.sprite.inputEnabled=!0,this.ava.event.loadAvaDone.add(function(){e.ava.sprite.width=80,e.ava.sprite.height=80},this),this.ava.sprite.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),jC.instance().addUserProfile(e.configs.id)},this);var t=new Phaser.Graphics(game,0,0);t.beginFill(16777215),t.drawCircle(this.positionWinConfig.avaOpp.x*window.GameConfig.RESIZE,this.positionWinConfig.avaOpp.y*window.GameConfig.RESIZE,80),t.anchor.set(.5),this.ava.sprite.mask=t,this.addChild(this.ava.sprite),this.addChild(t),!0===this.vip?(this.frameAva=new Phaser.Sprite(game,(this.positionWinConfig.avaOpp.x+0)*window.GameConfig.RESIZE,(this.positionWinConfig.avaOpp.y+3)*window.GameConfig.RESIZE,this.positionWinConfig.frame_ava_vip_left.nameAtlas,this.positionWinConfig.frame_ava_vip_left.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1*window.GameConfig.RESIZE),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,this.positionWinConfig.avaOpp.x*window.GameConfig.RESIZE,this.positionWinConfig.avaOpp.y*window.GameConfig.RESIZE,this.positionWinConfig.frame_ava_left.nameAtlas,this.positionWinConfig.frame_ava_left.nameSprite),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.035*window.GameConfig.RESIZE),this.addChild(this.frameAva))}},{key:"addNameAndScore",value:function(){this.name=new Phaser.Text(game,this.positionWinConfig.nameFBOpp.x*window.GameConfig.RESIZE,this.positionWinConfig.nameFBOpp.y*window.GameConfig.RESIZE,this.nameValue,this.positionWinConfig.nameFBOpp.configs),this.name.anchor.set(0,.5),this.addChild(this.name),this.scoreText=new Phaser.Text(game,this.positionWinConfig.scoreTextOpp.x*window.GameConfig.RESIZE,this.positionWinConfig.scoreTextOpp.y*window.GameConfig.RESIZE,this.scoreValue,this.positionWinConfig.scoreTextOpp.configs),this.scoreText.anchor.set(0,.5),this.scoreText.kill(),this.addChild(this.scoreText),1==this.vip&&(this.name.x+=15,this.scoreText.x+=15)}},{key:"setScore",value:function(e){var t=this,n=game.add.tween(this.scoreText).to({text:e},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.scoreText.text=parseInt(t.scoreText.text)},this)}},{key:"addDotOnline",value:function(){1==this.configs.is_online?this.dotOnline=new Bt(this.positionWinConfig.dot_online_left):this.dotOnline=new Bt(this.positionWinConfig.dot_offline_left),this.addChild(this.dotOnline)}}])&&Rf(n.prototype,i),o&&Rf(n,o),t}();function Lf(e){return(Lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Df(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gf(e,t){return!t||"object"!==Lf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mf(e,t,n){return(Mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nf(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Nf(e){return(Nf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bf(e,t){return(Bf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jf=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Gf(this,Nf(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),e.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.bg=new Phaser.Sprite(game,0,0,"bg_create_room"),e.addChild(e.bg),e.isLastWeek=!1,e.event={challengeAgain:new Phaser.Signal,reHome:new Phaser.Signal},e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bf(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.loadDisplayBeChallenged(function(){}),this.timeOutHideLoading=setTimeout(function(){ht.instance().hideLoading()},1e3)}},{key:"setData",value:function(e,t,n,i,o,a,s,r,l,c,h){this.questions=e,this.opponent=t,this.user_playlist_mapping=n,this.opponent_playlist_mapping=i,this.playlist=o,this.result=a,this.play_log_id=l,this.request_id=c,this.opponentAnswerLogs=s,this.weeklyResult=r,this.dataTurnbase=h,LogConsole.log(this.result),LogConsole.log(this.opponent),LogConsole.log(this.questions),LogConsole.log(this.playlist),LogConsole.log(this.opponentAnswerLogs),LogConsole.log(this.weeklyResult)}},{key:"loadDisplayBeChallenged",value:function(e){this.UserSpriteRightWin=new Pf,this.UserSpriteRightWin.setAva("ava_fb",dV.instance().dataMySeft.vip),this.UserSpriteRightWin.setNameAndScore("You",this.result.score),this.UserSpriteRightWin.setLevelPlaylist(this.user_playlist_mapping),this.UserSpriteRightWin.makeDefaultScreenNotTween(this.user_playlist_mapping),this.UserSpriteRightWin.addDotOnline(),this.addChild(this.UserSpriteRightWin),this.UserSpriteLeftWin=new Af(this.opponent),this.UserSpriteLeftWin.setAva(this.opponent.avatar,this.opponent.vip),this.UserSpriteLeftWin.setNameAndScore(this.opponent.userName,this.result.scoreOpp),this.UserSpriteLeftWin.setLevelPlaylist(this.opponent_playlist_mapping),this.UserSpriteLeftWin.makeDefaultScreenNotTween(),this.UserSpriteLeftWin.addDotOnline(),this.addChild(this.UserSpriteLeftWin),this.createBoxScoreFriendChallen(),e()}},{key:"createBoxScoreFriendChallen",value:function(){var e=this;console.log("createBoxScoreFriendChallencreateBoxScoreFriendChallen"),console.log(this.weeklyResult);var t=new Phaser.Text(game,game.width/2,485*window.GameConfig.RESIZE,de.instance().getData("260"),{font:"Gilroy",fill:"#9d92a6",fontSize:19});t.anchor.set(.5),this.addChild(t);var n=new Phaser.Sprite(game,0,0,"playSprites","Header"),i=new Phaser.Text(game,game.width/2,35*window.GameConfig.RESIZE,this.playlist.name,{font:"Gilroy",fill:"white",fontSize:23});i.anchor.set(.5),n.addChild(i),this.addChild(n);var o=new Phaser.Graphics(game,0,551*window.GameConfig.RESIZE);o.beginFill(),o.drawRect(0,0,game.width,(game.height-676)*window.GameConfig.RESIZE),o.endFill(),this.addChild(o);var a=new Phaser.Button(game,game.width/2,1200*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"Box_ketqua_old");a.anchor.set(.5,0),a.mask=o;var s=new Phaser.Text(game,game.width/2,520*window.GameConfig.RESIZE,"Score",{font:"GilroyBold",fill:"white",fontSize:30});if(this.result.score>this.result.scoreOpp){be.instance().playSound(be.winturnbase),(l=new Phaser.Text(game,game.width/2,145*window.GameConfig.RESIZE,de.instance().getData("254"),{font:"GilroyBold",fill:"white",fontSize:43})).anchor.set(.5),null==this.weeklyResult?s.setText("0 - 0"):s.setText("".concat(this.weeklyResult.opponentWon," - ").concat(this.weeklyResult.userWon+1));var r=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,140*window.GameConfig.RESIZE,"firework");r.anchor.set(.5),this.addChild(r);r.animations.add("run_win");r.animations.play("run_win",30,!0),this.addChild(l),this.UserSpriteRightWin.addBtnWinGemAndExp()}else if(this.result.score==this.result.scoreOpp){be.instance().playSound(be.loseturnbase),(l=new Phaser.Text(game,game.width/2,145*window.GameConfig.RESIZE,de.instance().getData("255"),{font:"GilroyBold",fill:"white",fontSize:43})).anchor.set(.5),null==this.weeklyResult?s.setText("0 - 0"):s.setText("".concat(this.weeklyResult.opponentWon," - ").concat(this.weeklyResult.userWon)),this.addChild(l),this.UserSpriteRightWin.addBtnLoseGemAndExp()}else{var l;be.instance().playSound(be.loseturnbase),(l=new Phaser.Text(game,game.width/2,145*window.GameConfig.RESIZE,de.instance().getData("256"),{font:"GilroyBold",fill:"white",fontSize:43})).anchor.set(.5),null==this.weeklyResult?s.setText("0 - 0"):s.setText("".concat(this.weeklyResult.opponentWon+1," - ").concat(this.weeklyResult.userWon)),this.addChild(l),this.UserSpriteRightWin.addBtnLoseGemAndExp()}s.anchor.set(.5),this.addChild(s),this.addChild(a);var c=new Phaser.Group(game,0,0);c.y=1200,this.addChild(c);var h=new Phaser.Rectangle(35,0,615*window.GameConfig.RESIZE,(game.height-685)*window.GameConfig.RESIZE);this.listView=new Ia(game,c,h,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.addTweenBoxResult(a,c);for(var u=0;u<5;u++){var d=new uf(this.questions[u].songEntity,this.result.answers[u],this.opponentAnswerLogs[u],u);d.event.playSound.add(this.playSongResult,this),this.listView.add(d)}var f=new Bt(this.positionWinConfig.shadow);f.y=game.height-oe.instance().STANDARD_HEIGHT+this.positionWinConfig.shadow.y,this.addChild(f);var p=new Phaser.Button(game,378*window.GameConfig.RESIZE,(game.height-86)*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"btn_next_game");p.anchor.set(.5),this.addChild(p);var g,y=new Phaser.Text(game,0,0,de.instance().getData("258"),this.positionWinConfig.txt_challenge_your_turn.configs);(y.anchor.set(.5),p.addChild(y),p.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),e.event.challengeAgain.dispatch()},this),"en"==de.instance().currentLanguage)?((g=new Phaser.Button(game,this.positionWinConfig.share_en.x*window.GameConfig.RESIZE,this.positionWinConfig.share_en.y*window.GameConfig.RESIZE,this.positionWinConfig.share_en.nameAtlas,function(){},this,null,this.positionWinConfig.share_en.nameSprite)).anchor.set(.5),g.events.onInputUp.add(this.shareResult,this),this.addChild(g)):((g=new Phaser.Button(game,this.positionWinConfig.share.x*window.GameConfig.RESIZE,this.positionWinConfig.share.y*window.GameConfig.RESIZE,this.positionWinConfig.share.nameAtlas,function(){},this,null,this.positionWinConfig.share.nameSprite)).anchor.set(.5),g.events.onInputUp.add(this.shareResult,this),this.addChild(g));var m=new Phaser.Button(game,80*window.GameConfig.RESIZE,(game.height-86)*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"Button_home");m.anchor.set(.5),m.events.onInputUp.add(this.backHome,this),this.addChild(m),this.addMessageOpp(),this.addBtnLastWeekResult()}},{key:"addBtnLastWeekResult",value:function(){this.btnLastWeekResult=new Phaser.Button(game,this.positionWinConfig.last_week.x*window.GameConfig.RESIZE,this.positionWinConfig.last_week.y*window.GameConfig.RESIZE,this.positionWinConfig.last_week.nameAtlas,function(){},this,null,this.positionWinConfig.last_week.nameSprite),this.btnLastWeekResult.anchor.set(.5),this.btnLastWeekResult.events.onInputUp.add(this.chooseLastWeek,this);var e=new Phaser.Text(game,this.positionWinConfig.last_week.txt.x,this.positionWinConfig.last_week.txt.y,de.instance().getData("257"),this.positionWinConfig.last_week.txt.configs);e.anchor.set(.5),this.btnLastWeekResult.addChild(e),this.addChild(this.btnLastWeekResult)}},{key:"chooseLastWeek",value:function(){be.instance().playSound(be.buttonclick),this.isLastWeek=!0,jC.instance().addLastWeekResultScreen(this.opponent)}},{key:"addMessageOpp",value:function(){if(void 0!==this.dataTurnbase.challenge_msg&&""!==this.dataTurnbase.challenge_msg&&null!==this.dataTurnbase.challenge_msg){var e=new Phaser.Sprite(game,75,298,"playSprites","Box_Chat_02");this.addChild(e),this.msgChallenge=new Phaser.Text(game,25,25,this.dataTurnbase.challenge_msg,{font:"Gilroy",fill:"#333333",fontSize:18,wordWrap:!0,wordWrapWidth:130,align:"center"});var t=20*window.GameConfig.RESIZE,n={x:35,y:310,nameAtlas:"mailSprites",nameSprite:"Box_Chat_01",left:25,right:25,top:25,bot:25,width:0,height:0,name:"challengeMsg"};n.width=(this.msgChallenge.width+t)/window.GameConfig.RESIZE,n.height=(this.msgChallenge.height+t)/window.GameConfig.RESIZE,this.bg=new Dn(n),this.bg.addChild(this.msgChallenge),this.addChild(this.bg),this.msgChallenge.x=t/2,this.msgChallenge.y=t/2}}},{key:"playSongResult",value:function(e){rl.instance().pauseSound();for(var t=0;t<this.listView.grp.children.length;t++){var n=this.listView.grp.children[t];n.index!==e?n.stopSound():n.playSound()}}},{key:"shareResult",value:function(){be.instance().playSound(be.buttonclick),Ri.instance().share()}},{key:"onShared",value:function(e){e.hasOwnProperty("error_code")||this.sendShareResult()}},{key:"sendShareResult",value:function(){dV.instance().sendData(ki.FB_USER_SHARED_RESULT_REQUEST,null)}},{key:"onExtensionResponse",value:function(e){}},{key:"addTweenBoxResult",value:function(e,t){game.add.tween(e).to({y:551*window.GameConfig.RESIZE},500,"Linear",!1).start(),game.add.tween(t).to({y:551*window.GameConfig.RESIZE},500,"Linear",!1).start()}},{key:"backHome",value:function(){be.instance().playSound(be.buttonclick),0==this.isLastWeek&&this.event.reHome.dispatch()}},{key:"backLastWeek",value:function(){this.isLastWeek=!1}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.add(this.backHome,this),Qe.instance().event.backLastWeek.add(this.backLastWeek,this),Ri.instance().event.share.add(this.onShared,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.remove(this.backHome,this),Qe.instance().event.backLastWeek.remove(this.backLastWeek,this),Ri.instance().event.share.remove(this.onShared,this)}},{key:"destroy",value:function(){for(clearTimeout(this.timeOutHideLoading),this.removeEventExtension(),this.listView.removeAll(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Mf(Nf(t.prototype),"destroy",this).call(this)}}])&&Df(n.prototype,i),o&&Df(n,o),t}();function Uf(e){return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ff(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zf(e,t){return!t||"object"!==Uf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hf(e){return(Hf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vf(e,t){return(Vf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qf=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Zf(this,Hf(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),n.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),n.type=e,n.screenChallenge=null,n.screenBeChallenged=null,n.challenge_msg="",n.event={screenReHome:new Phaser.Signal,screenBeChallengedChallengAgain:new Phaser.Signal,screenChallengeNextGame:new Phaser.Signal},n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vf(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){}},{key:"addScreen",value:function(){"CHALLENGE"==this.type?this.addScreenChallenge():this.addScreenBeChallenged(),Ei.instance().playTurnBase(),Ei.instance().showInterstitialTurnBase()}},{key:"addScreenChallenge",value:function(){this.removeScreenChallenge(),this.screenChallenge=new wf,this.screenChallenge.setData(this.questions,this.opponent,this.user_playlist_mapping,this.opponent_playlist_mapping,this.playlist,this.result,this.challenge_msg,this.play_log_id,this.request_id),this.screenChallenge.afterInit(),this.screenChallenge.event.reHome.add(this.screenReHome,this),this.screenChallenge.event.nextGame.add(this.screenChallengeNextGame,this),this.addChild(this.screenChallenge)}},{key:"removeScreenChallenge",value:function(){null!==this.screenChallenge&&(this.removeChild(this.screenChallenge),this.screenChallenge.destroy(),this.screenChallenge=null)}},{key:"screenReHome",value:function(){this.event.screenReHome.dispatch()}},{key:"screenChallengeNextGame",value:function(e){this.event.screenChallengeNextGame.dispatch(e)}},{key:"addScreenBeChallenged",value:function(){this.removeScreenBeChallenged(),this.screenBeChallenged=new jf,this.screenBeChallenged.setData(this.questions,this.opponent,this.user_playlist_mapping,this.opponent_playlist_mapping,this.playlist,this.result,this.opponentAnswerLogs,this.weeklyResult,this.play_log_id,this.request_id,this.dataTurnbase),this.screenBeChallenged.afterInit(),this.screenBeChallenged.event.challengeAgain.add(this.challengeAgain,this),this.screenBeChallenged.event.reHome.add(this.screenReHome,this),this.addChild(this.screenBeChallenged)}},{key:"removeScreenBeChallenged",value:function(){null!==this.screenBeChallenged&&(this.removeChild(this.screenBeChallenged),this.screenBeChallenged.destroy(),this.screenBeChallenged=null)}},{key:"challengeAgain",value:function(){this.event.screenBeChallengedChallengAgain.dispatch()}},{key:"setData",value:function(e,t,n,i,o,a,s){this.questions=e,this.opponent=t,this.user_playlist_mapping=n,this.opponent_playlist_mapping=i,this.playlist=o,this.result=a,this.challenge_msg=s}},{key:"setDataBeChallenged",value:function(e,t,n,i,o,a){"BECHALLENGED"==this.type&&(this.play_log_id=e,this.request_id=t,this.isHasHistory=n,this.opponentAnswerLogs=i,this.weeklyResult=o,this.dataTurnbase=a)}},{key:"setDataChallenge",value:function(e,t){"CHALLENGE"==this.type&&(this.play_log_id=e,this.request_id=t)}}])&&Ff(n.prototype,i),o&&Ff(n,o),t}();function Wf(e){return(Wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qf(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kf(e,t){return!t||"object"!==Wf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zf(e,t,n){return(zf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yf(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Yf(e){return(Yf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xf(e,t){return(Xf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jf=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Kf(this,Yf(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),e.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.event={resultGame:new Phaser.Signal},e.checkUseSpt=!1,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xf(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.addScreenLoadTurnBase()}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"addScreenLoadTurnBase",value:function(){this.score=0,this.scoreOpp=0,this.countQuiz=0,this.correctList=[],this.wrongList=[],this.streak=1,this.answers=[],this.result,this.timeNextQuestion=null,this.bg=new Phaser.Sprite(game,0,0,"bg_create_room"),this.addChild(this.bg);var e=new Bt(this.positionPlayConfig.line_top);this.addChild(e),this.loadScreenPlayChallenged(this.scoreOpp),this.addNamePlaylistAndTextLoading(),this.addActionPhase()}},{key:"addNamePlaylistAndTextLoading",value:function(){this.namePlaylist=new Phaser.Text(game,this.positionPlayConfig.namePlaylist.x*window.GameConfig.RESIZE,(this.positionPlayConfig.namePlaylist.y+80)*window.GameConfig.RESIZE,this.playlist.name,this.positionPlayConfig.namePlaylist.configs),this.namePlaylist.anchor.set(.5),this.addChild(this.namePlaylist),game.add.tween(this.namePlaylist).to({y:this.positionPlayConfig.namePlaylist.y*window.GameConfig.RESIZE},300,Phaser.Easing.Linear.Out,!1).start(),this.loadingAnim=new ot,this.addChild(this.loadingAnim)}},{key:"addActionPhase",value:function(){this.actionPhase=new Od,this.actionPhase.position.x=(this.game.width-this.actionPhase.width)/2,this.addChild(this.actionPhase)}},{key:"loadScreenPlayChallenged",value:function(e){var t=new Phaser.Sprite(game,this.positionPlayConfig.versus.x*window.GameConfig.RESIZE,this.positionPlayConfig.versus.y*window.GameConfig.RESIZE,this.positionPlayConfig.versus.nameAtlas,this.positionPlayConfig.versus.nameSprite);t.anchor.set(.5);var n=new Phaser.Text(game,this.positionPlayConfig.txt_versus.x*window.GameConfig.RESIZE,this.positionPlayConfig.txt_versus.y*window.GameConfig.RESIZE,this.positionPlayConfig.txt_versus.text,this.positionPlayConfig.txt_versus.configs);n.anchor.set(.5),t.addChild(n),t.scale.set(.1),this.addChild(t),game.add.tween(t.scale).to({x:1,y:1},400,"Linear").start(),this.UserSpriteRight=new ed,this.UserSpriteRight.setAva("ava_fb",dV.instance().dataMySeft.vip),this.UserSpriteRight.setPosition(),this.UserSpriteRight.setNameAndScore("You",this.score),this.UserSpriteRight.setLevelPlaylist(this.user_playlist_mapping),this.UserSpriteRight.addDotOnline(),this.addChild(this.UserSpriteRight),this.UserSpriteRight.makeTweenAvaLoading(),this.trueOrFalseUser=new bd,this.trueOrFalseUser.setSize(330*window.GameConfig.RESIZE,330*window.GameConfig.RESIZE),this.trueOrFalseUser.x=320*window.GameConfig.RESIZE,this.trueOrFalseUser.y=-25*window.GameConfig.RESIZE,this.addChild(this.trueOrFalseUser),this.UserSpriteLeft=new sd(this.opponent),this.UserSpriteLeft.setAva(this.opponent.avatar,this.opponent.vip),this.UserSpriteLeft.setPosition(),this.UserSpriteLeft.setNameAndScore(this.opponent.userName,e),this.UserSpriteLeft.setLevelPlaylist(this.opponent_playlist_mapping),this.UserSpriteLeft.addDotOnline(),this.addChild(this.UserSpriteLeft),this.trueOrFalseOpp=new bd,this.trueOrFalseOpp.setSize(330*window.GameConfig.RESIZE,330*window.GameConfig.RESIZE),this.trueOrFalseOpp.x=-10*window.GameConfig.RESIZE,this.trueOrFalseOpp.y=-25*window.GameConfig.RESIZE,this.addChild(this.trueOrFalseOpp),this.UserSpriteLeft.makeTweenAvaLoading(),this.loadAfter()}},{key:"loadAfter",value:function(){for(var e=[],t=0;t<5;t++)e.push(this.questions[t].songEntity.fileUrl);rl.instance().loadSoundArray(e),LogConsole.log("arrSongs:------- "),rl.instance().event.loadComplete.add(this.loadComplete,this)}},{key:"setData",value:function(e,t,n,i,o,a){this.questions=e,this.opponent=t,this.user_playlist_mapping=n,this.opponent_playlist_mapping=i,this.playlist=o,this.opponentAnswerLogs=a}},{key:"setDataBeChallenged",value:function(e,t,n){this.play_log_id=e,this.request_id=t,this.isHasHistory=n}},{key:"loadComplete",value:function(){LogConsole.log("load complete"),this.loadingAnim.destroy(),this.makeTweenToPlay()}},{key:"loadStart",value:function(){}},{key:"makeTweenToPlay",value:function(){0==this.countQuiz&&(this.UserSpriteLeft.makeTweenAva(),this.UserSpriteRight.makeTweenAva()),this.addBtnRemoveAnswer(),this.createGamePlayChallenged()}},{key:"createGamePlayChallenged",value:function(){this.timeCounter=game.time.create(),0==this.countQuiz?this.createLoadingScreenAfterStart():this.displayAnswering()}},{key:"addCircleNormal",value:function(){for(var e=this,t=function(t){0==e.countQuiz&&setTimeout(function(){var n=new Phaser.Sprite(game,(e.positionPlayConfig.circleNormal.x+62*t)*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+e.positionPlayConfig.circleNormal.y+50)*window.GameConfig.RESIZE,e.positionPlayConfig.circleNormal.nameAtlas,e.positionPlayConfig.circleNormal.nameSprite);n.anchor.set(.5),game.add.tween(n).to({y:(game.height-oe.instance().STANDARD_HEIGHT+e.positionPlayConfig.circleNormal.y)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1).start(),e.addChild(n)},50*t)},n=0;n<5;n++)t(n)}},{key:"addCorrectListSprites",value:function(){for(var e=0;e<this.correctList.length;e++){var t=new Phaser.Sprite(game,(this.positionPlayConfig.circleWhite.x+62*this.correctList[e].countQuiz)*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.circleWhite.y)*window.GameConfig.RESIZE,this.positionPlayConfig.circleWhite.nameAtlas,this.positionPlayConfig.circleWhite.nameSprite);t.anchor.set(.5),this.addChild(t);var n=new Phaser.Text(game,0,3*window.GameConfig.RESIZE,this.correctList[e].time.toFixed(1),{font:"GilroyBold",fontSize:15});n.anchor.set(.5),t.addChild(n)}}},{key:"addWrongListSprites",value:function(){for(var e=0;e<this.wrongList.length;e++){var t=new Phaser.Sprite(game,(this.positionPlayConfig.circleWhite.x+62*this.wrongList[e])*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.circleWhite.y)*window.GameConfig.RESIZE,this.positionPlayConfig.circleWhite.nameAtlas,this.positionPlayConfig.circleWhite.nameSprite);t.anchor.set(.5),this.addChild(t);var n=new Phaser.Sprite(game,0,0,this.positionPlayConfig.wrongMini.nameAtlas,this.positionPlayConfig.wrongMini.nameSprite);n.anchor.set(.5),t.addChild(n)}}},{key:"createLoadingScreenAfterStart",value:function(){var e=this,t=game.add.audio("beep_audio"),n=new Phaser.Text(game,this.positionPlayConfig.countdownNumber.x*window.GameConfig.RESIZE,(this.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,"3",this.positionPlayConfig.countdownNumber.configs);n.anchor.set(.5),this.addChild(n);var i=game.add.tween(n).to({y:this.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,n.setText("2");var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,n.setText("1");var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){He.instance().logEvent(He.pro_quiz_start_turnbase),n.setText(de.instance().getData("270")),n.scale.set(.5),n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE;var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),i.onComplete.add(function(){n.destroy(),t.destroy(),e.addCircleNormal(),e.displayAnswering()})})})})}},{key:"displayAnswering",value:function(){var e=this;this.namePlaylist.destroy(),this.btn_remove_answer.revive(),console.log("LINK PLAY"+this.questions[this.countQuiz].songEntity.fileUrl),rl.instance().playsound(this.questions[this.countQuiz].songEntity.fileUrl),this.timeTweenBegin=game.time.events.add(.5*Phaser.Timer.SECOND,function(){if(e.spriteTime=new Phaser.Sprite(game,0,(game.height-746)*window.GameConfig.RESIZE,"otherSprites","tween-time"),e.spriteTime.anchor.set(0,.5),e.addChild(e.spriteTime),e.tweenSpriteTime=game.add.tween(e.spriteTime.scale).to({x:70,y:1},1e4,"Linear"),e.createFourAnswer(),e.timeTweenStart=game.time.events.add(.2*Phaser.Timer.SECOND,function(){e.tweenSpriteTime.start(),e.timeCounter.start()},e),e.btn_remove_answer.inputEnabled=!0,e.btn_remove_answer.alpha=1,e.tweenSpriteTime.onComplete.add(function(){}),0==e.countQuiz){var t=new _o;t.afterInit(),t.addHelperStep4(),t.changeBg(),e.addChild(t),oe.instance().playScript.playing_guide==_o.DONE_GET_QUEST?e.timePS4=game.time.events.add(1.4*Phaser.Timer.SECOND,function(){t.addStep4UseSupportItem(),t.event.step4.add(e.stepRemoveAnswer,e)}):t.destroy()}if(1==e.countQuiz){var n=new _o;n.afterInit(),e.addChild(n),oe.instance().playScript.playing_guide==_o.DONE_GET_QUEST?(n.addStep9GoodLuck(),oe.instance().playScript.playing_guide=_o.DONE_ALL):n.destroy()}})}},{key:"stepRemoveAnswer",value:function(){this.tweenSpriteTime.resume(),this.timeCounter.resume(),rl.instance().resumeSound(),dV.instance().sendData(ki.PLAY_SCRIPT_DONE_ALL_REQUEST,null),this.sendRemoveAnswer()}},{key:"activeAnswer",value:function(){this.answerA.activeInput(),this.answerB.activeInput(),this.answerC.activeInput(),this.answerD.activeInput()}},{key:"addBtnRemoveAnswer",value:function(){this.btn_remove_answer=new Phaser.Button(game,this.positionPlayConfig.btn_remove_answer.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.btn_remove_answer.y)*window.GameConfig.RESIZE,this.positionPlayConfig.btn_remove_answer.nameAtlas,function(){},this,null,this.positionPlayConfig.btn_remove_answer.nameSprite),this.btn_remove_answer.anchor.set(.5),this.btn_remove_answer.kill();var e=new Phaser.Text(game,this.positionPlayConfig.txt_remove_answer.x*window.GameConfig.RESIZE,this.positionPlayConfig.txt_remove_answer.y*window.GameConfig.RESIZE,de.instance().getData("271"),this.positionPlayConfig.txt_remove_answer.configs);e.anchor.set(.5);var t=new Qt(this.positionPlayConfig.txt_dis_one,this.positionPlayConfig.txt_dis_one.text);t.anchor.set(.5),t.x=e.x+e.width/2+15,this.btn_remove_answer.addChild(t);var n=new Phaser.Sprite(game,this.positionPlayConfig.diamond_remove_answer.x*window.GameConfig.RESIZE,this.positionPlayConfig.diamond_remove_answer.y*window.GameConfig.RESIZE,this.positionPlayConfig.diamond_remove_answer.nameAtlas,this.positionPlayConfig.diamond_remove_answer.nameSprite);n.anchor.set(1,.5);var i=new Bt(this.positionPlayConfig.mic_so_luong);i.anchor.set(.5),this.countMic=dV.instance().socket.mySelf.getVariable("support_item").value,this.numberOfSptItem=new Qt(this.positionPlayConfig.number_mic_so_luong,dV.instance().socket.mySelf.getVariable("support_item").value),this.numberOfSptItem.anchor.set(.5),i.addChild(this.numberOfSptItem),this.btn_remove_answer.addChild(i),this.btn_remove_answer.addChild(n),this.btn_remove_answer.addChild(e),this.btn_remove_answer.inputEnabled=!1,this.btn_remove_answer.events.onInputUp.add(this.sendRemoveAnswer,this),this.addChild(this.btn_remove_answer)}},{key:"removeAnswer",value:function(){this.countMic--,this.numberOfSptItem.setText(this.countMic),this.btn_remove_answer.inputEnabled=!1,this.btn_remove_answer.alpha=.5,Gl.getTwoOfFourAnswer(this.answerA,this.answerB,this.answerC,this.answerD,this.questions[this.countQuiz])}},{key:"sendRemoveAnswer",value:function(){this.btn_remove_answer.inputEnabled=!1,be.instance().playSound(be.buttonclick),0==this.checkUseSpt&&(this.checkUseSpt=!0,dV.instance().dataMySeft.support_item>0?(dV.instance().sendData(ki.SUPPORT_REQUEST,null),this.removeAnswer()):jC.instance().addDialog("Bạn không đủ Míc")),be.instance().playSound(be.buttonclick)}},{key:"createFourAnswer",value:function(){for(var e=0;e<4;e++)0==e&&(this.answerA=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerA.event.answer.add(this.updateOnClickAnswer,this),this.opponentAnswerLogs[this.countQuiz].answer==e+1&&this.addAvaMiniInTheLeftOfTab(this.answerA.sprite),this.addChild(this.answerA)),1==e&&(this.answerB=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerB.event.answer.add(this.updateOnClickAnswer,this),this.opponentAnswerLogs[this.countQuiz].answer==e+1&&this.addAvaMiniInTheLeftOfTab(this.answerB.sprite),this.addChild(this.answerB)),2==e&&(this.answerC=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerC.event.answer.add(this.updateOnClickAnswer,this),this.opponentAnswerLogs[this.countQuiz].answer==e+1&&this.addAvaMiniInTheLeftOfTab(this.answerC.sprite),this.addChild(this.answerC)),3==e&&(this.answerD=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerD.event.answer.add(this.updateOnClickAnswer,this),this.opponentAnswerLogs[this.countQuiz].answer==e+1&&this.addAvaMiniInTheLeftOfTab(this.answerD.sprite),this.addChild(this.answerD))}},{key:"updateOnClickAnswer",value:function(e){if(this.answerA.sprite.inputEnabled=!1,this.answerB.sprite.inputEnabled=!1,this.answerC.sprite.inputEnabled=!1,this.answerD.sprite.inputEnabled=!1,this.answered=e,this.calculateScoreOpp(),e+1==this.questions[this.countQuiz].correctAnswer){if(this.setActionPhaseOnCorrect(),this.setTrueAva(),this.answeredResult=!0,this.timeCounter.ms/1e3>10)this.score+=Math.floor(100*Math.pow(1,(this.streak-1)/4)),this.correctList.push({countQuiz:this.countQuiz,time:10});else{var t=parseFloat((this.timeCounter.ms/1e3).toFixed(1));this.score+=Math.floor(100*(11-t)*Math.pow(11-t,(this.streak-1)/4)),this.correctList.push({countQuiz:this.countQuiz,time:t})}this.setScore(this.score),_t.instance().updateExpPlaylist(this.playlist.id)}else this.setFalseAva(),this.answeredResult=!1,this.wrongList.push(this.countQuiz);for(var n=0;n<4;n++)0==n&&this.setTrueFalseTabAnswer(this.answerA,n),1==n&&this.setTrueFalseTabAnswer(this.answerB,n),2==n&&this.setTrueFalseTabAnswer(this.answerC,n),3==n&&this.setTrueFalseTabAnswer(this.answerD,n);this.pushResultAnswer(),this.addCorrectListSprites(),this.addWrongListSprites(),this.timeNextQuestion=game.time.events.add(1*Phaser.Timer.SECOND,this.resetQuestion,this)}},{key:"setActionPhaseOnCorrect",value:function(){this.questions[this.countQuiz].correctAnswer>2?this.actionPhase.position.y=game.height-636:this.actionPhase.position.y=game.height-416,this.actionPhase.setStreak(this.streak),this.addChild(this.actionPhase)}},{key:"addAvaMiniInTheLeftOfTab",value:function(e){var t,n=game.add.graphics(0,0);(n.beginFill(16777215),n.drawCircle(-246*window.GameConfig.RESIZE,0,40*window.GameConfig.RESIZE),n.anchor.set(.5),window.MQ.isBotMode)?((t=game.add.sprite(-246*window.GameConfig.RESIZE,0,"bot-mini".concat(window.MQ.botKey))).anchor.set(.5),t.mask=n):""!==this.opponent.avatar?((t=game.add.sprite(-246*window.GameConfig.RESIZE,0,this.opponent.avatar)).anchor.set(.5),t.scale.set(window.GameConfig.SCALE_AVA_OPPO_INTHELEFT*window.GameConfig.RESIZE),t.mask=n):((t=game.add.sprite(-246*window.GameConfig.RESIZE,0,"songDetailSprites","ava-default")).anchor.set(.5),t.scale.set(window.GameConfig.SCALE_AVA_OPPO_INTHELEFT*window.GameConfig.RESIZE),t.mask=n);t.kill(),e.addChild(n),e.addChild(t),this.timeAvaMiniShow=game.time.create(!0),this.timeAvaMiniShow.add(Phaser.Timer.SECOND*(this.opponentAnswerLogs[this.countQuiz].answer_time+.4),function(){t.revive()}),this.timeAvaMiniShow.start()}},{key:"calculateScoreOpp",value:function(){if(this.countQuiz<=4)if("CORRECT"==this.opponentAnswerLogs[this.countQuiz].result.toUpperCase()){this.setTrueAvaOpp();var e=Math.floor(100*(11-this.opponentAnswerLogs[this.countQuiz].answer_time)*Math.pow(11-this.opponentAnswerLogs[this.countQuiz].answer_time,(this.opponentAnswerLogs[this.countQuiz].streak-1)/4));this.scoreOpp+=e,this.setScoreOpp(this.scoreOpp)}else this.setFalseAvaOpp()}},{key:"pushResultAnswer",value:function(){var e="INCORRECT";if(1==this.answeredResult&&(e="CORRECT"),this.timeCounter.ms/1e3>10)this.answers.push({answer_time:10,result:e,answer:this.answered+1,streak:this.streak,question_id:this.questions[this.countQuiz].id,created:Date.now(),index:0});else{var t=(this.timeCounter.ms/1e3).toFixed(1);this.answers.push({answer_time:parseFloat(t),result:e,answer:this.answered+1,streak:this.streak,question_id:this.questions[this.countQuiz].id,created:Date.now(),index:0})}}},{key:"removeTimeNextQuestion",value:function(){null!==this.timeNextQuestion&&game.time.events.remove(this.timeNextQuestion)}},{key:"resetQuestion",value:function(){this.removeTimeNextQuestion(),this.tweenSpriteTime.stop(),this.spriteTime.destroy(),this.timeCounter.stop(),this.actionPhase.setDefault(),this.timeCounter.destroy(),this.checkUseSpt=!1,this.answerA.destroy(),this.answerB.destroy(),this.answerC.destroy(),this.answerD.destroy(),this.btn_remove_answer.revive(),1==this.answeredResult?this.streak++:this.streak=1,this.countQuiz<4?(this.countQuiz+=1,this.createGamePlayChallenged()):(rl.instance().removeSound(),this.result={answers:this.answers,score:this.score,scoreOpp:this.scoreOpp,game_log_id:this.play_log_id,challenge_request_id:this.request_id,opponentAnswerLogs:this.opponentAnswerLogs,playlist_id:this.playlist.id},this.event.resultGame.dispatch(this.result))}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.SUPPORT_RESPONSE&&e.params.getUtfString("status")}},{key:"setTrueFalseTabAnswer",value:function(e,t){t==this.answered?t==this.questions[this.countQuiz].correctAnswer-1?e.displayScreenWhenAnswerRight():e.displayScreenWhenAnswerWrong():t==this.questions[this.countQuiz].correctAnswer-1?e.displayScreenWhenAnswerRight():e.displayScreenWhenAnswerNotChoosed()}},{key:"setTrueAva",value:function(){this.trueOrFalseUser.setTrueAnswer()}},{key:"setFalseAva",value:function(){this.trueOrFalseUser.setFailtAnswer()}},{key:"setTrueAvaOpp",value:function(){this.trueOrFalseOpp.setTrueAnswer()}},{key:"setFalseAvaOpp",value:function(){this.trueOrFalseOpp.setFailtAnswer()}},{key:"setScore",value:function(e){this.UserSpriteRight.setScore(e)}},{key:"setScoreOpp",value:function(e){this.UserSpriteLeft.setScore(e)}},{key:"destroy",value:function(){for(this.removeEventExtension(),game.time.events.remove(this.timeTweenBegin),game.time.events.remove(this.timeTweenStart),game.time.events.remove(this.timePS4),game.time.events.remove(this.timeNextQuestion),rl.instance().event.loadComplete.remove(this.loadComplete,this);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),zf(Yf(t.prototype),"destroy",this).call(this)}}])&&qf(n.prototype,i),o&&qf(n,o),t}();function $f(e){return($f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ep(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tp(e,t){return!t||"object"!==$f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function np(e,t,n){return(np="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ip(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ip(e){return(ip=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function op(e,t){return(op=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ap=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=tp(this,ip(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),e.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.bg=new Phaser.Sprite(game,0,0,"bg_create_room"),e.addChild(e.bg),e.event={playYourTurn:new Phaser.Signal,challenge:new Phaser.Signal,reHome:new Phaser.Signal},e.type=null,e.isLastWeek=!1,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&op(e,t)}(t,Z),n=t,(i=[{key:"setType",value:function(e){this.type=e}},{key:"afterInit",value:function(){this.addEventExtension(),this.loadDisplayBeChallenged(function(){ht.instance().hideLoading()})}},{key:"setData",value:function(e,t,n,i,o,a,s,r,l){this.questions=e,this.opponent=t,this.user_playlist_mapping=n,this.opponent_playlist_mapping=i,this.playlist=o,this.result=a,this.opponentAnswerLogs=s,this.weeklyResult=r,this.historyGameLog=l}},{key:"loadDisplayBeChallenged",value:function(e){this.UserSpriteRightWin=new Pf,this.UserSpriteRightWin.setAva("ava_fb",dV.instance().dataMySeft.vip),this.UserSpriteRightWin.setNameAndScore("You",this.result.score),this.UserSpriteRightWin.setLevelPlaylist(this.user_playlist_mapping),this.UserSpriteRightWin.makeDefaultScreenNotTween(),this.UserSpriteRightWin.addDotOnline(),this.addChild(this.UserSpriteRightWin),this.UserSpriteLeftWin=new Af(this.opponent),this.UserSpriteLeftWin.setAva(this.opponent.avatar,this.opponent.vip),this.UserSpriteLeftWin.setNameAndScore(this.opponent.userName,this.result.scoreOpp),this.UserSpriteLeftWin.setLevelPlaylist(this.opponent_playlist_mapping),this.UserSpriteLeftWin.makeDefaultScreenNotTween(),this.UserSpriteLeftWin.addDotOnline(),this.addChild(this.UserSpriteLeftWin),this.createBoxScoreFriendChallen(),e()}},{key:"createBoxScoreFriendChallen",value:function(){var e=this,t=new Phaser.Text(game,game.width/2,485*window.GameConfig.RESIZE,de.instance().getData("260"),{font:"Gilroy",fill:"#9d92a6",fontSize:19});t.anchor.set(.5),this.addChild(t);var n=new Phaser.Sprite(game,0,0,"playSprites","Header"),i=new Phaser.Text(game,game.width/2,35*window.GameConfig.RESIZE,this.playlist.name,{font:"Gilroy",fill:"white",fontSize:23});i.anchor.set(.5),n.addChild(i),this.addChild(n);var o=new Phaser.Graphics(game,0,551*window.GameConfig.RESIZE);o.beginFill(),o.drawRect(0,0,game.width,(game.height-676)*window.GameConfig.RESIZE),o.endFill(),this.addChild(o);var a=new Phaser.Button(game,game.width/2,1200*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"Box_ketqua_old");a.anchor.set(.5,0),a.mask=o;var s=new Phaser.Text(game,game.width/2,520*window.GameConfig.RESIZE,"Score",{font:"GilroyBold",fill:"white",fontSize:30});if(this.result.score>this.result.scoreOpp){be.instance().playSound(be.winturnbase),(l=new Phaser.Text(game,game.width/2,145*window.GameConfig.RESIZE,de.instance().getData("254"),{font:"GilroyBold",fill:"white",fontSize:40})).anchor.set(.5),null==this.weeklyResult?s.setText("0 - 0"):s.setText("".concat(this.weeklyResult.opponentWon," - ").concat(this.weeklyResult.userWon));var r=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,140*window.GameConfig.RESIZE,"firework");r.anchor.set(.5),this.addChild(r);r.animations.add("run_win");r.animations.play("run_win",30,!0),this.addChild(l),this.UserSpriteRightWin.addBtnWinGemAndExp()}else if(this.result.score==this.result.scoreOpp){be.instance().playSound(be.loseturnbase),(l=new Phaser.Text(game,game.width/2,145*window.GameConfig.RESIZE,de.instance().getData("255"),{font:"GilroyBold",fill:"white",fontSize:40})).anchor.set(.5),null==this.weeklyResult?s.setText("0 - 0"):s.setText("".concat(this.weeklyResult.opponentWon," - ").concat(this.weeklyResult.userWon)),this.addChild(l),this.UserSpriteRightWin.addBtnLoseGemAndExp()}else{var l;be.instance().playSound(be.loseturnbase),(l=new Phaser.Text(game,game.width/2,145*window.GameConfig.RESIZE,de.instance().getData("256"),{font:"GilroyBold",fill:"white",fontSize:40})).anchor.set(.5),null==this.weeklyResult?s.setText("0 - 0"):s.setText("".concat(this.weeklyResult.opponentWon," - ").concat(this.weeklyResult.userWon)),this.addChild(l),this.UserSpriteRightWin.addBtnLoseGemAndExp()}s.anchor.set(.5),this.addChild(s),this.addChild(a);var c=new Phaser.Group(game,0,0);c.y=1200,this.addChild(c);var h=new Phaser.Rectangle(35,0,615*window.GameConfig.RESIZE,(game.height-685)*window.GameConfig.RESIZE);this.listView=new Ia(game,c,h,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.addTweenBoxResult(a,c);for(var u=0;u<5;u++){var d=new uf(this.questions[u].songEntity,this.result.answers[u],this.opponentAnswerLogs[u],u);d.event.playSound.add(this.playSongResult,this),this.listView.add(d)}var f=new Bt(this.positionWinConfig.shadow);f.y=game.height-oe.instance().STANDARD_HEIGHT+this.positionWinConfig.shadow.y,this.addChild(f);var p=new Phaser.Button(game,378*window.GameConfig.RESIZE,(game.height-86)*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"btn_next_game");p.anchor.set(.5),this.addChild(p);var g,y=new Phaser.Text(game,0,0,de.instance().getData("259"),this.positionWinConfig.txt_play_your_turn.configs);("CHALLENGE"==this.type&&y.setText(de.instance().getData("258")),y.anchor.set(.5),p.addChild(y),p.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),"CHALLENGE"==e.type?e.event.challenge.dispatch():e.event.playYourTurn.dispatch()},this),"en"==de.instance().currentLanguage)?((g=new Phaser.Button(game,this.positionWinConfig.share_en.x*window.GameConfig.RESIZE,this.positionWinConfig.share_en.y*window.GameConfig.RESIZE,this.positionWinConfig.share_en.nameAtlas,function(){},this,null,this.positionWinConfig.share_en.nameSprite)).anchor.set(.5),g.events.onInputUp.add(this.shareResult,this),this.addChild(g)):((g=new Phaser.Button(game,this.positionWinConfig.share.x*window.GameConfig.RESIZE,this.positionWinConfig.share.y*window.GameConfig.RESIZE,this.positionWinConfig.share.nameAtlas,function(){},this,null,this.positionWinConfig.share.nameSprite)).anchor.set(.5),g.events.onInputUp.add(this.shareResult,this),this.addChild(g));var m=new Phaser.Button(game,80*window.GameConfig.RESIZE,(game.height-86)*window.GameConfig.RESIZE,"otherSprites",function(){},this,null,"Button_home");m.anchor.set(.5),m.events.onInputUp.add(this.backHome,this),this.addChild(m),this.addBtnLastWeekResult()}},{key:"addBtnLastWeekResult",value:function(){this.btnLastWeekResult=new Phaser.Button(game,this.positionWinConfig.last_week.x*window.GameConfig.RESIZE,this.positionWinConfig.last_week.y*window.GameConfig.RESIZE,this.positionWinConfig.last_week.nameAtlas,function(){},this,null,this.positionWinConfig.last_week.nameSprite),this.btnLastWeekResult.anchor.set(.5),this.btnLastWeekResult.events.onInputUp.add(this.chooseLastWeek,this);var e=new Phaser.Text(game,this.positionWinConfig.last_week.txt.x,this.positionWinConfig.last_week.txt.y,de.instance().getData("257"),this.positionWinConfig.last_week.txt.configs);e.anchor.set(.5),this.btnLastWeekResult.addChild(e),this.addChild(this.btnLastWeekResult)}},{key:"chooseLastWeek",value:function(){this.isLastWeek=!0,jC.instance().addLastWeekResultScreen(this.opponent)}},{key:"backHome",value:function(){be.instance().playSound(be.buttonclick),0==this.isLastWeek&&this.event.reHome.dispatch()}},{key:"playSongResult",value:function(e){rl.instance().pauseSound();for(var t=0;t<this.listView.grp.children.length;t++){var n=this.listView.grp.children[t];n.index!==e?n.stopSound():n.playSound()}}},{key:"shareResult",value:function(){be.instance().playSound(be.buttonclick),Ri.instance().share()}},{key:"backLastWeek",value:function(){this.isLastWeek=!1}},{key:"onShared",value:function(e){e.hasOwnProperty("error_code")||this.sendShareResult()}},{key:"sendShareResult",value:function(){dV.instance().sendData(DataCommand.FB_USER_SHARED_RESULT_REQUEST,null)}},{key:"onExtensionResponse",value:function(e){}},{key:"addTweenBoxResult",value:function(e,t){game.add.tween(e).to({y:551*window.GameConfig.RESIZE},500,"Linear",!1).start(),game.add.tween(t).to({y:551*window.GameConfig.RESIZE},500,"Linear",!1).start()}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.backHome,this),Qe.instance().event.backLastWeek.add(this.backLastWeek,this),Ri.instance().event.share.add(this.onShared,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.backHome,this),Qe.instance().event.backLastWeek.remove(this.backLastWeek,this),Ri.instance().event.share.remove(this.onShared,this)}},{key:"destroy",value:function(){for(this.removeEventExtension(),this.listView.removeAll(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),np(ip(t.prototype),"destroy",this).call(this)}}])&&ep(n.prototype,i),o&&ep(n,o),t}();function sp(e){return(sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lp(e,t){return!t||"object"!==sp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cp(e){return(cp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hp(e,t){return(hp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var up=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=lp(this,cp(t).call(this,game))).index=n,i.afterCreate(e),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hp(e,t)}(t,Z),n=t,(i=[{key:"afterCreate",value:function(e){this._width=e,this._height=272*window.GameConfig.RESIZE,this.key="",this.ava=new Phaser.Sprite(game,0,0,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.signalInput=new Phaser.Signal,this.maskAva=new Phaser.Graphics(game,0,0),this.addChild(this.ava)}},{key:"addInput",value:function(e,t){this.removeEventInput(e,t),this.addEventInput(e,t),this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(this.onClickSprite,this)}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}},{key:"onClickSprite",value:function(){be.instance().playSound(be.buttonclick),this.signalInput.dispatch(this.value),LogConsole.log("hehehe")}},{key:"addNameAva",value:function(e,t){this.txtName=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,t,e.configs),this.txtName.anchor.set(.5,0),this.addChild(this.txtName)}},{key:"addMaskAva",value:function(e){this.maskAva.beginFill(),this.maskAva.drawCircle(this.ava.x,this.ava.y,e),this.maskAva.endFill(),this.ava.mask=this.maskAva,this.addChild(this.maskAva)}},{key:"setValue",value:function(e){this.value=e}},{key:"setScale",value:function(e){this.ava.width=200,this.ava.height=200}},{key:"beginLoad",value:function(e){this.key=e,game.cache.checkImageKey(e)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(e))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){try{game.cache.checkImageKey(e.key)&&e&&(""!==e.key?(e.ava.loadTexture("".concat(e.key)),e.ava.width=200,e.ava.height=200):e.ava.loadTexture("songDetailSprites","ava-default"))}catch(e){}},150*this.index)}},{key:"loadStart",value:function(){LogConsole.log("loadStart")}},{key:"width",set:function(e){this._width=e},get:function(){return this._width}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&rp(n.prototype,i),o&&rp(n,o),t}();function dp(e){return(dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pp(e,t){return!t||"object"!==dp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gp(e){return(gp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yp(e,t){return(yp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mp=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=pp(this,gp(t).call(this,game,0,0,"screen-dim"))).input.useHandCursor=!1,e.signalInput=new Phaser.Signal,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yp(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){this.avaOpp,this.nameOpp,this.avaUrl}},{key:"setAvaUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.avaUrl=e,this.vip=t}},{key:"setTxtNameOpp",value:function(e){this.txtNameOpp=e}},{key:"addPopup",value:function(){this.removePopupConfirm(),this.popup=new Kl,this.popup.x=35*window.GameConfig.RESIZE,this.popup.y=372*window.GameConfig.RESIZE,this.popup.setTextCancle(de.instance().getData("309")),this.popup.setContent("".concat(this.txtNameOpp).concat(de.instance().getData("310"))),this.popup.txtContent.addColor("#ffab4f",0),this.popup.txtContent.addColor("#000000",this.txtNameOpp.length),this.popup.event.OK.add(this.onOK,this),this.popup.event.CANCLE.add(this.onCancle,this),this.addChild(this.popup),this.addAvaAndNameOpp()}},{key:"onOK",value:function(){LogConsole.log("onOK"),this.popup.destroy(),this.popup=null,this.signalInput.dispatch("OK"),this.destroy()}},{key:"onCancle",value:function(){LogConsole.log("ononCancle"),this.popup.destroy(),this.popup=null,this.signalInput.dispatch("CANCLE"),this.destroy()}},{key:"removePopupConfirm",value:function(){null!==this.popup&&void 0!==this.popup&&(this.popup.destroy(),this.popup=null)}},{key:"addAvaAndNameOpp",value:function(){this.avaOpp=new up(0),this.avaOpp.x=284*window.GameConfig.RESIZE,this.avaOpp.beginLoad(this.avaUrl),this.avaOpp.addMaskAva(184),this.avaOpp.setScale(),this.popup.addChild(this.avaOpp),!0===this.vip&&(this.frameVip=new Phaser.Sprite(game,this.avaOpp.x,this.avaOpp.y+5,"vipSource","Ava_Popup"),this.frameVip.anchor.set(.5),this.popup.addChild(this.frameVip))}}])&&fp(n.prototype,i),o&&fp(n,o),t}();function vp(e){return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bp(e,t){return!t||"object"!==vp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _p(e){return(_p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sp(e,t){return(Sp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ep=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=bp(this,_p(t).call(this,game))).positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.event={playIllegalTurn:new Phaser.Signal,illegalTurnCancle:new Phaser.Signal},e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sp(e,t)}(t,Z),n=t,(i=[{key:"makeNewGameBeChallenged",value:function(e,t){this.game_log_id=e.game_log_id,this.request_id=e.request_id,t()}},{key:"setData",value:function(e){this.opponent=e}},{key:"addPopupIllegalTurn",value:function(){this.popup=new mp,this.popup.setAvaUrl(this.opponent.avatar,this.opponent.vip),this.popup.setTxtNameOpp(this.opponent.userName),this.popup.addPopup(),this.popup.signalInput.add(this.onPopupCallback,this),this.addChild(this.popup)}},{key:"onPopupCallback",value:function(e){"OK"==e?this.event.playIllegalTurn.dispatch({game_log_id:this.game_log_id,request_id:this.request_id}):this.event.illegalTurnCancle.dispatch()}}])&&wp(n.prototype,i),o&&wp(n,o),t}();function Cp(e){return(Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pp(e,t){return!t||"object"!==Cp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Op(e,t,n){return(Op="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rp(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Rp(e){return(Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xp(e,t){return(xp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tp=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Pp(this,Rp(t).call(this,game))).positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),e.positionPlayConfig=JSON.parse(game.cache.getText("positionPlayConfig")),e.event={resultGame:new Phaser.Signal,doneTutorial:new Phaser.Signal},e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xp(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.addScreenLoadTurnBase()}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"addScreenLoadTurnBase",value:function(){this.score=0,this.scoreOpp=0,this.countQuiz=0,this.correctList=[],this.wrongList=[],this.streak=1,this.answers=[],this.result,this.timeNextQuestion=null,this.bg=new Phaser.Sprite(game,0,0,"bg_create_room"),this.addChild(this.bg);var e=new Bt(this.positionPlayConfig.line_top);this.addChild(e),this.loadScreenPlayChallenged(this.scoreOpp),this.addNamePlaylistAndTextLoading(),this.addActionPhase()}},{key:"addNamePlaylistAndTextLoading",value:function(){this.namePlaylist=new Phaser.Text(game,this.positionPlayConfig.namePlaylist.x*window.GameConfig.RESIZE,(this.positionPlayConfig.namePlaylist.y+80)*window.GameConfig.RESIZE,this.playlist.name,this.positionPlayConfig.namePlaylist.configs),this.namePlaylist.anchor.set(.5),this.addChild(this.namePlaylist),game.add.tween(this.namePlaylist).to({y:this.positionPlayConfig.namePlaylist.y*window.GameConfig.RESIZE},300,Phaser.Easing.Linear.Out,!1).start(),this.loadingAnim=new ot,this.addChild(this.loadingAnim)}},{key:"addActionPhase",value:function(){this.actionPhase=new Od,this.actionPhase.position.x=(this.game.width-this.actionPhase.width)/2,this.addChild(this.actionPhase)}},{key:"loadScreenPlayChallenged",value:function(e){var t=new Phaser.Sprite(game,this.positionPlayConfig.versus.x*window.GameConfig.RESIZE,this.positionPlayConfig.versus.y*window.GameConfig.RESIZE,this.positionPlayConfig.versus.nameAtlas,this.positionPlayConfig.versus.nameSprite);t.anchor.set(.5);var n=new Phaser.Text(game,this.positionPlayConfig.txt_versus.x*window.GameConfig.RESIZE,this.positionPlayConfig.txt_versus.y*window.GameConfig.RESIZE,this.positionPlayConfig.txt_versus.text,this.positionPlayConfig.txt_versus.configs);n.anchor.set(.5),t.addChild(n),t.scale.set(.1),this.addChild(t),game.add.tween(t.scale).to({x:1,y:1},400,"Linear").start(),this.UserSpriteRight=new ed,this.UserSpriteRight.setAva("ava_fb"),this.UserSpriteRight.setPosition(),this.UserSpriteRight.setNameAndScore("You",this.score),this.UserSpriteRight.setLevelPlaylist(this.user_playlist_mapping),this.UserSpriteRight.addDotOnline(),this.addChild(this.UserSpriteRight),this.UserSpriteRight.makeTweenAvaLoading(),this.trueOrFalseUser=new bd,this.trueOrFalseUser.setSize(330*window.GameConfig.RESIZE,330*window.GameConfig.RESIZE),this.trueOrFalseUser.x=320*window.GameConfig.RESIZE,this.trueOrFalseUser.y=-25*window.GameConfig.RESIZE,this.addChild(this.trueOrFalseUser),this.UserSpriteLeft=new sd(this.opponent),this.UserSpriteLeft.setAva(this.opponent.avatar),this.UserSpriteLeft.setPosition(),this.UserSpriteLeft.setNameAndScore(this.opponent.userName,e),this.UserSpriteLeft.setLevelPlaylist(this.opponent_playlist_mapping),this.UserSpriteLeft.addDotOnline(),this.addChild(this.UserSpriteLeft),this.trueOrFalseOpp=new bd,this.trueOrFalseOpp.setSize(330*window.GameConfig.RESIZE,330*window.GameConfig.RESIZE),this.trueOrFalseOpp.x=-10*window.GameConfig.RESIZE,this.trueOrFalseOpp.y=-25*window.GameConfig.RESIZE,this.addChild(this.trueOrFalseOpp),this.UserSpriteLeft.makeTweenAvaLoading(),this.loadAfter()}},{key:"loadAfter",value:function(){for(var e=[],t=0;t<5;t++)e.push(this.questions[t].songEntity.fileUrl);rl.instance().loadSoundArray(e),LogConsole.log("arrSongs:------- "),LogConsole.log(e),rl.instance().event.loadComplete.add(this.loadComplete,this)}},{key:"setData",value:function(e,t,n,i,o,a){this.questions=e,this.opponent=t,this.user_playlist_mapping=n,this.opponent_playlist_mapping=i,this.playlist=o,this.opponentAnswerLogs=a}},{key:"setDataBeChallenged",value:function(e,t,n){this.play_log_id=e,this.request_id=t,this.isHasHistory=n}},{key:"loadComplete",value:function(){LogConsole.log("load complete"),this.loadingAnim.destroy(),this.makeTweenToPlay()}},{key:"loadStart",value:function(){}},{key:"makeTweenToPlay",value:function(){0==this.countQuiz&&(this.UserSpriteLeft.makeTweenAva(),this.UserSpriteRight.makeTweenAva()),this.addBtnRemoveAnswer(),this.createGamePlayChallenged()}},{key:"createGamePlayChallenged",value:function(){this.timeCounter=game.time.create(),0==this.countQuiz?this.createLoadingScreenAfterStart():(this.timeCounter.start(),this.displayAnswering())}},{key:"addCircleNormal",value:function(){for(var e=this,t=function(t){0==e.countQuiz&&setTimeout(function(){var n=new Phaser.Sprite(game,(e.positionPlayConfig.circleNormal.x+62*t)*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+e.positionPlayConfig.circleNormal.y+50)*window.GameConfig.RESIZE,e.positionPlayConfig.circleNormal.nameAtlas,e.positionPlayConfig.circleNormal.nameSprite);n.anchor.set(.5),game.add.tween(n).to({y:(game.height-oe.instance().STANDARD_HEIGHT+e.positionPlayConfig.circleNormal.y)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1).start(),e.addChild(n)},50*t)},n=0;n<5;n++)t(n)}},{key:"addCorrectListSprites",value:function(){for(var e=0;e<this.correctList.length;e++){var t=new Phaser.Sprite(game,(this.positionPlayConfig.circleWhite.x+62*this.correctList[e].countQuiz)*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.circleWhite.y)*window.GameConfig.RESIZE,this.positionPlayConfig.circleWhite.nameAtlas,this.positionPlayConfig.circleWhite.nameSprite);t.anchor.set(.5),this.addChild(t);var n=new Phaser.Text(game,0,3*window.GameConfig.RESIZE,this.correctList[e].time.toFixed(1),{font:"GilroyBold",fontSize:15});n.anchor.set(.5),t.addChild(n)}}},{key:"addWrongListSprites",value:function(){for(var e=0;e<this.wrongList.length;e++){var t=new Phaser.Sprite(game,(this.positionPlayConfig.circleWhite.x+62*this.wrongList[e])*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.circleWhite.y)*window.GameConfig.RESIZE,this.positionPlayConfig.circleWhite.nameAtlas,this.positionPlayConfig.circleWhite.nameSprite);t.anchor.set(.5),this.addChild(t);var n=new Phaser.Sprite(game,0,0,this.positionPlayConfig.wrongMini.nameAtlas,this.positionPlayConfig.wrongMini.nameSprite);n.anchor.set(.5),t.addChild(n)}}},{key:"createLoadingScreenAfterStart",value:function(){var e=this,t=game.add.audio("beep_audio"),n=new Phaser.Text(game,this.positionPlayConfig.countdownNumber.x*window.GameConfig.RESIZE,(this.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,"3",this.positionPlayConfig.countdownNumber.configs);n.anchor.set(.5),this.addChild(n);var i=game.add.tween(n).to({y:this.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,n.setText("2");var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE,n.setText("1");var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),t.play(),i.onComplete.add(function(){He.instance().logEvent(He.pro_quiz_start_turnbase),n.setText(de.instance().getData("270")),n.scale.set(.5),n.y=(e.positionPlayConfig.countdownNumber.y+80)*window.GameConfig.RESIZE;var i=game.add.tween(n).to({y:e.positionPlayConfig.countdownNumber.y*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1);i.start(),i.onComplete.add(function(){n.destroy(),t.destroy(),e.addCircleNormal(),e.displayAnswering()})})})})}},{key:"displayAnswering",value:function(){var e=this;if(this.namePlaylist.destroy(),this.btn_remove_answer.revive(),rl.instance().playsound(this.questions[this.countQuiz].songEntity.fileUrl),this.spriteTime=new Phaser.Sprite(game,0,(game.height-746)*window.GameConfig.RESIZE,"otherSprites","tween-time"),this.spriteTime.anchor.set(0,.5),this.addChild(this.spriteTime),this.tweenSpriteTime=game.add.tween(this.spriteTime.scale).to({x:70,y:1},1e4,"Linear"),this.tweenSpriteTime.start(),this.timeCounter.start(),this.createFourAnswer(),this.tweenSpriteTime.onComplete.add(function(){}),0==this.countQuiz){var t=new _o;t.afterInit(),t.addHelperStep1(),this.addChild(t),this.timePS1=game.time.events.add(1.2*Phaser.Timer.SECOND,function(){t.addStep1ChooseAnswerQuest1(e.questions[0],e.countQuiz),t.event.step1.add(e.stepOneChoosed,e)})}if(1==this.countQuiz){var n=new _o;n.afterInit(),n.addHelperStep2(),this.addChild(n),this.timePS2=game.time.events.add(1.2*Phaser.Timer.SECOND,function(){n.addStep2ChooseAnswerQuest2(e.questions[1],e.countQuiz),n.event.step2.add(e.stepTwoChoosed,e)})}if(2==this.countQuiz){var i=new _o;i.afterInit(),i.addHelperStep3(),this.addChild(i),this.timePS3=game.time.events.add(1.2*Phaser.Timer.SECOND,function(){i.addStep3ChooseAnswerQuest3(e.questions[2],e.countQuiz),i.event.step3.add(e.stepThreeChoosed,e)})}}},{key:"stepOneChoosed",value:function(e){this.updateOnClickAnswer(e)}},{key:"stepTwoChoosed",value:function(e){this.updateOnClickAnswer(e)}},{key:"stepThreeChoosed",value:function(e){this.updateOnClickAnswer(e)}},{key:"addBtnRemoveAnswer",value:function(){this.btn_remove_answer=new Phaser.Button(game,this.positionPlayConfig.btn_remove_answer.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionPlayConfig.btn_remove_answer.y)*window.GameConfig.RESIZE,this.positionPlayConfig.btn_remove_answer.nameAtlas,function(){},this,null,this.positionPlayConfig.btn_remove_answer.nameSprite),this.btn_remove_answer.anchor.set(.5),this.btn_remove_answer.kill();var e=new Phaser.Text(game,this.positionPlayConfig.txt_remove_answer.x*window.GameConfig.RESIZE,this.positionPlayConfig.txt_remove_answer.y*window.GameConfig.RESIZE,de.instance().getData("271"),this.positionPlayConfig.txt_remove_answer.configs);e.anchor.set(.5);var t=new Qt(this.positionPlayConfig.txt_dis_one,this.positionPlayConfig.txt_dis_one.text);t.anchor.set(.5),t.x=e.x+e.width/2+15,this.btn_remove_answer.addChild(t);var n=new Phaser.Sprite(game,this.positionPlayConfig.diamond_remove_answer.x*window.GameConfig.RESIZE,this.positionPlayConfig.diamond_remove_answer.y*window.GameConfig.RESIZE,this.positionPlayConfig.diamond_remove_answer.nameAtlas,this.positionPlayConfig.diamond_remove_answer.nameSprite);n.anchor.set(1,.5);var i=new Bt(this.positionPlayConfig.mic_so_luong);i.anchor.set(.5),this.countMic=dV.instance().socket.mySelf.getVariable("support_item").value,this.numberOfSptItem=new Qt(this.positionPlayConfig.number_mic_so_luong,dV.instance().socket.mySelf.getVariable("support_item").value),this.numberOfSptItem.anchor.set(.5),i.addChild(this.numberOfSptItem),this.btn_remove_answer.addChild(i),this.btn_remove_answer.addChild(n),this.btn_remove_answer.addChild(e),this.btn_remove_answer.events.onInputDown.add(this.sendRemoveAnswer,this),this.addChild(this.btn_remove_answer)}},{key:"removeAnswer",value:function(){this.countMic--,this.numberOfSptItem.setText(this.countMic),this.btn_remove_answer.kill(),Gl.getTwoOfFourAnswer(this.answerA,this.answerB,this.answerC,this.answerD,this.questions[this.countQuiz])}},{key:"sendRemoveAnswer",value:function(){dV.instance().dataMySeft.support_item>0||jC.instance().addDialog("Bạn không đủ Míc"),be.instance().playSound(be.buttonclick)}},{key:"createFourAnswer",value:function(){for(var e=0;e<4;e++)0==e&&(this.answerA=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerA.event.answer.add(this.updateOnClickAnswer,this),this.opponentAnswerLogs[this.countQuiz].answer==e+1&&this.addAvaMiniInTheLeftOfTab(this.answerA.sprite),this.addChild(this.answerA)),1==e&&(this.answerB=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerB.event.answer.add(this.updateOnClickAnswer,this),this.opponentAnswerLogs[this.countQuiz].answer==e+1&&this.addAvaMiniInTheLeftOfTab(this.answerB.sprite),this.addChild(this.answerB)),2==e&&(this.answerC=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerC.event.answer.add(this.updateOnClickAnswer,this),this.opponentAnswerLogs[this.countQuiz].answer==e+1&&this.addAvaMiniInTheLeftOfTab(this.answerC.sprite),this.addChild(this.answerC)),3==e&&(this.answerD=new fd(game.width/2,(game.height-576+122*e)*window.GameConfig.RESIZE,{index:e,questions:this.questions,countQuiz:this.countQuiz}),this.answerD.event.answer.add(this.updateOnClickAnswer,this),this.opponentAnswerLogs[this.countQuiz].answer==e+1&&this.addAvaMiniInTheLeftOfTab(this.answerD.sprite),this.addChild(this.answerD))}},{key:"updateOnClickAnswer",value:function(e){this.answerA.sprite.inputEnabled=!1,this.answerB.sprite.inputEnabled=!1,this.answerC.sprite.inputEnabled=!1,this.answerD.sprite.inputEnabled=!1,this.answered=e,this.calculateScoreOpp(),e+1==this.questions[this.countQuiz].correctAnswer?(this.setActionPhaseOnCorrect(),this.setTrueAva(),this.answeredResult=!0,this.timeCounter.ms/1e3>10?(this.score+=Math.floor(100*Math.pow(1,(this.streak-1)/4)),this.correctList.push({countQuiz:this.countQuiz,time:10})):(this.score+=Math.floor(100*(11-this.timeCounter.ms/1e3)*Math.pow(11-this.timeCounter.ms/1e3,(this.streak-1)/4)),this.correctList.push({countQuiz:this.countQuiz,time:this.timeCounter.ms/1e3})),this.setScore(this.score)):(this.setFalseAva(),this.answeredResult=!1,this.wrongList.push(this.countQuiz));for(var t=0;t<4;t++)0==t&&this.setTrueFalseTabAnswer(this.answerA,t),1==t&&this.setTrueFalseTabAnswer(this.answerB,t),2==t&&this.setTrueFalseTabAnswer(this.answerC,t),3==t&&this.setTrueFalseTabAnswer(this.answerD,t);this.pushResultAnswer(),this.addCorrectListSprites(),this.addWrongListSprites(),this.timeNextQuestion=game.time.events.add(1*Phaser.Timer.SECOND,this.resetQuestion,this)}},{key:"setActionPhaseOnCorrect",value:function(){this.questions[this.countQuiz].correctAnswer>2?this.actionPhase.position.y=game.height-636:this.actionPhase.position.y=game.height-416,this.actionPhase.setStreak(this.streak),this.addChild(this.actionPhase)}},{key:"addAvaMiniInTheLeftOfTab",value:function(e){var t,n=game.add.graphics(0,0);(n.beginFill(16777215),n.drawCircle(-246*window.GameConfig.RESIZE,0,40*window.GameConfig.RESIZE),n.anchor.set(.5),window.MQ.isBotMode)?((t=game.add.sprite(-246*window.GameConfig.RESIZE,0,"bot-mini".concat(window.MQ.botKey))).anchor.set(.5),t.mask=n):((t=game.add.sprite(-246*window.GameConfig.RESIZE,0,this.opponent.avatar)).anchor.set(.5),t.scale.set(window.GameConfig.SCALE_AVA_OPPO_INTHELEFT*window.GameConfig.RESIZE),t.mask=n);t.kill(),e.addChild(n),e.addChild(t),this.timeAvaMiniShow=game.time.create(!0),this.timeAvaMiniShow.add(Phaser.Timer.SECOND*this.opponentAnswerLogs[this.countQuiz].timeAnswer,function(){t.revive()}),this.timeAvaMiniShow.start()}},{key:"calculateScoreOpp",value:function(){if(this.countQuiz<=4)if("CORRECT"==this.opponentAnswerLogs[this.countQuiz].trueOrFalse.toUpperCase()){this.setTrueAvaOpp();var e=Math.floor(100*(11-this.opponentAnswerLogs[this.countQuiz].timeAnswer)*Math.pow(11-this.opponentAnswerLogs[this.countQuiz].timeAnswer,(this.opponentAnswerLogs[this.countQuiz].streak-1)/4));this.scoreOpp+=e,this.setScoreOpp(this.scoreOpp)}else this.setFalseAvaOpp()}},{key:"pushResultAnswer",value:function(){var e="INCORRECT";1==this.answeredResult&&(e="CORRECT"),this.timeCounter.ms/1e3>10?this.answers.push({answer_time:10,result:e,answer:this.answered+1,streak:this.streak,question_id:this.questions[this.countQuiz].id,created:Date.now(),index:0}):this.answers.push({answer_time:this.timeCounter.ms/1e3,result:e,answer:this.answered+1,streak:this.streak,question_id:this.questions[this.countQuiz].id,created:Date.now(),index:0})}},{key:"removeTimeNextQuestion",value:function(){null!==this.timeNextQuestion&&game.time.events.remove(this.timeNextQuestion)}},{key:"resetQuestion",value:function(){this.removeTimeNextQuestion(),this.tweenSpriteTime.stop(),this.spriteTime.destroy(),this.timeCounter.stop(),this.actionPhase.setDefault(),this.timeCounter.destroy(),rl.instance().removeSound(this.questions[this.countQuiz].songEntity.fileUrl),this.answerA.destroy(),this.answerB.destroy(),this.answerC.destroy(),this.answerD.destroy(),this.btn_remove_answer.revive(),1==this.answeredResult?this.streak++:this.streak=1,this.countQuiz<4?(this.countQuiz+=1,this.createGamePlayChallenged()):(rl.instance().removeSound(),this.result={answers:this.answers,score:this.score,scoreOpp:this.scoreOpp,game_log_id:this.play_log_id,challenge_request_id:this.request_id,opponentAnswerLogs:this.opponentAnswerLogs,playlist_id:this.playlist.id},dV.instance().sendData(ki.PLAY_SCRIPT_DONE_TURNBASE_REQUEST,null),oe.instance().playScript.playing_guide=_o.DONE_TURNBASE)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.SUPPORT_RESPONSE&&"OK"==e.params.getUtfString("status")&&this.removeAnswer(),e.cmd==ki.PLAY_SCRIPT_DONE_TURNBASE_RESPONSE&&"OK"==e.params.getUtfString("status")&&this.event.doneTutorial.dispatch(),e.cmd==ki.PLAY_SCRIPT_DONE_ALL_RESPONSE&&(console.log("PLAY_SCRIPT_DONE_TURNBASE_RESPONSE"),"OK"==e.params.getUtfString("status")&&(oe.instance().playScript.playing_guide=_o.DONE_ALL,this.event.doneTutorial.dispatch()))}},{key:"setTrueFalseTabAnswer",value:function(e,t){t==this.answered?t==this.questions[this.countQuiz].correctAnswer-1?e.displayScreenWhenAnswerRight():e.displayScreenWhenAnswerWrong():t==this.questions[this.countQuiz].correctAnswer-1?e.displayScreenWhenAnswerRight():e.displayScreenWhenAnswerNotChoosed()}},{key:"setTrueAva",value:function(){this.trueOrFalseUser.setTrueAnswer()}},{key:"setFalseAva",value:function(){this.trueOrFalseUser.setFailtAnswer()}},{key:"setTrueAvaOpp",value:function(){this.trueOrFalseOpp.setTrueAnswer()}},{key:"setFalseAvaOpp",value:function(){this.trueOrFalseOpp.setFailtAnswer()}},{key:"setScore",value:function(e){this.UserSpriteRight.setScore(e)}},{key:"setScoreOpp",value:function(e){this.UserSpriteLeft.setScore(e)}},{key:"destroy",value:function(){for(this.removeEventExtension(),game.time.events.remove(this.timePS1),game.time.events.remove(this.timePS2),game.time.events.remove(this.timePS3),game.time.events.remove(this.timeNextQuestion),rl.instance().event.loadComplete.remove(this.loadComplete,this);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Op(Rp(t.prototype),"destroy",this).call(this)}}])&&kp(n.prototype,i),o&&kp(n,o),t}();function Ip(e){return(Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ap(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){Lp(e,t,n[t])})}return e}function Lp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gp(e,t){return!t||"object"!==Ip(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mp(e,t,n){return(Mp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Np(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Np(e){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bp(e,t){return(Bp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jp=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Gp(this,Np(t).call(this,game))).type=n,e.screenChallenge=null,e.screenBeChallenged=null,e.screenTutorial=null,e.screenWin=null,e.screenHistory=null,e.challengeMsg="",e.event={historyPlayTurn:new Phaser.Signal,screenRehome:new Phaser.Signal,screenWinScreenBeChallengedChallengAgain:new Phaser.Signal,playIllegalTurn:new Phaser.Signal,illegalTurnCancle:new Phaser.Signal,screenChallengeNextGame:new Phaser.Signal,historyChallenge:new Phaser.Signal},e.addEventExtension(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bp(e,t)}(t,Z),n=t,(i=[{key:"setData",value:function(e,t,n,i,o,a){this.questions=Ap({},e),this.opponent=Ap({},t),this.user_playlist_mapping=Ap({},n),this.opponent_playlist_mapping=Ap({},i),this.playlist=Ap({},o),"BECHALLENGED"==this.type&&(this.opponentAnswerLogs=Ap({},a)),"TUTORIAL"==this.type&&(this.opponentAnswerLogs=Ap({},a))}},{key:"setDataBeChallenged",value:function(e,t,n,i,o,a){"BECHALLENGED"==this.type&&(n?(this.play_log_id=e,this.request_id=t,this.isHasHistory=n,this.weeklyResult=i,this.historyGameLog=o,this.dataTurnbase=a):(this.play_log_id=e,this.request_id=t,this.isHasHistory=n,this.weeklyResult=i,this.dataTurnbase=a))}},{key:"setDataChallenge",value:function(e,t,n,i,o){"CHALLENGE"==this.type&&(n?(this.play_log_id=e,this.request_id=t,this.isHasHistory=n,this.weeklyResult=i,this.historyGameLog=o):(this.play_log_id=e,this.request_id=t,this.isHasHistory=n,this.weeklyResult=i))}},{key:"addScreenPlay",value:function(){this.timeCountActionPhase=game.time.create(),"CHALLENGE"==this.type?this.isHasHistory?this.addScreenHistory():(this.addScreenChallenge(),this.timeCountActionPhase.start()):"BECHALLENGED"==this.type?this.isHasHistory?this.addScreenHistory():(this.addScreenBeChallenged(),this.timeCountActionPhase.start()):(this.addScreenTutorial(),this.timeCountActionPhase.start())}},{key:"addScreenTutorial",value:function(){this.removeScreenTutorial(),this.screenTutorial=new Tp,this.screenTutorial.setData(this.questions,this.opponent,this.user_playlist_mapping,this.opponent_playlist_mapping,this.playlist,this.opponentAnswerLogs),this.screenTutorial.setDataBeChallenged(this.play_log_id,this.request_id,this.isHasHistory),this.screenTutorial.event.resultGame.add(this.onCompleteBeChallenged,this),this.screenTutorial.event.doneTutorial.add(this.doneTutorial,this),this.screenTutorial.afterInit(),this.addChild(this.screenTutorial)}},{key:"doneTutorial",value:function(){window.GameConfig.IS_TUTORIAL=!1,FH.instance().changeScreen(De.MAIN_MENU)}},{key:"removeScreenTutorial",value:function(){null!==this.screenTutorial&&(this.removeChild(this.screenTutorial),this.screenTutorial.destroy(),this.screenTutorial=null)}},{key:"addScreenChallenge",value:function(){this.removeScreenChallenge(),this.screenChallenge=new Dd,this.screenChallenge.setData(this.questions,this.opponent,this.user_playlist_mapping,this.opponent_playlist_mapping,this.playlist),this.screenChallenge.event.resultGame.add(this.onCompleteChallenge,this),this.screenChallenge.afterInit(),this.addChild(this.screenChallenge)}},{key:"removeScreenChallenge",value:function(){null!==this.screenChallenge&&(this.removeChild(this.screenChallenge),this.screenChallenge.destroy(),this.screenChallenge=null)}},{key:"onCompleteChallenge",value:function(e){var t=this;this.result=Ap({},e),this.handledJSONResultToSfsResultChallengeMode(e,function(e){ht.instance().showLoading(),t.sendGameFinishRequest(ki.CHALLENGE_GAME_FINISH_REQUEST,e),He.instance().logEvent(He.play_time,parseInt(t.timeCountActionPhase/1e3)),t.timeCountActionPhase.stop(),t.timeCountActionPhase.destroy()})}},{key:"addScreenBeChallenged",value:function(){this.removeScreenBeChallenged(),this.screenBeChallenged=new Jf,this.screenBeChallenged.setData(this.questions,this.opponent,this.user_playlist_mapping,this.opponent_playlist_mapping,this.playlist,this.opponentAnswerLogs),this.screenBeChallenged.setDataBeChallenged(this.play_log_id,this.request_id,this.isHasHistory),this.screenBeChallenged.event.resultGame.add(this.onCompleteBeChallenged,this),this.screenBeChallenged.afterInit(),this.addChild(this.screenBeChallenged)}},{key:"removeScreenBeChallenged",value:function(){null!==this.screenBeChallenged&&(this.removeChild(this.screenBeChallenged),this.screenBeChallenged.destroy(),this.screenBeChallenged=null)}},{key:"onCompleteBeChallenged",value:function(e){var t=this;this.result=Ap({},e),this.handledJSONResultToSfsResultBeChallengedMode(e,function(e){ht.instance().showLoading(),t.sendGameFinishRequest(ki.BECHALLENGED_GAME_FINISH_REQUEST,e),LogConsole.log(parseInt(t.timeCountActionPhase.ms/1e3)),He.instance().logEvent(He.play_time,parseInt(t.timeCountActionPhase/1e3)),t.timeCountActionPhase.stop(),t.timeCountActionPhase.destroy()})}},{key:"handledJSONResultToSfsResultChallengeMode",value:function(e,t){LogConsole.log(e);var n=new SFS2X.SFSObject,i=new SFS2X.SFSArray;this.putValueToAnswers(i,e,function(e){n.putSFSArray("answers",e)}),n.putInt("score",e.score),n.putInt("opponent_id",e.opponent_id),n.putInt("playlist_id",e.playlist_id),t(n)}},{key:"handledJSONResultToSfsResultBeChallengedMode",value:function(e,t){LogConsole.log(e);var n=new SFS2X.SFSObject,i=new SFS2X.SFSArray;this.putValueToAnswers(i,e,function(e){n.putSFSArray("answers",e)}),n.putInt("score",e.score),n.putInt("playlist_id",e.playlist_id),n.putLong("challenge_request_id",e.challenge_request_id),t(n)}},{key:"putValueToAnswers",value:function(e,t,n){for(var i=0;i<5;i++){var o=new SFS2X.SFSObject;o.putFloat("answer_time",t.answers[i].answer_time),o.putUtfString("result",t.answers[i].result),o.putInt("answer",t.answers[i].answer),o.putInt("streak",t.answers[i].streak),o.putLong("question_id",t.answers[i].question_id),o.putLong("created",t.answers[i].created),e.addSFSObject(o)}n(e)}},{key:"sendGameFinishRequest",value:function(e,t){LogConsole.log(t.getDump()),dV.instance().sendData(e,t)}},{key:"switchToScreenWin",value:function(e){this.addScreenWin(e),this.removeScreenChallenge(),this.removeScreenBeChallenged()}},{key:"addScreenHistory",value:function(){this.removeScreenHistory(),this.screenHistory=new ap,this.screenHistory.setType(this.type),this.screenHistory.setData(this.historyGameLog.questions,this.opponent,this.historyGameLog.user_playlist_mapping,this.historyGameLog.opponent_playlist_mapping,this.historyGameLog.playlist,this.historyGameLog.result,this.historyGameLog.result.opponentAnswerLogs,this.weeklyResult),this.screenHistory.afterInit(),this.screenHistory.event.playYourTurn.add(this.historyPlayTurn,this),this.screenHistory.event.reHome.add(this.screenRehome,this),this.screenHistory.event.challenge.add(this.historyChallenge,this),this.addChild(this.screenHistory)}},{key:"removeScreenHistory",value:function(){null!==this.screenHistory&&(this.removeChild(this.screenHistory),this.screenHistory.destroy(),this.screenHistory=null)}},{key:"historyPlayTurn",value:function(){this.removeScreenHistory(),this.event.historyPlayTurn.dispatch()}},{key:"historyChallenge",value:function(){this.removeScreenHistory(),this.event.historyChallenge.dispatch()}},{key:"addScreenWin",value:function(e){this.removeScreenWin(),this.screenWin=new Qf(e),this.screenWin.setData(this.questions,this.opponent,this.user_playlist_mapping,this.opponent_playlist_mapping,this.playlist,this.result,this.challengeMsg),"BECHALLENGED"==e?this.screenWin.setDataBeChallenged(this.play_log_id,this.request_id,this.isHasHistory,this.opponentAnswerLogs,this.weeklyResult,this.dataTurnbase):this.screenWin.setDataChallenge(this.play_log_id,this.request_id),this.screenWin.addScreen(),this.screenWin.event.screenReHome.add(this.screenRehome,this),this.screenWin.event.screenBeChallengedChallengAgain.add(this.screenWinScreenBeChallengedChallengAgain,this),this.screenWin.event.screenChallengeNextGame.add(this.screenChallengeNextGame,this),this.addChild(this.screenWin)}},{key:"removeScreenWin",value:function(){null!==this.screenWin&&(this.removeChild(this.screenWin),this.screenWin.destroy(),this.screenWin=null)}},{key:"screenRehome",value:function(){this.event.screenRehome.dispatch()}},{key:"screenWinScreenBeChallengedChallengAgain",value:function(){this.event.screenWinScreenBeChallengedChallengAgain.dispatch()}},{key:"screenChallengeNextGame",value:function(e){this.event.screenChallengeNextGame.dispatch(e)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.CHALLENGE_GAME_FINISH_RESPONSE?"OK"==e.params.getUtfString("status")?(this.request_id=e.params.getLong("challenge_request_id"),this.challengeMsg=e.params.getUtfString("challenge_msg"),He.instance().logEvent(He.pro_quiz_end_turnbase),this.switchToScreenWin("CHALLENGE")):"WARNING"==e.params.getUtfString("status")&&this.handleIllegalTurn(e.params):e.cmd==ki.BECHALLENGED_GAME_FINISH_RESPONSE&&"OK"==e.params.getUtfString("status")&&(He.instance().logEvent(He.pro_quiz_end_turnbase),this.switchToScreenWin("BECHALLENGED"))}},{key:"handleIllegalTurn",value:function(e){var t=this,n=e.getLong("opponent_game_log"),i=e.getLong("challenge_request_id");this.illlegalTurn={request_id:i,game_log_id:n},this.illlegalTurnModule=new Ep,this.illlegalTurnModule.setData(this.opponent),this.illlegalTurnModule.event.playIllegalTurn.add(this.playIllegalTurn,this),this.illlegalTurnModule.event.illegalTurnCancle.add(this.illegalTurnCancle,this),this.addChild(this.illlegalTurnModule),ht.instance().hideLoading(),this.illlegalTurnModule.makeNewGameBeChallenged(this.illlegalTurn,function(){t.illlegalTurnModule.addPopupIllegalTurn()})}},{key:"playIllegalTurn",value:function(e){this.event.playIllegalTurn.dispatch(e)}},{key:"illegalTurnCancle",value:function(){this.event.illegalTurnCancle.dispatch()}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"destroy",value:function(){for(this.removeEventExtension(),rl.instance().removeAllSound();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Mp(Np(t.prototype),"destroy",this).call(this)}}])&&Dp(n.prototype,i),o&&Dp(n,o),t}();function Up(e){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zp(e,t){return!t||"object"!==Up(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hp(e,t,n){return(Hp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vp(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Vp(e){return(Vp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qp(e,t){return(Qp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wp=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Zp(this,Vp(t).call(this,game))).arrResource=[],e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qp(e,t)}(t,Phaser.Group),n=t,(i=[{key:"loadResource",value:function(){for(var e=0;e<this.arrResource.length;e++){var t=this.arrResource[e],n=t.type,i=t.link+"?v=".concat(window.VersionClient),o=t.key;switch(n){case"text":game.load.text(o,i);break;case"image":game.load.image(o,i);break;case"atlas":var a=t.linkJson+"?v=".concat(window.VersionClient);game.load.atlas(o,i,a,Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);break;case"spritesheet":var s=t.width,r=t.height,l=t.countFrame;game.load.spritesheet(o,i,s,r,l)}}game.load.onLoadComplete.add(this.loadFileComplete,this),game.load.start()}},{key:"loadFileComplete",value:function(){game.load.onLoadComplete.remove(this.loadFileComplete,this),this.onLoadFileComplete()}},{key:"onLoadFileComplete",value:function(){}},{key:"removeResource",value:function(){for(var e=0;e<this.arrResource.length;e++){var t=this.arrResource[e],n=t.type,i=(t.link,"?v=".concat(window.VersionClient),t.key);switch(n){case"text":console.log("remove text : "+i),game.cache.checkTextKey(i)&&(console.log("da xoa"),game.cache.removeText(i));break;case"image":console.log("remove image : "+i),game.cache.checkImageKey(i)&&(console.log("da xoa"),game.cache.removeImage(i));break;case"atlas":console.log("remove atlas : "+i),game.cache.checkImageKey(i)&&(console.log("da xoa image"),game.cache.removeImage(i));var o=t.linkJson+"?v=".concat(window.VersionClient);game.cache.checkJSONKey(o)&&(console.log("da xoa json"),game.cache.checkJSONKey(o)),game.cache.checkXMLKey(o)&&(console.log("da xoa xml"),game.cache.checkXMLKey(o));break;case"spritesheet":console.log("remove spritesheet : "+i),game.cache.checkImageKey(i)&&(console.log("da xoa image"),game.cache.removeImage(i))}}}},{key:"destroy",value:function(){this.removeResource(),Hp(Vp(t.prototype),"destroy",this).call(this),console.log(game.cache)}}])&&Fp(n.prototype,i),o&&Fp(n,o),t}();function qp(e){return(qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kp(e,t){return!t||"object"!==qp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zp(e,t,n){return(zp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yp(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Yp(e){return(Yp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xp(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jp(e,t,n){return t&&Xp(e.prototype,t),n&&Xp(e,n),e}function $p(e,t){return($p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eg=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=Kp(this,Yp(t).call(this)),null==n&&null==i?e.screenType=1:i==t.TYPE_BECHALLENGED?e.screenType=3:i==t.TYPE_CHALLENGE?e.screenType=2:e.screenType=4,e.opponent=n,e.type=i,e.dataTurnbase=o,e.findgame=null,e.choosePlaylist=null,e.playGame=null,e.event={backMenu:new Phaser.Signal},e.arrResource=[{type:"text",link:"img/config/positionCreateRoom.json",key:"positionCreateRoom"},{type:"text",link:"img/config/findOpponents.json",key:"findOpponentConfig"},{type:"text",link:"img/config/positionWinConfig.json",key:"positionWinConfig"},{type:"text",link:"img/config/positionMainConfig.json",key:"positionMainConfig"},{type:"text",link:"img/config/limitTurn.json",key:"limitTurnConfig"},{type:"atlas",link:"img/atlas/playTurnBase.png",key:"playSprites",linkJson:"img/atlas/playTurnBase.json"},{type:"atlas",link:"img/atlas/findOpponent.png",key:"findOpponentSprites",linkJson:"img/atlas/findOpponent.json"}],e.loadResource(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$p(e,t)}(t,Wp),Jp(t,null,[{key:"TYPE_BECHALLENGED",get:function(){return"BECHALLENGED"}},{key:"TYPE_CHALLENGE",get:function(){return"CHALLENGE"}},{key:"TUTORIAL",get:function(){return"TUTORIAL"}}]),Jp(t,[{key:"onLoadFileComplete",value:function(){this.afterInit(),this.addScreen()}},{key:"afterInit",value:function(){this.playScript=JSON.parse(game.cache.getText("playScript")),this.definedData(),this.addEventExtension()}},{key:"definedData",value:function(){this.historyGameLog={questions:[],playlist:{},result:{answers:[],score:0,scoreOpp:0,opponentAnswerLogs:[]},user_playlist_mapping:{},opponent_playlist_mapping:{}},this.playlistHisTory,this.questions=[],this.playlist={},this.opponentAnswerLogs=[],this.dataTurnbase&&(this.weeklyResult=this.dataTurnbase.weeklyResult),ht.instance().showLoading()}},{key:"addScreen",value:function(){null!==this.opponent?this.type==t.TYPE_CHALLENGE?(this.sendChallengeGameHistoryRequest(),this.screenType=2):this.type==t.TYPE_BECHALLENGED?(this.handleRequestBeChallengedGame(),this.screenType=3):(this.addPlayGame(t.TUTORIAL),this.screenType=4):this.addFindGame()}},{key:"sendChallengeGameHistoryRequest",value:function(){var e=new SFS2X.SFSObject;e.putInt("opponent_id",this.opponent.id),dV.instance().sendData(ki.CHALLENGE_GAME_HISTORY_REQUEST,e),ht.instance().showLoading()}},{key:"handleRequestBeChallengedGame",value:function(){this.sendBeChallengedGameLogRequest(dV.instance().dataMySeft.user_id,this.opponent.id)}},{key:"sendBeChallengedGameLogRequest",value:function(e,t){var n=new SFS2X.SFSObject;n.putInt("opponent_id",t),dV.instance().sendData(ki.BECHALLENGED_GAME_OPPONENT_GAME_LOG_REQUEST,n),ht.instance().showLoading()}},{key:"setDataBeChallenged",value:function(e,n,i,o,a){this.type==t.TYPE_BECHALLENGED&&(this.play_log_id=e,this.request_id=n,this.isHasHistory=i),this.weeklyResult=this.weeklyResult,this.dataTurnbase=a}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.CHALLENGE_GAME_QUESTIONS_RESPONSE&&("WARNING"===e.params.getUtfString("status")?(jC.instance().addLimitTurn(),this.addFindGame(),ht.instance().hideLoading()):this.handleQuestionResponse(e.params)),e.cmd==ki.BECHALLENGED_GAME_OPPONENT_GAME_LOG_RESPONSE&&("OK"==e.params.getUtfString("status")?(this.opponentAnswerLogs=[],this.beChallengedParamsSimple=e.params,this.handleResponseBeChallengedGame(this.beChallengedParamsSimple)):FH.instance().changeScreen(De.MAIN_MENU)),e.cmd==ki.CHALLENGE_GAME_HISTORY_RESPONSE&&("OK"==e.params.getUtfString("status")?this.handleHistory(e.params):FH.instance().changeScreen(De.MAIN_MENU))}},{key:"doneHandleHistoryChallenge",value:function(){1==this.isHasHistory?this.addPlayGame(t.TYPE_CHALLENGE):this.addChoosePlaylist(this.opponent)}},{key:"sortQuestions",value:function(e){e=e.sort(function(e,t){return e.questionId-t.questionId})}},{key:"addFindGame",value:function(){this.removeFindGame(),this.findgame=new Cr,this.findgame.event.choose_playlist.add(this.addChoosePlaylist,this),this.findgame.event.onBack.add(this.onBackFindGame,this),this.findgame.event.challengeGame.add(this.challengeGame,this),this.addChild(this.findgame)}},{key:"removeFindGame",value:function(){null!==this.findgame&&(this.removeChild(this.findgame),this.findgame.destroy(),this.findgame=null)}},{key:"addChoosePlaylist",value:function(e){ht.instance().showLoading(),this.opponent=e,this.removeChoosePlaylist(),this.choosePlaylist=new Ku(e),this.choosePlaylist.event.choosePlaylist.add(this.onChoosedPlaylist,this),this.choosePlaylist.event.backScreen.add(this.onBackChoosePlaylist,this),this.addChild(this.choosePlaylist)}},{key:"removeChoosePlaylist",value:function(){null!==this.choosePlaylist&&(this.removeChild(this.choosePlaylist),this.choosePlaylist.destroy(),this.choosePlaylist=null)}},{key:"onBackChoosePlaylist",value:function(){1!==this.screenType?(this.removeChoosePlaylist(),FH.instance().changeScreen(De.TURN_BASE)):this.removeChoosePlaylist()}},{key:"onChoosedPlaylist",value:function(e){this.playlist=e,this.removeChoosePlaylist(),this.removeFindGame(),this.sendRequestChoosePlaylist(e.id)}},{key:"sendRequestChoosePlaylist",value:function(e){var t=new SFS2X.SFSObject;t.putInt("playlist_id",e),t.putInt("opponent_id",this.opponent.id),dV.instance().sendData(ki.CHALLENGE_GAME_QUESTIONS_REQUEST,t),ht.instance().showLoading()}},{key:"onBackFindGame",value:function(){this.removeFindGame()}},{key:"challengeGame",value:function(e){this.type=t.TYPE_CHALLENGE,this.opponent=e,this.sendChallengeGameHistoryRequest(),this.screenType=2}},{key:"addPlayGame",value:function(e){this.removePlayGame(),this.playGame=new jp(e),this.playGame.setData(this.questions,this.opponent,this.user_playlist_mapping,this.opponent_playlist_mapping,this.playlist,this.opponentAnswerLogs),this.type==t.TYPE_BECHALLENGED&&(this.isHasHistory?(this.playGame.setDataBeChallenged(this.play_log_id,this.request_id,this.isHasHistory,this.weeklyResult,this.historyGameLog,this.dataTurnbase),this.playGame.event.historyPlayTurn.add(this.historyPlayTurn,this)):this.playGame.setDataBeChallenged(this.play_log_id,this.request_id,this.isHasHistory,this.weeklyResult,this.historyGameLog,this.dataTurnbase)),e==t.TYPE_CHALLENGE&&(this.isHasHistory?this.playGame.setDataChallenge(this.play_log_id,this.request_id,this.isHasHistory,this.weeklyResult,this.historyGameLog):this.playGame.setDataChallenge(this.play_log_id,this.request_id,this.isHasHistory,this.weeklyResult)),this.type==t.TUTORIAL&&(this.playGame.setData(this.playScript.demoData.questions,this.playScript.demoData.opponent,this.playScript.demoData.user_playlist_mapping,this.playScript.demoData.opponent_playlist_mapping,this.playScript.demoData.playlist,this.playScript.demoData.opponentAnswerLogs),this.playGame.setDataBeChallenged(this.playScript.demoData.play_log_id,this.playScript.demoData.request_id,this.playScript.demoData.isHasHistory,this.playScript.demoData.weeklyResult),ht.instance().hideLoading()),this.playGame.addScreenPlay(),this.playGame.event.screenRehome.add(this.playGameScreenWinScreenChallengeReHome,this),this.playGame.event.screenWinScreenBeChallengedChallengAgain.add(this.screenWinScreenBeChallengedChallengAgain,this),this.playGame.event.illegalTurnCancle.add(this.illegalTurnCancle,this),this.playGame.event.playIllegalTurn.add(this.playIllegalTurn,this),this.playGame.event.screenChallengeNextGame.add(this.screenChallengeNextGame,this),this.playGame.event.historyChallenge.add(this.historyChallenge,this),this.addChild(this.playGame)}},{key:"removePlayGame",value:function(){null!==this.playGame&&(this.removeChild(this.playGame),this.playGame.destroy(),this.playGame=null)}},{key:"historyPlayTurn",value:function(){this.removePlayGame(),this.isHasHistory=!1,this.addPlayGame(t.TYPE_BECHALLENGED)}},{key:"historyChallenge",value:function(){this.removePlayGame(),this.isHasHistory=!1,this.addChoosePlaylist(this.opponent)}},{key:"playGameScreenWinScreenChallengeReHome",value:function(){FH.instance().changeScreen(De.MAIN_MENU)}},{key:"screenWinScreenBeChallengedChallengAgain",value:function(){this.removePlayGame(),this.type=t.TYPE_CHALLENGE,this.definedData(),this.addChoosePlaylist(this.opponent)}},{key:"illegalTurnCancle",value:function(){this.removePlayGame(),FH.instance().changeScreen(De.MAIN_MENU)}},{key:"playIllegalTurn",value:function(e){this.removePlayGame(),this.type=t.TYPE_BECHALLENGED,this.definedData(),this.addScreen()}},{key:"screenChallengeNextGame",value:function(e){this.removePlayGame(),this.type=e.type,this.opponent=e.opponent,this.definedData(),this.setDataBeChallenged(e.gameLogId,e.requestId,e.isHasHistory,e.weeklyResult,e),this.addScreen()}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),zp(Yp(t.prototype),"destroy",this).call(this)}},{key:"handleQuestionResponse",value:function(e){"OK"==e.getUtfString("status")?(this.responseQuestions=e,this.getDataPlaylistHandleQuestionResponse(this.playlist)):FH.instance().changeScreen(De.MAIN_MENU)}},{key:"getDataPlaylistHandleQuestionResponse",value:function(e){_t.instance().event.get_data_playlist_complete.add(this.getDataPlaylistHandleQuestionResponseComplete,this),_t.instance().getPlaylistById([e.id],null,dV.instance().dataMySeft.user_id)}},{key:"getDataPlaylistHandleQuestionResponseComplete",value:function(e){this.playlist=e,_t.instance().event.get_data_playlist_complete.remove(this.getDataPlaylistHandleQuestionResponseComplete,this);for(var n=this.responseQuestions.getSFSArray("response"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getUtfString("question_type"),s=o.getUtfString("answer1"),r=o.getUtfString("answer2"),l=o.getUtfString("answer3"),c=o.getUtfString("answer4"),h=o.getLong("id"),u=o.getInt("correct_answer"),d=o.getUtfString("file_path"),f=o.getUtfString("file_path"),p=o.getSFSObject("song"),g=p.getUtfString("title"),y=p.getLong("id"),m=p.getUtfString("title"),v=p.getUtfString("author"),w=p.getSFSObject("singer"),b=w.getUtfString("name"),_=w.getUtfString("avatar"),S=[];if(p.containsKey("song_links"))for(var E=p.getSFSArray("song_links"),C=0;C<E.size();C++){var k=E.getSFSObject(C),P=k.getUtfString("link_type"),O=k.getLong("song_id"),R=k.getInt("is_movie"),x=k.getUtfString("link"),T=k.getLong("id");S.push({link_type:P,song_id:O,is_movie:R,link:x,id:T})}this.questions.push({questionType:a,answers:[s,r,l,c],correctAnswer:u,songEntity:{thumb:_,song:g,song_links:S,fileName:m,author:v,singer:b,listenLink:f,id:y,fileUrl:d},id:h})}if(this.responseQuestions.containsKey("opponent_playlist_mapping"))var I=this.responseQuestions.getSFSObject("opponent_playlist_mapping");this.user_playlist_mapping=this.handleUserPlaylistMapping(e),this.opponent_playlist_mapping=this.handlePlaylistMapping(I),this.isHandleQuestionResponse=!0,this.addPlayGame(t.TYPE_CHALLENGE),ht.instance().hideLoading()}},{key:"handleResponseBeChallengedGame",value:function(e){var t=e.getInt("playlist_id");this.playlist={id:t,name:""},this.responseBeChallengedGame=e,this.getDataPlaylistHandleResponseBeChallengedGame(this.playlist)}},{key:"getDataPlaylistHandleResponseBeChallengedGame",value:function(e){_t.instance().event.get_data_playlist_complete.add(this.getDataPlaylistHandleResponseBeChallengedGameComplete,this),_t.instance().getPlaylistById([e.id],null,dV.instance().dataMySeft.user_id)}},{key:"getDataPlaylistHandleResponseBeChallengedGameComplete",value:function(e){_t.instance().event.get_data_playlist_complete.remove(this.getDataPlaylistHandleResponseBeChallengedGameComplete,this),this.playlist=e;for(var t=this.responseBeChallengedGame.getSFSArray("opponent_answer_logs"),n=0;n<t.size();n++){var i=t.getSFSObject(n),o=i.getSFSObject("question_entity"),a=o.getUtfString("question_type"),s=o.getUtfString("answer1"),r=o.getUtfString("answer2"),l=o.getUtfString("answer3"),c=o.getUtfString("answer4"),h=o.getLong("id"),u=o.getInt("correct_answer"),d=o.getUtfString("file_path"),f=o.getUtfString("file_path"),p=o.getSFSObject("song"),g=p.getUtfString("title"),y=p.getLong("id"),m=p.getUtfString("title"),v=p.getUtfString("author"),w=p.getSFSObject("singer"),b=w.getUtfString("name"),_=w.getUtfString("avatar"),S=[];if(p.containsKey("song_links"))for(var E=p.getSFSArray("song_links"),C=0;C<E.size();C++){var k=E.getSFSObject(C),P=k.getUtfString("link_type"),O=k.getLong("song_id"),R=k.getInt("is_movie"),x=k.getUtfString("link"),T=k.getLong("id");S.push({link_type:P,song_id:O,is_movie:R,link:x,id:T})}var I=o.getLong("id"),A=i.getDouble("answer_time"),L=i.getInt("answer"),D=i.getInt("streak"),G=i.getUtfString("result");this.opponentAnswerLogs.push({questionId:I,answer_time:A,answer:L,streak:D,result:G}),this.questions.push({questionId:I,questionType:a,answers:[s,r,l,c],correctAnswer:u,songEntity:{thumb:_,song:g,fileName:m,song_links:S,author:v,singer:b,listenLink:f,id:y,fileUrl:d},id:h})}if(this.responseBeChallengedGame.containsKey("opponent_playlist_mapping"))var M=this.responseBeChallengedGame.getSFSObject("opponent_playlist_mapping");this.user_playlist_mapping=this.handleUserPlaylistMapping(e),this.opponent_playlist_mapping=this.handlePlaylistMapping(M);var N=this.responseBeChallengedGame.getLong("challenge_request_id");this.request_id=N,this.handleHistoryBeChallenged(this.responseBeChallengedGame)}},{key:"handleHistoryBeChallenged",value:function(e){if(e.containsKey("history")){this.isHasHistory=!0;var t=e.getSFSObject("history");t.containsKey("user_id")?this.handleResponseBechallengedGameHistoryBeChallenged(t):(this.isHasHistory=!1,this.doneHandleHistoryBeChallenged())}else this.isHasHistory=!1,this.doneHandleHistoryBeChallenged()}},{key:"doneHandleHistoryBeChallenged",value:function(){this.sortQuestions(this.questions),this.sortQuestions(this.opponentAnswerLogs),this.addPlayGame(t.TYPE_BECHALLENGED),ht.instance().hideLoading()}},{key:"handleHistory",value:function(e){if(e.containsKey("history")){this.isHasHistory=!0;var t=e.getSFSObject("history");t.containsKey("user_id")?this.handleResponseBechallengedGameHistory(t):(this.isHasHistory=!1,this.doneHandleHistoryChallenge())}else this.isHasHistory=!1,this.doneHandleHistoryChallenge()}},{key:"handleUserPlaylistMapping",value:function(e){return e.user}},{key:"handlePlaylistMapping",value:function(e){var t=new vt;return e?(t.user_id=e.getInt(xt.user_id),t.level=e.getInt(xt.level),t.playlist_id=e.getInt(xt.playlist_id),t.exp_score=e.getInt(xt.exp_score),t.created=e.getLong(xt.created),t.active=e.getInt(xt.active),t.id=e.getLong(xt.id),t.current_level_score=e.getInt(xt.current_level_score),t.next_level_score=e.getInt(xt.next_level_score),t.updated=e.getLong(xt.updated),t):t}},{key:"getDatPlaylistBechallengedGameHistoryComplete",value:function(e){_t.instance().event.get_data_playlist_complete.remove(this.getDatPlaylistBechallengedGameHistoryComplete,this);var t=this.responseBeChallengedGameHistory.getInt("playlist_id"),n=this.responseBeChallengedGameHistory.getInt("user_id"),i=e.name,o=this.responseBeChallengedGameHistory.getSFSObject("user_play_log_entity"),a=this.responseBeChallengedGameHistory.getSFSObject("opponent_play_log_entity"),s=o.getInt("score"),r=a.getInt("score");if(this.responseBeChallengedGameHistory.containsKey("opponent_playlist_mapping"))var l=this.responseBeChallengedGameHistory.getSFSObject("opponent_playlist_mapping");if(this.responseBeChallengedGameHistory.containsKey("user_playlist_mapping"))var c=this.responseBeChallengedGameHistory.getSFSObject("user_playlist_mapping");n==dV.instance().dataMySeft.user_id?(this.historyGameLog.user_playlist_mapping=e.user,this.historyGameLog.opponent_playlist_mapping=this.handlePlaylistMapping(l),this.handleGameLogEntity(o,this.historyGameLog.result.answers),this.handleGameLogEntity(a,this.historyGameLog.result.opponentAnswerLogs),this.historyGameLog.result.score=s,this.historyGameLog.result.scoreOpp=r):(this.historyGameLog.user_playlist_mapping=e.user,this.historyGameLog.opponent_playlist_mapping=this.handlePlaylistMapping(c),this.handleGameLogEntity(o,this.historyGameLog.result.opponentAnswerLogs),this.handleGameLogEntity(a,this.historyGameLog.result.answers),this.historyGameLog.result.score=r,this.historyGameLog.result.scoreOpp=s),this.handleQuestionLogEntity(o,this.historyGameLog.questions),this.historyGameLog.playlist={id:t,name:i},this.sortQuestions(this.historyGameLog.questions),this.sortQuestions(this.historyGameLog.result.answers),this.sortQuestions(this.historyGameLog.result.opponentAnswerLogs),this.doneHandleHistoryChallenge()}},{key:"handleResponseBechallengedGameHistory",value:function(e){this.responseBeChallengedGameHistory=e;var t=e.getInt("playlist_id");_t.instance().event.get_data_playlist_complete.add(this.getDatPlaylistBechallengedGameHistoryComplete,this),_t.instance().getPlaylistById([t],null,dV.instance().dataMySeft.user_id)}},{key:"handleResponseBechallengedGameHistoryBeChallenged",value:function(e){this.responseBeChallengedGameHistory=e;var t=e.getInt("playlist_id");_t.instance().event.get_data_playlist_complete.add(this.getDatPlaylistBechallengedGameHistoryCompleteBeChallenged,this),_t.instance().getPlaylistById([t],null,dV.instance().dataMySeft.user_id)}},{key:"getDatPlaylistBechallengedGameHistoryCompleteBeChallenged",value:function(e){_t.instance().event.get_data_playlist_complete.remove(this.getDatPlaylistBechallengedGameHistoryCompleteBeChallenged,this);var t=this.responseBeChallengedGameHistory.getInt("playlist_id"),n=this.responseBeChallengedGameHistory.getInt("user_id"),i=e.name,o=this.responseBeChallengedGameHistory.getSFSObject("user_play_log_entity"),a=this.responseBeChallengedGameHistory.getSFSObject("opponent_play_log_entity"),s=o.getInt("score"),r=a.getInt("score");if(this.responseBeChallengedGameHistory.containsKey("opponent_playlist_mapping"))var l=this.responseBeChallengedGameHistory.getSFSObject("opponent_playlist_mapping");if(this.responseBeChallengedGameHistory.containsKey("user_playlist_mapping"))var c=this.responseBeChallengedGameHistory.getSFSObject("user_playlist_mapping");n==dV.instance().dataMySeft.user_id?(this.historyGameLog.user_playlist_mapping=e.user,this.historyGameLog.opponent_playlist_mapping=this.handlePlaylistMapping(l),this.handleGameLogEntity(o,this.historyGameLog.result.answers),this.handleGameLogEntity(a,this.historyGameLog.result.opponentAnswerLogs),this.historyGameLog.result.score=s,this.historyGameLog.result.scoreOpp=r):(this.historyGameLog.user_playlist_mapping=e.user,this.historyGameLog.opponent_playlist_mapping=this.handlePlaylistMapping(c),this.handleGameLogEntity(o,this.historyGameLog.result.opponentAnswerLogs),this.handleGameLogEntity(a,this.historyGameLog.result.answers),this.historyGameLog.result.score=r,this.historyGameLog.result.scoreOpp=s),this.handleQuestionLogEntity(o,this.historyGameLog.questions),this.historyGameLog.playlist={id:t,name:i},this.sortQuestions(this.historyGameLog.questions),this.sortQuestions(this.historyGameLog.result.answers),this.sortQuestions(this.historyGameLog.result.opponentAnswerLogs),this.doneHandleHistoryBeChallenged()}},{key:"handleQuestionLogEntity",value:function(e,t){for(var n=e.getSFSArray("answer_entities"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getSFSObject("question_entity"),s=a.getUtfString("question_type"),r=a.getUtfString("file_path"),l=a.getUtfString("file_path"),c=a.getSFSObject("song"),h=c.getUtfString("title"),u=c.getLong("id"),d=c.getUtfString("title"),f=c.getUtfString("author"),p=c.getSFSObject("singer"),g=p.getUtfString("name"),y=p.getUtfString("avatar"),m=o.getLong("id"),v=[];if(c.containsKey("song_links"))for(var w=c.getSFSArray("song_links"),b=0;b<w.size();b++){var _=w.getSFSObject(b),S=_.getUtfString("link_type"),E=_.getLong("song_id"),C=_.getInt("is_movie"),k=_.getUtfString("link"),P=_.getLong("id");v.push({link_type:S,song_id:E,is_movie:C,link:k,id:P})}t.push({questionId:m,questionType:s,songEntity:{thumb:y,song:h,fileName:d,song_links:v,author:f,singer:g,listenLink:l,id:u,fileUrl:r}})}}},{key:"handleGameLogEntity",value:function(e,t){for(var n=e.getSFSArray("answer_entities"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getDouble("answer_time"),s=o.getUtfString("result"),r=o.getLong("question_id");t.push({answer_time:a,result:s,questionId:r})}}}]),t}();function tg(e){return(tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ng(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ig(e,t){return!t||"object"!==tg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function og(e){return(og=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ag(e,t){return(ag=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sg=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ig(this,og(t).call(this,game))).positionUserProfile=JSON.parse(game.cache.getText("positionUserProfile")),o.current_exp_level=e,o.next_exp_level=n,o.percentLevelCurrent=0,dV.instance().dataMySeft&&(o.experience_score=i),o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ag(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.calCurrentExpLevel=this.experience_score-this.current_exp_level,this.calExpLevel=this.next_exp_level-this.current_exp_level,this.txt=new Qt(this.positionUserProfile.profile_exp_current_txt,"Level hiện tại (".concat(this.calCurrentExpLevel,"/").concat(this.calExpLevel,")")),this.txt.anchor.set(.5),this.exp_current,this.ext_require,this.exp_current=new Bt(this.positionUserProfile.profile_current_level),this.exp_current.anchor.set(0,.5),this.ext_require=new Bt(this.positionUserProfile.profile_require_level),this.ext_require.anchor.set(0,.5),this.calculatePercentLevelCurrent(),this.addChild(this.txt),this.addChild(this.ext_require),this.addChild(this.exp_current)}},{key:"calculatePercentLevelCurrent",value:function(){this.percentLevelCurrent=(this.calCurrentExpLevel/this.calExpLevel).toFixed(1),this.exp_current.scale.set(this.percentLevelCurrent,1)}}])&&ng(n.prototype,i),o&&ng(n,o),t}();function rg(e){return(rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cg(e,t){return!t||"object"!==rg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hg(e,t,n){return(hg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ug(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ug(e){return(ug=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dg(e,t){return(dg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fg=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=cg(this,ug(t).call(this,game,0,0,"screen-dim2"))).avaUrl=n,e.event={back:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dg(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.bgBtn,this.avatar,this.addBgBtn(),this.addAva(),this.loadAva()}},{key:"addBgBtn",value:function(){this.bgBtn=new Phaser.Button(game,0,0,"screen-dim2"),this.bgBtn.width=game.width,this.bgBtn.height=game.height,this.bgBtn.events.onInputUp.add(this.onClickBg,this),this.addChild(this.bgBtn)}},{key:"onClickBg",value:function(){this.event.back.dispatch(),this.destroy()}},{key:"addAva",value:function(){this.avatar=new Phaser.Button(game,320,400,"otherSprites",function(){},this,null,"ava-default"),this.avatar.anchor.set(.5),this.addChild(this.avatar)}},{key:"loadAva",value:function(){null!==this.avaUrl&&(this.key=this.avaUrl,game.cache.checkImageKey(this.key)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.key)))}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.onClickBg,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.onClickBg,this)}},{key:"onLoad",value:function(){rn.instance().event.load_image_complate.remove(this.onLoad,this),game.cache.checkImageKey(this.key)&&void 0!==this&&(this.avatar.loadTexture(this.key),this.avatar.width=300,this.avatar.height=300)}},{key:"destroy",value:function(){this.removeEventExtension(),hg(ug(t.prototype),"destroy",this).call(this)}}])&&lg(n.prototype,i),o&&lg(n,o),t}();var pg=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=0,this.user_name="",this.id=0,this.avatar="",this.is_online=!1,this.vip=!1};function gg(e){return(gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mg(e,t,n){return(mg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vg(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function vg(e){return(vg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wg(e,t){return(wg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _g=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=vg(t).call(this,game,null))||"object"!==gg(i)&&"function"!=typeof i?bg(n):i).event={back:new Phaser.Signal,friend_status_update:new Phaser.Signal},e.isMe=!1,e.heightGame=474*window.GameConfig.RESIZE,e.user=new _u,e.game_status=0,e.positionUserProfile=oe.instance().positionUserProfile,e.header=new Cs,e.header.event.back.add(e.chooseBack,bg(bg(e))),e.addChild(e.header),e.txtOnline=new Qt(e.positionUserProfile.profile_txt_online,""),e.txtOnline.setTextBounds(0,0,game.width,27*window.GameConfig.RESIZE),e.addChild(e.txtOnline),e.bgAva=new Bt(e.positionUserProfile.profile_bg_avatar),e.addChild(e.bgAva),e.clickBigAva=!1,e.ava=new zc,e.ava.setSize(148*window.GameConfig.RESIZE,148*window.GameConfig.RESIZE),e.ava.inputEnabled=!0,e.ava.events.onInputUp.add(e.onClickAva,bg(bg(e))),e.ava.x=246*window.GameConfig.RESIZE,e.ava.y=43*window.GameConfig.RESIZE,e.addChild(e.ava),e.bgAvaVip=new Bt(e.positionUserProfile.profile_bg_avatar_vip),e.bgAvaVip.visible=!1,e.addChild(e.bgAvaVip),e.txtUserName=new Qt(e.positionUserProfile.profile_txt_username,"MrViet"),e.txtUserName.setTextBounds(0,0,game.width,35*window.GameConfig.RESIZE),e.addChild(e.txtUserName),e.txtLevel=new Qt(e.positionUserProfile.profile_txt_level,"Level 12- abc"),e.txtLevel.setTextBounds(0,0,game.width,27*window.GameConfig.RESIZE),e.addChild(e.txtLevel),e.addEventExtension(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wg(e,t)}(t,Je),n=t,(i=[{key:"onClickAva",value:function(){this.clickBigAva=!0,this.bigAvatar=new fg(this.user.avatar),this.bigAvatar.event.back.add(this.backBigAva,this),Ck.instance().addChild(this.bigAvatar)}},{key:"backBigAva",value:function(){this.clickBigAva=!1}},{key:"chooseBack",value:function(){0==this.clickBigAva&&this.event.back.dispatch()}},{key:"addOtherUser",value:function(e,t,n){LogConsole.log("friend_status"),LogConsole.log(e),this.txtDescription=new Qt(this.positionUserProfile.profile_txt_description,this.user.description),this.txtDescription.setTextBounds(0,0,game.width,30*window.GameConfig.RESIZE),this.addChild(this.txtDescription),"NO_FRIEND"===n?(this.btnSendMessage=new _n(this.positionUserProfile.profile_btn_nhantin,this.chooseSendMessage,this),this.addChild(this.btnSendMessage),this.btnInviteFriend=new qn(this.positionUserProfile.profile_btn_ketban,de.instance().getData("167"),this.chooseInviteFriend,this),this.addChild(this.btnInviteFriend),this.btnDuel=new qn(this.positionUserProfile.profile_btn_thachdau,de.instance().getData("168"),this.chooseDuel,this),this.addChild(this.btnDuel),!0===e.vip?(this.btnInviteFriend.y=(this.positionUserProfile.profile_btn_ketban.y+12)*window.GameConfig.RESIZE,this.btnDuel.y=(this.positionUserProfile.profile_btn_thachdau.y+12)*window.GameConfig.RESIZE,this.txtDescription.y=(this.positionUserProfile.profile_txt_description.y+12)*window.GameConfig.RESIZE,this.heightGame=575*window.GameConfig.RESIZE):(this.btnInviteFriend.y=this.positionUserProfile.profile_btn_ketban.y*window.GameConfig.RESIZE,this.btnDuel.y=this.positionUserProfile.profile_btn_thachdau.y*window.GameConfig.RESIZE,this.txtDescription.y=this.positionUserProfile.profile_txt_description.y*window.GameConfig.RESIZE,this.heightGame=563*window.GameConfig.RESIZE)):(this.btnSendMessage=new _n(this.positionUserProfile.profile_btn_nhantin,this.chooseSendMessage,this),this.addChild(this.btnSendMessage),this.btnDuel=new qn(this.positionUserProfile.profile_btn_thachdau_friend,de.instance().getData("168"),this.chooseDuel,this),this.addChild(this.btnDuel),!0===e.vip?(this.btnDuel.y=(this.positionUserProfile.profile_btn_thachdau_friend.y+12)*window.GameConfig.RESIZE,this.btnSendMessage.y=(this.positionUserProfile.profile_btn_nhantin_friend.y+12)*window.GameConfig.RESIZE,this.txtDescription.y=(this.positionUserProfile.profile_txt_description.y+12)*window.GameConfig.RESIZE,this.heightGame=474*window.GameConfig.RESIZE):(this.btnDuel.y=this.positionUserProfile.profile_btn_thachdau_friend.y*window.GameConfig.RESIZE,this.btnSendMessage.y=this.positionUserProfile.profile_btn_nhantin_friend.y*window.GameConfig.RESIZE,this.txtDescription.y=this.positionUserProfile.profile_txt_description.y*window.GameConfig.RESIZE,this.heightGame=462*window.GameConfig.RESIZE),"PENDING_THEM"===n&&(this.txtWarning=new Qt(this.positionUserProfile.profile_txt_warning_pending_them,""),Gl.getGender(e),this.txtWarning.setText(de.instance().getData("169")+" "+e.user_name),this.txtWarning.setTextBounds(0,0,game.width,30*window.GameConfig.RESIZE),this.addChild(this.txtWarning),this.txtWarning.addColor("#93909d",0),this.txtWarning.addFontStyle("italic",0),!0===e.vip?(this.txtWarning.y=(this.positionUserProfile.profile_txt_warning_pending_them.y+12)*window.GameConfig.RESIZE,this.heightGame=515*window.GameConfig.RESIZE):(this.txtWarning.y=this.positionUserProfile.profile_txt_warning_pending_them.y*window.GameConfig.RESIZE,this.heightGame=504*window.GameConfig.RESIZE)),"FRIEND"===n&&(this.hideUnfriend=!0,this.btnHuyKetBan=new qn(this.positionUserProfile.profile_btn_huy_ket_ban,de.instance().getData("170"),this.chooseRemoveFriend,this),this.addChild(this.btnHuyKetBan),this.btnHuyKetBan.kill(),this.btnViewMore=new _n(this.positionUserProfile.profile_btn_view_more,this.onClickViewMore,this),this.addChild(this.btnViewMore),this.btnSendMessage.revive()),"PENDING_YOU"===n&&(this.btnDongYFriend=new qn(this.positionUserProfile.profile_btn_dongy_friend,de.instance().getData("102"),this.chooseOkFriend,this),this.addChild(this.btnDongYFriend),this.btnHuyBoFriend=new qn(this.positionUserProfile.profile_btn_huybo_friend,de.instance().getData("171"),this.chooseCancle,this),this.addChild(this.btnHuyBoFriend),this.txtWarning=new Qt(this.positionUserProfile.profile_txt_warning_pending_you,this.user.user_name+" "+de.instance().getData("172")),this.txtWarning.setTextBounds(0,0,game.width,30*window.GameConfig.RESIZE),this.txtWarning.addColor("#ffa33a",0),this.txtWarning.addColor("#93909d",this.user.user_name.length),this.txtWarning.addFontStyle("italic",this.user.user_name.length),this.addChild(this.txtWarning),!0===e.vip?(this.btnDongYFriend.y=(this.positionUserProfile.profile_btn_dongy_friend.y+12)*window.GameConfig.RESIZE,this.btnHuyBoFriend.y=(this.positionUserProfile.profile_btn_huybo_friend.y+12)*window.GameConfig.RESIZE,this.txtWarning.y=(this.positionUserProfile.profile_txt_warning_pending_you.y+12)*window.GameConfig.RESIZE,this.heightGame=622*window.GameConfig.RESIZE):(this.btnDongYFriend.y=this.positionUserProfile.profile_btn_dongy_friend.y*window.GameConfig.RESIZE,this.btnHuyBoFriend.y=this.positionUserProfile.profile_btn_huybo_friend.y*window.GameConfig.RESIZE,this.txtWarning.y=this.positionUserProfile.profile_txt_warning_pending_you.y*window.GameConfig.RESIZE,this.heightGame=610*window.GameConfig.RESIZE))),"NO_GAME"===t||"ARCHIVED"===t?this.btnDuel.setText(de.instance().getData("168")):"THEIR_TURN"===t?(this.btnDuel.setText(de.instance().getData("173")),this.btnDuel.inputEnabled=!1):"YOUR_TURN"===t&&this.btnDuel.setText(de.instance().getData("174"))}},{key:"onClickViewMore",value:function(){1==this.hideUnfriend?(this.btnHuyKetBan.revive(),this.hideUnfriend=!1):(this.btnHuyKetBan.kill(),this.hideUnfriend=!0)}},{key:"setTextVip",value:function(){this.txtUserName.y=232*window.GameConfig.RESIZE,this.txtLevel.y=267*window.GameConfig.RESIZE}},{key:"addEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.add(this.onUpdateUserVars,this),Qe.instance().event.backButton.add(this.chooseBack,this)}},{key:"removeEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.onUpdateUserVars,this),Qe.instance().event.backButton.remove(this.chooseBack,this)}},{key:"addMe",value:function(e){this.btnMic=new qn(this.positionUserProfile.profile_btn_mic,dV.instance().dataMySeft.support_item),this.addChild(this.btnMic),this.btnDiamond=new qn(this.positionUserProfile.profile_btn_diamond,dV.instance().dataMySeft.diamond),this.addChild(this.btnDiamond),this.btnTicket=new qn(this.positionUserProfile.profile_btn_ticket,dV.instance().dataMySeft.ticket),this.addChild(this.btnTicket),this.txtDescription=new Qt(this.positionUserProfile.profile_txt_description_me,this.user.description),this.txtDescription.anchor.set(.5),this.txtDescription.lineSpacing=-5,this.addChild(this.txtDescription),this.heightGame=421*window.GameConfig.RESIZE,this.hideSetting=!0,this.btnSetting=new qn(this.positionUserProfile.profile_btn_huy_ket_ban,de.instance().getData("175"),this.chooseSetting,this),this.addChild(this.btnSetting),this.btnSetting.kill(),this.btnViewSetting=new _n(this.positionUserProfile.profile_btn_view_more,this.onClickViewSetting,this),!1===dV.instance().dataMySeft.is_playing_game&&this.addChild(this.btnViewSetting),this.levelExpCurrent=new sg(this.current_level.experience_score,this.next_level.experience_score,this.user.experience_score),this.addChild(this.levelExpCurrent),1==e.vip&&(this.btnDiamond.y+=20,this.btnTicket.y+=20,this.btnMic.y+=20,this.levelExpCurrent.y+=20,this.txtDescription.y+=20)}},{key:"onClickViewSetting",value:function(){1==this.hideSetting?(this.btnSetting.revive(),this.hideSetting=!1):(this.btnSetting.kill(),this.hideSetting=!0)}},{key:"chooseSetting",value:function(){this.btnSetting.kill(),this.hideSetting=!0,jC.instance().addSettingGame()}},{key:"setData",value:function(e,t,n,i,o){LogConsole.log(t,n),this.game_status=t,this.friend_status=n,this.user=Object.assign({},this.user,e),this.txtUserName.text=e.user_name,this.txtLevel.text=de.instance().getData("176")+" "+e.level+" - "+e.level_title,e.level>9?this.txtLevel.addColor("#ffffff",de.instance().getData("176").length+3):this.txtLevel.addColor("#ffffff",de.instance().getData("176").length+2),this.current_level=i,this.next_level=o,this.ava.setAvatar(e.avatar),this.urlAvatar=e.avatar,oe.instance().userDescription=e.description,this.header.setBg(this.user.vip),!0===e.vip?(this.bgAvaVip.visible=!0,this.bgAva.visible=!1,this.txtUserName.y=(this.positionUserProfile.profile_txt_username.y+12)*window.GameConfig.RESIZE,this.txtLevel.y=(this.positionUserProfile.profile_txt_level.y+12)*window.GameConfig.RESIZE):(this.bgAvaVip.visible=!1,this.bgAva.visible=!0),dV.instance().dataMySeft.user_id==e.id?this.addMe(e):this.addOtherUser(e,t,n)}},{key:"chooseRemoveFriend",value:function(){this.btnHuyKetBan.inputEnabled=!1,ak.instance().listFriend.removeFriend(this.user.id),dV.instance().sendData(cr.USER_FRIEND_REQUEST,ur.begin(ur.ACTION_REMOVE_FRIEND,this.user.id)),this.event.friend_status_update.dispatch("NO_FRIEND")}},{key:"chooseOkFriend",value:function(){this.btnDongYFriend.inputEnabled=!1;var e=new pg;e.level=this.user.level,e.user_name=this.user.user_name,e.id=this.user.id,e.avatar=this.user.avatar,e.is_online=this.user.is_online,e.vip=this.user.vip,ak.instance().listFriend.setFriend(e),dV.instance().sendData(cr.USER_FRIEND_REQUEST,ur.begin(ur.ACTION_ACCEPT_ADD_REQUEST,this.user.id)),this.event.friend_status_update.dispatch("FRIEND")}},{key:"chooseCancle",value:function(){this.btnHuyBoFriend.inputEnabled=!1,dV.instance().sendData(cr.USER_FRIEND_REQUEST,ur.begin(ur.ACTION_REFUSE_ADD_REQUEST,this.user.id)),this.event.friend_status_update.dispatch("NO_FRIEND")}},{key:"chooseInviteFriend",value:function(){LogConsole.log("chooseInviteFriend"),this.btnInviteFriend.inputEnabled=!1,dV.instance().sendData(cr.USER_FRIEND_REQUEST,ur.begin(ur.ACTION_ADD_FRIEND,this.user.id)),this.event.friend_status_update.dispatch("PENDING_THEM")}},{key:"chooseSendMessage",value:function(){LogConsole.log("chooseSendMessage"),!0===dV.instance().dataMySeft.is_playing_game?jC.instance().addDialog(de.instance().getData("177")):(oe.instance().isGetUserProfileSearch=!1,FH.instance().changeScreen(De.MAIN_MENU),Ei.instance().hideBanner(),jC.instance().addChatScreen(this.user))}},{key:"chooseDuel",value:function(){LogConsole.log("chooseDuel"+this.game_status),!0===dV.instance().dataMySeft.is_playing_game?jC.instance().addDialog(de.instance().getData("178")):("NO_GAME"==this.game_status?oe.instance().state==De.TURN_BASE?FH.instance().screen.challengeGame({id:this.user.id,userName:this.user.user_name,avatar:this.user.avatar,is_online:this.user.is_online}):FH.instance().changeScreen(De.TURN_BASE,{opponent:{id:this.user.id,userName:this.user.user_name,avatar:this.user.avatar,is_online:this.user.is_online},type:eg.TYPE_CHALLENGE}):"YOUR_TURN"==this.game_status?FH.instance().changeScreen(De.TURN_BASE,{opponent:{id:this.user.id,userName:this.user.user_name,avatar:this.user.avatar,is_online:this.user.is_online},type:eg.TYPE_BECHALLENGED}):"ARCHIVED"==this.game_status&&Ck.instance().addDialog(de.instance().getData("179")),this.chooseBack())}},{key:"onUpdateUserVars",value:function(){dV.instance().dataMySeft.user_id==this.user.id&&(this.txtUserName.setText(dV.instance().dataMySeft.user_name),this.urlAvatar!==dV.instance().dataMySeft.avatar&&this.ava.setAvatar(dV.instance().dataMySeft.avatar),parseInt(this.btnDiamond.lbBtn.text)!==dV.instance().dataMySeft.diamond&&this.btnDiamond.setText(dV.instance().dataMySeft.diamond),parseInt(this.btnMic.lbBtn.text)!==dV.instance().dataMySeft.support_item&&this.btnMic.setText(dV.instance().dataMySeft.support_item),parseInt(this.btnTicket.lbBtn.text)!==dV.instance().dataMySeft.ticket&&this.btnTicket.setText(dV.instance().dataMySeft.ticket))}},{key:"destroy",value:function(){this.removeEventExtension(),this.removeEvent(),mg(vg(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return game.width}},{key:"height",get:function(){return this.heightGame}}])&&yg(n.prototype,i),o&&yg(n,o),t}();function Sg(e){return(Sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cg(e){return(Cg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kg(e,t){return(kg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Og=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Cg(t).call(this,game,null))||"object"!==Sg(i)&&"function"!=typeof i?Pg(n):i).event={view_all:new Phaser.Signal},e.positionUserProfile=JSON.parse(game.cache.getText("positionUserProfile")),e.txtPlayList=new Qt(e.positionUserProfile.playlist_txt_playlist,de.instance().getData("54")+" (0)"),e.txtPlayList.setTextBounds(0,0,237*window.GameConfig.RESIZE,35*window.GameConfig.RESIZE),e.addChild(e.txtPlayList),e.txtViewAll=new Qt(e.positionUserProfile.playlist_txt_xemtatca,de.instance().getData("1")),e.txtViewAll.setTextBounds(0,0,191*window.GameConfig.RESIZE,30*window.GameConfig.RESIZE),e.addChild(e.txtViewAll),e.btnViewAll=new _n(e.positionUserProfile.playlist_line_select,e.chooseViewAll,Pg(Pg(e))),e.btnViewAll.x=e.txtViewAll.x,e.btnViewAll.y=e.txtViewAll.y,e.btnViewAll.width=191*window.GameConfig.RESIZE,e.btnViewAll.height=30*window.GameConfig.RESIZE,e.btnViewAll.alpha=0,e.addChild(e.btnViewAll),e.line=new Bt(e.positionUserProfile.playlist_line),e.addChild(e.line),e.lineActive=new Bt(e.positionUserProfile.playlist_line_select),e.addChild(e.lineActive),e.addPlayList=game.add.group(),e.addChild(e.addPlayList),e.heightGame=89*window.GameConfig.RESIZE,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kg(e,t)}(t,Je),n=t,(i=[{key:"chooseViewAll",value:function(){this.event.view_all.dispatch()}},{key:"setData",value:function(e){for(;this.addPlayList.children.length>0;){var t=this.addPlayList.children[0];this.addPlayList.removeChild(t),t.destroy(),t=null}this.txtPlayList.text=de.instance().getData("54")+"("+e+")"}},{key:"choosePlaylist",value:function(e){jC.instance().addPlaylistDetail(e.id)}},{key:"height",get:function(){return this.heightGame}},{key:"width",get:function(){return game.width}}])&&Eg(n.prototype,i),o&&Eg(n,o),t}();function Rg(e){return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Tg(e){return(Tg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ig(e,t){return(Ig=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ag(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Lg=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Tg(t).call(this,game,null))||"object"!==Rg(i)&&"function"!=typeof i?Ag(n):i).event={view_all:new Phaser.Signal},e.positionUserProfile=oe.instance().positionUserProfile,e.txtPlayList=new Qt(e.positionUserProfile.playlist_txt_playlist,de.instance().getData("162")+" (0)"),e.txtPlayList.setTextBounds(0,0,237*window.GameConfig.RESIZE,35*window.GameConfig.RESIZE),e.addChild(e.txtPlayList),e.txtViewAll=new Qt(e.positionUserProfile.playlist_txt_xemtatca,de.instance().getData("1")),e.txtViewAll.setTextBounds(0,0,191*window.GameConfig.RESIZE,30*window.GameConfig.RESIZE),e.addChild(e.txtViewAll),e.btnViewAll=new _n(e.positionUserProfile.playlist_line_select,e.chooseViewAll,Ag(Ag(e))),e.btnViewAll.x=e.txtViewAll.x,e.btnViewAll.y=e.txtViewAll.y,e.btnViewAll.width=191*window.GameConfig.RESIZE,e.btnViewAll.height=30*window.GameConfig.RESIZE,e.btnViewAll.alpha=0,e.addChild(e.btnViewAll),e.line=new Bt(e.positionUserProfile.playlist_line),e.addChild(e.line),e.lineActive=new Bt(e.positionUserProfile.playlist_line_select),e.addChild(e.lineActive),e.addAchi=game.add.group(),e.addChild(e.addAchi),e.heightGame=89*window.GameConfig.RESIZE,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ig(e,t)}(t,Je),n=t,(i=[{key:"chooseViewAll",value:function(){this.event.view_all.dispatch()}},{key:"setData",value:function(e){for(;this.addAchi.children.length>0;){var t=this.addAchi.children[0];this.addAchi.removeChild(t),t.destroy(),t=null}this.txtPlayList.text=de.instance().getData("162")+" ("+e+")"}},{key:"width",get:function(){return game.width}},{key:"height",get:function(){return this.heightGame}}])&&xg(n.prototype,i),o&&xg(n,o),t}();function Dg(e){return(Dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mg(e){return(Mg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ng(e,t){return(Ng=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jg=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Mg(t).call(this,game,null))||"object"!==Dg(i)&&"function"!=typeof i?Bg(n):i).event={view_all:new Phaser.Signal},e.positionUserProfile=oe.instance().positionUserProfile,e.txtPlayList=new Qt(e.positionUserProfile.playlist_txt_playlist,de.instance().getData("163")+" (0)"),e.txtPlayList.setTextBounds(0,0,237*window.GameConfig.RESIZE,35*window.GameConfig.RESIZE),e.addChild(e.txtPlayList),e.txtViewAll=new Qt(e.positionUserProfile.playlist_txt_xemtatca,de.instance().getData("1")),e.txtViewAll.setTextBounds(0,0,191*window.GameConfig.RESIZE,30*window.GameConfig.RESIZE),e.addChild(e.txtViewAll),e.btnViewAll=new _n(e.positionUserProfile.playlist_line_select,e.chooseViewAll,Bg(Bg(e))),e.btnViewAll.x=e.txtViewAll.x,e.btnViewAll.y=e.txtViewAll.y,e.btnViewAll.width=191*window.GameConfig.RESIZE,e.btnViewAll.height=30*window.GameConfig.RESIZE,e.btnViewAll.alpha=0,e.addChild(e.btnViewAll),e.line=new Bt(e.positionUserProfile.playlist_line),e.addChild(e.line),e.lineActive=new Bt(e.positionUserProfile.playlist_line_select),e.addChild(e.lineActive),e.addAchi=game.add.group(),e.addChild(e.addAchi),e.heightGame=89*window.GameConfig.RESIZE,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ng(e,t)}(t,Je),n=t,(i=[{key:"chooseViewAll",value:function(){this.event.view_all.dispatch()}},{key:"setData",value:function(e){for(;this.addAchi.children.length>0;){var t=this.addAchi.children[0];this.addAchi.removeChild(t),t.destroy(),t=null}this.txtPlayList.text=de.instance().getData("163")+" ("+e+")"}},{key:"height",get:function(){return this.heightGame}},{key:"width",get:function(){return game.width}}])&&Gg(n.prototype,i),o&&Gg(n,o),t}();function Ug(e){return(Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zg(e,t){return!t||"object"!==Ug(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hg(e){return(Hg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vg(e,t){return(Vg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qg=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Zg(this,Hg(t).call(this,game,null))).positionUserProfile=oe.instance().positionUserProfile,e.txtPlayList=new Qt(e.positionUserProfile.playlist_txt_playlist,de.instance().getData("164")),e.txtPlayList.setTextBounds(0,0,237*window.GameConfig.RESIZE,35*window.GameConfig.RESIZE),e.addChild(e.txtPlayList),e.line=new Bt(e.positionUserProfile.playlist_line),e.addChild(e.line),e.lineActive=new Bt(e.positionUserProfile.playlist_line_select),e.addChild(e.lineActive),e.lbMonth=new Qt(e.positionUserProfile.maxscore_label_month,de.instance().getData("165")),e.lbMonth.setTextBounds(0,0,255*window.GameConfig.RESIZE,30*window.GameConfig.RESIZE),e.addChild(e.lbMonth),e.lbAll=new Qt(e.positionUserProfile.maxscore_label_all,de.instance().getData("166")),e.lbAll.setTextBounds(0,0,255*window.GameConfig.RESIZE,30*window.GameConfig.RESIZE),e.addChild(e.lbAll),e.txtScoreMonth=new Qt(e.positionUserProfile.maxscore_txt_month,"0"),e.txtScoreMonth.setTextBounds(0,0,255*window.GameConfig.RESIZE,30*window.GameConfig.RESIZE),e.addChild(e.txtScoreMonth),e.txtScoreAll=new Qt(e.positionUserProfile.maxscore_txt_all,"0"),e.txtScoreAll.setTextBounds(0,0,255*window.GameConfig.RESIZE,30*window.GameConfig.RESIZE),e.addChild(e.txtScoreAll),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vg(e,t)}(t,Je),n=t,(i=[{key:"setData",value:function(e,t){this.txtScoreMonth.text=e,this.txtScoreAll.text=t}},{key:"height",get:function(){return 225*window.GameConfig.RESIZE}},{key:"width",get:function(){return game.width}}])&&Fg(n.prototype,i),o&&Fg(n,o),t}();function Wg(e){return(Wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kg(e,t){return!t||"object"!==Wg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zg(e,t,n){return(zg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yg(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Yg(e){return(Yg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xg(e,t){return(Xg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jg=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Kg(this,Yg(t).call(this,game,null))).dataProfile=null,e.event={view_all_playlist:new Phaser.Signal,view_all_friend:new Phaser.Signal,view_all_achievement:new Phaser.Signal,back:new Phaser.Signal},e.list=null,e.userProfile=null,e.bg=new Phaser.Button(game,0,0,"bg_create_room"),e.addChild(e.bg),Ei.instance().showBanerUserProfileScreen(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xg(e,t)}(t,Je),n=t,(i=[{key:"setData",value:function(e){null!==this.list&&(this.list.removeAll(),this.list.destroy(),this.list=null),this.dataProfile=e,null!==this.userProfile&&(this.removeChild(this.userProfile),this.userProfile.destroy(),this.userProfile=null),this.userProfile=new _g,this.userProfile.event.friend_status_update.add(this.friend_status_update,this),this.userProfile.event.back.add(this.chooseBack,this),this.addChild(this.userProfile),this.userProfile.setData(this.dataProfile.user,this.dataProfile.game_status,this.dataProfile.friend_status,this.dataProfile.current_level,this.dataProfile.next_level);var t=new Phaser.Group(game,0,0,null);this.list=new Ia(game,t,new Phaser.Rectangle(0,this.userProfile.height+20,game.width,(game.height-this.userProfile.height)*window.GameConfig.RESIZE),{direction:"y",padding:0,searchForClicks:!0}),this.addChild(t),this.playList=new Og,this.playList.event.view_all.add(this.viewAllPlaylist,this),this.playList.setData(this.dataProfile.number_of_playlist),this.list.add(this.playList),this.achievement=new Lg,this.achievement.event.view_all.add(this.viewAllAchievement,this),this.achievement.setData(this.dataProfile.number_achievement),this.list.add(this.achievement),this.friends=new jg,this.friends.event.view_all.add(this.viewAllFriend,this),this.friends.setData(this.dataProfile.count_friend),this.list.add(this.friends),this.maxScore=new Qg,this.maxScore.setData(this.dataProfile.user.weekly_high_score,this.dataProfile.user.all_time_high_score),this.list.add(this.maxScore)}},{key:"friend_status_update",value:function(e){this.dataProfile.friend_status=e,this.setData(this.dataProfile)}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){null!==this.list&&(this.list.removeAll(),this.list.destroy()),Ei.instance().hideBanner(),zg(Yg(t.prototype),"destroy",this).call(this)}},{key:"viewAllPlaylist",value:function(){this.event.view_all_playlist.dispatch()}},{key:"viewAllAchievement",value:function(){this.event.view_all_achievement.dispatch()}},{key:"viewAllFriend",value:function(){this.event.view_all_friend.dispatch()}}])&&qg(n.prototype,i),o&&qg(n,o),t}();function $g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ey=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putInt("user_id",e),t}}],(n=null)&&$g(t.prototype,n),i&&$g(t,i),e}();function ty(e){return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ny(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function iy(e,t){return!t||"object"!==ty(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oy(e){return(oy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ay(e,t){return(ay=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),iy(this,oy(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ay(e,t)}(t,Je),n=t,(i=[{key:"init",value:function(){}},{key:"afterCreate",value:function(){this.columnNumber=0,this.rowNumber=0,this.viewWidth=0,this.viewHeight=0,this.leftDistance=0,this.distanceBetweenColumns=0,this.distanceBetweenRows=0}},{key:"setViewList",value:function(e){for(var t=0;t<e.length;t++){t%this.columnNumber==0?e[t].x=this.leftDistance:e[t].x=e[t-1].x+e[t-1].width+this.distanceBetweenColumns;var n=Math.floor(t/this.columnNumber);e[t].y=0===n?0:e[t-this.columnNumber].y+e[t-this.columnNumber].height+this.distanceBetweenRows,this.addChild(e[t])}}},{key:"destroy",value:function(){for(console.log("destroy- ItemPage-----------");this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}},{key:"height",get:function(){return this.viewHeight}},{key:"width",get:function(){return this.viewWidth}}])&&ny(n.prototype,i),o&&ny(n,o),t}();function ry(e){return(ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ly(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cy(e,t,n){return(cy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hy(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function hy(e){return(hy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uy(e,t){return(uy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var fy=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=hy(t).call(this,game,null))||"object"!==ry(o)&&"function"!=typeof o?dy(i):o).event={changeIndex:new Phaser.Signal},e&&(n.columnNumber=e.column,n.viewWidth=e.width,n.viewHeight=e.height,n.rowHeight=e.rowHeight,n.leftDistance=e.leftDistance,n.direction=e.direction,n.distanceBetweenColumns=e.distanceBetweenColumns,n.distanceBetweenRows=e.distanceBetweenRows),n.idDelay=null,n.idx=0,n.countItem=0,n.list=[];var a=new Phaser.Group(game),s=new Phaser.Rectangle(0,0,n.viewWidth,n.viewHeight);return n.scroll=new Ia(n.game,a,s,{direction:n.direction,searchForClicks:!0,padding:n.distanceBetweenRows}),n.scroll.events.changeIndex.add(n.changeIndex,dy(dy(n))),n.addChild(a),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uy(e,t)}(t,Je),n=t,(i=[{key:"changeIndex",value:function(){this.event.changeIndex.dispatch(this.scroll.getIdx())}},{key:"buildListItem",value:function(){for(var e,t=this.idx;t<this.list.length;t++){if(t%this.columnNumber==0&&(e=[]),e.push(this.list[t]),this.idx++,e.length===this.columnNumber||t===this.list.length-1){var n=new sy;n.columnNumber=this.columnNumber,n.rowNumber=1,n.viewWidth=this.viewWidth,n.viewHeight=this.rowHeight,n.leftDistance=this.leftDistance,n.distanceBetweenColumns=this.distanceBetweenColumns,n.distanceBetweenRows=this.distanceBetweenRows,n.setViewList(e),this.countItem++,this.scroll.add(n)}}}},{key:"addItem",value:function(e){var t=new sy;t.columnNumber=this.columnNumber,t.rowNumber=1,t.viewWidth=this.viewWidth,t.viewHeight=this.rowHeight,t.leftDistance=this.leftDistance,t.distanceBetweenColumns=this.distanceBetweenColumns,t.distanceBetweenRows=this.distanceBetweenRows,t.setViewList(e),this.scroll.add(t)}},{key:"removeDelayBuild",value:function(){null!==this.idDelay&&(game.time.events.remove(this.idDelay),this.idDelay=null)}},{key:"destroy",value:function(){if(this.removeDelayBuild(),this.scroll.removeAll(),this.scroll.destroy(),this.removeAllItem(),this.parent){var e=this;this.parent.removeChild(e),e.destroy(),e=null}cy(hy(t.prototype),"destroy",this).call(this)}},{key:"viewList",set:function(e){this.scroll.reset(),this.scroll.removeAll(),this.idx=0,this.countItem=0,this.list=e,this.list.length>0&&(this.removeDelayBuild(),this.idDelay=game.time.events.add(.3*Phaser.Timer.SECOND,this.buildListItem,this))}}])&&ly(n.prototype,i),o&&ly(n,o),t}();function py(e){return(py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yy(e,t,n){return(yy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=my(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function my(e){return(my=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vy(e,t){return(vy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var by=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=my(t).call(this,game,null))||"object"!==py(i)&&"function"!=typeof i?wy(n):i).event={BUY:new Phaser.Signal,CHOOSE:new Phaser.Signal,TOVIP:new Phaser.Signal},e.data=null,e.positionShop=oe.instance().positionDefaultSource,e.bgButton=new _n(e.positionShop.playlist_button_buy,e.chooseItem,wy(wy(e))),e.bgButton.alpha=0,e.bgButton.x=0,e.bgButton.y=0,e.bgButton.width=166*oe.instance().scale,e.bgButton.height=260*oe.instance().scale,e.addChild(e.bgButton),e.ava=new ec,e.ava.setSize(166*oe.instance().scale,166*oe.instance().scale),e.addChild(e.ava),e.lbName=new Qt(e.positionShop.gennes_text_name_playlist,""),e.lbName.lineSpacing=6,e.lbName.setTextBounds(0,0,166*oe.instance().scale,89*oe.instance().scale),e.addChild(e.lbName),e.btnBuy=new qn(e.positionShop.playlist_button_buy,"",e.chooseBuy,wy(wy(e))),e.btnBuy.visible=!1,e.addChild(e.btnBuy),e.btnUpToVip=new qn(e.positionShop.playlist_button_buy_vip,de.instance().getData("141"),e.chooseUpVip,wy(wy(e))),e.addChild(e.btnUpToVip),e.lbWarning=new Qt(e.positionShop.playlist_text_warning,""),e.lbWarning.setTextBounds(0,0,166*oe.instance().scale,41*oe.instance().scale),e.lbWarning.text="",e.addChild(e.lbWarning),e.labelVip=new Phaser.Sprite(game,0,140,"vipSource","Lable_Vip"),e.labelVip.kill(),e.addChild(e.labelVip),e.addLayout=game.add.group(),e.addLayout.x=6*oe.instance().scale,e.addLayout.y=250*oe.instance().scale,e.addChild(e.addLayout),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vy(e,t)}(t,Z),n=t,(i=[{key:"chooseItem",value:function(){this.event.CHOOSE.dispatch(this.data)}},{key:"chooseBuy",value:function(){this.event.BUY.dispatch(this.data)}},{key:"chooseUpVip",value:function(){this.event.TOVIP.dispatch()}},{key:"setData",value:function(e,t){if(this.data=e,null!==e){if(this.addLayout.removeChildren(),this.ava.beginLoad(this.data.thumb,t),this.lbName.text=this.data.name,1==this.data.is_owner){this.btnBuy.visible=!1;var n=new dc(e.user);this.addLayout.addChild(n)}else this.btnBuy.setText(this.data.price),this.btnBuy.visible=!0;!0===this.data.vip?(!0===dV.instance().dataMySeft.vip?this.btnUpToVip.visible=!1:(this.btnBuy.visible=!1,1==this.data.is_owner?this.btnUpToVip.visible=!1:this.btnUpToVip.visible=!0),this.labelVip.revive()):this.btnUpToVip.visible=!1}}},{key:"getData",value:function(){return this.data}},{key:"destroy",value:function(){if(this.children)for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}yy(my(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.ava.width}},{key:"height",get:function(){return 326*oe.instance().scale}}])&&gy(n.prototype,i),o&&gy(n,o),t}();function _y(e){return(_y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ey(e,t,n){return(Ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cy(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Cy(e){return(Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ky(e,t){return(ky=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Py(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Oy=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=Cy(t).call(this,game,null))||"object"!==_y(o)&&"function"!=typeof o?Py(i):o).user_id=e,ht.instance().showLoading(),n.event={back:new Phaser.Signal},n.bg=new Phaser.Button(game,0,0,"bg_create_room"),n.addChild(n.bg);var a={column:3,width:game.width,height:game.height-160*window.GameConfig.RESIZE,rowHeight:326*window.GameConfig.RESIZE,leftDistance:35*window.GameConfig.RESIZE,direction:"y",distanceBetweenColumns:35*window.GameConfig.RESIZE,distanceBetweenRows:35*window.GameConfig.RESIZE};return n.scroll=new fy(a),n.scroll.y=148*window.GameConfig.RESIZE,n.addChild(n.scroll),n.header=new Cs,n.header.event.back.add(n.chooseBack,Py(Py(n))),n.header.setBg(!1),n.header.setTitle(de.instance().getData("54")),n.addChild(n.header),n.user_id===dV.instance().dataMySeft.user_id?(_t.instance().getPlaylistMe(),_t.instance().event.get_data_me_playlist_complete.add(n.getDataMePlaylistComplete,Py(Py(n)))):dV.instance().sendData(cr.USER_DETAIL_PLAYLIST_LOAD_REQUEST,ey.begin(n.user_id)),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ky(e,t)}(t,Je),n=t,(i=[{key:"getDataMePlaylistComplete",value:function(e){_t.instance().event.get_data_me_playlist_complete.remove(this.getDataMePlaylistComplete,this),this.setPlaylist(e)}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"setPlaylist",value:function(e){var t=[];LogConsole.log("playlists -----------");for(var n=0;n<e.length;n++){var i=new by;i.event.CHOOSE.add(this.choosePlaylist,this),e[n].is_owner=1,i.setData(e[n],n),t.push(i)}this.scroll.viewList=t,ht.instance().hideLoading()}},{key:"choosePlaylist",value:function(e){jC.instance().addPlaylistDetail(e.id)}},{key:"destroy",value:function(){rn.instance().resetLoad(),this.scroll.destroy(),Ey(Cy(t.prototype),"destroy",this).call(this)}}])&&Sy(n.prototype,i),o&&Sy(n,o),t}();var Ry=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.medal="",this.title="",this.current_level=0};function xy(e){return(xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ty(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Iy(e,t){return!t||"object"!==xy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ay(e){return(Ay=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ly(e,t){return(Ly=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dy=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=Iy(this,Ay(t).call(this,game,null)),n>0&&e.setLevel(n),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ly(e,t)}(t,Je),n=t,(i=[{key:"setLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[];1===e?n.push({x:47,y:6,scale:1}):2===e?(n.push({x:40,y:22,scale:.75}),n.push({x:73,y:22,scale:.75})):3===e?(n.push({x:21,y:21,scale:.75}),n.push({x:47,y:6,scale:1}),n.push({x:91,y:21,scale:.75})):4===e?(n.push({x:18,y:35,scale:.6}),n.push({x:40,y:17,scale:.75}),n.push({x:73,y:17,scale:.75}),n.push({x:104,y:35,scale:.6})):5===e&&(n.push({x:-1,y:40,scale:.6}),n.push({x:21,y:21,scale:.75}),n.push({x:47,y:6,scale:1}),n.push({x:91,y:21,scale:.75}),n.push({x:120,y:40,scale:.6})),console.log(n);for(var i=0;i<n.length;i++){var o=new Phaser.Sprite(game,n[i].x*t,n[i].y*t,"defaultSource","Stars");o.scale.setTo(n[i].scale*t,n[i].scale*t),this.addChild(o)}}}])&&Ty(n.prototype,i),o&&Ty(n,o),t}();function Gy(e){return(Gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function My(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ny(e,t){return!t||"object"!==Gy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function By(e,t,n){return(By="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jy(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function jy(e){return(jy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uy(e,t){return(Uy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fy=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ny(this,jy(t).call(this,game,null))).idRemove=null,e.positionUserProfile=oe.instance().positionUserProfile,e.data=new Ry,e.ava=new zc,e.ava.y=40,e.ava.setSize(118*window.GameConfig.RESIZE,118*window.GameConfig.RESIZE),e.addChild(e.ava),e.txtName=new Qt(e.positionUserProfile.achievement_txt_name,""),e.txtName.setTextBounds(0,0,118*window.GameConfig.RESIZE,47*window.GameConfig.RESIZE),e.txtName.y=e.positionUserProfile.achievement_txt_name.y+40,e.addChild(e.txtName),e.iconAchiment=new Phaser.Sprite(game,0,0,"EffectAchiment"),e.iconAchiment.x=e.ava.x+(e.ava.width-e.iconAchiment.width)/2,e.iconAchiment.y=e.ava.y+(e.ava.height-e.iconAchiment.height)/2,e.iconAchiment.smoothed=!0,e.iconAchiment.animations.add("EffectAchiment"),e.addChild(e.iconAchiment),e.levelAchi=new Dy,e.levelAchi.x=12,e.addChild(e.levelAchi),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uy(e,t)}(t,Je),n=t,(i=[{key:"removeDelayCall",value:function(){null!==this.idRemove&&game.time.events.remove(this.idRemove)}},{key:"setData",value:function(e,t){this.data=Object.assign({},this.data,e),this.ava.setAvatar(this.data.medal,t),this.txtName.text=this.data.title+" "+e.current_level;var n=.5+.5*t;this.levelAchi.setLevel(e.current_level,.58),this.removeDelayCall(),this.idRemove=game.time.events.add(Phaser.Timer.SECOND*n,this.playSpriteSheet,this)}},{key:"playSpriteSheet",value:function(){this.iconAchiment.animations.play("EffectAchiment",60)}},{key:"destroy",value:function(){this.removeDelayCall(),By(jy(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return 118*window.GameConfig.RESIZE}},{key:"height",get:function(){return 218*window.GameConfig.RESIZE}}])&&My(n.prototype,i),o&&My(n,o),t}();function Zy(e){return(Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vy(e,t,n){return(Vy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qy(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Qy(e){return(Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wy(e,t){return(Wy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ky=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,n=!(o=Qy(t).call(this,game,null))||"object"!==Zy(o)&&"function"!=typeof o?qy(i):o,ht.instance().showLoading(),n.event={back:new Phaser.Signal},n.bg=new Phaser.Button(game,0,0,"bg_create_room"),n.addChild(n.bg);var a={column:4,width:game.width,height:game.height-160*window.GameConfig.RESIZE,rowHeight:178*window.GameConfig.RESIZE,leftDistance:35*window.GameConfig.RESIZE,direction:"y",distanceBetweenColumns:32*window.GameConfig.RESIZE,distanceBetweenRows:32*window.GameConfig.RESIZE};return n.scroll=new fy(a),n.scroll.y=148*window.GameConfig.RESIZE,n.addChild(n.scroll),n.header=new Cs,n.header.event.back.add(n.chooseBack,qy(qy(n))),n.header.setBg(!1),n.header.setTitle(de.instance().getData("162")),n.addChild(n.header),dV.instance().sendData(cr.USER_DETAIL_ACHIEVEMENT_LOAD_REQUEST,ey.begin(e)),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wy(e,t)}(t,Je),n=t,(i=[{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"setAchievement",value:function(e){var t=[];LogConsole.log("playlists -----------");for(var n=0;n<e.length;n++){var i=new Fy;i.setData(e[n],n),t.push(i)}this.scroll.viewList=t}},{key:"destroy",value:function(){rn.instance().resetLoad(),this.scroll.destroy(),Vy(Qy(t.prototype),"destroy",this).call(this)}}])&&Hy(n.prototype,i),o&&Hy(n,o),t}();function zy(e){return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xy(e,t){return!t||"object"!==zy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jy(e,t,n){return(Jy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$y(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $y(e){return($y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function em(e,t){return(em=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xy(this,$y(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&em(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.positionCreateRoom=oe.instance().positionDefaultSource,this.event={invite:new Phaser.Signal},this.data=new pg,this.ava=new zc,this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(this.chooseInfo,this),this.ava.setSize(68*oe.instance().scale,68*oe.instance().scale),this.ava.x=36*oe.instance().scale,this.ava.y=27*oe.instance().scale,this.addChild(this.ava),this.txtName=new Qt(this.positionCreateRoom.listfriend_txt_name,""),this.addChild(this.txtName),this.btnInvite=new qn(this.positionCreateRoom.listfriend_btn_invite,de.instance().getData("47"),this.chooseInvite,this),this.addChild(this.btnInvite),this.inviteDone=new Bt(this.positionCreateRoom.friend_invite_done),this.inviteDone.x=this.btnInvite.x+(this.btnInvite.width-this.inviteDone.width)/2,this.inviteDone.y=this.btnInvite.y+(this.btnInvite.height-this.inviteDone.height)/2,this.inviteDone.kill(),this.addChild(this.inviteDone),this.frameAva=new Phaser.Image(game,70,65,"vipSource","Ava_Opponents_Nho"),this.frameAva.anchor.set(.5),this.frameAva.visible=!1,this.addChild(this.frameAva),this.iconOnline=new Bt(this.positionCreateRoom.listfriend_icon_online),this.iconOnline.visible=!1,this.addChild(this.iconOnline),this.iconOffline=new Bt(this.positionCreateRoom.listfriend_icon_offline),this.addChild(this.iconOffline),this.line=new Bt(this.positionCreateRoom.listfriend_bg_line),this.addChild(this.line)}},{key:"chooseInfo",value:function(e,t,n){n&&jC.instance().addUserProfile(this.data.id)}},{key:"setData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];LogConsole.log(e),this.data=Object.assign({},this.data,e),this.txtName.text=this.data.user_name,!0===n?(!0===this.data.is_online?(this.iconOnline.visible=!0,this.iconOffline.visible=!1):(this.iconOnline.visible=!1,this.iconOffline.visible=!0),this.btnInvite.visible=!1):!0===this.data.is_online?(this.iconOnline.visible=!0,this.iconOffline.visible=!1,this.btnInvite.visible=!0):(this.iconOnline.visible=!1,this.iconOffline.visible=!0,this.btnInvite.visible=!1),this.ava.setAvatar(this.data.avatar,t),this.x=game.width,!0===this.data.vip&&(this.frameAva.visible=!0),game.add.tween(this).to({x:0},150,Phaser.Easing.Power1,!0,80*(t+1))}},{key:"chooseInvite",value:function(){LogConsole.log("chooseInvite"),this.btnInvite.kill(),this.btnInvite.inputEnabled=!1,this.inviteDone.revive(),this.event.invite.dispatch(this.data)}},{key:"destroy",value:function(){Jy($y(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return game.width}},{key:"height",get:function(){return 110*oe.instance().scale}}])&&Yy(n.prototype,i),o&&Yy(n,o),t}();function nm(e){return(nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function im(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function om(e,t,n){return(om="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=am(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function am(e){return(am=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sm(e,t){return(sm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var lm=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,n=!(o=am(t).call(this,game,null))||"object"!==nm(o)&&"function"!=typeof o?rm(i):o,ht.instance().showLoading(),n.event={back:new Phaser.Signal},n.bg=new Phaser.Button(game,0,0,"bg_create_room"),n.addChild(n.bg);var a=new Phaser.Group(game,0,0,null);return n.listFriends=new Ia(game,a,new Phaser.Rectangle(0,0,game.width,game.height-100*oe.instance().scale),{direction:"y",padding:0,searchForClicks:!0}),a.x=0,a.y=100*oe.instance().scale,n.addChild(a),n.header=new Cs,n.header.event.back.add(n.chooseBack,rm(rm(n))),n.header.setBg(!1),n.header.setTitle(de.instance().getData("163")),n.addChild(n.header),Ei.instance().showBanerViewAllFriendScreen(),dV.instance().dataMySeft.user_id===e?!0===ak.instance().ktLoadFriend?n.setFriend(ak.instance().listFriend.getFriends()):(ak.instance().event.load_list_friend_complete.add(n.loadListFriendComplete,rm(rm(n))),ak.instance().sendGetFriendsList()):dV.instance().sendData(cr.USER_FRIEND_LIST_LOAD_REQUEST,ey.begin(e)),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sm(e,t)}(t,Je),n=t,(i=[{key:"loadListFriendComplete",value:function(){this.setFriend(ak.instance().listFriend.getFriends())}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"setFriend",value:function(e){LogConsole.log("playlists -----------");for(var t=0;t<e.length;t++){var n=new tm;n.setData(e[t],t,!0),this.listFriends.add(n)}ht.instance().hideLoading()}},{key:"destroy",value:function(){rn.instance().resetLoad(),ak.instance().event.load_list_friend_complete.remove(this.loadListFriendComplete,this),Ei.instance().hideBanner(),this.listFriends.removeAll(),this.listFriends.destroy(),om(am(t.prototype),"destroy",this).call(this)}}])&&im(n.prototype,i),o&&im(n,o),t}();function cm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var hm=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t={game_status:"",friend_status:"",number_achievement:0,its_me:!1,vip:!1,vip_expired:0,user:{level:0,level_title:"",user_name:"",all_time_high_score:0,last_login:0,weekly_high_score:0,description:"",id:0,avatar:"",is_online:!1,experience_score:0},number_of_playlist:0,count_friend:0,next_level:{level:0,id:0,experience_score:0},current_level:{level:0,id:0,experience_score:0}};if(!0===e.getBool("its_me")){var n=dV.instance().dataMySeft;t.user.level=n.level,t.user.level_title=e.getUtfString("level_title"),t.user.user_name=n.user_name,t.user.all_time_high_score=n.all_time_high_score,t.user.weekly_high_score=n.weekly_high_score,t.user.description=n.description,t.user.id=n.user_id,t.user.avatar=n.avatar,t.user.experience_score=n.experience_score,t.user.vip=n.vip,t.user.vip_expired=n.vip_expired;var i=e.getSFSObject("current_level");t.current_level.level=i.getInt("level"),t.current_level.id=i.getInt("id"),t.current_level.experience_score=i.getInt("experience_score");var o=e.getSFSObject("next_level");t.next_level.level=o.getInt("level"),t.next_level.id=o.getInt("id"),t.next_level.experience_score=o.getInt("experience_score")}else{t.game_status=e.getUtfString("game_status"),t.friend_status=e.getUtfString("friend_status");var a=e.getSFSObject("user");t.user.level=a.getInt("level"),t.user.level_title=a.getUtfString("level_title"),t.user.user_name=a.getUtfString("user_name"),t.user.all_time_high_score=a.getInt("all_time_high_score"),t.user.last_login=a.getLong("last_login"),t.user.weekly_high_score=a.getInt("weekly_high_score"),t.user.description=a.getUtfString("description"),t.user.id=a.getInt("id"),t.user.avatar=a.getUtfString("avatar"),t.user.is_online=a.getBool("is_online"),t.user.experience_score=a.getInt("experience_score"),t.user.vip=a.getBool("vip")}return t.number_achievement=e.getInt("number_achievement"),t.number_of_playlist=e.getInt("number_of_playlist"),t.count_friend=e.getInt("count_friend"),t}}],(n=null)&&cm(t.prototype,n),i&&cm(t,i),e}();function um(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var dm=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"achievements",get:function(){return"achievements"}},{key:"reward",get:function(){return"reward"}},{key:"condition",get:function(){return"condition"}},{key:"achievement_type_id",get:function(){return"achievement_type_id"}},{key:"is_done",get:function(){return"is_done"}},{key:"reward_type",get:function(){return"reward_type"}},{key:"medal",get:function(){return"medal"}},{key:"achieved",get:function(){return"achieved"}},{key:"description",get:function(){return"description"}},{key:"id",get:function(){return"id"}},{key:"title",get:function(){return"title"}},{key:"required",get:function(){return"required"}},{key:"playlists",get:function(){return"playlists"}},{key:"is_highlight",get:function(){return"is_highlight"}},{key:"used_times",get:function(){return"used_times"}},{key:"thumb",get:function(){return"thumb"}},{key:"created",get:function(){return"created"}},{key:"is_owner",get:function(){return"is_owner"}},{key:"is_default",get:function(){return"is_default"}},{key:"genre_id",get:function(){return"genre_id"}},{key:"price",get:function(){return"price"}},{key:"is_general",get:function(){return"is_general"}},{key:"name",get:function(){return"name"}},{key:"purchased_count",get:function(){return"purchased_count"}},{key:"vip",get:function(){return"vip"}},{key:"is_solo_mode",get:function(){return"is_solo_mode"}},{key:"updated",get:function(){return"updated"}},{key:"user_playlist_mapping",get:function(){return"user_playlist_mapping"}},{key:"user_id",get:function(){return"user_id"}},{key:"level",get:function(){return"level"}},{key:"playlist_id",get:function(){return"playlist_id"}},{key:"exp_score",get:function(){return"exp_score"}},{key:"active",get:function(){return"active"}},{key:"current_level_score",get:function(){return"current_level_score"}},{key:"next_level_score",get:function(){return"next_level_score"}},{key:"master",get:function(){return"master"}},{key:"gender",get:function(){return"gender"}},{key:"user_name",get:function(){return"user_name"}},{key:"all_time_high_score",get:function(){return"all_time_high_score"}},{key:"last_login",get:function(){return"last_login"}},{key:"weekly_high_score",get:function(){return"weekly_high_score"}},{key:"avatar",get:function(){return"avatar"}},{key:"is_online",get:function(){return"is_online"}},{key:"user",get:function(){return"user"}},{key:"friends",get:function(){return"friends"}},{key:"game_status",get:function(){return"game_status"}},{key:"friend_status",get:function(){return"friend_status"}},{key:"support_item",get:function(){return"support_item"}},{key:"level_title",get:function(){return"level_title"}},{key:"next_level",get:function(){return"next_level"}},{key:"current_level",get:function(){return"current_level"}},{key:"experience_score",get:function(){return"experience_score"}}],(n=null)&&um(t.prototype,n),i&&um(t,i),e}();function fm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pm=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){for(var t=[],n=e.getSFSArray(dm.achievements),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=new Ry;a.medal=o.getUtfString(dm.medal),a.title=o.getUtfString(dm.title),a.current_level=o.getInt("current_level"),t.push(a)}return t}}],(n=null)&&fm(t.prototype,n),i&&fm(t,i),e}();function gm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ym=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){for(var t=[],n=e.getSFSArray(dm.friends),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=new Qa;a.avatar=o.getUtfString(dm.avatar),a.is_online=o.getBool(dm.is_online),a.id=o.getInt(dm.id),a.user_name=o.getUtfString(dm.user_name),a.vip=o.getBool(dm.vip),t.push(a)}return t}}],(n=null)&&gm(t.prototype,n),i&&gm(t,i),e}();function mm(e){return(mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wm(e,t){return!t||"object"!==mm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bm(e,t,n){return(bm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_m(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _m(e){return(_m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sm(e,t){return(Sm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Em=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=wm(this,_m(t).call(this,game,null))).arrResource=[],e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sm(e,t)}(t,Je),n=t,(i=[{key:"loadResource",value:function(){for(var e=0;e<this.arrResource.length;e++){var t=this.arrResource[e],n=t.type,i=t.link+"?v=".concat(window.VersionClient),o=t.key;switch(n){case"text":game.load.text(o,i);break;case"image":game.load.image(o,i);break;case"atlas":var a=t.linkJson+"?v=".concat(window.VersionClient);game.load.atlas(o,i,a,Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);break;case"spritesheet":var s=t.width,r=t.height,l=t.countFrame;game.load.spritesheet(o,i,s,r,l)}}game.load.onLoadComplete.add(this.loadDataFileComplete,this),game.load.start()}},{key:"loadDataFileComplete",value:function(){game.load.onLoadComplete.remove(this.loadDataFileComplete,this),this.loadFileComplete()}},{key:"loadFileComplete",value:function(){}},{key:"removeResource",value:function(){for(var e=0;e<this.arrResource.length;e++){var t=this.arrResource[e],n=t.type,i=t.key;switch(n){case"text":game.cache.checkTextKey(i)&&game.cache.removeText(i);break;case"image":game.cache.checkImageKey(i)&&game.cache.removeImage(i);break;case"atlas":game.cache.checkImageKey(i)&&game.cache.removeImage(i);var o=t.linkJson+"?v=".concat(window.VersionClient);game.cache.checkJSONKey(o)&&game.cache.removeJSON(o),game.cache.checkXMLKey(o)&&game.cache.removeXML(o);break;case"spritesheet":game.cache.checkImageKey(i)&&game.cache.removeImage(i)}}}},{key:"destroy",value:function(){this.removeResource(),bm(_m(t.prototype),"destroy",this).call(this)}}])&&vm(n.prototype,i),o&&vm(n,o),t}();function Cm(e){return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function km(e,t){return!t||"object"!==Cm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pm(e,t,n){return(Pm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Om(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Om(e){return(Om=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xm(e,t,n){return t&&Rm(e.prototype,t),n&&Rm(e,n),e}function Tm(e,t){return(Tm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Im=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=km(this,Om(t).call(this,game,null))).event={back:new Phaser.Signal},LogConsole.log("user_id GGG : "+e),n.screenIdx=i,n.user_id=e,n.userProfile=null,n.allPlaylist=null,n.allAchievement=null,n.allFriend=null,n.dataProfile=null,n.arrResource=[{type:"atlas",link:"img/atlas/userprofile.png",key:"userprofile",linkJson:"img/atlas/userprofile.json"}],n.loadResource(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tm(e,t)}(t,Em),xm(t,null,[{key:"SCREEN_PROFILE",get:function(){return 0}},{key:"SCREEN_PLAYLIST",get:function(){return 1}},{key:"SCREEN_ACHIEVEMENT",get:function(){return 2}},{key:"SCREEN_FRIEND",get:function(){return 3}}]),xm(t,[{key:"loadFileComplete",value:function(){switch(Pm(Om(t.prototype),"loadFileComplete",this).call(this),this.screenIdx){case t.SCREEN_PROFILE:this.addUserProfile();break;case t.SCREEN_ACHIEVEMENT:this.addAllAchievement();break;case t.SCREEN_PLAYLIST:this.addAllPlaylist();break;case t.SCREEN_FRIEND:this.addAllFriend()}this.addEvent()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),ht.instance().showLoading(),this.updateDescription(),Qe.instance().event.updateDescription.add(this.updateDescriptionUser,this)}},{key:"updateDescription",value:function(){dV.instance().sendData(cr.USER_DETAIL_LOAD_REQUEST,ey.begin(this.user_id))}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),Qe.instance().event.updateDescription.remove(this.updateDescriptionUser,this)}},{key:"updateDescriptionUser",value:function(e){this.dataProfile.user.description=e,console.log(this.dataProfile),null!==this.userProfile&&this.userProfile.setData(this.dataProfile)}},{key:"getData",value:function(e){switch(e.cmd){case cr.USER_DETAIL_LOAD_RESPONSE:"OK"===e.params.getUtfString("status")?(this.dataProfile=hm.begin(e.params),null!==this.userProfile&&this.userProfile.setData(this.dataProfile)):this.chooseBackUser(),ht.instance().hideLoading();break;case cr.USER_FRIEND_RESPONSE:case cr.USER_FRIEND_REQUEST:break;case cr.USER_DETAIL_PLAYLIST_LOAD_RESPONSE:if("OK"===e.params.getUtfString("status"))if(null!==this.allPlaylist){for(var t=e.params.getSFSArray("playlists"),n=[],i={},o=0;o<t.size();o++){var a=t.getSFSObject(o),s=a.getInt("playlist_id");n.push(s);var r=new vt;r.user_id=this.user_id,r.level=a.getInt("level"),r.playlist_id=s,r.exp_score=a.getInt("exp_score"),r.current_level_score=a.getInt("current_level_score"),r.next_level_score=a.getInt("next_level_score"),r.updated=a.getLong("updated"),i[s]=r}_t.instance().getPlaylistById(n,i),_t.instance().event.get_data_playlist_complete.add(this.getDataPlaylistComplete,this)}else this.chooseBack(),ht.instance().hideLoading();else this.chooseBack(),ht.instance().hideLoading();break;case cr.USER_DETAIL_ACHIEVEMENT_LOAD_RESPONSE:"OK"===e.params.getUtfString("status")&&null!==this.allAchievement?this.allAchievement.setAchievement(pm.begin(e.params)):this.chooseBack(),ht.instance().hideLoading();break;case cr.USER_FRIEND_LIST_LOAD_RESPONSE:"OK"===e.params.getUtfString("status")&&null!==this.allFriend?this.allFriend.setFriend(ym.begin(e.params)):this.chooseBack(),ht.instance().hideLoading()}}},{key:"getDataPlaylistComplete",value:function(e){_t.instance().event.get_data_playlist_complete.remove(this.getDataPlaylistComplete,this),this.allPlaylist.setPlaylist(e)}},{key:"removeAllScreen",value:function(){this.removeUserProfile(),this.removeAllPlaylist(),this.removeAllAchievement(),this.removeAllFriend()}},{key:"addUserProfile",value:function(){this.removeAllScreen(),this.userProfile=new Jg,this.userProfile.event.back.add(this.chooseBackUser,this),this.userProfile.event.view_all_achievement.add(this.addAllAchievement,this),this.userProfile.event.view_all_friend.add(this.addAllFriend,this),this.userProfile.event.view_all_playlist.add(this.addAllPlaylist,this),null!==this.dataProfile&&this.userProfile.setData(this.dataProfile),this.addChild(this.userProfile)}},{key:"removeUserProfile",value:function(){null!==this.userProfile&&(this.removeChild(this.userProfile),this.userProfile.destroy(),this.userProfile=null)}},{key:"addAllPlaylist",value:function(){this.removeAllScreen(),this.allPlaylist=new Oy(this.user_id),this.allPlaylist.event.back.add(this.chooseBack,this),this.addChild(this.allPlaylist)}},{key:"removeAllPlaylist",value:function(){null!==this.allPlaylist&&(this.removeChild(this.allPlaylist),this.allPlaylist.destroy(),this.allPlaylist=null)}},{key:"addAllAchievement",value:function(){this.removeAllScreen(),this.allAchievement=new Ky(this.user_id),this.allAchievement.event.back.add(this.chooseBack,this),this.addChild(this.allAchievement)}},{key:"removeAllAchievement",value:function(){null!==this.allAchievement&&(this.removeChild(this.allAchievement),this.allAchievement.destroy(),this.allAchievement=null)}},{key:"addAllFriend",value:function(){this.removeAllScreen(),this.allFriend=new lm(this.user_id),this.allFriend.event.back.add(this.chooseBack,this),this.addChild(this.allFriend)}},{key:"removeAllFriend",value:function(){null!==this.allFriend&&(this.removeChild(this.allFriend),this.allFriend.destroy(),this.allFriend=null)}},{key:"chooseBack",value:function(){LogConsole.log("chooseBack"+this.screenIdx),this.screenIdx>0?this.event.back.dispatch():this.addUserProfile()}},{key:"chooseBackUser",value:function(){LogConsole.log("chooseBackUser"),this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),this.removeAllScreen(),Pm(Om(t.prototype),"destroy",this).call(this)}}]),t}();function Am(e){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Dm(e,t){return!t||"object"!==Am(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gm(e){return(Gm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mm(e,t){return(Mm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nm=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Dm(this,Gm(t).call(this,e,n,i))).positionShop=oe.instance().positionShop,o.btn=null,o.idx=-1,o.txtContent=new Qt(o.positionShop.bot_menu_text_button,""),o.txtContent.setTextBounds(0,0,160*oe.instance().scale,27*oe.instance().scale),o.addChild(o.txtContent),o.lineDoc=new Bt(o.positionShop.playlist_menu_linedoc),o.lineDoc.x=159*oe.instance().scale,o.lineDoc.y=41*oe.instance().scale,o.addChild(o.lineDoc),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mm(e,t)}(t,_n),n=t,(i=[{key:"setButton",value:function(e,t){this.idx=t,this.btn=new Bt(e.obj),LogConsole.log("this.width : "+this.width+" this.btn.width "+this.btn.width),this.btn.x=(this.width-this.btn.width)/2,this.addChild(this.btn),this.txtContent.text=e.content,3==t&&(this.lineDoc.visible=!1)}},{key:"getIdx",value:function(){return this.idx}},{key:"active",value:function(){this.btn.alpha=1,this.btn.y=25*oe.instance().scale,this.txtContent.visible=!0}},{key:"deactive",value:function(){this.btn.alpha=.2,this.btn.y=41*oe.instance().scale,this.txtContent.visible=!1}}])&&Lm(n.prototype,i),o&&Lm(n,o),t}();function Bm(e){return(Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Um(e){return(Um=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fm(e,t){return(Fm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Hm=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Um(t).call(this,game,null))||"object"!==Bm(i)&&"function"!=typeof i?Zm(n):i).event={change_menu:new Phaser.Signal},e.positionShop=oe.instance().positionShop,e.idxTab=o;var a=[{obj:{x:0,y:0,nameAtlas:"shop",nameSprite:"Icon_Playlist_active"},content:"Playlist"},{obj:{x:0,y:0,nameAtlas:"shop",nameSprite:"Icon_Tainguyen_active"},content:"Tài nguyên"},{obj:{x:0,y:0,nameAtlas:"shop",nameSprite:"Icon_Hotro_active"},content:"Hỗ trợ"},{obj:{x:0,y:0,nameAtlas:"shop",nameSprite:"Icon_Vip_active"},content:"Vip"}];e.line=new Bt(e.positionShop.bot_menu_line_top),e.addChild(e.line),e.arrButtonTab=[];for(var s=0,r=0;r<a.length;r++){var l=new Nm(e.positionShop.bot_menu_bg_button,e.chooseButton,Zm(Zm(e)));l.setButton(a[r],r),l.x=s,s+=l.width,e.addChild(l),r===e.idxTab?l.active():l.deactive(),e.arrButtonTab.push(l)}return e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fm(e,t)}(t,Je),n=t,(i=[{key:"chooseButton",value:function(e){LogConsole.log("chooseButton"),LogConsole.log(e);var t=e.getIdx();if(t===this.idxTab);else{for(var n=0;n<this.arrButtonTab.length;n++){var i=this.arrButtonTab[n];i.getIdx()!==t?i.deactive():i.active()}this.idxTab=t,this.event.change_menu.dispatch(this.idxTab)}}},{key:"setButtonActive",value:function(e){this.arrButtonTab[this.idxTab].deactive(),this.idxTab=e,this.arrButtonTab[this.idxTab].active()}}])&&jm(n.prototype,i),o&&jm(n,o),t}();function Vm(e){return(Vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wm(e,t){return!t||"object"!==Vm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qm(e,t,n){return(qm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Km(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Km(e){return(Km=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zm(e,t){return(zm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ym=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Wm(this,Km(t).call(this,game,0,0,null,n,i))).positionShop=oe.instance().positionShop,o.lineNgang=new Bt(o.positionShop.sort_play_list_icon_active_search_menu),o.addChild(o.lineNgang),o.lineDoc=new Bt(o.positionShop.sort_play_list_linedoc_search_menu),o.addChild(o.lineDoc),o.txtContent=new Qt(o.positionShop.sort_play_list_text_search_menu,e),o.txtContent.setTextBounds(0,0,o.width,o.height),o.addChild(o.txtContent),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zm(e,t)}(t,Phaser.Button),n=t,(i=[{key:"active",value:function(){this.lineNgang.visible=!0,this.txtContent.changeStyle({fill:"#ffffff"})}},{key:"deactive",value:function(){this.lineNgang.visible=!1,this.txtContent.changeStyle({fill:"#695782"})}},{key:"hideDoc",value:function(){this.lineDoc.visible=!1}},{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),qm(Km(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"destroy",value:function(){if(this.children)for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}qm(Km(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return 213*oe.instance().scale}},{key:"height",get:function(){return 100*oe.instance().scale}}])&&Qm(n.prototype,i),o&&Qm(n,o),t}();function Xm(e){return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $m(e,t){return!t||"object"!==Xm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ev(e,t,n){return(ev="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tv(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tv(e){return(tv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nv(e,t){return(nv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$m(this,tv(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nv(e,t)}(t,Je),n=t,o=[{key:"SORT_AZ",value:function(){return"SORT_AZ"}},{key:"SORT_NEW",value:function(){return"SORT_NEW"}},{key:"SORT_POP",value:function(){return"SORT_POP"}}],(i=[{key:"afterCreate",value:function(){this.eventChangeMenu=new Phaser.Signal,this.eventSearch=new Phaser.Signal,this.positionShop=oe.instance().positionShop,this.type=t.sortAZ,this.bg=new _n(this.positionShop.sort_play_list_bg_search_menu),this.addChild(this.bg),this.sortAZ=new Ym(de.instance().getData("143"),this.chooseSortAZ,this),this.sortAZ.active(),this.addChild(this.sortAZ),this.sortNew=new Ym(de.instance().getData("136"),this.chooseSortNew,this),this.sortNew.deactive(),this.sortNew.x=this.sortAZ.x+213*oe.instance().scale,this.addChild(this.sortNew),this.sortPhobien=new Ym(de.instance().getData("137"),this.chooseSortPhobien,this),this.sortPhobien.deactive(),this.sortPhobien.hideDoc(),this.sortPhobien.x=this.sortNew.x+213*oe.instance().scale,this.addChild(this.sortPhobien)}},{key:"setMenu",value:function(e){e===t.SORT_AZ?(this.type=t.SORT_AZ,this.sortAZ.active(),this.sortNew.deactive(),this.sortPhobien.deactive()):e===t.SORT_NEW?(this.type=t.SORT_NEW,this.sortAZ.deactive(),this.sortNew.active(),this.sortPhobien.deactive()):(this.type=t.SORT_POP,this.sortAZ.deactive(),this.sortNew.deactive(),this.sortPhobien.active())}},{key:"addEventChangeMenu",value:function(e,t){this.eventChangeMenu.add(e,t)}},{key:"removeEventChangeMenu",value:function(e,t){this.eventChangeMenu.remove(e,t)}},{key:"dispatchEventChangeMenu",value:function(){this.eventChangeMenu.dispatch(this.type)}},{key:"addEventSearch",value:function(e,t){this.eventSearch.add(e,t)}},{key:"removeEventSearch",value:function(e,t){this.eventSearch.remove(e,t)}},{key:"dispatchEventSearch",value:function(e){this.eventSearch.dispatch(e)}},{key:"chooseSortAZ",value:function(){LogConsole.log("chooseSortAZ"),this.type!==t.SORT_AZ&&(this.type=t.SORT_AZ,this.sortAZ.active(),this.sortNew.deactive(),this.sortPhobien.deactive(),this.dispatchEventChangeMenu())}},{key:"chooseSortNew",value:function(){LogConsole.log("chooseSortNew"),this.type!==t.SORT_NEW&&(this.type=t.SORT_NEW,this.sortAZ.deactive(),this.sortNew.active(),this.sortPhobien.deactive(),this.dispatchEventChangeMenu())}},{key:"chooseSortPhobien",value:function(){LogConsole.log("chooseSortPhobien"),this.type!==t.SORT_POP&&(this.type=t.SORT_POP,this.sortAZ.deactive(),this.sortNew.deactive(),this.sortPhobien.active(),this.dispatchEventChangeMenu())}},{key:"destroy",value:function(){this.bg.destroy(),this.sortAZ.destroy(),this.sortNew.destroy(),this.sortPhobien.destroy(),ev(tv(t.prototype),"destroy",this).call(this)}}])&&Jm(n.prototype,i),o&&Jm(n,o),t}();function ov(e){return(ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function av(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sv(e,t){return!t||"object"!==ov(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rv(e,t,n){return(rv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lv(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function lv(e){return(lv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cv(e,t){return(cv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sv(this,lv(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cv(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.eventSearch=new Phaser.Signal,this.eventBack=new Phaser.Signal,this.positionShop=oe.instance().positionShop,this.bg=new Bt(this.positionShop.sort_play_list_bg_top_menu),this.addChild(this.bg),this.btnBack=new _n(this.positionShop.sort_play_list_bg_back_top_menu,this.chooseBack,this),this.addChild(this.btnBack),this.btnSearch=new _n(this.positionShop.sort_play_list_bg_search_icon_top_menu,this.chooseSearch,this),this.addChild(this.btnSearch),this.btnDiamond=new qn(this.positionShop.sort_play_list_bg_diamond_top_menu,dV.instance().dataMySeft.diamond),this.addChild(this.btnDiamond),this.addEvent()}},{key:"addEvent",value:function(){dV.instance().events.onUserVarsUpdate.add(this.onUserVarsUpdate,this),Qe.instance().event.backButton.add(this.chooseBack,this)}},{key:"removeEvent",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.onUserVarsUpdate,this),Qe.instance().event.backButton.remove(this.chooseBack,this)}},{key:"onUserVarsUpdate",value:function(e){null!==this.btnDiamond&&this.btnDiamond.setText(dV.instance().dataMySeft.diamond)}},{key:"chooseBack",value:function(){LogConsole.log("chooseBack"),this.dispatchEventBack()}},{key:"chooseSearch",value:function(){LogConsole.log("chooseSearch"),this.addKeyBoard()}},{key:"addEventSearch",value:function(e,t){this.eventSearch.add(e,t)}},{key:"removeEventSearch",value:function(e,t){this.eventSearch.remove(e,t)}},{key:"dispatchEventSearch",value:function(e){this.eventSearch.dispatch(e)}},{key:"addEventBack",value:function(e,t){this.eventBack.add(e,t)}},{key:"removeEventBack",value:function(e,t){this.eventBack.remove(e,t)}},{key:"dispatchEventBack",value:function(){this.eventBack.dispatch()}},{key:"addKeyBoard",value:function(){var e={maxLength:"",showTransparent:!0,placeholder:de.instance().getData("142"),isSearch:!0,typeInputText:"search"};Ir.instance().show(e),Ir.instance().event.change.add(this.changeKeyBoard,this),Ir.instance().event.hideKeyboard.add(this.hideKeyboard,this),Ir.instance().event.enter.add(this.onSubmit,this),Ir.instance().event.submit.add(this.onSubmit,this),Ir.instance().event.cancle.add(this.onCancel,this)}},{key:"hideKeyboard",value:function(){Ir.instance().hide()}},{key:"onSubmit",value:function(){var e=Ir.instance().getValue();this.dispatchEventSearch(e),setTimeout(function(){Ir.instance().hide()},100)}},{key:"onCancel",value:function(){Ir.instance().event.change.remove(this.changeKeyBoard,this),Ir.instance().event.hideKeyboard.remove(this.hideKeyboard,this),Ir.instance().event.enter.remove(this.onSubmit,this),Ir.instance().event.submit.remove(this.onSubmit,this),Ir.instance().event.cancle.remove(this.onCancel,this),Ir.instance().hide()}},{key:"changeKeyBoard",value:function(){var e=Ir.instance().getValue();this.dispatchEventSearch(e)}},{key:"destroy",value:function(){this.removeEvent(),this.bg.destroy(),this.btnBack.destroy(),this.btnSearch.destroy(),this.btnDiamond.destroy(),this.onCancel(),rv(lv(t.prototype),"destroy",this).call(this)}}])&&av(n.prototype,i),o&&av(n,o),t}();function uv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var dv=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getNameRegion",value:function(t){return t===e.Local?de.instance().getData("319"):t===e.International?de.instance().getData("320"):void 0}},{key:"Local",get:function(){return"Local"}},{key:"International",get:function(){return"International"}}],(n=null)&&uv(t.prototype,n),i&&uv(t,i),e}();function fv(e){return(fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gv(e,t){return!t||"object"!==fv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yv(e,t,n){return(yv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mv(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function mv(e){return(mv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vv(e,t){return(vv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wv=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=gv(this,mv(t).call(this,game,0,0,null,e,n))).data=null,i.idx=0,i.positionShop=oe.instance().positionShop,i.bgGenes=new Dn(i.positionShop.gennes_bg_item),i.addChild(i.bgGenes),i.bgGenesActive=new Dn(i.positionShop.gennes_bg_item_active),i.addChild(i.bgGenesActive),i.lbGennes=new Qt(i.positionShop.gennes_text_item),i.addChild(i.lbGennes),i.deactive(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vv(e,t)}(t,Phaser.Button),n=t,(i=[{key:"active",value:function(){this.bgGenesActive.visible=!0,this.bgGenes.visible=!1}},{key:"deactive",value:function(){this.bgGenesActive.visible=!1,this.bgGenes.visible=!0}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e,t){this.data=e,this.idx=t,this.lbGennes.text=this.data.genre,this.bgGenes.width=this.lbGennes.width+35*oe.instance().scale,this.bgGenes.height=65*oe.instance().scale,this.bgGenesActive.width=this.lbGennes.width+35*oe.instance().scale,this.bgGenesActive.height=65*oe.instance().scale,this.lbGennes.x=(this.bgGenes.width-this.lbGennes.width)/2,this.lbGennes.y=(this.bgGenes.height-this.lbGennes.height)/2,LogConsole.log(this.lbGennes.width),LogConsole.log(this.bgGenes.width)}},{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),yv(mv(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"destroy",value:function(){if(this.children)for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}yv(mv(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.bgGenes.width}},{key:"height",get:function(){return this.bgGenes.height}}])&&pv(n.prototype,i),o&&pv(n,o),t}();function bv(e){return(bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Sv(e,t){return!t||"object"!==bv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ev(e,t,n){return(Ev="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cv(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Cv(e){return(Cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kv(e,t){return(kv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pv=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Sv(this,Cv(t).call(this,game,0,0,null,n,i))).positionShop=oe.instance().positionShop,o.lineNgang=new Bt(o.positionShop.playlist_menu_linengang),o.lineNgang.width=224,o.addChild(o.lineNgang),o.lineDoc=new Bt(o.positionShop.playlist_menu_linedoc),o.addChild(o.lineDoc),o.txtContent=new Qt(o.positionShop.playlist_menu_textcontent,e),o.txtContent.setTextBounds(0,0,o.width,o.height),o.addChild(o.txtContent),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kv(e,t)}(t,Phaser.Button),n=t,(i=[{key:"active",value:function(){this.lineNgang.visible=!0,this.txtContent.changeStyle({fill:"#ffffff"})}},{key:"deactive",value:function(){this.lineNgang.visible=!1,this.txtContent.changeStyle({fill:"#695782"})}},{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),Ev(Cv(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"destroy",value:function(){if(this.children)for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}Ev(Cv(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return 225*oe.instance().scale}},{key:"height",get:function(){return 87*oe.instance().scale}}])&&_v(n.prototype,i),o&&_v(n,o),t}();function Ov(e){return(Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xv(e,t){return!t||"object"!==Ov(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tv(e){return(Tv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iv(e,t){return(Iv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Av=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xv(this,Tv(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iv(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={close:new Phaser.Signal,change_menu:new Phaser.Signal,choose_sort:new Phaser.Signal},this.type=dv.Local,this.positionShop=oe.instance().positionShop,this.bgMenu=new _n(this.positionShop.playlist_bg_menu),this.bgMenu.height=89*oe.instance().scale,this.addChild(this.bgMenu),this.btnNhacViet=new Pv(dv.getNameRegion(dv.Local),this.chooseNhacViet,this),this.btnNhacViet.active(),this.addChild(this.btnNhacViet),this.btnQuocTe=new Pv(dv.getNameRegion(dv.International),this.chooseQuocTe,this),this.btnQuocTe.x=this.btnNhacViet.width*oe.instance().scale,this.btnQuocTe.deactive(),this.addChild(this.btnQuocTe),this.btnChooseSort=new qn(this.positionShop.bg_tab_menu_select,de.instance().getData("135"),this.btnChooseSort,this),this.addChild(this.btnChooseSort)}},{key:"setTextSort",value:function(e){this.btnChooseSort.setText(e)}},{key:"btnChooseSort",value:function(){this.event.choose_sort.dispatch()}},{key:"chooseClose",value:function(){LogConsole.log("chooseClose"),this.event.close.dispatch()}},{key:"chooseNhacViet",value:function(){LogConsole.log("chooseNhacViet"),this.type===dv.International&&(this.type=dv.Local,this.btnNhacViet.active(),this.btnQuocTe.deactive(),this.event.change_menu.dispatch(dv.Local))}},{key:"chooseQuocTe",value:function(){LogConsole.log("chooseQuocTe"),this.type===dv.Local&&(this.type=dv.International,this.btnNhacViet.deactive(),this.btnQuocTe.active(),this.event.change_menu.dispatch(dv.International))}}])&&Rv(n.prototype,i),o&&Rv(n,o),t}();function Lv(e){return(Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Gv(e){return(Gv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mv(e,t){return(Mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Bv=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Gv(t).call(this,game,null))||"object"!==Lv(i)&&"function"!=typeof i?Nv(n):i).event={choose_sort:new Phaser.Signal},e.positionShop=oe.instance().positionShop,e.bgGenres=new _n(e.positionShop.sort_play_list_bg_search_menu),e.bgGenres.height=165*oe.instance().scale,e.bgGenres.width=166*oe.instance().scale,e.addChild(e.bgGenres),e.arrSort=[de.instance().getData("135"),de.instance().getData("136"),de.instance().getData("137")];for(var o=10,a=0;a<e.arrSort.length;a++){var s=new qn(e.positionShop.bg_tab_menu_select_item,e.arrSort[a],e.chooseItem,Nv(Nv(e)));s.name=a,s.y=o,s.x=10,o+=45,e.addChild(s)}return e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mv(e,t)}(t,Je),n=t,(i=[{key:"chooseItem",value:function(e){LogConsole.log("chooseItem : "+e.name),this.event.choose_sort.dispatch(e.name,this.arrSort[parseInt(e.name)])}}])&&Dv(n.prototype,i),o&&Dv(n,o),t}();function jv(e){return(jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Fv(e,t){return!t||"object"!==jv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zv(e,t,n){return(Zv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hv(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Hv(e){return(Hv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vv(e,t){return(Vv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fv(this,Hv(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vv(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){ht.instance().showLoading(),this.event={back:new Phaser.Signal,close:new Phaser.Signal,show_all:new Phaser.Signal,search:new Phaser.Signal,buyVip:new Phaser.Signal},this.ktShowSort=!1,this.positionShop=oe.instance().positionShop,this.arrDatashop=[],this.arrGenres=[],this.idxItem=0,this.countItem=0,this.idDelay=null,this.ktBuildItem=!1,this.detail=null,this.popupBuy=null,this.popupMoney=null,this.chooseSort=null,this.ktFirst=!0,this.type=iv.SORT_POP,this.local=dv.Local,this.genres=-1,this.itemGenresActive=null,this.strSearch="",this.dataList=[],this.ktSearch=!1,this.bg=new Phaser.Button(game,0,0,"bg-playlist"),this.addChild(this.bg);var e={column:3,width:game.width,height:game.height-460*oe.instance().scale,rowHeight:326*oe.instance().scale,leftDistance:35*oe.instance().scale,direction:"y",distanceBetweenColumns:35*oe.instance().scale,distanceBetweenRows:35*oe.instance().scale};this.scroll=new fy(e),this.scroll.event.changeIndex.add(this.changeIndex,this),this.scroll.y=335*oe.instance().scale,this.addChild(this.scroll),this.parentGenres=new Phaser.Group(game,0,0,null),this.listGenres=new Ia(game,this.parentGenres,new Phaser.Rectangle(0,0,game.width-70,95*oe.instance().scale),{direction:"x",padding:18*oe.instance().scale,bouncing:!0,searchForClicks:!0}),this.parentGenres.x=35,this.parentGenres.y=189*oe.instance().scale,this.addChild(this.parentGenres),this.header=new hv,this.header.addEventSearch(this.searchData,this),this.header.addEventBack(this.chooseBackHeader,this),this.addChild(this.header),this.menu=new Av,this.menu.event.change_menu.add(this.changeMenu,this),this.menu.event.choose_sort.add(this.chooseSortPlaylist,this),this.menu.y=100,this.addChild(this.menu),this.txtSearch=new Qt(this.positionShop.sort_play_list_text_current_search,de.instance().getData("160")),this.txtSearch.setTextBounds(0,0,game.width-71*oe.instance().scale,59*oe.instance().scale),this.addChild(this.txtSearch),this.btnCloseTextSearch=new _n(this.positionShop.sort_play_list_btn_close_search,this.chooseCloseTextSearch,this),this.addChild(this.btnCloseTextSearch),this.btnCloseTextSearch.visible=!1}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),ak.instance().event.buy_playlist.add(this.sendGetDataShop,this),this.sendGetGenres()}},{key:"removeEvent",value:function(){this.scroll.event.changeIndex.remove(this.changeIndex,this),ak.instance().event.buy_playlist.remove(this.sendGetDataShop,this),dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"sendGetGenres",value:function(){_t.instance().event.get_data_genres_complete.add(this.getDataGenresComplete,this),_t.instance().getGenresAll()}},{key:"getDataGenresComplete",value:function(e){_t.instance().event.get_data_genres_complete.remove(this.getDataGenresComplete,this),this.arrGenres=e,this.sendGetDataShop()}},{key:"sendGetDataShop",value:function(){ht.instance().showLoading(),_t.instance().getDataShop(),_t.instance().event.get_data_shop_playlist_complete.add(this.getDataPlayListComplete,this)}},{key:"getDataPlayListComplete",value:function(e){_t.instance().event.get_data_shop_playlist_complete.remove(this.getDataPlayListComplete,this),console.log("getDataPlayListComplete"),console.log(e),this.arrDatashop=e,this.ktFirst?(this.ktFirst=!1,this.buildDataShop()):this.buildDataList()}},{key:"buildDataShop",value:function(){this.buildListGenres(),this.buildDataList(),!0===this.ktSearch&&(this.ktSearch=!1,this.addKeyBoard())}},{key:"getData",value:function(e){}},{key:"addKeyBoard",value:function(){this.header.addKeyBoard()}},{key:"chooseBackHeader",value:function(){LogConsole.log("chooseBackHeader"),this.event.close.dispatch()}},{key:"chooseCloseTextSearch",value:function(){this.btnCloseTextSearch.visible=!1,this.txtSearch.text=de.instance().getData("160"),this.strSearch="",this.buildDataList()}},{key:"changeMenu",value:function(e){this.local=e,this.buildListGenres(),this.buildDataList()}},{key:"setData",value:function(e,t,n,i){this.local=e,this.genres=t,this.type=n,this.ktSearch=i,""!=this.type&&this.menu.setMenu(this.type)}},{key:"chooseItem",value:function(e){-1===this.genres?this.genres===e.getData().id||(this.itemGenresActive.deactive(),this.itemGenresActive=e,this.itemGenresActive.active(),this.genres=e.getData().id,this.listGenres.tweenToItem(e.idx,.5),this.buildDataList()):(this.genres===e.getData().id?(e.deactive(),this.genres=-1,this.itemGenresActive=this.listGenres.grp.children[0],this.itemGenresActive.active(),this.listGenres.tweenToItem(0,.5)):(this.itemGenresActive.deactive(),e.active(),this.genres=e.getData().id,this.itemGenresActive=e,this.listGenres.tweenToItem(e.idx,.5)),this.buildDataList())}},{key:"searchData",value:function(e){if(LogConsole.log("searchData : "+e),this.strSearch=e,this.txtSearch.text=this.strSearch,""!=this.strSearch){this.btnCloseTextSearch.visible=!0,this.dataList=[];for(var t=0;t<this.arrDatashop.length;t++)-1!==this.xoa_dau(this.arrDatashop[t].name).toUpperCase().indexOf(this.xoa_dau(e).toUpperCase())&&this.dataList.push(this.arrDatashop[t])}else this.btnCloseTextSearch.visible=!1,this.txtSearch.text=de.instance().getData("160");this.buildDataList()}},{key:"buildDataList",value:function(){if(""===this.strSearch){var e=this.arrDatashop;this.type===iv.SORT_AZ?(this.dataList=e.sort(this.sortAZ),this.menu.setTextSort(de.instance().getData("135"))):this.type===iv.SORT_NEW?(this.dataList=e.sort(this.sortNewPlayList),this.menu.setTextSort(de.instance().getData("136"))):(this.type,iv.SORT_POP,this.dataList=e.sort(this.sortPhoBien),this.menu.setTextSort(de.instance().getData("137")))}else this.type===iv.SORT_AZ?(this.dataList.sort(this.sortAZ),this.menu.setTextSort(de.instance().getData("135"))):this.type===iv.SORT_NEW?(this.dataList.sort(this.sortNewPlayList),this.menu.setTextSort(de.instance().getData("136"))):(this.type,iv.SORT_POP,this.dataList.sort(this.sortPhoBien),this.menu.setTextSort(de.instance().getData("137")));this.idxItem=0,this.countItem=0,this.scroll.viewList=[],this.removeDelayBuild(),this.idDelay=game.time.events.add(.1*Phaser.Timer.SECOND,this.addItemPageShop,this),ht.instance().hideLoading()}},{key:"changeIndex",value:function(e){this.countItem===e+1&&!1===this.ktBuildItem&&this.addItemPageShop()}},{key:"addItemPageShop",value:function(){var e=[],t=0;this.ktBuildItem=!0;for(var n=this.idxItem;n<this.dataList.length;n++){if(this.idxItem++,(-1===this.genres||this.dataList[n].genre_id===this.genres)&&this.local===this.dataList[n].region&&1!==this.dataList[n].is_owner){t++;var i=new by;i.event.CHOOSE.add(this.chooseItemShop,this),i.event.BUY.add(this.buyItemShop,this),i.event.TOVIP.add(this.chooseUpVip,this),i.setData(this.dataList[n],t),e.push(i)}if(e.length===this.scroll.columnNumber||this.idxItem===this.dataList.length){if(this.countItem++,this.scroll.addItem(e),this.countItem%3==0){this.ktBuildItem=!1;break}this.idxItem===this.dataList.length&&(this.ktBuildItem=!1),e=[]}}}},{key:"removeDelayBuild",value:function(){null!==this.idDelay&&(game.time.events.remove(this.idDelay),this.idDelay=null)}},{key:"getDataGenresByLocal",value:function(){for(var e=[],t=0;t<this.arrGenres.length;t++)this.arrGenres[t].region===this.local&&e.push(this.arrGenres[t]);return e}},{key:"buildListGenres",value:function(){LogConsole.log(this.listGenres),this.listGenres.reset(),this.listGenres.removeAll();var e=-1,t=0;this.genres=-1;var n=this.getDataGenresByLocal(),i=new ft;i.genre=de.instance().getData("160"),i.id=-1;var o=new wv(this.chooseItem,this);o.active(),o.y=20,o.setData(i,t),this.itemGenresActive=o,this.listGenres.add(o);for(var a=0;a<n.length;a++){t++;var s=new wv(this.chooseItem,this);n[a].id===this.genres?(this.itemGenresActive=s,s.active(),e=t):s.deactive(),s.y=20*oe.instance().scale,s.setData(n[a],t),this.listGenres.add(s)}e>-1&&this.listGenres.tweenToItem(e,.5)}},{key:"chooseItemShop",value:function(e){Ir.instance().hide(),jC.instance().addPlaylistDetail(e.id)}},{key:"buyItemShop",value:function(e){jC.instance().buyItem(e)}},{key:"chooseUpVip",value:function(){this.event.buyVip.dispatch()}},{key:"chooseSortPlaylist",value:function(){this.ktShowSort=!this.ktShowSort,!0===this.ktShowSort?this.addChooseSortPlaylist():this.removeChooseSortPlayList()}},{key:"addChooseSortPlaylist",value:function(){this.removeChooseSortPlayList(),this.ktShowSort=!0,this.chooseSort=new Bv,this.chooseSort.event.choose_sort.add(this.changeSortPlayList,this),this.chooseSort.x=455*oe.instance().scale,this.chooseSort.y=165*oe.instance().scale,this.addChild(this.chooseSort)}},{key:"changeSortPlayList",value:function(e,t){this.removeChooseSortPlayList(),this.type=0===e?iv.SORT_AZ:1===e?iv.SORT_NEW:iv.SORT_POP,this.menu.setTextSort(t),this.buildDataList()}},{key:"removeChooseSortPlayList",value:function(){null!==this.chooseSort&&(this.ktShowSort=!1,this.removeChild(this.chooseSort),this.chooseSort.destroy(),this.chooseSort=null)}},{key:"destroy",value:function(){this.removeEvent(),this.scroll.destroy(),this.removeDelayBuild(),this.bg.destroy(),this.header.destroy(),this.menu.destroy(),this.txtSearch.destroy(),this.btnCloseTextSearch.destroy(),this.listGenres.destroy(),this.removeAllItem(),this.parentGenres.destroy(),rn.instance().resetLoad(),jC.instance().removeAnimClaimReward(),jC.instance().removePlaylistDetail(),jC.instance().removePopupBuy(),jC.instance().removePopupMoney(),Zv(Hv(t.prototype),"destroy",this).call(this)}}])&&Uv(n.prototype,i),o&&Uv(n,o),t}();function Wv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qv=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putUtfString("payment_service",e),t.putBool("new_ticket",!0),t}},{key:"GOOGLE_PLAY",get:function(){return"GOOGLE_PLAY"}},{key:"APPLE",get:function(){return"APPLE"}},{key:"AMAZON_IAP",get:function(){return"AMAZON_IAP"}},{key:"GAME",get:function(){return"GAME"}},{key:"FACEBOOK",get:function(){return"FACEBOOK"}}],(n=null)&&Wv(t.prototype,n),i&&Wv(t,i),e}();function Kv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var zv=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ktIPA=!1,this.ktCall=!1,this.event={buy_complete:new Phaser.Signal,buy_error:new Phaser.Signal},dV.instance().events.onExtensionResponse.add(this.getData,this),window.Cocoon&&Cocoon.InApp&&(this.ktIPA=!0,this.service=Cocoon.InApp,this.service.on("purchase",{start:function(e){console.log("purchase started "+e)},error:function(e,n){console.log("purchase failed "+e+" error: "+JSON.stringify(n)),t.event.buy_error.dispatch(n.message)},complete:function(e){console.log("purchase completed "+JSON.stringify(e))}}),this.service.initialize({autofinish:!0},function(e){console.log(e)}),this.service.setValidationHandler(this.setupCompletePurchase.bind(this)))}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.ipa||(this.ipa=new e),this.ipa}}],(n=[{key:"setupCompletePurchase",value:function(e,t,n){console.log("setValidationHandler"),console.log(t),this.callToServerIos(this.data.getInt("id"),this.data.getInt("quantity"),this.data.getUtfString("resource_type"),this.data.getInt("price"),e)}},{key:"callToServerIos",value:function(e,t,n,i,o){var a=this;ht.instance().showLoading(),console.log("receiptBase64Data: "+o),console.log("callToServerIos");var s={userId:dV.instance().dataMySeft.user_id,resourcePackageId:e,resourceQuantity:t,resourceType:n,resourcePrice:i,receiptBase64Data:o};console.log("url : "+window.RESOURCE.in_app_apple_validator),console.log("postData"),console.log(s),$.ajax({url:window.RESOURCE.in_app_apple_validator,type:"POST",data:s,dataType:"json",success:function(e){LogConsole.log("callToServerAndroid"),LogConsole.log(e),a.event.buy_complete.dispatch(e)},error:function(e,t,n){console.error("Error get server infomation"),console.error(n),console.error(e.status),console.error(e.responseJSON),a.event.buy_error.dispatch(de.instance().getData("183"))}})}},{key:"buyItem",value:function(e){var t=this;if(this.ktIPA){this.data=e,this.ktCall=!1;var n=e.getUtfString("pack_name");this.service.purchase(n,1,function(e){console.log("error"),console.log(e),t.event.buy_error.dispatch(e.message)}),this.service.isPurchased(n)}}},{key:"getDataInapp",value:function(){if(null===oe.instance().dataPackage){this.ktLoad=!0;var e="";e=!0===this.ktIPA?"android"===device.platform.toLowerCase()?qv.GOOGLE_PLAY:"ios"===device.platform.toLowerCase()?qv.APPLE:"amazon-fireos"===device.platform.toLowerCase()?qv.AMAZON_IAP:qv.GAME:qv.GAME,dV.instance().sendData(kt.RESOURCE_PACKAGE_LOAD_REQUEST,qv.begin(e))}}},{key:"getData",value:function(e){switch(e.cmd){case kt.RESOURCE_PACKAGE_LOAD_RESPONSE:!0===this.ktLoad&&(this.ktLoad=!1,"OK"===e.params.getUtfString("status")&&(oe.instance().dataPackage=e.params))}}}])&&Kv(t.prototype,n),i&&Kv(t,i),e}();function Yv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Xv=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ktIPA=!1,dV.instance().events.onExtensionResponse.add(this.getData,this),"undefined"!=typeof store&&(this.ktIPA=!0),!0===this.ktIPA&&(store.verbosity=store.INFO,store.autoFinishTransactions=!0,store.ready(function(){console.log("\\o/ STORE READY \\o/")}),store.refresh()),this.ktLoad=!1,this.event={buy_complete:new Phaser.Signal,buy_error:new Phaser.Signal},this.ktCall=!1}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.ipa||(this.ipa=new e),this.ipa}}],(n=[{key:"getDataInapp",value:function(){if(null===oe.instance().dataPackage){this.ktLoad=!0;var e="";e=!0===this.ktIPA?"android"===device.platform.toLowerCase()?qv.GOOGLE_PLAY:"ios"===device.platform.toLowerCase()?qv.APPLE:"amazon-fireos"===device.platform.toLowerCase()?qv.AMAZON_IAP:qv.GAME:""===oe.instance().tokenYanAccount?qv.FACEBOOK:qv.GAME,dV.instance().sendData(kt.RESOURCE_PACKAGE_LOAD_REQUEST,qv.begin(e))}}},{key:"getData",value:function(e){switch(e.cmd){case kt.RESOURCE_PACKAGE_LOAD_RESPONSE:if(!0===this.ktLoad&&(this.ktLoad=!1,"OK"===e.params.getUtfString("status")&&(oe.instance().dataPackage=e.params,LogConsole.log(e.params),!0===this.ktIPA))){for(var t=0;t<oe.instance().dataPackage.getSFSArray("resource_packages").size();t++){var n=oe.instance().dataPackage.getSFSArray("resource_packages").getSFSObject(t);""!==n.getUtfString("pack_name")&&store.register({id:n.getUtfString("pack_name"),alias:n.getUtfString("pack_name"),type:store.CONSUMABLE})}store.refresh()}}}},{key:"buyItem",value:function(e){var t=this;if(!0===this.ktIPA){this.ktCall=!1;var n=e.getUtfString("pack_name");console.log("pack_name : "+n),store.order(n).then(function(){console.log("success")}).error(function(e){console.log("error.."+e.code),t.event.buy_error.dispatch(e.code)}),store.when(n).approved(function(e){console.log("approved"),console.log(e),"android"==device.platform||"Android"==device.platform?(console.log("1111111111111"),e.finish()):(console.log("2222222222222"),e.verify())}),store.validator=function(e){console.log("validator"),console.log(e)},store.when(n).verified(function(n){n.hasOwnProperty("transaction")&&n.transaction.hasOwnProperty("appStoreReceipt")&&!1===t.ktCall&&(t.ktCall=!0,t.callToServerIos(e.getInt("id"),e.getInt("quantity"),e.getUtfString("resource_type"),e.getInt("price"),n.transaction.appStoreReceipt),n.finish())}),store.error(function(e){console.log("ERROR "+e.code+": "+e.message),t.event.buy_error.dispatch(e.message)}),store.when(n).cancelled(function(e){console.log("cancelled"),console.log(e),t.event.buy_error.dispatch("")}),store.when(n).error(function(e){console.log("error"),console.log(e),t.event.buy_error.dispatch("")}),store.when(n).updated(function(e){console.log("updated"),console.log(e),e.loaded&&e.valid&&e.state===store.APPROVED&&null!=e.transaction&&e.finish()}),store.when(n).finished(function(i){var o;console.log("finished----------------------------"),console.log(n+" finished "+i.state+", title is "+i.title+" "+JSON.stringify(i)),console.log(i),"android"==device.platform||"Android"==device.platform?!1===t.ktCall&&(t.ktCall=!0,i.transaction.purchaseToken,o=JSON.parse(i.transaction.receipt),t.callToServerAndroid(o.orderId,o.packageName,o.productId,o.purchaseToken,o.purchaseTime,e.getInt("id"),e.getInt("quantity"),e.getUtfString("resource_type"),e.getInt("price"))):i.transaction.id})}else this.event.buy_error.dispatch(de.instance().getData("182"))}},{key:"callToServerFacebook",value:function(e){FB.ui({method:"pay",action:"purchaseitem",product:e},this.buyFacebookItemComplete.bind(this))}},{key:"buyFacebookItemComplete",value:function(e){var t=this;if(console.log("result -----------------"),console.log(e),void 0===e)this.event.buy_error.dispatch(de.instance().getData("183"));else if(e.hasOwnProperty("status")&&"completed"===e.status){var n={signed_request:e.signed_request};console.log("url : "+window.RESOURCE.in_app_facebook_validator),console.log("postData"),console.log(n),$.ajax({url:window.RESOURCE.in_app_facebook_validator,type:"POST",data:n,dataType:"json",success:function(e){LogConsole.log("callToServerFacebook"),LogConsole.log(e),e.hasOwnProperty("error_message")?t.event.buy_error.dispatch(e.error_message):t.event.buy_complete.dispatch(e)},error:function(e,n,i){console.error("Error get server infomation"),console.error(i),console.error(e.status),console.error(e.responseJSON),e.hasOwnProperty("error_message")?t.event.buy_error.dispatch(e.error_message):t.event.buy_error.dispatch(de.instance().getData("183"))}})}else this.event.buy_error.dispatch(de.instance().getData("183"))}},{key:"callToServerIos",value:function(e,t,n,i,o){var a=this;console.log("callToServerIos");var s={userId:dV.instance().dataMySeft.user_id,resourcePackageId:e,resourceQuantity:t,resourceType:n,resourcePrice:i,receiptBase64Data:o};console.log("url : "+window.RESOURCE.in_app_apple_validator),console.log("postData"),console.log(s),$.ajax({url:window.RESOURCE.in_app_apple_validator,type:"POST",data:s,dataType:"json",success:function(e){LogConsole.log("callToServerAndroid"),LogConsole.log(e),a.event.buy_complete.dispatch(e)},error:function(e,t,n){console.error("Error get server infomation"),console.error(n),console.error(e.status),console.error(e.responseJSON),a.event.buy_error.dispatch(de.instance().getData("183"))}})}},{key:"callToServerAndroid",value:function(e,t,n,i,o,a,s,r,l){var c=this;console.log("callToServerAndroid");var h={userId:dV.instance().dataMySeft.user_id,orderId:e,packageName:t,productId:n,purchaseToken:i,purchaseTime:o,resourcePackageId:a,resourceQuantity:s,resourceType:r,resourcePrice:l};console.log("postData"),console.log(h),$.ajax({url:window.RESOURCE.in_app_google_validator,type:"POST",data:h,dataType:"json",success:function(e){LogConsole.log("callToServerAndroid"),LogConsole.log(e),c.event.buy_complete.dispatch(e)},error:function(e,t,n){console.error("Error get server infomation"),console.error(n),console.error(e.status),console.error(e.responseJSON),c.event.buy_error.dispatch(de.instance().getData("183"))}})}}])&&Yv(t.prototype,n),i&&Yv(t,i),e}();function Jv(e){return(Jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ew(e){return(ew=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tw(e,t){return(tw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var iw=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=ew(t).call(this,game,null))||"object"!==Jv(i)&&"function"!=typeof i?nw(n):i).event={show_details:new Phaser.Signal},e.data=o,e.bg=e.create(0,0,"shop","bg_item_vip"),e.logoVip=e.create(17,22,"shop","bg_vip_mask"),!1===a)e.bgTitleVip=e.create(92,184,"shop","vip_label_buy"),e.btnPrice=new qn({x:375,y:70,nameAtlas:"shop",nameSprite:"bg_price_vip",configText:{x:0,y:0,style:{fontSize:20,font:"GilroyBold"},paddingTop:7}},mt.instance().format(e.data.getInt("price"))+" "+de.instance().getData("148"),e.clickBuy,nw(nw(e))),e.addChild(e.btnPrice),e.btnDetail=new qn({x:375,y:145,nameAtlas:"shop",nameSprite:"bg_chitiet_vip",configText:{x:0,y:0,style:{fontSize:20,font:"GilroyBold"},paddingTop:7}},de.instance().getData("158"),e.clickDetail,nw(nw(e))),e.addChild(e.btnDetail),e.titleName=game.add.text(139,200,e.data.getUtfString("name"),{fill:"#ffffff",fontSize:15,font:"GilroyBold"},nw(nw(e))),e.titleName.anchor.set(.5),e.addChild(e.titleName);else{e.ava=new zc,e.ava.x=70,e.ava.y=65,e.ava.setAvatar(dV.instance().dataMySeft.avatar,0),e.ava.setSize(140,140),e.addChild(e.ava),e.addChild(e.logoVip),e.bgTitleVip=e.create(104,180,"shop","vip_label_detail_vip"),e.txtTitle=game.add.text(285,110,de.instance().getData("158"),{fill:"#ffffff",fontSize:25,font:"GilroyBold"},nw(nw(e))),e.addChild(e.txtTitle),console.log("convert time : "+dV.instance().dataMySeft.vip_expired);var s=new Date(dV.instance().dataMySeft.vip_expired),r=s.getDate(),l=s.getMonth()+1,c=s.getFullYear(),h=s.getHours(),u=s.getMinutes(),d=u;u<10&&(d="0"+u);var f=h;h<10&&(f="0"+h);var p=c;c<10&&(p="0"+c);var g=l;l<10&&(g="0"+l);var y=r;r<10&&(y="0"+r),e.txtTime=game.add.text(285,145,f+"h"+d+", Ngày "+y+"/"+g+"/"+p,{fill:"#ffa33a",fontSize:20,font:"Gilroy"},nw(nw(e))),e.addChild(e.txtTime)}return e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tw(e,t)}(t,Je),n=t,(i=[{key:"clickBuy",value:function(){if(window.cordova&&"undefined"!=typeof device)ht.instance().showLoading(),"ios"===oe.instance().platform?zv.instance().buyItem(this.data):Xv.instance().buyItem(this.data);else if("FACEBOOK"===this.data.getUtfString("payment_service"))if(window.RESOURCE.fb_products.hasOwnProperty(this.data.getUtfString("pack_name"))){var e=window.RESOURCE.fb_products[this.data.getUtfString("pack_name")];Xv.instance().callToServerFacebook(e)}else jC.instance().addDialog(de.instance().getData("145"))}},{key:"clickDetail",value:function(){console.log("clickDetail"),this.event.show_details.dispatch(this.data)}}])&&$v(n.prototype,i),o&&$v(n,o),t}();function ow(e){return(ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sw(e,t,n){return(sw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rw(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function rw(e){return(rw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lw(e,t){return(lw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var hw=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=rw(t).call(this,game,null))||"object"!==ow(i)&&"function"!=typeof i?cw(n):i).event={back:new Phaser.Signal},e.positionShop=oe.instance().positionShop,e.bg=new Bt(e.positionShop.sort_play_list_bg_top_menu),e.addChild(e.bg),e.scoreDiamond=0,e.scoreTicket=0,e.scoreHeart=0,e.btnBack=new _n(e.positionShop.sort_play_list_bg_back_top_menu,e.chooseBack,cw(cw(e))),e.addChild(e.btnBack),e.scoreDiamond=dV.instance().dataMySeft.diamond,e.btnDiamond=new qn(e.positionShop.tn_header_item_gem,e.scoreDiamond),e.addChild(e.btnDiamond),e.scoreTicket=dV.instance().dataMySeft.ticket,e.btnTicket=new qn(e.positionShop.tn_header_item_ticket,e.scoreTicket),e.addChild(e.btnTicket),e.scoreHeart=dV.instance().dataMySeft.heart,e.btnHeart=new qn(e.positionShop.tn_header_item_heart,e.scoreHeart),e.addChild(e.btnHeart),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lw(e,t)}(t,Je),n=t,(i=[{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseBack,this),dV.instance().events.onUserVarsUpdate.add(this.onUserVarsUpdate,this)}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this),dV.instance().events.onUserVarsUpdate.remove(this.onUserVarsUpdate,this)}},{key:"onUserVarsUpdate",value:function(e){var t,n=this,i={score:0};this.scoreDiamond<dV.instance().dataMySeft.diamond?(game.tweens.removeFrom(this.btnDiamond),i.score=this.scoreDiamond,this.scoreDiamond=dV.instance().dataMySeft.diamond,console.log("scoreDiamond : "+this.scoreDiamond),(t=game.add.tween(i).to({score:dV.instance().dataMySeft.diamond},500,"Linear",!0,1500)).start(),t.onUpdateCallback(function(){n.btnDiamond&&n.btnDiamond.setText(parseInt(i.score))},this),t.onComplete.add(function(){n.btnDiamond&&n.btnDiamond.setText(parseInt(n.scoreDiamond))},this)):this.btnDiamond.setText(dV.instance().dataMySeft.diamond),this.scoreHeart<dV.instance().dataMySeft.heart&&(game.tweens.removeFrom(this.btnHeart),i.score=this.scoreHeart,this.scoreHeart=dV.instance().dataMySeft.heart,console.log("scoreHeart : "+this.scoreHeart),(t=game.add.tween(i).to({score:dV.instance().dataMySeft.heart},500,"Linear",!0,1500)).start(),t.onUpdateCallback(function(){n.btnHeart&&n.btnHeart.setText(parseInt(i.score))},this),t.onComplete.add(function(){n.btnHeart&&n.btnHeart.setText(parseInt(n.scoreHeart))},this)),this.scoreTicket<dV.instance().dataMySeft.ticket&&(game.tweens.removeFrom(this.btnTicket),i.score=this.scoreTicket,this.scoreTicket=dV.instance().dataMySeft.ticket,console.log("scoreTicket : "+this.scoreTicket),(t=game.add.tween(i).to({score:dV.instance().dataMySeft.ticket},500,"Linear",!0,1500)).start(),t.onUpdateCallback(function(){n.btnTicket&&n.btnTicket.setText(parseInt(i.score))},this),t.onComplete.add(function(){n.btnTicket&&n.btnTicket.setText(parseInt(n.scoreTicket))},this))}},{key:"removeTween",value:function(){game.tweens.removeFrom(this.btnDiamond),game.tweens.removeFrom(this.btnTicket),game.tweens.removeFrom(this.btnHeart)}},{key:"destroy",value:function(){console.log("destroy header"),this.removeEvent(),this.removeTween(),sw(rw(t.prototype),"destroy",this).call(this)}}])&&aw(n.prototype,i),o&&aw(n,o),t}();function uw(e){return(uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dw(e){return(dw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fw(e,t){return(fw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var gw=function(e){function t(e){var n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=dw(t).call(this,game))||"object"!==uw(o)&&"function"!=typeof o?pw(i):o).icon=n.create(0,0,"shop","icon_star_detail_vip"),n.icon.y=6;var r="#333333";null!==a&&(r=a);var l="center";return null!==s&&(l=s),n.txtDes=game.add.text(n.icon.x+n.icon.width+7,0,e,{fill:r,font:"GilroyMedium",fontSize:24,align:l,wordWrap:!0,wordWrapWidth:455},pw(pw(n))),n.txtDes.lineSpacing=-3,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fw(e,t)}(t,Je),t}();function yw(e){return(yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vw(e,t,n){return(vw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ww(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ww(e){return(ww=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bw(e,t){return(bw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Sw=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=ww(t).call(this,game))||"object"!==yw(o)&&"function"!=typeof o?_w(i):o).event={close:new Phaser.Signal},n.data=e;var a=[de.instance().getData("149"),de.instance().getData("150"),de.instance().getData("151"),de.instance().getData("152"),de.instance().getData("153"),de.instance().getData("154"),de.instance().getData("155"),de.instance().getData("156")],s=game.add.button(0,0,"");n.addChild(s);var r={x:0,y:0,name:"bg_detail_vip",nameAtlas:"shop",nameSprite:"bg_detail_vip",left:284,right:284,top:310,bot:30,width:569,height:880};n.bg=new Dn(r),n.addChild(n.bg),s.width=n.bg.width,s.height=n.bg.height,n.titleName=game.add.text(n.bg.width/2,257,n.data.getUtfString("name"),{fill:"#ffffff",fontSize:20,font:"GilroyBold"},_w(_w(n))),n.titleName.anchor.set(.5);var l=new Phaser.Group(game,0,0,null);n.listVip=new Ia(game,l,new Phaser.Rectangle(0,0,n.bg.width,405),{direction:"y",padding:10,searchForClicks:!1}),l.x=0,l.y=320,n.addChild(l);for(var c=0;c<a.length;c++){var h=new gw(a[c]);h.x=(n.bg.width-h.width)/2,n.listVip.add(h)}return n.btnThoat=game.add.button(35,750,"shop",n.chooseThoat,_w(_w(n)),"Button_Thoat","Button_Thoat","Button_Thoat","Button_Thoat"),n.addChild(n.btnThoat),n.txtThoat=game.add.text(n.btnThoat.width/2,n.btnThoat.height/2+5,de.instance().getData("157"),{fill:"#ffffff",font:"GilroyBold",fontSize:32},_w(_w(n))),n.txtThoat.anchor.set(.5),n.btnThoat.addChild(n.txtThoat),n.btnBuy=game.add.button(295,750,"shop",n.chooseBuy,_w(_w(n)),"Button_Tien_Vip_Detail","Button_Tien_Vip_Detail","Button_Tien_Vip_Detail","Button_Tien_Vip_Detail"),n.addChild(n.btnBuy),n.txtPrice=game.add.text(n.btnBuy.width/2,n.btnBuy.height/2+5,mt.instance().format(n.data.getInt("price"))+" "+de.instance().getData("148"),{fill:"#ffffff",font:"GilroyBold",fontSize:32},_w(_w(n))),n.txtPrice.anchor.set(.5),n.btnBuy.addChild(n.txtPrice),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bw(e,t)}(t,Je),n=t,(i=[{key:"chooseThoat",value:function(){this.event.close.dispatch()}},{key:"chooseBuy",value:function(){if(window.cordova&&"undefined"!=typeof device)ht.instance().showLoading(),"ios"===oe.instance().platform?zv.instance().buyItem(this.data):Xv.instance().buyItem(this.data);else if("FACEBOOK"===this.data.getUtfString("payment_service"))if(window.RESOURCE.fb_products.hasOwnProperty(this.data.getUtfString("pack_name"))){var e=window.RESOURCE.fb_products[this.data.getUtfString("pack_name")];Xv.instance().callToServerFacebook(e)}else jC.instance().addDialog(de.instance().getData("145"))}},{key:"destroy",value:function(){null!==this.listVip&&(this.listVip.removeAll(),this.listVip.destroy(),this.listVip=null),vw(ww(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.bg.width}},{key:"height",get:function(){return this.bg.height}}])&&mw(n.prototype,i),o&&mw(n,o),t}();function Ew(e){return(Ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function kw(e,t,n){return(kw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pw(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Pw(e){return(Pw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ow(e,t){return(Ow=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xw=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Pw(t).call(this,game,null))||"object"!==Ew(i)&&"function"!=typeof i?Rw(n):i).event={close:new Phaser.Signal},e.vipDetail=null,He.instance().logEvent(He.Shop_Vip);var o=new Phaser.Group(game,0,0,null);return e.listVip=new Ia(game,o,new Phaser.Rectangle(0,0,game.width,game.height-270),{direction:"y",padding:38,searchForClicks:!0}),o.x=0,o.y=135,e.addChild(o),e.header=new hw,e.header.event.back.add(e.chooseBackMenu,Rw(Rw(e))),e.addChild(e.header),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ow(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),"ios"===oe.instance().platform?(zv.instance().event.buy_complete.add(this.buyItemComplete,this),zv.instance().event.buy_error.add(this.buyItemError,this)):(Xv.instance().event.buy_complete.add(this.buyItemComplete,this),Xv.instance().event.buy_error.add(this.buyItemError,this)),!0===dV.instance().dataMySeft.vip?this.addDataVip():null===oe.instance().dataPackage?"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp():(this.dataServer=oe.instance().dataPackage,this.buildData(),ht.instance().hideLoading())}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),"ios"===oe.instance().platform?(zv.instance().event.buy_complete.remove(this.buyItemComplete,this),zv.instance().event.buy_error.remove(this.buyItemError,this)):(Xv.instance().event.buy_complete.remove(this.buyItemComplete,this),Xv.instance().event.buy_error.remove(this.buyItemError,this))}},{key:"buyItemComplete",value:function(e){if(console.log("buyItemComplete------ "),console.log(e),ht.instance().hideLoading(),"OK"===e.status){var t=[];t.push(new SFS2X.SFSUserVariable("vip",!0)),t.push(new SFS2X.SFSUserVariable("vip_expired",1e3*parseInt(e.vip_expired))),dV.instance().socket.send(new SFS2X.SetUserVariablesRequest(t)),Ck.instance().addUpToVip(),console.log("data.vip_expired : "+e.vip_expired),dV.instance().dataMySeft.vip=!0,dV.instance().dataMySeft.vip_expired=1e3*parseInt(e.vip_expired),this.addDataVip()}}},{key:"buyItemError",value:function(e){ht.instance().hideLoading(),""!==e&&jC.instance().addDialog(e)}},{key:"getData",value:function(e){switch(e.cmd){case kt.RESOURCE_PACKAGE_LOAD_RESPONSE:"OK"===e.params.getUtfString("status")&&(oe.instance().dataPackage=e.params,this.dataServer=oe.instance().dataPackage,this.buildData()),ht.instance().hideLoading()}}},{key:"buildData",value:function(){console.log("buildData------"),this.listVip.removeAll(),this.listVip.reset();for(var e=0;e<this.dataServer.getSFSArray("resource_packages").size();e++){var t=this.dataServer.getSFSArray("resource_packages").getSFSObject(e);if(console.log(t),"VIP"===t.getUtfString("resource_type")){var n=new iw(t);n.event.show_details.add(this.addDetailVip,this),n.x=(game.width-n.width)/2,this.listVip.add(n)}}}},{key:"addDataVip",value:function(){this.removeDetailVip(),this.itemVip=new iw(null,!0),this.itemVip.x=35,this.itemVip.y=137,this.addChild(this.itemVip),this.txtTitle=game.add.text(35,443,de.instance().getData("162"),{fill:"#ffFFFF",fontSize:26,font:"GilroybOLD"},this),this.addChild(this.txtTitle);var e=[de.instance().getData("149"),de.instance().getData("150"),de.instance().getData("151"),de.instance().getData("152"),de.instance().getData("153"),de.instance().getData("154"),de.instance().getData("155"),de.instance().getData("156")];this.listVip.removeAll(),this.listVip.destroy();var t=new Phaser.Group(game,0,0,null);this.listVip=new Ia(game,t,new Phaser.Rectangle(0,0,game.width,game.height-700),{direction:"y",padding:10,searchForClicks:!1}),t.x=0,t.y=520,this.addChild(t);for(var n=0;n<e.length;n++){var i=new gw(e[n],"#ffffff","left");i.x=35,this.listVip.add(i)}}},{key:"addDetailVip",value:function(e){this.removeDetailVip(),this.vipDetail=new Sw(e),this.vipDetail.event.close.add(this.removeDetailVip,this),this.vipDetail.x=(game.width-this.vipDetail.width)/2,this.vipDetail.y=(game.height-this.vipDetail.height)/2,jC.instance().addChild(this.vipDetail)}},{key:"removeDetailVip",value:function(){null!==this.vipDetail&&(jC.instance().removeChild(this.vipDetail),this.vipDetail.destroy(),this.vipDetail=null)}},{key:"chooseBackMenu",value:function(){this.event.close.dispatch()}},{key:"destroy",value:function(){jC.instance().removeAnimClaimReward(),this.listVip.removeAll(),this.listVip.destroy(),this.removeDetailVip(),this.removeEvent(),kw(Pw(t.prototype),"destroy",this).call(this)}}])&&Cw(n.prototype,i),o&&Cw(n,o),t}();function Tw(e){return(Tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iw(e,t){return!t||"object"!==Tw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Aw(e){return(Aw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Dw(e,t,n){return t&&Lw(e.prototype,t),n&&Lw(e,n),e}function Gw(e,t){return(Gw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mw=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Iw(this,Aw(t).call(this,game,0,0,null,n,i))).positionShop=oe.instance().positionShop,o.bg=new Bt(o.positionShop.sort_play_list_icon_active_search_menu),o.bg.height=89,o.bg.y=0,o.bg.alpha=0,o.addChild(o.bg),e===t.GEM?(o.icon=new Bt(o.positionShop.tn_tab_icon_gem),o.iconActive=new Bt(o.positionShop.tn_tab_icon_gem_active)):e===t.TICKET?(o.icon=new Bt(o.positionShop.tn_tab_icon_ticket),o.iconActive=new Bt(o.positionShop.tn_tab_icon_ticket_active)):e===t.HEART&&(o.icon=new Bt(o.positionShop.tn_tab_icon_heart),o.iconActive=new Bt(o.positionShop.tn_tab_icon_heart_active)),o.icon.x=(o.width-o.icon.width)/2,o.icon.y=(o.height-o.icon.height)/2,o.iconActive.x=(o.width-o.iconActive.width)/2,o.iconActive.y=(o.height-o.iconActive.height)/2,o.addChild(o.icon),o.addChild(o.iconActive),o.lineActive=new Bt(o.positionShop.sort_play_list_icon_active_search_menu),o.lineActive.y=83,o.addChild(o.lineActive),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gw(e,t)}(t,Phaser.Button),Dw(t,null,[{key:"GEM",get:function(){return"DIAMOND"}},{key:"TICKET",get:function(){return"TICKET"}},{key:"HEART",get:function(){return"HEART"}}]),Dw(t,[{key:"active",value:function(){this.icon.visible=!1,this.iconActive.visible=!0,this.lineActive.visible=!0}},{key:"deactive",value:function(){this.icon.visible=!0,this.iconActive.visible=!1,this.lineActive.visible=!1}},{key:"width",get:function(){return 213*oe.instance().scale}},{key:"height",get:function(){return 89*oe.instance().scale}}]),t}();function Nw(e){return(Nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jw(e){return(jw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uw(e,t){return(Uw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Zw=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=jw(t).call(this,game,null))||"object"!==Nw(o)&&"function"!=typeof o?Fw(i):o).event={change_menu:new Phaser.Signal},n.positionShop=oe.instance().positionShop,n.bg=new Bt(n.positionShop.playlist_bg_menu),n.addChild(n.bg),n.typeTab=e,n.tabGem=new Mw(Mw.GEM,n.chooseTabGem,Fw(Fw(n))),n.typeTab===Mw.GEM?n.tabGem.active():n.tabGem.deactive(),n.addChild(n.tabGem),n.tabTicket=new Mw(Mw.TICKET,n.chooseTabTicket,Fw(Fw(n))),n.tabTicket.x=213*oe.instance().scale,n.typeTab===Mw.TICKET?n.tabTicket.active():n.tabTicket.deactive(),n.addChild(n.tabTicket),n.tabHeart=new Mw(Mw.HEART,n.chooseTabHeart,Fw(Fw(n))),n.tabHeart.x=426*oe.instance().scale,n.typeTab===Mw.HEART?n.tabHeart.active():n.tabHeart.deactive(),n.addChild(n.tabHeart),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uw(e,t)}(t,Je),n=t,(i=[{key:"chooseTabGem",value:function(){this.typeTab===Mw.GEM||(this.tabGem.active(),this.tabTicket.deactive(),this.tabHeart.deactive(),this.typeTab=Mw.GEM,this.event.change_menu.dispatch(this.typeTab))}},{key:"chooseTabTicket",value:function(){this.typeTab===Mw.TICKET||(this.tabGem.deactive(),this.tabTicket.active(),this.tabHeart.deactive(),this.typeTab=Mw.TICKET,this.event.change_menu.dispatch(this.typeTab))}},{key:"chooseTabHeart",value:function(){this.typeTab===Mw.HEART||(this.tabGem.deactive(),this.tabTicket.deactive(),this.tabHeart.active(),this.typeTab=Mw.HEART,this.event.change_menu.dispatch(this.typeTab))}}])&&Bw(n.prototype,i),o&&Bw(n,o),t}();function Hw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Vw=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t,n){var i=new SFS2X.SFSObject;return i.putInt("resource_pakage_id",e),i.putInt("quantity",t),i.putUtfString("resource_type",n),i}}],(n=null)&&Hw(t.prototype,n),i&&Hw(t,i),e}();function Qw(e){return(Qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ww(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qw(e,t,n){return(qw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kw(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Kw(e){return(Kw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zw(e,t){return(zw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Xw=function(e){function t(e,n,i){var o,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(o=!(s=Kw(t).call(this,game,null))||"object"!==Qw(s)&&"function"!=typeof s?Yw(a):s).positionShop=oe.instance().positionShop,o.data=e,o.iconStr=n,o.isSup=i,o.timeWait=0,o.timerToCountTime=null,o.totalVideo=null,o.bg=new Bt(o.positionShop.tn_item_bg),o.addChild(o.bg),o.btnNamePackage=new qn(o.positionShop.tn_item_package_name,e.getUtfString("name")),o.addChild(o.btnNamePackage),o.txtPrice=new Qt(o.positionShop.tn_item_price,mt.instance().format(e.getInt("quantity"))),o.txtPrice.setTextBounds(0,0,200*oe.instance().scale,52*oe.instance().scale),o.addChild(o.txtPrice),o.icon=new Phaser.Sprite(game,0,0,n),o.icon.smoothed=!0,o.icon.animations.pause=!0,o.icon.animations.add("shop"+n),o.icon.x=(o.bg.width-o.icon.width)/2,o.icon.y=90*oe.instance().scale+(60*oe.instance().scale-o.icon.height)/2,o.icon.animations.play("shop"+n,30,!0),o.addChild(o.icon),i?"ADS"===e.getUtfString("price_type")?o.checkShowTotalVideo():(o.buyItem=new qn(o.positionShop.tn_item_total_support,mt.instance().format(e.getInt("price")),o.buyDiamond,Yw(Yw(o))),o.addChild(o.buyItem)):"ADS"===e.getUtfString("price_type")?o.checkShowTotalVideo():(o.totalMoney=new qn(o.positionShop.tn_item_total_money,mt.instance().format(e.getInt("price"))+de.instance().getData("148"),o.chooseBuy,Yw(Yw(o))),o.addChild(o.totalMoney)),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zw(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){Ei.instance().event.rewardedVideoRewardReceived.add(this.rewardedVideoRewardReceived,this),Ei.instance().event.rewardedVideoFailed.add(this.rewardedVideoFailed,this),Ei.instance().event.rewardedVideoClosed.add(this.rewardedVideoClosed,this),"ios"===oe.instance().platform?(zv.instance().event.buy_complete.add(this.removeLoading,this),zv.instance().event.buy_error.add(this.removeLoading,this)):(Xv.instance().event.buy_complete.add(this.removeLoading,this),Xv.instance().event.buy_error.add(this.removeLoading,this))}},{key:"removeEvent",value:function(){Ei.instance().event.rewardedVideoRewardReceived.remove(this.rewardedVideoRewardReceived,this),Ei.instance().event.rewardedVideoFailed.remove(this.rewardedVideoFailed,this),Ei.instance().event.rewardedVideoClosed.remove(this.rewardedVideoClosed,this),"ios"===oe.instance().platform?(zv.instance().event.buy_complete.remove(this.removeLoading,this),zv.instance().event.buy_error.remove(this.removeLoadingError,this)):(Xv.instance().event.buy_complete.remove(this.removeLoading,this),Xv.instance().event.buy_error.remove(this.removeLoadingError,this))}},{key:"rewardedVideoClosed",value:function(){ht.instance().hideLoading()}},{key:"rewardedVideoFailed",value:function(){ht.instance().hideLoading()}},{key:"rewardedVideoRewardReceived",value:function(){ht.instance().hideLoading(),dV.instance().sendData(kt.RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_REQUEST,Vw.begin(this.data.getInt("id"),this.data.getInt("quantity"),this.data.getUtfString("resource_type")))}},{key:"checkShowTotalVideo",value:function(){this.removeTotalVideo(),!0===this.data.getBool("isAllowWatch")?(this.totalVideo=new qn(this.positionShop.tn_item_total_video,"1x",this.chooseBuyVideo,this),this.addEvent()):(this.timeWait=parseInt((this.data.getLong("next_watched_at")-this.getTime())/1e3),this.timeWait>0?(this.totalVideo=new qn(this.positionShop.tn_item_total_video_wait,""),this.stopCountTime(),this.timerToCountTime=this.game.time.create(!0),this.timerToCountTime.loop(1e3,this.onTimerToCountTime,this),this.timerToCountTime.start(),this.setTextTimer()):(this.totalVideo=new qn(this.positionShop.tn_item_total_video,"1x",this.chooseBuyVideo,this),this.addEvent())),this.addChild(this.totalVideo)}},{key:"onTimerToCountTime",value:function(){this.timeWait=this.timeWait-1,this.timeWait<0&&(this.timeWait=0),0===this.timeWait?(this.stopCountTime(),ht.instance().showLoading(),oe.instance().dataPackage=null,"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp()):this.setTextTimer()}},{key:"setTextTimer",value:function(){var e,t="",n=parseInt(this.timeWait/3600),i=0,o=0;n>0?(t=n>9?n+":":"0"+n+":",i=parseInt(this.timeWait%3600/60),o=this.timeWait-(3600*n+60*i)):(i=parseInt(this.timeWait/60),o=this.timeWait%60),e=t+(i>9?i+":":"0"+i+":")+(o>9?o+"":"0"+o),this.totalVideo.setText(e)}},{key:"stopCountTime",value:function(){null!==this.timerToCountTime&&(this.timerToCountTime.stop(),this.timerToCountTime.destroy(),this.timerToCountTime=null)}},{key:"removeTotalVideo",value:function(){null!==this.totalVideo&&(this.removeChild(this.totalVideo),this.totalVideo.destroy(),this.totalVideo=null)}},{key:"buyDiamond",value:function(){LogConsole.log("buyDiamond"),jC.instance().addPopupConfirmBuyItemShop(this.data,this.iconStr,this.isSup)}},{key:"chooseBuy",value:function(){if(LogConsole.log("chooseBuy"),window.cordova&&"undefined"!=typeof device)ht.instance().showLoading(),"ios"===oe.instance().platform?zv.instance().buyItem(this.data):Xv.instance().buyItem(this.data),this.removeIdLoading(),this.idRemoveLoading=game.time.events.add(10*Phaser.Timer.SECOND,this.removeLoading,this);else if(console.log("this.data.payment_service  : "+this.data.getUtfString("payment_service")),"FACEBOOK"===this.data.getUtfString("payment_service"))if(window.RESOURCE.fb_products.hasOwnProperty(this.data.getUtfString("pack_name"))){var e=window.RESOURCE.fb_products[this.data.getUtfString("pack_name")];Xv.instance().callToServerFacebook(e)}else jC.instance().addDialog(de.instance().getData("145"))}},{key:"removeLoadingError",value:function(e){this.removeLoading(),""!==e&&jC.instance().addDialog(e)}},{key:"removeLoading",value:function(){this.removeIdLoading(),ht.instance().hideLoading()}},{key:"removeIdLoading",value:function(){null!==this.idRemoveLoading&&game.time.events.remove(this.idRemoveLoading)}},{key:"chooseBuyVideo",value:function(){LogConsole.log("chooseBuyVideo"),window.cordova&&"undefined"!=typeof device?(ht.instance().showLoading(),Ei.instance().showRewardVideoInappPurchase(this.data.getUtfString("resource_type"))):jC.instance().addDialog(de.instance().getData("146"))}},{key:"destroy",value:function(){this.stopCountTime(),this.removeEvent(),qw(Kw(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return 213*oe.instance().scale}},{key:"height",get:function(){return 324*oe.instance().scale}}])&&Ww(n.prototype,i),o&&Ww(n,o),t}();function Jw(e){return(Jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eb(e,t,n){return(eb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tb(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tb(e){return(tb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nb(e,t){return(nb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ib(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ob=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(i=tb(t).call(this,game,null))||"object"!==Jw(i)&&"function"!=typeof i?ib(n):i,ht.instance().showLoading(),e.event={close:new Phaser.Signal},e.arrResource=[],e.typeMenu=o,e.dataServer=null;var a={column:2,width:game.width,height:game.height-356*oe.instance().scale,rowHeight:325*oe.instance().scale,leftDistance:80*oe.instance().scale,direction:"y",distanceBetweenColumns:55*oe.instance().scale,distanceBetweenRows:35*oe.instance().scale};return e.scroll=new fy(a),e.scroll.y=230*oe.instance().scale,e.addChild(e.scroll),e.header=new hw,e.header.event.back.add(e.chooseBackMenu,ib(ib(e))),e.addChild(e.header),""===e.typeMenu&&(e.typeMenu=Mw.GEM),e.tabMenu=new Zw(e.typeMenu),e.tabMenu.event.change_menu.add(e.changeMenu,ib(ib(e))),e.tabMenu.y=100*oe.instance().scale,e.addChild(e.tabMenu),e.addEvent(),He.instance().logEvent(He.Shop_resource),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nb(e,t)}(t,Em),n=t,(i=[{key:"loadFileComplete",value:function(){eb(tb(t.prototype),"loadFileComplete",this).call(this),this.buildData()}},{key:"chooseBackMenu",value:function(){this.event.close.dispatch()}},{key:"changeMenu",value:function(e){console.log("this.typeMenu : "+this.typeMenu),this.typeMenu=e,ht.instance().showLoading(),this.typeMenu===Mw.GEM?this.arrResource=[{type:"spritesheet",link:"img/atlas/Diamond1.png",key:"Diamond1",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Diamond2.png",key:"Diamond2",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Diamond3.png",key:"Diamond3",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Diamond4.png",key:"Diamond4",width:200,height:140,countFrame:30}]:this.typeMenu===Mw.TICKET?this.arrResource=[{type:"spritesheet",link:"img/atlas/Ticket1.png",key:"Ticket1",width:200,height:140,countFrame:24},{type:"spritesheet",link:"img/atlas/Ticket2.png",key:"Ticket2",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Ticket3.png",key:"Ticket3",width:200,height:140,countFrame:60},{type:"spritesheet",link:"img/atlas/Ticket4.png",key:"Ticket4",width:200,height:140,countFrame:44}]:this.typeMenu===Mw.HEART&&(this.arrResource=[{type:"spritesheet",link:"img/atlas/Heart1.png",key:"Heart1",width:200,height:140,countFrame:10},{type:"spritesheet",link:"img/atlas/Heart2.png",key:"Heart2",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Heart3.png",key:"Heart3",width:200,height:140,countFrame:13},{type:"spritesheet",link:"img/atlas/Heart4.png",key:"Heart4",width:200,height:140,countFrame:60}]),this.loadResource()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),"ios"===oe.instance().platform?(zv.instance().event.buy_complete.add(this.buyItemComplete,this),zv.instance().event.buy_error.add(this.buyItemError,this)):(Xv.instance().event.buy_complete.add(this.buyItemComplete,this),Xv.instance().event.buy_error.add(this.buyItemError,this)),null===oe.instance().dataPackage?"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp():(this.dataServer=oe.instance().dataPackage,this.changeMenu(this.typeMenu),ht.instance().hideLoading())}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),"ios"===oe.instance().platform?(zv.instance().event.buy_complete.remove(this.buyItemComplete,this),zv.instance().event.buy_error.remove(this.buyItemError,this)):(Xv.instance().event.buy_complete.remove(this.buyItemComplete,this),Xv.instance().event.buy_error.remove(this.buyItemError,this))}},{key:"buyItemCompleteDiamond",value:function(e){if(console.log("buyItemCompleteDiamond ------------"),"OK"===e.getUtfString("status")){var t=500*oe.instance().scale,n=45*oe.instance().scale,i="HEART";"DIAMOND"===e.getUtfString("resource_type")?(i="DIAMOND",t=140*oe.instance().scale,n=45*oe.instance().scale):"TICKET"===e.getUtfString("resource_type")?(i="TICKET",t=316*oe.instance().scale,n=45*oe.instance().scale):"HEART"===e.getUtfString("resource_type")&&(i="HEART",t=500*oe.instance().scale,n=45*oe.instance().scale);var o={type:i,reward:e.getInt("resource_up"),finishPoint:{x:t,y:n}};jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,o)}}},{key:"buyItemComplete",value:function(e){if(console.log("buyItemComplete------ "),console.log(e),ht.instance().hideLoading(),"OK"===e.status){var t=500*oe.instance().scale,n=45*oe.instance().scale,i="HEART",o="";"DIAMOND"===e.resourceType?(i="DIAMOND",t=140*oe.instance().scale,n=45*oe.instance().scale,o="diamond"):"TICKET"===e.resourceType?(i="TICKET",t=316*oe.instance().scale,n=45*oe.instance().scale,o="ticket"):"HEART"===e.resourceType&&(i="HEART",t=500*oe.instance().scale,n=45*oe.instance().scale,o="heart");var a={type:i,reward:e.newResource-e.oldResource,finishPoint:{x:t,y:n}};console.log("data.newResource : "+e.newResource);var s=[];s.push(new SFS2X.SFSUserVariable(o,e.newResource)),dV.instance().socket.send(new SFS2X.SetUserVariablesRequest(s)),jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,a)}}},{key:"buyItemError",value:function(e){ht.instance().hideLoading(),""!==e&&jC.instance().addDialog(e)}},{key:"getData",value:function(e){switch(e.cmd){case kt.RESOURCE_PACKAGE_LOAD_RESPONSE:"OK"===e.params.getUtfString("status")&&(oe.instance().dataPackage=e.params,this.dataServer=oe.instance().dataPackage,this.changeMenu(this.typeMenu)),ht.instance().hideLoading();break;case kt.RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_RESPONSE:if("OK"===e.params.getUtfString("status")){var t={newResource:0,oldResource:0,resourceType:"DIAMOND",status:"OK"};t.newResource=e.params.getInt("new_resource"),t.resourceType=e.params.getUtfString("resource_type"),t.oldResource=e.params.getInt("old_resource"),this.buyItemComplete(t),oe.instance().dataPackage=null,"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp()}ht.instance().hideLoading();break;case kt.RESOURCE_BUY_SUPPORT_ITEM_RESPONSE:"OK"===e.params.getUtfString("status")&&this.buyItemCompleteDiamond(e.params)}}},{key:"buildData",value:function(){var e=[],t=[];this.typeMenu===Mw.GEM?t=["Diamond1","Diamond2","Diamond3","Diamond4"]:this.typeMenu===Mw.TICKET?t=["Ticket1","Ticket2","Ticket3","Ticket4"]:this.typeMenu===Mw.HEART&&(t=["Heart1","Heart2","Heart3","Heart4"]);for(var n=0,i=0;i<this.dataServer.getSFSArray("resource_packages").size();i++){var o=this.dataServer.getSFSArray("resource_packages").getSFSObject(i);if(o.getUtfString("resource_type")===this.typeMenu)if(console.log("mainData.platform : "+oe.instance().platform),console.log("pricetype : "+o.getUtfString("price_type")),o.getUtfString("resource_type")===Mw.TICKET&&"CASH"===o.getUtfString("price_type")||o.getUtfString("resource_type")===Mw.TICKET&&"ADS"===o.getUtfString("price_type"));else{var a="";a=n<t.length?t[n]:t[t.length-1];var s=void 0;s="DIAMOND"===o.getUtfString("price_type")?new Xw(o,a,!0):new Xw(o,a),e.push(s),n++}}this.scroll.viewList=e,ht.instance().hideLoading()}},{key:"destroy",value:function(){jC.instance().removeAnimClaimReward(),this.arrResource=[{type:"spritesheet",link:"img/atlas/Diamond1.png",key:"Diamond1",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Diamond2.png",key:"Diamond2",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Diamond3.png",key:"Diamond3",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Diamond4.png",key:"Diamond4",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Ticket1.png",key:"Ticket1",width:200,height:140,countFrame:24},{type:"spritesheet",link:"img/atlas/Ticket2.png",key:"Ticket2",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Ticket3.png",key:"Ticket3",width:200,height:140,countFrame:60},{type:"spritesheet",link:"img/atlas/Ticket4.png",key:"Ticket4",width:200,height:140,countFrame:44},{type:"spritesheet",link:"img/atlas/Heart1.png",key:"Heart1",width:200,height:140,countFrame:10},{type:"spritesheet",link:"img/atlas/Heart2.png",key:"Heart2",width:200,height:140,countFrame:30},{type:"spritesheet",link:"img/atlas/Heart3.png",key:"Heart3",width:200,height:140,countFrame:13},{type:"spritesheet",link:"img/atlas/Heart4.png",key:"Heart4",width:200,height:140,countFrame:60}],this.scroll.viewList=[],this.scroll.destroy(),this.removeEvent(),eb(tb(t.prototype),"destroy",this).call(this)}}])&&$w(n.prototype,i),o&&$w(n,o),t}();function ab(e){return(ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rb(e,t,n){return(rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lb(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function lb(e){return(lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cb(e,t){return(cb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ub=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=lb(t).call(this,game,null))||"object"!==ab(i)&&"function"!=typeof i?hb(n):i).event={back:new Phaser.Signal},e.positionShop=oe.instance().positionShop,e.bg=new Bt(e.positionShop.sort_play_list_bg_top_menu),e.addChild(e.bg),e.btnBack=new _n(e.positionShop.sort_play_list_bg_back_top_menu,e.chooseBack,hb(hb(e))),e.addChild(e.btnBack),e.score=dV.instance().dataMySeft.support_item,e.btnMic=new qn(e.positionShop.tn_header_item_mic,dV.instance().dataMySeft.support_item),e.addChild(e.btnMic),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cb(e,t)}(t,Je),n=t,(i=[{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseBack,this),dV.instance().events.onUserVarsUpdate.add(this.onUserVarsUpdate,this)}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this),dV.instance().events.onUserVarsUpdate.remove(this.onUserVarsUpdate,this)}},{key:"onUserVarsUpdate",value:function(){var e=this,t={score:this.score};this.score=dV.instance().dataMySeft.support_item;var n=game.add.tween(t).to({score:dV.instance().dataMySeft.support_item},500,"Linear",!0,1500);n.start(),n.onUpdateCallback(function(){e.btnMic&&e.btnMic.setText(parseInt(t.score))},this),n.onComplete.add(function(){e.btnMic&&e.btnMic.setText(parseInt(e.score))},this)}},{key:"destroy",value:function(){this.removeEvent(),game.tweens.removeFrom(this.btnMic),rb(lb(t.prototype),"destroy",this).call(this)}}])&&sb(n.prototype,i),o&&sb(n,o),t}();function db(e){return(db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pb(e,t){return!t||"object"!==db(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gb(e,t,n){return(gb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yb(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yb(e){return(yb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mb(e,t){return(mb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vb=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=pb(this,yb(t).call(this,game,null)),ht.instance().showLoading(),e.event={close:new Phaser.Signal},e.arrResource=[{type:"spritesheet",link:"img/atlas/Mic1.png",key:"Mic1",width:200,height:140,countFrame:16},{type:"spritesheet",link:"img/atlas/Mic2.png",key:"Mic2",width:200,height:140,countFrame:16},{type:"spritesheet",link:"img/atlas/Mic3.png",key:"Mic3",width:200,height:140,countFrame:60},{type:"spritesheet",link:"img/atlas/Mic4.png",key:"Mic4",width:200,height:140,countFrame:60}];var n={column:2,width:game.width,height:game.height-256*oe.instance().scale,rowHeight:325*oe.instance().scale,leftDistance:80*oe.instance().scale,direction:"y",distanceBetweenColumns:55*oe.instance().scale,distanceBetweenRows:35*oe.instance().scale};return e.scroll=new fy(n),e.scroll.y=230*oe.instance().scale,e.addChild(e.scroll),e.loadResource(),He.instance().logEvent(He.Shop_items_support),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mb(e,t)}(t,Em),n=t,(i=[{key:"loadFileComplete",value:function(){gb(yb(t.prototype),"loadFileComplete",this).call(this),this.header=new ub,this.header.event.back.add(this.chooseBackMenu,this),this.addChild(this.header),this.addEvent()}},{key:"chooseBackMenu",value:function(){this.event.close.dispatch()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),null===oe.instance().dataPackage?"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp():(this.dataServer=oe.instance().dataPackage,this.buildData(),ht.instance().hideLoading())}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(LogConsole.log("cmd : "+e.cmd),LogConsole.log(e.params.getDump()),e.cmd){case kt.RESOURCE_PACKAGE_LOAD_RESPONSE:"OK"===e.params.getUtfString("status")&&(oe.instance().dataPackage=e.params,this.dataServer=oe.instance().dataPackage,this.buildData()),ht.instance().hideLoading();break;case kt.RESOURCE_BUY_SUPPORT_ITEM_RESPONSE:"OK"===e.params.getUtfString("status")&&this.buyItemComplete(e.params.getInt("resource_up"));break;case kt.RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_RESPONSE:"OK"===e.params.getUtfString("status")&&"SUPPORT_ITEM"===e.params.getUtfString("resource_type")&&(this.buyItemComplete(e.params.getInt("new_resource")-e.params.getInt("old_resource")),oe.instance().dataPackage=null,"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp()),ht.instance().hideLoading()}}},{key:"buyItemComplete",value:function(e){var t={type:"SUPPORT_ITEM",reward:e,finishPoint:{x:330*oe.instance().scale,y:45*oe.instance().scale}};jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,t)}},{key:"buildData",value:function(){var e,t=[];e=["Mic1","Mic2","Mic3","Mic4"];for(var n=0,i=0;i<this.dataServer.getSFSArray("resource_packages").size();i++){var o=this.dataServer.getSFSArray("resource_packages").getSFSObject(i);if(console.log(o),"SUPPORT_ITEM"===o.getUtfString("resource_type")){console.log("mainData.platform : "+oe.instance().platform),console.log("pricetype : "+o.getUtfString("price_type"));var a=new Xw(o,n<e.length?e[n]:e[e.length-1],!0);t.push(a),n++}}this.scroll.viewList=t}},{key:"destroy",value:function(){jC.instance().removeAnimClaimReward(),this.scroll.viewList=[],this.removeEvent(),this.scroll.destroy(),gb(yb(t.prototype),"destroy",this).call(this)}}])&&fb(n.prototype,i),o&&fb(n,o),t}();function wb(e){return(wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _b(e,t){return!t||"object"!==wb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sb(e,t,n){return(Sb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eb(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Eb(e){return(Eb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cb(e,t){return(Cb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kb=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=_b(this,Eb(t).call(this,game,null))).event={close:new Phaser.Signal,view_all_shop:new Phaser.Signal,search_shop:new Phaser.Signal},e.ktTween=!1,e.shop=null,e.vip=null,e.buyDiamond=null,e.help=null,e.idxTab=n,e.typeSubTab=i,e.bg=new Phaser.Button(game,0,0,"bg-playlist"),e.addChild(e.bg),e.arrResource=[{type:"text",link:"img/config/positionShop.json",key:"positionShop"},{type:"atlas",link:"img/atlas/shop.png",key:"shop",linkJson:"img/atlas/shop.json"}],e.loadResource(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cb(e,t)}(t,Em),n=t,(i=[{key:"loadFileComplete",value:function(){Sb(Eb(t.prototype),"loadFileComplete",this).call(this),this.menuBot=new Hm(this.idxTab),this.menuBot.event.change_menu.add(this.change_menu,this),this.menuBot.y=game.height-120*oe.instance().scale,this.addChild(this.menuBot),game.time.events.add(.1*Phaser.Timer.SECOND,this.change_menu,this,this.idxTab)}},{key:"change_menu",value:function(e){if(!1===this.ktTween){switch(this.idxTab=e,e){case 0:He.instance().logEvent(He.Shop_Vip_button),this.addShop();break;case 1:He.instance().logEvent(He.Shop_resource_button),this.addBuyDiamond();break;case 2:He.instance().logEvent(He.Shop_items_support_butotn),this.addHelp();break;case 3:He.instance().logEvent(He.Shop_Vip_button),this.addVip()}this.addChild(this.menuBot)}}},{key:"tweenVipComplete",value:function(){this.ktTween=!1,Ch.instance().event.tweenComplete.remove(this.tweenVipComplete,this),null!==this.shop&&this.shop.addEvent(),this.removeVip()}},{key:"tweenHelpComplete",value:function(){this.ktTween=!1,Ch.instance().event.tweenComplete.remove(this.tweenHelpComplete,this),null!==this.shop&&this.shop.addEvent(),this.removeHelp()}},{key:"tweenBuyDiamondComplete",value:function(){this.ktTween=!1,Ch.instance().event.tweenComplete.remove(this.tweenBuyDiamondComplete,this),null!==this.shop&&this.shop.addEvent(),this.removeBuyDiamond()}},{key:"tweenShopComplete",value:function(){this.ktTween=!1,Ch.instance().event.tweenComplete.remove(this.tweenShopComplete,this),this.removeShop()}},{key:"addShop",value:function(){this.removeShop(),this.shop=new Qv,this.shop.event.close.add(this.chooseClose,this),this.shop.event.buyVip.add(this.buyVip,this),this.addChild(this.shop),null!==this.vip?(this.ktTween=!0,Ch.instance().beginSwitch(this.vip,this.shop,!0),Ch.instance().event.tweenComplete.add(this.tweenVipComplete,this)):null!==this.help?(this.ktTween=!0,Ch.instance().beginSwitch(this.help,this.shop,!0),Ch.instance().event.tweenComplete.add(this.tweenHelpComplete,this)):null!==this.buyDiamond?(this.ktTween=!0,Ch.instance().beginSwitch(this.buyDiamond,this.shop,!0),Ch.instance().event.tweenComplete.add(this.tweenBuyDiamondComplete,this)):(this.ktTween=!0,Ch.instance().beginSwitch(null,this.shop,!0),Ch.instance().event.tweenComplete.add(this.tweenShopBeginComplete,this))}},{key:"buyVip",value:function(){this.change_menu(3),this.menuBot.setButtonActive(3)}},{key:"shopSearch",value:function(e){this.event.search_shop.dispatch(e)}},{key:"showAllShop",value:function(e){this.event.view_all_shop.dispatch(e)}},{key:"tweenShopBeginComplete",value:function(){null!==this.shop&&(this.ktTween=!1,Ch.instance().event.tweenComplete.remove(this.tweenShopBeginComplete,this),this.shop.addEvent())}},{key:"removeShop",value:function(){null!==this.shop&&(this.removeChild(this.shop),this.shop.destroy(),this.shop=null)}},{key:"addVip",value:function(){this.removeVip(),this.vip=new xw,this.vip.event.close.add(this.chooseClose,this),this.addChild(this.vip),null!==this.shop&&(this.ktTween=!0,Ch.instance().beginSwitch(this.shop,this.vip,!1),Ch.instance().event.tweenComplete.add(this.tweenShopComplete,this)),null!==this.buyDiamond&&(this.ktTween=!0,Ch.instance().beginSwitch(this.buyDiamond,this.vip,!1),Ch.instance().event.tweenComplete.add(this.tweenBuyDiamondComplete,this)),null!==this.help&&(this.ktTween=!0,Ch.instance().beginSwitch(this.help,this.vip,!1),Ch.instance().event.tweenComplete.add(this.tweenHelpComplete,this))}},{key:"removeVip",value:function(){null!==this.vip&&(this.removeChild(this.vip),this.vip.destroy(),this.vip=null)}},{key:"addBuyDiamond",value:function(){this.removeBuyDiamond(),this.buyDiamond=new ob(this.typeSubTab),this.buyDiamond.event.close.add(this.chooseClose,this),this.addChild(this.buyDiamond),null!==this.shop&&(this.ktTween=!0,Ch.instance().beginSwitch(this.shop,this.buyDiamond,!1),Ch.instance().event.tweenComplete.add(this.tweenShopComplete,this)),null!==this.help&&(this.ktTween=!0,Ch.instance().beginSwitch(this.help,this.buyDiamond,!0),Ch.instance().event.tweenComplete.add(this.tweenHelpComplete,this)),null!==this.vip&&(this.ktTween=!0,Ch.instance().beginSwitch(this.vip,this.buyDiamond,!0),Ch.instance().event.tweenComplete.add(this.tweenVipComplete,this)),this.typeSubTab=""}},{key:"removeBuyDiamond",value:function(){null!==this.buyDiamond&&(this.removeChild(this.buyDiamond),this.buyDiamond.destroy(),this.buyDiamond=null)}},{key:"addHelp",value:function(){this.removeHelp(),this.help=new vb,this.help.event.close.add(this.chooseClose,this),this.addChild(this.help),null!==this.vip&&(this.ktTween=!0,Ch.instance().beginSwitch(this.vip,this.help,!0),Ch.instance().event.tweenComplete.add(this.tweenVipComplete,this)),null!==this.shop&&(this.ktTween=!0,Ch.instance().beginSwitch(this.shop,this.help,!1),Ch.instance().event.tweenComplete.add(this.tweenShopComplete,this)),null!==this.buyDiamond&&(this.ktTween=!0,Ch.instance().beginSwitch(this.buyDiamond,this.help,!1),Ch.instance().event.tweenComplete.add(this.tweenBuyDiamondComplete,this))}},{key:"removeHelp",value:function(){null!==this.help&&(this.removeChild(this.help),this.help.destroy(),this.help=null)}},{key:"chooseClose",value:function(){oe.instance().state===De.MAIN_MENU&&FH.instance().screen.refreshMenu(),this.event.close.dispatch()}},{key:"destroy",value:function(){oe.instance().positionShopData=null,this.removeBuyDiamond(),this.removeEvent(),this.removeHelp(),this.removeShop(),this.removeVip(),Sb(Eb(t.prototype),"destroy",this).call(this)}}])&&bb(n.prototype,i),o&&bb(n,o),t}();var Pb=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=0,this.code="",this.genre="",this.id=0,this.priority=0,this.region=""};function Ob(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Rb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t={genres:[],playlists:[]};if("OK"===e.getUtfString(xt.status)){for(var n=[],i={},o=e.getSFSArray(xt.genres),a=0;a<o.size();a++){var s=o.getSFSObject(a),r=new Pb;r.code=s.getUtfString(xt.code),r.genre=s.getUtfString(xt.genre),r.id=s.getInt(xt.id),r.region=s.getUtfString(xt.region),r.parent=s.getInt(xt.parent),r.priority=s.getInt(xt.priority),i[r.id]=r.region,n.push(r)}t.genres=n;for(var l=[],c=e.getSFSArray(xt.playlists),h=0;h<c.size();h++){var u=c.getSFSObject(h),d=new bc;if(d.is_highlight=u.getInt(xt.is_highlight),d.used_times=u.getInt(xt.used_times),d.thumb=u.getUtfString(xt.thumb),d.created=u.getLong(xt.created),d.is_owner=u.getInt(xt.is_owner),d.is_default=u.getInt(xt.is_default),d.genre_id=u.getInt(xt.genre_id),d.purchased=u.getInt(xt.purchased),d.songs=u.getUtfString(xt.songs),d.price=u.getInt(xt.price),d.is_general=u.getInt(xt.is_general),d.name=u.getUtfString(xt.name),d.id=u.getInt(xt.id),d.vip=u.getInt(xt.vip),d.is_solo_mode=u.getInt(xt.is_solo_mode),d.updated=u.getLong(xt.updated),d.country_id=u.getInt(xt.country_id),d.purchased_count=u.getInt(xt.purchased_count),i.hasOwnProperty(d.genre_id)&&(d.region=i[d.genre_id]),u.containsKey(xt.user_playlist_mapping)){var f=u.getSFSObject(xt.user_playlist_mapping);f&&(d.user.user_id=f.getInt(xt.user_id),d.user.level=f.getInt(xt.level),d.user.playlist_id=f.getInt(xt.playlist_id),d.user.exp_score=f.getInt(xt.exp_score),d.user.created=f.getLong(xt.created),d.user.active=f.getInt(xt.active),d.user.id=f.getLong(xt.id),d.user.current_level_score=f.getInt(xt.current_level_score),d.user.next_level_score=f.getInt(xt.next_level_score),d.user.updated=f.getLong(xt.updated))}1==d.is_owner||l.push(d)}t.playlists=l}return t}}],(n=null)&&Ob(t.prototype,n),i&&Ob(t,i),e}();function xb(e){return(xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ib(e,t){return!t||"object"!==xb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ab(e,t,n){return(Ab="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lb(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Lb(e){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Db(e,t){return(Db=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gb=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ib(this,Lb(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Db(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={back:new Phaser.Signal},this.positionShop=oe.instance().positionShop,this.dataPlayList={genres:[],playlists:[]},this.detail=null,this.popupBuy=null,this.popupMoney=null,this.type=iv.SORT_AZ,this.local=dv.Local,this.genres=-1,this.itemGenresActive=null,this.strSearch="",this.dataList=[],this.ktSearch=!1,this.bg=new Phaser.Button(game,0,0,"bg-playlist"),this.addChild(this.bg);var e={column:3,width:game.width,height:732*oe.instance().scale,rowHeight:326*oe.instance().scale,leftDistance:35*oe.instance().scale,direction:"y",distanceBetweenColumns:35*oe.instance().scale,distanceBetweenRows:35*oe.instance().scale};this.scroll=new fy(e),this.scroll.y=376*oe.instance().scale,this.addChild(this.scroll),this.bgGenres=new _n(this.positionShop.sort_play_list_bg_search_menu),this.bgGenres.height=136*oe.instance().scale,this.bgGenres.y=100*oe.instance().scale,this.addChild(this.bgGenres),this.line=new Dn(this.positionShop.shop_line),this.line.x=0*oe.instance().scale,this.line.y=this.bgGenres.y+this.bgGenres.height-2*oe.instance().scale,this.addChild(this.line);var t=new Phaser.Group(game,0,0,null);this.listGenres=new Ia(game,t,new Phaser.Rectangle(0,0,game.width,95*oe.instance().scale),{direction:"x",padding:18*oe.instance().scale,bouncing:!0,searchForClicks:!0}),t.x=0,t.y=112*oe.instance().scale,this.addChild(t),this.header=new hv,this.header.addEventSearch(this.searchData,this),this.header.addEventBack(this.chooseBackHeader,this),this.addChild(this.header),this.menu=new iv,this.menu.addEventChangeMenu(this.changeMenu,this),this.menu.y=238*oe.instance().scale,this.addChild(this.menu),this.txtSearch=new Qt(this.positionShop.sort_play_list_text_current_search,""),this.txtSearch.setTextBounds(0,0,game.width-71*oe.instance().scale,59*oe.instance().scale),this.addChild(this.txtSearch),this.btnCloseTextSearch=new _n(this.positionShop.sort_play_list_btn_close_search,this.chooseCloseTextSearch,this),this.addChild(this.btnCloseTextSearch),this.btnCloseTextSearch.visible=!1}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().sendData(kt.SHOP_PLAYLIST_LOAD_REQUEST,Ot.begin())}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case kt.SHOP_PLAYLIST_LOAD_RESPONSE:this.dataPlayList=Rb.begin(e.params),this.buildListGenres(),this.buildDataList(),!0===this.ktSearch&&(this.ktSearch=!1,this.addKeyBoard());break;case kt.SHOP_BUY_PLAYLIST_RESPONSE:"OK"===e.params.getUtfString(ShopDataField.status)&&dV.instance().sendData(kt.SHOP_PLAYLIST_LOAD_REQUEST,Ot.begin())}}},{key:"addKeyBoard",value:function(){this.header.addKeyBoard()}},{key:"chooseBackHeader",value:function(){LogConsole.log("chooseBackHeader"),this.event.back.dispatch()}},{key:"chooseCloseTextSearch",value:function(){this.btnCloseTextSearch.visible=!1,this.txtSearch.text="",this.strSearch="",this.buildDataList()}},{key:"changeMenu",value:function(e){this.type=e,this.buildDataList()}},{key:"setData",value:function(e,t,n,i){this.local=e,this.genres=t,this.type=n,this.ktSearch=i,""!=this.type&&this.menu.setMenu(this.type)}},{key:"changeData",value:function(e){this.dataPlayList=e,this.buildDataList()}},{key:"chooseItem",value:function(e){-1===this.genres?(this.itemGenresActive=e,this.itemGenresActive.active(),this.genres=e.getData().id):this.genres===e.getData().id?(e.deactive(),this.genres=-1,this.itemGenresActive=null):(this.itemGenresActive.deactive(),e.active(),this.genres=e.getData().id,this.itemGenresActive=e),this.listGenres.tweenToItem(e.idx,.5),this.buildDataList()}},{key:"searchData",value:function(e){if(LogConsole.log("searchData : "+e),this.strSearch=e,this.txtSearch.text=this.strSearch,""!=this.strSearch){this.btnCloseTextSearch.visible=!0,this.dataList=[];for(var t=0;t<this.dataPlayList.playlists.length;t++)-1!==this.xoa_dau(this.dataPlayList.playlists[t].name).toUpperCase().indexOf(this.xoa_dau(e).toUpperCase())&&this.dataList.push(this.dataPlayList.playlists[t])}else this.btnCloseTextSearch.visible=!1;this.buildDataList()}},{key:"buildDataList",value:function(){""===this.strSearch?this.type===iv.SORT_AZ?this.dataList=this.dataPlayList.playlists.sort(this.sortTopNgheSi):this.type===iv.SORT_NEW?this.dataList=this.dataPlayList.playlists.sort(this.sortNewPlayList):this.type===iv.SORT_POP?this.dataList=this.dataPlayList.playlists.sort(this.sortPhoBien):this.dataList=this.dataPlayList.playlists.sort(this.sortAZ):this.type===iv.SORT_AZ?this.dataList.sort(this.sortTopNgheSi):this.type===iv.SORT_NEW?this.dataList.sort(this.sortNewPlayList):this.type===iv.SORT_POP?this.dataList.sort(this.sortPhoBien):this.dataList.sort(this.sortAZ);for(var e=[],t=-1,n=0;n<this.dataList.length;n++)if((-1===this.genres||this.dataList[n].genre_id===this.genres)&&this.local===this.dataList[n].region&&1!==this.dataList[n].is_owner){t++;var i=new by;i.event.CHOOSE.add(this.chooseItemShop,this),i.event.BUY.add(this.buyItemShop,this),i.setData(this.dataList[n],t),e.push(i)}this.scroll.viewList=e}},{key:"buildListGenres",value:function(){this.listGenres.removeAll(),this.listGenres.reset();for(var e=-1,t=-1,n=0;n<this.dataPlayList.genres.length;n++)if(this.dataPlayList.genres[n].region===this.local){t++;var i=new wv(this.chooseItem,this);this.dataPlayList.genres[n].id===this.genres?(this.itemGenresActive=i,i.active(),e=t):i.deactive(),i.y=15*oe.instance().scale,i.setData(this.dataPlayList.genres[n],t),this.listGenres.add(i)}e>-1&&this.listGenres.tweenToItem(e,.5)}},{key:"chooseItemShop",value:function(e){KeyBoard.instance().hide(),jC.instance().addPlaylistDetail(e.id)}},{key:"buyItemShop",value:function(e){jC.instance().buyItem(e)}},{key:"destroy",value:function(){LogConsole.log("destroy - ShopSortPlayList"),this.removeEvent(),this.bg.destroy(),this.header.destroy(),this.menu.destroy(),this.txtSearch.destroy(),this.btnCloseTextSearch.destroy(),this.listGenres.removeAll(),this.listGenres.destroy(),this.scroll.destroy(),this.removeAllItem(),jC.instance().removePlaylistDetail(),jC.instance().removePopupBuy(),jC.instance().removePopupMoney(),Ab(Lb(t.prototype),"destroy",this).call(this)}}])&&Tb(n.prototype,i),o&&Tb(n,o),t}();function Mb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Nb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putInt("resource_package_id",e),t}}],(n=null)&&Mb(t.prototype,n),i&&Mb(t,i),e}();function Bb(e){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ub(e){return(Ub=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fb(e,t){return(Fb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Hb=function(e){function t(e,n,i){var o,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(o=!(s=Ub(t).call(this,game,null))||"object"!==Bb(s)&&"function"!=typeof s?Zb(a):s).event={exit:new Phaser.Signal},o.positionShop=oe.instance().positionShop,o.data=e,o.bg=new Do,o.bg.y=96,o.addChild(o.bg),o.icon=new Phaser.Sprite(game,0,0,n),o.icon.smoothed=!0,o.icon.animations.pause=!0,o.icon.animations.add("shop"+n),o.icon.animations.play("shop"+n,30,!0),o.icon.width=2*o.icon.width,o.icon.height=2*o.icon.height,o.icon.x=(o.bg.width-o.icon.width)/2,o.icon.y=(200*oe.instance().scale-o.icon.height)/2,o.addChild(o.icon),o.txtName=new Qt(o.positionShop.popup_confirm_txt_name,e.getUtfString("name")),o.txtName.setTextBounds(0,0,o.bg.width,64),o.addChild(o.txtName),o.txtPrice=new Qt(o.positionShop.popup_confirm_txt_price,e.getInt("quantity")),o.txtPrice.setTextBounds(0,0,o.bg.width,48),o.addChild(o.txtPrice),o.txtDes=new Qt(o.positionShop.popup_confirm_txt_des,de.instance().getData("147")),o.txtDes.setTextBounds(0,0,o.bg.width,91),o.addChild(o.txtDes),o.btnThoat=new qn(o.positionShop.popup_confirm_button_thoat,de.instance().getData("9"),o.chooseExit,Zb(Zb(o))),o.addChild(o.btnThoat),o.btnBuy=i?new qn(o.positionShop.popup_confirm_button_mua_diamond,e.getInt("price"),o.chooseBuyDiamond,Zb(Zb(o))):new qn(o.positionShop.popup_confirm_button_mua,e.getInt("price")+de.instance().getData("148"),o.chooseBuy,Zb(Zb(o))),o.addChild(o.btnBuy),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fb(e,t)}(t,Je),n=t,(i=[{key:"chooseExit",value:function(){this.event.exit.dispatch()}},{key:"chooseBuyDiamond",value:function(){this.btnBuy.inputEnabled=!1,dV.instance().sendData(kt.RESOURCE_BUY_SUPPORT_ITEM_REQUEST,Nb.begin(this.data.getInt("id"))),this.event.exit.dispatch()}}])&&jb(n.prototype,i),o&&jb(n,o),t}();function Vb(e){return(Vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wb(e){return(Wb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qb(e,t){return(qb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var zb=function(e){function t(e,n,i){var o,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(o=!(s=Wb(t).call(this,game,null))||"object"!==Vb(s)&&"function"!=typeof s?Kb(a):s).event={exit:new Phaser.Signal},o.bg=new Phaser.Button(game,0,0,"screen-dim"),o.addChild(o.bg),o.popup=new Hb(e,n,i),o.popup.event.exit.add(o.chooseExit,Kb(Kb(o))),o.popup.x=35*oe.instance().scale,o.popup.y=game.height,o.addChild(o.popup),o.tweenItemPopup(o.popup,275*oe.instance().scale),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qb(e,t)}(t,Je),n=t,(i=[{key:"chooseExit",value:function(){this.event.exit.dispatch()}}])&&Qb(n.prototype,i),o&&Qb(n,o),t}();function Yb(e){return(Yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jb(e,t){return!t||"object"!==Yb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $b(e,t,n){return($b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=e_(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function e_(e){return(e_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t_(e,t){return(t_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var n_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Jb(this,e_(t).call(this,game))).quest=e,n.positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),n.dailyRewardConfig=JSON.parse(game.cache.getText("dailyRewardConfig")),n.eventInput={claim:new Phaser.Signal},n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&t_(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){var e=this;this.screenDim,this.addScreenDim(),this.headerResource,this.addHeaderResource(),this.popup,this.addPopup(),He.instance().logEvent(He.Popup_Quest),this.timeoutPopup=setTimeout(function(){e.makeTweenPopup()},1e3)}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.addChild(this.screenDim)}},{key:"addHeaderResource",value:function(){this.headerResource=new Phaser.Group(game,0,0),this.addChild(this.headerResource),this.txtGem,this.txtTicket,this.txtMic,this.tabGemHeader,this.tabTicketHeader,this.tabMicHeader,this.addTabGemHeader(this.dailyRewardConfig.header),this.addTabTicketHeader(this.dailyRewardConfig.header),this.addTabMicHeader(this.dailyRewardConfig.header)}},{key:"addTabGemHeader",value:function(e){this.tabGemHeader=new Phaser.Sprite(game,e.tabGem.x*window.GameConfig.RESIZE,e.tabGem.y*window.GameConfig.RESIZE,e.tabGem.nameAtlas,e.tabGem.nameSprite);var t=this.addGem(this.dailyRewardConfig.header.gem);this.txtGem=this.addTxtGem(this.dailyRewardConfig.header.txtResource);var n=t.width+this.txtGem.width;this.txtGem.x=(this.tabGemHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabGemHeader.width-n)/2+this.txtGem.width+10*window.GameConfig.RESIZE,this.tabGemHeader.addChild(t),this.tabGemHeader.addChild(this.txtGem),this.headerResource.addChild(this.tabGemHeader)}},{key:"addGem",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtGem",value:function(e){return"DIAMOND"==this.quest.reward_type?new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value-this.quest.reward,e.configs):new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,e.configs)}},{key:"addTabTicketHeader",value:function(e){this.tabTicketHeader=new Phaser.Sprite(game,e.tabTicket.x*window.GameConfig.RESIZE,e.tabTicket.y*window.GameConfig.RESIZE,e.tabTicket.nameAtlas,e.tabTicket.nameSprite);var t=this.addTicket(this.dailyRewardConfig.header.ticket);this.txtTicket=this.addTxtTicket(this.dailyRewardConfig.header.txtResource);var n=t.width+this.txtTicket.width;this.txtTicket.x=(this.tabTicketHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabTicketHeader.width-n)/2+this.txtTicket.width+10*window.GameConfig.RESIZE,this.tabTicketHeader.addChild(t),this.tabTicketHeader.addChild(this.txtTicket),this.headerResource.addChild(this.tabTicketHeader)}},{key:"addTicket",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtTicket",value:function(e){return"TICKET"==this.quest.reward_type?new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("ticket").value-this.quest.reward,e.configs):new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("ticket").value,e.configs)}},{key:"addTabMicHeader",value:function(e){this.tabMicHeader=new Phaser.Sprite(game,e.tabMic.x*window.GameConfig.RESIZE,e.tabMic.y*window.GameConfig.RESIZE,e.tabMic.nameAtlas,e.tabMic.nameSprite);var t=this.addMic(this.dailyRewardConfig.header.micro);this.txtMic=this.addTxtMic(this.dailyRewardConfig.header.txtResource);var n=t.width+this.txtMic.width;this.txtMic.x=(this.tabMicHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabMicHeader.width-n)/2+this.txtMic.width+10*window.GameConfig.RESIZE,this.tabMicHeader.addChild(t),this.tabMicHeader.addChild(this.txtMic),this.headerResource.addChild(this.tabMicHeader)}},{key:"addMic",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtMic",value:function(e){return"SUPPORT_ITEM"==this.quest.reward_type?new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("support_item").value-this.quest.reward,e.configs):new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("support_item").value,e.configs)}},{key:"addPopup",value:function(){this.txtPopup,this.rewardClaimed,this.txtQuestReward,this.btnClaim,this.popup=new Do,this.popup.x=35*window.GameConfig.RESIZE,this.popup.y=1140*window.GameConfig.RESIZE,this.popup.setHeight(400*window.GameConfig.RESIZE),this.addTxtPopup(),this.addRewardClaimed(),this.addTxtQuestReward(),this.addBtnClaim(),this.addChild(this.popup)}},{key:"addTxtPopup",value:function(){this.txtPopup=new Phaser.Text(game,this.positionQAndAConfig.txtPopupClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.txtPopupClaim.y*window.GameConfig.RESIZE,de.instance().getData("272"),this.positionQAndAConfig.txtPopupClaim.configs),this.txtPopup.anchor.set(.5,0),this.popup.addChild(this.txtPopup)}},{key:"addRewardClaimed",value:function(){if(this.rewardClaimed=new Phaser.Text(game,this.positionQAndAConfig.rewardClaimed.x*window.GameConfig.RESIZE,this.positionQAndAConfig.rewardClaimed.y*window.GameConfig.RESIZE,this.quest.reward,this.positionQAndAConfig.rewardClaimed.configs),"DIAMOND"==this.quest.reward_type)(e=new Phaser.Sprite(game,this.positionQAndAConfig.gemClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.gemClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.gemClaim.nameAtlas,this.positionQAndAConfig.gemClaim.nameSprite)).scale.set(1.2);else if("TICKET"==this.quest.reward_type){(e=new Phaser.Sprite(game,this.positionQAndAConfig.ticketClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.ticketClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.ticketClaim.nameAtlas,this.positionQAndAConfig.ticketClaim.nameSprite)).scale.set(1.2)}else{var e;(e=new Phaser.Sprite(game,this.positionQAndAConfig.sptItemClaim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.sptItemClaim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.sptItemClaim.nameAtlas,this.positionQAndAConfig.sptItemClaim.nameSprite)).scale.set(1.2)}var t=this.rewardClaimed.width+e.width;this.rewardClaimed.x=(570*window.GameConfig.RESIZE-t)/2-5*window.GameConfig.RESIZE,e.x=(570*window.GameConfig.RESIZE-t)/2+this.rewardClaimed.width+10*window.GameConfig.RESIZE,this.popup.addChild(this.rewardClaimed),this.popup.addChild(e)}},{key:"addTxtQuestReward",value:function(){this.txtQuestReward=new Phaser.Text(game,this.positionQAndAConfig.questReward.x*window.GameConfig.RESIZE,this.positionQAndAConfig.questReward.y*window.GameConfig.RESIZE,this.quest.quest,this.positionQAndAConfig.questReward.configs),this.txtQuestReward.anchor.set(.5,0),this.popup.addChild(this.txtQuestReward)}},{key:"addBtnClaim",value:function(){var e=this;this.btnClaim=new Phaser.Sprite(game,285*window.GameConfig.RESIZE,295*window.GameConfig.RESIZE,"questAndAchieveSprites","Button_Nhan_popup"),this.btnClaim.anchor.set(.5,0);var t=new Phaser.Text(game,0,27*window.GameConfig.RESIZE,de.instance().getData("189"),{font:"GilroyBold",fill:"#ffffff",align:"center",fontSize:30});t.anchor.set(.5,0),this.btnClaim.addChild(t),this.btnClaim.inputEnabled=!0,this.btnClaim.events.onInputUp.add(function(){e.btnClaim.inputEnabled=!1,be.instance().playSound(be.buttonclick);var t={x:0,y:0};"DIAMOND"==e.quest.reward_type?(t.x=351,t.y=55):"TICKET"==e.quest.reward_type?(t.x=529,t.y=55):(t.x=164,t.y=55),jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,{type:e.quest.reward_type,reward:e.quest.reward,finishPoint:t}),e.timeUpdateRs=game.time.events.add(2*Phaser.Timer.SECOND,function(){e.updateVariableResource(e.quest)},e),jC.instance().animClaimReward.event.tweenDoneAll.add(e.onClaimDone,e)},this),this.popup.addChild(this.btnClaim)}},{key:"updateVariableResource",value:function(e){var t=this;if("DIAMOND"==e.reward_type){var n=game.add.tween(this.txtGem).to({text:dV.instance().dataMySeft.diamond},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.txtGem.text=parseInt(t.txtGem.text)},this)}else if("TICKET"==e.reward_type){var i=game.add.tween(this.txtTicket).to({text:dV.instance().dataMySeft.ticket},300,"Linear",!1);i.start(),i.onUpdateCallback(function(){t.txtTicket.text=parseInt(t.txtTicket.text)},this)}else if("SUPPORT_ITEM"==e.reward_type){var o=game.add.tween(this.txtMic).to({text:dV.instance().dataMySeft.support_item},300,"Linear",!1);o.start(),o.onUpdateCallback(function(){t.txtMic.text=parseInt(t.txtMic.text)},this)}}},{key:"onClaimDone",value:function(){var e=this,t=game.add.tween(this.popup).to({y:-430*window.GameConfig.RESIZE},400,Phaser.Easing.Linear.Out,!1);t.start(),t.onComplete.add(function(){e.destroy()},this)}},{key:"makeTweenPopup",value:function(){be.instance().playSound(be.popupfinishquest),game.add.tween(this.popup).to({y:(game.height-763)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Elastic.Out,!1).start()}},{key:"onClose",value:function(){var e=this,t=game.add.tween(this.popup).to({y:-430*window.GameConfig.RESIZE},200,Phaser.Easing.Linear.Out,!1);t.start(),t.onComplete.add(function(){e.destroy()},this),this.popup.event.close.remove(this.onClose,this)}},{key:"destroy",value:function(){if(game.time.events.remove(this.timeUpdateRs),null!==this.children){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}$b(e_(t.prototype),"destroy",this).call(this)}}])&&Xb(n.prototype,i),o&&Xb(n,o),t}();function i_(e){return(i_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a_(e){return(a_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s_(e,t){return(s_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l_=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=a_(t).call(this,game,null))||"object"!==i_(o)&&"function"!=typeof o?r_(i):o).event={complete:new Phaser.Signal},n.timerToCountTime=null,n.graphics=game.add.graphics(0,0),n.graphics.beginFill(0,.8),n.graphics.drawRect(0,0,game.width,60*oe.instance().scale),n.graphics.endFill(),n.addChild(n.graphics),n.txtContent=new Qt({x:0,y:0,style:{fontSize:26*oe.instance().scale}},e),n.addChild(n.txtContent),n.txtContent.x=game.width,n.txtContent.y=15,n.timerToCountTime=n.game.time.create(!0),n.timerToCountTime.loop(20,n.onTimerToCountTime,r_(r_(n))),n.timerToCountTime.start(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s_(e,t)}(t,Je),n=t,(i=[{key:"onTimerToCountTime",value:function(){this.txtContent.x-=3,this.txtContent.x<-this.txtContent.width&&(this.timerToCountTime.stop(),this.event.complete.dispatch())}},{key:"destroyTime",value:function(){null!==this.timerToCountTime&&(this.timerToCountTime.stop(),this.timerToCountTime.destroy())}},{key:"destroy",value:function(){this.graphics.clear(),this.destroyTime(),this.removeAllItem()}}])&&o_(n.prototype,i),o&&o_(n,o),t}();function c_(e){return(c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u_(e,t){return!t||"object"!==c_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d_(e,t,n){return(d_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f_(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f_(e){return(f_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p_(e,t){return(p_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u_(this,f_(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p_(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.eventBack=new Phaser.Signal,this.positionShop=oe.instance().positionDetailPlaylist,this.bg=new Bt(this.positionShop.sort_play_list_bg_top_menu),this.addChild(this.bg),this.btnBack=new _n(this.positionShop.sort_play_list_bg_back_top_menu,this.chooseBack,this),this.addChild(this.btnBack),this.btnDiamond=new qn(this.positionShop.sort_play_list_bg_diamond_top_menu,dV.instance().dataMySeft.diamond),this.addChild(this.btnDiamond),Qe.instance().event.backButton.add(this.chooseBack,this)}},{key:"chooseBack",value:function(){LogConsole.log("chooseBack"),this.dispatchEventBack()}},{key:"addEventBack",value:function(e,t){this.eventBack.add(e,t)}},{key:"removeEventBack",value:function(e,t){this.eventBack.remove(e,t)}},{key:"dispatchEventBack",value:function(){this.eventBack.dispatch()}},{key:"destroy",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this),d_(f_(t.prototype),"destroy",this).call(this)}}])&&h_(n.prototype,i),o&&h_(n,o),t}();function y_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putInt("playlist_id",e),t}}],(n=null)&&y_(t.prototype,n),i&&y_(t,i),e}();var v_=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.title="",this.author="",this.fileName="",this.listenLink="",this.singer="",this.song="",this.thumb="",this.song_links=[],this.playlist_name=""};function w_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"genres",get:function(){return"genres"}},{key:"parent",get:function(){return"parent"}},{key:"code",get:function(){return"code"}},{key:"genre",get:function(){return"genre"}},{key:"number_player",get:function(){return"number_player"}},{key:"id",get:function(){return"id"}},{key:"priority",get:function(){return"priority"}},{key:"status",get:function(){return"status"}},{key:"user_level_required",get:function(){return"user_level_required"}},{key:"bet_reward",get:function(){return"bet_reward"}},{key:"bet_place",get:function(){return"bet_place"}},{key:"genre_id",get:function(){return"genre_id"}},{key:"bets",get:function(){return"bets"}},{key:"playlists",get:function(){return"playlists"}},{key:"thumb",get:function(){return"thumb"}},{key:"price",get:function(){return"price"}},{key:"is_general",get:function(){return"is_general"}},{key:"name",get:function(){return"name"}},{key:"questions",get:function(){return"questions"}},{key:"vip",get:function(){return"vip"}},{key:"is_default",get:function(){return"is_default"}},{key:"country_id",get:function(){return"country_id"}},{key:"bet_id",get:function(){return"bet_id"}},{key:"online_mode_loaded",get:function(){return"online_mode_loaded"}},{key:"genres_user_count",get:function(){return"genres_user_count"}},{key:"purchased",get:function(){return"purchased"}},{key:"created",get:function(){return"created"}},{key:"is_owner",get:function(){return"is_owner"}},{key:"is_highlight",get:function(){return"is_highlight"}},{key:"is_solo_mode",get:function(){return"is_solo_mode"}},{key:"updated",get:function(){return"updated"}},{key:"user_id",get:function(){return"user_id"}},{key:"user_name",get:function(){return"user_name"}},{key:"avatar",get:function(){return"avatar"}},{key:"file_path",get:function(){return"file_path"}},{key:"question_type",get:function(){return"question_type"}},{key:"title",get:function(){return"title"}},{key:"correct_answer",get:function(){return"correct_answer"}},{key:"answer1",get:function(){return"answer1"}},{key:"answer2",get:function(){return"answer2"}},{key:"answer3",get:function(){return"answer3"}},{key:"answer4",get:function(){return"answer4"}},{key:"question_index",get:function(){return"question_index"}},{key:"streak",get:function(){return"streak"}},{key:"score",get:function(){return"score"}},{key:"players",get:function(){return"players"}},{key:"region",get:function(){return"region"}},{key:"diamond_change",get:function(){return"diamond_change"}},{key:"exp_score",get:function(){return"exp_score"}},{key:"song",get:function(){return"song"}},{key:"singer",get:function(){return"singer"}},{key:"count_down_time",get:function(){return"count_down_time"}},{key:"album",get:function(){return"album"}},{key:"is_correct_answer",get:function(){return"is_correct_answer"}},{key:"user",get:function(){return"user"}}],(n=null)&&w_(t.prototype,n),i&&w_(t,i),e}();function __(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var S_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){for(var n=new bc,i=e.getSFSArray(xt.songs),o=0;o<i.size();o++){var a=i.getSFSObject(o),s=this.getSongDetail(a);n.arrSong.push(s)}return n}},{key:"getPlayList",value:function(e){var t=new bc;return t.is_highlight=e.getInt(xt.is_highlight),t.thumb=e.getUtfString(xt.thumb),t.created=e.getLong(xt.created),t.is_owner=e.getInt(xt.is_owner),t.is_default=e.getInt(xt.is_default),t.genre_id=e.getInt(xt.genre_id),t.purchased=e.getInt(xt.purchased),t.songs=e.getUtfString(xt.songs),t.price=e.getInt(xt.price),t.is_general=e.getInt(xt.is_general),t.name=e.getUtfString(xt.name),t.id=e.getInt(xt.id),t.vip=e.getInt(xt.vip),t.is_solo_mode=e.getInt(xt.is_solo_mode),t.updated=e.getLong(xt.updated),t.country_id=e.getInt(xt.country_id),e.containsKey(xt.description)&&(t.description=e.getUtfString(xt.description)),e.containsKey(b_.questions)&&(t.questions=e.getUtfString(b_.questions)),t}},{key:"getUserPlayList",value:function(e){var t=new vt;return t.user_id=e.getInt(xt.user_id),t.level=e.getInt(xt.level),t.playlist_id=e.getInt(xt.playlist_id),t.exp_score=e.getInt(xt.exp_score),t.created=e.getLong(xt.created),t.active=e.getInt(xt.active),t.id=e.getLong(xt.id),t.current_level_score=e.getInt(xt.current_level_score),t.next_level_score=e.getInt(xt.next_level_score),t.updated=e.getLong(xt.updated),t}},{key:"getSongDetail",value:function(e){var t=new v_;if(t.id=e.getLong(xt.id),t.title=e.getUtfString(xt.title),e.getSFSObject(xt.singer).containsKey(xt.avatar)&&(t.thumb=e.getSFSObject(xt.singer).getUtfString(xt.avatar)),t.singer=e.getSFSObject(xt.singer).getUtfString(xt.name),e.containsKey(xt.title)&&(t.song=e.getUtfString(xt.title)),e.containsKey(xt.song_links))for(var n=0;n<e.getSFSArray(xt.song_links).size();n++){var i={},o=e.getSFSArray(xt.song_links).getSFSObject(n);i.link_type=o.getUtfString(xt.link_type),i.link=o.getUtfString(xt.link),t.song_links.push(i)}return t}}],(n=null)&&__(t.prototype,n),i&&__(t,i),e}();function E_(e){return(E_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k_(e,t){return!t||"object"!==E_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P_(e){return(P_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O_(e,t){return(O_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k_(this,P_(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O_(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.data=new v_,this.positionShop=oe.instance().positionDetailPlaylist,this.bg=new Phaser.Button(game,0,0,"bg-playlist",this.chooseDetail,this),this.bg.alpha=0,this.bg.width=this.width,this.bg.height=this.height,this.addChild(this.bg),this.line=new Bt(this.positionShop.detail_playlist_item_line),this.line.width=570*oe.instance().scale,this.addChild(this.line),this.txtNameSong=new Qt(this.positionShop.detail_playlist_item_name_song),this.txtNameSong.setTextBounds(0,0,551*oe.instance().scale,59*oe.instance().scale),this.addChild(this.txtNameSong),this.txtNameCaSi=new Qt(this.positionShop.detail_playlist_item_name_casi),this.txtNameCaSi.setTextBounds(0,0,551*oe.instance().scale,31*oe.instance().scale),this.addChild(this.txtNameCaSi),this.btnDetailSong=new _n(this.positionShop.detail_playlist_btn_detail_song,this.chooseDetail,this),this.addChild(this.btnDetailSong)}},{key:"chooseDetail",value:function(){LogConsole.log("chooseDetail"),jC.instance().addDetailSong(this.data)}},{key:"hideLine",value:function(){this.line.visible=!1}},{key:"setData",value:function(e){this.data=e,console.log(e),this.txtNameSong.text=this.data.title,this.txtNameCaSi.text=this.data.singer}},{key:"width",get:function(){return 586*oe.instance().scale}},{key:"height",get:function(){return 115*oe.instance().scale}}])&&C_(n.prototype,i),o&&C_(n,o),t}();function x_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){var n=new SFS2X.SFSObject;return n.putInt("playlist_id",e),n.putInt("active",t),n}}],(n=null)&&x_(t.prototype,n),i&&x_(t,i),e}();function I_(e){return(I_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function L_(e,t){return!t||"object"!==I_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D_(e,t,n){return(D_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G_(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function G_(e){return(G_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M_(e,t){return(M_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N_=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=L_(this,G_(t).call(this,game,null)),ht.instance().showLoading(),n.playListDetail=new bc,n.playlist_id=e,n.eventBack=new Phaser.Signal,n.arrResource=[{type:"text",link:"img/config/positionDetailPlaylist.json",key:"positionDetailPlaylist"},{type:"atlas",link:"img/atlas/detailplaylist.png",key:"detailplaylist",linkJson:"img/atlas/detailplaylist.json"}],n.loadResource(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M_(e,t)}(t,Em),n=t,(i=[{key:"loadFileComplete",value:function(){D_(G_(t.prototype),"loadFileComplete",this).call(this),this.buildScreen()}},{key:"buildScreen",value:function(){this.positionShop=oe.instance().positionDetailPlaylist,this.bg=new Phaser.Button(game,0,0,"bg-playlist"),this.addChild(this.bg),this.popupBuy=null,this.popupMoney=null,this.header=new g_,this.header.addEventBack(this.chooseBack,this),this.addChild(this.header),this.ava=new ec,this.ava.setSize(163*oe.instance().scale,163*oe.instance().scale),this.ava.x=234*oe.instance().scale,this.ava.y=148*oe.instance().scale,this.addChild(this.ava),this.vipIcon=new Phaser.Sprite(game,0,133,"vipSource","Lable_Vip"),this.vipIcon.visible=!1,this.ava.addChild(this.vipIcon),this.namePlayList=new Qt(this.positionShop.detail_playlist_name,""),this.namePlayList.setTextBounds(0,0,game.width-47*oe.instance().scale,41*oe.instance().scale),this.addChild(this.namePlayList),this.detailPlayList=new Qt(this.positionShop.detail_playlist_detail,""),this.detailPlayList.setTextBounds(0,0,533*oe.instance().scale,118*oe.instance().scale),this.addChild(this.detailPlayList),this.btnBuy=new qn(this.positionShop.playlist_button_buy,"0",this.chooseBuy,this),this.btnBuy.visible=!1,this.btnBuy.x=(game.width-this.btnBuy.width)/2,this.addChild(this.btnBuy),this.btnKichHoat=new qn(this.positionShop.detail_button_kichhoat,"aaaaaaaa",this.chooseKickHoat,this),this.btnKichHoat.visible=!1,this.addChild(this.btnKichHoat),this.btnBuy.y=this.positionShop.detail_button_kichhoat.y*oe.instance().scale,this.txtBaiHat=new Qt(this.positionShop.detail_playlist_lb_baihat,de.instance().getData("138")),this.txtBaiHat.setTextBounds(0,0,207*oe.instance().scale,35*oe.instance().scale),this.addChild(this.txtBaiHat),this.levelPlayList=new dc,this.levelPlayList.x=this.ava.x+(this.ava.width-this.levelPlayList.width)/2,this.levelPlayList.y=373*oe.instance().scale,this.addChild(this.levelPlayList),this.txtCountBaiHat=new Qt(this.positionShop.detail_playlist_lb_count_baihat,"0"),this.txtCountBaiHat.setTextBounds(0,0,189*oe.instance().scale,31*oe.instance().scale),this.addChild(this.txtCountBaiHat);var e=new Phaser.Group(game,0,0,null);this.listSong=new Ia(game,e,new Phaser.Rectangle(0,0,586*oe.instance().scale,420*oe.instance().scale),{direction:"y",padding:0,searchForClicks:!0}),e.x=35*oe.instance().scale,e.y=708*oe.instance().scale,this.addChild(e),this.line=new Bt(this.positionShop.detail_playlist_item_line),this.line.width=570*oe.instance().scale,this.addChild(this.line),this.activeBaiHat=new Bt(this.positionShop.detail_playlist_active_baihat),this.addChild(this.activeBaiHat),this.line.y=this.activeBaiHat.y+3,this.line.x=this.activeBaiHat.x,this.addEvent()}},{key:"addEventBack",value:function(e,t){this.eventBack.add(e,t)}},{key:"removeEventBack",value:function(e,t){this.eventBack.remove(e,t)}},{key:"dispatchEventBack",value:function(){this.eventBack.dispatch()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().sendData(kt.PLAYLIST_DETAIL_REQUEST,m_.begin(this.playlist_id)),ak.instance().event.buy_playlist.add(this.sendGetDataPlaylist,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),ak.instance().event.buy_playlist.remove(this.sendGetDataPlaylist,this)}},{key:"sendGetDataPlaylist",value:function(){console.log("sendGetDataPlaylist------------"),ht.instance().showLoading(),_t.instance().event.get_data_playlist_complete.add(this.getDataPlaylistComplete,this),_t.instance().getPlaylistById(this.playlist_id,null,dV.instance().dataMySeft.user_id)}},{key:"getDataPlaylistComplete",value:function(e){console.log("getDataPlaylistComplete"),_t.instance().event.get_data_playlist_complete.remove(this.getDataPlaylistComplete,this),console.log(e),this.playListDetail.is_highlight=e.is_highlight,this.playListDetail.used_times=e.used_times,this.playListDetail.thumb=e.thumb,this.playListDetail.created=e.created,this.playListDetail.is_owner=e.is_owner,this.playListDetail.description=e.description,this.playListDetail.active=e.active,this.playListDetail.is_default=e.is_default,this.playListDetail.genre_id=e.genre_id,this.playListDetail.price=e.price,this.playListDetail.is_general=e.is_general,this.playListDetail.name=e.name,this.playListDetail.purchased_count=e.purchased_count,this.playListDetail.id=e.id,this.playListDetail.vip=e.vip,this.playListDetail.is_solo_mode=e.is_solo_mode,this.playListDetail.updated=e.updated,this.playListDetail.country_id=e.country_id,this.playListDetail.region=e.region,this.playListDetail.user=e.user,this.buildDataDetail()}},{key:"getData",value:function(e){switch(e.cmd){case kt.PLAYLIST_DETAIL_RESPONSE:LogConsole.log("PLAYLIST_DETAIL_RESPONSE : "+e.params.getDump()),"OK"===e.params.getUtfString(xt.status)?(this.playListDetail=S_.begin(e.params,this.playlist_id),this.sendGetDataPlaylist()):(ht.instance().hideLoading(),this.chooseBack());break;case kt.PLAYLIST_CHANGE_ACTIVE_RESPONSE:e.params.getUtfString(xt.status),ht.instance().hideLoading()}}},{key:"buildDataDetail",value:function(){console.log(this.playListDetail),this.ava.beginLoad(this.playListDetail.thumb,1),this.namePlayList.text=this.playListDetail.name,this.btnBuy.setText(this.playListDetail.price),this.txtCountBaiHat.text=this.playListDetail.arrSong.length,this.detailPlayList.text=this.playListDetail.description,this.levelPlayList.setData(this.playListDetail.user),this.levelPlayList.x=this.ava.x+(this.ava.width-this.levelPlayList.width)/2,this.listSong.removeAll(),this.listSong.reset();for(var e=0;e<this.playListDetail.arrSong.length;e++){var t=new R_;0===e&&t.hideLine(),this.playListDetail.arrSong[e].playlist_name=this.playListDetail.name,t.setData(this.playListDetail.arrSong[e]),this.listSong.add(t)}this.playListDetail.user.user_id==dV.instance().dataMySeft.user_id?(this.btnBuy.visible=!1,this.btnKichHoat.visible=!0,0===this.playListDetail.user.active?this.btnKichHoat.setText(de.instance().getData("139")):this.btnKichHoat.setText(de.instance().getData("140"))):(this.btnBuy.visible=!0,this.btnKichHoat.visible=!1),!0===this.playListDetail.vip&&(this.vipIcon.visible=!0),ht.instance().hideLoading()}},{key:"chooseBuy",value:function(){jC.instance().buyItem(this.playListDetail)}},{key:"chooseKickHoat",value:function(){var e=0;0===this.playListDetail.user.active?(e=1,this.playListDetail.user.active=1):(e=0,this.playListDetail.user.active=0),0===e?this.btnKichHoat.setText(de.instance().getData("139")):this.btnKichHoat.setText(de.instance().getData("140")),dV.instance().sendData(kt.PLAYLIST_CHANGE_ACTIVE_REQUEST,T_.begin(this.playlist_id,e)),_t.instance().changeActivePlaylist(this.playlist_id,e),ht.instance().showLoading()}},{key:"chooseBack",value:function(){this.dispatchEventBack()}},{key:"destroy",value:function(){this.removeEvent(),oe.instance().positionDetailPlaylistData=null,this.listSong.removeAll(),this.listSong.destroy(),jC.instance().removePopupBuy(),jC.instance().removePopupMoney(),D_(G_(t.prototype),"destroy",this).call(this)}}])&&A_(n.prototype,i),o&&A_(n,o),t}();function B_(e){return(B_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function U_(e,t,n){return(U_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F_(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function F_(e){return(F_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z_(e,t){return(Z_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var V_=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=F_(t).call(this,game,null))||"object"!==B_(i)&&"function"!=typeof i?H_(n):i).event={close:new Phaser.Signal},e.tweenAlphaText=null,e.level=o,e.dialog=new ro,e.dialog.event.close.add(e.chooseClose,H_(H_(e))),e.dialog.setHeight(420*oe.instance().scale),e.addChild(e.dialog),e.levelUp=new Phaser.Sprite(game,0,0,"LevelUp"),e.levelUp.width=444*oe.instance().scale,e.levelUp.height=270.47*oe.instance().scale,e.levelUp.x=62*oe.instance().scale,e.levelUp.y=29*oe.instance().scale,e.levelUp.animations.add("playLevelUp"),e.levelUp.animations.play("playLevelUp",30,!1),e.addChild(e.levelUp);return e.txtLeveUp=new Qt({x:0,y:0,style:{fontSize:32,wordWrap:!0,wordWrapWidth:388,align:"center",boundsAlignH:"center",boundsAlignV:"middle",fill:"#000000",font:"GilroyBold"}},de.instance().getData("120")+" "+o),e.txtLeveUp.setTextBounds(0,0,568*.7*oe.instance().scale,118*oe.instance().scale),e.txtLeveUp.lineSpacing=12*oe.instance().scale,e.txtLeveUp.y=296*oe.instance().scale,e.txtLeveUp.x=(568-568*.7)*oe.instance().scale/2,e.addChild(e.txtLeveUp),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z_(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseClose,this)}},{key:"removeEvent",value:function(){this.levelUp.animations.stop(),Qe.instance().event.backButton.remove(this.chooseClose,this)}},{key:"animationUpdate",value:function(){console.log("animationUpdate: "+this.levelUp.animations.frame),59===this.levelUp.animations.frame&&this.levelUp.animations.stop()}},{key:"chooseClose",value:function(){this.event.close.dispatch()}},{key:"setData",value:function(e){this.level=e,this.txtLeveUp.text=de.instance().getData("120")+" "+e,this.levelUp.animations.play("playLevelUp",30,!0)}},{key:"destroy",value:function(){this.removeEvent(),null!==this.tweenAlphaText&&(this.tweenAlphaText.stop(),game.tweens.remove(this.tweenAlphaText),this.tweenAlphaText=null),U_(F_(t.prototype),"destroy",this).call(this)}}])&&j_(n.prototype,i),o&&j_(n,o),t}();function Q_(e){return(Q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function q_(e,t,n){return(q_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K_(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function K_(e){return(K_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z_(e,t){return(z_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var X_=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=K_(t).call(this,game,null))||"object"!==Q_(o)&&"function"!=typeof o?Y_(i):o).level_up=e,n.event={close:new Phaser.Signal},n.level=null,n.bg=new Phaser.Button(game,0,0,"screen-dim",n.closeLevelUp,Y_(Y_(n))),n.addChild(n.bg),n.level=new V_(n.level_up),n.level.event.close.add(n.closeLevelUp,Y_(Y_(n))),n.level.x=35*oe.instance().scale,n.addChild(n.level),n.level.y=game.height-89*oe.instance().scale,n.tweenItemPopup(n.level,385*oe.instance().scale),be.instance().playSound(be.popuplevelup),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z_(e,t)}(t,Je),n=t,(i=[{key:"closeLevelUp",value:function(){console.log("closeLevelUp---------"),this.event.close.dispatch()}},{key:"destroy",value:function(){q_(K_(t.prototype),"destroy",this).call(this)}}])&&W_(n.prototype,i),o&&W_(n,o),t}();function J_(e){return(J_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eS(e){return(eS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tS(e,t){return(tS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var iS=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=eS(t).call(this,game,null))||"object"!==J_(i)&&"function"!=typeof i?nS(n):i).event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.popup=new Kl,e.popup.setTextOk(de.instance().getData("102")),e.popup.setTextCancle(de.instance().getData("103")),e.popup.event.OK.add(e.chooseOk,nS(nS(e))),e.popup.event.CANCLE.add(e.chooseCancle,nS(nS(e))),e.popup.setHeight(580*oe.instance().scale),e.addChild(e.popup),e.dia=new Phaser.Sprite(game,0,0,"disconnect"),e.dia.width=228*oe.instance().scale,e.dia.height=228*oe.instance().scale,e.dia.x=172*oe.instance().scale,e.dia.y=70*oe.instance().scale,e.dia.smoothed=!0,e.dia.animations.pause=!0,e.anim=e.dia.animations.add("disconnect"),e.anim.enableUpdate=!0,e.addChild(e.dia),e.dia.animations.play("disconnect",30,!0);var o=new Qt(oe.instance().positionPopup.bad_connection_label_thongbao,de.instance().getData("101"));return o.setTextBounds(0,0,e.popup.width,30*oe.instance().scale),e.addChild(o),e.lbConfirm=new Qt(oe.instance().positionPopup.bad_connection_label_confirm,de.instance().getData("104")),e.lbConfirm.setTextBounds(0,0,e.popup.width,50*oe.instance().scale),e.addChild(e.lbConfirm),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tS(e,t)}(t,Je),n=t,(i=[{key:"setTextConfirm",value:function(e){this.lbConfirm.text=e}},{key:"setTextOk",value:function(e){this.popup.setTextOk(e)}},{key:"setTextCancle",value:function(e){this.popup.setTextCancle(e)}},{key:"chooseOk",value:function(){this.event.OK.dispatch()}},{key:"chooseCancle",value:function(){this.event.CANCLE.dispatch()}}])&&$_(n.prototype,i),o&&$_(n,o),t}();function oS(e){return(oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sS(e){return(sS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rS(e,t){return(rS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var cS=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=sS(t).call(this,game,null))||"object"!==oS(i)&&"function"!=typeof i?lS(n):i).event={OK:new Phaser.Signal,CANCLE:new Phaser.Signal},e.bg=new Phaser.Button(game,0,0,"screen-dim"),e.addChild(e.bg),e.popup=new iS,e.popup.event.OK.add(e.chooseOk,lS(lS(e))),e.popup.event.CANCLE.add(e.chooseCancle,lS(lS(e))),e.popup.x=35*oe.instance().scale,e.popup.y=game.height+237*oe.instance().scale,e.tweenItemPopup(e.popup,game.height-810*oe.instance().scale),e.addChild(e.popup),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rS(e,t)}(t,Je),n=t,(i=[{key:"setTextOk",value:function(e){this.popup.setTextOk(e)}},{key:"setTextCancle",value:function(e){this.popup.setTextCancle(e)}},{key:"setTextConfirm",value:function(e){this.popup.setTextConfirm(e)}},{key:"chooseOk",value:function(){this.event.OK.dispatch()}},{key:"chooseCancle",value:function(){this.event.CANCLE.dispatch()}}])&&aS(n.prototype,i),o&&aS(n,o),t}();function hS(e){return(hS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dS(e,t){return!t||"object"!==hS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fS(e){return(fS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pS(e,t){return(pS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gS=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=dS(this,fS(t).call(this,game,e,n,"settingSprites","Hoso_Box_Ten"))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),a.label=i,a.valueText=o,a.afterInit(),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pS(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){var e=Gl.formatName(this.valueText,21);this.valueText=e,this.labelTxt,this.valueTextTxt,this.addLabel(),this.addValueText()}},{key:"addLabel",value:function(){this.label=new Phaser.Text(game,this.positionSetting.setting_profile.lbl_box.x,this.positionSetting.setting_profile.lbl_box.y,this.label,this.positionSetting.setting_profile.lbl_box.style),this.addChild(this.label)}},{key:"addValueText",value:function(){this.valueTextTxt=new Phaser.Text(game,this.positionSetting.setting_profile.value_box.x,this.positionSetting.setting_profile.value_box.y,this.valueText,this.positionSetting.setting_profile.value_box.style),this.addChild(this.valueTextTxt)}}])&&uS(n.prototype,i),o&&uS(n,o),t}();function yS(e){return(yS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vS(e,t){return!t||"object"!==yS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wS(e){return(wS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bS(e,t){return(bS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _S=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=vS(this,wS(t).call(this,game))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),null!==dV.instance().socket.mySelf&&(e.name=dV.instance().dataMySeft.user_name),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bS(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.boxName,this.boxLocation,this.addBoxName(),this.addBoxLocation()}},{key:"addBoxName",value:function(){this.boxName=new gS(255*oe.instance().scale,169*oe.instance().scale,de.instance().getData("300"),this.name),this.addChild(this.boxName)}},{key:"addBoxLocation",value:function(){this.boxLocation=new gS(255*oe.instance().scale,255*oe.instance().scale,de.instance().getData("301"),"Việt Nam"),this.addChild(this.boxLocation)}}])&&mS(n.prototype,i),o&&mS(n,o),t}();function SS(e){return(SS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ES(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function CS(e,t){return!t||"object"!==SS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kS(e,t,n){return(kS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PS(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function PS(e){return(PS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OS(e,t){return(OS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RS=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=CS(this,PS(t).call(this,game))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.description=oe.instance().userDescription,e.event={changeDes:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OS(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.lbl,this.box,this.addLabel(),this.addBox()}},{key:"addLabel",value:function(){this.lbl=new Qt(this.positionSetting.setting_profile.lbl_des,de.instance().getData("302")),this.addChild(this.lbl)}},{key:"addBox",value:function(){this.box=new _n(this.positionSetting.setting_profile.box_des,this.onClickBox,this);var e=new Bt(this.positionSetting.setting_profile.icon_edit);this.box.addChild(e),this.desText=new Qt(this.positionSetting.setting_profile.txt_des,this.description),this.tick=new Bt(this.positionSetting.setting_profile.tick_des),this.box.addChild(this.tick),this.box.addChild(this.desText),this.addChild(this.box)}},{key:"onClickBox",value:function(){this.inputKeyboard(),this.tick.kill()}},{key:"inputKeyboard",value:function(){var e={maxLength:"",showTransparent:!0,placeholder:"Nhập trạng thái",isSearch:!1,typeInputText:"input",configText:{width:this.box.width-70,height:this.box.height-5,x:this.box.x,y:this.box.y}};Ir.instance().event.cancle.add(this.keyboardClose,this),Ir.instance().event.enter.add(this.keyboardDone,this),Ir.instance().event.submit.add(this.keyboardDone,this),Ir.instance().show(e),Ir.instance().setValue(this.description)}},{key:"keyboardClose",value:function(){Ir.instance().event.cancle.remove(this.keyboardClose,this),Ir.instance().event.enter.remove(this.keyboardDone,this),Ir.instance().event.submit.remove(this.keyboardDone,this),Ir.instance().hide(),this.box.revive()}},{key:"keyboardDone",value:function(){this.description=Ir.instance().getValue(),this.changeTxtBoxText(),this.sendDes(),this.keyboardClose()}},{key:"sendDes",value:function(){lu.instance().settingAccount(dV.instance().socket.mySelf.getVariable("user_id").value,dV.instance().dataMySeft.user_name,dV.instance().socket.mySelf.getVariable("gender").value,null,this.description),lu.instance().sendData(this.onSendSettingDone.bind(this))}},{key:"onSendSettingDone",value:function(e){if("ok"==e.code){Qe.instance().event.updateDescription.dispatch(e.data.description),this.description=e.data.description,this.desText.setText(this.description),this.tick.revive();var t=[];t.push(new SFS2X.SFSUserVariable("description",e.data.description)),dV.instance().socket.send(new SFS2X.SetUserVariablesRequest(t)),dV.instance().dataMySeft.setDescription(e.data.description)}}},{key:"changeTxtBoxText",value:function(){this.desText.setText(this.description)}},{key:"destroy",value:function(){for(Ir.instance().hide();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),kS(PS(t.prototype),"destroy",this).call(this)}}])&&ES(n.prototype,i),o&&ES(n,o),t}();function xS(e){return(xS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function IS(e,t){return!t||"object"!==xS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AS(e,t,n){return(AS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LS(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function LS(e){return(LS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DS(e,t){return(DS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var GS=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=IS(this,LS(t).call(this,game))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.event={reloadScreen:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DS(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.ava,this.frameAva,this.btnCamera,this.name,this.description,this.addAva(),this.addFrameAva(),this.addName(),this.addDescription(),this.addBtnCamera(),this.addEventExtension()}},{key:"addEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.add(this.onUpdateUserVars,this)}},{key:"removeEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.onUpdateUserVars,this)}},{key:"onUpdateUserVars",value:function(){this.urlAvatar!==dV.instance().dataMySeft.avatar&&this.event.reloadScreen.dispatch()}},{key:"addAva",value:function(){this.urlAvatar=dV.instance().dataMySeft.avatar,this.ava=new jr(this.positionSetting.setting_profile.ava.x*window.GameConfig.RESIZE,this.positionSetting.setting_profile.ava.y*window.GameConfig.RESIZE,"ava-default",dV.instance().dataMySeft.avatar,1),this.ava.sprite.scale.set(.85*window.GameConfig.RESIZE),this.ava.sprite.anchor.set(.5),this.addChild(this.ava.sprite);var e=new Phaser.Graphics(game,0,0);e.drawCircle(128*window.GameConfig.RESIZE,238*window.GameConfig.RESIZE,170*window.GameConfig.RESIZE),e.anchor.set(.5),this.ava.sprite.mask=e}},{key:"addName",value:function(){this.name=new _S,this.addChild(this.name)}},{key:"addDescription",value:function(){this.description=new RS,this.description.event.changeDes.add(this.changeDes,this),this.addChild(this.description)}},{key:"changeDes",value:function(){this.event.reloadScreen.dispatch()}},{key:"addFrameAva",value:function(){this.frameAva=new Bt(this.positionSetting.setting_profile.frame_ava),this.frameAva.anchor.set(.5),this.addChild(this.frameAva)}},{key:"addBtnCamera",value:function(){this.btnCamera=new _n(this.positionSetting.setting_profile.btn_camera,this.onClickBtnCam,this),this.btnCamera.anchor.set(.5),this.addChild(this.btnCamera)}},{key:"onClickBtnCam",value:function(){this.appendDOMFile()}},{key:"setStylesAvaField",value:function(){var e=game.canvas.getBoundingClientRect().width/game.width,t=game.canvas.getBoundingClientRect().height/game.height,n=(window.innerWidth-game.canvas.getBoundingClientRect().width)/2,i={top:game.canvas.getBoundingClientRect().top+150*oe.instance().scale*t+"px",left:n+250*oe.instance().scale*e+"px",width:300*oe.instance().scale*e+"px",height:85*oe.instance().scale*t+"px",position:"absolute","z-index":1};i["padding-left"]=10*oe.instance().scale*e+"px",i["padding-right"]=10*oe.instance().scale*e+"px",this.setStyleOnElement($("#avatarField"),i);var o={top:game.canvas.getBoundingClientRect().top+140*oe.instance().scale*t+"px",left:game.canvas.getBoundingClientRect().left+50*oe.instance().scale*e+"px",width:130*oe.instance().scale*e+"px",height:130*oe.instance().scale*t+"px",position:"absolute"};this.setStyleOnElement($("#preview"),o)}},{key:"setStyleOnElement",value:function(e,t){e.css(t)}},{key:"addFundametal",value:function(){this.bg=new _n({x:36,y:120,nameAtlas:"settingSprites",nameSprite:"Hoso_Box_Mota"},function(){},this),this.addChild(this.bg),this.btnSubmit=new _n({x:470,y:110,nameAtlas:"defaultSource",nameSprite:"Send_Icon"},this.onSubmit,this),this.bg.addChild(this.btnSubmit),this.btnCancle=new _n({x:570,y:-30,nameAtlas:"defaultSource",nameSprite:"Exit"},this.cancleBg,this),this.bg.addChild(this.btnCancle),this.addTick()}},{key:"addTick",value:function(){this.tick=new Bt(this.positionSetting.setting_account.tick_ava),this.tick.kill(),this.bg.addChild(this.tick)}},{key:"cancleBg",value:function(){this.closeDOM(),this.btnCancle.destroy(),this.btnSubmit.destroy(),this.bg.destroy()}},{key:"onSubmit",value:function(){this.avaRender=$("#getImageDataUrl").attr("src"),void 0!==this.avaRender&&(ht.instance().showLoading(),lu.instance().settingAccount(dV.instance().socket.mySelf.getVariable("user_id").value,dV.instance().dataMySeft.user_name,dV.instance().socket.mySelf.getVariable("gender").value,this.avaRender),lu.instance().sendData(this.onSendAvaDone.bind(this)))}},{key:"onSendAvaDone",value:function(e){if(console.log("CUONGCUONG"),console.log(e),"ok"==e.code){this.tick.revive();var t=[];t.push(new SFS2X.SFSUserVariable("avatar",e.data.avatar)),dV.instance().socket.send(new SFS2X.SetUserVariablesRequest(t)),ht.instance().hideLoading(),dV.instance().dataMySeft.setAvatar(e.data.avatar)}}},{key:"closeDOM",value:function(){$("#avatarField").remove(),$("#preview").remove()}},{key:"appendDOMFile",value:function(){this.addFundametal(),$("#game").append('<input type="file" id="avatarField">'),$("#game").append('<div id="preview"></div>'),this.setStylesAvaField(),$("#avatarField").change(function(){this.files[0].size>oe.instance().SIZE_AVA_UPLOAD?alert("photo file has too big size!! Pls choose another."):renderImage(this.files[0],function(e){$("#preview").html("<img id='getImageDataUrl' style=width:100px;height:100px src='"+e+"' />")})})}},{key:"destroy",value:function(){for(this.closeDOM(),this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),AS(LS(t.prototype),"destroy",this).call(this)}}])&&TS(n.prototype,i),o&&TS(n,o),t}();function MS(e){return(MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function BS(e,t){return!t||"object"!==MS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jS(e){return(jS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function US(e,t){return(US=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var FS=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=BS(this,jS(t).call(this,game,0,0,"bg-playlist"))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.signalInputX=new Phaser.Signal,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&US(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.addHeaderTab(this.positionSetting.header),this.addListSetting()}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.addButtonBack(e.btn_back),this.addTxtSetting(e.txt_setting_profile)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerTab.addChild(this.btnBack)}},{key:"onBack",value:function(){var e=this;be.instance().playSound(be.buttonclick),this.signalInputX.dispatch();var t=game.add.tween(this).to({x:640*window.GameConfig.RESIZE},200,"Linear",!1);t.start(),this.ava&&this.ava.closeDOM(),t.onComplete.add(function(){e.destroy()},this)}},{key:"addTxtSetting",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("299"),e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addListSetting",value:function(){this.ava,this.location,this.description,this.name,this.addAva()}},{key:"addAva",value:function(){this.ava=new GS,this.ava.event.reloadScreen.add(this.reloadScreen,this),this.addChild(this.ava)}},{key:"reloadScreen",value:function(){this.ava.destroy(),this.addAva()}},{key:"addBtnSave",value:function(){this.btnSave=new _n(this.positionSetting.setting_profile.btn_save,this.clickSave,this),this.btnSave.anchor.set(.5);var e=new Qt(this.positionSetting.setting_profile.txt_btn_save,this.positionSetting.setting_profile.txt_btn_save.text);e.anchor.set(.5),this.btnSave.addChild(e),this.addChild(this.btnSave)}},{key:"clickSave",value:function(){}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"destroy",value:function(){for(this.removeEventExtension(),this.ava&&this.ava.closeDOM();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&NS(n.prototype,i),o&&NS(n,o),t}();function ZS(e){return(ZS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function VS(e,t){return!t||"object"!==ZS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QS(e){return(QS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WS(e,t){return(WS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qS=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=VS(this,QS(t).call(this,game,0,0,"screen-dim2"))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),n.claimValues=e,n.getReward(),n.afterInit(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WS(e,t)}(t,Phaser.Button),n=t,a=[{key:"HEART",get:function(){return"HEART"}},{key:"DIAMOND",get:function(){return"DIAMOND"}},{key:"TICKET",get:function(){return"TICKET"}},{key:"SUPPORT_ITEM",get:function(){return"SUPPORT_ITEM"}}],(o=[{key:"getReward",value:function(){this.rewards=[],this.claimValues.diamond>0&&this.rewards.push({type:t.DIAMOND,reward:this.claimValues.diamond}),this.claimValues.heart>0&&this.rewards.push({type:t.HEART,reward:this.claimValues.heart}),this.claimValues.ticket>0&&this.rewards.push({type:t.TICKET,reward:this.claimValues.ticket}),this.claimValues.support_item>0&&this.rewards.push({type:t.SUPPORT_ITEM,reward:this.claimValues.support_item})}},{key:"afterInit",value:function(){this.addHeaderTab(this.positionSetting.header)}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.addButtonBack(e.btn_back),this.addTxtSetting(e.txt_giftcode)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.headerTab.addChild(this.btnBack)}},{key:"addTxtSetting",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.text,e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addGift",value:function(){var e=this.rewards.length;for(this.txtQuest.kill(),i=0;i<e;i++)this.addClaim(this.rewards[i].type,this.rewards[i].reward,i,e)}},{key:"addClaim",value:function(e,n,i,o){var a=this,s=this.addTabResource(this.positionSetting.header,e,n);this.addChild(s),this.timeTweenBox=game.time.events.add(3*Phaser.Timer.SECOND*i,function(){var i=game.add.tween(s).to({y:a.positionSetting.header.tab_resource.y},200,Phaser.Easing.Back.Out,!1);i.start(),i.onComplete.add(function(){var i=new _i(e,n,{x:355,y:47});a.addChild(i),a.timeTweenTxtRs=game.time.events.add(1.5*Phaser.Timer.SECOND,function(){if(e==t.DIAMOND){var n=game.add.tween(s.txtResource).to({text:dV.instance().socket.mySelf.getVariable("diamond").value},500,Phaser.Easing.Back.Out,!1);n.start(),n.onUpdateCallback(function(){s.txtResource.text=parseInt(s.txtResource.text)},a)}else if(e==t.TICKET){var i=game.add.tween(s.txtResource).to({text:dV.instance().socket.mySelf.getVariable("ticket").value},500,Phaser.Easing.Back.Out,!1);i.start(),i.onUpdateCallback(function(){s.txtResource.text=parseInt(s.txtResource.text)},a)}else if(e==t.HEART){var o=game.add.tween(s.txtResource).to({text:dV.instance().socket.mySelf.getVariable("heart").value},500,Phaser.Easing.Back.Out,!1);o.start(),o.onUpdateCallback(function(){s.txtResource.text=parseInt(s.txtResource.text)},a)}else if(e==t.SUPPORT_ITEM){var r=game.add.tween(s.txtResource).to({text:dV.instance().socket.mySelf.getVariable("support_item").value},500,Phaser.Easing.Back.Out,!1);r.start(),r.onUpdateCallback(function(){s.txtResource.text=parseInt(s.txtResource.text)},a)}}),a.timeTweenBoxRs=game.time.events.add(2.5*Phaser.Timer.SECOND,function(){game.add.tween(s).to({y:-100},200,Phaser.Easing.Back.Out,!1).start()})},a)}),i==o-1&&(this.timeTweenDestroy=game.time.events.add(Phaser.Timer.SECOND*o*3,function(){a.destroy()}))}},{key:"addTabResource",value:function(e,t,n){var i=new Phaser.Sprite(game,e.tab_resource.x*window.GameConfig.RESIZE,-100*window.GameConfig.RESIZE,e.tab_resource.nameAtlas,e.tab_resource.nameSprite);i.iconResourse=this.addGem(this.positionSetting.header.icon_resource,t),i.txtResource=this.addTxtGem(this.positionSetting.header.txt_resource,t,n);var o=i.iconResourse.width+i.txtResource.width;return i.txtResource.x=(i.width-o)/2-5*window.GameConfig.RESIZE,i.iconResourse.x=(i.width-o)/2+i.txtResource.width+5*window.GameConfig.RESIZE,i.addChild(i.iconResourse),i.addChild(i.txtResource),i}},{key:"addGem",value:function(e,n){var i="";return n==t.DIAMOND?i="Gem":n==t.TICKET?i="Ticket":n==t.HEART?i="Heart":n==t.SUPPORT_ITEM&&(i="Mic"),new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,i)}},{key:"addTxtGem",value:function(e,n,i){return n==t.DIAMOND?new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value-i,e.configs):n==t.TICKET?new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("ticket").value-i,e.configs):n==t.HEART?new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("heart").value-i,e.configs):n==t.SUPPORT_ITEM?new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("support_item").value-i,e.configs):void 0}},{key:"destroy",value:function(){for(game.time.events.remove(this.timeTweenBox),game.time.events.remove(this.timeTweenTxtRs),game.time.events.remove(this.timeTweenBoxRs),game.time.events.remove(this.timeTweenDestroy);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&HS(n.prototype,o),a&&HS(n,a),t}();var KS=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.amount=0,this.diamond=0,this.ticket=0,this.created=0,this.name="",this.id=0,this.expiration_date=0,this.updated=0,this.heart=0,this.support_item=0};function zS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var YS=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new KS,n=e.getSFSObject("gift_code");return t.amount=n.getInt("amount"),t.created=n.getLong("created"),t.diamond=n.getInt("diamond"),t.expiration_date=n.getLong("expiration_date"),t.heart=n.getInt("heart"),t.id=n.getLong("id"),t.name=n.getUtfString("name"),t.support_item=n.getInt("support_item"),t.ticket=n.getInt("ticket"),t.updated=n.getLong("updated"),t}}],(n=null)&&zS(t.prototype,n),i&&zS(t,i),e}();function XS(e){return(XS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $S(e,t){return!t||"object"!==XS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eE(e){return(eE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tE(e,t){return(tE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nE=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=$S(this,eE(t).call(this,game,0,0,"bg-playlist"))).positionSetting=JSON.parse(game.cache.getText("positionSetting")),e.signalInputX=new Phaser.Signal,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tE(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.giftcode={},this.isActiveBtnSave=!0,this.addHeaderTab(this.positionSetting.header),this.txtSettingHead,this.boxText,this.txtBoxText,this.btnSave,this.tick,this.addTxtSettingHead(),this.addBoxText(),this.addTxtBoxText(),this.addBtnSave(),this.addTick()}},{key:"addTxtSettingHead",value:function(){this.txtSettingHead=new Qt(this.positionSetting.setting_giftcode.txt_setting_head,this.positionSetting.setting_giftcode.txt_setting_head.text),this.txtSettingHead.anchor.set(.5),this.addChild(this.txtSettingHead)}},{key:"addBoxText",value:function(){this.boxText=new _n(this.positionSetting.setting_giftcode.box_text,this.clickBoxText,this),this.boxText.anchor.set(.5),this.addChild(this.boxText)}},{key:"addBtnSave",value:function(){this.btnSave=new _n(this.positionSetting.setting_giftcode.btn_save,this.clickSave,this),this.btnSave.anchor.set(.5);var e=new Qt(this.positionSetting.setting_giftcode.txt_btn_save,this.positionSetting.setting_giftcode.txt_btn_save.text);e.anchor.set(.5),this.btnSave.addChild(e),this.addChild(this.btnSave)}},{key:"addTick",value:function(){this.tick=new Bt(this.positionSetting.setting_giftcode.tick),this.tick.kill(),this.boxText.addChild(this.tick)}},{key:"clickBoxText",value:function(){this.tick.kill(),this.inputKeyboard()}},{key:"inputKeyboard",value:function(){this.isActiveBtnSave=!1,be.instance().playSound(be.buttonclick),this.boxText.kill();Ir.instance().event.cancle.add(this.keyboardClose,this),Ir.instance().event.enter.add(this.keyboardDone,this),Ir.instance().event.submit.add(this.keyboardDone,this),Ir.instance().show({maxLength:"",showTransparent:!0,placeholder:"Nhập Giftcode",isSearch:!1}),Ir.instance().setValue(this.codeGift)}},{key:"keyboardClose",value:function(){this.isActiveBtnSave=!0,Ir.instance().event.cancle.remove(this.keyboardClose,this),Ir.instance().event.enter.remove(this.keyboardDone,this),Ir.instance().event.submit.remove(this.keyboardDone,this),Ir.instance().hide(),this.boxText.revive()}},{key:"keyboardDone",value:function(){this.codeGift=Ir.instance().getValue(),LogConsole.log(this.codeGift),this.changeTxtBoxText(),this.keyboardClose()}},{key:"changeTxtBoxText",value:function(){this.txtBoxText.setText(this.codeGift)}},{key:"clickSave",value:function(){1==this.isActiveBtnSave&&this.sendGiftcode()}},{key:"sendGiftcode",value:function(){var e=new SFS2X.SFSObject;e.putUtfString("code",this.codeGift),dV.instance().sendData(ki.GIFT_CODE_CLAIM_REQUEST,e)}},{key:"addTxtBoxText",value:function(){this.txtBoxText=new Qt(this.positionSetting.setting_giftcode.txt_box_text,"Giftcode"),this.txtBoxText.anchor.set(.5),this.boxText.addChild(this.txtBoxText)}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.addButtonBack(e.btn_back),this.addTxtSetting(e.txt_giftcode)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerTab.addChild(this.btnBack)}},{key:"onBack",value:function(){var e=this;be.instance().playSound(be.buttonclick),this.signalInputX.dispatch();var t=game.add.tween(this).to({x:640*window.GameConfig.RESIZE},200,"Linear",!1);t.start(),t.onComplete.add(function(){e.destroy()},this)}},{key:"addTxtSetting",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.text,e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"onExtensionResponse",value:function(e){if(e.cmd==ki.GIFT_CODE_CLAIM_RESPONSE){if("OK"==e.params.getUtfString("status")){this.giftcode=YS.begin(e.params);var t=new qS(this.giftcode);t.addGift(),this.addChild(t)}"WARNING"==e.params.getUtfString("status")&&Ck.instance().addDialog("Giftcode sai hoặc đã được sử dụng.")}}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&JS(n.prototype,i),o&&JS(n,o),t}();function iE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var oE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putInt("room_id",e),t}}],(n=null)&&iE(t.prototype,n),i&&iE(t,i),e}();function aE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var sE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"ONLINE_MODE_ROOM_CREATE_REQUEST",get:function(){return"ONLINE_MODE_ROOM_CREATE_REQUEST"}},{key:"ONLINE_MODE_ROOM_CREATE_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_CREATE_RESPONSE"}},{key:"ONLINE_MODE_ROOM_LOAD_PLAYLIST_AND_BET_REQUEST",get:function(){return"ONLINE_MODE_ROOM_LOAD_PLAYLIST_AND_BET_REQUEST"}},{key:"ONLINE_MODE_ROOM_LOAD_PLAYLIST_AND_BET_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_LOAD_PLAYLIST_AND_BET_RESPONSE"}},{key:"ONLINE_MODE_ROOM_INVITE_REQUEST",get:function(){return"ONLINE_MODE_ROOM_INVITE_REQUEST"}},{key:"ONLINE_MODE_ROOM_INVITE_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_INVITE_RESPONSE"}},{key:"ONLINE_MODE_ROOM_ONLINE_USER_LIST_REQUEST",get:function(){return"ONLINE_MODE_ROOM_ONLINE_USER_LIST_REQUEST"}},{key:"ONLINE_MODE_ROOM_ONLINE_USER_LIST_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_ONLINE_USER_LIST_RESPONSE"}},{key:"ONLINE_MODE_ROOM_PLAYLIST_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_PLAYLIST_RESPONSE"}},{key:"ONLINE_MODE_ROOM_USER_SELECT_PLAYLIST_REQUEST",get:function(){return"ONLINE_MODE_ROOM_USER_SELECT_PLAYLIST_REQUEST"}},{key:"ONLINE_MODE_ROOM_USER_SELECT_PLAYLIST_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_USER_SELECT_PLAYLIST_RESPONSE"}},{key:"ONLINE_MODE_ROOM_START_GAME_REQUEST",get:function(){return"ONLINE_MODE_ROOM_START_GAME_REQUEST"}},{key:"ONLINE_MODE_ROOM_START_GAME_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_START_GAME_RESPONSE"}},{key:"ONLINE_MODE_ROOM_SERVER_QUESTIONS_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_SERVER_QUESTIONS_RESPONSE"}},{key:"ONLINE_MODE_ROOM_GAME_START",get:function(){return"ONLINE_MODE_ROOM_GAME_START"}},{key:"ONLINE_MODE_ROOM_USER_SELECTED_ANSWER_REQUEST",get:function(){return"ONLINE_MODE_ROOM_USER_SELECTED_ANSWER_REQUEST"}},{key:"ONLINE_MODE_ROOM_USER_SELECTED_ANSWER_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_USER_SELECTED_ANSWER_RESPONSE"}},{key:"ONLINE_MODE_ROOM_LOAD_PLAYLIST_REQUEST",get:function(){return"ONLINE_MODE_ROOM_LOAD_PLAYLIST_REQUEST"}},{key:"ONLINE_MODE_ROOM_LOAD_PLAYLIST_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_LOAD_PLAYLIST_RESPONSE"}},{key:"ONLINE_MODE_ROOM_LOAD_BET_REQUEST",get:function(){return"ONLINE_MODE_ROOM_LOAD_BET_REQUEST"}},{key:"ONLINE_MODE_ROOM_LOAD_BET_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_LOAD_BET_RESPONSE"}},{key:"ONLINE_MODE_ROOM_MOVE_TO_NEXT_QUESTION",get:function(){return"ONLINE_MODE_ROOM_MOVE_TO_NEXT_QUESTION"}},{key:"ONLINE_MODE_ROOM_GAME_RESULT",get:function(){return"ONLINE_MODE_ROOM_GAME_RESULT"}},{key:"ONLINE_MODE_ROOM_GAME_FINISH",get:function(){return"ONLINE_MODE_ROOM_GAME_FINISH"}},{key:"ONLINE_MODE_ROOM_QUICK_JOIN_REQUEST",get:function(){return"ONLINE_MODE_ROOM_QUICK_JOIN_REQUEST"}},{key:"ONLINE_MODE_ROOM_QUICK_JOIN_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_QUICK_JOIN_RESPONSE"}},{key:"ONLINE_MODE_ROOM_KICK_USER_REQUEST",get:function(){return"ONLINE_MODE_ROOM_KICK_USER_REQUEST"}},{key:"ONLINE_MODE_ROOM_ONLINE_USERS_LIST_REQUEST",get:function(){return"ONLINE_MODE_ROOM_ONLINE_USERS_LIST_REQUEST"}},{key:"ONLINE_MODE_ROOM_ONLINE_USERS_LIST_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_ONLINE_USERS_LIST_RESPONSE"}},{key:"ONLINE_MODE_ROOM_BE_KICKED",get:function(){return"ONLINE_MODE_ROOM_BE_KICKED"}},{key:"SUPPORT_RESPONSE",get:function(){return"SUPPORT_RESPONSE"}},{key:"SUPPORT_REQUEST",get:function(){return"SUPPORT_REQUEST"}},{key:"ONLINE_MODE_ROOM_FRIEND_LIST_REQUEST",get:function(){return"ONLINE_MODE_ROOM_FRIEND_LIST_REQUEST"}},{key:"ONLINE_MODE_ROOM_FRIEND_LIST_RESPONSE",get:function(){return"ONLINE_MODE_ROOM_FRIEND_LIST_RESPONSE"}},{key:"USER_FRIEND_LIST_LOAD_REQUEST",get:function(){return"USER_FRIEND_LIST_LOAD_REQUEST"}},{key:"USER_FRIEND_LIST_LOAD_RESPONSE",get:function(){return"USER_FRIEND_LIST_LOAD_RESPONSE"}}],(n=null)&&aE(t.prototype,n),i&&aE(t,i),e}();function rE(e){return(rE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lE(e,t,n){return(lE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cE(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function cE(e){return(cE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function uE(e,t,n){return t&&hE(e.prototype,t),n&&hE(e,n),e}function dE(e,t){return(dE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pE=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=cE(t).call(this,game,0,0,"IconChatOnlineMode","Circle_Icon"))||"object"!==rE(o)&&"function"!=typeof o?fE(i):o).event={call_remove:new Phaser.Signal},n.idRemove=null,n.iconChat=new Phaser.Sprite(game,0,0,"IconChatOnlineMode"),n.iconChat.anchor.x=.5,n.iconChat.anchor.y=.5,n.iconChat.smoothed=!0,n.addChild(n.iconChat);var a={prefix:"",start:0,stop:0,zeroPad:5};return e===t.chenhao?(a.prefix="01_CuoiCheNhao_",a.start=0,a.stop=7):e===t.vuive?(a.prefix="02_CuoiVuiVe_",a.start=0,a.stop=9):e===t.ngaingung?(a.prefix="03_CuoiNgaiNgung_",a.start=0,a.stop=9):e===t.khoc?(a.prefix="04_Khoc_",a.start=0,a.stop=9):e===t.buon?(a.prefix="05_Buon_",a.start=0,a.stop=19):e===t.batngo?(a.prefix="06_Batngo_",a.start=0,a.stop=14):e===t.tucgian&&(a.prefix="07_Tucgian_",a.start=0,a.stop=23),n.action=n.iconChat.animations.add("playiconchat",Phaser.Animation.generateFrameNames(a.prefix,a.start,a.stop,"",a.zeroPad)),n.action.play(30,!0),n.removeIcon(),n.idRemove=game.time.events.add(2*Phaser.Timer.SECOND,n.callRemove,fE(fE(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dE(e,t)}(t,Phaser.Image),uE(t,null,[{key:"chenhao",get:function(){return"chenhao"}},{key:"vuive",get:function(){return"vuive"}},{key:"ngaingung",get:function(){return"ngaingung"}},{key:"khoc",get:function(){return"khoc"}},{key:"buon",get:function(){return"buon"}},{key:"batngo",get:function(){return"batngo"}},{key:"tucgian",get:function(){return"tucgian"}}]),uE(t,[{key:"removeIcon",value:function(){null!==this.idRemove&&game.time.events.remove(this.idRemove)}},{key:"callRemove",value:function(){this.event.call_remove.dispatch()}},{key:"destroy",value:function(){this.removeIcon(),lE(cE(t.prototype),"destroy",this).call(this)}}]),t}();function gE(e){return(gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mE(e){return(mE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vE(e,t){return(vE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var bE=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=mE(t).call(this,game,null))||"object"!==gE(i)&&"function"!=typeof i?wE(n):i).event={close_dialog:new Phaser.Signal},e.positionCreateRoom=oe.instance().positionCreateRoom,e.bg=new Bt(e.positionCreateRoom.chat_icon_bg),e.addChild(e.bg),e.arrType=[pE.batngo,pE.buon,pE.chenhao,pE.khoc,pE.ngaingung,pE.tucgian,pE.vuive],e.arrString=["06_Batngo","05_Buon","01_CuoiCheNhao","04_Khoc","03_CuoiNgaiNgung","07_Tucgian","02_CuoiVuiVe"];for(var o=30,a=30,s=0,r=0;r<e.arrType.length;r++){s++;var l={x:0,y:0,nameAtlas:"IconChatOnlineMode",nameSprite:"Circle_Icon",configText:{x:0,y:0,style:{fontSize:26,font:"GilroyBold"}},icon:{x:0,y:8,nameAtlas:"IconChatOnlineMode",nameSprite:e.arrString[r]},alignAll:"center"};console.log("aaaaaaaaaa ------------------"),console.log(l);var c=new qn(l,"",e.chooseItem,wE(wE(e)));c.x=o,c.y=a,c.type=e.arrType[r],o+=133,s%4==0&&(a+=135,o=30),e.addChild(c)}return e.btnClose=new _n(e.positionCreateRoom.chat_icon_btn_close,e.chooseClose,wE(wE(e))),e.addChild(e.btnClose),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vE(e,t)}(t,Je),n=t,(i=[{key:"chooseClose",value:function(){this.event.close_dialog.dispatch()}},{key:"chooseItem",value:function(e){console.log("chooseItem---------"),console.log(e.type);var t=new SFS2X.SFSObject;t.putUtfString("typeicon",e.type),dV.instance().sendPublicChat(Me.CHAT_ONLINE_MODE,t),this.chooseClose()}}])&&yE(n.prototype,i),o&&yE(n,o),t}();function _E(e){return(_E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EE(e,t){return!t||"object"!==_E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CE(e,t,n){return(CE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kE(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kE(e){return(kE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PE(e,t){return(PE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var OE=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=EE(this,kE(t).call(this,game,0,0,"limitTurn",function(){},e,null,"BG_Opacity_limit_turn"))).limitTurnConfig=JSON.parse(game.cache.getText("limitTurnConfig")),n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PE(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){this.addBg(),this.addText(),this.addBtnRemove(),this.addBtnBecomeVip()}},{key:"addBg",value:function(){this.bg=new Phaser.Sprite(game,0,0,"limitTurn","BG_Opacity_limit_turn"),this.bg.width=game.width,this.bg.height=game.height,this.addChild(this.bg)}},{key:"addText",value:function(){if(!0===dV.instance().dataMySeft.vip){this.txt=new Qt(this.limitTurnConfig.txt_limit_vip,this.limitTurnConfig.txt_limit_vip.text),this.txt.position.y=-300,this.txt.anchor.set(.5);var e=new Qt(this.limitTurnConfig.txt_want,this.limitTurnConfig.txt_want.text);e.anchor.set(.5),this.txt.addChild(e),this.addChild(this.txt),game.add.tween(this.txt).to({y:this.limitTurnConfig.txt_limit.y},1250,Phaser.Easing.Exponential.Out,!1).start()}else{this.txt=new Qt(this.limitTurnConfig.txt_limit,this.limitTurnConfig.txt_limit.text),this.txt.position.y=-300,this.txt.anchor.set(.5);var t=new Qt(this.limitTurnConfig.txt_want,this.limitTurnConfig.txt_want.text);t.anchor.set(.5),this.txt.addChild(t),this.addChild(this.txt),game.add.tween(this.txt).to({y:this.limitTurnConfig.txt_limit.y},1250,Phaser.Easing.Exponential.Out,!1).start()}}},{key:"addBtnRemove",value:function(){if(!0===dV.instance().dataMySeft.vip){this.btnRemove=new _n(this.limitTurnConfig.btn_delete_vip,this.onClickRemove,this),this.btnRemove.position.y=1500,this.btnRemove.anchor.set(.5);var e=new Qt(this.limitTurnConfig.btn_delete.txt,this.limitTurnConfig.btn_delete.txt.text);e.anchor.set(.5),this.btnRemove.addChild(e),this.addChild(this.btnRemove),game.add.tween(this.btnRemove).to({y:this.limitTurnConfig.btn_delete_vip.y},1250,Phaser.Easing.Exponential.Out,!1).start()}else{this.btnRemove=new _n(this.limitTurnConfig.btn_delete,this.onClickRemove,this),this.btnRemove.position.x=-300,this.btnRemove.anchor.set(.5);var t=new Qt(this.limitTurnConfig.btn_delete.txt,this.limitTurnConfig.btn_delete.txt.text);t.anchor.set(.5),this.btnRemove.addChild(t),this.addChild(this.btnRemove),game.add.tween(this.btnRemove).to({x:this.limitTurnConfig.btn_delete.x},1250,Phaser.Easing.Exponential.Out,!1).start()}}},{key:"onClickRemove",value:function(){FH.instance().changeScreen(De.MAIN_MENU),this.destroy()}},{key:"addBtnBecomeVip",value:function(){if(!0!==dV.instance().dataMySeft.vip){this.btnBecomeVip=new _n(this.limitTurnConfig.btn_vip,this.onClickBecomeVip,this),this.btnBecomeVip.position.x=game.width+300,this.btnBecomeVip.anchor.set(.5);var e=new Qt(this.limitTurnConfig.btn_vip.txt,this.limitTurnConfig.btn_vip.txt.text);e.anchor.set(.5),this.btnBecomeVip.addChild(e),this.addChild(this.btnBecomeVip),game.add.tween(this.btnBecomeVip).to({x:this.limitTurnConfig.btn_vip.x},1250,Phaser.Easing.Exponential.Out,!1).start()}}},{key:"onClickBecomeVip",value:function(){jC.instance().addShop(3),this.destroy()}},{key:"destroy",value:function(){CE(kE(t.prototype),"destroy",this).call(this)}}])&&SE(n.prototype,i),o&&SE(n,o),t}();function RE(e){return(RE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TE(e){return(TE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IE(e,t){return(IE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var LE=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=TE(t).call(this,game,0,0,""))||"object"!==RE(i)&&"function"!=typeof i?AE(n):i).event={close:new Phaser.Signal},e.positionPopup=oe.instance().positionPopup,e.bg=new Bt(e.positionPopup.popup_suggets_rating_bg),e.addChild(e.bg),e.btnVoteSau=new qn(e.positionPopup.popup_suggets_rating_btn_votesau,de.instance().getData("121"),e.chooseVoteSau,AE(AE(e))),e.addChild(e.btnVoteSau),e.btnVoteNgay=new qn(e.positionPopup.popup_suggets_rating_btn_votengay,de.instance().getData("122"),e.chooseVoteNgay,AE(AE(e))),e.addChild(e.btnVoteNgay),e.btnClose=new _n(e.positionPopup.popup_suggets_rating_btn_close,e.chooseClose,AE(AE(e))),e.addChild(e.btnClose),e.txt1=new Qt(e.positionPopup.popup_suggets_rating_lb1,de.instance().getData("123")),e.txt1.x=(e.bg.width-e.txt1.width)/2,e.addChild(e.txt1),e.txt2=new Qt(e.positionPopup.popup_suggets_rating_lb2,de.instance().getData("124")),e.txt2.x=(e.bg.width-e.txt2.width)/2,e.addChild(e.txt2),He.instance().logEvent(He.SuggetRatingShow),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IE(e,t)}(t,Je),n=t,(i=[{key:"chooseVoteSau",value:function(){LogConsole.log("chooseVoteSau"),_t.instance().updateCheckVote("VoteSau"),He.instance().logEvent(He.SuggetRatingVoteSau),this.event.close.dispatch()}},{key:"chooseVoteNgay",value:function(){LogConsole.log("chooseVoteNgay"),_t.instance().updateCheckVote("VoteNgay"),"and"===oe.instance().platform?window.open(window.RESOURCE.android_storage_link):"ios"===oe.instance().platform&&window.open(window.RESOURCE.ios_storage_link),He.instance().logEvent(He.SuggetRatingVoteNgay),this.event.close.dispatch()}},{key:"chooseClose",value:function(){LogConsole.log("chooseClose"),_t.instance().updateCheckVote("Close"),He.instance().logEvent(He.SuggetRatingClose),this.event.close.dispatch()}}])&&xE(n.prototype,i),o&&xE(n,o),t}();function DE(e){return(DE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ME(e){return(ME=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NE(e,t){return(NE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jE=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=ME(t).call(this,game,null))||"object"!==DE(i)&&"function"!=typeof i?BE(n):i).event={close:new Phaser.Signal},e.bg=new Phaser.Button(game,0,0,"screen-dim"),e.addChild(e.bg),e.item=new LE,e.item.event.close.add(e.chooseClose,BE(BE(e))),e.item.x=35*oe.instance().scale,e.item.y=game.height+237*oe.instance().scale,e.addChild(e.item),e.tweenItemPopup(e.item,game.height-850*oe.instance().scale),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NE(e,t)}(t,Je),n=t,(i=[{key:"chooseClose",value:function(){this.event.close.dispatch()}}])&&GE(n.prototype,i),o&&GE(n,o),t}();function UE(e){return(UE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ZE(e,t){return!t||"object"!==UE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HE(e){return(HE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VE(e,t){return(VE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var QE=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ZE(this,HE(t).call(this,game))).positionLoadConfig=JSON.parse(game.cache.getText("positionLoadConfig")),n.messenger=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VE(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.ava,this.name,this.from,this.time,this.ava=new Bt(this.positionLoadConfig.mail_system.mailDetail.ava),this.addChild(this.ava),this.name=new Qt(this.positionLoadConfig.mail_system.mailDetail.name,this.positionLoadConfig.mail_system.mailDetail.name.text),this.addChild(this.name),this.from=new Qt(this.positionLoadConfig.mail_system.mailDetail.from,this.positionLoadConfig.mail_system.mailDetail.from.text),this.addChild(this.from);var e=new Date;e.setTime(this.messenger.created);var t=e.getSeconds(),n=e.getMinutes(),i=e.getHours(),o=e.getFullYear(),a=e.getMonth(),s=e.getDate();this.time=new Qt(this.positionLoadConfig.mail_system.mailDetail.time,"".concat(o,"-").concat(a,"-").concat(s," ").concat(i,":").concat(n,":").concat(t)),this.addChild(this.time)}},{key:"height",get:function(){return 131*window.GameConfig.RESIZE}}])&&FE(n.prototype,i),o&&FE(n,o),t}();function WE(e){return(WE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function KE(e,t){return!t||"object"!==WE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zE(e){return(zE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YE(e,t){return(YE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var XE=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=KE(this,zE(t).call(this,game))).positionLoadConfig=JSON.parse(game.cache.getText("positionLoadConfig")),n.data=e,n.eventClickBtn=new Phaser.Signal,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YE(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.txtDes,this.btn,this.addTxtDes(),this.addBtn()}},{key:"addTxtDes",value:function(){this.txtDes=new Qt(this.positionLoadConfig.system_btn_link.text,this.data.description),this.addChild(this.txtDes)}},{key:"addBtn",value:function(){this.btn=new _n(this.positionLoadConfig.system_btn_link,this.onClick,this);var e={x:this.btn.x+15,y:this.btn.y+15,text:"EMAIL",style:{font:"GilroyBold",fill:"#bfbec4",fontSize:24,align:"center"}},t=new Qt(e,this.data.name.toUpperCase());this.btn.width=t.width+30,this.addChild(this.btn),this.addChild(t)}},{key:"onClick",value:function(){this.eventClickBtn.dispatch(this.data)}},{key:"height",get:function(){return 151}}])&&qE(n.prototype,i),o&&qE(n,o),t}();function JE(e){return(JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eC(e,t){return!t||"object"!==JE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tC(e,t,n){return(tC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nC(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function nC(e){return(nC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iC(e,t){return(iC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oC=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eC(this,nC(t).call(this,game))).positionLoadConfig=JSON.parse(game.cache.getText("positionLoadConfig")),n.messengerId=e,n.messenger,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iC(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.bg,this.headerTab,this.title,this.inforSystem,this.detail,this.addBG(),this.addHeaderTab(),this.ajaxGetNotiDetail(),this.addEventExtension()}},{key:"ajaxGetNotiDetail",value:function(){this.detailMessageCallback(Xr.instance().seeNoticeSystem(this.messengerId,oe.instance().systemMessagesLocal.dataMessages))}},{key:"detailMessageCallback",value:function(e){if(this.dataControls=[],this.messenger=e,null!==this.messenger.control){var t=JSON.parse(this.messenger.control);for(var n in t)this.dataControls.push(t[n])}this.addTitle(),this.addListView(),this.addInforSystem(),this.addDetailMessage(),this.addButtonLink(),this.markAsRead()}},{key:"addBG",value:function(){this.bg=new Phaser.Button(game,0,0,this.positionLoadConfig.mail_system.bg.nameSprite),this.addChild(this.bg)}},{key:"addHeaderTab",value:function(){this.headerTab=new Bt(this.positionLoadConfig.mail_system.header.tab),this.addChild(this.headerTab),this.btnBack,this.emailTxt,this.btnBack=new _n(this.positionLoadConfig.mail_system.header.btn_back,this.onClickBack,this),this.btnBack.anchor.set(.5),this.addChild(this.btnBack),this.emailTxt=new Qt(this.positionLoadConfig.mail_system.header.txt_email,this.positionLoadConfig.mail_system.header.txt_email.text),this.emailTxt.anchor.set(.5),this.addChild(this.emailTxt)}},{key:"onClickBack",value:function(){Qe.instance().event.backSystemChat.dispatch(),this.destroy()}},{key:"addTitle",value:function(){this.title=new Qt(this.positionLoadConfig.mail_system.title,this.messenger.title),this.addChild(this.title),this.lineUnder,this.lineUnder=new Bt(this.positionLoadConfig.mail_system.line_under),this.lineUnder.y+=this.title.y+this.title.height,this.addChild(this.lineUnder)}},{key:"addListView",value:function(){this.group=new Phaser.Group(game),this.addChild(this.group);var e=new Phaser.Rectangle(0,this.lineUnder.y+2,game.width,(game.height-253)*window.GameConfig.RESIZE);this.listView=new Ia(game,this.group,e,{direction:"y",overflow:100,padding:0,searchForClicks:!0})}},{key:"addInforSystem",value:function(){this.inforSystem=new QE(this.messenger),this.listView.add(this.inforSystem)}},{key:"addDetailMessage",value:function(){this.detail=new Qt(this.positionLoadConfig.mail_system.detailMessage,this.messenger.message);var e=new Phaser.Sprite(game,0,this.detail.height+25,"mailSprites","line_line");this.detail.addChild(e),this.listView.add(this.detail)}},{key:"addButtonLink",value:function(){for(var e=0;e<this.dataControls.length;e++)if("ios"!==oe.instance().platform&&void 0!==this.dataControls[e].link){var t=new XE(this.dataControls[e]);t.eventClickBtn.add(this.eventClickBtn,this),this.listView.add(t)}}},{key:"markAsRead",value:function(){0==this.messenger.is_read&&(Xr.instance().sendSystemMarkAsRead(this.messengerId),Xr.instance().systemMarkAsRead(this.messengerId,oe.instance().systemMessagesLocal.dataMessages))}},{key:"eventClickBtn",value:function(e){window.open(e.link,"_blank")}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.onClickBack,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.onClickBack,this)}},{key:"destroy",value:function(){if(this.removeEventExtension(),null!==this.listView&&(this.listView.removeAll(),this.listView.destroy()),null!==this.children){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}tC(nC(t.prototype),"destroy",this).call(this)}}])&&$E(n.prototype,i),o&&$E(n,o),t}();function aC(e){return(aC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rC(e,t){return!t||"object"!==aC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lC(e,t,n){return(lC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cC(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function cC(e){return(cC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hC(e,t){return(hC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uC=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=rC(this,cC(t).call(this,game))).positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),e.signalBtn=new Phaser.Signal,e.typeRsr=n,e.confirmWatchVideoReward=!1,e.timeWait=0,e.timerToCountTime=null,e.popup=null,e.btnWatch=null,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hC(e,t)}(t,Z),n=t,o=[{key:"TICKET",get:function(){return"TICKET"}},{key:"HEART",get:function(){return"HEART"}}],(i=[{key:"addEventExtension",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),Ei.instance().event.rewardedVideoRewardReceived.add(this.rewardedVideoRewardReceived,this),Ei.instance().event.rewardedVideoFailed.add(this.rewardedVideoFailed,this),Ei.instance().event.rewardedVideoClosed.add(this.rewardedVideoClosed,this)}},{key:"removeEventExtension",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),Ei.instance().event.rewardedVideoRewardReceived.remove(this.rewardedVideoRewardReceived,this),Ei.instance().event.rewardedVideoFailed.remove(this.rewardedVideoFailed,this),Ei.instance().event.rewardedVideoClosed.remove(this.rewardedVideoClosed,this)}},{key:"rewardedVideoRewardReceived",value:function(e){if(this.confirmWatchVideoReward=!0,1==this.confirmWatchVideoReward){var n=0,i=0,o="";this.typeRsr==t.HEART?(n=this.rsrPkgs.heart.id,i=this.rsrPkgs.heart.quantity,o=this.rsrPkgs.heart.resource_type):(n=this.rsrPkgs.ticket.id,i=this.rsrPkgs.ticket.quantity,o=this.rsrPkgs.ticket.resource_type),dV.instance().sendData(kt.RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_REQUEST,Vw.begin(n,i,o))}else ht.instance().hideLoading()}},{key:"rewardedVideoFailed",value:function(){}},{key:"rewardedVideoClosed",value:function(){this.btnWatch.inputEnabled=!0,this.btnBuy.inputEnabled=!0}},{key:"afterInit",value:function(){ht.instance().showLoading(),this.botSprite=new Phaser.Sprite(game,0,0,null),this.addChild(this.botSprite),this.topSprite=new Phaser.Sprite(game,0,0,null),this.addChild(this.topSprite),this.screenDim,this.tabGem,this.tabHeart,this.popup,this.addScreenDim(),this.typeRsr!=t.HEART&&null!=this.typeRsr||this.addGemAndHeart(),this.addEventExtension(),null===oe.instance().dataPackage?"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp():this.handlePackage()}},{key:"addScreenDim",value:function(){this.screenDim=new Phaser.Sprite(game,0,0,"screen-dim"),this.screenDim.inputEnabled=!0,this.botSprite.addChild(this.screenDim)}},{key:"addGemAndHeart",value:function(){this.tabGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabGem.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGem.nameAtlas,this.positionPracticePopupConfig.tabGem.nameSprite),this.addGemDetail(),this.botSprite.addChild(this.tabGem),this.tabHeart=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabHeart.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeart.nameAtlas,this.positionPracticePopupConfig.tabHeart.nameSprite),this.addHeartDetail(),this.botSprite.addChild(this.tabHeart)}},{key:"addGemDetail",value:function(){var e;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.gem_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.gem_reward.nameAtlas,this.positionPracticePopupConfig.gem_reward.nameSprite),this.txtGem=new Phaser.Text(game,0,this.positionPracticePopupConfig.gem_reward_txt.y*window.GameConfig.RESIZE,dV.instance().dataMySeft.diamond,this.positionPracticePopupConfig.gem_reward_txt.configs);var t=e.width+this.txtGem.width;this.txtGem.x=(this.tabGem.width-t)/2-5*window.GameConfig.RESIZE,e.x=(this.tabGem.width-t)/2+this.txtGem.width+5*window.GameConfig.RESIZE,this.tabGem.addChild(e),this.tabGem.addChild(this.txtGem)}},{key:"addHeartDetail",value:function(){var e;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.heart_reward.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.heart_reward.nameAtlas,this.positionPracticePopupConfig.heart_reward.nameSprite),this.txtHeart=new Phaser.Text(game,0,this.positionPracticePopupConfig.heart_reward_txt.y*window.GameConfig.RESIZE,dV.instance().dataMySeft.heart,this.positionPracticePopupConfig.heart_reward_txt.configs);var t=e.width+this.txtHeart.width;this.txtHeart.x=(this.tabHeart.width-t)/2-5*window.GameConfig.RESIZE,e.x=(this.tabHeart.width-t)/2+this.txtHeart.width+5*window.GameConfig.RESIZE,this.tabHeart.addChild(e),this.tabHeart.addChild(this.txtHeart)}},{key:"addPopup",value:function(){null!==this.popup?(this.removeBtnWatch(),this.addBtnWatch()):(this.removePopup(),this.txtMainPopup,this.txtQuestPopup,this.popup=new Phaser.Sprite(game,35,1140,"dailyRewardSprites","Box"),this.addIconCamera(),this.addBtnWatch(),this.addBtnBuy(),this.addTxtMainPopup(),this.addTxtQuestPopup(),this.addBtnClose(),this.botSprite.addChild(this.popup),this.makeTweenPopup())}},{key:"removePopup",value:function(){null!==this.popup&&(this.botSprite.removeChild(this.popup),this.popup.destroy(),this.popup=null)}},{key:"removeBtnWatch",value:function(){null!==this.btnWatch&&(this.popup.removeChild(this.btnWatch),this.btnWatch.destroy(),this.btnWatch=null)}},{key:"addIconCamera",value:function(){this.icon=new Phaser.Sprite(game,285,42,"dailyRewardSprites","Camera"),this.icon.anchor.set(.5,0),this.popup.addChild(this.icon)}},{key:"addBtnWatch",value:function(){this.btnWatch=new Phaser.Button(game,414,379,"dailyRewardSprites",function(){},this,null,"Button_Xem"),this.btnWatch.anchor.set(.5),this.btnWatch.events.onInputUp.add(this.onWatch,this),this.txtBtnWatch=new Phaser.Text(game,0,0,"XEM",{font:"GilroyBold",fill:"#ffffff",align:"center",fontSize:35}),this.txtBtnWatch.anchor.set(.5),this.txtCountBtnWatch=new Phaser.Text(game,0,23,"",{font:"GilroyBold",fill:"#ffffff",align:"center",fontSize:18}),this.txtCountBtnWatch.anchor.set(.5),this.btnWatch.addChild(this.txtBtnWatch),this.btnWatch.addChild(this.txtCountBtnWatch),this.popup.addChild(this.btnWatch),this.btnWatch.alpha=.5,this.btnWatch.inputEnabled=!1}},{key:"addBtnBuy",value:function(){this.btnBuy=new Phaser.Button(game,156,379,"dailyRewardSprites",this.onBuy,this,null,"Button_Mua"),this.btnBuy.anchor.set(.5),this.txtBtnBuy=new Phaser.Text(game,0,0,"MUA",{font:"GilroyBold",fill:"#ffffff",align:"center",fontSize:35}),this.txtBtnBuy.anchor.set(.5),this.btnBuy.addChild(this.txtBtnBuy),this.popup.addChild(this.btnBuy)}},{key:"onWatch",value:function(){be.instance().playSound(be.buttonclick),ht.instance().showLoading(),Ei.instance().showRewardVideoInappPurchase(this.typeRsr)}},{key:"getData",value:function(e){switch(e.cmd){case kt.RESOURCE_PACKAGE_LOAD_RESPONSE:"OK"===e.params.getUtfString("status")&&(oe.instance().dataPackage=e.params,this.handlePackage());break;case kt.RESOURCE_PACKAGE_WATCHED_ADS_CLAIM_RESPONSE:"OK"===e.params.getUtfString("status")&&(this.animClaim(),oe.instance().dataPackage=null,"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp(),ht.instance().hideLoading())}}},{key:"onBuy",value:function(){be.instance().playSound(be.buttonclick),jC.instance().addShop(1,Mw.HEART),this.destroy()}},{key:"addTxtMainPopup",value:function(){var e="";e=this.typeRsr==t.HEART?this.positionPracticePopupConfig.txtNotEnoughHeart.text:this.positionPracticePopupConfig.txtNotEnoughTicket.text,this.txtMainPopup=new Phaser.Text(game,this.positionPracticePopupConfig.txtNotEnoughHeart.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txtNotEnoughHeart.y*window.GameConfig.RESIZE,e,this.positionPracticePopupConfig.txtNotEnoughHeart.configs),this.txtMainPopup.anchor.set(.5,0),this.popup.addChild(this.txtMainPopup)}},{key:"addTxtQuestPopup",value:function(){var e="";e=this.typeRsr==t.HEART?this.positionPracticePopupConfig.txtQuestNotEnoughHeart.text:this.positionPracticePopupConfig.txtQuestNotEnoughTicket.text,this.txtQuestPopup=new Phaser.Text(game,this.positionPracticePopupConfig.txtQuestNotEnoughHeart.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.txtQuestNotEnoughHeart.y*window.GameConfig.RESIZE,e,this.positionPracticePopupConfig.txtQuestNotEnoughHeart.configs),this.txtQuestPopup.anchor.set(.5,0),this.popup.addChild(this.txtQuestPopup)}},{key:"addBtnClose",value:function(){this.btnClose=new Phaser.Button(game,536,-29,"dailyRewardSprites",this.onClose,this,null,"Button_Exit"),this.popup.addChild(this.btnClose)}},{key:"onClose",value:function(){be.instance().playSound(be.buttonclick),this.destroy()}},{key:"makeTweenPopup",value:function(){game.add.tween(this.popup).to({y:(game.height-830)*window.GameConfig.RESIZE},1e3,Phaser.Easing.Bounce.Out,!1).start()}},{key:"removeTabGemAndTabHeart",value:function(){this.tabGem.destroy(),this.tabHeart.destroy()}},{key:"handlePackage",value:function(){this.rsrPkgs={heart:{},ticket:{}};for(var e=oe.instance().dataPackage.getSFSArray("resource_packages"),t=0;t<e.size();t++){var n=e.getSFSObject(t);if("HEART"==n.getUtfString("resource_type")&&"ADS"==n.getUtfString("price_type")){var i=n.getUtfString("pack_name"),o=n.getInt("sale"),a=n.getInt("quantity"),s=n.getUtfString("payment_service"),r=n.getInt("price"),l=n.getUtfString("name"),c=n.getUtfString("resource_type"),h=n.getUtfString("price_type"),u=n.getInt("active"),d=n.getLong("next_watched_at"),f=n.getInt("id"),p=n.getBool("is_allow_watch");this.rsrPkgs.heart={pack_name:i,sale:o,quantity:a,payment_service:s,price:r,name:l,resource_type:c,price_type:h,active:u,id:f,is_allow_watch:p,next_watched_at:d}}if("HEART"==n.getUtfString("resource_type")&&"ADS"==n.getUtfString("price_type")){var g=n.getUtfString("pack_name"),y=n.getInt("sale"),m=n.getInt("quantity"),v=n.getUtfString("payment_service"),w=n.getInt("price"),b=n.getUtfString("name"),_=n.getUtfString("resource_type"),S=n.getUtfString("price_type"),E=n.getInt("active"),C=n.getInt("id"),k=n.getLong("next_watched_at"),P=n.getBool("is_allow_watch");this.rsrPkgs.ticket={pack_name:g,sale:y,quantity:m,payment_service:v,price:w,name:b,resource_type:_,price_type:S,active:E,id:C,is_allow_watch:P,next_watched_at:k}}}ht.instance().hideLoading(),this.addPopup()}},{key:"checkConfirmAds",value:function(){"HEART"==this.typeRsr?1==this.rsrPkgs.heart.is_allow_watch?(this.btnWatch.inputEnabled=!0,this.btnWatch.alpha=1):(this.btnWatch.inputEnabled=!1,this.timeWait=parseInt((this.rsrPkgs.heart.next_watched_at-(new Date).getTime())/1e3),this.changeTxtBtnAds()):this.rsrPkgs.ticket.is_allow_watch}},{key:"changeTxtBtnAds",value:function(){this.timeWait>0?(this.btnWatch.inputEnabled=!1,this.btnWatch.alpha=.7,this.txtBtnWatch.y=-5,this.stopCountTime(),this.timerToCountTime=game.time.create(!0),this.timerToCountTime.loop(1e3,this.onTimerToCountTime,this),this.timerToCountTime.start(),this.setTextTimer()):"web"===oe.instance().platform?(this.btnWatch.alpha=.5,this.btnWatch.inputEnabled=!1):(this.btnWatch.inputEnabled=!0,this.btnWatch.alpha=1,this.txtBtnWatch.y=0)}},{key:"onTimerToCountTime",value:function(){this.timeWait=this.timeWait-1,this.timeWait<0&&(this.timeWait=0),0===this.timeWait?(this.stopCountTime(),ht.instance().showLoading(),oe.instance().dataPackage=null,"ios"===oe.instance().platform?zv.instance().getDataInapp():Xv.instance().getDataInapp()):this.setTextTimer()}},{key:"setTextTimer",value:function(){var e,t="",n=parseInt(this.timeWait/3600),i=0,o=0;n>0?(t=n>9?n+":":"0"+n+":",i=parseInt(this.timeWait%3600/60),o=this.timeWait-(3600*n+60*i)):(i=parseInt(this.timeWait/60),o=this.timeWait%60),e="( "+t+(i>9?i+":":"0"+i+":")+(o>9?o+"":"0"+o)+" )",this.txtCountBtnWatch.setText(e)}},{key:"animClaim",value:function(){var e={x:0,y:0};if("HEART"==this.typeRsr?(e.x=this.positionPracticePopupConfig.tabHeart.x+100,e.y=this.positionPracticePopupConfig.tabHeart.y+25):"TICKET"==this.typeRsr&&(e.x=0,e.y=0),this.typeRsr==t.HEART){var n=new _i(this.typeRsr,5,e);this.topSprite.addChild(n);var i=game.add.tween(this.txtHeart).to({text:dV.instance().dataMySeft.heart},300,"Linear",!1);this.tweenTxtRsr(i,this.txtHeart)}}},{key:"tweenTxtRsr",value:function(e,t){var n=this;this.timeStartTween=game.time.events.add(2*Phaser.Timer.SECOND,function(){e.start()},this),e.onUpdateCallback(function(){t.text=parseInt(t.text)},this),e.onComplete.add(function(){window.cordova&&"undefined"!=typeof device?(n.isWatchRewardVideo,n.tweenDestroy()):n.tweenDestroy()},this)}},{key:"tweenDestroy",value:function(){var e=this,t=game.add.tween(this.popup).to({y:-1200*window.GameConfig.RESIZE},200,"Linear",!1);this.timeTweenDestroy=game.time.events.add(1*Phaser.Timer.SECOND,function(){t.start()},this),t.onComplete.add(function(){e.destroy()},this)}},{key:"stopCountTime",value:function(){null!==this.timerToCountTime&&(this.timerToCountTime.stop(),this.timerToCountTime.destroy(),game.time.events.remove(this.timerToCountTime),this.timerToCountTime=null)}},{key:"destroy",value:function(){this.stopCountTime(),this.removeEventExtension(),lC(cC(t.prototype),"destroy",this).call(this)}}])&&sC(n.prototype,i),o&&sC(n,o),t}();function dC(e){return(dC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pC(e,t){return!t||"object"!==dC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gC(e,t,n){return(gC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yC(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yC(e){return(yC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mC(e,t){return(mC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vC=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=pC(this,yC(t).call(this,game))).x=e,o.y=n,o.positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),o.user=i,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mC(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.avatar,this.frame,this.name,this.levelTitle,this.frame=new Phaser.Sprite(game,-5,-5,"playSprites","Khung_Ava_Thuong"),this.frame.width=130,this.frame.height=130,this.addChild(this.frame),this.avatar=new Phaser.Sprite(game,0,0,"otherSprites","ava-default"),this.avatar.width=120,this.avatar.height=120,this.maskAva=new Phaser.Graphics(game,this.avatar.width/2,this.avatar.width/2),this.maskAva.beginFill(),this.maskAva.drawCircle(0,0,this.avatar.width),this.addChild(this.maskAva),this.avatar.mask=this.maskAva,this.addChild(this.avatar),this.name=new Phaser.Text(game,this.positionWinConfig.last_week_screen.user_name.x,this.positionWinConfig.last_week_screen.user_name.y,this.user.userName,this.positionWinConfig.last_week_screen.user_name.configs),this.name.anchor.set(.5,0),this.addChild(this.name),this.levelTitle=new Phaser.Text(game,this.positionWinConfig.last_week_screen.level_title.x,this.positionWinConfig.last_week_screen.level_title.y,this.user.level_title,this.positionWinConfig.last_week_screen.level_title.configs),this.levelTitle.anchor.set(.5,0),this.addChild(this.levelTitle),""!==this.user.avatar&&this.loadAva()}},{key:"loadAva",value:function(){game.cache.checkImageKey(this.user.avatar)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.user.avatar))}},{key:"loadStart",value:function(){}},{key:"onLoad",value:function(){rn.instance().event.load_image_complate.remove(this.onLoad,this);try{game.cache.checkImageKey(this.user.avatar)&&(""!==this.user.avatar?this.avatar.loadTexture(this.user.avatar):this.avatar.loadTexture("otherSprites","ava-default"))}catch(e){}}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),gC(yC(t.prototype),"destroy",this).call(this)}}])&&fC(n.prototype,i),o&&fC(n,o),t}();function wC(e){return(wC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _C(e,t){return!t||"object"!==wC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function SC(e,t,n){return(SC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EC(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function EC(e){return(EC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CC(e,t){return(CC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kC=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_C(this,EC(t).call(this,game))).x=245,n.y=244,n.positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),n.user=e,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CC(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.avatar,this.frame,this.name,this.levelTitle,this.frame=new Phaser.Sprite(game,-6,-24,"playSprites","ava"),this.addChild(this.frame),this.avatar=new Phaser.Sprite(game,0,10,"otherSprites","ava-default"),this.avatar.width=140,this.avatar.height=140,this.maskAva=new Phaser.Graphics(game,this.avatar.x+this.avatar.width/2,this.avatar.y+this.avatar.width/2),this.maskAva.beginFill(),this.maskAva.drawCircle(0,0,this.avatar.width),this.addChild(this.maskAva),this.avatar.mask=this.maskAva,this.addChild(this.avatar),this.name=new Phaser.Text(game,this.positionWinConfig.last_week_screen.user_name_win.x,this.positionWinConfig.last_week_screen.user_name_win.y,this.user.userName,this.positionWinConfig.last_week_screen.user_name_win.configs),this.name.anchor.set(.5,0),this.addChild(this.name),this.levelTitle=new Phaser.Text(game,this.positionWinConfig.last_week_screen.level_title_win.x,this.positionWinConfig.last_week_screen.level_title_win.y,this.user.level_title,this.positionWinConfig.last_week_screen.level_title_win.configs),this.levelTitle.anchor.set(.5,0),this.addChild(this.levelTitle),""!==this.user.avatar&&this.loadAva()}},{key:"loadAva",value:function(){game.cache.checkImageKey(this.user.avatar)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.user.avatar))}},{key:"loadStart",value:function(){}},{key:"onLoad",value:function(){rn.instance().event.load_image_complate.remove(this.onLoad,this);try{game.cache.checkImageKey(this.user.avatar)&&(""!==this.user.avatar?this.avatar.loadTexture(this.user.avatar):this.avatar.loadTexture("otherSprites","ava-default"))}catch(e){}}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),SC(EC(t.prototype),"destroy",this).call(this)}}])&&bC(n.prototype,i),o&&bC(n,o),t}();function PC(e){return(PC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function RC(e,t){return!t||"object"!==PC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xC(e,t,n){return(xC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TC(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function TC(e){return(TC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IC(e,t){return(IC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var AC=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=RC(this,TC(t).call(this,game))).opponent=n,e.positionWinConfig=JSON.parse(game.cache.getText("positionWinConfig")),e.bg=new Phaser.Button(game,0,0,"bg_create_room"),e.addChild(e.bg),e.lastWeekResult=null,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IC(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtensions(),this.addHeader(),this.addFundaMetal(),this.sendRequestLastWeekResult()}},{key:"sendRequestLastWeekResult",value:function(){ht.instance().showLoading();var e=new SFS2X.SFSObject;e.putInt("opponent_id",this.opponent.id),dV.instance().sendData(ki.TURNBASE_LAST_WEEK_RESULT_REQUEST,e)}},{key:"addHeader",value:function(){this.headerTab=new Phaser.Sprite(game,this.positionWinConfig.header.tab.x,this.positionWinConfig.header.tab.y,this.positionWinConfig.header.tab.nameAtlas,this.positionWinConfig.header.tab.nameSprite),this.addChild(this.headerTab),this.btnBack=new Phaser.Button(game,this.positionWinConfig.header.back.x,this.positionWinConfig.header.back.y,this.positionWinConfig.header.back.nameAtlas,this.onBack,this,null,this.positionWinConfig.header.back.nameSprite),this.headerTab.addChild(this.btnBack),this.txtHeader=new Phaser.Text(game,this.positionWinConfig.header.txt.x,this.positionWinConfig.header.txt.y,de.instance().getData("266"),this.positionWinConfig.header.txt.configs),this.txtHeader.anchor.set(.5,0),this.headerTab.addChild(this.txtHeader)}},{key:"addFundaMetal",value:function(){this.txtScore,this.vsIcon,this.btnShare,this.boxScore,this.txtScore=new Phaser.Text(game,this.positionWinConfig.last_week_screen.txt_score.x,this.positionWinConfig.last_week_screen.txt_score.y,de.instance().getData("268"),this.positionWinConfig.last_week_screen.txt_score.configs),this.txtScore.anchor.set(.5,0),this.addChild(this.txtScore),this.boxScore=new Phaser.Sprite(game,this.positionWinConfig.last_week_screen.box_score.x,this.positionWinConfig.last_week_screen.box_score.y,this.positionWinConfig.last_week_screen.box_score.nameAtlas,this.positionWinConfig.last_week_screen.box_score.nameSprite),this.boxScore.anchor.set(.5),this.addChild(this.boxScore),this.vsIcon=new Phaser.Sprite(game,this.positionWinConfig.last_week_screen.vs.x,this.positionWinConfig.last_week_screen.vs.y,this.positionWinConfig.last_week_screen.vs.nameAtlas,this.positionWinConfig.last_week_screen.vs.nameSprite),this.vsIcon.anchor.set(.5);var e=new Phaser.Text(game,this.positionWinConfig.last_week_screen.txt_vs.x,this.positionWinConfig.last_week_screen.txt_vs.y,this.positionWinConfig.last_week_screen.txt_vs.text,this.positionWinConfig.last_week_screen.txt_vs.configs);e.anchor.set(.5),this.vsIcon.addChild(e),this.addChild(this.vsIcon),this.btnShare=new Phaser.Button(game,this.positionWinConfig.last_week_screen.btn_share.x,this.positionWinConfig.last_week_screen.btn_share.y,this.positionWinConfig.last_week_screen.btn_share.nameAtlas,this.onClickShare,this,null,this.positionWinConfig.last_week_screen.btn_share.nameSprite),this.btnShare.anchor.set(.5);var t=new Phaser.Text(game,this.positionWinConfig.last_week_screen.btn_share.txt.x,this.positionWinConfig.last_week_screen.btn_share.txt.y,de.instance().getData("263"),this.positionWinConfig.last_week_screen.btn_share.txt.configs);t.anchor.set(0,.5),this.btnShare.addChild(t),this.addChild(this.btnShare)}},{key:"onBack",value:function(){be.instance().playSound(be.buttonclick),Qe.instance().event.backLastWeek.dispatch(),this.destroy()}},{key:"onClickShare",value:function(){be.instance().playSound(be.buttonclick),Ri.instance().share()}},{key:"onExtensionResponse",value:function(e){if(e.cmd==ki.TURNBASE_LAST_WEEK_RESULT_RESPONSE&&"OK"==e.params.getUtfString("status")){var t=e.params.getSFSObject("last_week_result"),n=t.getInt("user_won"),i=t.getInt("opponent_won"),o={level:0,level_title:"",is_online:!1};if(t.containsKey("opponent_info")){var a=t.getSFSObject("opponent_info");o.level=a.getInt("level"),o.level_title=a.getUtfString("level_title"),o.is_online=a.getBool("is_online")}this.lastWeekResult={user_won:n,opponent_won:i,opponent_info:o},this.opponent.level_title=o.level_title,this.showResult()}}},{key:"showResult",value:function(){this.scorePoint,this.userSprite,this.opponentSprite,this.scorePoint=new Phaser.Text(game,this.positionWinConfig.last_week_screen.score_point.x,this.positionWinConfig.last_week_screen.score_point.y,"".concat(this.lastWeekResult.opponent_won," - ").concat(this.lastWeekResult.user_won),this.positionWinConfig.last_week_screen.score_point.configs),this.scorePoint.anchor.set(.5),this.boxScore.addChild(this.scorePoint),this.circle=new Phaser.Sprite(game,320,320,"playSprites","Light"),this.circle.anchor.set(.5),this.tweenCircle=game.add.tween(this.circle).to({angle:359},2e3,"Linear",!0,0,-1,!1),this.tweenCircle.start(),this.addChild(this.circle),this.userSprite=new vC(395,734,{id:dV.instance().dataMySeft.user_id,userName:dV.instance().dataMySeft.user_name,avatar:dV.instance().dataMySeft.avatar,is_online:!0,level_title:dV.instance().dataMySeft.level_title}),this.opponentSprite=new vC(125,734,this.opponent),this.addChild(this.userSprite),this.addChild(this.opponentSprite),this.addCongrat(),ht.instance().hideLoading()}},{key:"addCongrat",value:function(){this.lastWeekResult.user_won>this.lastWeekResult.opponent_won?(this.addTxtWhoWin(),this.userWin=new kC({id:dV.instance().dataMySeft.user_id,userName:dV.instance().dataMySeft.user_name,avatar:dV.instance().dataMySeft.avatar,is_online:!0,level_title:dV.instance().dataMySeft.level_title}),this.addChild(this.userWin)):this.lastWeekResult.user_won==this.lastWeekResult.opponent_won?this.addTxtDeuce():(this.addTxtWhoWin(),this.userWin=new kC(this.opponent),this.addChild(this.userWin)),this.addFirework()}},{key:"addTxtWhoWin",value:function(){this.txtWhoWin=new Phaser.Text(game,this.positionWinConfig.last_week_screen.txt_who_win.x,this.positionWinConfig.last_week_screen.txt_who_win.y,de.instance().getData("267"),this.positionWinConfig.last_week_screen.txt_who_win.configs),this.txtWhoWin.anchor.set(.5,0),this.addChild(this.txtWhoWin)}},{key:"addTxtDeuce",value:function(){"en"==de.instance().currentLanguage?(this.txtDeuce=new Phaser.Sprite(game,this.positionWinConfig.last_week_screen.deuce_en.x,this.positionWinConfig.last_week_screen.deuce_en.y,this.positionWinConfig.last_week_screen.deuce_en.nameAtlas,this.positionWinConfig.last_week_screen.deuce_en.nameSprite),this.txtDeuce.anchor.set(.5),this.addChild(this.txtDeuce)):(this.txtDeuce=new Phaser.Sprite(game,this.positionWinConfig.last_week_screen.deuce.x,this.positionWinConfig.last_week_screen.deuce.y,this.positionWinConfig.last_week_screen.deuce.nameAtlas,this.positionWinConfig.last_week_screen.deuce.nameSprite),this.txtDeuce.anchor.set(.5),this.addChild(this.txtDeuce))}},{key:"addFirework",value:function(){this.fireWork=new Phaser.Sprite(game,320*window.GameConfig.RESIZE,210*window.GameConfig.RESIZE,"firework"),this.fireWork.anchor.set(.5),this.fireWork.scale.set(1.3),this.addChild(this.fireWork);this.fireWork.animations.add("run_firework");this.fireWork.animations.play("run_firework",30,!0)}},{key:"addEventExtensions",value:function(){dV.instance().events.onExtensionResponse.add(this.onExtensionResponse,this),Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtensions",value:function(){dV.instance().events.onExtensionResponse.remove(this.onExtensionResponse,this),Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"destroy",value:function(){for(this.removeEventExtensions(),this.tweenCircle&&this.tweenCircle.stop();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),xC(TC(t.prototype),"destroy",this).call(this)}}])&&OC(n.prototype,i),o&&OC(n,o),t}();function LC(e){return(LC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DC(e,t){return!t||"object"!==LC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GC(e){return(GC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function NC(e,t,n){return t&&MC(e.prototype,t),n&&MC(e,n),e}function BC(e,t){return(BC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jC=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=DC(this,GC(t).call(this,game))).event={change_turnbase:new Phaser.Signal,change_menu:new Phaser.Signal,change_value_resource:new Phaser.Signal},e.badConnection=null,e.popupBuy=null,e.popupMoney=null,e.detail=null,e.levelUp=null,e.popupBuyDone=null,e.detailSong=null,e.inviteFriend=null,e.dialog=null,e.dialogConfirmMoney=null,e.dialogConfirmTicket=null,e.shop=null,e.sortShop=null,e.qAndAPopup=null,e.popupClaimQuest=null,e.userProfile=null,e.ranking=null,e.chatOnlineMode=null,e.turnbase=null,e.animClaimReward=null,e.achievedNotification=null,e.chatScreen=null,e.popupShortUserProfile=null,e.dailyReward=null,e.dailyRewardPopup=null,e.soloModeRankingClaimPopup=null,e.screenTimeout=null,e.screenLosePopup=null,e.screenReward=null,e.screenNotReward=null,e.screenDoneSoloMode=null,e.animClaimReward=null,e.questClaimPopup=null,e.achievementClaimPopup=null,e.dailyrewardPopup=null,e.chatScreen=null,e.settingScreen=null,e.settingGameScreen=null,e.settingAccountScreen=null,e.settingAccountUserNameScreen=null,e.settingProfileScreen=null,e.popupBuyItemConfirm=null,e.textScroll=null,e.settingGiftcode=null,e.limitTurn=null,e.suggetRating=null,e.mailSystemScreen=null,e.popupNotEnoughResource=null,e.lastWeekResultScreen=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BC(e,t)}(t,Phaser.Group),NC(t,[{key:"buyItem",value:function(e){dV.instance().dataMySeft.diamond<e.price?this.addPopupMoney(e):this.addPopupBuy(e)}},{key:"addPopupBuyDone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.removePopupBuyDone(),this.popupBuyDone=new Fc(e,t),this.popupBuyDone.event.OK.add(this.chooseBuyDoneOk,this),this.addChild(this.popupBuyDone)}},{key:"chooseBuyDoneOk",value:function(){this.removePopupBuyDone()}},{key:"removePopupBuyDone",value:function(){null!==this.popupBuyDone&&(this.removeChild(this.popupBuyDone),this.popupBuyDone.destroy(),this.popupBuyDone=null)}},{key:"addPopupQAndA",value:function(e){this.removePopupQAndA(),this.qAndAPopup=new QuestAndAchievementScreen(e),this.qAndAPopup.setQuestAndQuestLogs(),this.qAndAPopup.signalBack.add(this.onQAndAPopupBack,this),this.addChild(this.qAndAPopup)}},{key:"onQAndAPopupBack",value:function(){this.removePopupQAndA(),window.smartFoxSignal.sendData(DataCommand.QUEST_LOAD_REQUEST,null)}},{key:"removePopupQAndA",value:function(){null!==this.qAndAPopup&&(this.removeChild(this.qAndAPopup),this.qAndAPopup.destroy(),this.qAndAPopup=null)}},{key:"addPopupBuy",value:function(e){this.removePopupBuy(),this.popupBuy=new Oc,this.popupBuy.event.OK.add(this.chooseOk,this),this.popupBuy.event.CANCLE.add(this.chooseCanle,this),this.popupBuy.setData(e),this.addChild(this.popupBuy)}},{key:"chooseOk",value:function(e){dV.instance().dataMySeft.diamond<e.price?this.addPopupMoney(e):(ht.instance().showLoading(),dV.instance().sendData(kt.SHOP_BUY_PLAYLIST_REQUEST,Hc.begin(e.id))),this.removePopupBuy()}},{key:"chooseCanle",value:function(){this.removePopupBuy()}},{key:"removePopupBuy",value:function(){null!==this.popupBuy&&(this.removeChild(this.popupBuy),this.popupBuy.destroy(),this.popupBuy=null)}},{key:"addPopupMoney",value:function(e){this.removePopupBuy(),this.popupMoney=new Oc,this.popupMoney.event.OK.add(this.chooseMoneyOk,this),this.popupMoney.event.CANCLE.add(this.chooseMoneyCancle,this),this.popupMoney.setContent(de.instance().getData("180")),this.popupMoney.setData(e),this.addChild(this.popupMoney)}},{key:"chooseMoneyOk",value:function(e){this.addShop(1),this.removePopupMoney()}},{key:"chooseMoneyCancle",value:function(){this.removePopupMoney()}},{key:"removePopupMoney",value:function(){null!==this.popupMoney&&(this.removeChild(this.popupMoney),this.popupMoney.destroy(),this.popupMoney=null)}},{key:"addPlaylistDetail",value:function(e){LogConsole.log("addPlaylistDetail"),this.removePlaylistDetail(),this.detail=new N_(e),this.detail.addEventBack(this.removePlaylistDetail,this),this.addChild(this.detail)}},{key:"removePlaylistDetail",value:function(){null!==this.detail&&(this.removeChild(this.detail),this.detail.destroy(),this.detail=null)}},{key:"addLevelUp",value:function(e){var t=this;setTimeout(function(){t.beginAddUpLevel(e)},2500)}},{key:"beginAddUpLevel",value:function(e){this.removeLevelUp(),this.levelUp=new X_(e),this.levelUp.event.close.add(this.closeLevelUp,this),this.addChild(this.levelUp)}},{key:"closeLevelUp",value:function(){this.removeLevelUp()}},{key:"removeLevelUp",value:function(){null!==this.levelUp&&(this.removeChild(this.levelUp),this.levelUp.destroy(),this.levelUp=null,ht.instance().showLoading(),_t.instance().getCheckVote(),_t.instance().event.get_check_vote.add(this.getCheckVote,this))}},{key:"getCheckVote",value:function(e){console.log("getCheckVote : "+e),ht.instance().hideLoading(),_t.instance().event.get_check_vote.remove(this.getCheckVote,this),""===e?this.checkShowVote(dV.instance().dataMySeft.level):"VoteSau"===e&&this.checkShowVote(dV.instance().dataMySeft.level)}},{key:"checkShowVote",value:function(e){(console.log("voteCheck : "+e),e>5)?(e-6)%2==0&&t.instance().addSuggetRating():5===e&&t.instance().addSuggetRating()}},{key:"addDetailSong",value:function(e){this.removeDetailSong(),this.detailSong=new Fl(e),this.addChild(this.detailSong)}},{key:"removeDetailSong",value:function(){null!==this.detailSong&&(this.removeChild(this.detailSong),this.detailSong.destroy(),this.detailSong=null)}},{key:"addDialogInviteFriend",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.removeDialogInviteFriend(),oe.instance().playScript.playing_guide==_o.DONE_ALL&&(this.inviteFriend=new ch(e,t),this.inviteFriend.event.OK.add(this.chooseOkInviteFriend,this),this.inviteFriend.event.CANCLE.add(this.chooseCancleInviteFriend,this),this.inviteFriend.event.OK_CMD.add(this.chooseOkCmdInviteFriend,this),this.inviteFriend.event.CANCLE_CMD.add(this.chooseCancleCmdInviteFriend,this),this.addChild(this.inviteFriend))}},{key:"chooseOkCmdInviteFriend",value:function(e,t){dV.instance().dataMySeft.diamond<t?this.addDialogConfirnMoney(de.instance().getData("181")):dV.instance().sendData(sE.ONLINE_MODE_ROOM_QUICK_JOIN_REQUEST,oE.begin(e)),this.removeDialogInviteFriend()}},{key:"chooseOkInviteFriend",value:function(e){dV.instance().dataMySeft.diamond<e.params.getInt("bet_place")?this.addDialogConfirnMoney(de.instance().getData("181")):dV.instance().sendInvitationReply(e,SFS2X.InvitationReply.ACCEPT),this.removeDialogInviteFriend()}},{key:"chooseCancleCmdInviteFriend",value:function(){this.removeDialogInviteFriend()}},{key:"chooseCancleInviteFriend",value:function(e){dV.instance().sendInvitationReply(e,SFS2X.InvitationReply.REFUSE),this.removeDialogInviteFriend()}},{key:"removeDialogInviteFriend",value:function(){null!==this.inviteFriend&&(this.removeChild(this.inviteFriend),this.inviteFriend.destroy(),this.inviteFriend=null)}},{key:"addDialog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.removeDialog(),this.dialog=new gh(e,t),""!==n&&this.dialog.setContentButton(n),this.dialog.event.OK.add(this.removeDialog,this),this.addChild(this.dialog)}},{key:"removeDialog",value:function(){null!==this.dialog&&(this.removeChild(this.dialog),this.dialog.destroy(),this.dialog=null)}},{key:"addDialogConfirnMoney",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.removeDialogConfirnMoney(),this.dialogConfirmMoney=new _h(e,t),this.dialogConfirmMoney.event.OK.add(this.chooseOkConfirmMoney,this),this.dialogConfirmMoney.event.CANCLE.add(this.chooseCancleConfirmMoney,this),this.addChild(this.dialogConfirmMoney)}},{key:"removeDialogConfirnMoney",value:function(){null!==this.dialogConfirmMoney&&(this.removeChild(this.dialogConfirmMoney),this.dialogConfirmMoney.destroy(),this.dialogConfirmMoney=null)}},{key:"chooseOkConfirmMoney",value:function(){this.addShop(1,Mw.GEM),this.removeDialogConfirnMoney()}},{key:"chooseCancleConfirmMoney",value:function(){this.removeDialogConfirnMoney()}},{key:"addDialogConfirnTicket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.removeDialogConfirnTicket(),this.dialogConfirmTicket=new _h(e,t),this.dialogConfirmTicket.event.OK.add(this.chooseOkConfirmTicket,this),this.dialogConfirmTicket.event.CANCLE.add(this.chooseCancleConfirmTicket,this),this.addChild(this.dialogConfirmTicket)}},{key:"removeDialogConfirnTicket",value:function(){null!==this.dialogConfirmTicket&&(this.removeChild(this.dialogConfirmTicket),this.dialogConfirmTicket.destroy(),this.dialogConfirmTicket=null)}},{key:"chooseOkConfirmTicket",value:function(){this.addShop(1,Mw.TICKET),this.removeDialogConfirnTicket()}},{key:"chooseCancleConfirmTicket",value:function(){this.removeDialogConfirnTicket()}},{key:"addShop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.removeShop(),this.shop=new kb(e,t),this.shop.event.close.add(this.tweenRemoveShop,this),this.shop.event.view_all_shop.add(this.addSortShop,this),this.shop.event.search_shop.add(this.addSortShop,this),this.addChild(this.shop)}},{key:"tweenRemoveShop",value:function(){null!==this.shop&&(Ch.instance().beginSwitch(this.shop,null,!1),Ch.instance().event.tweenComplete.add(this.tweenShopComplete,this))}},{key:"tweenShopComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenShopComplete,this),this.removeShop()}},{key:"removeShop",value:function(){null!==this.shop&&(this.removeChild(this.shop),this.shop.destroy(),this.shop=null)}},{key:"addSortShop",value:function(e){this.removeSortShop(),this.sortShop=new Gb,this.sortShop.setData(e.type,e.genres,e.typeMenu,e.ktSearch),this.sortShop.event.back.add(this.choosebackSortShop,this),Ch.instance().beginSwitch(null,this.sortShop,!1),Ch.instance().event.tweenComplete.add(this.tweenSortShopBeginComplete,this),this.addChild(this.sortShop)}},{key:"choosebackSortShop",value:function(){this.addShop(0),this.removeSortShop()}},{key:"tweenSortShopComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenSortShopComplete,this),this.removeSortShop()}},{key:"tweenSortShopBeginComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenSortShopBeginComplete,this),this.sortShop.addEvent()}},{key:"removeSortShop",value:function(){null!==this.sortShop&&(this.removeChild(this.sortShop),this.sortShop.destroy(),this.sortShop=null)}},{key:"addUserProfile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.removeUserProfile(),this.userProfile=new Im(e,t),this.userProfile.event.back.add(this.removeUserProfile,this),this.addChild(this.userProfile)}},{key:"removeUserProfile",value:function(){null!==this.userProfile&&(this.removeChild(this.userProfile),this.userProfile.destroy(),this.userProfile=null)}},{key:"addRanking",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.ranking=new Ranking(e),this.ranking.event.back.add(this.removeRanking,this),this.addChild(this.ranking)}},{key:"removeRanking",value:function(){null!==this.ranking&&(this.removeChild(this.ranking),this.ranking.destroy(),this.ranking=null)}},{key:"addChatOnlineMode",value:function(){this.chatOnlineMode=new bE,this.chatOnlineMode.x=36,this.chatOnlineMode.y=game.height-444,this.chatOnlineMode.event.close_dialog.add(this.removeChatOnlineMode,this),this.addChild(this.chatOnlineMode)}},{key:"removeChatOnlineMode",value:function(){null!==this.chatOnlineMode&&(this.removeChild(this.chatOnlineMode),this.chatOnlineMode.destroy(),this.chatOnlineMode=null)}},{key:"addChatScreen",value:function(e){this.removeChatScreen(),this.chatScreen=new al(e),this.addChild(this.chatScreen)}},{key:"removeChatScreen",value:function(){null!==this.chatScreen&&(this.removeChild(this.chatScreen),this.chatScreen.destroy(),this.chatScreen=null)}},{key:"addShortUserProfile",value:function(e){this.removeShortUserProfile(),this.popupShortUserProfile=new PopupShortProfileUser(e),this.addChild(this.popupShortUserProfile)}},{key:"removeShortUserProfile",value:function(){null!==this.popupShortUserProfile&&(this.removeChild(this.popupShortUserProfile),this.popupShortUserProfile.destroy(),this.popupShortUserProfile=null)}},{key:"addDailyReward",value:function(e,t){this.removeDailyReward(),this.dailyReward=new Va(e,t),this.dailyReward.event.claimDone.add(this.claimDone,this),this.addChild(this.dailyReward)}},{key:"claimDone",value:function(){this.removeDailyReward(),this.event.change_menu.dispatch()}},{key:"removeDailyReward",value:function(){null!==this.dailyReward&&(this.removeChild(this.dailyReward),this.dailyReward.destroy(),this.dailyReward=null)}},{key:"addDailyRewardPopup",value:function(e){this.removeDailyRewardPopup(),this.dailyRewardPopup=new n_(e),this.addChild(this.dailyRewardPopup)}},{key:"dailyRewardPopupClaim",value:function(){this.removeDailyRewardPopup()}},{key:"removeDailyRewardPopup",value:function(){null!==this.dailyRewardPopup&&(this.removeChild(this.dailyRewardPopup),this.dailyRewardPopup.destroy(),this.dailyRewardPopup=null)}},{key:"addSoloModeRankingClaimPopup",value:function(e,t){this.removeSoloModeRankingClaimPopup(),this.soloModeRankingClaimPopup=new PopupClaimSoloMode(e,t),this.addChild(this.soloModeRankingClaimPopup)}},{key:"removeSoloModeRankingClaimPopup",value:function(){null!==this.soloModeRankingClaimPopup&&(this.removeChild(this.soloModeRankingClaimPopup),this.soloModeRankingClaimPopup.destroy(),this.soloModeRankingClaimPopup=null)}},{key:"addSettingGame",value:function(){this.removeSettingGame(),this.settingScreen=new Mh,this.addChild(this.settingScreen)}},{key:"removeSettingGame",value:function(){null!==this.settingScreen&&(this.removeChild(this.settingScreen),this.settingScreen.destroy(),this.settingScreen=null)}},{key:"addSettingGameScreen",value:function(){this.removeSettingGameScreen(),this.settingGameScreen=new Kh,this.addChild(this.settingGameScreen)}},{key:"removeSettingGameScreen",value:function(){null!==this.settingGameScreen&&(this.removeChild(this.settingGameScreen),this.settingGameScreen.destroy(),this.settingGameScreen=null)}},{key:"addSettingAccountScreen",value:function(){this.removeSettingAccountScreen(),this.settingAccountScreen=new pu,this.addChild(this.settingAccountScreen)}},{key:"removeSettingAccountScreen",value:function(){null!==this.settingAccountScreen&&(this.removeChild(this.settingAccountScreen),this.settingAccountScreen.destroy(),this.settingAccountScreen=null)}},{key:"addSettingAccountUserNameScreen",value:function(){this.removeSettingAccoungUserNameScreen(),this.settingAccountUserNameScreen=new bu,this.addChild(this.settingAccountUserNameScreen)}},{key:"removeSettingAccoungUserNameScreen",value:function(){null!==this.settingAccountUserNameScreen&&(this.removeChild(this.settingAccountUserNameScreen),this.settingAccountUserNameScreen.destroy(),this.settingAccountUserNameScreen=null)}},{key:"addPopupConfirmBuyItemShop",value:function(e,t,n){this.removePopupConfirmBuyItemShop(),this.popupBuyItemConfirm=new zb(e,t,n),this.popupBuyItemConfirm.event.exit.add(this.removePopupConfirmBuyItemShop,this),this.addChild(this.popupBuyItemConfirm)}},{key:"removePopupConfirmBuyItemShop",value:function(){null!==this.popupBuyItemConfirm&&(this.removeChild(this.popupBuyItemConfirm),this.popupBuyItemConfirm.destroy(),this.popupBuyItemConfirm=null)}},{key:"addTextScroll",value:function(e){this.removeTextScroll(),this.textScroll=new l_(e),this.textScroll.event.complete.add(this.removeTextScroll,this),this.addChild(this.textScroll)}},{key:"removeTextScroll",value:function(){null!==this.textScroll&&(this.removeChild(this.textScroll),this.textScroll.destroy(),this.textScroll=null)}},{key:"addBadConnection",value:function(){this.removeBadConnection(),this.badConnection=new cS,this.badConnection.event.OK.add(this.chooseOkBadConnection,this),this.badConnection.event.CANCLE.add(this.chooseCancleBadConnection,this),this.addChild(this.badConnection)}},{key:"chooseOkBadConnection",value:function(){this.removeBadConnection()}},{key:"chooseCancleBadConnection",value:function(){Qe.instance().event.chooseExitBadConnection.dispatch(),this.removeBadConnection()}},{key:"removeBadConnection",value:function(){null!=this.badConnection&&(this.removeChild(this.badConnection),this.badConnection.destroy(),this.badConnection=null)}},{key:"addSettingProfileScreen",value:function(){this.removeSettingProfileScreen(),this.settingProfileScreen=new FS,this.addChild(this.settingProfileScreen)}},{key:"removeSettingProfileScreen",value:function(){null!==this.settingProfileScreen&&(this.removeChild(this.settingProfileScreen),this.settingProfileScreen.destroy(),this.settingProfileScreen=null)}},{key:"addSuggetRating",value:function(){"web"!==oe.instance().platform&&(this.removeSuggetRating(),this.suggetRating=new jE,this.suggetRating.event.close.add(this.removeSuggetRating,this),this.addChild(this.suggetRating))}},{key:"removeSuggetRating",value:function(){null!==this.suggetRating&&(this.removeChild(this.suggetRating),this.suggetRating.destroy(),this.suggetRating=null)}}],[{key:"instance",value:function(){return this.controllScreenDialog||(this.controllScreenDialog=new t),this.controllScreenDialog}}]),NC(t,[{key:"removeAllItem",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}},{key:"removeScreen",value:function(){null!==this.screen&&(this.removeChild(this.screen),this.screen.destroy(),this.screen=null)}},{key:"addLastWeekResultScreen",value:function(e){this.removeLastWeekResultScreen(),this.lastWeekResultScreen=new AC(e),this.addChild(this.lastWeekResultScreen)}},{key:"removeLastWeekResultScreen",value:function(){}},{key:"addPopupNotEnoughResource",value:function(e){this.removePopupNotEnoughResource(),this.popupNotEnoughResource=new uC(e),this.addChild(this.popupNotEnoughResource)}},{key:"removePopupNotEnoughResource",value:function(){null!==this.popupNotEnoughResource&&(this.removeChild(this.popupNotEnoughResource),this.popupNotEnoughResource.destroy(),this.popupNotEnoughResource=null)}},{key:"addScreenTimeOut",value:function(e){this.screenTimeout=new ri(e.score),this.screenTimeout.addPopup(),this.screenTimeout.makeTweenPopup(),this.addChild(this.screenTimeout)}},{key:"removeScreenTimeOut",value:function(){null!==this.screenTimeout&&(this.removeChild(this.screenTimeout),this.screenTimeout.destroy(),this.screenTimeout=null)}},{key:"addScreenLosePopup",value:function(e){this.screenLosePopup=new pi(e.score),this.screenLosePopup.addPopup(),this.screenLosePopup.makeTweenPopup(),this.addChild(this.screenLosePopup)}},{key:"removeScreenLosePopup",value:function(){null!==this.screenLosePopup&&(this.removeChild(this.screenLosePopup),this.screenLosePopup.destroy(),this.screenLosePopup=null)}},{key:"addScreenReward",value:function(e){this.screenReward=new Gi(e.score,e.reward),this.screenReward.addPopup(),this.screenReward.makeTweenPopup(),this.addChild(this.screenReward)}},{key:"removeScreenReward",value:function(){null!==this.screenReward&&(this.removeChild(this.screenReward),this.screenReward.destroy(),this.screenReward=null)}},{key:"addScreenNotReward",value:function(e){this.screenNotReward=new Zi(e.score),this.screenNotReward.addPopup(),this.screenNotReward.makeTweenPopup(),this.addChild(this.screenNotReward)}},{key:"removeScreenNotReward",value:function(){null!==this.screenNotReward&&(this.removeChild(this.screenNotReward),this.screenNotReward.destroy(),this.screenNotReward=null)}},{key:"addScreenDoneSoloMode",value:function(e){this.screenDoneSoloMode=new to(e.score,e.reward,e.playlist),this.screenDoneSoloMode.addPopup(),this.screenDoneSoloMode.makeTweenPopup(),this.addChild(this.screenDoneSoloMode)}},{key:"removeScreenDoneSoloMode",value:function(){null!==this.screenDoneSoloMode&&(this.removeChild(this.screenDoneSoloMode),this.screenDoneSoloMode.destroy(),this.screenDoneSoloMode=null)}},{key:"addAnimClaimReward",value:function(e){this.animClaimReward=new _i(e.type,e.reward,e.finishPoint),this.addChild(this.animClaimReward)}},{key:"removeAnimClaimReward",value:function(){null!==this.animClaimReward&&(this.removeChild(this.animClaimReward),this.animClaimReward.destroy(),this.animClaimReward=null)}},{key:"addQuestClaimReward",value:function(e){this.questClaimPopup=new Ro(e),this.questClaimPopup.makeTweenPopup(),this.questClaimPopup.eventInput.claim.add(this.onClaimQuest,this),this.addChild(this.questClaimPopup)}},{key:"onClaimQuest",value:function(){this.removeQuestClaimReward(),FH.instance().changeScreen(De.QUEST_ACHIEVEMENT,2)}},{key:"removeQuestClaimReward",value:function(){null!==this.questClaimPopup&&(this.removeChild(this.questClaimPopup),this.questClaimPopup.destroy(),this.questClaimPopup=null)}},{key:"addAchievementClaimReward",value:function(e){this.achievementClaimPopup=new Wo(e),this.achievementClaimPopup.eventInput.claim.add(this.onClaimAchievement,this),this.addChild(this.achievementClaimPopup)}},{key:"onClaimAchievement",value:function(){this.removeAchievementClaimReward(),FH.instance().changeScreen(De.QUEST_ACHIEVEMENT,3)}},{key:"removeAchievementClaimReward",value:function(){null!==this.achievementClaimPopup&&(this.removeChild(this.achievementClaimPopup),this.achievementClaimPopup.destroy(),this.achievementClaimPopup=null)}},{key:"addDailyReward",value:function(e){this.dailyrewardPopup=new Va(e.dailyRewardSettings,e.dailyRewardLog),this.dailyrewardPopup.event.claimDone.add(this.dailyrewardPopupClaimDone,this),this.addChild(this.dailyrewardPopup)}},{key:"dailyrewardPopupClaimDone",value:function(){FH.instance().changeScreen(De.MAIN_MENU)}},{key:"removeDailyReward",value:function(){null!==this.dailyrewardPopup&&(this.removeChild(this.dailyrewardPopup),this.dailyrewardPopup.destroy(),this.dailyrewardPopup=null)}},{key:"addChatScreen",value:function(e){this.removeChatScreen(),this.chatScreen=new al(e),this.addChild(this.chatScreen)}},{key:"removeChatScreen",value:function(){null!==this.chatScreen&&(this.removeChild(this.chatScreen),this.chatScreen.destroy(),this.chatScreen=null)}},{key:"addMailSystemScreen",value:function(e){this.removeMailSystemScreen(),this.mailSystemScreen=new oC(e.message_content_id),this.addChild(this.mailSystemScreen)}},{key:"removeMailSystemScreen",value:function(){null!==this.mailSystemScreen&&(this.removeChild(this.mailSystemScreen),this.mailSystemScreen.destroy(),this.mailSystemScreen=null)}},{key:"addSettingGiftcode",value:function(){this.removeSettingGiftcode(),this.settingGiftcode=new nE,this.addChild(this.settingGiftcode)}},{key:"removeSettingGiftcode",value:function(){null!==this.settingGiftcode&&(this.removeChild(this.settingGiftcode),this.settingGiftcode.destroy(),this.settingGiftcode=null)}},{key:"addLimitTurn",value:function(){this.removeLimitTurn(),this.limitTurn=new OE,this.addChild(this.limitTurn)}},{key:"removeLimitTurn",value:function(){null!==this.limitTurn&&(this.removeChild(this.limitTurn),this.limitTurn.destroy(),this.limitTurn=null)}},{key:"changeScreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(LogConsole.log(e),e){case De.SOLOMODE_TIMEOUT:this.removeScreenTimeOut(),this.addScreenTimeOut(t);break;case De.SOLOMODE_LOSE_POPUP:this.removeScreenLosePopup(),this.addScreenLosePopup(t);break;case De.SOLOMODE_REWARD:this.removeScreenReward(),this.addScreenReward(t);break;case De.SOLOMODE_NOT_REWARD:this.removeScreenNotReward(),this.addScreenNotReward(t);break;case De.SOLOMODE_DONE:this.removeScreenDoneSoloMode(),this.addScreenDoneSoloMode(t);break;case De.ANIM_CLAIM_REWARD:this.removeAnimClaimReward(),this.addAnimClaimReward(t);break;case De.QUEST_CLAIM_POPUP:this.removeQuestClaimReward(),this.addQuestClaimReward(t);break;case De.ACHIEVEMENT_CLAIM_POPUP:this.removeAchievementClaimReward(),this.addAchievementClaimReward(t);break;case De.DAILY_REWARD:this.removeDailyReward(),this.addDailyReward(t)}}}]),t}();function UC(e){return(UC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FC(e){return(FC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function HC(e,t,n){return t&&ZC(e.prototype,t),n&&ZC(e,n),e}function VC(e,t){return(VC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function QC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var WC=function(e){function t(e){var n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=FC(t).call(this,game,null))||"object"!==UC(o)&&"function"!=typeof o?QC(i):o).event={choose_item:new Phaser.Signal,view_history:new Phaser.Signal},n.data=e,n.positionEventMode=oe.instance().positionEventMode,n.btnChoose=new _n(n.positionEventMode.selectroom_bg_default,n.chooseEvent,QC(QC(n))),n.btnChoose.alpha=0,n.addChild(n.btnChoose),n.bg=new pn(n.positionEventMode.selectroom_bg_default.nameAtlas,n.positionEventMode.selectroom_bg_default.nameSprite),n.bg.setSize(569*oe.instance().scale,160*oe.instance().scale),n.bg.beginLoad(n.data.banner,a),n.addChild(n.bg),n.bgWin=new Un(n.data.reward_1st),n.bgWin.x=18*oe.instance().scale,n.bgWin.y=19*oe.instance().scale,n.addChild(n.bgWin),n.txtNameEvent=new Qt(n.positionEventMode.selectroom_text_event_name,n.data.name),n.addChild(n.txtNameEvent),n.data.state===t.STATE_COMING?(n.timeEvent=new an(n.data.start_at,n.data.finish_at),n.timeEvent.x=18*oe.instance().scale,n.timeEvent.y=n.txtNameEvent.y+n.txtNameEvent.height,n.addChild(n.timeEvent)):n.data.state===t.STATE_STARTED?(n.countUser=new Rn(n.positionEventMode.queueroom_button_count_user,n.data.number_user),n.addChild(n.countUser),n.bgWin.x=106*oe.instance().scale,n.clock=new Jt,n.clock.x=18*oe.instance().scale,n.clock.y=n.txtNameEvent.y+n.txtNameEvent.height+3*oe.instance().scale,n.clock.setTimer(n.data.finish_at),n.addChild(n.clock)):(n.txtXemKetqua=new Qt(n.positionEventMode.selectroom_text_xemketqua,de.instance().getData("26")),n.txtXemKetqua.y=n.txtNameEvent.y+n.txtNameEvent.height+3*oe.instance().scale,n.addChild(n.txtXemKetqua)),!0===n.data.vip&&(n.iconVip=new Bt(n.positionEventMode.selectroom_icon_vip),n.addChild(n.iconVip)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VC(e,t)}(t,Je),HC(t,null,[{key:"STATE_FINISHED",get:function(){return"FINISHED"}},{key:"STATE_STARTED",get:function(){return"STARTED"}},{key:"STATE_COMING",get:function(){return"COMING"}}]),HC(t,[{key:"setCuu",value:function(e){this.countUser&&(this.countUser.text=e)}},{key:"chooseEvent",value:function(){this.data.state===t.STATE_STARTED?this.clock.getTime()>5?this.event.choose_item.dispatch(this.data):jC.instance().addDialog(de.instance().getData("27")):this.data.state===t.STATE_COMING||this.event.view_history.dispatch(this.data.id)}},{key:"width",get:function(){return 640*oe.instance().scale}},{key:"height",get:function(){return 160*oe.instance().scale}}]),t}();function qC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var KC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataEvent={},this.isStart=[],this.isWaitting=[],this.isEnd=[]}var t,n,i;return t=e,(n=[{key:"resetData",value:function(){this.dataEvent={},this.isStart=[],this.isWaitting=[],this.isEnd=[]}},{key:"setData",value:function(e){var t=new At;t=Object.assign({},t,e),this.dataEvent[t.id]=t,t.state===WC.STATE_COMING?this.isWaitting.push(t.id):t.state===WC.STATE_STARTED?this.isStart.push(t.id):this.isEnd.push(t.id)}},{key:"changeState",value:function(e,t){if(this.dataEvent.hasOwnProperty(e)){this.dataEvent[e].state=t;var n=this.isWaitting.indexOf(e);n>-1&&this.isWaitting.splice(n,1),(n=this.isStart.indexOf(e))>-1&&this.isStart.splice(n,1),(n=this.isEnd.indexOf(e))>-1&&this.isEnd.splice(n,1),this.dataEvent[e].state===WC.STATE_COMING?this.isWaitting.push(e):this.dataEvent[e].state===WC.STATE_STARTED?this.isStart.push(e):this.isEnd.push(e)}}},{key:"getWaittingRoom",value:function(){for(var e=[],t=0;t<this.isWaitting.length;t++)e.push(this.dataEvent[this.isWaitting[t]]);return e.sort(this.sortByTime)}},{key:"getStartRoom",value:function(){for(var e=[],t=0;t<this.isStart.length;t++)e.push(this.dataEvent[this.isStart[t]]);return e.sort(this.sortByTime)}},{key:"getEndRoom",value:function(){for(var e=[],t=0;t<this.isEnd.length;t++)e.push(this.dataEvent[this.isEnd[t]]);return e.sort(this.sortByTimeEnd)}},{key:"sortByTimeEnd",value:function(e,t){return e.finish_at<t.finish_at?1:e.finish_at>t.finish_at?-1:0}},{key:"sortByTime",value:function(e,t){return e.start_at<t.start_at?-1:e.start_at>t.start_at?1:0}}])&&qC(t.prototype,n),i&&qC(t,i),e}();function zC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var YC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"events",get:function(){return"events"}},{key:"finish_at",get:function(){return"finish_at"}},{key:"created",get:function(){return"created"}},{key:"description",get:function(){return"description"}},{key:"banner",get:function(){return"banner"}},{key:"active",get:function(){return"active"}},{key:"start_at",get:function(){return"start_at"}},{key:"event_type",get:function(){return"event_type"}},{key:"name",get:function(){return"name"}},{key:"medal",get:function(){return"medal"}},{key:"id",get:function(){return"id"}},{key:"state",get:function(){return"state"}},{key:"updated",get:function(){return"updated"}},{key:"display_players",get:function(){return"display_players"}},{key:"question_index",get:function(){return"question_index"}},{key:"user_id",get:function(){return"user_id"}},{key:"user_name",get:function(){return"user_name"}},{key:"avatar",get:function(){return"avatar"}},{key:"is_dead",get:function(){return"is_dead"}},{key:"top_three",get:function(){return"top_three"}},{key:"event_id",get:function(){return"event_id"}},{key:"position",get:function(){return"position"}},{key:"achieved",get:function(){return"achieved"}},{key:"event_ranking",get:function(){return"event_ranking"}},{key:"your_rank",get:function(){return"your_rank"}},{key:"diamond",get:function(){return"diamond"}},{key:"event_reward",get:function(){return"event_reward"}},{key:"ticket",get:function(){return"ticket"}},{key:"support_item",get:function(){return"support_item"}},{key:"rank",get:function(){return"rank"}},{key:"reward_1st",get:function(){return"reward_1st"}},{key:"event_top_rank_log",get:function(){return"event_top_rank_log"}},{key:"top",get:function(){return"top"}},{key:"event",get:function(){return"event"}},{key:"number_user",get:function(){return"number_user"}},{key:"highest_achieved",get:function(){return"highest_achieved"}},{key:"vip",get:function(){return"vip"}}],(n=null)&&zC(t.prototype,n),i&&zC(t,i),e}();function XC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var JC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reward=0,this.id=0,this.quest="",this.required=0,this.quest_type=0,this.order=0,this.reward_type=""}var t,n,i;return t=e,i=[{key:"get_quest",get:function(){return"quest"}},{key:"get_reward",get:function(){return"reward"}},{key:"get_id",get:function(){return"id"}},{key:"get_required",get:function(){return"required"}},{key:"get_quest_type",get:function(){return"quest_type"}},{key:"get_order",get:function(){return"order"}},{key:"get_reward_type",get:function(){return"reward_type"}}],(n=null)&&XC(t.prototype,n),i&&XC(t,i),e}();var $C=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user_id=0,this.created=0,this.quest_id=0,this.id=0,this.state="",this.updated=0};function ek(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ktPush=!1,cordova.plugins&&cordova.plugins.notification&&cordova.plugins.notification.local&&(this.ktPush=!0,cordova.plugins.notification.local.on("add",this.addCallback,this),cordova.plugins.notification.local.on("trigger",this.triggerCallback,this),cordova.plugins.notification.local.on("click",this.clickCallback,this),cordova.plugins.notification.local.on("clear",this.clearCallback,this),cordova.plugins.notification.local.on("cancel",this.cancelCallback,this),cordova.plugins.notification.local.on("update",this.updateCallback,this),cordova.plugins.notification.local.on("clearall",this.clearallCallback,this),cordova.plugins.notification.local.on("cancelall",this.cancelallCallback,this))}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.pushLocal||(this.pushLocal=new e),this.pushLocal}}],(n=[{key:"addCallback",value:function(e){console.log("addCallback-----------------------------"),console.log(e)}},{key:"triggerCallback",value:function(e){console.log("triggerCallback-----------------------------"),console.log(e)}},{key:"clickCallback",value:function(e){console.log("clickCallback-----------------------------"),console.log(e)}},{key:"clearCallback",value:function(e){console.log("clearCallback-----------------------------"),console.log(e)}},{key:"cancelCallback",value:function(e){console.log("cancelCallback-----------------------------"),console.log(e)}},{key:"updateCallback",value:function(e){console.log("updateCallback-----------------------------"),console.log(e)}},{key:"clearallCallback",value:function(e){console.log("clearallCallback-----------------------------"),console.log(e)}},{key:"cancelallCallback",value:function(e){console.log("cancelallCallback-----------------------------"),console.log(e)}},{key:"setLocalPush",value:function(e){this.ktPush&&cordova.plugins.notification.local.schedule(e)}},{key:"clearPush",value:function(e){this.ktPush&&cordova.plugins.notification.local.clear(e)}},{key:"add_minutes",value:function(e,t){return new Date(e.getTime()+6e4*t)}}])&&ek(t.prototype,n),i&&ek(t,i),e}();function nk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ik=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.objData={},this.arrIdFriend=[]}var t,n,i;return t=e,(n=[{key:"setOnOff",value:function(e,t){(console.log("id : "+e),console.log("is_online : "+t),this.objData.hasOwnProperty(e))&&(this.objData[e].is_online=t)}},{key:"setFriend",value:function(e,t){this.objData.hasOwnProperty(e)||this.arrIdFriend.push(e),this.objData[e]=t}},{key:"removeFriend",value:function(e){if(console.log("removeFriend : "+e),console.log(this.objData),this.objData.hasOwnProperty(e)){console.log("--------------");var t=this.arrIdFriend.indexOf(e);t>-1&&this.arrIdFriend.splice(t,1),delete this.objData[e]}}},{key:"getFriends",value:function(){for(var e=[],t=0;t<this.arrIdFriend.length;t++)e.push(this.objData[this.arrIdFriend[t]]);return e=e.sort(this.compareOnline)}},{key:"compareOnline",value:function(e){return!0===e.is_online?-1:1}},{key:"resetData",value:function(){this.objData={},this.arrIdFriend=[]}}])&&nk(t.prototype,n),i&&nk(t,i),e}();function ok(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ak=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event={buy_playlist:new Phaser.Signal,event_update:new Phaser.Signal,load_online_mode_bet_complete:new Phaser.Signal,load_online_mode_room_bet_complete:new Phaser.Signal,load_event_list_complete:new Phaser.Signal,load_suggestion_opponent_complete:new Phaser.Signal,load_playlist_level_setting_complete:new Phaser.Signal,load_playlist_complete:new Phaser.Signal,load_random_opponent_complete:new Phaser.Signal,load_main_quest_complete:new Phaser.Signal,load_list_friend_complete:new Phaser.Signal,friend_status_update:new Phaser.Signal},this.genres=new gt,this.playlist=new Et,this.listFriend=new ik,this.playlist_level_setting={},this.quickplay_bet_setting=[],this.createroom_bet_setting=[],this.random_opponents=new It,this.random_opponents.event.call_load.add(this.sendReloadRandomOpponent,this),this.roomEvent=new KC,this.suggestion_opponents=[],this.quests=[],this.quest_logs=[],this.ktLoadOnlineModeBet=!1,this.ktLoadOnlineModeRoomBet=!1,this.ktLoadEventList=!1,this.ktLoadSuggestionOpponent=!1,this.ktLoadPlaylistLevelSetting=!1,this.ktLoadPlaylist=!1,this.ktLoadRandomOpponent=!1,this.ktloadMainQuestComplete=!1,this.ktLoadFriend=!1,this.ktLoadingEventList=!1,dV.instance().events.onExtensionResponse.add(this.getData,this)}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.dataUser||(this.dataUser=new e),this.dataUser}}],(n=[{key:"resetData",value:function(){this.genres.resetData(),this.playlist.resetData(),this.listFriend.resetData(),this.playlist_level_setting={},this.quickplay_bet_setting=[],this.createroom_bet_setting=[],this.random_opponents.resetData(),this.roomEvent.resetData(),this.suggestion_opponents=[],this.quests=[],this.quest_logs=[],oe.instance().soloModePlaylists=[],this.ktLoadOnlineModeBet=!1,this.ktLoadOnlineModeRoomBet=!1,this.ktLoadEventList=!1,this.ktLoadSuggestionOpponent=!1,this.ktLoadPlaylistLevelSetting=!1,this.ktLoadPlaylist=!1,this.ktLoadRandomOpponent=!1,this.ktloadMainQuestComplete=!1,this.ktLoadFriend=!1,this.ktLoadingEventList=!1}},{key:"getData",value:function(e){switch(e.cmd){case kt.SHOP_PLAYLIST_LOAD_RESPONSE:case Me.INIT_SHOP_PLAYLIST_RESPONSE:"OK"===e.params.getUtfString(xt.status)&&this.buildDataShop(e.params),this.event.load_playlist_complete.dispatch();break;case kt.SHOP_BUY_PLAYLIST_RESPONSE:if(console.log("SHOP_BUY_PLAYLIST_RESPONSE---------"),ht.instance().hideLoading(),"OK"===e.params.getUtfString(xt.status)&&0===e.params.getInt("is_solo_mode")){var t=e.params.getInt(xt.playlist_id),n=new vt;n.playlist_id=t,n.user_id=dV.instance().dataMySeft.user_id,n.next_level_score=this.playlist_level_setting[n.level+1],n.active=1,_t.instance().insertTableUserPlaylistMappings([n],!0),_t.instance().event.insert_data_user_playlist_mapping_complete.add(this.insertDataUserPlaylistMappingBuy,this)}break;case Me.INIT_CLIENT_GAME_DATA_RESPONSE:this.buildInitClientData(e.params);break;case Me.EVENT_UPDATE:this.roomEventUpdate(e.params);break;case Me.TURNBASE_RELOAD_RANDOM_OPPONENT_RESPONSE:var i=this.random_opponents.getArrLenght();"OK"===e.params.getUtfString(xt.status)&&this.buildRandomOpponent(e.params),0===i&&this.event.load_random_opponent_complete.dispatch();break;case Me.INIT_ONLINE_MODE_BET_RESPONSE:"OK"===e.params.getUtfString(xt.status)&&this.buildOnlineModeBet(e.params),this.event.load_online_mode_bet_complete.dispatch();break;case Me.INIT_ONLINE_MODE_ROOM_BET_RESPONSE:"OK"===e.params.getUtfString(xt.status)&&this.buildOnlineModeRoomBet(e.params),this.event.load_online_mode_room_bet_complete.dispatch();break;case Me.INIT_EVENT_LIST_RESPONSE:!0===this.ktLoadEventList&&(this.ktLoadEventList=!1,"OK"===e.params.getUtfString(xt.status)&&this.buildEventList(e.params),this.event.load_event_list_complete.dispatch());break;case Me.INIT_SUGGESTION_OPPONENT_RESPONSE:"OK"===e.params.getUtfString(xt.status)&&this.buildSuggestionOpponent(e.params),this.event.load_suggestion_opponent_complete.dispatch();break;case Me.INIT_PLAYLIST_LEVEL_SETTING_RESPONSE:"OK"===e.params.getUtfString(xt.status)&&this.buildPlaylistLevelSetting(e.params),this.event.load_playlist_level_setting_complete.dispatch();break;case Me.INIT_MAIN_QUEST_DATA_RESPONSE:"OK"===e.params.getUtfString(xt.status)&&this.buildMainQuest(e.params),this.event.load_main_quest_complete.dispatch();break;case Me.INIT_USER_PLAYLIST_MAPPING_RESPONSE:"OK"===e.params.getUtfString(xt.status)&&this.buildUserPlaylistMapping(e.params);break;case cr.USER_FRIEND_LIST_LOAD_RESPONSE:"OK"===e.params.getUtfString(xt.status)&&this.buildListFriend(e.params),this.event.load_list_friend_complete.dispatch();break;case cr.USER_FRIEND_ONLINE_STATUS_UPDATE:this.buildFriendOnlineStatusUpdate(e.params);break;case cr.USER_FRIEND_STATUS_UPDATE:this.buildFriendStatusUpdate(e.params)}}},{key:"insertDataUserPlaylistMappingBuy",value:function(){_t.instance().event.insert_data_user_playlist_mapping_complete.remove(this.insertDataUserPlaylistMappingBuy,this),game.time.events.add(.5*Phaser.Timer.SECOND,this.callBuyPlaylistComplete,this)}},{key:"callBuyPlaylistComplete",value:function(){this.event.buy_playlist.dispatch()}},{key:"beginLoadData",value:function(){ht.instance().showLoading(),oe.instance().dataPackage=null,this.resetData(),this.sendGetDataShop()}},{key:"buildFriendStatusUpdate",value:function(e){var t=e.getUtfString("action");if("ACCEPT_ADD_REQUEST"===t){if(e.containsKey("friend")){var n=e.getSFSObject("friend"),i=new pg;i.level=n.getInt("level"),i.user_name=n.getUtfString("user_name"),i.id=n.getInt("id"),i.avatar=n.getUtfString("avatar"),i.is_online=n.getBool("is_online"),i.vip=n.getBool("vip"),this.listFriend.setFriend(i.id,i)}}else if("REMOVE_FRIEND"===t&&e.containsKey("id")){var o=e.getInt("id");this.listFriend.removeFriend(o)}}},{key:"buildFriendOnlineStatusUpdate",value:function(e){this.listFriend.setOnOff(e.getInt("id"),e.getBool("is_online")),this.event.friend_status_update.dispatch()}},{key:"buildListFriend",value:function(e){if(e.getInt("user_id")===dV.instance().dataMySeft.user_id&&e.containsKey("friends")){for(var t=e.getSFSArray("friends"),n=0;n<t.size();n++){var i=t.getSFSObject(n),o=new pg;o.level=i.getInt("level"),o.user_name=i.getUtfString("user_name"),o.id=i.getInt("id"),o.avatar=i.getUtfString("avatar"),o.is_online=i.getBool("is_online"),o.vip=i.getBool("vip"),this.listFriend.setFriend(o.id,o)}this.ktLoadFriend=!0}}},{key:"buildUserPlaylistMapping",value:function(e){if(e.containsKey("user_playlist_mappings")){for(var t=[],n=e.getSFSArray("user_playlist_mappings"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=new vt;a.user_id=o.getInt("user_id"),a.level=o.getInt("level"),a.playlist_id=o.getInt("playlist_id"),a.exp_score=o.getInt("exp_score"),a.created=o.getLong("created"),a.active=o.getInt("active"),a.id=o.getLong("id"),a.current_level_score=o.getInt("current_level_score"),a.next_level_score=o.getInt("next_level_score"),a.updated=o.getLong("updated"),a.master=o.getInt("master"),t.push(a)}_t.instance().insertTableUserPlaylistMappings(t),_t.instance().event.insert_data_user_playlist_mapping_complete.add(this.insertDataUserPlaylistMappingComplete,this)}}},{key:"insertDataUserPlaylistMappingComplete",value:function(){_t.instance().event.insert_data_user_playlist_mapping_complete.remove(this.insertDataUserPlaylistMappingComplete,this),this.sendGetEventList(),this.checkChangeScreen()}},{key:"buildMainQuest",value:function(e){if(e.containsKey("quests"))for(var t=e.getSFSArray("quests"),n=0;n<t.size();n++){var i=new JC,o=t.getSFSObject(n);i.reward=o.getInt("reward"),i.id=o.getInt("id"),i.quest=o.getUtfString("quest"),i.required=o.getInt("required"),i.quest_type=o.getInt("quest_type"),i.order=o.getInt("order"),i.reward_type=o.getUtfString("reward_type"),this.quests.push(i)}if(e.containsKey("quest_logs"))for(var a=e.getSFSArray("quest_logs"),s=0;s<a.size();s++){var r=new $C,l=a.getSFSObject(s);r.user_id=l.getInt("user_id"),r.created=l.getLong("created"),r.quest_id=l.getInt("quest_id"),r.id=l.getLong("id"),r.state=l.getUtfString("state"),r.updated=l.getLong("updated"),this.quest_logs.push(r)}this.ktloadMainQuestComplete=!0}},{key:"buildRandomOpponent",value:function(e){if(e.containsKey("random_opponents")){for(var t=e.getSFSArray("random_opponents"),n=0;n<t.size();n++){var i=t.getSFSObject(n),o={};o.gender=i.getUtfString("gender"),o.userName=i.getUtfString("user_name"),o.last_login=i.getLong("last_login"),o.genre_count=i.getLong("genre_count"),o.id=i.getInt("id"),o.avatar=i.getUtfString("avatar"),o.vip=i.getBool("vip"),this.random_opponents.setUser(o)}this.ktLoadRandomOpponent=!0}}},{key:"buildPlaylistLevelSetting",value:function(e){if(e.containsKey("playlist_level_setting")){for(var t=e.getSFSArray("playlist_level_setting"),n=[],i=0;i<t.size();i++){var o=t.getSFSObject(i),a={level:0,exp_score:0,id:0,song_number:0};a.level=o.getInt("level"),a.exp_score=o.getInt("exp_score"),a.id=o.getInt("id"),a.song_number=o.getInt("song_number"),this.playlist_level_setting[a.level]=a.exp_score,n.push(a)}_t.instance().insertTablePlaylistLevelSetting(n),_t.instance().event.insert_data_playlist_level_setting_complete.add(this.insertDataPlaylistLevelSettingComplete,this)}}},{key:"insertDataPlaylistLevelSettingComplete",value:function(){_t.instance().event.insert_data_playlist_level_setting_complete.remove(this.insertDataPlaylistLevelSettingComplete,this),_t.instance().updatePlaylistReloadAt(),_t.instance().event.update_playlist_reload_at_complete.add(this.updatePlaylistReloadAtComplete,this)}},{key:"updatePlaylistReloadAtComplete",value:function(){_t.instance().event.update_playlist_reload_at_complete.remove(this.updatePlaylistReloadAtComplete,this),this.sendGetUserPlaylistMapping()}},{key:"buildSuggestionOpponent",value:function(e){if(e.containsKey("suggestion_opponents")){for(var t=e.getSFSArray("suggestion_opponents"),n=0;n<t.size();n++){var i=t.getSFSObject(n),o={};o.gender=i.getUtfString("gender"),o.user_name=i.getUtfString("user_name"),o.last_login=i.getLong("last_login"),o.id=i.getInt("id"),o.avatar=i.getUtfString("avatar"),o.vip=i.getBool("vip"),this.suggestion_opponents.push(o)}this.ktLoadSuggestionOpponent=!0}}},{key:"buildEventList",value:function(e){if(e.containsKey("events")){for(var t=e.getSFSArray(YC.events),n=0;n<t.size();n++){var i=t.getSFSObject(n),o=new At;if(o.finish_at=i.getLong(YC.finish_at),o.created=i.getLong(YC.created),o.description=i.getUtfString(YC.description),o.banner=i.getUtfString(YC.banner),o.active=i.getInt(YC.active),o.start_at=i.getLong(YC.start_at),o.event_type=i.getUtfString(YC.event_type),o.name=i.getUtfString(YC.name),o.medal=i.getUtfString(YC.medal),o.id=i.getLong(YC.id),o.state=i.getUtfString(YC.state),o.updated=i.getLong(YC.updated),i.containsKey(YC.number_user)&&(o.number_user=i.getInt(YC.number_user)),i.containsKey(YC.reward_1st)){var a=i.getSFSObject(YC.reward_1st);o.reward_1st.diamond=a.getInt(YC.diamond),o.reward_1st.event_id=a.getLong(YC.event_id),o.reward_1st.ticket=a.getInt(YC.ticket),o.reward_1st.created=a.getLong(YC.created),o.reward_1st.event_ranking=a.getUtfString(YC.event_ranking),o.reward_1st.updated=a.getLong(YC.updated),o.reward_1st.support_item=a.getInt(YC.support_item)}this.roomEvent.setData(o)}this.ktLoadEventList=!0,this.checkSetLocalPush()}}},{key:"buildOnlineModeRoomBet",value:function(e){if(e.containsKey("online_mode_room_bet_setting")){for(var t=e.getSFSArray("online_mode_room_bet_setting"),n=0;n<t.size();n++){var i=t.getSFSObject(n),o={};o.id=i.getInt("id"),o.bet_place=i.getInt("bet_place"),o.percent_of_fee=i.getInt("percent_of_fee"),this.createroom_bet_setting.push(o)}this.ktLoadOnlineModeRoomBet=!0}}},{key:"buildOnlineModeBet",value:function(e){if(e.containsKey("online_mode_bet_setting")){for(var t=e.getSFSArray("online_mode_bet_setting"),n=0;n<t.size();n++){var i=t.getSFSObject(n),o={};o.user_level_required=i.getInt("user_level_required"),o.id=i.getInt("id"),o.bet_place=i.getInt("bet_place"),o.percent_of_fee=i.getInt("percent_of_fee"),this.quickplay_bet_setting.push(o)}this.ktLoadOnlineModeBet=!0}}},{key:"roomEventUpdate",value:function(e){if("OK"===e.getUtfString(xt.status)){var t=e.getLong("event_id"),n=e.getUtfString("event_state");this.roomEvent.changeState(t,n),this.event.event_update.dispatch()}}},{key:"getNewPlaylist",value:function(e){this.playlist.removePlaylistInArrShop(e),this.playlist.changeBuyItemById(e)}},{key:"buildInitClientData",value:function(e){"OK"===e.getUtfString(xt.status)&&(this.buildOnlineModeBet(e),this.buildOnlineModeRoomBet(e),this.buildEventList(e),this.buildSuggestionOpponent(e),this.buildPlaylistLevelSetting(e),this.buildRandomOpponent(e),this.buildMainQuest(e),this.checkSetLocalPush()),this.checkChangeScreen()}},{key:"checkSetLocalPush",value:function(){var e=this.roomEvent.getWaittingRoom();if(e.length>0)for(var t=0;t<e.length;t++){var n=e[t].id,i=qr.instance().getItem("RoomEvent"+n);if("error"===i||null===i||"null"===i){var o=(new Date).getTime();if(!(e[t].start_at-o<3e5)){var a="",s=new Date(e[t].start_at),r=new Date(e[t].finish_at),l=s.getDate(),c=s.getMonth()+1,h=s.getHours(),u=s.getMinutes(),d=r.getDate(),f=r.getMonth()+1,p=r.getFullYear(),g=r.getHours(),y=r.getMinutes();a=d===l?h+"h"+u+" - "+g+"h"+y+" "+d+"/"+f+"/"+p:h+"h"+u+" "+l+"/"+c+" - "+g+"h"+y+" "+d+"/"+f+"/"+p;var m={id:999,title:"Sự kiện "+e[t].name+" sắp bắt đầu",text:a,trigger:{at:new Date(e[t].start_at-3e5)}};tk.instance().setLocalPush(m),tk.instance().ktPush&&He.instance().logEvent("LocalRoomEventPush"),qr.instance().setItem("RoomEvent"+n,!0);break}}}}},{key:"buildDataShop",value:function(e){if("OK"===e.getUtfString(xt.status)){for(var t=e.getSFSArray(xt.genres),n={},i={genres:[],playlists:[]},o=0;o<t.size();o++){var a=t.getSFSObject(o),s=new ft;s.code=a.getUtfString(xt.code),s.genre=a.getUtfString(xt.genre),s.id=a.getInt(xt.id),s.region=a.getUtfString(xt.region),s.parent=a.getInt(xt.parent),s.priority=a.getInt(xt.priority),s.active=a.getInt(xt.active),n[s.id]=s.region,i.genres.push(s)}for(var r=e.getSFSArray(xt.playlists),l=0;l<r.size();l++){var c=r.getSFSObject(l),h=new wt;if(h.is_highlight=c.getInt(xt.is_highlight),h.used_times=c.getInt(xt.used_times),h.thumb=c.getUtfString(xt.thumb),h.created=c.getLong(xt.created),h.is_owner=c.getInt(xt.is_owner),h.is_default=c.getInt(xt.is_default),h.genre_id=c.getInt(xt.genre_id),h.purchased=c.getInt(xt.purchased),h.songs=c.getUtfString(xt.songs),h.price=c.getInt(xt.price),h.is_general=c.getInt(xt.is_general),h.name=c.getUtfString(xt.name),h.id=c.getInt(xt.id),h.vip=c.getInt(xt.vip),h.is_solo_mode=c.getInt(xt.is_solo_mode),h.updated=c.getLong(xt.updated),h.country_id=c.getInt(xt.country_id),h.purchased_count=c.getInt(xt.purchased_count),h.active=c.getInt(xt.active),h.description=c.getUtfString("description"),n.hasOwnProperty(h.genre_id)&&(h.region=n[h.genre_id]),c.containsKey(xt.user_playlist_mapping)){var u=c.getSFSObject(xt.user_playlist_mapping);u&&(h.user.user_id=u.getInt(xt.user_id),h.user.level=u.getInt(xt.level),h.user.playlist_id=u.getInt(xt.playlist_id),h.user.exp_score=u.getInt(xt.exp_score),h.user.created=u.getLong(xt.created),h.user.active=u.getInt(xt.active),h.user.id=u.getLong(xt.id),h.user.current_level_score=u.getInt(xt.current_level_score),h.user.next_level_score=u.getInt(xt.next_level_score),h.user.updated=u.getLong(xt.updated))}i.playlists.push(h)}_t.instance().insertDataShopPlaylist(i),_t.instance().event.insert_data_shop_playlist_complete.add(this.insertDataShopPlaylistComplete,this)}}},{key:"insertDataShopPlaylistComplete",value:function(){console.log("insertDataShopPlaylistComplete--"),_t.instance().event.insert_data_shop_playlist_complete.remove(this.insertDataShopPlaylistComplete,this),this.sendGetPlaylistLevelSetting()}},{key:"sendReloadRandomOpponent",value:function(){dV.instance().sendData(Me.TURNBASE_RELOAD_RANDOM_OPPONENT_REQUEST,null)}},{key:"sendGetInitClientGameData",value:function(){dV.instance().sendData(Me.INIT_CLIENT_GAME_DATA_REQUEST,null)}},{key:"sendGetDataShop",value:function(){_t.instance().getConfigData(),_t.instance().event.get_config_data_complete.add(this.getConfigDataComplete,this)}},{key:"getConfigDataComplete",value:function(){_t.instance().event.get_config_data_complete.remove(this.getConfigDataComplete,this),oe.instance().playlist_reload_at!==window.RESOURCE.playlist_reload_at?(_t.instance().resetTableShopPlaylist(),_t.instance().event.reset_data_shop_playlist_complete.add(this.resetTableShopPlaylistComplete,this)):(_t.instance().getPlaylistLevelSetting(),_t.instance().event.get_playlist_level_setting_complete.add(this.getPlaylistLevelSettingComplete,this))}},{key:"getPlaylistLevelSettingComplete",value:function(e){_t.instance().event.get_playlist_level_setting_complete.remove(this.getPlaylistLevelSettingComplete,this);for(var t=0;t<e.length;t++)this.playlist_level_setting[e[t].level]=e[t].exp_score;this.sendGetUserPlaylistMapping()}},{key:"resetTableShopPlaylistComplete",value:function(){_t.instance().event.reset_data_shop_playlist_complete.remove(this.resetTableShopPlaylistComplete,this),dV.instance().sendData(Me.INIT_SHOP_PLAYLIST_REQUEST,null)}},{key:"setPlayList",value:function(e){this.playlist.setDataPlayList(e)}},{key:"sendGetOnlineModeBet",value:function(){dV.instance().sendData(Me.INIT_ONLINE_MODE_BET_REQUEST,null)}},{key:"sendGetOnlineModeRoomBet",value:function(){dV.instance().sendData(Me.INIT_ONLINE_MODE_ROOM_BET_REQUEST,null)}},{key:"sendGetEventList",value:function(){!1===this.ktLoadEventList&&(this.ktLoadEventList=!0,dV.instance().sendData(Me.INIT_EVENT_LIST_REQUEST,null))}},{key:"sendGetSuggestionOpponent",value:function(){dV.instance().sendData(Me.INIT_SUGGESTION_OPPONENT_REQUEST,null)}},{key:"sendGetPlaylistLevelSetting",value:function(){dV.instance().sendData(Me.INIT_PLAYLIST_LEVEL_SETTING_REQUEST,null)}},{key:"sendGetMainQuest",value:function(){dV.instance().sendData(Me.INIT_MAIN_QUEST_DATA_REQUEST,null)}},{key:"sendGetUserPlaylistMapping",value:function(){_t.instance().resetTableUserPlaylistMappings(),_t.instance().event.reset_data_user_playlist_mapping_complete.add(this.resetDataUserPlaylistMappingComplete,this)}},{key:"resetDataUserPlaylistMappingComplete",value:function(){_t.instance().event.reset_data_user_playlist_mapping_complete.remove(this.resetDataUserPlaylistMappingComplete,this),dV.instance().sendData(Me.INIT_USER_PLAYLIST_MAPPING_REQUEST,null)}},{key:"sendGetFriendsList",value:function(){dV.instance().sendData(cr.USER_FRIEND_LIST_LOAD_REQUEST,ey.begin(dV.instance().dataMySeft.user_id))}},{key:"checkChangeScreen",value:function(){ht.instance().hideLoading(),void 0!==oe.instance().isNewUser&&1==oe.instance().isNewUser?FH.instance().changeScreen(De.NEW_USER):FH.instance().changeScreen(De.MAIN_MENU)}}])&&ok(t.prototype,n),i&&ok(t,i),e}();function sk(e){return(sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lk(e,t){return!t||"object"!==sk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ck(e){return(ck=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hk(e,t){return(hk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uk=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=lk(this,ck(t).call(this,game,0,0,"screen-dim"))).input.useHandCursor=!1,e.positionDisconnectConfig=JSON.parse(game.cache.getText("positionDisconnectConfig")),e.popup,e.signalInput=new Phaser.Signal,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hk(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){this.addPopup(this.positionDisconnectConfig.popup)}},{key:"addPopup",value:function(e){this.popup=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+e.y)*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.animDisc,this.btn,this.txtDisconnect,this.addChild(this.popup),this.addAnim(),this.addBtn(this.positionDisconnectConfig.btn),this.addTxtDisconnect(this.positionDisconnectConfig.txtDis)}},{key:"addAnim",value:function(){this.animDisc=new Phaser.Sprite(game,285*window.GameConfig.RESIZE,60*window.GameConfig.RESIZE,"disconnect"),this.animDisc.anchor.set(.5,0);this.animDisc.animations.add("run_anim_dis");this.animDisc.animations.play("run_anim_dis",20,!0),this.popup.addChild(this.animDisc)}},{key:"addBtn",value:function(e){this.btn=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btn.inputEnabled=!0,this.btn.events.onInputUp.addOnce(this.onClickRetry,this),this.popup.addChild(this.btn),this.txtBtn,this.addTxtBtn(this.positionDisconnectConfig.txtBtn)}},{key:"onClickRetry",value:function(){this.btn.inputEnabled=!1,LogConsole.log("Retry"),this.onConnectServer()}},{key:"onConnectServer",value:function(){FH.instance().changeScreen(De.LOGIN),this.destroy()}},{key:"addTxtDisconnect",value:function(e){this.txtDisconnect=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.text,e.configs),this.txtDisconnect.anchor.set(.5,0),this.popup.addChild(this.txtDisconnect)}},{key:"addTxtBtn",value:function(e){this.txtBtn=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.text,e.configs),this.txtBtn.anchor.set(.5,0),this.btn.addChild(this.txtBtn)}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&rk(n.prototype,i),o&&rk(n,o),t}();function dk(e){return(dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pk(e,t){return!t||"object"!==dk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gk(e,t,n){return(gk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yk(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yk(e){return(yk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mk(e,t){return(mk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vk=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=pk(this,yk(t).call(this,game))).positionConfig=JSON.parse(game.cache.getText("positionChatScreenConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mk(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.bg=new Phaser.Button(game,0,0,"BG_Opacity_100"),this.addChild(this.bg),this.bg.events.onInputUp.add(this.closePopup,this),this.checkInputTrue=!1,this.addCircleRotation(),this.addAnimAva(),this.addAva()}},{key:"closePopup",value:function(){!0===this.checkInputTrue&&this.destroy()}},{key:"addCircleRotation",value:function(){this.circle=new Phaser.Sprite(game,game.width/2,game.height/2,"defaultSource","Light_Rotation"),this.circle.anchor.set(.5),this.circle.alpha=0,this.tweenCircle=game.add.tween(this.circle).to({angle:359},2e3,"Linear",!0,0,-1,!1),this.addChild(this.circle)}},{key:"addAva",value:function(){this.ava=new Phaser.Sprite(game,game.width/2,game.height/2,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.ava.width=200,this.ava.height=200,this.ava.scale.set(0),this.addChild(this.ava),this.maskAva=new Phaser.Graphics(game,0,0),this.maskAva.beginFill(),this.maskAva.drawCircle(0,0,200),this.maskAva.endFill(),this.ava.mask=this.maskAva,this.ava.addChild(this.maskAva),this.loadAva()}},{key:"loadAva",value:function(){var e=this;ht.instance().showLoading(),this.timeout=setTimeout(function(){if(null!==dV.instance().dataMySeft)if(game.cache.checkImageKey("ava_fb"))e.onLoad();else{var t=new Phaser.Loader(game);t.crossOrigin="anonymous",t.onLoadComplete.add(e.onLoad,e),t.image("ava_fb",dV.instance().dataMySeft.avatar),t.start()}},500)}},{key:"onLoad",value:function(){var e=this;game.cache.checkImageKey("ava_fb")?(this.ava.loadTexture("ava_fb"),ht.instance().hideLoading(),game.add.tween(this.ava.scale).to({x:1,y:1},2e3,Phaser.Easing.Elastic.Out,!1).start(),this.animAva.alpha=1,this.animAva.animations.play("run_anim_ava",30,!1),this.addLabel(),this.addStar(),this.addText(),this.addFireWork(),this.tweenCircle.start(),this.circle.alpha=1,this.timeOutInput=setTimeout(function(){e.checkInputTrue=!0},4e3)):(ht.instance().hideLoading(),game.add.tween(this.ava.scale).to({x:1,y:1},2e3,Phaser.Easing.Elastic.Out,!1).start(),this.animAva.alpha=1,this.animAva.animations.play("run_anim_ava",30,!1),this.addLabel(),this.addStar(),this.addText(),this.addFireWork(),this.tweenCircle.start(),this.circle.alpha=1,this.timeOutInput=setTimeout(function(){e.checkInputTrue=!0},4e3))}},{key:"addAnimAva",value:function(){this.animAva=new Phaser.Sprite(game,game.width/2,game.height/2-16,"VipAva"),this.animAva.anchor.set(.5),this.animAva.scale.set(2),this.animAva.alpha=0;this.animAva.animations.add("run_anim_ava");this.animAva.anchor.set(.5),this.addChild(this.animAva)}},{key:"addLabel",value:function(){var e=this;this.frameVip=new Phaser.Sprite(game,0,0,"vipSource","Ava_Stroke"),this.frameVip.anchor.set(.5),this.ava.addChild(this.frameVip),this.label=new Phaser.Sprite(game,this.ava.x,this.ava.y+90,"VipLabel"),this.label.anchor.set(.5);this.label.animations.add("run_anim_label");this.addChild(this.label),this.timeoutLabel=setTimeout(function(){e.label.animations.play("run_anim_label",30,!1)},500)}},{key:"addStar",value:function(){this.star=new Phaser.Sprite(game,this.ava.x,this.ava.y,"VipStar"),this.star.anchor.set(.5),this.star.scale.set(2);this.star.animations.add("run_anim_star");this.star.animations.play("run_anim_star",30,!0),this.addChild(this.star)}},{key:"addText",value:function(){this.txt1=new Phaser.Text(game,this.positionConfig.txt_vip_1.x,this.animAva.y+180,de.instance().getData("274"),this.positionConfig.txt_vip_1.configs),this.txt1.anchor.set(.5),this.txt1.alpha=0,this.addChild(this.txt1),this.txt2=new Phaser.Text(game,this.positionConfig.txt_vip_2.x,this.animAva.y+220,de.instance().getData("275"),this.positionConfig.txt_vip_2.configs),this.txt2.anchor.set(.5),this.txt2.alpha=0,this.addChild(this.txt2);var e=game.add.tween(this.txt1).to({alpha:1},1e3,"Linear",!1),t=game.add.tween(this.txt2).to({alpha:1},1e3,"Linear",!1);e.start(),t.start()}},{key:"addFireWork",value:function(){this.fireWork=new Phaser.Sprite(game,this.ava.x,this.ava.y,"firework"),this.fireWork.anchor.set(.5),this.fireWork.scale.set(1.3),this.addChild(this.fireWork);this.fireWork.animations.add("run_firework");this.fireWork.animations.play("run_firework",30,!0)}},{key:"destroy",value:function(){for(clearTimeout(this.timeout),clearTimeout(this.timeoutLabel),clearTimeout(this.timeOutInput);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),gk(yk(t.prototype),"destroy",this).call(this)}}])&&fk(n.prototype,i),o&&fk(n,o),t}();function wk(e){return(wk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _k(e,t){return!t||"object"!==wk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sk(e){return(Sk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ek(e,t){return(Ek=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ck=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=_k(this,Sk(t).call(this,game))).disconnect=null,e.playScript=null,e.dialog=null,e.bigAva=null,e.plsWait=null,e.upVip=null,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ek(e,t)}(t,Phaser.Group),n=t,o=[{key:"instance",value:function(){return this.controllDialog||(this.controllDialog=new t),this.controllDialog}}],(i=[{key:"addPopupDisconnect",value:function(){this.removePopupDisconnect(),this.disconnect=new uk,this.addChild(this.disconnect)}},{key:"removePopupDisconnect",value:function(){null!==this.disconnect&&(this.removeChild(this.disconnect),this.disconnect.destroy(),this.disconnect=null)}},{key:"addPlayScript",value:function(){this.removePlayScript(),this.playScript=new _o,this.addChild(this.playScript)}},{key:"removePlayScript",value:function(){null!==this.playScript&&(this.removeChild(this.playScript),this.playScript.destroy(),this.playScript=null)}},{key:"addDialog",value:function(e){this.removeDialog(),this.dialog=new gh(e),this.dialog.event.OK.add(this.removeDialog,this),this.addChild(this.dialog)}},{key:"removeDialog",value:function(){null!==this.dialog&&(this.removeChild(this.dialog),this.dialog.destroy(),this.dialog=null)}},{key:"addBigAva",value:function(e){this.removeBigAva(),this.bigAva=new fg(e),this.addChild(this.bigAva)}},{key:"removeBigAva",value:function(){null!==this.bigAva&&(this.removeChild(this.bigAva),this.bigAva.destroy(),this.bigAva=null)}},{key:"addPlsWait",value:function(){this.removePlsWait(),this.plsWait=new Phaser.Text(game,game.width/2,game.height/2,"Bạn vui lòng chờ một chút\nđể làm mới lại lần tiếp theo  ...",{font:"GilroyMedium",fill:"#ffffff",fontSize:19,align:"center"}),this.plsWait.anchor.set(.5),game.add.tween(this.plsWait).to({alpha:0},1500,"Linear",!0).start(),this.addChild(this.plsWait)}},{key:"addUpToVip",value:function(){this.removeUpToVip(),this.upVip=new vk,this.addChild(this.upVip)}},{key:"removeUpToVip",value:function(){null!==this.upVip&&(this.removeChild(this.upVip),this.upVip.destroy(),this.upVip=null)}},{key:"removePlsWait",value:function(){null!==this.plsWait&&(this.removeChild(this.plsWait),this.plsWait.destroy(),this.plsWait=null)}},{key:"removeAllItem",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}}])&&bk(n.prototype,i),o&&bk(n,o),t}();function kk(e){return(kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ok(e,t){return!t||"object"!==kk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rk(e,t,n){return(Rk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xk(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function xk(e){return(xk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tk(e,t){return(Tk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ik=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ok(this,xk(t).call(this,game))).positionBootConfig=JSON.parse(game.cache.getText("positionBootConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tk(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){var e=this,t=new z;this.addChild(t),this.addLogoSprite();ht.instance().hideLoading(),Gl.getGame(function(t){LogConsole.log("success--------"),LogConsole.log(t),LogConsole.log(t.resource),void 0!==t.resource?(!0,clearInterval(n),e.definedGame(t)):(ht.instance().hideLoading(),jC.instance().addDialog("Kiểm tra kết nối của bạn trước khi vào game"))}),ht.instance().showLoading();var n=setInterval(function(){Gl.getGame(function(t){LogConsole.log("success--------"),LogConsole.log(t),LogConsole.log(t.resource),void 0!==t.resource?(!0,clearInterval(n),ht.instance().hideLoading(),e.definedGame(t)):(ht.instance().hideLoading(),jC.instance().addDialog("Kiểm tra kết nối của bạn trước khi vào game"))})},5e3)}},{key:"addThemeTET",value:function(){var e=new Pe;this.addChild(e)}},{key:"definedGame",value:function(e){var t=this;oe.instance().isRefreshMenu.checking=!1,oe.instance().menuLoadResponses=null,e.resource.hasOwnProperty("language")?de.instance().changeDataLanguage(e.resource.language):de.instance().changeDataLanguage("vn");var n=0,i=0;"and"===oe.instance().platform?(n=mt.instance().convertVersionToInt(oe.VERSION_AND),i=e.resource.hasOwnProperty("android_version")?mt.instance().convertVersionToInt(e.resource.android_version):mt.instance().convertVersionToInt(oe.VERSION_AND)):"ios"===oe.instance().platform&&(n=mt.instance().convertVersionToInt(oe.VERSION_IOS),i=e.resource.hasOwnProperty("ios_version")?mt.instance().convertVersionToInt(e.resource.ios_version):mt.instance().convertVersionToInt(oe.VERSION_IOS)),n<i&&(oe.instance().ktUpdate=!0),window.RESOURCE=Object.assign({},window.RESOURCE,e.resource),oe.instance().ktUpdate?("and"===oe.instance().platform?jC.instance().addDialog(de.instance().getData("322"),window.RESOURCE.android_storage_link,de.instance().getData("323")):"ios"===oe.instance().platform&&jC.instance().addDialog(de.instance().getData("322"),window.RESOURCE.ios_storage_link,de.instance().getData("323")),ht.instance().hideLoading()):(Qe.instance().event.onConnectServer.add(this.onConnectServer,this),window.isTest?window.cordova&&"undefined"!=typeof device?(Fe.instance().init(),Fe.instance().event.loginComplete.add(this.loginFbMobileComplete,this),Fe.instance().event.loginStatusUnknown.add(this.loginStatusUnknown,this),Fe.instance().event.loginError.add(this.loginErrorFbMobileComplete,this)):this.initFaceBook(function(){He.instance().logEvent(He.LoginScreen),checkLoginState(function(e,n,i){ht.instance().hideLoading(),1==e&&null!=n&&null!=i?(oe.instance().LOG_IN_BY_FB=!0,ht.instance().showLoading(),t.getServerInfomationAjax(n,i,function(e){"OK"==e.status?(oe.instance().response=e,oe.instance().userId=e.userId,oe.instance().token=e.token,oe.instance().isNewUser=e.isNewUser,t.sfsInfo=e.sfs_info,t.initServer()):"Failed"==e.status?(ht.instance().hideLoading(),jC.instance().addDialog(e.message)):(Ck.instance().addPopupDisconnect(),Ck.instance().addDialog(de.instance().getData("324")))})):(t.addButtonFBLogin(),window.cordova&&"undefined"!=typeof device&&t.addButtonPlayNow(),!1===window.isTest&&t.addButtonPlayNow())})}):(ht.instance().hideLoading(),this.addButtonPlayNow()))}},{key:"loginErrorFbMobileComplete",value:function(){ht.instance().hideLoading(),this.addButtonFBLogin(),window.cordova&&"undefined"!=typeof device&&(Ck.instance().addPopupDisconnect(),this.addButtonPlayNow()),!1===window.isTest&&this.addButtonPlayNow()}},{key:"loginStatusUnknown",value:function(){this.addButtonFBLogin(),this.addButtonPlayNow(),ht.instance().hideLoading()}},{key:"loginFbMobileComplete",value:function(e){var t=this;oe.instance().LOG_IN_BY_FB=!0,LogConsole.log(e),this.getServerInfomationAjax(e.userID,e.accessToken,function(e){"OK"==e.status?(LogConsole.log(e),oe.instance().response=e,oe.instance().userId=e.userId,oe.instance().token=e.token,oe.instance().isNewUser=e.isNewUser,t.sfsInfo=e.sfs_info,t.initServer()):"Failed"==e.status?(ht.instance().hideLoading(),jC.instance().addDialog(e.message)):(t.addButtonPlayNow(),Ck.instance().addPopupDisconnect(),console.warn("Could not get login & sfs informations from webservice"))})}},{key:"onConnectServer",value:function(){LogConsole.log("onConnectServeronConnectServer"),this.loginSFS(oe.instance().userId,oe.instance().token)}},{key:"addButtonFBLogin",value:function(){"en"==de.instance().currentLanguage?(this.fbBtn=game.add.button(this.positionBootConfig.btn_fb_en.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionBootConfig.btn_fb_en.y)*window.GameConfig.RESIZE,this.positionBootConfig.btn_fb_en.nameAtlas,this.onclickFBLoginBt,this,null,this.positionBootConfig.btn_fb_en.nameSprite),this.fbBtn.anchor.set(.5),this.fbBtn.scale.set(.9),this.addChild(this.fbBtn)):(this.fbBtn=game.add.button(this.positionBootConfig.btn_fb.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionBootConfig.btn_fb.y)*window.GameConfig.RESIZE,this.positionBootConfig.btn_fb.nameAtlas,this.onclickFBLoginBt,this,null,this.positionBootConfig.btn_fb.nameSprite),this.fbBtn.anchor.set(.5),this.fbBtn.scale.set(.9),this.addChild(this.fbBtn))}},{key:"addButtonPlayNow",value:function(){"en"==de.instance().currentLanguage?(this.playNowBtn=game.add.button(this.positionBootConfig.btn_play_now_en.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionBootConfig.btn_play_now_en.y)*window.GameConfig.RESIZE,this.positionBootConfig.btn_play_now_en.nameAtlas,this.onclickPlayNow,this,null,this.positionBootConfig.btn_play_now_en.nameSprite),this.playNowBtn.anchor.set(.5),this.playNowBtn.scale.set(.9),this.addChild(this.playNowBtn)):(this.playNowBtn=game.add.button(this.positionBootConfig.btn_play_now.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+this.positionBootConfig.btn_play_now.y)*window.GameConfig.RESIZE,this.positionBootConfig.btn_play_now.nameAtlas,this.onclickPlayNow,this,null,this.positionBootConfig.btn_play_now.nameSprite),this.playNowBtn.anchor.set(.5),this.playNowBtn.scale.set(.9),this.addChild(this.playNowBtn))}},{key:"onclickPlayNow",value:function(){var e=this;dV.instance().ktLogin=!1,dV.instance().loginSFSByDevice(function(t){"OK"==t.status?(LogConsole.log(t),oe.instance().response=t,oe.instance().userId=t.userId,oe.instance().token=t.token,oe.instance().isNewUser=t.isNewUser,e.sfsInfo=t.sfs_info,e.initServer()):"Failed"==t.status?(ht.instance().hideLoading(),jC.instance().addDialog(t.message)):(Ck.instance().addPopupDisconnect(),console.warn("Could not get login & sfs informations from webservice"))})}},{key:"onclickFBLoginBt",value:function(){dV.instance().ktLogin=!1,He.instance().logEvent(He.Login_buttons),window.cordova&&"undefined"!=typeof device?(Fe.instance().login(),ht.instance().showLoading()):FB.login(function(e){"unknown"==e.status&&alert(de.instance().getData("324")),"connected"==e.status&&FH.instance().changeScreen(De.LOGIN)},{scope:"email, user_gender, user_friends"})}},{key:"addLogoSprite",value:function(){var e=game.add.sprite(this.positionBootConfig.logo.x*window.GameConfig.RESIZE,this.positionBootConfig.logo.y*window.GameConfig.RESIZE,"".concat(this.positionBootConfig.logo.nameAtlas),"".concat(this.positionBootConfig.logo.nameSprite));e.anchor.set(.5),this.addChild(e)}},{key:"loginSFS",value:function(e,t){dV.instance().loginSFS(e,t)}},{key:"initFaceBook",value:function(e){FB.init({appId:window.RESOURCE.fb_app,cookie:!0,xfbml:!0,version:"v3.1"}),e()}},{key:"getServerInfomationAjax",value:function(e,t,n){var i={fbId:e,accessToken:t,device:dt.getNamePlatform()};$.ajax({url:window.RESOURCE.login_url,type:"POST",data:i,dataType:"json",success:function(e){n(e)},error:function(e,t,i){console.error("Error get server infomation"),console.error(i),console.error(e.status),console.error(e.responseJSON),n({status:"ERROR_LOGIN"})}})}},{key:"initServer",value:function(){var e={host:"",port:0,useSSL:0,zone:"",debug:!1};this.sfsInfo&&(e.host=this.sfsInfo.sfs_host,e.port=this.sfsInfo.sfs_port,e.useSSL=this.sfsInfo.sfs_ssl,e.zone=this.sfsInfo.sfs_zone,e.debug=this.sfsInfo.sfs_debug,_t.instance().zoneName=e.zone),LogConsole.log(this.sfsInfo),dV.instance().initListenerSfs(e),dV.instance().connect()}},{key:"destroy",value:function(){for(Qe.instance().event.onConnectServer.remove(this.onConnectServer,this),Fe.instance().event.loginComplete.remove(this.loginFbMobileComplete,this),Fe.instance().event.loginError.remove(this.loginErrorFbMobileComplete,this),Fe.instance().event.loginStatusUnknown.remove(this.loginStatusUnknown,this);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Rk(xk(t.prototype),"destroy",this).call(this)}}])&&Pk(n.prototype,i),o&&Pk(n,o),t}();function Ak(e){return(Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Dk(e){return(Dk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gk(e,t){return(Gk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Nk=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,o=Dk(t).call(this,game,0,0,e),(n=!o||"object"!==Ak(o)&&"function"!=typeof o?Mk(i):o).inputEnabled=!0,n.scrollMaskMenu=new Phaser.Graphics(game,0,353*window.GameConfig.RESIZE),n.scrollMaskMenu.drawRect(0,353*window.GameConfig.RESIZE,game.width,1090*window.GameConfig.RESIZE),n.scrollMaskMenu.endFill(),n.countHeight=n.height-440*window.GameConfig.RESIZE,n.txtRefresh=n.addTxtRefresh(),n.addChild(n.txtRefresh),n.savedPosition=new Phaser.Point(n.x,n.y),n.movingSpeed=0,n.friction=.94,n.speedMult=.7,n.input.enableDrag(),n.input.allowHorizontalDrag=!1,n.events.onDragStart.add(function(){oe.instance().menuDragging=!0,n.isDraging=!0,n.savedPosition=new Phaser.Point(n.x,n.y),n.movingSpeed=0},Mk(Mk(n))),n.events.onDragStop.add(n.onDragStop,Mk(Mk(n))),n.events.onDragUpdate.add(n.onDragUpdate,Mk(Mk(n))),n.mask=n.scrollMaskMenu,n.countHeightChild=0,n.event={refreshMenu:new Phaser.Signal,scrollChange:new Phaser.Signal,scrollDefault:new Phaser.Signal,scrollList:new Phaser.Signal},n.isScrollChange=!1,1==oe.instance().isScrollChange?(n.y=-235,n.scrollMaskMenu.countHeight=1270):(n.y=0,n.scrollMaskMenu.countHeight=1090),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gk(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"addTxtRefresh",value:function(){var e=new Phaser.Text(game,game.world.centerX,250*window.GameConfig.RESIZE,"Refresh..",{font:"".concat(20*window.GameConfig.RESIZE,"px GilroyMedium"),fill:"#ffffff"});return e.anchor.set(.5),e}},{key:"onDragStop",value:function(){this.isDraging=!1,this.position.y>100*window.GameConfig.RESIZE?this.tweenInertiaComplete():(this.tweenInertia=game.add.tween(this).to({alpha:1},300,"Linear",!0),this.tweenInertia.start(),this.tweenInertia.onUpdateCallback(this.updateInertia,this),this.tweenInertia.onComplete.add(this.tweenInertiaComplete,this))}},{key:"updateInertia",value:function(){!0!==this.isDraging&&(this.movingSpeed>0?(this.y>30*window.GameConfig.RESIZE?this.y+=this.movingSpeed*Math.sin(this.movingangle)*.1:this.position.y<(game.height-150)*window.GameConfig.RESIZE-this.countHeight?this.y+=this.movingSpeed*Math.sin(this.movingangle)*.1:this.y+=this.movingSpeed*Math.sin(this.movingangle),this.movingSpeed=this.movingSpeed*this.friction,this.distanceNew=this.distanceNew*this.friction):this.distanceNew>0&&(this.movingSpeed=this.distanceNew*this.speedMult,this.movingangle=this.angleNew))}},{key:"catchScrollChange",value:function(){!1===this.isScrollChange?this.y<=-50?!0!==this.isScrollChange&&(this.isScrollChange=!0,!0!==oe.instance().isScrollChange&&(this.event.scrollChange.dispatch(),this.scrollChange(),oe.instance().isScrollChange=!0)):!1!==this.isScrollChange&&(this.isScrollChange=!1,!1!==oe.instance().isScrollChange&&(oe.instance().isScrollChange=!1,this.event.scrollDefault.dispatch(),this.scrollDefault())):this.y<=-30?!0!==this.isScrollChange&&(this.isScrollChange=!0,!0!==oe.instance().isScrollChange&&(this.event.scrollChange.dispatch(),this.scrollChange(),oe.instance().isScrollChange=!0)):!1!==this.isScrollChange&&(this.isScrollChange=!1,!1!==oe.instance().isScrollChange&&(oe.instance().isScrollChange=!1,this.event.scrollDefault.dispatch(),this.scrollDefault()))}},{key:"tweenInertiaComplete",value:function(){(this.catchScrollChange(),this.position.y>=0)&&game.add.tween(this).to({y:0},200,"Linear").start();(this.position.y>100*window.GameConfig.RESIZE&&this.sendRequestMenuChallenges(),(game.height-130)*window.GameConfig.RESIZE-this.countHeight<0)?this.position.y<(game.height-130)*window.GameConfig.RESIZE-this.countHeight&&(1==oe.instance().isScrollChange&&this.countHeight<this.scrollMaskMenu.countHeight?game.add.tween(this).to({y:-245},200,"Linear").start():game.add.tween(this).to({y:(game.height-130)*window.GameConfig.RESIZE-this.countHeight},200,"Linear").start()):1==oe.instance().isScrollChange?game.add.tween(this).to({y:-235},200,"Linear").start():game.add.tween(this).to({y:0},200,"Linear").start();oe.instance().menuDragging=!1}},{key:"onDragUpdate",value:function(){this.distanceNew=Math.abs(this.y-this.savedPosition.y),this.angleNew=0,this.y-this.savedPosition.y>0?this.angleNew=90:this.angleNew=-90,this.savedPosition=new Phaser.Point(this.x,this.y)}},{key:"catchScrollList",value:function(){this.y<-420&&this.y>-840?this.event.scrollList.dispatch(4):this.y<-840&&this.y>-1260?this.event.scrollList.dispatch(8):this.y<-1260&&this.y>-1680?this.event.scrollList.dispatch(12):this.y<-1680&&this.y>-2100?this.event.scrollList.dispatch(16):this.y<-2100&&this.y>-2520?this.event.scrollList.dispatch(20):this.y<-2520&&this.y>-2940?this.event.scrollList.dispatch(24):this.y<-2940&&this.y>-3360?this.event.scrollList.dispatch(28):this.y<-2940&&this.y>-3360?this.event.scrollList.dispatch(28):this.y<-3360&&this.y>-3780?this.event.scrollList.dispatch(32):this.y<-3780&&this.y>-4200&&this.event.scrollList.dispatch(36)}},{key:"sendRequestMenuChallenges",value:function(){this.checkRequestSocketMainMenuCheck(),0==oe.instance().isRefreshMenu.checking&&(this.countHeightChild=0,this.countHeight=this.height-440*window.GameConfig.RESIZE,this.event.refreshMenu.dispatch())}},{key:"checkRequestSocketMainMenuCheck",value:function(){1==oe.instance().isRefreshMenu.checking?Date.now()-oe.instance().isRefreshMenu.updated<6e3?oe.instance().isRefreshMenu.checking=!0:oe.instance().isRefreshMenu.checking=!1:oe.instance().isRefreshMenu.checking=!1}},{key:"scrollChange",value:function(){this.scrollMaskMenu.clear(),this.scrollMaskMenu.drawRect(0,333*window.GameConfig.RESIZE,game.width,1110*window.GameConfig.RESIZE),this.scrollMaskMenu.countHeight=1270}},{key:"scrollDefault",value:function(){this.scrollMaskMenu.clear(),this.scrollMaskMenu.drawRect(0,353*window.GameConfig.RESIZE,game.width,1090*window.GameConfig.RESIZE),this.scrollMaskMenu.countHeight=1090}},{key:"addChildren",value:function(e){this.countHeightChild+=e.height,this.countHeight+=e.height,this.addChild(e)}}])&&Lk(n.prototype,i),o&&Lk(n,o),t}();function Bk(e){return(Bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Uk(e,t){return!t||"object"!==Bk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fk(e){return(Fk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zk(e,t){return(Zk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hk=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Uk(this,Fk(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.event={onClickFindGame:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zk(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){var e=this;this.btn=new Phaser.Button(game,this.positionMenuConfig.btn_findgame.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_findgame.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_findgame.nameAtlas,function(){},this,null,this.positionMenuConfig.btn_findgame.nameSprite),this.btn.anchor.set(.5),this.btn.events.onInputUp.add(function(){be.instance().playSound(be.buttonclick),e.event.onClickFindGame.dispatch(),He.instance().logEvent(He.Find_Game_turnbase_mode_button)},this);var t=new Phaser.Text(game,this.positionMenuConfig.txt_btn_findgame.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_btn_findgame.y*window.GameConfig.RESIZE,de.instance().getData(211),this.positionMenuConfig.txt_btn_findgame.configs);t.anchor.set(.5),this.btn.addChild(t);var n=new Phaser.Sprite(game,0,-23*window.GameConfig.RESIZE,"FindGameButton");n.anchor.set(.5),this.runAnim=n.animations.add("run_anim"),this.runAnim.onLoop.add(this.onAnimLooped,this),this.runAnim.play(30,!0),this.btn.addChild(n),this.addChild(this.btn)}},{key:"startAnim",value:function(){this.runAnim.play(30,!0)}},{key:"onAnimLooped",value:function(e,t){t.loopCount%10==0&&t.stop()}},{key:"setPosY",value:function(e){game.add.tween(this.btn).to({y:e},150,"Linear",!0).start()}},{key:"setPosYDefault",value:function(e){game.add.tween(this.btn).to({y:e},150,"Linear",!0).start()}},{key:"sendRequestFindGame",value:function(){dV.instance().sendData(ki.CHALLENGE_GAME_FIND_OPPONENTS_REQUEST,null)}}])&&jk(n.prototype,i),o&&jk(n,o),t}();function Vk(e){return(Vk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wk(e,t){return!t||"object"!==Vk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qk(e){return(qk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kk(e,t){return(Kk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zk=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Wk(this,qk(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.event={onClickPractice:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kk(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.btn=new Phaser.Button(game,this.positionMenuConfig.btn_practice.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_practice.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_practice.nameAtlas,function(){},this,null,this.positionMenuConfig.btn_practice.nameSprite),this.btn.anchor.set(.5),this.btn.events.onInputUp.add(this.onClickPracticeBtn,this);var e=new Phaser.Text(game,this.positionMenuConfig.txt_btn_practice.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_btn_practice.y*window.GameConfig.RESIZE,de.instance().getData(213),this.positionMenuConfig.txt_btn_practice.configs);e.anchor.set(.5),this.btn.addChild(e);var t=new Phaser.Sprite(game,0,-23*window.GameConfig.RESIZE,"PracticeButton");t.anchor.set(.5),this.runAnim=t.animations.add("run_anim"),this.runAnim.onLoop.add(this.onAnimLooped,this),this.runAnim.play(30,!0),this.btn.addChild(t),this.addChild(this.btn)}},{key:"onClickPracticeBtn",value:function(){He.instance().logEvent(He.Solo_mode_button),be.instance().playSound(be.buttonclick),this.event.onClickPractice.dispatch()}},{key:"startAnim",value:function(){this.runAnim.play(30,!0)}},{key:"onAnimLooped",value:function(e,t){t.loopCount%13==0&&t.stop()}},{key:"setPosY",value:function(e){game.add.tween(this.btn).to({y:e},150,"Linear",!0).start()}},{key:"setPosYDefault",value:function(e){game.add.tween(this.btn).to({y:e},150,"Linear",!0).start()}},{key:"sendSoloModePlaylistsRequest",value:function(){dV.instance().sendData(ki.SOLO_MODE_PLAYLISTS_REQUEST,null)}}])&&Qk(n.prototype,i),o&&Qk(n,o),t}();function Yk(e){return(Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jk(e,t){return!t||"object"!==Yk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $k(e){return($k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eP(e,t){return(eP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tP=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Jk(this,$k(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.event={goToParty:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eP(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.btn=new Phaser.Button(game,this.positionMenuConfig.btn_party.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_party.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_party.nameAtlas,function(){},this,null,this.positionMenuConfig.btn_party.nameSprite),this.btn.anchor.set(.5),this.btn.events.onInputUp.add(this.onClickPartyBtn,this);var e=new Phaser.Text(game,this.positionMenuConfig.txt_btn_party.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_btn_party.y*window.GameConfig.RESIZE,de.instance().getData(212),this.positionMenuConfig.txt_btn_party.configs);e.anchor.set(.5),this.btn.addChild(e);var t=new Phaser.Sprite(game,0,-23*window.GameConfig.RESIZE,"PartyButton");t.anchor.set(.5),this.runAnim=t.animations.add("run_anim"),this.runAnim.onLoop.add(this.onAnimLooped,this),this.runAnim.play(30,!0),this.btn.addChild(t),this.addChild(this.btn)}},{key:"onClickPartyBtn",value:function(){be.instance().playSound(be.buttonclick),this.event.goToParty.dispatch()}},{key:"startAnim",value:function(){this.runAnim.play(30,!0)}},{key:"setPosY",value:function(e){game.add.tween(this.btn).to({y:e},150,"Linear",!0).start()}},{key:"setPosYDefault",value:function(e){game.add.tween(this.btn).to({y:e},150,"Linear",!0).start()}},{key:"onAnimLooped",value:function(e,t){t.loopCount%10==0&&t.stop()}}])&&Xk(n.prototype,i),o&&Xk(n,o),t}();function nP(e){return(nP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oP(e){return(oP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aP(e,t){return(aP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var rP=function(e){function t(e,n,i,o){var a,s,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,r=oP(t).call(this,game,e,n,i,o),(a=!r||"object"!==nP(r)&&"function"!=typeof r?sP(s):r).anchor.set(.5),a.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),a.inputEnabled=!0,a.event={tick:new Phaser.Signal},a.addTick(),a.events.onInputUp.add(function(){a.event.tick.dispatch()},sP(sP(a))),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aP(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"addTick",value:function(){this.btn_tick=new Phaser.Sprite(game,this.positionMenuConfig.delete_game.tick_of_btn_delete.x,this.positionMenuConfig.delete_game.tick_of_btn_delete.y,this.positionMenuConfig.delete_game.tick_of_btn_delete.nameAtlas,this.positionMenuConfig.delete_game.tick_of_btn_delete.nameSprite),this.btn_tick.anchor.set(.5),this.btn_tick.kill(),this.addChild(this.btn_tick)}},{key:"showTick",value:function(){void 0!==this.btn_tick&&this.btn_tick.revive()}},{key:"hideTick",value:function(){void 0!==this.btn_tick&&this.btn_tick.kill()}}])&&iP(n.prototype,i),o&&iP(n,o),t}();function lP(e){return(lP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hP(e,t){return!t||"object"!==lP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uP(e){return(uP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dP(e,t){return(dP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fP=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=hP(this,uP(t).call(this,game,e,n,i,o))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),a.event={playGame:new Phaser.Signal,nudgeFriend:new Phaser.Signal,deleteChallenge:new Phaser.Signal},a.isHide=!1,a.timeoutInput=null,a}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dP(e,t)}(t,Phaser.Sprite),n=t,(o=[{key:"setData",value:function(e,t,n,i,o,a,s,r,l,c,h,u,d,f){this.avaKey=e,this.btnTexture=t,this.txtButton="",this.configTxtButton=null,this.userWon=n,this.opponentWon=i,this.gameLogId=o,this.requestId=a,this.turnCount=s,this.opponentEntity=r,this.mode=l,this.isFinish=c,this.can_be_poked=h,this.poked=u,this.baseUpdated=d,this.updated=this.controllUpdated(this.baseUpdated),this.message=f,-1!==s?s>0?(this.btnTexture="btnNotFirstGame","en"==de.instance().currentLanguage?(this.txtButton="PLAY",this.configTxtButton={font:"23px GilroyMedium",fill:"#00eef1",boundsAlignH:"center",boundsAlignV:"middle"}):(this.txtButton="CHƠI",this.configTxtButton={font:"23px GilroyMedium",fill:"#00eef1",boundsAlignH:"center",boundsAlignV:"middle"})):(this.btnTexture="btnFirstGame","en"==de.instance().currentLanguage?(this.txtButton="ACCEPT",this.configTxtButton={font:"23px GilroyMedium",fill:"#ffa901",boundsAlignH:"center",boundsAlignV:"middle"}):(this.txtButton="ĐỒNG Ý",this.configTxtButton={font:"23px GilroyMedium",fill:"#ffa901",boundsAlignH:"center",boundsAlignV:"middle"})):"en"==de.instance().currentLanguage?(this.txtButton="POKE",this.configTxtButton={font:"23px GilroyMedium",fill:"#8e8a84",boundsAlignH:"center",boundsAlignV:"middle"}):(this.txtButton="CHỌC",this.configTxtButton={font:"23px GilroyMedium",fill:"#8e8a84",boundsAlignH:"center",boundsAlignV:"middle"})}},{key:"setHide",value:function(){this.isHide=!0,this.x=0,this.visible=!1}},{key:"setAppear",value:function(){this.isHide=!1,this.x=0,this.visible=!0}},{key:"controllUpdated",value:function(e){return this.formatChallengeGameUpdated(e)}},{key:"formatChallengeGameUpdated",value:function(e){var t="",n=Date.now()-e;n=parseInt(n/1e3);var i=parseInt((n/2592e3).toFixed(0));if(i>0)t="".concat(i," ").concat(de.instance().getData("214"));else{var o=parseInt(n/604800);if(o>0)t="".concat(o," ").concat(de.instance().getData("215"));else{var a=parseInt(n/86400);if(a>0)t="".concat(a," ").concat(de.instance().getData("216"));else{var s=parseInt(n/3600);if(s>0)t="".concat(s," ").concat(de.instance().getData("217"));else{var r=parseInt(n/60);t=r>0?"".concat(r," ").concat(de.instance().getData("218")):"".concat(de.instance().getData("219"))}}}}return t}},{key:"addItems",value:function(){var e=this;this.isHide=!1;var t=new Phaser.Graphics(game,0,0);t.beginFill(16777215),t.drawCircle(71*window.GameConfig.RESIZE,50*window.GameConfig.RESIZE,68*window.GameConfig.RESIZE),t.anchor.set(.5),this.addChild(t);var n=new jr(71*window.GameConfig.RESIZE,50*window.GameConfig.RESIZE,"ava-default",this.avaKey,i);n.sprite.anchor.set(.5),n.sprite.width=68,n.sprite.height=68,n.sprite.mask=t,n.sprite.inputEnabled=!0,n.event.loadAvaDone.add(function(){n.sprite.width=68,n.sprite.height=68},this),n.sprite.events.onInputUp.add(function(){0==oe.instance().menuDragging&&(n.sprite.inputEnabled=!1,be.instance().playSound(be.buttonclick),jC.instance().addUserProfile(e.opponentEntity.id),e.timeoutInput=setTimeout(function(){n.sprite.inputEnabled=!0},2e3))},this),this.addChild(n.sprite),this.nameFriendChallenge=new Phaser.Text(game,123*window.GameConfig.RESIZE,50*window.GameConfig.RESIZE,Gl.formatName(this.opponentEntity.userName,20),{font:"Gilroy",fill:"white",fontSize:24*window.GameConfig.RESIZE}),this.nameFriendChallenge.anchor.set(0,.5),this.addChild(this.nameFriendChallenge),this.btn_accept=new Phaser.Text(game,this.positionMenuConfig.btn_accept.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_accept.y*window.GameConfig.RESIZE,this.txtButton,this.configTxtButton),this.btn_accept.inputEnabled=!0,this.btn_accept.anchor.set(.5),this.addChild(this.btn_accept);var o=new Phaser.Text(game,430*window.GameConfig.RESIZE,55*window.GameConfig.RESIZE,"".concat(this.opponentWon," : ").concat(this.userWon),{font:"Gilroy",fill:"white",fontSize:24*window.GameConfig.RESIZE});o.anchor.set(.5),this.addChild(o),this.btn_accept.value={gameLogId:this.gameLogId,requestId:this.requestId,opponentEntity:this.opponentEntity,mode:this.mode,can_be_poked:this.can_be_poked,challenge_msg:this.message},"isWaitingGame"==this.mode&&0==this.can_be_poked&&this.btn_accept.kill(),1==this.poked&&(this.btn_accept.y=35,this.txtPoked=new Phaser.Text(game,505*window.GameConfig.RESIZE,70*window.GameConfig.RESIZE,de.instance().getData("253"),{font:"Gilroy",fill:"#8a8a8a",fontSize:16*window.GameConfig.RESIZE}),this.txtPoked.anchor.set(0,.5),this.addChild(this.txtPoked));var a=new Phaser.Text(game,125*window.GameConfig.RESIZE,80*window.GameConfig.RESIZE,this.updated,{font:"Gilroy",fill:"#8a8a8a",fontSize:16*window.GameConfig.RESIZE});if(a.anchor.set(0,.5),this.addChild(a),this.btn_accept.events.onInputUp.addOnce(function(){be.instance().playSound(be.buttonclick),e.btn_accept.input.enabled=!1,e.gameLogId=e.gameLogId,"btnFirstGame"==e.btnTexture?e.event.playGame.dispatch({type:"BECHALLENGED",isHasHistory:!1,opponent:e.btn_accept.value.opponentEntity,gameLogId:e.btn_accept.value.gameLogId,requestId:e.btn_accept.value.requestId,weeklyResult:{userWon:e.userWon,opponentWon:e.opponentWon},challenge_msg:e.btn_accept.value.challenge_msg}):"btnNotFirstGame"==e.btnTexture?("isDoneGame"==e.mode&&e.event.playGame.dispatch({type:"CHALLENGE",opponent:e.btn_accept.value.opponentEntity,weeklyResult:{userWon:e.userWon,opponentWon:e.opponentWon},challenge_msg:e.btn_accept.value.challenge_msg}),"isChallengeGame"==e.mode&&e.event.playGame.dispatch({type:"BECHALLENGED",isHasHistory:!0,opponent:e.btn_accept.value.opponentEntity,gameLogId:e.btn_accept.value.gameLogId,requestId:e.btn_accept.value.requestId,weeklyResult:{userWon:e.userWon,opponentWon:e.opponentWon},challenge_msg:e.btn_accept.value.challenge_msg})):e.event.nudgeFriend.dispatch(e.btn_accept.value),setTimeout(function(){e.btn_accept.input.enabled=!0},5e3)}),!0===this.opponentEntity.vip){var s=new Phaser.Sprite(game,this.positionMenuConfig.frame_ava_small.x,this.positionMenuConfig.frame_ava_small.y,this.positionMenuConfig.frame_ava_small.nameAtlas,this.positionMenuConfig.frame_ava_small.nameSprite);this.addChild(s)}if(1==this.opponentEntity.is_online){var r=new Bt({x:95,y:43,nameAtlas:"defaultSource",nameSprite:"Online"});this.addChild(r)}else{var l=new Bt({x:95,y:43,nameAtlas:"defaultSource",nameSprite:"Offline"});this.addChild(l)}this.addBtnDelete(),this.addMessage()}},{key:"addMessage",value:function(){null!==this.message&&""!==this.message&&(this.nameFriendChallenge.y=30,this.message=Gl.formatName(this.message.toString(),28),this.txtMessage=new Phaser.Text(game,125,57,this.message,{font:"Gilroy",fill:"#ffa33a",fontSize:21}),this.txtMessage.anchor.set(0,.5),this.addChild(this.txtMessage))}},{key:"addBtnDelete",value:function(){this.btnDelete=new rP(this.positionMenuConfig.delete_game.btn_delete.x*window.GameConfig.RESIZE,this.positionMenuConfig.delete_game.btn_delete.y*window.GameConfig.RESIZE,this.positionMenuConfig.delete_game.btn_delete.nameAtlas,this.positionMenuConfig.delete_game.btn_delete.nameSprite),this.btnDelete.event.tick.add(this.deleteChallenge,this),this.btnDelete.kill(),this.addChild(this.btnDelete)}},{key:"deleteChallenge",value:function(){1==this.isClickDelete?(this.isClickDelete=!1,this.btnDelete.hideTick(),null!==this.opponentEntity&&this.event.deleteChallenge.dispatch(this.opponentEntity.id,this.mode)):(this.isClickDelete=!0,this.btnDelete.showTick(),null!==this.opponentEntity&&this.event.deleteChallenge.dispatch(this.opponentEntity.id,this.mode))}},{key:"showBtnDelete",value:function(){this.isClickDelete=!1,void 0!==this.btnDelete&&(this.btnDelete.hideTick(),this.btnDelete.revive()),this.txtPoked&&this.txtPoked.kill(),0!==this.can_be_poked&&this.btn_accept.kill()}},{key:"hideDelete",value:function(){0!==this.can_be_poked&&this.btn_accept.revive(),this.txtPoked&&this.txtPoked.revive(),void 0!==this.btnDelete&&this.btnDelete.kill()}},{key:"destroy",value:function(){for(null!==this.timeoutInput&&clearTimeout(this.timeoutInput);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&cP(n.prototype,o),a&&cP(n,a),t}();function pP(e){return(pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mP(e,t){return!t||"object"!==pP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vP(e){return(vP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wP(e,t){return(wP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bP=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=mP(this,vP(t).call(this,game)))._height=0,e.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.configHeightOfRowTab=106*window.GameConfig.RESIZE,e.countHandleGetMainMenuResponse=0,e.countAppear=0,e.event={playGame:new Phaser.Signal,nudgeFriend:new Phaser.Signal,deleteChallenge:new Phaser.Signal},e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wP(e,t)}(t,Z),n=t,(i=[{key:"sendRequestMenuChallenges",value:function(){dV.instance().sendData(ki.MAIN_MENU_LOAD_REQUEST,null)}},{key:"sendBeChallengedGameLogRequest",value:function(e,t){var n=new SFS2X.SFSObject;n.putLong("play_log_id",e),n.putLong("challenge_request_id",t),dV.instance().sendData(ki.BECHALLENGED_GAME_OPPONENT_GAME_LOG_REQUEST,n)}},{key:"handleMainMenuLoadResponse",value:function(e,t,n){var i=this;if(oe.instance().menuLoadResponses={waitingGames:[],doneGames:[],challengeGames:[]},this.menuResponseGames=[],1==t){if("OK"==e.getUtfString("status")){var o=e.getSFSArray("opponents");Gl.handleArrMainMenuLoad(o,this.menuResponseGames,function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){gP(e,t,n[t])})}return e}({},i.menuResponseGames),t=[];for(var n in e)t.push(e[n]);oe.instance().menuOpponentsResponse=t,i.filterResponseGames()}),this.init_quests_count=e.getInt("init_quests_count"),this.new_friend_request_count=e.getLong("new_friend_request_count"),this.started_event_count=e.getLong("started_event_count"),this.handlePlayScript(e),this.handleHoursReward(e)}else console.error("MAIN_MENU_LOAD_RESPONSE not response: ".concat(e.errorMessage));n(oe.instance().menuLoadResponses,this.init_quests_count,this.new_friend_request_count,this.started_event_count,this.hoursReward,this.play_script)}}},{key:"handlePlayScript",value:function(e){if(this.play_script={playing_guide:"",play_script_questions:[]},e.containsKey("play_script")){var t=e.getSFSObject("play_script");if(t.containsKey("playing_guide")&&(this.play_script.playing_guide=t.getUtfString("playing_guide")),t.containsKey("play_script_questions"))for(var n=t.getSFSArray("play_script_questions"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getUtfString("question_type"),s=o.getUtfString("answer1"),r=o.getUtfString("answer2"),l=o.getUtfString("answer3"),c=o.getUtfString("answer4"),h=o.getLong("id"),u=o.getInt("correct_answer"),d=o.getUtfString("file_path"),f=o.getUtfString("file_path"),p=o.getSFSObject("song"),g=p.getUtfString("title"),y=p.getLong("id"),m=p.getUtfString("title"),v=p.getUtfString("author"),w=p.getSFSObject("singer"),b=w.getUtfString("name"),_=w.getUtfString("avatar");this.play_script.play_script_questions.push({questionType:a,answers:[s,r,l,c],correctAnswer:u,songEntity:{thumb:_,song:g,fileName:m,author:v,singer:b,listenLink:f,id:y,fileUrl:d},id:h})}}this.play_script.playing_guide==_o.DONE_GET_QUEST&&(oe.instance().botChallenge={value:0,gameLogId:oe.instance().menuLoadResponses.challengeGames[0].userGameLog,requestId:oe.instance().menuLoadResponses.challengeGames[0].id,opponentEntity:oe.instance().menuLoadResponses.challengeGames[0].opponentEntity,mode:"isChallengeGame",can_be_poked:oe.instance().menuLoadResponses.challengeGames[0].can_be_poked,weeklyResult:{userWon:0,opponentWon:0}})}},{key:"handleHoursReward",value:function(e){if(e.containsKey("hours_reward")){var t=e.getSFSObject("hours_reward");this.hoursReward={hours_reward_id:t.getInt("hours_reward_id"),user_id:t.getInt("user_id"),created:t.getLong("created"),state:t.getUtfString("state"),updated:t.getLong("updated")}}}},{key:"filterResponseGames",value:function(){oe.instance().menuLoadResponses.waitingGames=oe.instance().menuOpponentsResponse.filter(function(e){return"THEIR_TURN"==e.status}),oe.instance().menuLoadResponses.doneGames=oe.instance().menuOpponentsResponse.filter(function(e){return"NO_GAME"==e.status}),oe.instance().menuLoadResponses.challengeGames=oe.instance().menuOpponentsResponse.filter(function(e){return"YOUR_TURN"==e.status}),oe.instance().menuLoadResponses.waitingGames=oe.instance().menuLoadResponses.waitingGames.sort(function(e,t){return t.base_updated-e.base_updated}),oe.instance().menuLoadResponses.waitingGames=oe.instance().menuLoadResponses.waitingGames.sort(function(e,t){return t.can_be_poked-e.can_be_poked}),oe.instance().menuLoadResponses.challengeGames=oe.instance().menuLoadResponses.challengeGames.sort(function(e,t){return t.base_updated-e.base_updated}),oe.instance().menuLoadResponses.challengeGames=oe.instance().menuLoadResponses.challengeGames.sort(function(e,t){return t.poked-e.poked}),oe.instance().menuLoadResponses.challengeGames=oe.instance().menuLoadResponses.challengeGames.sort(function(e,t){return t.poked_at-e.poked_at}),oe.instance().menuLoadResponses.doneGames=oe.instance().menuLoadResponses.doneGames.sort(function(e,t){return t.base_updated-e.base_updated})}},{key:"displayListChallenge",value:function(){var e=this;this.removeAllChild(),this.configHeightOfRowTab=106*window.GameConfig.RESIZE,this.countHandleGetMainMenuResponse=0,this.grapChallenge=new Phaser.Group(game),this.grapChallenge.y=106*window.GameConfig.RESIZE,this.createGrapScrollMenu(),this.addTittleYourTurn(),this.createTabYourTurn(),this.addTittleTheirTurn(),this.createTabTheirTurn(),this.addChild(this.grapMenu);for(var t=0;t<this.grapChallenge.children.length;t++)t<4?function(){var n=game.add.tween(e.grapChallenge.children[t]).to({x:0},500,Phaser.Easing.Back.Out,!1);e.timeout=setTimeout(function(){n.start()},100*t)}():this.grapChallenge.children[t].x=0}},{key:"createTabYourTurn",value:function(){if(void 0!==oe.instance().menuLoadResponses.challengeGames&&oe.instance().menuLoadResponses.challengeGames.length>0)for(var e=0;e<oe.instance().menuLoadResponses.challengeGames.length;e++)0==oe.instance().menuLoadResponses.doneGames.length&&oe.instance().menuLoadResponses.challengeGames.length==e+1?this.createTabPlayInScrollMenu(e,0,oe.instance().menuLoadResponses.challengeGames[e].opponentEntity.avatar,"afterSet",oe.instance().menuLoadResponses.challengeGames[e].weeklyResult.userWon,oe.instance().menuLoadResponses.challengeGames[e].weeklyResult.opponentWon,oe.instance().menuLoadResponses.challengeGames[e].userGameLog,oe.instance().menuLoadResponses.challengeGames[e].challenge_request_id,oe.instance().menuLoadResponses.challengeGames[e].turnCount,oe.instance().menuLoadResponses.challengeGames[e].opponentEntity,"isChallengeGame",!0,oe.instance().menuLoadResponses.challengeGames[e].can_be_poked,oe.instance().menuLoadResponses.challengeGames[e].poked,oe.instance().menuLoadResponses.challengeGames[e].base_updated,oe.instance().menuLoadResponses.challengeGames[e].challenge_msg):this.createTabPlayInScrollMenu(e,0,oe.instance().menuLoadResponses.challengeGames[e].opponentEntity.avatar,"afterSet",oe.instance().menuLoadResponses.challengeGames[e].weeklyResult.userWon,oe.instance().menuLoadResponses.challengeGames[e].weeklyResult.opponentWon,oe.instance().menuLoadResponses.challengeGames[e].userGameLog,oe.instance().menuLoadResponses.challengeGames[e].challenge_request_id,oe.instance().menuLoadResponses.challengeGames[e].turnCount,oe.instance().menuLoadResponses.challengeGames[e].opponentEntity,"isChallengeGame",!1,oe.instance().menuLoadResponses.challengeGames[e].can_be_poked,oe.instance().menuLoadResponses.challengeGames[e].poked,oe.instance().menuLoadResponses.challengeGames[e].base_updated,oe.instance().menuLoadResponses.challengeGames[e].challenge_msg);if(void 0!==oe.instance().menuLoadResponses.doneGames&&oe.instance().menuLoadResponses.doneGames.length>0)for(var t=0;t<oe.instance().menuLoadResponses.doneGames.length;t++)oe.instance().menuLoadResponses.doneGames.length==t+1?this.createTabPlayInScrollMenu(t,oe.instance().menuLoadResponses.challengeGames.length,oe.instance().menuLoadResponses.doneGames[t].opponentEntity.avatar,"afterSet",oe.instance().menuLoadResponses.doneGames[t].weeklyResult.userWon,oe.instance().menuLoadResponses.doneGames[t].weeklyResult.opponentWon,oe.instance().menuLoadResponses.doneGames[t].userGameLog,oe.instance().menuLoadResponses.doneGames[t].challenge_request_id,oe.instance().menuLoadResponses.doneGames[t].turnCount,oe.instance().menuLoadResponses.doneGames[t].opponentEntity,"isDoneGame",!0,oe.instance().menuLoadResponses.doneGames[t].can_be_poked,oe.instance().menuLoadResponses.doneGames[t].poked,oe.instance().menuLoadResponses.doneGames[t].base_updated,oe.instance().menuLoadResponses.doneGames[t].challenge_msg):this.createTabPlayInScrollMenu(t,oe.instance().menuLoadResponses.challengeGames.length,oe.instance().menuLoadResponses.doneGames[t].opponentEntity.avatar,"afterSet",oe.instance().menuLoadResponses.doneGames[t].weeklyResult.userWon,oe.instance().menuLoadResponses.doneGames[t].weeklyResult.opponentWon,oe.instance().menuLoadResponses.doneGames[t].userGameLog,oe.instance().menuLoadResponses.doneGames[t].challenge_request_id,oe.instance().menuLoadResponses.doneGames[t].turnCount,oe.instance().menuLoadResponses.doneGames[t].opponentEntity,"isDoneGame",!1,oe.instance().menuLoadResponses.doneGames[t].can_be_poked,oe.instance().menuLoadResponses.doneGames[t].poked,oe.instance().menuLoadResponses.doneGames[t].base_updated,oe.instance().menuLoadResponses.doneGames[t].challenge_msg)}},{key:"createTabTheirTurn",value:function(){if(void 0!==oe.instance().menuLoadResponses.waitingGames&&oe.instance().menuLoadResponses.waitingGames.length>0)for(var e=0;e<oe.instance().menuLoadResponses.waitingGames.length;e++)oe.instance().menuLoadResponses.waitingGames.length==e+1?this.createTabPlayInScrollMenu(e,oe.instance().menuLoadResponses.doneGames.length+oe.instance().menuLoadResponses.challengeGames.length+1,oe.instance().menuLoadResponses.waitingGames[e].opponentEntity.avatar,"btnWaitingGame",oe.instance().menuLoadResponses.waitingGames[e].weeklyResult.userWon,oe.instance().menuLoadResponses.waitingGames[e].weeklyResult.opponentWon,oe.instance().menuLoadResponses.waitingGames[e].userGameLog,oe.instance().menuLoadResponses.waitingGames[e].challenge_request_id,-1,oe.instance().menuLoadResponses.waitingGames[e].opponentEntity,"isWaitingGame",!0,oe.instance().menuLoadResponses.waitingGames[e].can_be_poked,oe.instance().menuLoadResponses.waitingGames[e].poked,oe.instance().menuLoadResponses.waitingGames[e].base_updated,oe.instance().menuLoadResponses.waitingGames[e].challenge_msg):this.createTabPlayInScrollMenu(e,oe.instance().menuLoadResponses.doneGames.length+oe.instance().menuLoadResponses.challengeGames.length+1,oe.instance().menuLoadResponses.waitingGames[e].opponentEntity.avatar,"btnWaitingGame",oe.instance().menuLoadResponses.waitingGames[e].weeklyResult.userWon,oe.instance().menuLoadResponses.waitingGames[e].weeklyResult.opponentWon,oe.instance().menuLoadResponses.waitingGames[e].userGameLog,oe.instance().menuLoadResponses.waitingGames[e].challenge_request_id,-1,oe.instance().menuLoadResponses.waitingGames[e].opponentEntity,"isWaitingGame",!1,oe.instance().menuLoadResponses.waitingGames[e].can_be_poked,oe.instance().menuLoadResponses.waitingGames[e].poked,oe.instance().menuLoadResponses.waitingGames[e].base_updated,oe.instance().menuLoadResponses.waitingGames[e].challenge_msg)}},{key:"createGrapScrollMenu",value:function(){this.grapMenu=new Phaser.Group(game),this.grapMenu.y=545*window.GameConfig.RESIZE,this.addChild(this.grapMenu),this.grapMenu.addChild(this.grapChallenge)}},{key:"addTittleYourTurn",value:function(){var e=new Phaser.Sprite(game,this.positionMenuConfig.tab_yourTurn.x*window.GameConfig.RESIZE,this.positionMenuConfig.tab_yourTurn.y*window.GameConfig.RESIZE,"otherSprites","tab-friend"),t=new Phaser.Text(game,this.positionMenuConfig.txt_yourTurn.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_yourTurn.y*window.GameConfig.RESIZE,de.instance().getData("208"),this.positionMenuConfig.txt_yourTurn.configs);t.anchor.set(0,.5);var n=new Phaser.Text(game,t.x+t.width+10,this.positionMenuConfig.txt_count_yourTurn.y*window.GameConfig.RESIZE,"(".concat(oe.instance().menuLoadResponses.doneGames.length+oe.instance().menuLoadResponses.challengeGames.length," ").concat(de.instance().getData("210"),")"),this.positionMenuConfig.txt_count_yourTurn.configs);n.anchor.set(0,.5),e.addChild(n),e.addChild(t),this.addLineUnder(e),this.grapMenu.addChild(e),this.btnMethodDelete1=new Phaser.Button(game,this.positionMenuConfig.delete_game.btn_bin_blue.x,this.positionMenuConfig.delete_game.btn_bin_blue.y,this.positionMenuConfig.delete_game.btn_bin_blue.nameAtlas,this.onClickMethodDeleteYourTurn,this,null,this.positionMenuConfig.delete_game.btn_bin_blue.nameSprite),this.btnMethodDelete1.anchor.set(.5),this.btnMethodDelete1.scale.set(0),e.addChild(this.btnMethodDelete1),this.btnBin1=new Phaser.Button(game,this.positionMenuConfig.delete_game.bin.x,this.positionMenuConfig.delete_game.bin.y,this.positionMenuConfig.delete_game.bin.nameAtlas,this.onClickBinYourTurn,this,null,this.positionMenuConfig.delete_game.bin.nameSprite),this.btnBin1.anchor.set(.5),e.addChild(this.btnBin1),this.btnCancleDelelte1=new Phaser.Button(game,this.positionMenuConfig.delete_game.btn_x.x,this.positionMenuConfig.delete_game.btn_x.y,this.positionMenuConfig.delete_game.btn_x.nameAtlas,this.onClickCancleDelete,this,null,this.positionMenuConfig.delete_game.btn_x.nameSprite),this.btnCancleDelelte1.anchor.set(.5),this.btnCancleDelelte1.kill(),e.addChild(this.btnCancleDelelte1),this._height+=e.height}},{key:"addTittleTheirTurn",value:function(){var e=new Phaser.Sprite(game,this.positionMenuConfig.tab_yourTurn.x*window.GameConfig.RESIZE,this.positionMenuConfig.tab_theirTurn.y*window.GameConfig.RESIZE+this.grapChallenge.y+(oe.instance().menuLoadResponses.challengeGames.length+oe.instance().menuLoadResponses.doneGames.length)*this.configHeightOfRowTab,"otherSprites","tab-friend"),t=new Phaser.Text(game,this.positionMenuConfig.txt_theirTurn.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_theirTurn.y*window.GameConfig.RESIZE,de.instance().getData("209"),this.positionMenuConfig.txt_theirTurn.configs);t.anchor.set(0,.5);var n=new Phaser.Text(game,t.x+t.width+10,this.positionMenuConfig.txt_count_theirTurn.y*window.GameConfig.RESIZE,"(".concat(oe.instance().menuLoadResponses.waitingGames.length," ").concat(de.instance().getData("210"),")"),this.positionMenuConfig.txt_count_theirTurn.configs);n.anchor.set(0,.5),e.addChild(n),e.addChild(t),this.btnMethodDelete2=new Phaser.Button(game,this.positionMenuConfig.delete_game.btn_bin_blue.x,this.positionMenuConfig.delete_game.btn_bin_blue.y,this.positionMenuConfig.delete_game.btn_bin_blue.nameAtlas,this.onClickMethodDeleteTheirTurn,this,null,this.positionMenuConfig.delete_game.btn_bin_blue.nameSprite),this.btnMethodDelete2.anchor.set(.5),this.btnMethodDelete2.scale.set(0),e.addChild(this.btnMethodDelete2),this.btnBin2=new Phaser.Button(game,this.positionMenuConfig.delete_game.bin.x,this.positionMenuConfig.delete_game.bin.y,this.positionMenuConfig.delete_game.bin.nameAtlas,this.onClickBinTheirTurn,this,null,this.positionMenuConfig.delete_game.bin.nameSprite),this.btnBin2.anchor.set(.5),e.addChild(this.btnBin2),this.btnCancleDelelte2=new Phaser.Button(game,this.positionMenuConfig.delete_game.btn_x.x,this.positionMenuConfig.delete_game.btn_x.y,this.positionMenuConfig.delete_game.btn_x.nameAtlas,this.onClickCancleDelete,this,null,this.positionMenuConfig.delete_game.btn_x.nameSprite),this.btnCancleDelelte2.anchor.set(.5),this.btnCancleDelelte2.kill(),e.addChild(this.btnCancleDelelte2),this.addLineUnder(e),this.grapMenu.addChild(e),this._height+=e.height}},{key:"onClickMethodDeleteYourTurn",value:function(){be.instance().playSound(be.buttonclick),this.event.deleteChallenge.dispatch(this.listYourTurnDeletes)}},{key:"onClickMethodDeleteTheirTurn",value:function(){be.instance().playSound(be.buttonclick),this.event.deleteChallenge.dispatch(this.listTheirTurnDeletes)}},{key:"onClickBinTheirTurn",value:function(){be.instance().playSound(be.buttonclick),this.listTheirTurnDeletes=[],this.btnBin2.kill(),this.btnCancleDelelte2.revive();for(var e=0;e<this.grapChallenge.children.length;e++){var t=this.grapChallenge.children[e];"isWaitingGame"==t.mode&&t.showBtnDelete()}}},{key:"onClickBinYourTurn",value:function(){be.instance().playSound(be.buttonclick),this.listYourTurnDeletes=[],this.btnBin1.kill(),this.btnCancleDelelte1.revive();for(var e=0;e<this.grapChallenge.children.length;e++){var t=this.grapChallenge.children[e];"isWaitingGame"!==t.mode&&t.showBtnDelete()}}},{key:"onClickCancleDelete",value:function(){be.instance().playSound(be.buttonclick),this.btnBin1.revive(),this.btnBin2.revive(),this.btnCancleDelelte1.kill(),this.btnCancleDelelte2.kill(),game.add.tween(this.btnMethodDelete1).to({x:580},50,Phaser.Easing.Linear.In,!0).start(),game.add.tween(this.btnMethodDelete2).to({x:580},50,Phaser.Easing.Linear.In,!0).start(),game.add.tween(this.btnMethodDelete1.scale).to({x:0,y:0},50,"Linear",!0).start(),game.add.tween(this.btnMethodDelete2.scale).to({x:0,y:0},50,"Linear",!0).start();for(var e=0;e<this.grapChallenge.children.length;e++){this.grapChallenge.children[e].hideDelete()}}},{key:"addLineUnder",value:function(e){var t=new Bt(this.positionMenuConfig.line_under);e.addChild(t)}},{key:"createTabPlayInScrollMenu",value:function(e,t,n,i,o,a,s,r,l,c,h,u,d,f,p,g){var y=this,m=new fP(640*window.GameConfig.RESIZE,(e+t)*this.configHeightOfRowTab+this.positionMenuConfig.tab_theirTurn.y*window.GameConfig.RESIZE,"otherSprites","tab-friend");m.setData(n,i,o,a,s,r,l,c,h,u,d,f,p,g),m.event.playGame.add(function(e){y.event.playGame.dispatch(e)},this),m.event.nudgeFriend.add(function(e){y.event.nudgeFriend.dispatch(e)},this),m.event.deleteChallenge.add(function(e,t){"isWaitingGame"==t?(y.listTheirTurnDeletes.includes(e)?y.listTheirTurnDeletes=y.removeFromListDeletes(y.listTheirTurnDeletes,e):y.listTheirTurnDeletes.push(e),y.listTheirTurnDeletes.length>0?525!==y.btnMethodDelete2.x&&(game.add.tween(y.btnMethodDelete2).to({x:525},400,Phaser.Easing.Elastic.Out,!0).start(),game.add.tween(y.btnMethodDelete2.scale).to({x:1,y:1},50,"Linear",!0).start()):(game.add.tween(y.btnMethodDelete2).to({x:580},50,Phaser.Easing.Linear.In,!0).start(),game.add.tween(y.btnMethodDelete2.scale).to({x:0,y:0},50,"Linear",!0).start())):(y.listYourTurnDeletes.includes(e)?y.listYourTurnDeletes=y.removeFromListDeletes(y.listYourTurnDeletes,e):y.listYourTurnDeletes.push(e),y.listYourTurnDeletes.length>0?525!==y.btnMethodDelete1.x&&(game.add.tween(y.btnMethodDelete1).to({x:525},400,Phaser.Easing.Elastic.Out,!0).start(),game.add.tween(y.btnMethodDelete1.scale).to({x:1,y:1},50,"Linear",!0).start()):(game.add.tween(y.btnMethodDelete1).to({x:580},50,Phaser.Easing.Linear.In,!0).start(),game.add.tween(y.btnMethodDelete1.scale).to({x:0,y:0},50,"Linear",!0).start()))},this),0==u&&this.addLineUnder(m),this._height+=m.height,m.addItems(),this.grapChallenge.addChild(m)}},{key:"removeFromListDeletes",value:function(e,t){return e.filter(function(e){return e!==t})}},{key:"scrollEventResponse",value:function(e){if(e>this.countAppear){this.countAppear=e;for(var t=this.countAppear-1;t<this.countAppear+3&&!(t>=this.grapChallenge.children.length);t++)1==this.grapChallenge.children[t].isHide&&this.grapChallenge.children[t].setAppear()}}},{key:"removeAllChild",value:function(){if(void 0!==this.timeout&&clearTimeout(this.timeout),this.configHeightOfRowTab=106*window.GameConfig.RESIZE,this.countHandleGetMainMenuResponse=0,null!==this.children)for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}])&&yP(n.prototype,i),o&&yP(n,o),t}();function _P(e){return(_P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EP(e,t){return!t||"object"!==_P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CP(e){return(CP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kP(e,t){return(kP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PP=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=EP(this,CP(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.outSize=!0,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kP(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.btn,this.animCircleScale,this.animButtonInOut,this.addBtn(),this.addAnimButtonInOut()}},{key:"addBtn",value:function(){this.btn=new Phaser.Sprite(game,this.positionMenuConfig.btnQAndA.x*window.GameConfig.RESIZE,this.positionMenuConfig.btnQAndA.y*window.GameConfig.RESIZE,this.positionMenuConfig.btnQAndA.nameAtlas,this.positionMenuConfig.btnQAndA.nameSprite),this.btn.inputEnabled=!0,this.btn.anchor.set(.5),this.txtBtn=new Phaser.Text(game,this.positionMenuConfig.txt_QAndA.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_QAndA.y*window.GameConfig.RESIZE,de.instance().getData(205),this.positionMenuConfig.txt_QAndA.configs),this.txtBtn.anchor.set(.5),this.btn.addChild(this.txtBtn),this.addChild(this.btn)}},{key:"addAnimCircleScale",value:function(){this.animCircleScale=new Phaser.Sprite(game,0,0,"CircleScale"),this.animCircleScale.anchor.set(.5),this.btn.addChild(this.animCircleScale)}},{key:"addAnimButtonInOut",value:function(){this.animButtonInOut=new Phaser.Sprite(game,0,0,"ButtonQuest"),this.animButtonInOut.anchor.set(.5),this.btn.addChild(this.animButtonInOut)}},{key:"addAnim",value:function(){this.animCircleScale.animations.add("run_scale_circle");this.animCircleScale.animations.play("run_scale_circle",30,!0);this.animButtonInOut.animations.add("run_anim_button");this.animButtonInOut.animations.play("run_anim_button",15,!0)}},{key:"runAnim",value:function(){this.animButtonInOut.animations.add("run_anim_button");this.animButtonInOut.animations.play("run_anim_button",25,!0)}},{key:"scrollChange",value:function(){this.txtBtn.kill();var e=game.add.tween(this.btn).to({x:this.positionMenuConfig.btnQAndA.x*window.GameConfig.RESIZE+115},70,"Linear",!0);game.add.tween(this.btn).to({y:65},150,"Linear",!0).start(),e.start()}},{key:"scrollDefault",value:function(){this.txtBtn.revive();var e=game.add.tween(this.btn).to({x:this.positionMenuConfig.btnQAndA.x*window.GameConfig.RESIZE},150,"Linear",!0);game.add.tween(this.btn).to({y:this.positionMenuConfig.btnQAndA.y*window.GameConfig.RESIZE},70,"Linear",!0).start(),e.start()}},{key:"addDotNoti",value:function(e){if(e>0){this.runAnim();var t=new Phaser.Sprite(game,this.positionMenuConfig.notiDot.x*window.GameConfig.RESIZE,this.positionMenuConfig.notiDot.y*window.GameConfig.RESIZE,this.positionMenuConfig.notiDot.nameAtlas,this.positionMenuConfig.notiDot.nameSprite),n=new Phaser.Text(game,this.positionMenuConfig.txtNotiDot.x*window.GameConfig.RESIZE,this.positionMenuConfig.txtNotiDot.y*window.GameConfig.RESIZE,e,this.positionMenuConfig.txtNotiDot.configs);n.anchor.set(.5),t.addChild(n),this.btn.addChild(t)}}}])&&SP(n.prototype,i),o&&SP(n,o),t}();function OP(e){return(OP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xP(e,t){return!t||"object"!==OP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TP(e){return(TP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IP(e,t){return(IP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var AP=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=xP(this,TP(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.outSize=!0,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IP(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.btn,this.animCircleScale,this.animButtonInOut,this.addBtn(),this.addAnimButtonInOut(),this.runAnim()}},{key:"addBtn",value:function(){this.btn=new Phaser.Sprite(game,this.positionMenuConfig.btnRanking.x*window.GameConfig.RESIZE,this.positionMenuConfig.btnRanking.y*window.GameConfig.RESIZE,this.positionMenuConfig.btnRanking.nameAtlas,this.positionMenuConfig.btnRanking.nameSprite),this.btn.inputEnabled=!0,this.btn.anchor.set(.5),this.txtBtn=new Phaser.Text(game,this.positionMenuConfig.txt_rank.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_rank.y*window.GameConfig.RESIZE,de.instance().getData(207),this.positionMenuConfig.txt_rank.configs),this.txtBtn.anchor.set(.5),this.btn.addChild(this.txtBtn),this.addChild(this.btn)}},{key:"addAnimCircleScale",value:function(){this.animCircleScale=new Phaser.Sprite(game,0,0,"CircleScale"),this.animCircleScale.anchor.set(.5),this.btn.addChild(this.animCircleScale)}},{key:"addAnimButtonInOut",value:function(){this.animButtonInOut=new Phaser.Sprite(game,0,0,"ButtonRank"),this.animButtonInOut.anchor.set(.5),this.btn.addChild(this.animButtonInOut)}},{key:"scrollChange",value:function(){this.txtBtn.kill();var e=game.add.tween(this.btn).to({x:this.positionMenuConfig.btnRanking.x*window.GameConfig.RESIZE-115},70,"Linear",!0);game.add.tween(this.btn).to({y:65},150,"Linear",!0).start(),e.start()}},{key:"scrollDefault",value:function(){this.txtBtn.revive();var e=game.add.tween(this.btn).to({x:this.positionMenuConfig.btnRanking.x*window.GameConfig.RESIZE},150,"Linear",!0);game.add.tween(this.btn).to({y:this.positionMenuConfig.btnRanking.y*window.GameConfig.RESIZE},70,"Linear",!0).start(),e.start()}},{key:"runAnim",value:function(){this.animButtonInOut.animations.add("run_anim_button");this.animButtonInOut.animations.play("run_anim_button",25,!0)}}])&&RP(n.prototype,i),o&&RP(n,o),t}();function LP(e){return(LP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function GP(e,t){return!t||"object"!==LP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MP(e){return(MP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NP(e,t){return(NP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var BP=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=GP(this,MP(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.inputEnabled=!0,e.outSize=!0,e.event={gotToEvent:new Phaser.Signal},e.isEvent=!1,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NP(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.btn,this.animCircleScale,this.animButtonInOut,this.addBtn(),this.addAnimCircleScale(),this.addAnimButtonInOut()}},{key:"addBtn",value:function(){this.btn=new Phaser.Sprite(game,this.positionMenuConfig.btnEvent.x*window.GameConfig.RESIZE,this.positionMenuConfig.btnEvent.y*window.GameConfig.RESIZE,this.positionMenuConfig.btnEvent.nameAtlas,this.positionMenuConfig.btnEvent.nameSprite),this.btn.anchor.set(.5),this.btn.inputEnabled=!0,this.btn.events.onInputUp.add(this.onClickBtn,this),this.txtBtn=new Phaser.Text(game,this.positionMenuConfig.txt_event.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_event.y*window.GameConfig.RESIZE,de.instance().getData(206),this.positionMenuConfig.txt_event.configs),this.txtBtn.anchor.set(.5),this.btn.addChild(this.txtBtn),this.addChild(this.btn)}},{key:"onClickBtn",value:function(){be.instance().playSound(be.buttonclick),this.event.gotToEvent.dispatch()}},{key:"addAnimCircleScale",value:function(){this.animCircleScale=new Phaser.Sprite(game,0,0,"CircleScale"),this.animCircleScale.anchor.set(.5),this.btn.addChild(this.animCircleScale)}},{key:"addAnimButtonInOut",value:function(){this.animButtonInOut=new Phaser.Sprite(game,0,0,"ButtonEvent"),this.animButtonInOut.anchor.set(.5),this.btn.addChild(this.animButtonInOut)}},{key:"runAnim",value:function(){this.isEvent=!0;this.animButtonInOut.animations.add("run_anim_button");this.animButtonInOut.animations.play("run_anim_button",25,!0);this.animCircleScale.animations.add("run_scale_circle");this.animCircleScale.animations.play("run_scale_circle",30,!0)}},{key:"scrollChange",value:function(){this.txtBtn.kill(),game.add.tween(this.btn).to({y:65},150,"Linear",!0).start(),1==this.isEvent&&this.animCircleScale.animations.stop("run_scale_circle",!0)}},{key:"scrollDefault",value:function(){this.txtBtn.revive(),game.add.tween(this.btn).to({y:this.positionMenuConfig.btnEvent.y*window.GameConfig.RESIZE},150,"Linear",!0).start(),1==this.isEvent&&this.animCircleScale.animations.play("run_scale_circle",30,!0)}},{key:"addDotNoti",value:function(e){if(e>0){this.runAnim();var t=new Phaser.Sprite(game,this.positionMenuConfig.notiDot.x*window.GameConfig.RESIZE,this.positionMenuConfig.notiDot.y*window.GameConfig.RESIZE,this.positionMenuConfig.notiDot.nameAtlas,this.positionMenuConfig.notiDot.nameSprite),n=new Phaser.Text(game,this.positionMenuConfig.txtNotiDot.x*window.GameConfig.RESIZE,this.positionMenuConfig.txtNotiDot.y*window.GameConfig.RESIZE,e,this.positionMenuConfig.txtNotiDot.configs);n.anchor.set(.5),t.addChild(n),this.btn.addChild(t)}}}])&&DP(n.prototype,i),o&&DP(n,o),t}();function jP(e){return(jP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function FP(e,t){return!t||"object"!==jP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZP(e,t,n){return(ZP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HP(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function HP(e){return(HP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VP(e,t){return(VP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var QP=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=FP(this,HP(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.event={claimHourRewardDone:new Phaser.Signal},e.user_id=0,e.user_name="",e.avatar="",e.gender="",e.experience_score=0,e.heart=0,e.diamond=0,e.ticket=0,e.weekly_high_score=0,e.all_time_high_score=0,e.u_level=0,e.level_title="",e.user_vip=0,e.user_id=dV.instance().dataMySeft.user_id,e.user_name=dV.instance().dataMySeft.user_name,e.avatar=dV.instance().dataMySeft.avatar,e.gender=dV.instance().dataMySeft.gender,e.experience_score=dV.instance().dataMySeft.experience_score,e.heart=dV.instance().dataMySeft.heart,e.diamond=dV.instance().dataMySeft.diamond,e.ticket=dV.instance().dataMySeft.ticket,e.weekly_high_score=dV.instance().dataMySeft.weekly_high_score,e.all_time_high_score=dV.instance().dataMySeft.all_time_high_score,e.u_level=dV.instance().dataMySeft.level,e.level_title=dV.instance().dataMySeft.level_title,e.user_vip=dV.instance().dataMySeft.vip,e.addEventExtension(),e.addHeartAndtxtHeart(e.heart),e.addDiamondAndTxtDiamond(e.diamond),e.addTicketAndTxtTicket(e.ticket),e.addDoc(),e.addAvaAndName(e.user_name),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VP(e,t)}(t,Z),n=t,o=[{key:"UPDATE_AVA",get:function(){return"update_ava"}},{key:"UPDATE_NAME",get:function(){return"update_name"}}],(i=[{key:"addEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.add(this.onUpdateUserVars,this)}},{key:"removeEventExtension",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.onUpdateUserVars,this)}},{key:"onUpdateUserVars",value:function(){dV.instance().dataMySeft.user_id==this.user_id&&(parseInt(this.txt_diamond.text)!==dV.instance().dataMySeft.diamond&&(this.txt_diamond.text=dV.instance().dataMySeft.diamond),parseInt(this.txt_heart.text)!==dV.instance().dataMySeft.heart&&(this.txt_heart.text=dV.instance().dataMySeft.heart),parseInt(this.txt_ticket.text)!==dV.instance().dataMySeft.ticket&&(this.txt_ticket.text=dV.instance().dataMySeft.ticket))}},{key:"updateValue",value:function(e){e==t.UPDATE_AVA||e==t.UPDATE_NAME&&(this.user_name=dV.instance().dataMySeft.user_name,this.nameFB.setText(this.user_name))}},{key:"addAvaAndName",value:function(e){this.maskAva=null,this.ava=null,this.addAva(),this.addNameAndLvl(e),this.loadAva()}},{key:"addFrameAva",value:function(){!0===this.user_vip?(this.frameAvatar=new Phaser.Sprite(game,this.positionMenuConfig.frame_ava_vip.x*window.GameConfig.RESIZE,this.positionMenuConfig.frame_ava_vip.y*window.GameConfig.RESIZE,this.positionMenuConfig.frame_ava_vip.nameAtlas,this.positionMenuConfig.frame_ava_vip.nameSprite),this.frameAvatar.anchor.set(.5),this.frameAvatar.scale.set(145/140*window.GameConfig.RESIZE),this.laurel=new Phaser.Sprite(game,this.positionMenuConfig.frame_ava_vip_laurel.x*window.GameConfig.RESIZE,this.positionMenuConfig.frame_ava_vip_laurel.y*window.GameConfig.RESIZE,this.positionMenuConfig.frame_ava_vip_laurel.nameAtlas,this.positionMenuConfig.frame_ava_vip_laurel.nameSprite),this.laurel.anchor.set(.5),this.frameAvatar.addChild(this.laurel)):(this.frameAvatar=new Phaser.Sprite(game,this.positionMenuConfig.frame_ava.x*window.GameConfig.RESIZE,this.positionMenuConfig.frame_ava.y*window.GameConfig.RESIZE,this.positionMenuConfig.frame_ava.nameAtlas,this.positionMenuConfig.frame_ava.nameSprite),this.frameAvatar.anchor.set(.5),this.frameAvatar.scale.set(145/140*window.GameConfig.RESIZE))}},{key:"addAva",value:function(){this.addFrameAva()}},{key:"loadAva",value:function(){if(null!==dV.instance().dataMySeft){var e=new Phaser.Loader(game);e.crossOrigin="anonymous",e.image("ava_fb",this.avatar),e.onLoadComplete.add(this.onLoad,this),1==game.cache.checkImageKey("ava_fb")?this.onLoad():e.start()}}},{key:"onLoad",value:function(){var e=this;null!==this.positionMenuConfig&&(null==this.maskAva&&(this.maskAva=new Phaser.Graphics(game,0,0)),this.maskAva.clear(),this.maskAva.drawCircle(0,0,148*window.GameConfig.RESIZE),this.maskAva.anchor.set(.5),this.avaBox=new Phaser.Sprite(game,this.positionMenuConfig.ava_fb.x*window.GameConfig.RESIZE,this.positionMenuConfig.ava_fb.y*window.GameConfig.RESIZE,null),this.addChild(this.avaBox),null!==this.ava&&(this.removeChild(this.ava),this.ava.destroy(),this.ava=null),1==game.cache.checkImageKey("ava_fb")?this.ava=new Phaser.Button(game,0*window.GameConfig.RESIZE,0*window.GameConfig.RESIZE,"ava_fb"):this.ava=new Phaser.Button(game,0*window.GameConfig.RESIZE,0*window.GameConfig.RESIZE,"songDetailSprites",function(){},this,null,"ava-default"),this.ava.anchor.set(.5),this.ava.width=148,this.ava.height=148,this.ava.mask=this.maskAva,this.avaBox.addChild(this.maskAva),this.avaBox.addChild(this.ava),this.addChild(this.frameAvatar),this.ava.events.onInputUp.add(function(){ht.instance().showLoading(),jC.instance().addUserProfile(e.user_id)}),1==oe.instance().isScrollChange?this.scrollChange():this.scrollDefault())}},{key:"addNameAndLvl",value:function(e){e=Gl.formatName(e,25),this.nameFB=new Phaser.Text(game,320*window.GameConfig.RESIZE,238*window.GameConfig.RESIZE,e,{font:"GilroyBold",fill:"white",fontSize:26*window.GameConfig.RESIZE}),this.nameFB.anchor.set(.5),this.addChild(this.nameFB),this.u_level=new Phaser.Text(game,320*window.GameConfig.RESIZE,270*window.GameConfig.RESIZE,"LV ".concat(this.u_level," - ").concat(this.level_title),{font:"".concat(19*window.GameConfig.RESIZE,"px GilroyMedium"),fill:"orange",boundsAlignH:"center",boundsAlignV:"middle"}),this.u_level.anchor.set(.5),this.u_level.addColor("#ffffff",6),this.addChild(this.u_level)}},{key:"addHeartAndtxtHeart",value:function(e){var t=this;this.heartSprite=new Phaser.Sprite(game,this.positionMenuConfig.heart.x*window.GameConfig.RESIZE,this.positionMenuConfig.heart.y*window.GameConfig.RESIZE,this.positionMenuConfig.heart.nameAtlas,this.positionMenuConfig.heart.nameSprite),this.heartSprite.anchor.set(.5),this.addChild(this.heartSprite),this.txt_heart=new Phaser.Text(game,this.positionMenuConfig.txt_heart.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_heart.y*window.GameConfig.RESIZE,"".concat(e).concat(this.positionMenuConfig.txt_heart.text),this.positionMenuConfig.txt_heart.configs),this.txt_heart.anchor.set(0,.5),this.addChild(this.txt_heart),dV.instance().events.onUserVarsUpdate.add(function(){null!==t.txt_heart&&dV.instance().dataMySeft.heart!==parseInt(t.txt_heart.text)&&null!==t.positionMenuConfig&&t.txt_heart.setText("".concat(dV.instance().dataMySeft.heart).concat(t.positionMenuConfig.txt_heart.text))},this)}},{key:"addDiamondAndTxtDiamond",value:function(e){this.diamondSprite=new Phaser.Button(game,this.positionMenuConfig.diamond.x*window.GameConfig.RESIZE,this.positionMenuConfig.diamond.y*window.GameConfig.RESIZE,this.positionMenuConfig.diamond.nameAtlas,function(){},this,null,this.positionMenuConfig.diamond.nameSprite),this.diamondSprite.anchor.set(.5),this.addChild(this.diamondSprite),this.txt_diamond=new Phaser.Text(game,this.positionMenuConfig.txt_diamond.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_diamond.y*window.GameConfig.RESIZE,e,this.positionMenuConfig.txt_diamond.configs),this.txt_diamond.anchor.set(0,.5),this.addChild(this.txt_diamond)}},{key:"addTicketAndTxtTicket",value:function(e){this.ticketSprite=new Phaser.Sprite(game,this.positionMenuConfig.ticket.x*window.GameConfig.RESIZE,this.positionMenuConfig.ticket.y*window.GameConfig.RESIZE,this.positionMenuConfig.ticket.nameAtlas,this.positionMenuConfig.ticket.nameSprite),this.ticketSprite.anchor.set(.5),this.addChild(this.ticketSprite),this.txt_ticket=new Phaser.Text(game,this.positionMenuConfig.txt_ticket.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_ticket.y*window.GameConfig.RESIZE,e,this.positionMenuConfig.txt_ticket.configs),this.txt_ticket.anchor.set(0,.5),this.addChild(this.txt_ticket)}},{key:"addDoc",value:function(){this.groupDoc=new Phaser.Group(game,0,0);var e=new Bt(this.positionMenuConfig.line_doc1);this.groupDoc.add(e);var t=new Bt(this.positionMenuConfig.line_doc2);this.groupDoc.add(t),this.addChild(this.groupDoc)}},{key:"claimHourReward",value:function(e){var t=this;this.hours_reward_setting=e;jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,{type:this.hours_reward_setting.reward_type,reward:this.hours_reward_setting.reward,finishPoint:{x:315,y:303}}),this.timeClaimHourReward=game.time.events.add(2*Phaser.Timer.SECOND,function(){if("DIAMOND"==e.reward_type){var n=game.add.tween(t.txt_diamond).to({text:dV.instance().socket.mySelf.getVariable("diamond").value},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.txt_diamond.text=parseInt(t.txt_diamond.text)},t),n.onComplete.add(t.completeClaim,t)}else e.reward_type;oe.instance().isRefreshMenu.checking=!1},this)}},{key:"completeClaim",value:function(){this.event.claimHourRewardDone.dispatch()}},{key:"scrollChange",value:function(){!0===this.user_vip&&game.add.tween(this.laurel).to({alpha:0},150,"Linear",!0).start();if(null!==this.ava){var e=game.add.tween(this.ava).to({width:103.6*window.GameConfig.RESIZE,height:103.6*window.GameConfig.RESIZE},150,"Linear",!0),t=game.add.tween(this.frameAvatar.scale).to({x:.725*window.GameConfig.RESIZE,y:.725*window.GameConfig.RESIZE},150,"Linear",!0);e.start(),t.start();var n=this.positionMenuConfig.frame_ava.y;!0===this.user_vip&&(n=this.positionMenuConfig.frame_ava_vip.y);var i=game.add.tween(this.avaBox).to({y:this.positionMenuConfig.ava_fb.y-50},150,"Linear",!0),o=game.add.tween(this.frameAvatar).to({y:n-50},150,"Linear",!0);i.start(),o.start(),game.add.tween(this.maskAva.scale).to({x:.7,y:.7},150,"Linear",!0).start()}this.nameFB.kill(),this.u_level.kill(),this.diamondSprite.kill(),this.txt_diamond.kill(),this.heartSprite.kill(),this.txt_heart.kill(),this.ticketSprite.kill(),this.txt_ticket.kill();for(var a=0;a<this.groupDoc.children.length;a++)this.groupDoc.children[a].kill()}},{key:"scrollDefault",value:function(){!0===this.user_vip&&game.add.tween(this.laurel).to({alpha:1},150,"Linear",!0).start();if(null!==this.ava){var e=game.add.tween(this.ava).to({width:148*window.GameConfig.RESIZE,height:148*window.GameConfig.RESIZE},150,"Linear",!0),t=game.add.tween(this.frameAvatar.scale).to({x:145/140*window.GameConfig.RESIZE,y:145/140*window.GameConfig.RESIZE},150,"Linear",!0);e.start(),t.start();var n=this.positionMenuConfig.frame_ava.y;!0===this.user_vip&&(n=this.positionMenuConfig.frame_ava_vip.y);var i=game.add.tween(this.avaBox).to({y:this.positionMenuConfig.ava_fb.y},150,"Linear",!0),o=game.add.tween(this.frameAvatar).to({y:n},150,"Linear",!0);i.start(),o.start(),game.add.tween(this.maskAva.scale).to({x:1,y:1},150,"Linear",!0).start()}void 0!==this.nameFB&&this.nameFB.revive(),this.u_level.revive(),void 0!==this.diamondSprite&&this.diamondSprite.revive(),this.txt_diamond.revive(),this.heartSprite.revive(),this.txt_heart.revive(),this.ticketSprite.revive(),this.txt_ticket.revive();for(var a=0;a<this.groupDoc.children.length;a++)this.groupDoc.children[a].revive()}},{key:"destroy",value:function(){if(this.removeEventExtension(),rn.instance().resetLoad(),game.time.events.remove(this.timeClaimHourReward),null!==this.children){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}ZP(HP(t.prototype),"destroy",this).call(this)}}])&&UP(n.prototype,i),o&&UP(n,o),t}();function WP(e){return(WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function KP(e,t){return!t||"object"!==WP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zP(e){return(zP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YP(e,t){return(YP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var XP=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=KP(this,zP(t).call(this,game))).x=e,o.y=n,o.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),o.type=i,o.event={clickTab:new Phaser.Signal},o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YP(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.layoutBot=new Phaser.Group(game),this.layoutTop=new Phaser.Group(game),this.addChild(this.layoutBot),this.addChild(this.layoutTop),this.bgTab,this.txtTab,this.lineUnderTab,this.addBGTab(),this.addTxtTab(),this.addLineUnderTab()}},{key:"addBGTab",value:function(){this.bgTab=new Phaser.Button(game,this.positionMenuConfig.mail.tab_active.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.tab_active.y*window.GameConfig.RESIZE,this.positionMenuConfig.mail.tab_active.nameAtlas,this.onClickTab,this,null,this.positionMenuConfig.mail.tab_active.nameSprite),this.bgTab.anchor.set(.5),this.layoutBot.addChild(this.bgTab)}},{key:"addTxtTab",value:function(){this.txtTab=new Phaser.Text(game,this.positionMenuConfig.mail.txt_tab.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.txt_tab.y*window.GameConfig.RESIZE,this.type,this.positionMenuConfig.mail.txt_tab.style),this.txtTab.anchor.set(.5),this.layoutBot.addChild(this.txtTab)}},{key:"addLineUnderTab",value:function(){this.lineUnderTab=new Bt(this.positionMenuConfig.mail.line_gradient),this.lineUnderTab.anchor.set(.5),this.layoutBot.addChild(this.lineUnderTab)}},{key:"onClickTab",value:function(){be.instance().playSound(be.buttonclick),this.event.clickTab.dispatch()}},{key:"setActive",value:function(){this.txtTab.addColor("#ffffff",0),this.bgTab.loadTexture("mailSprites","Header_tab_Active"),this.lineUnderTab.revive()}},{key:"setDisActive",value:function(){this.txtTab.addColor("#93909d",0),this.bgTab.loadTexture("mailSprites","Header_tab_disActive"),this.lineUnderTab.kill()}},{key:"addCountUnread",value:function(e){null==this.noti&&(this.noti=new Bt(this.positionMenuConfig.count_unread),this.noti.kill(),this.noti.anchor.set(.5),this.countUnread=new Qt(this.positionMenuConfig.txt_count_unread,this.positionMenuConfig.txt_count_unread.text),this.countUnread.anchor.set(.5),this.noti.addChild(this.countUnread),this.layoutTop.addChild(this.noti)),e>0?(this.noti.revive(),this.countUnread.setText(e)):this.noti.kill()}}])&&qP(n.prototype,i),o&&qP(n,o),t}();function JP(e){return(JP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eO(e,t){return!t||"object"!==JP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tO(e){return(tO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nO(e,t){return(nO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iO=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=eO(this,tO(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),i.messenger=e,i.index=n,i.event={choosedMessenger:new Phaser.Signal},i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nO(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.btn,this.avatar,this.userName,this.message,this.sentTime,void 0!==this.messenger.updated&&(this.addAva(),this.addMaskAva(68),this.addUserName(),this.addMessage(),this.addSentTime(),this.beginLoad(),this.addBtn(),this.addLineUnder())}},{key:"addBtn",value:function(){this.btn=new Phaser.Button(game,0,0,"otherSprites",function(){},this,null,"tab-friend"),this.btn.alpha=0,this.btn.onInputUp.add(this.choosedMessenger,this),this.addChild(this.btn)}},{key:"addAva",value:function(){this.avatar=new Phaser.Sprite(game,this.positionMenuConfig.mail.ava.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.ava.y*window.GameConfig.RESIZE,this.positionMenuConfig.mail.ava.nameAtlas,this.positionMenuConfig.mail.ava.nameSprite),this.avatar.anchor.set(.5),this.addChild(this.avatar),!0!==this.messenger.user.vip&&1!==this.messenger.user.vip||(this.frameVip=new Phaser.Sprite(game,70,74,"vipSource","Ava_Opponents_Nho"),this.frameVip.anchor.set(.5),this.frameVip.scale.set(1.1),this.addChild(this.frameVip))}},{key:"addMaskAva",value:function(e){this.maskAva=new Phaser.Graphics(game,0,0),this.maskAva.beginFill(),this.maskAva.drawCircle(this.positionMenuConfig.mail.ava.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.ava.y*window.GameConfig.RESIZE,e),this.maskAva.endFill(),this.maskAva.anchor.set(.5),this.avatar.mask=this.maskAva,this.addChild(this.maskAva)}},{key:"addUserName",value:function(){this.userName=new Phaser.Text(game,this.positionMenuConfig.mail.userName.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.userName.y*window.GameConfig.RESIZE,Gl.formatName(this.messenger.user.user_name,30),this.positionMenuConfig.mail.userName.configs),this.messenger.user.user_name==dV.instance().dataMySeft.user_name&&this.userName.setText(this.messenger.user.user_name),this.messenger.from==dV.instance().socket.mySelf.getVariable("user_id").value?this.userName.addColor("#93909d",0):1==this.messenger.is_read&&this.userName.addColor("#93909d",0),this.addChild(this.userName)}},{key:"addMessage",value:function(){this.message=new Phaser.Text(game,this.positionMenuConfig.mail.message.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.message.y*window.GameConfig.RESIZE,this.messenger.message,this.positionMenuConfig.mail.message.configs),this.addChild(this.message)}},{key:"addSentTime",value:function(){this.monthAndDate="";var e=new Date(this.messenger.updated).toLocaleDateString("vi-VN");this.monthAndDate=e.slice(0,e.length-5),this.sentTime=new Phaser.Text(game,this.positionMenuConfig.mail.sentTime.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.sentTime.y*window.GameConfig.RESIZE,this.monthAndDate,this.positionMenuConfig.mail.sentTime.configs),this.addChild(this.sentTime)}},{key:"choosedMessenger",value:function(){be.instance().playSound(be.buttonclick),this.event.choosedMessenger.dispatch(this.messenger)}},{key:"addLineUnder",value:function(){var e=new Bt(this.positionMenuConfig.mail.line_under);this.addChild(e)}},{key:"beginLoad",value:function(){this.avaUrl=this.messenger.user.avatar,game.cache.checkImageKey(this.avaUrl)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.avaUrl))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){try{game.cache.checkImageKey(e.avaUrl)&&""!==e.avaUrl&&e.avatar.loadTexture("".concat(e.avaUrl)),e.avatar.width=68,e.avatar.height=68}catch(e){}},30*this.index)}},{key:"loadStart",value:function(){}},{key:"height",get:function(){return 142*window.GameConfig.RESIZE}}])&&$P(n.prototype,i),o&&$P(n,o),t}();function oO(e){return(oO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sO(e,t){return!t||"object"!==oO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rO(e,t,n){return(rO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lO(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function lO(e){return(lO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cO(e,t){return(cO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hO=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sO(this,lO(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),n.list=e,n.event={countUnread:new Phaser.Signal},n.checkLoad=!1,n.now=n.getTimeNow(),n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cO(e,t)}(t,Z),n=t,(i=[{key:"getTimeNow",value:function(){var e=(new Date).toISOString().split("T");return e[1]=e[1].split("Z"),e[1]=e[1][0],e}},{key:"afterInit",value:function(){this.chatScreen=null,this.group=new Phaser.Group(game),this.addChild(this.group);var e=new Phaser.Rectangle(0,207*window.GameConfig.RESIZE,game.width,(game.height-342)*window.GameConfig.RESIZE);this.listView=new Ia(game,this.group,e,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.loadMessagesDone(),this.addEventExtension()}},{key:"addEventExtension",value:function(){Qe.instance().event.backChat.add(this.backChat,this),Qe.instance().event.loadMessagesDone.add(this.loadMessagesDone,this),Qe.instance().event.newMessage.add(this.newMessage,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backChat.remove(this.backChat,this),Qe.instance().event.loadMessagesDone.remove(this.loadMessagesDone,this),Qe.instance().event.newMessage.add(this.newMessage,this)}},{key:"newMessage",value:function(){this.ajaxGetListMail()}},{key:"loadMessagesDone",value:function(){0==this.checkLoad&&(null!==oe.instance().dataMessagesLocal?(this.checkLoad=!0,void 0!==this.loadingAnim&&(this.loadingAnim.destroy(),this.removeChild(this.loadingAnim)),this.ajaxGetListMail()):(this.checkLoad=!1,this.loadingAnim=new ot,this.addChild(this.loadingAnim)))}},{key:"backChat",value:function(){this.ajaxGetListMail()}},{key:"ajaxGetListMail",value:function(){this.onListMessageCallback(Xr.instance().listConversation(oe.instance().dataMessagesLocal))}},{key:"onListMessageCallback",value:function(e){oe.instance().messageData=e,this.handleResponseListMess(e),null!==this.listView&&void 0!==this.listView&&(this.listView.removeAll(),this.addMessenger())}},{key:"addMessenger",value:function(){for(var e=0;e<this.list.length;e++){var t=this.list[e];if(void 0!==t.user){var n=new iO(t,e);n.event.choosedMessenger.add(this.choosedMessenger,this),this.listView.add(n)}}}},{key:"choosedMessenger",value:function(e){this.addChatScreen(e)}},{key:"addChatScreen",value:function(e){var t={};t=e.from==dV.instance().socket.mySelf.getVariable("user_id").value?{id:e.to,user_name:e.user.user_name,avatar:e.user.avatar,vip:e.user.vip}:{id:e.from,user_name:e.user.user_name,avatar:e.user.avatar,vip:e.user.vip},jC.instance().addChatScreen(t)}},{key:"handleResponseListMess",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);this.list=t}},{key:"countUnread",value:function(e){this.event.countUnread.dispatch(e)}},{key:"destroy",value:function(){for(null!==this.listView&&(this.listView.removeAll(),this.listView.destroy(),this.listView=null),this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),rO(lO(t.prototype),"destroy",this).call(this)}}])&&aO(n.prototype,i),o&&aO(n,o),t}();function uO(e){return(uO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fO(e,t){return!t||"object"!==uO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pO(e){return(pO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gO(e,t){return(gO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yO=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=fO(this,pO(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),i.messenger=e,i.index=n,i.event={choosedMessenger:new Phaser.Signal},i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gO(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.btn,this.avatar,this.userName,this.message,this.sentTime,this.addAva(),this.addMaskAva(68),this.addUserName(),this.addMessage(),this.addSentTime(),this.addBtn()}},{key:"addBtn",value:function(){this.btn=new Phaser.Button(game,0,0,"otherSprites",function(){},this,null,"tab-friend"),this.btn.alpha=0,this.btn.onInputUp.add(this.choosedMessenger,this),this.addChild(this.btn)}},{key:"addAva",value:function(){this.avatar=new Phaser.Sprite(game,this.positionMenuConfig.mail.ava_system.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.ava_system.y*window.GameConfig.RESIZE,this.positionMenuConfig.mail.ava_system.nameAtlas,this.positionMenuConfig.mail.ava_system.nameSprite),this.avatar.anchor.set(.5),this.addChild(this.avatar)}},{key:"addMaskAva",value:function(e){this.maskAva=new Phaser.Graphics(game,0,0),this.maskAva.beginFill(),this.maskAva.drawCircle(0*window.GameConfig.RESIZE,0*window.GameConfig.RESIZE,e),this.maskAva.endFill(),this.maskAva.anchor.set(.5),this.avatar.mask=this.maskAva,this.avatar.addChild(this.maskAva)}},{key:"addUserName",value:function(){this.userName=new Phaser.Text(game,this.positionMenuConfig.mail.userName.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.userName.y*window.GameConfig.RESIZE,de.instance().getData("222"),this.positionMenuConfig.mail.userName.configs),this.addChild(this.userName),1==this.messenger.is_read&&this.userName.addColor("#93909d",0)}},{key:"addMessage",value:function(){this.message=new Phaser.Text(game,this.positionMenuConfig.mail.message.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.message.y*window.GameConfig.RESIZE,this.messenger.message,this.positionMenuConfig.mail.message.configs),this.addChild(this.message)}},{key:"addSentTime",value:function(){var e=new Date(this.messenger.created).toLocaleDateString("vi-VN");this.monthAndDate=e.slice(0,e.length-5),this.sentTime=new Phaser.Text(game,this.positionMenuConfig.mail.sentTime.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.sentTime.y*window.GameConfig.RESIZE,this.monthAndDate,this.positionMenuConfig.mail.sentTime.configs),this.addChild(this.sentTime)}},{key:"choosedMessenger",value:function(){be.instance().playSound(be.buttonclick),this.event.choosedMessenger.dispatch(this.messenger)}},{key:"beginLoad",value:function(e){this.avaUrl=e,game.cache.checkImageKey(this.avaUrl)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.avaUrl))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),game.cache.checkImageKey(this.avaUrl)&&setTimeout(function(){try{e.avatar.loadTexture("".concat(e.avaUrl))}catch(e){}},70*this.index)}},{key:"loadStart",value:function(){}},{key:"height",get:function(){return 142*window.GameConfig.RESIZE}}])&&dO(n.prototype,i),o&&dO(n,o),t}();function mO(e){return(mO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wO(e,t){return!t||"object"!==mO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bO(e,t,n){return(bO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_O(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _O(e){return(_O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SO(e,t){return(SO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var EO=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=wO(this,_O(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.positionLoadConfig=JSON.parse(game.cache.getText("positionLoadConfig")),e.checkLoad=!1,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SO(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.isSeeMail=!1,this.group=new Phaser.Group(game),this.addChild(this.group);var e=new Phaser.Rectangle(0,207*window.GameConfig.RESIZE,game.width,(game.height-342)*window.GameConfig.RESIZE);this.listView=new Ia(game,this.group,e,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.loadSystemMessagesDone(),this.addEventExtension()}},{key:"addEventExtension",value:function(){Qe.instance().event.backChat.add(this.backChat,this),Qe.instance().event.loadSystemMessagesDone.add(this.loadSystemMessagesDone,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backChat.remove(this.backChat,this),Qe.instance().event.loadSystemMessagesDone.remove(this.loadSystemMessagesDone,this)}},{key:"backChat",value:function(){this.ajaxGetListMail()}},{key:"loadSystemMessagesDone",value:function(){0==this.checkLoad&&(null!==oe.instance().systemMessagesLocal?(this.checkLoad=!0,void 0!==this.loadingAnim&&(this.loadingAnim.destroy(),this.removeChild(this.loadingAnim)),this.ajaxGetListMail()):(this.checkLoad=!1,this.loadingAnim=new ot,this.addChild(this.loadingAnim)))}},{key:"ajaxGetListMail",value:function(){this.onListSystemCallback(Xr.instance().getNotiSystem(oe.instance().systemMessagesLocal.dataMessages))}},{key:"onListSystemCallback",value:function(e){oe.instance().mailData=e,null!==this.listView&&void 0!==this.listView&&(this.listView.removeAll(),this.handleResponseListSystem(e),this.addListSystem())}},{key:"addListSystem",value:function(){for(var e=0;e<this.list.length;e++){var t=this.list[e],n=new yO(t,e);n.event.choosedMessenger.add(this.choosedMessenger,this),this.listView.add(n)}}},{key:"choosedMessenger",value:function(e){jC.instance().addMailSystemScreen(e),this.isSeeMail=!0}},{key:"handleResponseListSystem",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);this.list=t}},{key:"destroy",value:function(){for(null!==this.listView&&(this.listView.removeAll(),this.listView.destroy(),this.listView=null),this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),bO(_O(t.prototype),"destroy",this).call(this)}}])&&vO(n.prototype,i),o&&vO(n,o),t}();function CO(e){return(CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PO(e,t){return!t||"object"!==CO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OO(e,t,n){return(OO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RO(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function RO(e){return(RO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xO(e,t){return(xO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var TO=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=PO(this,RO(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.getData(),e.setData(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xO(e,t)}(t,Z),n=t,(i=[{key:"getData",value:function(){this.listMailResponse=[]}},{key:"setData",value:function(){this.afterInit()}},{key:"afterInit",value:function(){this.addLayerTopBottom(),this.bg,this.searchTab,this.newsTab,this.systemTab,this.friendsTab,this.listViewNewsTab=null,this.listViewSystemTab=null,this.listViewFriendsTab=null,this.typeOfTab=null,this.addBG(),this.addSearchTab(),this.addNewsTab(),this.addSystemTab(),this.showTab(1),this.loadSystemMessagesDone(),He.instance().logEvent(He.Mail),this.addEventExtension()}},{key:"addLayerTopBottom",value:function(){this.layerBot=new Phaser.Group(game),this.addChild(this.layerBot),this.layerTop=new Phaser.Group(game),this.addChild(this.layerTop)}},{key:"countUnreadSystem",value:function(e){this.systemTab.addCountUnread(e)}},{key:"addBG",value:function(){this.bg=new Phaser.Button(game,0,0,"bg-playlist"),this.layerBot.addChild(this.bg)}},{key:"addSearchTab",value:function(){this.searchTab=new Phaser.Sprite(game,0,0,null),this.searchTab.inputEnabled=!0;var e=new Bt(this.positionMenuConfig.mail.search_bg),t=new Qt(this.positionMenuConfig.mail.txt_search,de.instance().getData("220"));t.anchor.set(.5,0),e.addChild(t),this.searchTab.addChild(e),this.searchTab.events.onInputUp.add(this.onSearchTabInput,this),this.layerBot.addChild(this.searchTab)}},{key:"onSearchTabInput",value:function(){be.instance().playSound(be.buttonclick),this.searchTab.inputEnabled=!1}},{key:"addNewsTab",value:function(){this.newsTab=new XP(160*window.GameConfig.RESIZE,153*window.GameConfig.RESIZE,de.instance().getData("221")),this.newsTab.event.clickTab.add(this.onNewsTabInput,this),this.layerTop.addChild(this.newsTab)}},{key:"onNewsTabInput",value:function(){1==this.typeOfTab||(ht.instance().showLoading(),this.typeOfTab=1,this.showTab(1))}},{key:"addSystemTab",value:function(){this.systemTab=new XP(480*window.GameConfig.RESIZE,153*window.GameConfig.RESIZE,de.instance().getData("222")),this.systemTab.event.clickTab.add(this.onSystemTabInput,this),this.layerTop.addChild(this.systemTab)}},{key:"onSystemTabInput",value:function(){2==this.typeOfTab||(ht.instance().showLoading(),this.typeOfTab=2,this.showTab(2))}},{key:"showTab",value:function(e){this.typeOfTab=e,1==e?(this.newsTab.setActive(),this.systemTab.setDisActive(),this.addMailTabNews(),this.removeMailTabSystem()):2==e&&(this.newsTab.setDisActive(),this.systemTab.setActive(),this.removeMailTabNews(),this.addMailTabSystem())}},{key:"addMailTabNews",value:function(){this.removeMailTabNews(),this.listViewNewsTab=new hO(this.listMailResponse),this.loadMessagesDone(),this.timeoutLoading=setTimeout(function(){ht.instance().hideLoading()},1e3),this.layerBot.addChild(this.listViewNewsTab)}},{key:"removeMailTabNews",value:function(){null!==this.listViewNewsTab&&(this.layerBot.removeChild(this.listViewNewsTab),this.listViewNewsTab.destroy(),this.listViewNewsTab=null)}},{key:"countUnread",value:function(e){this.newsTab.addCountUnread(e)}},{key:"addMailTabSystem",value:function(){this.removeMailTabSystem(),this.listViewSystemTab=new EO,this.timeoutLoading=setTimeout(function(){ht.instance().hideLoading()},1e3),this.layerBot.addChild(this.listViewSystemTab)}},{key:"removeMailTabSystem",value:function(){null!==this.listViewSystemTab&&(this.layerBot.removeChild(this.listViewSystemTab),this.listViewSystemTab.destroy(),this.listViewSystemTab=null)}},{key:"addMailTabFriends",value:function(){this.removeMailTabFriends()}},{key:"removeMailTabFriends",value:function(){null!==this.listViewFriendsTab&&(this.removeChild(this.listViewFriendsTab),this.listViewFriendsTab.destroy(),this.listViewFriendsTab=null)}},{key:"addEventExtension",value:function(){Qe.instance().event.backSystemChat.add(this.backSystemChat,this),Qe.instance().event.loadMessagesDone.add(this.loadMessagesDone,this),Qe.instance().event.loadSystemMessagesDone.add(this.loadSystemMessagesDone,this),Qe.instance().event.backChat.add(this.backChat,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backSystemChat.remove(this.backSystemChat,this),Qe.instance().event.loadMessagesDone.remove(this.loadMessagesDone,this),Qe.instance().event.loadSystemMessagesDone.remove(this.loadSystemMessagesDone,this),Qe.instance().event.backChat.remove(this.backChat,this)}},{key:"loadMessagesDone",value:function(){null!==oe.instance().dataMessagesLocal&&this.countUnread(Xr.instance().countNewMessages(oe.instance().dataMessagesLocal.dataMessages))}},{key:"loadSystemMessagesDone",value:function(){null!==oe.instance().systemMessagesLocal&&this.countUnreadSystem(Xr.instance().countSystemMessages(oe.instance().systemMessagesLocal.dataMessages))}},{key:"backChat",value:function(){this.countUnread(Xr.instance().countNewMessages(oe.instance().dataMessagesLocal.dataMessages)),this.showTab(1)}},{key:"backSystemChat",value:function(){this.countUnreadSystem(Xr.instance().countSystemMessages(oe.instance().systemMessagesLocal.dataMessages)),this.showTab(2)}},{key:"destroy",value:function(){for(clearTimeout(this.timeoutLoading),this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),OO(RO(t.prototype),"destroy",this).call(this)}}])&&kO(n.prototype,i),o&&kO(n,o),t}();function IO(e){return(IO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function LO(e,t){return!t||"object"!==IO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DO(e){return(DO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GO(e,t){return(GO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var MO=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=LO(this,DO(t).call(this,game,e,n,null))).type=2,i&&(o.typeBefore=i),o.type>o.typeBefore?o.x=game.width:o.x=-game.width,o.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GO(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){}},{key:"createMail",value:function(){this.mailScreen=new TO,this.addChild(this.mailScreen)}},{key:"show",value:function(){game.add.tween(this).to({x:0},150,"Linear",!0)}},{key:"hide",value:function(e){var t=this;if(this.type>e){var n=game.add.tween(this).to({x:game.width},150,"Linear",!0);n.start(),n.onComplete.add(function(){t.destroy()},this)}else{var i=game.add.tween(this).to({x:-game.width-300},150,"Linear",!0);i.start(),i.onComplete.add(function(){t.destroy()},this)}}}])&&AO(n.prototype,i),o&&AO(n,o),t}();function NO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var BO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"friend_requests",get:function(){return"friend_requests"}},{key:"user_2",get:function(){return"user_2"}},{key:"user_1",get:function(){return"user_1"}},{key:"created",get:function(){return"created"}},{key:"friend",get:function(){return"friend"}},{key:"user_id",get:function(){return"user_id"}},{key:"user_name",get:function(){return"user_name"}},{key:"avatar",get:function(){return"avatar"}},{key:"state",get:function(){return"state"}},{key:"is_aware",get:function(){return"is_aware"}},{key:"updated",get:function(){return"updated"}},{key:"is_onlines",get:function(){return"is_onlines"}},{key:"vip",get:function(){return"vip"}}],(n=null)&&NO(t.prototype,n),i&&NO(t,i),e}();var jO=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user_1=0,this.user_2=0,this.created=0,this.friend={user_id:0,user_name:"",avatar:"",is_online:!1},this.state="",this.is_aware=0,this.updated=0,this.vip=!1};function UO(e){return(UO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ZO(e,t){return!t||"object"!==UO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HO(e,t,n){return(HO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VO(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function VO(e){return(VO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QO(e,t){return(QO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var WO=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=ZO(this,VO(t).call(this,game))).positionFriendRequestConfig=JSON.parse(game.cache.getText("positionFriendRequestConfig")),i.request=e,i.index=n,console.log("asfasf"),console.log(e),i.event={accept:new Phaser.Signal,decline:new Phaser.Signal,clickAva:new Phaser.Signal},i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QO(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.ava,this.name,this.btnAccept,this.btnDecline,this.dotOnline,this.line,this.addAva(),this.addName(),this.addLineUnder(),this.addFrameVip(),this.addBtnAccept(),this.addBtnDecline(),this.addDotOnline(),this.loadAva()}},{key:"addAva",value:function(){var e=new Phaser.Graphics(game,0,0);e.drawCircle(this.positionFriendRequestConfig.request.ava.x*window.GameConfig.RESIZE,this.positionFriendRequestConfig.request.ava.y*window.GameConfig.RESIZE,68*window.GameConfig.RESIZE),e.anchor.set(.5),this.addChild(e),this.ava=new Phaser.Sprite(game,this.positionFriendRequestConfig.request.ava.x*window.GameConfig.RESIZE,this.positionFriendRequestConfig.request.ava.y*window.GameConfig.RESIZE,this.positionFriendRequestConfig.request.ava.nameAtlas,this.positionFriendRequestConfig.request.ava.nameSprite),this.ava.anchor.set(.5),this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(this.inputAva,this),this.ava.mask=e,this.addChild(this.ava)}},{key:"inputAva",value:function(){console.log(this.request.friend.user_id),this.event.clickAva.dispatch(this.request.friend.user_id)}},{key:"loadAva",value:function(){game.cache.checkImageKey(this.request.friend.avatar)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.request.friend.avatar))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),this.timeOnload=game.time.events.add(.1*Phaser.Timer.SECOND*this.index,function(){try{""!==e.request.friend.avatar&&e.ava.loadTexture("".concat(e.request.friend.avatar)),e.ava.width=70,e.ava.height=70}catch(e){}},this)}},{key:"loadStart",value:function(){LogConsole.log("loadStart")}},{key:"addName",value:function(){this.name=new Qt(this.positionFriendRequestConfig.request.name,this.request.friend.user_name),this.name.anchor.set(0,.5),this.addChild(this.name)}},{key:"addLineUnder",value:function(){this.line=new Bt(this.positionFriendRequestConfig.request.line),this.addChild(this.line)}},{key:"addFrameVip",value:function(){!0===this.request.vip&&(this.frameAva=new Phaser.Sprite(game,71,60,"vipSource","Ava_Nho"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.1),this.addChild(this.frameAva))}},{key:"addBtnAccept",value:function(){this.btnAccept=new _n(this.positionFriendRequestConfig.request.btn_accept,this.onClickAccept,this),this.btnAccept.anchor.set(.5);var e=new Qt(this.positionFriendRequestConfig.request.txt_accept,de.instance().getData("313"));e.anchor.set(.5),this.btnAccept.addChild(e),this.addChild(this.btnAccept)}},{key:"onClickAccept",value:function(){this.btnAccept.inputEnabled=!1,this.event.accept.dispatch(this.request)}},{key:"addBtnDecline",value:function(){this.btnDecline=new _n(this.positionFriendRequestConfig.request.btn_decline,this.onClickDecline,this),this.btnDecline.anchor.set(.5);var e=new Qt(this.positionFriendRequestConfig.request.txt_decline,de.instance().getData("314"));e.anchor.set(.5),this.btnDecline.addChild(e),this.addChild(this.btnDecline)}},{key:"onClickDecline",value:function(){this.event.decline.dispatch(this.request)}},{key:"addDotOnline",value:function(){1==this.request.friend.is_online?(this.dotOnline=new Bt(this.positionFriendRequestConfig.request.online_icon),this.addChild(this.dotOnline)):(this.dotOnline=new Bt(this.positionFriendRequestConfig.request.offline_icon),this.addChild(this.dotOnline))}},{key:"destroy",value:function(){game.time.events.remove(this.timeOnload),HO(VO(t.prototype),"destroy",this).call(this)}},{key:"height",get:function(){return 114*window.GameConfig.RESIZE}}])&&FO(n.prototype,i),o&&FO(n,o),t}();function qO(e){return(qO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zO(e,t){return!t||"object"!==qO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YO(e,t,n){return(YO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=XO(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function XO(e){return(XO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JO(e,t){return(JO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=zO(this,XO(t).call(this,game))).friendRequestList=e,n.event={accept:new Phaser.Signal,decline:new Phaser.Signal,getUserProfile:new Phaser.Signal},n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JO(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.listView;var e=new Phaser.Group(game);e.x=0,e.y=205*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-321)*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0});for(var n=0;n<this.friendRequestList.length;n++){var i=new WO(this.friendRequestList[n],n);i.event.accept.add(this.acceptRequestFriend,this),i.event.decline.add(this.declineRequestFriend,this),i.event.clickAva.add(this.requestClickAva,this),this.listView.add(i)}}},{key:"acceptRequestFriend",value:function(e){this.event.accept.dispatch(e)}},{key:"declineRequestFriend",value:function(e){this.event.decline.dispatch(e)}},{key:"requestClickAva",value:function(e){this.event.getUserProfile.dispatch(e)}},{key:"destroy",value:function(){for(this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),YO(XO(t.prototype),"destroy",this).call(this)}}])&&KO(n.prototype,i),o&&KO(n,o),t}();function eR(e){return(eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tR(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nR(e,t){return!t||"object"!==eR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iR(e){return(iR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oR(e,t){return(oR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var aR=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=nR(this,iR(t).call(this,game,e,n,null))).inputEnabled=!0,o.anchor.set(.5),o.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),o.positionFriendRequestConfig=JSON.parse(game.cache.getText("positionFriendRequestConfig")),o.type=i,o.event={clickTab:new Phaser.Signal},o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oR(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.layoutBot=new Phaser.Sprite(game,0,0,null),this.layoutTop=new Phaser.Sprite(game,0,0,null),this.addChild(this.layoutBot),this.addChild(this.layoutTop),this.bgTab,this.txtTab,this.lineUnderTab,this.addBGTab(),this.addTxtTab(),this.addLineUnderTab(),this.addLineDoc()}},{key:"addBGTab",value:function(){this.bgTab=new Phaser.Button(game,this.positionFriendRequestConfig.tab_active.x*window.GameConfig.RESIZE,this.positionFriendRequestConfig.tab_active.y*window.GameConfig.RESIZE,this.positionFriendRequestConfig.tab_active.nameAtlas,this.onClickTab,this,null,this.positionFriendRequestConfig.tab_active.nameSprite),this.bgTab.anchor.set(.5),this.layoutBot.addChild(this.bgTab)}},{key:"addTxtTab",value:function(){this.txtTab=new Phaser.Text(game,this.positionMenuConfig.mail.txt_tab.x*window.GameConfig.RESIZE,this.positionMenuConfig.mail.txt_tab.y*window.GameConfig.RESIZE,this.type,this.positionMenuConfig.mail.txt_tab.style),this.txtTab.anchor.set(.5),this.layoutBot.addChild(this.txtTab)}},{key:"addLineUnderTab",value:function(){this.lineUnderTab=new Bt(this.positionMenuConfig.mail.line_gradient),this.lineUnderTab.anchor.set(.5),this.layoutBot.addChild(this.lineUnderTab)}},{key:"onClickTab",value:function(){be.instance().playSound(be.buttonclick),this.event.clickTab.dispatch(this.type)}},{key:"setActive",value:function(){this.txtTab.addColor("#ffffff",0),this.lineUnderTab.revive()}},{key:"setDisActive",value:function(){this.txtTab.addColor("#93909d",0),this.lineUnderTab.kill()}},{key:"addLineDoc",value:function(){var e=new Phaser.Sprite(game,this.positionFriendRequestConfig.line_doc.x,this.positionFriendRequestConfig.line_doc.y,this.positionFriendRequestConfig.line_doc.nameAtlas,this.positionFriendRequestConfig.line_doc.nameSprite);e.anchor.set(.5),e.scale.set(3,1),this.layoutTop.addChild(e)}},{key:"addCountUnread",value:function(e){null==this.noti&&(this.noti=new Bt(this.positionMenuConfig.count_unread),this.noti.kill(),this.noti.anchor.set(.5),this.countUnread=new Qt(this.positionMenuConfig.txt_count_unread,this.positionMenuConfig.txt_count_unread.text),this.countUnread.anchor.set(.5),this.noti.addChild(this.countUnread),this.layoutTop.addChild(this.noti)),e>0?(this.noti.revive(),this.countUnread.setText(e)):this.noti.kill()}},{key:"addCountFriend",value:function(e){this.txtTab.setText("".concat(this.type," (").concat(e,")"))}}])&&tR(n.prototype,i),o&&tR(n,o),t}();function sR(e){return(sR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rR(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lR(e,t){return!t||"object"!==sR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cR(e,t,n){return(cR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hR(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function hR(e){return(hR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uR(e,t){return(uR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dR=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=lR(this,hR(t).call(this,game))).positionFriendRequestConfig=JSON.parse(game.cache.getText("positionFriendRequestConfig")),i.friend=e,i.index=n,i.event={chat:new Phaser.Signal,clickAva:new Phaser.Signal},i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uR(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.ava,this.name,this.btnAccept,this.btnDecline,this.dotOnline,this.line,this.addAva(),this.addName(),this.addLineUnder(),this.addFrameVip(),this.addChat(),this.addDotOnline(),this.loadAva()}},{key:"addAva",value:function(){var e=new Phaser.Graphics(game,0,0);e.drawCircle(this.positionFriendRequestConfig.request.ava.x*window.GameConfig.RESIZE,this.positionFriendRequestConfig.request.ava.y*window.GameConfig.RESIZE,68*window.GameConfig.RESIZE),e.anchor.set(.5),this.addChild(e),this.ava=new Phaser.Sprite(game,this.positionFriendRequestConfig.request.ava.x*window.GameConfig.RESIZE,this.positionFriendRequestConfig.request.ava.y*window.GameConfig.RESIZE,this.positionFriendRequestConfig.request.ava.nameAtlas,this.positionFriendRequestConfig.request.ava.nameSprite),this.ava.anchor.set(.5),this.ava.scale.set(window.GameConfig.SCALE_AVA_FRIEND*window.GameConfig.RESIZE),this.ava.inputEnabled=!0,this.ava.events.onInputUp.add(this.inputAva,this),this.ava.mask=e,this.addChild(this.ava)}},{key:"inputAva",value:function(){this.event.clickAva.dispatch(this.friend.id)}},{key:"loadAva",value:function(){game.cache.checkImageKey(this.friend.avatar)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.friend.avatar))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),this.timeOnload=game.time.events.add(.1*Phaser.Timer.SECOND*this.index,function(){try{game.cache.checkImageKey(e.friend.avatar)&&e.ava.loadTexture("".concat(e.friend.avatar)),e.ava.width=70,e.ava.height=70}catch(e){}},this)}},{key:"loadStart",value:function(){}},{key:"addName",value:function(){this.name=new Qt(this.positionFriendRequestConfig.request.name,this.friend.user_name),this.name.anchor.set(0,.5),this.addChild(this.name)}},{key:"addLineUnder",value:function(){this.line=new Bt(this.positionFriendRequestConfig.request.line),this.addChild(this.line)}},{key:"addFrameVip",value:function(){!0===this.friend.vip&&(this.frameAva=new Phaser.Sprite(game,71,60,"vipSource","Ava_Nho"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.1),this.addChild(this.frameAva))}},{key:"addDotOnline",value:function(){1==this.friend.is_online?(this.dotOnline=new Bt(this.positionFriendRequestConfig.request.online_icon),this.addChild(this.dotOnline)):(this.dotOnline=new Bt(this.positionFriendRequestConfig.request.offline_icon),this.addChild(this.dotOnline))}},{key:"addChat",value:function(){this.btnChat=new _n(this.positionFriendRequestConfig.request.icon_chat,this.onClickChat,this),this.btnChat.anchor.set(.5),this.addChild(this.btnChat)}},{key:"onClickChat",value:function(){this.btnChat.inputEnabled=!1,this.event.chat.dispatch({avatar:this.friend.avatar,is_online:this.friend.is_online,id:this.friend.id,user_name:this.friend.user_name,vip:this.friend.vip})}},{key:"destroy",value:function(){game.time.events.remove(this.timeOnload),cR(hR(t.prototype),"destroy",this).call(this)}},{key:"height",get:function(){return 114*window.GameConfig.RESIZE}}])&&rR(n.prototype,i),o&&rR(n,o),t}();function fR(e){return(fR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pR(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gR(e,t){return!t||"object"!==fR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yR(e,t,n){return(yR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mR(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function mR(e){return(mR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vR(e,t){return(vR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wR=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gR(this,mR(t).call(this,game))).friendlist=e,n.event={getUserProfile:new Phaser.Signal},n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vR(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.listView,this.ktBuild=!1,this.idx=0,this.countItem=0;var e=new Phaser.Group(game);e.x=0,e.y=205*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-321)*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.listView.events.changeIndex.add(this.changeIndex,this),this.buildItemPage()}},{key:"changeIndex",value:function(){var e=this.listView.getIdx();this.buildChangeIndex(e)}},{key:"buildChangeIndex",value:function(e){this.countItem===e+1&&!1===this.ktBuild&&this.buildItemPage()}},{key:"buildItemPage",value:function(){var e=this.friendlist;this.ktBuild=!0;for(var t=this.idx;t<e.length;t++){var n=new dR(this.friendlist[t],t);if(n.event.clickAva.add(this.requestClickAva,this),n.event.chat.add(this.requestChat,this),this.listView.add(n),this.idx++,this.countItem++,this.countItem%8==0&&this.idx<e.length){this.ktBuild=!1;break}this.idx===e.length&&(this.ktBuild=!1)}}},{key:"requestChat",value:function(e){jC.instance().addChatScreen(e)}},{key:"requestClickAva",value:function(e){this.event.getUserProfile.dispatch(e)}},{key:"destroy",value:function(){for(this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),yR(mR(t.prototype),"destroy",this).call(this)}}])&&pR(n.prototype,i),o&&pR(n,o),t}();function bR(e){return(bR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SR(e,t){return!t||"object"!==bR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ER(e,t,n){return(ER="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CR(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function CR(e){return(CR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kR(e,t){return(kR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PR=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=SR(this,CR(t).call(this,game))).positionFriendRequestConfig=JSON.parse(game.cache.getText("positionFriendRequestConfig")),e.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.event={back:new Phaser.Signal},e.friendRequestList=[],e.friendLists=[],e.isFriendTab=!0,e.afterInit(),e.addEventExtension(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kR(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.bg=new Phaser.Button(game,0,0,"bg-playlist"),this.addChild(this.bg),this.layoutBot=new Phaser.Group(game),this.layoutTop=new Phaser.Group(game),this.addChild(this.layoutBot),this.addChild(this.layoutTop),this.loadDoneRequest=!1,this.header,this.frameScreen,this.scrollListRequest=null,this.scrollListFriend=null,this.dotCountFriend=null,this.addHeader(),this.addFrameScreen(),He.instance().logEvent(He.Friend_add)}},{key:"afterTweenDone",value:function(){this.sendFriendRequestLoadRequest(),this.sendFriendListLoadRequest()}},{key:"addHeader",value:function(){this.header=new Bt(this.positionFriendRequestConfig.header.tab),this.txtHeader=new Qt(this.positionFriendRequestConfig.header.txt_header,de.instance().getData("223")),this.txtHeader.anchor.set(.5,0),this.header.addChild(this.txtHeader),this.addChild(this.header)}},{key:"addFrameScreen",value:function(){this.txtRequestAddFriend,this.lineUnderTxtRequestAddFriend,this.dotCountFriend,this.lineGradientUnderTxtRequestAddFriend,this.addFriendTab(),this.addRequestTab()}},{key:"addTxtRequestAddFriend",value:function(){this.txtRequestAddFriend=new Qt(this.positionFriendRequestConfig.txt_request_add_friend,this.positionFriendRequestConfig.txt_request_add_friend.text),this.addChild(this.txtRequestAddFriend)}},{key:"addFriendTab",value:function(){this.friendTab=new aR(160*window.GameConfig.RESIZE,153*window.GameConfig.RESIZE,de.instance().getData("224")),this.friendTab.event.clickTab.add(this.onClickTabFriend,this),this.layoutTop.addChild(this.friendTab)}},{key:"addRequestTab",value:function(){this.requestTab=new aR(480*window.GameConfig.RESIZE,153*window.GameConfig.RESIZE,de.instance().getData("225")),this.requestTab.event.clickTab.add(this.onClickTabRequest,this),this.requestTab.setDisActive(),this.layoutTop.addChild(this.requestTab)}},{key:"onClickTabFriend",value:function(){this.isFriendTab=!0,this.friendTab.setActive(),this.requestTab.setDisActive(),this.removeScollListRequest(),this.sendFriendListLoadRequest()}},{key:"onClickTabRequest",value:function(){this.isFriendTab=!1,this.friendTab.setDisActive(),this.requestTab.setActive(),this.removeScrollFriendList(),this.sendFriendRequestLoadRequest()}},{key:"addLineUnderTxtRequestAddFriend",value:function(){this.lineUnderTxtRequestAddFriend=new Bt(this.positionFriendRequestConfig.line_under_txt_request_add_friend),this.addChild(this.lineUnderTxtRequestAddFriend)}},{key:"addDotCountFriend",value:function(){this.removeDotCount(),this.dotCountFriend=new Bt(this.positionFriendRequestConfig.dot_count_friend),this.dotCountFriend.anchor.set(.5),this.addChild(this.dotCountFriend)}},{key:"removeDotCount",value:function(){null!==this.dotCountFriend&&(this.removeChild(this.dotCountFriend),this.dotCountFriend.destroy(),this.dotCountFriend=null)}},{key:"addNumberInDotCount",value:function(e){if(e>0){this.addDotCountFriend();var t=new Phaser.Text(game,0,2,e,this.positionMenuConfig.txtNotiDot.configs);t.anchor.set(.5),this.dotCountFriend.addChild(t)}}},{key:"addLineGradientUnderTxtRequestAddFriend",value:function(){this.lineGradientUnderTxtRequestAddFriend=new Bt(this.positionFriendRequestConfig.line_gradient_under_txt_request_add_friend),this.lineGradientUnderTxtRequestAddFriend.anchor.set(0,.5),this.addChild(this.lineGradientUnderTxtRequestAddFriend)}},{key:"addScrollListRequest",value:function(){this.friendRequestList.length>0&&(this.removeScollListRequest(),this.scrollListRequest=new $O(this.friendRequestList),this.scrollListRequest.event.accept.add(this.acceptRequestFriend,this),this.scrollListRequest.event.decline.add(this.declineRequestFriend,this),this.scrollListRequest.event.getUserProfile.add(this.getUserProfile,this),this.layoutBot.addChild(this.scrollListRequest),1==this.isFriendTab?this.scrollListRequest.visible=!1:this.scrollListRequest.visible=!0)}},{key:"removeScollListRequest",value:function(){null!==this.scrollListRequest&&(this.removeChild(this.scrollListRequest),this.scrollListRequest.destroy(),this.scrollListRequest=null)}},{key:"addScrollFriendList",value:function(){this.friendLists.length>0&&(this.removeScrollFriendList(),this.scrollListFriend=new wR(this.friendLists),this.scrollListFriend.event.getUserProfile.add(this.getUserProfile,this),this.layoutBot.addChild(this.scrollListFriend),1==this.isFriendTab?this.scrollListFriend.visible=!0:this.scrollListFriend.visible=!1)}},{key:"removeScrollFriendList",value:function(){null!==this.scrollListFriend&&(this.removeChild(this.scrollListFriend),this.scrollListFriend.destroy(),this.scrollListFriend=null)}},{key:"acceptRequestFriend",value:function(e){this.sendUserFriendRequest(ur.begin(ur.ACTION_ACCEPT_ADD_REQUEST,e.friend.user_id));var t=new pg;t.level=0,t.user_name=e.friend.user_name,t.id=e.friend.user_id,t.avatar=e.friend.avatar,t.is_online=e.friend.is_online,t.vip=e.vip,ak.instance().listFriend.setFriend(t.id,t)}},{key:"declineRequestFriend",value:function(e){this.sendUserFriendRequest(ur.begin(ur.ACTION_REFUSE_ADD_REQUEST,e.friend.user_id))}},{key:"getUserProfile",value:function(e){jC.instance().addUserProfile(e)}},{key:"sendUserFriendRequest",value:function(e){dV.instance().sendData(ki.USER_FRIEND_REQUEST,e)}},{key:"onBack",value:function(){this.destroy(),this.event.back.dispatch()}},{key:"sendFriendRequestLoadRequest",value:function(){0==this.loadDoneRequest?(dV.instance().sendData(ki.FRIEND_REQUEST_LOAD_REQUEST,null),ht.instance().showLoading()):(this.addScrollListRequest(),this.addNumberInDotCount(this.friendRequestList.length))}},{key:"sendFriendListLoadRequest",value:function(){!0===ak.instance().ktLoadFriend?this.loadListFriendComplete():ak.instance().sendGetFriendsList()}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),ak.instance().event.load_list_friend_complete.add(this.loadListFriendComplete,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),ak.instance().event.load_list_friend_complete.remove(this.loadListFriendComplete,this)}},{key:"onExtensionResponse",value:function(e){var t=this;ht.instance().hideLoading(),e.cmd==ki.FRIEND_REQUEST_LOAD_RESPONSE&&"OK"==e.params.getUtfString("status")&&(this.loadDoneRequest=!0,this.handleFriendRequestLoadResponse(e.params,function(){t.addScrollListRequest(),t.addNumberInDotCount(t.friendRequestList.length)})),e.cmd==ki.USER_FRIEND_RESPONSE&&"OK"==e.params.getUtfString("status")&&(this.loadDoneRequest=!1,this.removeScollListRequest(),this.dotCountFriend.destroy(),this.sendFriendRequestLoadRequest())}},{key:"loadListFriendComplete",value:function(){var e=this;this.handleParamsFriendsResponse(null,function(){e.friendTab.addCountFriend(e.friendLists.length),e.addScrollFriendList()})}},{key:"handleParamsFriendsResponse",value:function(e,t){this.friendLists=[],this.friendLists=ak.instance().listFriend.getFriends(),t()}},{key:"handleFriendRequestLoadResponse",value:function(e,t){for(var n=[],i=e.getSFSArray(BO.friend_requests),o=0;o<i.size();o++){var a=new jO,s=i.getSFSObject(o);a.user_1=s.getInt(BO.user_1),a.user_2=s.getInt(BO.user_2),a.created=s.getLong(BO.created);var r=s.getSFSObject(BO.friend);a.friend.user_id=r.getInt(BO.user_id),a.friend.user_name=r.getUtfString(BO.user_name),a.friend.avatar=r.getUtfString(BO.avatar),a.friend.is_online=r.getBool(BO.is_onlines),a.state=s.getUtfString(BO.state),a.is_aware=s.getInt(BO.is_aware),a.updated=s.getLong(BO.updated),a.vip=r.getBool(BO.vip),n.push(a)}this.friendRequestList=n,this.loadDoneRequest=!0,t()}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),ER(CR(t.prototype),"destroy",this).call(this)}}])&&_R(n.prototype,i),o&&_R(n,o),t}();function OR(e){return(OR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RR(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xR(e,t){return!t||"object"!==OR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TR(e){return(TR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IR(e,t){return(IR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var AR=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=xR(this,TR(t).call(this,game,e,n,null))).type=4,i&&(o.typeBefore=i),o.type>o.typeBefore?o.x=game.width:o.x=-game.width,o.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IR(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addFriendScreen=null}},{key:"createAddFriendScreen",value:function(){this.addFriendScreen=new PR,this.addChild(this.addFriendScreen)}},{key:"show",value:function(){var e=this,t=game.add.tween(this).to({x:0},150,"Linear",!0);t.start(),t.onComplete.add(function(){e.addFriendScreen.afterTweenDone()})}},{key:"hide",value:function(e){var t=this;if(this.type>e){var n=game.add.tween(this).to({x:game.width},150,"Linear",!0);n.start(),n.onComplete.add(function(){t.destroy()},this)}else{var i=game.add.tween(this).to({x:-game.width-300*window.GameConfig.RESIZE},150,"Linear",!0);i.start(),i.onComplete.add(function(){t.destroy()},this)}}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&RR(n.prototype,i),o&&RR(n,o),t}();function LR(e){return(LR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DR(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function GR(e,t){return!t||"object"!==LR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MR(e,t,n){return(MR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NR(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function NR(e){return(NR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BR(e,t){return(BR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jR=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=GR(this,NR(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.event={backMenu:new Phaser.Signal,changeOtherScreen:new Phaser.Signal},e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BR(e,t)}(t,Z),n=t,(i=[{key:"createButton",value:function(){}},{key:"createButtonOnNavigation",value:function(){this.addEventExtension(),this.shopScreen,this.mailScreen,this.addFriendScreen,this.typeNew,this.typeOld=1,this.layoutContent=new Phaser.Group(game),this.layoutTop=new Phaser.Group(game),this.addChild(this.layoutContent),this.addChild(this.layoutTop),this.navBG=this.addNavBG(),this.addChild(this.navBG),this.addFourBtnOnNavbar(),this.buildBtnArray(),this.addChildBtnToNavBG(),Gl.switchButton(this.btnArray,this.activeBtnArray,this.homeBtn,this.activehomeBtn),null!==oe.instance().dataMessagesLocal&&this.ajaxCountMessage()}},{key:"addFourBtnOnNavbar",value:function(){this.homeBtn=this.addHomeBtn(),this.activehomeBtn=this.addActiveHomeBtn(),this.mailBtn=this.addMailBtn(),this.activeMailBtn=this.addActiveMailBtn(),this.addFriendBtn=this.addAddFriendBtn(),this.activeAddFriendBtn=this.addActiveAddFriendBtn()}},{key:"addChildBtnToNavBG",value:function(){this.navBG.addChild(this.homeBtn),this.navBG.addChild(this.activehomeBtn),this.navBG.addChild(this.activeMailBtn),this.navBG.addChild(this.mailBtn),this.navBG.addChild(this.activeAddFriendBtn),this.navBG.addChild(this.addFriendBtn)}},{key:"buildBtnArray",value:function(){this.activeBtnArray=[this.activehomeBtn,this.activeMailBtn,this.activeAddFriendBtn],this.btnArray=[this.homeBtn,this.mailBtn,this.addFriendBtn]}},{key:"addNavBG",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.menu_bg.x*window.GameConfig.RESIZE,game.height-61*window.GameConfig.RESIZE,this.positionMenuConfig.menu_bg.nameAtlas,function(){},this,null,this.positionMenuConfig.menu_bg.nameSprite);return e.anchor.set(.5),e}},{key:"addHomeBtn",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.btn_home.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_home.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_home.nameAtlas,this.onClickHomeBtn,this,null,this.positionMenuConfig.btn_home.nameSprite);return e.anchor.set(.5),e.type=1,e}},{key:"onClickHomeBtn",value:function(){be.instance().playSound(be.buttonclick),Gl.switchButton(this.btnArray,this.activeBtnArray,this.homeBtn,this.activehomeBtn),this.typeNew=1,this.changeScreen(this.typeNew,this.typeOld),this.typeOld=1}},{key:"addActiveHomeBtn",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.btn_home_active.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_home_active.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_home_active.nameAtlas,function(){},this,null,this.positionMenuConfig.btn_home_active.nameSprite);return e.anchor.set(.5),e}},{key:"addAddFriendBtn",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.btn_setting.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_setting.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_setting.nameAtlas,this.onClickSettingBtn,this,null,this.positionMenuConfig.btn_setting.nameSprite);return e.events.onInputUp.add(this.onClickFriendRequestBtn,this),e.anchor.set(.5),e.type=4,e}},{key:"onClickFriendRequestBtn",value:function(){He.instance().logEvent(He.Friend_add_button),be.instance().playSound(be.buttonclick),Gl.switchButton(this.btnArray,this.activeBtnArray,this.addFriendBtn,this.activeAddFriendBtn),this.typeNew=4,this.changeScreen(this.typeNew,this.typeOld),this.typeOld=4,this.noti&&this.noti.destroy()}},{key:"addActiveAddFriendBtn",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.btn_setting_active.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_setting_active.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_setting_active.nameAtlas,function(){},this,null,this.positionMenuConfig.btn_setting_active.nameSprite);return e.anchor.set(.5),e}},{key:"addMailBtn",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.btn_mail.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_mail.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_mail.nameAtlas,this.onClickMailBtn,this,null,this.positionMenuConfig.btn_mail.nameSprite);return e.anchor.set(.5),e.type=2,e}},{key:"onClickMailBtn",value:function(){He.instance().logEvent(He.Mail_button),be.instance().playSound(be.buttonclick),Gl.switchButton(this.btnArray,this.activeBtnArray,this.mailBtn,this.activeMailBtn),this.typeNew=2,this.changeScreen(this.typeNew,this.typeOld),this.typeOld=2,this.notiMail&&this.notiMail.destroy()}},{key:"addActiveMailBtn",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.btn_mail_active.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_mail_active.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_mail_active.nameAtlas,function(){},this,null,this.positionMenuConfig.btn_mail_active.nameSprite);return e.anchor.set(.5),e}},{key:"addShopBtn",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.btn_shop.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_shop.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_shop.nameAtlas,this.onClickShopBtn,this,null,this.positionMenuConfig.btn_shop.nameSprite);return e.anchor.set(.5),e.type=3,e}},{key:"onClickShopBtn",value:function(){be.instance().playSound(be.buttonclick),jC.instance().addShop(0)}},{key:"addActiveShopBtn",value:function(){var e=new Phaser.Button(game,this.positionMenuConfig.btn_shop_active.x*window.GameConfig.RESIZE,this.positionMenuConfig.btn_shop_active.y*window.GameConfig.RESIZE,this.positionMenuConfig.btn_shop_active.nameAtlas,function(){},this,null,this.positionMenuConfig.btn_shop_active.nameSprite);return e.anchor.set(.5),e}},{key:"changeScreen",value:function(e,t){1==e?(this.hideScreen(e,t),FH.instance().changeScreen(De.MAIN_MENU)):2==e?(this.mailScreen=new MO(0,0,t),this.mailScreen.createMail(),this.layoutContent.addChild(this.mailScreen),this.mailScreen.show(),this.hideScreen(e,t),this.event.changeOtherScreen.dispatch()):3==e||4==e&&(this.addFriendScreen=new AR(0,0,t),this.addFriendScreen.createAddFriendScreen(),this.layoutContent.addChild(this.addFriendScreen),this.addFriendScreen.show(),this.hideScreen(e,t),this.event.changeOtherScreen.dispatch())}},{key:"hideScreen",value:function(e,t){1==t?LogConsole.log("don't do nothing"):2==t?this.mailScreen.hide(e):3==t?this.shopScreen.hide(e):4==t&&this.addFriendScreen.hide(e)}},{key:"addFriendRequest",value:function(e){if(e>0){this.noti=new Phaser.Sprite(game,this.positionMenuConfig.notiDot.x*window.GameConfig.RESIZE,this.positionMenuConfig.notiDot.y*window.GameConfig.RESIZE,this.positionMenuConfig.notiDot.nameAtlas,this.positionMenuConfig.notiDot.nameSprite);var t=new Phaser.Text(game,this.positionMenuConfig.txtNotiDot.x*window.GameConfig.RESIZE,this.positionMenuConfig.txtNotiDot.y*window.GameConfig.RESIZE,e,this.positionMenuConfig.txtNotiDot.configs);t.anchor.set(.5),this.noti.addChild(t),this.addFriendBtn.addChild(this.noti)}}},{key:"ajaxCountMessage",value:function(){null!==oe.instance().dataMessagesLocal&&null!==oe.instance().systemMessagesLocal&&this.onCountMessageCallback(Xr.instance().countMessage(oe.instance().dataMessagesLocal.dataMessages,oe.instance().systemMessagesLocal.dataMessages))}},{key:"onCountMessageCallback",value:function(e){this.addMailNoti(e)}},{key:"addMailNoti",value:function(e){if(e>0){this.notiMail=new Phaser.Sprite(game,this.positionMenuConfig.notiDot.x*window.GameConfig.RESIZE,this.positionMenuConfig.notiDot.y*window.GameConfig.RESIZE,this.positionMenuConfig.notiDot.nameAtlas,this.positionMenuConfig.notiDot.nameSprite);var t=new Phaser.Text(game,this.positionMenuConfig.txtNotiDot.x*window.GameConfig.RESIZE,this.positionMenuConfig.txtNotiDot.y*window.GameConfig.RESIZE,e,this.positionMenuConfig.txtNotiDot.configs);t.anchor.set(.5),this.notiMail.addChild(t),this.mailBtn.addChild(this.notiMail)}}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.backMenu,this),Qe.instance().event.loadMessagesDone.add(this.loadMessagesDone,this)}},{key:"backMenu",value:function(){this.event.backMenu.dispatch(),this.removeEventExtension()}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.backMenu,this),Qe.instance().event.loadMessagesDone.remove(this.loadMessagesDone,this)}},{key:"loadMessagesDone",value:function(){this.ajaxCountMessage()}},{key:"destroy",value:function(){if(this.removeEventExtension(),null!==this.children){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}MR(NR(t.prototype),"destroy",this).call(this)}}])&&DR(n.prototype,i),o&&DR(n,o),t}();function UR(e){return(UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FR(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ZR(e,t){return!t||"object"!==UR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HR(e){return(HR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VR(e,t){return(VR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var QR=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ZR(this,HR(t).call(this,game,e,n,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VR(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"add",value:function(e){this.addChild(e)}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&FR(n.prototype,i),o&&FR(n,o),t}();function WR(e){return(WR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qR(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function KR(e,t){return!t||"object"!==WR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zR(e,t,n){return(zR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YR(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function YR(e){return(YR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XR(e,t){return(XR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var JR=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=KR(this,YR(t).call(this,game))).x=e,a.y=n,a.positionConfigs=JSON.parse(game.cache.getText("positionMenuConfig")),a.positionPracticeScreenConfig=JSON.parse(game.cache.getText("positionPracticeScreenConfig")),a.valueScale=window.GameConfig.SCALE_PLAYLIST_PRACTICE,a.configs=i,a.thumbUrl=null,a.thumb,a.namePlaylist=null,a.boxPrice=null,a.btnChoose,a.maskThumb,a.signalInput=new Phaser.Signal,a.signalBuyPlaylist=new Phaser.Signal,a.signalGetRanking=new Phaser.Signal,a.index=o,a.id=10*Math.random(),a.addEvent(),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XR(e,t)}(t,Z),n=t,(i=[{key:"afterCreate",value:function(){this.addThumb(),this.addNamePlaylist(),1!==this.configs.is_owner?this.addBoxPrice(this.positionPracticeScreenConfig.practice_box_price):this.addBtnChoose(this.positionPracticeScreenConfig.btn_choose)}},{key:"addThumb",value:function(){this.maskThumb=new Phaser.Graphics(game,0,0),this.maskThumb.beginFill(16777215),this.maskThumb.drawRoundedRect(0,0,165*window.GameConfig.RESIZE,165*window.GameConfig.RESIZE,10*window.GameConfig.RESIZE),this.addChild(this.maskThumb),this.thumb=new Phaser.Sprite(game,0,0,"songDetailSprites","Nhactre"),this.thumb.scale.set(window.GameConfig.SCALE_PLAYLIST_PRACTICE*window.GameConfig.RESIZE);var e=new Phaser.Sprite(game,10,10,"practiceMenuSprites","Ranking");this.thumb.addChild(e),this.thumb.mask=this.maskThumb,this.thumb.inputEnabled=!0,this.thumb.events.onInputUp.add(this.clickThumb,this),this.addChild(this.thumb)}},{key:"clickThumb",value:function(){this.signalGetRanking.dispatch(this.configs)}},{key:"onClickSprite",value:function(){var e=this;be.instance().playSound(be.buttonclick),this.btnChoose.inputEnabled=!1;var t={name:this.configs.name,id:this.configs.id};this.practicePlaylist=t,this.signalInput.dispatch(t),this.timeoutInput=setTimeout(function(){e.btnChoose.inputEnabled=!0},500)}},{key:"addBtnChoose",value:function(e){this.btnChoose=new Phaser.Sprite(game,e.btn.x*window.GameConfig.RESIZE,e.btn.y*window.GameConfig.RESIZE,e.btn.nameAtlas,e.btn.nameSprite),this.btnChoose.inputEnabled=!0,this.btnChoose.events.onInputUp.add(this.onClickSprite,this);var t=new Phaser.Text(game,e.txt.x*window.GameConfig.RESIZE,e.txt.y*window.GameConfig.RESIZE,de.instance().getData("226"),e.txt.configs);t.anchor.set(.5,0),this.btnChoose.addChild(t),this.addChild(this.btnChoose)}},{key:"addNamePlaylist",value:function(){this.namePlaylist=new Phaser.Text(game,0,180*window.GameConfig.RESIZE,this.configs.name,{font:"Gilroy",fill:"#ffffff",wordWrap:!0,wordWrapWidth:150,maxLines:2,fontSize:20}),this.addChild(this.namePlaylist)}},{key:"addBoxPrice",value:function(e){LogConsole.log("has price"),this.boxPrice=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.boxPrice.inputEnabled=!0,this.boxPrice.events.onInputUp.add(this.onClickBuy,this);var t=this.addGem(this.positionPracticeScreenConfig.practice_gem_box_price),n=this.addPrice(this.positionPracticeScreenConfig.practice_txt_price),i=t.width+n.width;n.x=(this.boxPrice.width-i)/2-5*window.GameConfig.RESIZE,t.x=(this.boxPrice.width-i)/2+n.width+5*window.GameConfig.RESIZE,this.boxPrice.addChild(t),this.boxPrice.addChild(n),this.addChild(this.boxPrice)}},{key:"onClickBuy",value:function(){be.instance().playSound(be.buttonclick),this.playlistBuy=new bc,this.playlistBuy=Object.assign({},this.playlistBuy,this.configs),jC.instance().buyItem(this.playlistBuy)}},{key:"addGem",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addPrice",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,this.configs.price,e.configs)}},{key:"loadThumb",value:function(){this.key=this.configs.thumb,game.cache.checkImageKey(this.configs.thumb)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.key))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){try{game.cache.checkImageKey(e.key)?e.thumb.loadTexture("".concat(e.key)):e.thumb.loadTexture("songDetailSprites","Nhactre")}catch(e){}},100*this.index)}},{key:"loadStart",value:function(){LogConsole.log("loadStart")}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case kt.SHOP_BUY_PLAYLIST_RESPONSE:"OK"==e.params.getUtfString("status")&&e.params.getInt("playlist_id")==this.configs.id&&(jC.instance().addPopupBuyDone(this.configs.id,!0),this.signalBuyPlaylist.dispatch(this.configs))}}},{key:"destroy",value:function(){for(clearTimeout(this.timeoutInput),this.removeEvent();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}zR(YR(t.prototype),"destroy",this).call(this)}}])&&qR(n.prototype,i),o&&qR(n,o),t}();function $R(e){return($R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ex(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tx(e,t){return!t||"object"!==$R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nx(e){return(nx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ix(e,t){return(ix=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ox=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=tx(this,nx(t).call(this,game))).index=i,e.afterCreate(n),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ix(e,t)}(t,Z),n=t,(i=[{key:"afterCreate",value:function(e){this.key=e,this.ava=new Phaser.Sprite(game,0,0,"songDetailSprites","ava-default"),this.ava.anchor.set(.5),this.ava.scale.set(.35*window.GameConfig.RESIZE),this.addChild(this.ava),this.maskAva=new Phaser.Graphics(game,0,0),this.addMaskAva(),this.beginLoad()}},{key:"addMaskAva",value:function(){this.maskAva.beginFill(),this.maskAva.drawCircle(0,0,200),this.maskAva.endFill(),this.ava.mask=this.maskAva,this.ava.addChild(this.maskAva)}},{key:"beginLoad",value:function(){game.cache.checkImageKey(this.key)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.key))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){try{""!==e.key?e.ava.loadTexture(e.key):e.ava.loadTexture("songDetailSprites","ava-default")}catch(e){}},50*this.index)}}])&&ex(n.prototype,i),o&&ex(n,o),t}();function ax(e){return(ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rx(e,t){return!t||"object"!==ax(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lx(e){return(lx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cx(e,t){return(cx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hx=function(e){function t(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=rx(this,lx(t).call(this,game,0,188*n*window.GameConfig.RESIZE,null))).positionRankingConfig=JSON.parse(game.cache.getText("positionRankingConfig")),i.configs=e,i.index=n,i.isFinish=o,i.clickProfile=!1,i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cx(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.icon,this.number,this.ava,this.name,this.score,this.diamond,this.txtDiamond,this.ticket,this.txtTicket,this.line,this.addIcon(this.positionRankingConfig.rank[this.index+1]),this.addNumber(),this.addAva(),this.addName(),this.addCircle(this.positionRankingConfig.circle_stroke),this.addFrameAva(),this.addScore(),this.addLine()}},{key:"addIcon",value:function(e){this.icon=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.addChild(this.icon)}},{key:"addNumber",value:function(){this.number=new Phaser.Text(game,85*window.GameConfig.RESIZE,47*window.GameConfig.RESIZE,"".concat(this.index+1),{font:"GilroyMedium",fill:"#ffffff",fontSize:21}),this.addChild(this.number)}},{key:"addAva",value:function(){this.ava=new ox(this.configs.avatar,this.index),this.ava.x=170*window.GameConfig.RESIZE,this.ava.y=58*window.GameConfig.RESIZE,this.ava.ava.inputEnabled=!0,this.ava.ava.events.onInputUp.add(this.onClickAvaGetUserProfile,this),this.addChild(this.ava)}},{key:"onClickAvaGetUserProfile",value:function(){0==this.clickProfile?(this.clickProfile=!1,jC.instance().addUserProfile(this.configs.user_id)):this.clickProfile=!1}},{key:"addName",value:function(){this.name=new Phaser.Text(game,225*window.GameConfig.RESIZE,38*window.GameConfig.RESIZE,this.configs.user_name,{font:"GilroyMedium",fill:"#ffffff",fontSize:22}),this.addChild(this.name)}},{key:"addCircle",value:function(e){this.circle=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.circle.anchor.set(1,0),this.addChild(this.circle)}},{key:"addScore",value:function(){this.score=new Phaser.Text(game,-27*window.GameConfig.RESIZE,28*window.GameConfig.RESIZE,this.configs.number_of_correct,{font:"GilroyMedium",fill:"#ffa33a",fontSize:20}),this.score.anchor.set(.5),this.circle.addChild(this.score)}},{key:"addDiamondScore",value:function(){this.diamond=new Phaser.Sprite(game,this.positionRankingConfig.diamond.x*window.GameConfig.RESIZE,this.positionRankingConfig.diamond.y*window.GameConfig.RESIZE,this.positionRankingConfig.diamond.nameAtlas,this.positionRankingConfig.diamond.nameSprite),this.addChild(this.diamond),this.txtDiamond=new Phaser.Text(game,this.positionRankingConfig.txt_diamond.x*window.GameConfig.RESIZE,this.positionRankingConfig.txt_diamond.y*window.GameConfig.RESIZE,3e3/(this.index+1),this.positionRankingConfig.txt_diamond.configs),this.addChild(this.txtDiamond)}},{key:"addTicketScore",value:function(){this.ticket=new Phaser.Sprite(game,this.positionRankingConfig.ticket.x*window.GameConfig.RESIZE,this.positionRankingConfig.ticket.y*window.GameConfig.RESIZE,this.positionRankingConfig.ticket.nameAtlas,this.positionRankingConfig.ticket.nameSprite),this.addChild(this.ticket),this.txtTicket=new Phaser.Text(game,this.positionRankingConfig.txt_ticket.x*window.GameConfig.RESIZE,this.positionRankingConfig.txt_ticket.y*window.GameConfig.RESIZE,30/(this.index+1),this.positionRankingConfig.txt_ticket.configs),this.addChild(this.txtTicket)}},{key:"addLine",value:function(){this.line=new Bt(this.positionRankingConfig.line_under),this.addChild(this.line)}},{key:"addTweenMoveToScreen",value:function(){this.x=0}},{key:"addFrameAva",value:function(){!0===this.configs.vip?(this.frameAva=new Phaser.Sprite(game,170,60,"vipSource","Ava_Nho"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.1),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,170,58,"defaultSource","Khung_Ava_Thuong"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(.9),this.addChild(this.frameAva))}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}},{key:"height",get:function(){return 115*window.GameConfig.RESIZE}}])&&sx(n.prototype,i),o&&sx(n,o),t}();function ux(e){return(ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fx(e,t){return!t||"object"!==ux(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function px(e){return(px=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gx(e,t){return(gx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yx=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=fx(this,px(t).call(this,game,0,188*n*window.GameConfig.RESIZE,null))).configs=e,o.positionRankingConfig=JSON.parse(game.cache.getText("positionRankingConfig")),o.index=n,o.isFinish=i,o.clickProfile=!1,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gx(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.icon,this.number,this.ava,this.name,this.circle,this.score,this.line,this.addIcon(this.positionRankingConfig.rank.other),this.addNumber(),this.addAva(),this.addName(),this.addCircle(this.positionRankingConfig.circle_stroke),this.addFrameAva(),this.addScore(),this.addLine()}},{key:"addIcon",value:function(e){this.icon=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.addChild(this.icon)}},{key:"addNumber",value:function(){this.number=new Phaser.Text(game,80*window.GameConfig.RESIZE,39*window.GameConfig.RESIZE,"".concat(this.index+1),{font:"GilroyMedium",fill:"#ffffff",fontSize:21}),this.addChild(this.number)}},{key:"addAva",value:function(){this.ava=new ox(this.configs.avatar,this.index),this.ava.x=170*window.GameConfig.RESIZE,this.ava.y=58*window.GameConfig.RESIZE,this.ava.ava.inputEnabled=!0,this.ava.ava.events.onInputUp.add(this.onClickAvaGetUserProfile,this),this.addChild(this.ava)}},{key:"onClickAvaGetUserProfile",value:function(){0==this.clickProfile&&(this.clickProfile=!0,jC.instance().addUserProfile(this.configs.user_id))}},{key:"addName",value:function(){this.name=new Phaser.Text(game,225*window.GameConfig.RESIZE,50*window.GameConfig.RESIZE,this.configs.user_name,{font:"GilroyMedium",fill:"#ffffff",fontSize:22}),this.name.anchor.set(0,.5),this.addChild(this.name)}},{key:"addCircle",value:function(e){this.circle=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.circle.anchor.set(1,0),this.addChild(this.circle)}},{key:"addScore",value:function(){this.score=new Phaser.Text(game,-27*window.GameConfig.RESIZE,28*window.GameConfig.RESIZE,this.configs.number_of_correct,{font:"GilroyMedium",fill:"#ffa33a",fontSize:20}),this.score.anchor.set(.5),this.circle.addChild(this.score)}},{key:"addLine",value:function(){this.line=new Bt(this.positionRankingConfig.line_under),this.addChild(this.line)}},{key:"addTweenMoveToScreen",value:function(){this.position.x=0}},{key:"addFrameAva",value:function(){!0===this.configs.vip?(this.frameAva=new Phaser.Sprite(game,170,60,"vipSource","Ava_Nho"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.1),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,170,58,"defaultSource","Khung_Ava_Thuong"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(.9),this.addChild(this.frameAva))}},{key:"destroy",value:function(){for(clearTimeout(this.timeOut);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}},{key:"height",get:function(){return 115*window.GameConfig.RESIZE}}])&&dx(n.prototype,i),o&&dx(n,o),t}();function mx(e){return(mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wx(e,t){return!t||"object"!==mx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bx(e){return(bx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _x(e,t){return(_x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wx(this,bx(t).call(this,game,0,(game.height-108)*window.GameConfig.RESIZE,"practiceMenuSprites",function(){},null,null,"Tab_label"))).configs=e,n.positionRankingConfig=JSON.parse(game.cache.getText("positionRankingConfig")),n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_x(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterInit",value:function(){this.icon,this.number,this.ava,this.name,this.circle,this.score,this.frameAva,this.line,"N/A"!==this.configs.rank?(this.addIcon(this.positionRankingConfig.rank[this.configs.rank]),this.addNumber(),this.addAva(),this.addName(),this.addCircle(this.positionRankingConfig.circle_stroke),this.addScore(),this.addFrameAva()):this.addNotRank()}},{key:"addNotRank",value:function(){this.txtNotRank=new Phaser.Text(game,320,53,de.instance().getData("28"),{fontSize:30,font:"Gilroy",fill:"white",align:"center"}),this.txtNotRank.anchor.set(.5),this.addChild(this.txtNotRank)}},{key:"addIcon",value:function(e){this.configs.rank<4?(this.icon=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.addChild(this.icon)):(this.icon=new Phaser.Sprite(game,this.positionRankingConfig.rank.other.x*window.GameConfig.RESIZE,this.positionRankingConfig.rank.other.y*window.GameConfig.RESIZE,this.positionRankingConfig.rank.other.nameAtlas,this.positionRankingConfig.rank.other.nameSprite),this.addChild(this.icon))}},{key:"addNumber",value:function(){this.configs.rank>3?(this.number=new Phaser.Text(game,80*window.GameConfig.RESIZE,53*window.GameConfig.RESIZE,this.configs.rank,{font:"GilroyMedium",fill:"#ffffff",fontSize:22}),this.number.anchor.set(0,.5),this.addChild(this.number)):(this.number=new Phaser.Text(game,85*window.GameConfig.RESIZE,57*window.GameConfig.RESIZE,this.configs.rank,{font:"GilroyMedium",fill:"#ffffff",fontSize:22}),this.number.anchor.set(0,.5),this.addChild(this.number))}},{key:"addAva",value:function(){this.ava=new ox(this.configs.user_entity.avatar),this.ava.x=170*window.GameConfig.RESIZE,this.ava.y=58*window.GameConfig.RESIZE,this.addChild(this.ava)}},{key:"addName",value:function(){this.name=new Phaser.Text(game,220*window.GameConfig.RESIZE,53*window.GameConfig.RESIZE,this.configs.user_entity.user_name,{font:"GilroyMedium",fill:"#ffffff",fontSize:22}),this.name.anchor.set(0,.5),this.addChild(this.name)}},{key:"addCircle",value:function(e){this.circle=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.circle.anchor.set(1,0),this.addChild(this.circle)}},{key:"addFrameAva",value:function(){!0===dV.instance().dataMySeft.vip?(this.frameAva=new Phaser.Sprite(game,170,60,"vipSource","Ava_Nho"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.1),this.addChild(this.frameAva)):(this.frameAva=new Phaser.Sprite(game,170,58,"defaultSource","Khung_Ava_Thuong"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(.9),this.addChild(this.frameAva))}},{key:"addScore",value:function(){this.score=new Phaser.Text(game,-27*window.GameConfig.RESIZE,28*window.GameConfig.RESIZE,this.configs.number_of_correct,{font:"GilroyMedium",fill:"#ffa33a",fontSize:20}),this.score.anchor.set(.5),this.circle.addChild(this.score)}},{key:"height",get:function(){return 193}}])&&vx(n.prototype,i),o&&vx(n,o),t}();function Ex(e){return(Ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function kx(e,t){return!t||"object"!==Ex(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Px(e,t,n){return(Px="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ox(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ox(e){return(Ox=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rx(e,t){return(Rx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xx=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=kx(this,Ox(t).call(this,game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,null))).type=n,i.positionRankingConfig=JSON.parse(game.cache.getText("positionRankingConfig")),i.initVariable(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rx(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"initVariable",value:function(){this.timeCounter,this.timeIcon,this.btnField,this.txtRank,this.timingWeek,this.timeCountDownThisWeekPractice,this.lineUnder,this.timeCounter=null,this.addBtnField(),"LAST_WEEK"==this.type||this.type,this.signalInput=new Phaser.Signal}},{key:"addInput",value:function(){this.inputEnabled=!0,this.events.onInputUp.add(this.onClickSprite,this)}},{key:"onClickSprite",value:function(){be.instance().playSound(be.buttonclick),this.signalInput.dispatch()}},{key:"addBtnField",value:function(){this.btnField=new Phaser.Sprite(game,0,0,"otherSprites","tab_highlight"),this.btnField.scale.set(1.5,1),this.addChild(this.btnField)}},{key:"addTextThisWeek",value:function(){this.txtRank=new Phaser.Text(game,this.positionRankingConfig.txt_rank_this_week.x*window.GameConfig.RESIZE,this.positionRankingConfig.txt_rank_this_week.y*window.GameConfig.RESIZE,de.instance().getData("305"),this.positionRankingConfig.txt_rank_this_week.configs),this.width=this.txtRank.width,this.addChild(this.txtRank),this.addTiming(),this.lineUnder=new Bt(this.positionRankingConfig.header.line),this.addChild(this.lineUnder)}},{key:"addTiming",value:function(){this.timeIcon=new Phaser.Sprite(game,this.positionRankingConfig.clock.x*window.GameConfig.RESIZE,this.positionRankingConfig.clock.y*window.GameConfig.RESIZE,this.positionRankingConfig.clock.nameAtlas,this.positionRankingConfig.clock.nameSprite),this.addChild(this.timeIcon)}},{key:"addTimeCountDown",value:function(e){null!==this.timeCounter&&(this.timeCounter.destroy(),this.timeCounter=null),this.timeCountDownThisWeekPractice=e,this.timeCounter=new Phaser.Text(game,this.positionRankingConfig.txt_timeCounter.x*window.GameConfig.RESIZE,this.positionRankingConfig.txt_timeCounter.y*window.GameConfig.RESIZE,this.positionRankingConfig.txt_timeCounter.text,this.positionRankingConfig.txt_timeCounter.configs),this.handleTimer(),this.timerCount||(game.time.events.remove(this.timerCount),this.timerCount=game.time.events.loop(1e3,this.handleTimer,this)),this.addChild(this.timeCounter)}},{key:"handleTimer",value:function(){this.timeCountDownThisWeekPractice--;var e=parseInt(this.timeCountDownThisWeekPractice/3600),t=parseInt(this.timeCountDownThisWeekPractice%3600/60),n=parseInt(this.timeCountDownThisWeekPractice%3600%60);this.timeCounter.setText("".concat(e,":").concat(t,":").concat(n))}},{key:"addTextLastWeek",value:function(){this.txtRank=new Phaser.Text(game,this.positionRankingConfig.txt_rank_last_week.x*window.GameConfig.RESIZE,this.positionRankingConfig.txt_rank_last_week.y*window.GameConfig.RESIZE,de.instance().getData("306"),this.positionRankingConfig.txt_rank_last_week.configs),this.txtRank.tint=9670812,this.width=this.txtRank.width,this.addChild(this.txtRank),this.lineUnder=new Bt(this.positionRankingConfig.header.line),this.lineUnder.kill(),this.addChild(this.lineUnder)}},{key:"setWidth",value:function(){}},{key:"setHeight",value:function(){}},{key:"changeEffectShow",value:function(){this.inputEnabled=!1,this.txtRank.tint=16777215,this.lineUnder.revive()}},{key:"changeEffectHide",value:function(){this.inputEnabled=!0,this.txtRank.tint=9670812,this.lineUnder.kill()}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}},{key:"destroy",value:function(){game.time.events.remove(this.timerCount),Px(Ox(t.prototype),"destroy",this).call(this)}},{key:"width",set:function(e){this._width=e},get:function(){return this._width}}])&&Cx(n.prototype,i),o&&Cx(n,o),t}();var Tx=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rank="N/A",this.user_id=dV.instance().dataMySeft.user_id,this.playlist_id=0,this.number_of_correct=0,this.user_entity={user_name:dV.instance().dataMySeft.user_name,avatar:dV.instance().dataMySeft.avatar}};function Ix(e){return(Ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ax(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Lx(e,t){return!t||"object"!==Ix(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dx(e,t,n){return(Dx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gx(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Gx(e){return(Gx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mx(e,t){return(Mx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nx=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Lx(this,Gx(t).call(this,game))).positionRankingConfig=JSON.parse(game.cache.getText("positionRankingConfig")),e.arrHelps=[de.instance().getData("307"),de.instance().getData("308")],e.event={back:new Phaser.Signal},e.typeButton=1,e.checkAddHelp=!1,e.arrThisWeek,e.arrLastWeek,e.tabUnder=null,e.popupHelp=null,e.tab4To10,e.listView,e.tabUser,e.rankingListThisWeek=[],e.rankingListLastWeek=[],e.idxThisWeek=0,e.idxLastWeek=0,e.idx=null,e.checkLoadMore=!1,e.checkFirstClickThisWeek=!1,e.checkFirstClickLastWeek=!1,e.addEventExtension(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mx(e,t)}(t,Z),n=t,(i=[{key:"setData",value:function(e,t,n){this.rankingListThisWeek=e,this.rankingListLastWeek=t,this.playlist=n,ht.instance().showLoading(),this.afterInit()}},{key:"sendGetRankingOption",value:function(){this.sendSoloModeRanking(this.playlist.id)}},{key:"sendSoloModeRanking",value:function(e){1==this.typeButton?this.sendThisWeekRanking(e):this.sendLastWeekRanking(e)}},{key:"sendLastWeekRanking",value:function(e){ht.instance().showLoading();var t=new SFS2X.SFSObject;t.putInt("playlist_id",e),t.putInt("from_idx",this.idxLastWeek+1),t.putInt("to_idx",this.idxLastWeek+20),dV.instance().sendData(ki.SOLO_MODE_TOP10_LAST_WEEK_REQUEST,t)}},{key:"sendThisWeekRanking",value:function(e){ht.instance().showLoading();var t=new SFS2X.SFSObject;t.putInt("playlist_id",e),t.putInt("from_idx",this.idxThisWeek+1),t.putInt("to_idx",this.idxThisWeek+20),dV.instance().sendData(ki.SOLO_MODE_TOP10_THIS_WEEK_REQUEST,t)}},{key:"afterInit",value:function(){this.addBG(),this.btnRankingLastWeek,this.btnRankingThisWeek,this.addParentSprite(),this.addButtonSwitch(),this.addHeaderRank(this.positionRankingConfig.header),He.instance().logEvent(He.Solo_mode_ranking),this.sendGetRankingOption(),be.instance().playSound(be.showranking)}},{key:"addBG",value:function(){var e=new Phaser.Button(game,0,0,"bg-playlist");e.input.useHandCursor=!1,this.addChild(e)}},{key:"addHeaderRank",value:function(e){var t=new Phaser.Sprite(game,e.tab.x*window.GameConfig.RESIZE,e.tab.y*window.GameConfig.RESIZE,e.tab.nameAtlas,e.tab.nameSprite),n=new Phaser.Sprite(game,e.back.x*window.GameConfig.RESIZE,e.back.y*window.GameConfig.RESIZE,e.back.nameAtlas,e.back.nameSprite);n.anchor.set(.5),n.inputEnabled=!0,n.events.onInputUp.add(this.onBack,this),t.addChild(n);var i=new Phaser.Sprite(game,e.line_doc.x*window.GameConfig.RESIZE,e.line_doc.y*window.GameConfig.RESIZE,e.line_doc.nameAtlas,e.line_doc.nameSprite);this.addChild(i);var o=game.add.text(e.name.x*window.GameConfig.RESIZE,e.name.y*window.GameConfig.RESIZE,this.playlist.name,e.name.configs);o.anchor.set(.5,0),t.addChild(o),this.addChild(t),this.btnHelp=new Phaser.Button(game,this.positionRankingConfig.help_btn.x,this.positionRankingConfig.help_btn.y,this.positionRankingConfig.help_btn.nameAtlas,this.onClickHelp,this,null,this.positionRankingConfig.help_btn.nameSprite),this.addChild(this.btnHelp)}},{key:"onClickHelp",value:function(){this.checkAddHelp=!this.checkAddHelp,1==this.checkAddHelp?this.addPopupHelp():this.removePopupHelp()}},{key:"addPopupHelp",value:function(){this.removePopupHelp(),this.popupHelp=new po(this.arrHelps[this.typeButton-1]),this.popupHelp.y=83*oe.instance().scale,this.popupHelp.x=game.width-this.popupHelp.width-71*oe.instance().scale,game.world.add(this.popupHelp)}},{key:"removePopupHelp",value:function(){null!==this.popupHelp&&(game.world.remove(this.popupHelp),this.popupHelp.destroy(),this.popupHelp=null)}},{key:"onBack",value:function(){be.instance().playSound(be.buttonclick),this.event.back.dispatch(),this.destroy(),this.rankingListThisWeek=[],this.rankingListLastWeek=[]}},{key:"addButtonSwitch",value:function(){this.btnRankingLastWeek=new xx(this.positionRankingConfig.button_ranking_last_week,"LAST_WEEK"),this.btnRankingLastWeek.addTextLastWeek(),this.btnRankingLastWeek.addInput(),this.btnRankingLastWeek.addEventInput(this.onClickLastWeek,this),this.btnRankingLastWeek.setWidth(),this.addChild(this.btnRankingLastWeek),this.btnRankingThisWeek=new xx(this.positionRankingConfig.button_ranking_this_week,"THIS_WEEK"),this.btnRankingThisWeek.addTextThisWeek(),this.btnRankingThisWeek.addInput(),this.btnRankingThisWeek.addEventInput(this.onClickThisWeek,this),this.btnRankingThisWeek.setWidth(),this.addChild(this.btnRankingThisWeek)}},{key:"onClickLastWeek",value:function(){if(this.rankingListLastWeek.length>0)ht.instance().showLoading(),this.typeButton=2,this.idxLastWeek=0,this.btnRankingLastWeek.changeEffectShow(),this.btnRankingThisWeek.changeEffectHide(),this.changeTabList();else{this.listView.removeAll(),this.listView.reset(),this.idx=0,this.countItem=0,ht.instance().showLoading(),this.typeButton=2,this.btnRankingLastWeek.changeEffectShow(),this.btnRankingThisWeek.changeEffectHide(),this.sendGetRankingOption();var e=this.posLastWeek;this.addTabUnder(e)}}},{key:"onClickThisWeek",value:function(){if(this.rankingListThisWeek.length>0)ht.instance().showLoading(),this.typeButton=1,this.idxThisWeek=0,this.btnRankingThisWeek.changeEffectShow(),this.btnRankingLastWeek.changeEffectHide(),this.changeTabList();else{this.listView.removeAll(),this.listView.reset(),this.idx=0,this.countItem=0,ht.instance().showLoading(),this.typeButton=1,this.btnRankingThisWeek.changeEffectShow(),this.btnRankingLastWeek.changeEffectHide(),this.sendGetRankingOption();var e=this.posThisWeek;this.addTabUnder(e)}}},{key:"changeTabList",value:function(){if(1===this.typeButton){this.listView.removeAll(),this.listView.reset(),this.ktBuild=!1,this.idx=0,this.countItem=0,this.buildItemPage();var e=this.posThisWeek;this.addTabUnder(e)}else{this.listView.removeAll(),this.listView.reset(),this.ktBuild=!1,this.idx=0,this.countItem=0,this.buildItemPage();e=this.posLastWeek;this.addTabUnder(e)}}},{key:"showList",value:function(){if(1===this.typeButton)if(null!==this.idx){this.buildItemPage();var e=this.posThisWeek;this.addTabUnder(e)}else{this.idx=0,this.countItem=0,this.buildItemPage();e=this.posThisWeek;this.addTabUnder(e)}else if(null!==this.idx){this.buildItemPage();e=this.posLastWeek;this.addTabUnder(e)}else{this.idx=0,this.countItem=0,this.buildItemPage();e=this.posLastWeek;this.addTabUnder(e)}}},{key:"addParentSprite",value:function(){var e=new Phaser.Group(game,this);e.x=0,e.y=206*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-311)*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0}),this.listView.events.changeIndex.add(this.changeIndex,this),this.listView.scroller.events.onInputUp.add(this.scrollerInputUp,this)}},{key:"scrollerInputUp",value:function(){!0===this.checkLoadMore&&(this.typeButton,ht.instance().showLoading(),this.sendGetRankingOption())}},{key:"changeIndex",value:function(){var e=this.listView.getIdx();1===this.typeButton?this.idxThisWeek>6&&(e>this.idxThisWeek?!1===this.checkLoadMore&&this.arrThisWeek.length<100&&(this.checkLoadMore=!0,this.idxThisWeek+=2):this.buildChangeIndex(e)):this.idxLastWeek>6&&(e>this.idxLastWeek?!1===this.checkLoadMore&&this.arrLastWeek.length<100&&(this.checkLoadMore=!0,this.idxLastWeek+=2):this.buildChangeIndex(e))}},{key:"addChildScrollMap",value:function(){this.showList()}},{key:"setRankingThisWeek",value:function(e,t,n){e&&(this.arrThisWeek=e),this.posThisWeek=n,this.addTimeCountDown(t),this.addChildScrollMap()}},{key:"setRankingLastWeek",value:function(e,t){e&&(this.arrLastWeek=e),this.posLastWeek=t,this.addChildScrollMap()}},{key:"addTimeCountDown",value:function(e){this.btnRankingThisWeek.addTimeCountDown(e)}},{key:"filterOwnerRanking",value:function(e,t){t(e.filter(function(e){return e.user_id==dV.instance().socket.mySelf.getVariable("user_id").value}))}},{key:"addTabUnder",value:function(e){null==e&&(e={number_of_correct:0,playlist_id:0,rank:"N/A",user_name:dV.instance().dataMySeft.user_name,avatar:dV.instance().socket.mySelf.getVariable("avatar").value,user_id:dV.instance().socket.mySelf.getVariable("user_id").value}),null!==this.tabUnder&&(this.removeChild(this.tabUnder),this.tabUnder.destroy(),this.tabUnder=null),this.tabUnder=new Sx(e),this.addChild(this.tabUnder)}},{key:"buildChangeIndex",value:function(e){this.countItem===e+1&&!1===this.ktBuild&&this.buildItemPage()}},{key:"buildItemPage",value:function(){var e=[];e=1==this.typeButton?this.arrThisWeek:this.arrLastWeek,this.ktBuild=!0,1===this.typeButton?this.idxThisWeek=e.length-2:this.idxLastWeek=e.length-2;for(var t=this.idx;t<e.length;t++){var n=void 0;if(n=t+1==3?new hx(e[t],t,!0):t+1<3?new hx(e[t],t,!1):t+1==e.length?new yx(e[t],t,!0):new yx(e[t],t,!1),this.listView.add(n),this.idx++,this.countItem++,this.countItem%10==0&&this.idx<e.length){this.ktBuild=!1;break}this.idx===e.length&&(this.ktBuild=!1)}game.time.events.add(1500,this.hideLoading,this)}},{key:"addEventExtension",value:function(){Qe.instance().event.backButton.add(this.onBack,this),dV.instance().events.onExtensionResponse.add(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){Qe.instance().event.backButton.remove(this.onBack,this),dV.instance().events.onExtensionResponse.remove(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){var t=this;e.cmd==ki.SOLO_MODE_TOP10_THIS_WEEK_RESPONSE&&("OK"==e.params.getUtfString("status")?(1===this.idxThisWeek&&(this.rankingListThisWeek=[]),this.posThisWeek=new Tx,Gl.handleRankingList(e.params,this.rankingListThisWeek,this.posThisWeek,function(){Gl.handleTime(e.params,function(e){t.rankingThisWeek(e)})})):console.warn(e.params.getUtfString("message"))),e.cmd==ki.SOLO_MODE_TOP10_LAST_WEEK_RESPONSE&&("OK"==e.params.getUtfString("status")?(1===this.idxLastWeek&&(this.rankingListLastWeek=[]),this.posLastWeek=new Tx,Gl.handleRankingList(e.params,this.rankingListLastWeek,this.posLastWeek,function(){t.rankingLastWeek()})):console.warn(e.params.getUtfString("message")))}},{key:"hideLoading",value:function(){this.checkLoadMore=!1,ht.instance().hideLoading()}},{key:"rankingThisWeek",value:function(e){this.setRankingThisWeek(this.rankingListThisWeek,e,this.posThisWeek)}},{key:"rankingLastWeek",value:function(){this.setRankingLastWeek(this.rankingListLastWeek,this.posLastWeek)}},{key:"destroy",value:function(){for(this.removeEventExtension(),this.removePopupHelp();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),Dx(Gx(t.prototype),"destroy",this).call(this)}}])&&Ax(n.prototype,i),o&&Ax(n,o),t}();function Bx(e){return(Bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ux(e,t){return!t||"object"!==Bx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fx(e){return(Fx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zx(e,t){return(Zx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Hx=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ux(this,Fx(t).call(this,game,640*window.GameConfig.RESIZE,0,"bg-playlist"))).positionPracticeScreenConfig=JSON.parse(game.cache.getText("positionPracticeScreenConfig")),e.event={pickAlbum:new Phaser.Signal,refreshPickAlbum:new Phaser.Signal},e.signalInputX=new Phaser.Signal,e.headerTab,e.scrollTab,e.playlists,e.state=null,e.isChoosedAlbum=!1,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zx(e,t)}(t,Wp),n=t,(i=[{key:"afterInit",value:function(){this.onClickRankAlbum=!1,this.addEventExtension(),this.addTweenScreen(),He.instance().logEvent(He.Solo_mode)}},{key:"addTweenScreen",value:function(){game.add.tween(this).to({x:0},200,"Linear",!1).start()}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Button(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,function(){},this,null,e.tab_chonplaylist.nameSprite),this.addChild(this.headerTab),this.btnBack,this.txtGem,this.txtHeart,this.tabGemHeader,this.tabHeartHeader,this.addButtonBack(e.btn_back),this.addTabGemHeader(e),this.addTabHeartHeader(e),this.addTxtPractice(this.positionPracticeScreenConfig.header.txt_practice)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerTab.addChild(this.btnBack)}},{key:"onBack",value:function(){var e=this;if(0==this.onClickRankAlbum){be.instance().playSound(be.buttonclick),this.signalInputX.dispatch();var t=game.add.tween(this).to({x:1080*window.GameConfig.RESIZE},200,"Linear",!1);t.start(),t.onComplete.add(function(){e.destroy()},this)}}},{key:"addTxtPractice",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("312"),e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addTabGemHeader",value:function(e){this.tabGemHeader=new Phaser.Sprite(game,e.tabGem.x*window.GameConfig.RESIZE,e.tabGem.y*window.GameConfig.RESIZE,e.tabGem.nameAtlas,e.tabGem.nameSprite);var t=this.addGem(this.positionPracticeScreenConfig.header.gem),n=this.addTxtGem(this.positionPracticeScreenConfig.header.txtGem),i=t.width+n.width;n.x=(this.tabGemHeader.width-i)/2-5*window.GameConfig.RESIZE,t.x=(this.tabGemHeader.width-i)/2+n.width+5*window.GameConfig.RESIZE,this.tabGemHeader.addChild(t),this.tabGemHeader.addChild(n),this.headerTab.addChild(this.tabGemHeader)}},{key:"addTabHeartHeader",value:function(e){this.tabHeartHeader=new Phaser.Sprite(game,e.tabHeart.x*window.GameConfig.RESIZE,e.tabHeart.y*window.GameConfig.RESIZE,e.tabHeart.nameAtlas,e.tabHeart.nameSprite);var t=this.addHeart(this.positionPracticeScreenConfig.header.heart);this.txtHeart=this.addTxtHeart(this.positionPracticeScreenConfig.header.txtHeart);var n=t.width+this.txtHeart.width;this.txtHeart.x=(this.tabGemHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabGemHeader.width-n)/2+this.txtHeart.width+5*window.GameConfig.RESIZE,this.tabHeartHeader.addChild(t),this.tabHeartHeader.addChild(this.txtHeart),this.headerTab.addChild(this.tabHeartHeader)}},{key:"addGem",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtGem",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,e.configs)}},{key:"addHeart",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtHeart",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("heart").value,e.configs)}},{key:"addPlaylists",value:function(e){this.playlists=e.sort(this.sortPlaylist),this.playlists=this.playlists.sort(this.sortUpdatePlaylist);var t=0,n=0;this.groupPlaylists=new QR(0,200*window.GameConfig.RESIZE);var i=new Phaser.Group(game,this);i.x=0,i.y=230*window.GameConfig.RESIZE,this.addChild(i);var o=new Phaser.Rectangle(35*window.GameConfig.RESIZE,0,570*window.GameConfig.RESIZE,(game.height-206)*window.GameConfig.RESIZE);this.listView=new Ia(game,i,o,{direction:"y",overflow:100,padding:60,searchForClicks:!0});for(var a=1;a<this.playlists.length+1;a++){var s=new JR(t,n,this.playlists[a-1],a);s.afterCreate(),s.loadThumb(),s.signalInput.add(this.onChoosedAlbum,this),s.signalBuyPlaylist.add(this.buyPlaylistSoloMode,this),s.signalGetRanking.add(this.playlistGetRanking,this),this.groupPlaylists.add(s),a%3==0&&a>0?(t=0,n+=window.GameConfig.CONFIGS_POPUP_PRACTICE.y*window.GameConfig.RESIZE,this.addLine(this.groupPlaylists,this.positionPracticeScreenConfig.practice_line_scroll,n)):t+=window.GameConfig.CONFIGS_POPUP_PRACTICE.x*window.GameConfig.RESIZE}this.playlists.length%3==0?this.groupPlaylists.height+=this.playlists.length/3*(window.GameConfig.CONFIGS_POPUP_PRACTICE.y*window.GameConfig.RESIZE):this.groupPlaylists.height+=(this.playlists.length/3+1)*(window.GameConfig.CONFIGS_POPUP_PRACTICE.y*window.GameConfig.RESIZE),this.listView.add(this.groupPlaylists),this.addHeaderTab(this.positionPracticeScreenConfig.header)}},{key:"onChoosedAlbum",value:function(e){!1===this.isChoosedAlbum&&(this.isChoosedAlbum=!0,He.instance().logEvent(He.Solo_mode_quiz_play_button),this.event.pickAlbum.dispatch(e))}},{key:"buyPlaylistSoloMode",value:function(e){this.addNewBoughtPlaylist(e,oe.instance().soloModePlaylists),this.event.refreshPickAlbum.dispatch()}},{key:"addNewBoughtPlaylist",value:function(e,t){for(var n=0;n<t.length;n++)t[n].id===e.id&&(t[n].is_owner=1,t[n].user_playlist_mapping={active:1,created:(new Date).getTime(),current_level_score:0,exp_score:0,id:0,level:0,next_level_score:50,playlist_id:e.id,updated:(new Date).getTime(),user_id:dV.instance().dataMySeft.user_id})}},{key:"playlistGetRanking",value:function(e){this.RankingScreen=new Nx,this.RankingScreen.setData([],[],e),this.RankingScreen.event.back.add(this.onBackRanking,this),this.addChild(this.RankingScreen),this.onClickRankAlbum=!0}},{key:"onBackRanking",value:function(){this.onClickRankAlbum=!1}},{key:"sortPlaylist",value:function(e,t){return e.is_owner>t.is_owner?-1:e.is_owner<t.is_owner?1:0}},{key:"sortUpdatePlaylist",value:function(e,t){return 1!=e.is_owner||1!=t.is_owner?0:e.user_playlist_mapping?e.user_playlist_mapping.updated>t.user_playlist_mapping.updated?-1:e.user_playlist_mapping.updated<t.user_playlist_mapping.updated?1:0:void 0}},{key:"addLine",value:function(e,t,n){var i=new Phaser.Sprite(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE+n,t.nameAtlas,t.nameSprite);e.addChild(i)}},{key:"addEventInputX",value:function(e,t){this.signalInputX.add(e,t)}},{key:"removeEventInputX",value:function(e,t){this.signalInputX.remove(e,t)}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.add(this.onBack,this),dV.instance().events.onUserVarsUpdate.add(this.onUpdateUserVars,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),dV.instance().events.onUserVarsUpdate.remove(this.onUpdateUserVars,this),Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"onUpdateUserVars",value:function(){dV.instance().dataMySeft.heart!==parseInt(this.txtHeart.text)&&(this.txtHeart.text=dV.instance().dataMySeft.heart)}},{key:"onExtensionResponse",value:function(e){}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&jx(n.prototype,i),o&&jx(n,o),t}();function Vx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Qx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadDataComplete=new Phaser.Signal,this.loadDataFail=new Phaser.Signal}var t,n,i;return t=e,(n=[{key:"beginLoadAudio",value:function(e){rl.instance().loadSound(e.url),rl.instance().event.loadComplete.add(this.loadComplete,this),rl.instance().event.loadFail.add(this.loadFail,this)}},{key:"loadStart",value:function(){LogConsole.log("loadStart")}},{key:"loadComplete",value:function(){LogConsole.log("load TT"),this.loadDataComplete.dispatch()}},{key:"loadFail",value:function(){this.loadDataFail.dispatch()}},{key:"addEventLoadComplete",value:function(e,t){this.loadDataComplete.add(e,t)}},{key:"removeEventLoadComplete",value:function(e,t){this.loadDataComplete.remove(e,t)}},{key:"remove",value:function(){rl.instance().event.loadComplete.remove(this.loadComplete,this)}}])&&Vx(t.prototype,n),i&&Vx(t,i),e}();function Wx(e){return(Wx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kx(e){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zx(e,t){return(zx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Xx=function(e){function t(e,n,i){var o,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(o=!(s=Kx(t).call(this,game))||"object"!==Wx(s)&&"function"!=typeof s?Yx(a):s).posX=e,o.positionPracticeScreenConfig=JSON.parse(game.cache.getText("positionPracticeScreenConfig")),o.sprite=new Phaser.Button(game,e+1080*window.GameConfig.RESIZE,n,o.positionPracticeScreenConfig.answer_tab.nameAtlas,o.onClickAnswer,Yx(Yx(o)),null,o.positionPracticeScreenConfig.answer_tab.nameSprite),o.sprite.anchor=new Phaser.Point(.5,.5),o.configs=i,o.addChild(o.sprite),o.event={chooseAnswer:new Phaser.Signal},o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zx(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){var e=this;this.answerText=new Phaser.Text(game,0,0,"".concat(this.configs.answer),{font:"GilroyMedium",fill:"#000000",align:"center",fontSize:28,boundsAlignH:"center",boundsAlignV:"middle",wordWrap:!0,wordWrapWidth:500}),this.answerText.anchor.set(.5),this.sprite.addChild(this.answerText),this.answer=this.configs.value,setTimeout(function(){game.add.tween(e.sprite).to({x:e.posX},450,Phaser.Easing.Back.Out,!1).start()},70*(this.configs.value-1))}},{key:"onClickAnswer",value:function(){this.event.chooseAnswer.dispatch(this.configs)}},{key:"displayScreenWhenAnswerRight",value:function(){this.answerText.addColor("#01c66a",0)}},{key:"displayScreenWhenAnswerWrong",value:function(){this.answerText.addColor("#ff0000",0)}},{key:"displayScreenWhenAnswerNotChoosed",value:function(){this.sprite.alpha=.5}}])&&qx(n.prototype,i),o&&qx(n,o),t}();function Jx(e){return(Jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){eT(e,t,n[t])})}return e}function eT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nT(e,t){return!t||"object"!==Jx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iT(e,t,n){return(iT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oT(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function oT(e){return(oT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aT(e,t){return(aT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sT=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=nT(this,oT(t).call(this,game))).positionPracticeScreenConfig=JSON.parse(game.cache.getText("positionPracticeScreenConfig")),e.positionPracticePopupConfig=JSON.parse(game.cache.getText("positionPracticePopupConfig")),e.event={playAgain:new Phaser.Signal,backToHome:new Phaser.Signal},e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aT(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.countQuiz=0,this.addEventExtension(),this.bg=new Phaser.Sprite(game,0,0,"bg_create_room"),this.addChild(this.bg),this.loadAudioSource=new Qx,this.loadAudioSource.loadDataComplete.add(this.onLoadAudioComplete,this),this.loadAudioSource.loadDataFail.add(this.onLoadAudioFail,this),this.definedScreenPracticeModeAndLogicValue()}},{key:"definedScreenPracticeModeAndLogicValue",value:function(){this.choosed=!1,this.dotsGroup=null,this.timeout=!1,this.rankingListThisWeek=[],this.rankingListLastWeek=[],this.question,this.groupAnswer=null,this.RankingScreen=null,this.gotRewardStatus=!1,this.answerGroup=new Phaser.Group(game),this.addChild(this.answerGroup),this.addAvaAndMaskAva(),this.addNameFB(),this.addMapPracticeAndDotAnswer(),this.addFlag(),this.addTabGemAndTabHeart(),this.addLoadingSong(),He.instance().logEvent(He.Solo_mode_quiz_play)}},{key:"addLoadingSong",value:function(){this.stopAudio();var e={key:"songChoiced",url:this.questions[this.countQuiz].songEntity.fileUrl};this.question=this.questions[this.countQuiz],this.loadAudioSource.beginLoadAudio(e),this.loadingAnim=new ot,this.loadingAnim.moveTxtLoading(),this.addChild(this.loadingAnim)}},{key:"onLoadAudioComplete",value:function(){this.loadingAnim.destroy(),this.removeChild(this.loadingAnim),rl.instance().playsound(this.questions[this.countQuiz].songEntity.fileUrl),this.addAnswerGroup()}},{key:"onLoadAudioFail",value:function(){this.loadingAnim.destroy(),this.removeChild(this.loadingAnim),rl.instance().playsound(this.questions[this.countQuiz].songEntity.fileUrl),this.addAnswerGroup()}},{key:"stopAudio",value:function(){rl.instance().removeSound()}},{key:"addAvaAndMaskAva",value:function(){var e=new Phaser.Graphics(game,0,0);e.beginFill(16777215),e.drawCircle(this.positionPracticeScreenConfig.avaPractice.x*window.GameConfig.RESIZE,this.positionPracticeScreenConfig.avaPractice.y*window.GameConfig.RESIZE,147*window.GameConfig.RESIZE),e.anchor.set(.5),this.addChild(e);var t=new jr(this.positionPracticeScreenConfig.avaPractice.x*window.GameConfig.RESIZE,this.positionPracticeScreenConfig.avaPractice.y*window.GameConfig.RESIZE,"ava-default","ava_fb",0);if(t.sprite.anchor.set(.5),t.sprite.scale.set(window.GameConfig.SCALE_AVA_USER*window.GameConfig.RESIZE),t.sprite.mask=e,this.addChild(t.sprite),!0===dV.instance().dataMySeft.vip){var n=new Phaser.Sprite(game,this.positionPracticeScreenConfig.avaPractice.x*window.GameConfig.RESIZE,(this.positionPracticeScreenConfig.avaPractice.y+2)*window.GameConfig.RESIZE,"vipSource","Ava_Vip");n.anchor.set(.5),this.addChild(n)}this.trueOrFalse=new bd,this.trueOrFalse.setSize(315*window.GameConfig.RESIZE,315*window.GameConfig.RESIZE),this.trueOrFalse.x=-155*window.GameConfig.RESIZE+t.sprite.x,this.trueOrFalse.y=-155*window.GameConfig.RESIZE+t.sprite.y,this.addChild(this.trueOrFalse)}},{key:"setTrueAva",value:function(){this.trueOrFalse.setTrueAnswer()}},{key:"setFalseAva",value:function(){this.trueOrFalse.setFailtAnswer()}},{key:"addTabGemAndTabHeart",value:function(){this.tabGem=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabGemMain.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGemMain.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabGemMain.nameAtlas,this.positionPracticePopupConfig.tabGemMain.nameSprite),this.addGemDetail(),this.addChild(this.tabGem),this.tabHeart=new Phaser.Sprite(game,this.positionPracticePopupConfig.tabHeartMain.x*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeartMain.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.tabHeartMain.nameAtlas,this.positionPracticePopupConfig.tabHeartMain.nameSprite),this.addHeartDetail(),this.addChild(this.tabHeart)}},{key:"addGemDetail",value:function(){var e;this.txtGem,e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.gem_rewardMain.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.gem_rewardMain.nameAtlas,this.positionPracticePopupConfig.gem_rewardMain.nameSprite),this.txtGem=new Phaser.Text(game,0,this.positionPracticePopupConfig.gem_reward_txtMain.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,this.positionPracticePopupConfig.gem_reward_txtMain.configs);var t=e.width+this.txtGem.width;this.txtGem.x=(this.tabGem.width-t)/2-5*window.GameConfig.RESIZE,e.x=(this.tabGem.width-t)/2+this.txtGem.width+5*window.GameConfig.RESIZE,this.tabGem.addChild(e),this.tabGem.addChild(this.txtGem)}},{key:"addHeartDetail",value:function(){var e,t;e=new Phaser.Sprite(game,0,this.positionPracticePopupConfig.heart_rewardMain.y*window.GameConfig.RESIZE,this.positionPracticePopupConfig.heart_rewardMain.nameAtlas,this.positionPracticePopupConfig.heart_rewardMain.nameSprite),t=new Phaser.Text(game,0,this.positionPracticePopupConfig.heart_reward_txtMain.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("heart").value,this.positionPracticePopupConfig.heart_reward_txtMain.configs);var n=e.width+t.width;t.x=(this.tabHeart.width-n)/2-5*window.GameConfig.RESIZE,e.x=(this.tabHeart.width-n)/2+t.width+5*window.GameConfig.RESIZE,this.tabHeart.addChild(e),this.tabHeart.addChild(t)}},{key:"addMapPracticeAndDotAnswer",value:function(){var e=new Phaser.Sprite(game,game.world.centerX,419*window.GameConfig.RESIZE,"practiceMenuSprites","Map");e.anchor.set(.5),this.addChild(e),this.addDotsGroup();for(var t=0;t<window.MQ.posAchievementPractice.length;t++)this.CreateAnswerAndDiamondText(window.MQ.posAchievementPractice[t].answerPosX*window.GameConfig.RESIZE,window.MQ.posAchievementPractice[t].answerPosY*window.GameConfig.RESIZE,window.MQ.posAchievementPractice[t].diamondPosX*window.GameConfig.RESIZE,window.MQ.posAchievementPractice[t].diamondPosY*window.GameConfig.RESIZE,this.rewards[t].number_question,this.rewards[t].reward,this.rewards[t].reward_type,window.MQ.posCirclePractice[t].x*window.GameConfig.RESIZE,window.MQ.posCirclePractice[t].y*window.GameConfig.RESIZE)}},{key:"addNameFB",value:function(){var e=new Phaser.Text(game,this.positionPracticeScreenConfig.nameFBPractice.x*window.GameConfig.RESIZE,this.positionPracticeScreenConfig.nameFBPractice.y*window.GameConfig.RESIZE,"You",this.positionPracticeScreenConfig.nameFBPractice.configs);e.anchor.set(.5),this.addChild(e)}},{key:"CreateAnswerAndDiamondText",value:function(e,t,n,i,o,a,s,r,l){if("DIAMOND"==s){var c=new Phaser.Sprite(game,n+10,i,this.positionPracticeScreenConfig.diamond.nameAtlas,this.positionPracticeScreenConfig.diamond.nameSprite);c.anchor.set(0,.5),c.scale.set(.7),this.dotsGroup.addChild(c)}else if("TICKET"==s){var h=new Phaser.Sprite(game,n+10,i,this.positionPracticeScreenConfig.diamond.nameAtlas,"Ticket");h.anchor.set(0,.5),h.scale.set(.7),this.dotsGroup.addChild(h)}else if("SUPPORT_ITEM"==s){var u=new Phaser.Sprite(game,n+10,i,this.positionPracticeScreenConfig.diamond.nameAtlas,"Mic");u.anchor.set(0,.5),u.scale.set(.7),this.dotsGroup.addChild(u)}var d=new Phaser.Text(game,n,i,"".concat(a),{font:"Gilroy",fill:"white",fontSize:17.5});d.anchor.set(1,.5),this.dotsGroup.addChild(d);var f=new Phaser.Text(game,e,t,"".concat(o),{font:"Gilroy",fill:"white",fontSize:17.5});if(f.anchor.set(.5),this.dotsGroup.addChild(f),this.archived.achieved>=o)if(f.alpha=1,this.countQuiz==o){var p=new Phaser.Sprite(game,r,l,"practiceMenuSprites","Circle_Achieved");p.anchor.set(.5),this.dotsGroup.addChild(p)}else if(this.countQuiz>o){var g=new Phaser.Sprite(game,r,l,"practiceMenuSprites","Circle_Achieved");g.anchor.set(.5),this.dotsGroup.addChild(g)}else{var y=new Phaser.Sprite(game,r,l,"practiceMenuSprites","Circle_Active");y.anchor.set(.5),this.dotsGroup.addChild(y)}else f.alpha=.5}},{key:"createDotAnswered",value:function(){var e=this,t=window.MQ.posDotPractice.find(function(t){return t.num==e.countQuiz});if(void 0!==t){var n=new Phaser.Sprite(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,"practiceMenuSprites","Circle_Active_Small");if(n.anchor.set(.5),this.dotsGroup.addChild(n),t.num>2&&t.num<8||t.num>12&&t.num<25||t.num>33&&t.num<56)(i=new Phaser.Text(game,t.x*window.GameConfig.RESIZE,(t.y+12)*window.GameConfig.RESIZE,"".concat(t.num),{font:"Gilroy",fill:"white",fontSize:18})).anchor.set(.5,0),this.dotsGroup.addChild(i);else if(t.num>8&&t.num<12){(i=new Phaser.Text(game,(t.x+12)*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,"".concat(t.num),{font:"Gilroy",fill:"white",fontSize:18})).anchor.set(0,.5),this.dotsGroup.addChild(i)}else if(t.num>25&&t.num<33){var i;(i=new Phaser.Text(game,(t.x-12)*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,"".concat(t.num),{font:"Gilroy",fill:"white",fontSize:18})).anchor.set(1,.5),this.dotsGroup.addChild(i)}}this.addFlag()}},{key:"addFlag",value:function(){var e=this,t=window.MQ.posDotPractice.find(function(t){return t.num==e.highest_number_of_correct});if(void 0!==t&&this.countQuiz<t.num)if(t.x!==window.MQ.posDotPractice[0].x){if((a=new Phaser.Sprite(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,"practiceMenuSprites","Flag_small")).anchor.set(.5),this.dotsGroup.addChild(a),t.num>2&&t.num<8||t.num>12&&t.num<25||t.num>33&&t.num<56){a.y-=3;var n=new Phaser.Text(game,(t.x-3)*window.GameConfig.RESIZE,(t.y+15)*window.GameConfig.RESIZE,"".concat(t.num),{font:"Gilroy",fill:"white",fontSize:15});n.anchor.set(.5,0),this.dotsGroup.addChild(n)}else if(t.num>8&&t.num<12){a.x+=5;var i=new Phaser.Text(game,(t.x+15)*window.GameConfig.RESIZE,(t.y+5)*window.GameConfig.RESIZE,"".concat(t.num),{font:"Gilroy",fill:"white",fontSize:15});i.anchor.set(0,.5),this.dotsGroup.addChild(i)}else if(t.num>25&&t.num<33){a.x+=5;var o=new Phaser.Text(game,(t.x-15)*window.GameConfig.RESIZE,(t.y+7)*window.GameConfig.RESIZE,"".concat(t.num),{font:"Gilroy",fill:"white",fontSize:15});o.anchor.set(1,.5),this.dotsGroup.addChild(o)}}else{var a,s=window.MQ.posCirclePractice.find(function(t){return t.num==e.highest_number_of_correct});if(void 0!==s)(a=new Phaser.Sprite(game,s.x*window.GameConfig.RESIZE,(s.y-5)*window.GameConfig.RESIZE,"practiceMenuSprites","Flag")).anchor.set(.5),this.dotsGroup.addChild(a)}}},{key:"addDotsGroup",value:function(){this.removeDotsGroup(),this.dotsGroup=new Phaser.Group(game),this.addChild(this.dotsGroup)}},{key:"removeDotsGroup",value:function(){null!==this.dotsGroup&&(this.removeChild(this.dotsGroup),this.dotsGroup.destroy(),this.dotsGroup=null)}},{key:"addAnswerGroup",value:function(){this.removeAnswerGroup(),this.groupAnswer=new Phaser.Group(game),this.addChild(this.groupAnswer),this.createFourAnswerTab(),this.addSpriteTime(),He.instance().logEvent(He.pro_quiz_start_solomode)}},{key:"removeAnswerGroup",value:function(){null!==this.groupAnswer&&(this.removeChild(this.groupAnswer),this.groupAnswer.destroy(),this.groupAnswer=null)}},{key:"addSpriteTime",value:function(){var e=this;this.spriteTime=new Phaser.Sprite(game,0,(game.height-531)*window.GameConfig.RESIZE,"otherSprites","tween-time"),this.spriteTime.anchor.set(0,.5),this.addChild(this.spriteTime),this.tweenSpriteTime=game.add.tween(this.spriteTime.scale).to({x:70,y:1},1e4,"Linear"),this.tweenSpriteTime.start(),this.tweenSpriteTime.onComplete.add(function(){e.timeout=!0,e.answerA.sprite.inputEnabled=!1,e.answerB.sprite.inputEnabled=!1,e.answerC.sprite.inputEnabled=!1,e.answerD.sprite.inputEnabled=!1,e.choosed||setTimeout(function(){e.createTimeoutLostPopup()},1500)})}},{key:"createFourAnswerTab",value:function(){LogConsole.log(this.question);for(var e=0;e<4;e++)0==e&&(this.answerA=new Xx(game.width/2,(game.height-459+122*e)*window.GameConfig.RESIZE,{answer:this.question.answers[e],value:e+1}),this.answerA.event.chooseAnswer.add(this.onChoosedAnswered,this),this.groupAnswer.addChild(this.answerA)),1==e&&(this.answerB=new Xx(game.width/2,(game.height-459+122*e)*window.GameConfig.RESIZE,{answer:this.question.answers[e],value:e+1}),this.answerB.event.chooseAnswer.add(this.onChoosedAnswered,this),this.groupAnswer.addChild(this.answerB)),2==e&&(this.answerC=new Xx(game.width/2,(game.height-459+122*e)*window.GameConfig.RESIZE,{answer:this.question.answers[e],value:e+1}),this.answerC.event.chooseAnswer.add(this.onChoosedAnswered,this),this.groupAnswer.addChild(this.answerC)),3==e&&(this.answerD=new Xx(game.width/2,(game.height-459+122*e)*window.GameConfig.RESIZE,{answer:this.question.answers[e],value:e+1}),this.answerD.event.chooseAnswer.add(this.onChoosedAnswered,this),this.groupAnswer.addChild(this.answerD))}},{key:"onChoosedAnswered",value:function(e){this.choosed=!0,this.answerA.sprite.inputEnabled=!1,this.answerB.sprite.inputEnabled=!1,this.answerC.sprite.inputEnabled=!1,this.answerD.sprite.inputEnabled=!1,this.answered=e.value;for(var t=0;t<4;t++)0==t&&this.setTrueFalseTabAnswer(this.answerA,t+1),1==t&&this.setTrueFalseTabAnswer(this.answerB,t+1),2==t&&this.setTrueFalseTabAnswer(this.answerC,t+1),3==t&&this.setTrueFalseTabAnswer(this.answerD,t+1);e.value==this.questions[this.countQuiz].correctAnswer?(this.setTrueAva(),be.instance().playSound(be.streakanswer),this.answerResult=!0,this.userChoosedCorrectAnswer()):(this.setFalseAva(),this.answerResult=!1,this.userChoosedWrongAnswer())}},{key:"setTrueFalseTabAnswer",value:function(e,t){t==this.answered?t==this.questions[this.countQuiz].correctAnswer?e.displayScreenWhenAnswerRight():e.displayScreenWhenAnswerWrong():t==this.questions[this.countQuiz].correctAnswer?e.displayScreenWhenAnswerRight():e.displayScreenWhenAnswerNotChoosed()}},{key:"createTimeoutLostPopup",value:function(){if(!this.choosed){var e=new ri(this.countQuiz);e.addPopup(),e.signalBtn.add(this.losePopupEvent,this),this.addChild(e),e.makeTweenPopup(),this.sendSoloModeFinishRequest(this.countQuiz,this.playlist.id),Ei.instance().gameoverSoloMode(),Ei.instance().showInterstitialGameOverSoloMode()}}},{key:"userChoosedWrongAnswer",value:function(){var e=this;this.stopAudio(),setTimeout(function(){e.createLosePopup(),e.countQuiz=0},1500),this.sendSoloModeFinishRequest(this.countQuiz,this.playlist.id)}},{key:"createLosePopup",value:function(){var e=new pi(this.countQuiz);e.addPopup(),e.signalBtn.add(this.losePopupEvent,this),this.addChild(e),e.makeTweenPopup(),Ei.instance().gameoverSoloMode(),Ei.instance().showInterstitialGameOverSoloMode()}},{key:"losePopupEvent",value:function(e){"RANK"==e.type?(this.stopAudio(),this.getRanking()):"HOME"==e.type?(this.stopAudio(),this.event.backToHome.dispatch()):"REPLAY"==e.type&&(this.stopAudio(),this.event.playAgain.dispatch(this.playlist))}},{key:"userChoosedCorrectAnswer",value:function(){var e=this;(this.countQuiz+=1,this.countQuiz>this.archived.achieved)?void 0!==this.rewards.filter(function(t){return t.number_question==e.countQuiz})[0]?this.sendGetNextQuestion():this.countQuiz==this.questions.length?(this.sendSoloModeFinishRequest(this.countQuiz,this.playlist.id),setTimeout(function(){var t=new to(e.questions.length,0,{name:e.playlist.name,id:e.playlist.id});t.addPopup(),t.makeTweenPopup(),t.event.goHome.add(e.doneSoloModeGoHome,e),t.event.getRank.add(e.doneSoloModeGetRank,e),e.addChild(t)},1e3)):setTimeout(function(){e.resetQuestion()},1e3):void 0!==this.rewards.filter(function(t){return t.number_question==e.countQuiz})[0]?this.sendGetNextQuestion():this.countQuiz==this.questions.length?(this.sendSoloModeFinishRequest(this.countQuiz,this.playlist.id),setTimeout(function(){var t=new to(e.questions.length,0,{name:e.playlist.name,id:e.playlist.id});t.addPopup(),t.makeTweenPopup(),t.event.goHome.add(e.doneSoloModeGoHome,e),t.event.getRank.add(e.doneSoloModeGetRank,e),e.addChild(t)},1e3)):setTimeout(function(){e.resetQuestion()},1e3)}},{key:"doneSoloModeClaim",value:function(e){this.is_watched_ads=e,this.sendSoloModeGotReward(this.countQuiz,this.playlist.id,e)}},{key:"createRewardPopup",value:function(e,t,n){var i=new Gi(t,e,n);i.addPopup(),this.addChild(i),i.makeTweenPopup(),i.signalClaim.addOnce(this.onReceivedReward,this),i.signalNextQuestion.addOnce(this.onNextQuestion,this),i.signalStop.addOnce(this.onSignalStop,this)}},{key:"onSignalStop",value:function(){this.stopAudio()}},{key:"createPopupNotReward",value:function(e){this.resetQuestion()}},{key:"sendGetNextQuestion",value:function(){for(var e=this,t=this.rewards.findIndex(function(t){return t.number_question==e.countQuiz}),n=new SFS2X.SFSArray,i=0;i<this.questions.length;i++)n.addLong(this.questions[i].songEntity.id);if(this.rewards[t].number_question<56){var o=new SFS2X.SFSObject;o.putInt("playlist_id",this.playlist.id),o.putInt("next_question_number",this.rewards[t+1].number_question),o.putSFSArray("song_ids",n),dV.instance().sendData(ki.SOLO_MODE_NEXT_QUESTION_REQUEST,o)}else this.checkWhatReward()}},{key:"checkWhatReward",value:function(){var e=this,t=this.rewards.filter(function(t){return t.number_question==e.countQuiz});this.countQuiz>this.archived.achieved?(this.archived.achieved=this.countQuiz,this.gotRewardStatus=!0,this.countQuiz<this.questions.length?56!==t[0].number_question&&setTimeout(function(){e.createRewardPopup(t[0].reward,t[0].number_question,t[0].reward_type)},600):(this.sendSoloModeFinishRequest(this.countQuiz,this.playlist.id),setTimeout(function(){var t=new to(e.questions.length,e.rewards[e.rewards.length-1].reward,{name:e.playlist.name,id:e.playlist.id});t.addPopup(),t.makeTweenPopup(),t.event.goHome.add(e.doneSoloModeGoHome,e),t.event.getRank.add(e.doneSoloModeGetRank,e),t.event.claim.add(e.doneSoloModeClaim,e),t.event.stopSong.add(e.onSignalStop,e),e.addChild(t)},1e3))):this.countQuiz<this.questions.length?setTimeout(function(){e.createPopupNotReward(t[0].number_question)},600):(this.sendSoloModeFinishRequest(this.countQuiz,this.playlist.id),setTimeout(function(){var t=new to(e.questions.length,0,{name:e.playlist.name,id:e.playlist.id});t.addPopup(),t.makeTweenPopup(),t.event.goHome.add(e.doneSoloModeGoHome,e),t.event.getRank.add(e.doneSoloModeGetRank,e),e.addChild(t)},1e3))}},{key:"onNextQuestion",value:function(){this.resetQuestion()}},{key:"onReceivedReward",value:function(e){this.is_watched_ads=e,this.sendSoloModeGotReward(this.countQuiz,this.playlist.id,e)}},{key:"sendSoloModeGotReward",value:function(e,t,n){this.archived.achieved=e;var i=new SFS2X.SFSObject;i.putInt("playlist_id",t),i.putInt("new_achieved",e),i.putInt("is_watched_ads",n),dV.instance().sendData(ki.SOLO_MODE_GOT_REWARD_REQUEST,i)}},{key:"getRanking",value:function(){this.RankingScreen=new Nx,this.RankingScreen.setData([],[],this.playlist),this.addChild(this.RankingScreen)}},{key:"setData",value:function(e,t,n,i,o){var a=$x({},e),s=[],r=$x({},t),l=$x({},i),c=$x({},n),h=[],u=$x({},o);for(var d in a)s.push(a[d]);for(var f in this.questions=s,this.archived=r,c)h.push(c[f]);this.rewards=h,this.playlist=l,this.highest_number_of_correct=u,console.log("dsfsdf gfd sfg"),console.log(this.questions),console.log(this.archived),console.log(this.rewards),console.log(this.playlist),console.log(this.highest_number_of_correct)}},{key:"resetQuestion",value:function(){if(this.countQuiz<this.questions.length){this.choosed=!1,this.gotRewardStatus=!1,this.addDotsGroup();for(var e=0;e<window.MQ.posAchievementPractice.length;e++)this.CreateAnswerAndDiamondText(window.MQ.posAchievementPractice[e].answerPosX*window.GameConfig.RESIZE,window.MQ.posAchievementPractice[e].answerPosY*window.GameConfig.RESIZE,window.MQ.posAchievementPractice[e].diamondPosX*window.GameConfig.RESIZE,window.MQ.posAchievementPractice[e].diamondPosY*window.GameConfig.RESIZE,this.rewards[e].number_question,this.rewards[e].reward,this.rewards[e].reward_type,window.MQ.posCirclePractice[e].x*window.GameConfig.RESIZE,window.MQ.posCirclePractice[e].y*window.GameConfig.RESIZE);this.createDotAnswered(),this.tweenSpriteTime.stop(),this.spriteTime.destroy(),this.answerA.destroy(),this.answerB.destroy(),this.answerC.destroy(),this.answerD.destroy(),this.removeAnswerGroup(),this.addLoadingSong()}}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){var t=this;e.cmd==ki.SOLO_MODE_FINISH_RESPONSE&&"OK"==e.params.getUtfString("status")&&(He.instance().logEvent(He.pro_quiz_end_solomode),LogConsole.log(e.params.getDump()),this.countQuiz==this.questions.length&&this.gotRewardStatus),e.cmd==ki.SOLO_MODE_GOT_REWARD_RESPONSE&&("OK"==e.params.getUtfString("status")?this.countQuiz==this.questions.length?this.txtGem.setText(dV.instance().dataMySeft.diamond):this.txtGem.setText(dV.instance().socket.mySelf.getVariable("diamond").value):console.warn(e.params.getUtfString("message"))),e.cmd==ki.SOLO_MODE_NEXT_QUESTION_RESPONSE&&"OK"==e.params.getUtfString("status")&&this.handlePracticeQuestions(e.params,function(){t.checkWhatReward()})}},{key:"handlePracticeQuestions",value:function(e,t){for(var n=e.getSFSArray("questions"),i=[],o=0;o<n.size();o++){var a=n.getSFSObject(o),s=a.getUtfString("answer1"),r=a.getUtfString("answer2"),l=a.getUtfString("answer3"),c=a.getUtfString("answer4"),h=a.getInt("correct_answer"),u=a.getUtfString("file_path"),d=a.getUtfString("file_path"),f=a.getLong("song_id");i.push({answers:[s,r,l,c],correctAnswer:h,songEntity:{listenLink:d,id:f,fileUrl:u}})}for(var p=0;p<i.length;p++)this.questions.push(i[p]);t()}},{key:"doneSoloModeGoHome",value:function(){this.stopAudio(),this.event.backToHome.dispatch()}},{key:"doneSoloModeGetRank",value:function(){this.stopAudio(),this.getRanking()}},{key:"sendSoloModeFinishRequest",value:function(e,t){var n=new SFS2X.SFSObject;n.putInt("playlist_id",t),n.putInt("number_of_correct",e),dV.instance().sendData(ki.SOLO_MODE_FINISH_REQUEST,n)}},{key:"destroy",value:function(){for(this.removeEventExtension(),this.loadAudioSource.remove(),this.tweenSpriteTime.stop(),game.tweens.removeFrom(this.spriteTime),rl.instance().removeAllSound();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),iT(oT(t.prototype),"destroy",this).call(this)}}])&&tT(n.prototype,i),o&&tT(n,o),t}();function rT(e){return(rT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cT(e,t){return!t||"object"!==rT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hT(e,t,n){return(hT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uT(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function uT(e){return(uT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dT(e,t){return(dT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fT=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=cT(this,uT(t).call(this))).screenPickAlbum=null,e.screenPlay=null,e.event={pickAlbumBack:new Phaser.Signal,playGoHome:new Phaser.Signal},e.screen=n,e.arrResource=[{type:"text",link:"img/config/positionPracticeScreenConfig.json",key:"positionPracticeScreenConfig"},{type:"text",link:"img/config/positionPracticePopupConfig.json",key:"positionPracticePopupConfig"},{type:"text",link:"img/config/positionRankingConfig.json",key:"positionRankingConfig"},{type:"spritesheet",link:"img/assetss/Animation/Timeout/TimeoutSoloMode.png",key:"timeout_practice",width:158,height:195,countFrame:24},{type:"spritesheet",link:"img/assetss/Practice/Wrong338x338.png",key:"wrong_practice",width:210,height:210,countFrame:23},{type:"spritesheet",link:"img/animations/RewardSoloMode/reward.png",key:"rewardSoloMode",width:250,height:250,countFrame:54},{type:"spritesheet",link:"img/animations/RewardSoloMode/ticketReward.png",key:"rewardTicketSoloMode",width:250,height:250,countFrame:54},{type:"spritesheet",link:"img/animations/RewardSoloMode/sptReward.png",key:"rewardSptSoloMode",width:250,height:250,countFrame:54},{type:"atlas",link:"img/atlas/soloMode.png",key:"practiceMenuSprites",linkJson:"img/atlas/soloMode.json"}],e.loadResource(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dT(e,t)}(t,Wp),n=t,o=[{key:"PICK_ALBUM",get:function(){return"screen_pick_album"}},{key:"PLAY",get:function(){return"screen_play"}}],(i=[{key:"onLoadFileComplete",value:function(){this.afterInit()}},{key:"afterInit",value:function(){this.addEventExtension(),this.defineData(),this.screen==t.PICK_ALBUM&&this.sendSoloModePlaylistsRequest()}},{key:"defineData",value:function(){this.playlist={name:"",id:0},this.questions=[],this.rewardPractice=[],this.archived={}}},{key:"sendSoloModePlaylistsRequest",value:function(){ht.instance().showLoading(),this.checkRequestSocketSoloModePlaylist(),0==oe.instance().isSoloModePlaylistRequest.checking?(oe.instance().soloModePlaylists=[],dV.instance().sendData(ki.SOLO_MODE_PLAYLISTS_REQUEST,null),oe.instance().isSoloModePlaylistRequest.checking=!0,oe.instance().isSoloModePlaylistRequest.updated=Date.now()):this.doneSoloModePlaylistResponse()}},{key:"checkRequestSocketSoloModePlaylist",value:function(){1==oe.instance().isSoloModePlaylistRequest.checking?0==oe.instance().soloModePlaylists.length?oe.instance().isSoloModePlaylistRequest.checking=!1:oe.instance().isSoloModePlaylistRequest.checking=!0:oe.instance().isSoloModePlaylistRequest.checking=!1}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"doneSoloModePlaylistResponse",value:function(){this.addScreenPickAlbum(),ht.instance().hideLoading()}},{key:"onExtensionResponse",value:function(e){var t=this;e.cmd==ki.SOLO_MODE_PLAYLISTS_RESPONSE&&("OK"==e.params.getUtfString("status")?this.handleSoloModePlaylistsResponse(e.params,function(){t.doneSoloModePlaylistResponse()}):console.warn(e.params.getUtfString("message"))),e.cmd==ki.SOLO_MODE_QUESTION_RESPONSE&&("OK"==e.params.getUtfString("status")?this.handleSoloModeSelectedPlaylistsResponse(e.params,function(){t.removeScreenPickAlbum(),t.updateSoloModePlaylists(oe.instance().soloModePlaylists),t.addScreenPlay(),ht.instance().hideLoading()}):"WARNING"==e.params.getUtfString("status")?(jC.instance().addPopupNotEnoughResource(uC.HEART),null!==this.screenPickAlbum&&(this.screenPickAlbum.isChoosedAlbum=!1,this.isChoosedAlbum=!1),ht.instance().hideLoading()):ht.instance().hideLoading()),e.cmd==ki.INIT_SOLO_MODE_REWARD_RESPONSE&&"OK"==e.params.getUtfString("status")&&this.handleSoloModeRewardResponse(e.params,function(){t.sendSelectedPlaylistSoloMode(t.playlist.id)})}},{key:"updateSoloModePlaylists",value:function(e){var t=this,n=(new Date).getTime();e.forEach(function(i,o){i.id===t.playlist.id&&(e[o].user_playlist_mapping.updated=n)})}},{key:"addScreenPickAlbum",value:function(){this.removeScreenPickAlbum(),this.screenPickAlbum=new Hx,this.screenPickAlbum.addPlaylists(oe.instance().soloModePlaylists),this.screenPickAlbum.addEventInputX(this.onClickPracticeBtnX,this),this.screenPickAlbum.event.pickAlbum.add(this.onChoosedAlbum,this),this.screenPickAlbum.event.refreshPickAlbum.add(this.refreshPickAlbum,this),this.isChoosedAlbum=!1,this.addChild(this.screenPickAlbum)}},{key:"removeScreenPickAlbum",value:function(){null!==this.screenPickAlbum&&(this.removeChild(this.screenPickAlbum),this.screenPickAlbum.destroy(),this.screenPickAlbum=null)}},{key:"onClickPracticeBtnX",value:function(){this.removeScreenPickAlbum(),FH.instance().changeScreen(De.MAIN_MENU)}},{key:"onChoosedAlbum",value:function(e){!1===this.isChoosedAlbum&&(this.playlist={name:e.name,id:e.id},this.isChoosedAlbum=!0,null!==oe.instance().soloModeReward?this.sendSelectedPlaylistSoloMode(this.playlist.id):this.sendGetSoloModeRewardRequest())}},{key:"refreshPickAlbum",value:function(){this.removeScreenPickAlbum(),this.defineData(),ht.instance().showLoading(),oe.instance().soloModePlaylists=[],dV.instance().sendData(ki.SOLO_MODE_PLAYLISTS_REQUEST,null),oe.instance().isSoloModePlaylistRequest.checking=!0,oe.instance().isSoloModePlaylistRequest.updated=Date.now()}},{key:"addScreenPlay",value:function(){this.removeScreenPlay(),this.screenPlay=new sT,this.screenPlay.setData(this.questions,this.archived,this.rewardPractice,this.playlist,this.highest_number_of_correct),this.screenPlay.afterInit(),this.screenPlay.event.backToHome.add(this.screenPlayBackHome,this),this.screenPlay.event.playAgain.add(this.screenPlayPlayAgain,this),this.addChild(this.screenPlay)}},{key:"removeScreenPlay",value:function(){null!==this.screenPlay&&(this.removeChild(this.screenPlay),this.screenPlay.destroy(),this.screenPlay=null)}},{key:"screenPlayBackHome",value:function(){this.removeScreenPlay(),FH.instance().changeScreen(De.SOLO_MODE,t.PICK_ALBUM)}},{key:"screenPlayPlayAgain",value:function(e){this.sendSelectedPlaylistSoloMode(e.id)}},{key:"handleSoloModePlaylistsResponse",value:function(e,t){for(var n=e.getSFSArray("general_playlists"),i=0;i<n.size();i++){var o,a=n.getSFSObject(i),s=a.getUtfString("thumb"),r=a.getInt("price"),l=a.getUtfString("name"),c=a.getInt("is_general"),h=a.getInt("id"),u=a.getInt("is_owner");if(a.containsKey("user_playlist_mapping")){var d=a.getSFSObject("user_playlist_mapping");o={user_id:d.getInt("user_id"),level:d.getInt("level"),playlist_id:d.getInt("playlist_id"),created:d.getLong("created"),exp_score:d.getInt("exp_score"),active:d.getInt("active"),id:d.getLong("id"),current_level_score:d.getInt("current_level_score"),next_level_score:d.getInt("next_level_score"),updated:d.getLong("updated")}}oe.instance().soloModePlaylists.push({thumb:s,price:r,name:l,is_general:c,id:h,is_owner:u,user_playlist_mapping:o})}t()}},{key:"sendSelectedPlaylistSoloMode",value:function(e){var t=new SFS2X.SFSObject;t.putInt("playlist_id",e),dV.instance().sendData(ki.SOLO_MODE_QUESTION_REQUEST,t),ht.instance().showLoading()}},{key:"sendGetSoloModeRewardRequest",value:function(){dV.instance().sendData(ki.INIT_SOLO_MODE_REWARD_REQUEST,null)}},{key:"handleSoloModeSelectedPlaylistsResponse",value:function(e,t){var n=e.getSFSArray("questions"),i=e.getSFSObject("solo_mode_archived"),o=e.getInt("highest_number_of_correct");this.handlePracticeQuestions(n),this.handleSoloModeArchived(i),this.highest_number_of_correct=o,t()}},{key:"handleSoloModeRewardResponse",value:function(e,t){var n=e.getSFSArray("solo_mode_rewards");this.handleSoloModeRewards(n),t()}},{key:"handleSoloModeArchived",value:function(e){var t=e.getInt("user_id"),n=e.getInt("playlist_id"),i=e.getInt("achieved"),o=e.getLong("id");this.archived={user_id:t,playlist_id:n,achieved:i,id:o}}},{key:"handleSoloModeRewards",value:function(e){for(var t=[],n=0;n<e.size();n++){var i=e.getSFSObject(n),o=i.getInt("id"),a=i.getInt("number_question"),s=i.getInt("reward"),r=i.getUtfString("reward_type");t.push({id:o,number_question:a,reward:s,reward_type:r})}this.rewardPractice=t}},{key:"handlePracticeQuestions",value:function(e){for(var t=[],n=0;n<e.size();n++){var i=e.getSFSObject(n),o=i.getUtfString("answer1"),a=i.getUtfString("answer2"),s=i.getUtfString("answer3"),r=i.getUtfString("answer4"),l=i.getInt("correct_answer"),c=i.getUtfString("file_path"),h=i.getUtfString("file_path"),u=i.getLong("song_id");t.push({answers:[o,a,s,r],correctAnswer:l,songEntity:{listenLink:h,id:u,fileUrl:c}})}this.questions=t}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),hT(uT(t.prototype),"destroy",this).call(this)}}])&&lT(n.prototype,i),o&&lT(n,o),t}();function pT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var gT=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"daily_reward_settings",get:function(){return"daily_reward_settings"}},{key:"reward",get:function(){return"reward"}},{key:"reward_type",get:function(){return"reward_type"}},{key:"id",get:function(){return"id"}},{key:"day",get:function(){return"day"}}],(n=null)&&pT(t.prototype,n),i&&pT(t,i),e}();var yT=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reward=0,this.reward_type="",this.id=0,this.day=0};function mT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var vT=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"daily_reward_log",get:function(){return"daily_reward_log"}},{key:"user_id",get:function(){return"user_id"}},{key:"created",get:function(){return"created"}},{key:"state",get:function(){return"state"}},{key:"day",get:function(){return"day"}},{key:"updated",get:function(){return"updated"}}],(n=null)&&mT(t.prototype,n),i&&mT(t,i),e}();var wT=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user_id=0,this.created=0,this.state="",this.day=0,this.updated=0};function bT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){for(var n=e.getSFSArray(gT.daily_reward_settings),i=[],o=0;o<n.size();o++){var a=n.getSFSObject(o),s=new yT;s.reward=a.getInt(gT.reward),s.reward_type=a.getUtfString(gT.reward_type),s.id=a.getInt(gT.id),s.day=a.getInt(gT.day),i.push(s)}var r=e.getSFSObject(vT.daily_reward_log),l=new wT;l.user_id=r.getInt(vT.user_id),l.created=r.getLong(vT.created),l.state=r.getUtfString(vT.state),l.day=r.getInt(vT.day),l.updated=r.getLong(vT.updated),t(i,l)}}],(n=null)&&bT(t.prototype,n),i&&bT(t,i),e}();function ST(e){return(ST="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ET(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function CT(e,t){return!t||"object"!==ST(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kT(e,t,n){return(kT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PT(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function PT(e){return(PT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OT(e,t){return(OT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RT=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=CT(this,PT(t).call(this,game))).positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.event={goToShop:new Phaser.Signal,refreshMenu:new Phaser.Signal},e.inputEnabled=!0,e.outSize=!0,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OT(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.btn,this.animCircleScale,this.animButtonInOut,this.addBtn(),this.addAnimButtonInOut(),this.runAnim()}},{key:"addBtn",value:function(){this.btn=new Phaser.Sprite(game,this.positionMenuConfig.btnShop.x*window.GameConfig.RESIZE,this.positionMenuConfig.btnShop.y*window.GameConfig.RESIZE,this.positionMenuConfig.btnShop.nameAtlas,this.positionMenuConfig.btnShop.nameSprite),this.btn.anchor.set(.5),this.btn.inputEnabled=!0,this.btn.events.onInputUp.add(this.onClickBtn,this),this.txtBtn=new Phaser.Text(game,this.positionMenuConfig.txt_shop.x*window.GameConfig.RESIZE,this.positionMenuConfig.txt_shop.y*window.GameConfig.RESIZE,de.instance().getData(204),this.positionMenuConfig.txt_shop.configs),this.txtBtn.anchor.set(.5),this.btn.addChild(this.txtBtn),this.addChild(this.btn)}},{key:"onClickBtn",value:function(){be.instance().playSound(be.buttonclick),this.event.goToShop.dispatch()}},{key:"addAnimCircleScale",value:function(){this.animCircleScale=new Phaser.Sprite(game,0,0,"CircleScale"),this.animCircleScale.anchor.set(.5),this.btn.addChild(this.animCircleScale)}},{key:"addAnimButtonInOut",value:function(){this.animButtonInOut=new Phaser.Sprite(game,0,0,"ButtonShop"),this.animButtonInOut.anchor.set(.5),this.btn.addChild(this.animButtonInOut)}},{key:"runAnim",value:function(){this.animButtonInOut.animations.add("run_anim_button");this.animButtonInOut.animations.play("run_anim_button",25,!0)}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){}},{key:"scrollChange",value:function(){this.txtBtn.kill(),game.add.tween(this.btn).to({y:65},150,"Linear",!0).start(),1==this.isGift&&this.animCircleScale.animations.stop("run_scale_circle",!0)}},{key:"scrollDefault",value:function(){this.txtBtn.revive(),game.add.tween(this.btn).to({y:this.positionMenuConfig.btnGift.y*window.GameConfig.RESIZE},150,"Linear",!0).start(),1==this.isGift&&this.animCircleScale.animations.play("run_scale_circle",30,!0)}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),kT(PT(t.prototype),"destroy",this).call(this)}}])&&ET(n.prototype,i),o&&ET(n,o),t}();function xT(e){return(xT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function IT(e,t){return!t||"object"!==xT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AT(e,t,n){return(AT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LT(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function LT(e){return(LT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DT(e,t){return(DT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var GT=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=IT(this,LT(t).call(this,game))).btnShop=null,e.btnEvent=null,e.btnQuest=null,e.btnRanking=null,e.btnFindGame=null,e.btnPractice=null,e.btnParty=null,e.userProfile=null,e.scrollList=null,e.navBar=null,e.timeoutLoading=null,e.timeoutShowChallenge=null,e.event={goToFindGame:new Phaser.Signal,goToTurnBasePlay:new Phaser.Signal,goToParty:new Phaser.Signal,goToSoloMode:new Phaser.Signal,goToGift:new Phaser.Signal,goToEvent:new Phaser.Signal,refreshMenu:new Phaser.Signal},e.playScript=JSON.parse(game.cache.getText("playScript")),e.positionMenuConfig=JSON.parse(game.cache.getText("positionMenuConfig")),e.bg=new Phaser.Sprite(game,0,0,"bg_create_room"),e.addChild(e.bg),e.afterInit(),e}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DT(e,t)}(t,Z),n=t,(o=[{key:"afterInit",value:function(){ht.instance().showLoading(),He.instance().logEvent(He.Main_menu),this.addEventExtension(),this.user={avatar:dV.instance().dataMySeft.avatar,user_name:dV.instance().dataMySeft.user_name},this.layoutMenu=new Phaser.Group(game),this.addChild(this.layoutMenu),this.bgFake=new Nk("bg_scrollMenu"),this.layoutMenu.addChild(this.bgFake),this.layoutMain=new Phaser.Group(game),this.layoutMenu.addChild(this.layoutMain),this.layoutNavBar=new Phaser.Group(game),this.addChild(this.layoutNavBar),this.addBtnFindGame(),this.addBtnPractice(),this.addBtnParty(),this.setAnimButtonModeGame(),this.addBtnGift(),this.addBtnQuest(),this.addBtnEvent(),this.addBtnRanking(),this.addUserProfile(),this.addNavBar(),this.addScollList(),this.sendRequestMenuChallenges(),this.bgFake.event.refreshMenu.add(this.refreshMenu,this),this.bgFake.event.scrollChange.add(this.scrollChange,this),this.bgFake.event.scrollDefault.add(this.scrollDefault,this),this.bgFake.event.scrollList.add(this.scrollListEvent,this)}},{key:"checkShowInvite",value:function(e){null!==this.navBar&&2!==this.navBar.typeNew&&!1===ih.instance().getUserBlock(e.getInt("inviter_id"))&&jC.instance().addDialogInviteFriend(e,!0)}},{key:"scrollListEvent",value:function(e){this.scrollList&&this.scrollList.scrollEventResponse(e)}},{key:"refreshMenu",value:function(){FH.instance().changeScreen(De.MAIN_MENU)}},{key:"scrollChange",value:function(){this.btnShop.scrollChange(),this.btnQuest.scrollChange(),this.btnEvent.scrollChange(),this.btnRanking.scrollChange(),this.btnFindGame.setPosY(225),this.btnParty.setPosY(225),this.btnPractice.setPosY(225),this.layoutMain.addChild(this.btnFindGame),this.layoutMain.addChild(this.btnParty),this.layoutMain.addChild(this.btnPractice),this.bgFake.isScrollChange=!0,this.userProfile.scrollChange(),this.timeoutLoading=setTimeout(function(){ht.instance().hideLoading()},1200)}},{key:"scrollDefault",value:function(){this.btnShop.scrollDefault(),this.btnQuest.scrollDefault(),this.btnEvent.scrollDefault(),this.btnRanking.scrollDefault(),this.btnFindGame.setPosYDefault(this.positionMenuConfig.btn_findgame.y*window.GameConfig.RESIZE),this.btnParty.setPosYDefault(this.positionMenuConfig.btn_party.y*window.GameConfig.RESIZE),this.btnPractice.setPosYDefault(this.positionMenuConfig.btn_practice.y*window.GameConfig.RESIZE),this.bgFake.addChild(this.btnParty),this.bgFake.addChild(this.btnPractice),this.bgFake.addChild(this.btnFindGame),this.bgFake.isScrollChange=!1,this.userProfile.scrollDefault(),this.timeoutLoading=setTimeout(function(){ht.instance().hideLoading()},1200)}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),dV.instance().events.onUserVarsUpdate.add(this.onUpdateUserVars,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),dV.instance().events.onUserVarsUpdate.remove(this.onUpdateUserVars,this),this.bgFake.event.refreshMenu.remove(this.refreshMenu,this),this.bgFake.event.scrollChange.remove(this.scrollChange,this),this.bgFake.event.scrollDefault.remove(this.scrollDefault,this)}},{key:"sendRequestMenuChallenges",value:function(){var e=this;null==oe.instance().menuLoadResponses?dV.instance().sendDataGetMenu(ki.MAIN_MENU_LOAD_REQUEST,"MAIN_MENU_LOAD_REQUEST"):(this.checkRequestSocketMainMenuCheck(),0==oe.instance().isRefreshMenu.checking?(dV.instance().sendData(ki.MAIN_MENU_CHECK_UPDATE_REQUEST,null),this.timeoutShowChallenge=setTimeout(function(){e.scrollList.displayListChallenge(),e.bgFake.addChildren(e.scrollList)},800),this.refreshButNotRefresh(),oe.instance().isRefreshMenu.checking=!0,oe.instance().isRefreshMenu.updated=Date.now()):(this.timeoutShowChallenge=setTimeout(function(){e.scrollList.displayListChallenge(),e.bgFake.addChildren(e.scrollList)},800),this.refreshButNotRefresh()),1==oe.instance().isScrollChange?this.scrollChange():this.scrollDefault())}},{key:"checkRequestSocketMainMenuCheck",value:function(){1==oe.instance().isRefreshMenu.checking?Date.now()-oe.instance().isRefreshMenu.updated<6e3?oe.instance().isRefreshMenu.checking=!0:oe.instance().isRefreshMenu.checking=!1:oe.instance().isRefreshMenu.checking=!1}},{key:"setAnimButtonModeGame",value:function(){var e=this,t=1;this.timeLoopAnim=game.time.create(!0),this.timeLoopAnim.loop(8*Phaser.Timer.SECOND,function(){1==t?e.btnFindGame.startAnim():2==t?e.btnParty.startAnim():3==t&&e.btnPractice.startAnim(),4==++t&&(t=1)},this),this.timeLoopAnim.start()}},{key:"addBtnEvent",value:function(){this.removeBtnEvent(),this.btnEvent=new BP,this.btnEvent.event.gotToEvent.add(this.onClickEventMode,this),this.layoutMain.addChild(this.btnEvent)}},{key:"onClickEventMode",value:function(){FH.instance().changeScreen(De.EVENT_MODE)}},{key:"removeBtnEvent",value:function(){null!==this.btnEvent&&(this.removeChild(this.btnEvent),this.btnEvent.destroy(),this.btnEvent=null)}},{key:"addBtnRanking",value:function(){this.removeBtnRanking(),this.btnRanking=new AP,this.btnRanking.btn.events.onInputUp.add(this.onClickRanking,this),this.layoutMain.addChild(this.btnRanking)}},{key:"onClickRanking",value:function(){be.instance().playSound(be.buttonclick),FH.instance().changeScreen(De.RANKING_ALL)}},{key:"removeBtnRanking",value:function(){null!==this.btnRanking&&(this.removeChild(this.btnRanking),this.btnRanking.destroy(),this.btnRanking=null)}},{key:"addBtnFindGame",value:function(){this.removeBtnFindGame(),this.btnFindGame=new Hk,this.btnFindGame.event.onClickFindGame.add(this.onClickFindGame,this),this.addChild(this.btnFindGame)}},{key:"onClickFindGame",value:function(){FH.instance().changeScreen(De.TURN_BASE)}},{key:"removeBtnFindGame",value:function(){null!==this.btnFindGame&&(this.removeChild(this.btnFindGame),this.btnFindGame.destroy(),this.btnFindGame=null)}},{key:"addBtnGift",value:function(){this.removeBtnGift(),this.btnShop=new RT,this.btnShop.event.goToShop.add(this.onShopBtnInput,this),this.btnShop.event.refreshMenu.add(this.refreshMenu,this),this.layoutMain.addChild(this.btnShop)}},{key:"removeBtnGift",value:function(){null!==this.btnShop&&(this.removeChild(this.btnShop),this.btnShop.destroy(),this.btnShop=null)}},{key:"onGiftBtnInput",value:function(e){this.hours_reward_setting=e,this.userProfile.claimHourReward(this.hours_reward_setting)}},{key:"onShopBtnInput",value:function(){jC.instance().addShop(0)}},{key:"onShared",value:function(e){e.hasOwnProperty(error_code)||this.sendShareResult()}},{key:"sendShareResult",value:function(){dV.instance().sendData(ki.FB_USER_SHARED_RESULT_REQUEST,null)}},{key:"addBtnParty",value:function(){this.removeBtnParty(),this.btnParty=new tP,this.btnParty.event.goToParty.add(this.goToParty,this),this.addChild(this.btnParty)}},{key:"removeBtnParty",value:function(){null!==this.btnParty&&(this.removeChild(this.btnParty),this.btnParty.destroy(),this.btnParty=null)}},{key:"goToParty",value:function(){FH.instance().changeScreen(De.ONLINE_MODE)}},{key:"addBtnPractice",value:function(){this.removeBtnPractice(),this.btnPractice=new zk,this.btnPractice.event.onClickPractice.add(this.onClickPracticeBtn,this),this.addChild(this.btnPractice)}},{key:"removeBtnPractice",value:function(){null!==this.btnPractice&&(this.removeChild(this.btnPractice),this.btnPractice.destroy(),this.btnPractice=null)}},{key:"onClickPracticeBtn",value:function(){FH.instance().changeScreen(De.SOLO_MODE,fT.PICK_ALBUM)}},{key:"addBtnQuest",value:function(){this.removeBtnQuest(),this.btnQuest=new PP,this.btnQuest.btn.events.onInputUp.add(this.onClickQAndA,this),this.layoutMain.addChild(this.btnQuest)}},{key:"onClickQAndA",value:function(){be.instance().playSound(be.buttonclick),FH.instance().changeScreen(De.QUEST_ACHIEVEMENT,2)}},{key:"removeBtnQuest",value:function(){null!==this.btnQuest&&(this.removeChild(this.btnQuest),this.btnQuest.destroy(),this.btnQuest=null)}},{key:"addNavBar",value:function(){this.removeNavBar(),this.navBar=new jR,this.navBar.createButtonOnNavigation(),this.navBar.event.backMenu.add(this.backMenu,this),this.navBar.event.changeOtherScreen.add(this.changeOtherScreen,this),this.layoutNavBar.addChild(this.navBar)}},{key:"backMenu",value:function(){FH.instance().changeScreen(De.MAIN_MENU)}},{key:"changeOtherScreen",value:function(){if(this.layoutMenu.x!==-game.width-300){var e=game.add.tween(this.layoutMenu).to({x:-game.width-300},500,"Linear",!0);e.start(),e.onComplete.add(function(){},this)}}},{key:"removeNavBar",value:function(){null!==this.navBar&&(this.removeChild(this.navBar),this.navBar.destroy(),this.navBar=null)}},{key:"addUserProfile",value:function(){this.removeUserProfile(),this.userProfile=new QP,this.userProfile.event.claimHourRewardDone.add(this.claimHourRewardDone,this),this.layoutMain.addChild(this.userProfile)}},{key:"claimHourRewardDone",value:function(){this.userProfile.event.claimHourRewardDone.remove(this.claimHourRewardDone,this),FH.instance().changeScreen(De.MAIN_MENU)}},{key:"removeUserProfile",value:function(){null!==this.userProfile&&(this.layoutMain.removeChild(this.userProfile),this.userProfile.destroy(),this.userProfile=null)}},{key:"addScollList",value:function(){this.removeScrollList(),this.scrollList=new bP,this.scrollList.event.playGame.add(this.onPlayGameScrollList,this),this.scrollList.event.nudgeFriend.add(this.nudgeFriend,this),this.scrollList.event.deleteChallenge.add(this.deleteChallenge,this)}},{key:"removeScrollList",value:function(){null!==this.scrollList&&(this.removeChild(this.scrollList),this.scrollList.destroy(),this.scrollList=null)}},{key:"onPlayGameScrollList",value:function(e){FH.instance().changeScreen(De.TURN_BASE,e)}},{key:"nudgeFriend",value:function(e){var t=new SFS2X.SFSObject;t.putInt("opponent_id",e.opponentEntity.id),dV.instance().sendData(ki.POKE_USER_REQUEST,t)}},{key:"deleteChallenge",value:function(e){if(e.length>0){var t=new SFS2X.SFSArray;for(i=0;i<e.length;i++)t.addInt(e[i]);var n=new _h("Bạn có muốn xóa lời thách đấu này không?");n.event.CANCLE.add(function(){n.destroy()},this),n.event.OK.add(function(){n.destroy(),ht.instance().showLoading();var e=new SFS2X.SFSObject;e.putSFSArray("opponent_ids",t),dV.instance().sendData(ki.TURNBASE_DELETE_GAME_REQUEST,e)},this),jC.instance().addChild(n)}}},{key:"onExtensionResponse",value:function(e){var t=this;e.cmd==ki.MAIN_MENU_LOAD_RESPONSE&&(this.scrollList.handleMainMenuLoadResponse(e.params,1,function(e,n,i,o,a,s){oe.instance().menuLoadResponses=e,t.scrollList.displayListChallenge(),t.bgFake.addChildren(t.scrollList),t.bgFake.addChild(t.btnParty),t.bgFake.addChild(t.btnPractice),t.bgFake.addChild(t.btnFindGame),1==oe.instance().isScrollChange?t.scrollChange():t.scrollDefault(),oe.instance().new_friend_request_count=i,oe.instance().started_event_count=o,oe.instance().hoursReward=a,oe.instance().playScript=s,oe.instance().init_quests_count=n,t.btnQuest.addDotNoti(oe.instance().init_quests_count),t.btnEvent.addDotNoti(oe.instance().started_event_count),t.navBar.addFriendRequest(oe.instance().new_friend_request_count),oe.instance().playScript.playing_guide==_o.INIT&&FH.instance().changeScreen(De.TURN_BASE,{opponent:t.playScript.demoData.opponent,type:eg.TUTORIAL}),oe.instance().playScript.playing_guide==_o.DONE_TURNBASE&&t.addChild(_o.instance()),oe.instance().playScript.playing_guide==_o.DONE_GET_QUEST&&(t.PlayScriptScreen=new _o,t.PlayScriptScreen.afterInit(),t.PlayScriptScreen.addStep8AcceptChallenge(),t.PlayScriptScreen.event.step8.add(t.acceptChallenge,t),t.addChild(t.PlayScriptScreen))}),dV.instance().sendRequestDataMessages(),dV.instance().sendRequestSystemMessages()),e.cmd==ki.DAILY_REWARD_NOTIFICATION&&_T.begin(e.params,function(e,t){LogConsole.log(e),LogConsole.log(t),setTimeout(function(){jC.instance().changeScreen(De.DAILY_REWARD,{dailyRewardSettings:e,dailyRewardLog:t})},500)}),e.cmd==ki.POKE_USER_RESPONSE&&"OK"==e.params.getUtfString("status")&&FH.instance().changeScreen(De.MAIN_MENU),e.cmd==ki.TURNBASE_DELETE_GAME_RESPONSE&&"OK"==e.params.getUtfString("status")&&FH.instance().changeScreen(De.MAIN_MENU),e.cmd==ki.PLAY_SCRIPT_DONE_ALL_RESPONSE&&"OK"==e.params.getUtfString("status")&&(oe.instance().playScript.playing_guide=_o.DONE_ALL,_o.instance().destroy(),FH.instance().changeScreen(De.MAIN_MENU)),e.cmd==ki.MAIN_MENU_CHECK_UPDATE_RESPONSE&&"OK"==e.params.getUtfString("status")&&(Gl.handleCheckUpdateMainMenu(e.params,function(e,n,i,o,a){oe.instance().init_quests_count=e,oe.instance().new_friend_request_count=n,oe.instance().started_event_count=i,oe.instance().hoursReward=o,oe.instance().playScript=a,t.refreshButNotRefresh()}),1==oe.instance().isScrollChange?this.scrollChange():this.scrollDefault())}},{key:"refreshButNotRefresh",value:function(){this.btnQuest.addDotNoti(oe.instance().init_quests_count),this.btnEvent.addDotNoti(oe.instance().started_event_count),this.navBar.addFriendRequest(oe.instance().new_friend_request_count),oe.instance().playScript.playing_guide==_o.INIT&&FH.instance().changeScreen(De.TURN_BASE,{opponent:this.playScript.demoData.opponent,type:eg.TUTORIAL}),oe.instance().playScript.playing_guide==_o.DONE_TURNBASE&&this.addChild(_o.instance()),oe.instance().playScript.playing_guide==_o.DONE_GET_QUEST&&(this.PlayScriptScreen=new _o,this.PlayScriptScreen.afterInit(),this.PlayScriptScreen.addStep8AcceptChallenge(),this.PlayScriptScreen.event.step8.add(this.acceptChallenge,this),this.addChild(this.PlayScriptScreen))}},{key:"acceptChallenge",value:function(){this.scrollList.acceptChallengeBot()}},{key:"onUpdateUserVars",value:function(){this.user.avatar!==dV.instance().dataMySeft.avatar&&(this.user.avatar=dV.instance().dataMySeft.avatar,this.addUserProfile()),this.user.user_name!==dV.instance().dataMySeft.user_name&&(this.user.user_name=dV.instance().dataMySeft.user_name,this.userProfile.updateValue(QP.UPDATE_NAME))}},{key:"removeAllChild",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}},{key:"destroy",value:function(){for(null!==this.timeoutLoading&&clearTimeout(this.timeoutLoading),null!==this.timeoutShowChallenge&&clearTimeout(this.timeoutShowChallenge),this.removeEventExtension(),this.timeLoopAnim.stop(),this.timeLoopAnim.destroy(),rn.instance().resetLoad();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),AT(LT(t.prototype),"destroy",this).call(this)}}])&&TT(n.prototype,o),a&&TT(n,a),t}();function MT(e){return(MT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function BT(e,t,n){return(BT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jT(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function jT(e){return(jT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UT(e,t){return(UT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ZT=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=jT(t).call(this,game,null))||"object"!==MT(i)&&"function"!=typeof i?FT(n):i).event={back:new Phaser.Signal,search:new Phaser.Signal},e.clickBack=!0,e.bg=new Bt(oe.instance().positionCreateRoom.bg_header),e.addChild(e.bg),e.btnBack=new _n(oe.instance().positionCreateRoom.button_back,e.chooseBack,FT(FT(e))),e.addChild(e.btnBack),e.txtTitle=null,e.btnDiamond=null,e.txtIdPhong=null,e.txtNguoiTao=null,e.btnSearch=null,e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UT(e,t)}(t,Je),n=t,(i=[{key:"setBack",value:function(){this.clickBack=!0}},{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseBackButton,this),dV.instance().events.onUserVarsUpdate.add(this.onUserVarsUpdate,this)}},{key:"removeEvent",value:function(){LogConsole.log("removeEvent HEADER"),Qe.instance().event.backButton.remove(this.chooseBackButton,this),dV.instance().events.onUserVarsUpdate.remove(this.onUserVarsUpdate,this)}},{key:"onUserVarsUpdate",value:function(e){null!==this.btnDiamond&&this.btnDiamond.setText(dV.instance().dataMySeft.diamond)}},{key:"chooseBackButton",value:function(){this.chooseBack(!0)}},{key:"setHideBtnBack",value:function(){this.btnBack.visible=!1}},{key:"setShowBtnBack",value:function(){this.btnBack.visible=!0}},{key:"chooseBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0===this.clickBack&&(this.btnBack.inputEnabled=!1,LogConsole.log("chooseBack header"),this.event.back.dispatch(e))}},{key:"chooseSearch",value:function(){this.event.search.dispatch()}},{key:"setSearchButton",value:function(){this.btnSearch=new _n(oe.instance().positionCreateRoom.button_search,this.chooseSearch,this),this.addChild(this.btnSearch)}},{key:"setTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CN";"CN"===e&&(e=de.instance().getData("212")),this.txtTitle=new Qt(oe.instance().positionCreateRoom.txt_title_header,e),this.txtTitle.setTextBounds(0,0,game.width,this.bg.height*oe.instance().scale),this.addChild(this.txtTitle)}},{key:"setDiamond",value:function(){this.btnDiamond=new qn(oe.instance().positionCreateRoom.btn_diamond_header,dV.instance().dataMySeft.diamond),this.addChild(this.btnDiamond)}},{key:"setWaittingRoom",value:function(){this.txtIdPhong=new Qt(oe.instance().positionCreateRoom.waitting_txt_idphong,""),this.txtIdPhong.setTextBounds(0,0,game.width,44*oe.instance().scale),this.addChild(this.txtIdPhong),this.txtNguoiTao=new Qt(oe.instance().positionCreateRoom.waitting_txt_nguoitao,""),this.txtNguoiTao.setTextBounds(0,0,game.width,28*oe.instance().scale),this.addChild(this.txtNguoiTao)}},{key:"setIdPhong",value:function(e){null!==this.txtIdPhong&&(this.txtIdPhong.text=de.instance().getData("48")+": "+e)}},{key:"setNguoiTao",value:function(e){null!==this.txtNguoiTao&&(this.txtNguoiTao.text=de.instance().getData("49")+": "+e,this.txtNguoiTao.addColor("#FFA339",de.instance().getData("49").length+1))}},{key:"setStyleTitle",value:function(e){null!==this.txtTitle&&this.txtTitle.changeStyle(e)}},{key:"destroy",value:function(){this.removeEvent(),BT(jT(t.prototype),"destroy",this).call(this)}}])&&NT(n.prototype,i),o&&NT(n,o),t}();function HT(e){return(HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function QT(e,t){return!t||"object"!==HT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WT(e,t,n){return(WT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qT(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function qT(e){return(qT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KT(e,t){return(KT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zT=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),QT(this,qT(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KT(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={close:new Phaser.Signal,create_room:new Phaser.Signal,quick_play:new Phaser.Signal},this.positionCreateRoom=JSON.parse(game.cache.getText("positionCreateRoom")),this.bg=new Phaser.Button(game,0,0,"bg_create_room"),this.addChild(this.bg),this.header=new ZT,this.header.setTitle(),this.header.event.back.add(this.chooseBack,this),this.addChild(this.header),this.txtTimPhong=new Qt(oe.instance().positionCreateRoom.choose_game_text_timphong,de.instance().getData("72")),this.addChild(this.txtTimPhong),this.btnInputText=new Rn(oe.instance().positionCreateRoom.choose_game_bg_input_text,de.instance().getData("73")+"...",this.chooseInputText,this),this.addChild(this.btnInputText),this.btnThamgia=new qn(oe.instance().positionCreateRoom.choose_game_btn_thamgia,de.instance().getData("74"),this.chooseThamGia,this),this.addChild(this.btnThamgia),this.line=new Bt(oe.instance().positionCreateRoom.choose_game_bg_line),this.addChild(this.line),this.btnChoiNgay=new qn(oe.instance().positionCreateRoom.choose_game_btn_choingay,de.instance().getData("75"),this.chooseQuickPlay,this),this.addChild(this.btnChoiNgay),this.btnTaoPhong=new qn(oe.instance().positionCreateRoom.choose_game_btn_taophong,de.instance().getData("76"),this.chooseCreateRoom,this),this.addChild(this.btnTaoPhong),He.instance().logEvent(He.Party_online_mode),ht.instance().hideLoading(),!1===Ei.instance().showInterstitialCreateRoom()&&!1===Ei.instance().showInterstitialQuickPlay()&&Ei.instance().showBanerPartyModeScreen(),this.addEvent()}},{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseBack,this)}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this)}},{key:"chooseBack",value:function(){LogConsole.log("chooseCreateRoom--------"),this.onCancel(),oe.instance().state="",this.event.close.dispatch()}},{key:"chooseQuickPlay",value:function(){LogConsole.log("chooseCreateRoom--------"),this.onCancel(),this.event.quick_play.dispatch()}},{key:"chooseCreateRoom",value:function(){LogConsole.log("chooseCreateRoom--------"),this.onCancel(),this.event.create_room.dispatch()}},{key:"chooseThamGia",value:function(){""===Ir.instance().getValue()?(jC.instance().addDialog(de.instance().getData("77")),this.onCancel()):this.enterKeyBoard()}},{key:"chooseInputText",value:function(){var e={maxLength:"",showTransparent:!0,placeholder:de.instance().getData("78"),isSearch:!1,typeInputText:"input",configText:{width:this.btnInputText.width,height:this.btnInputText.height,x:this.btnInputText.x,y:this.btnInputText.y},inputType:"number"};Ir.instance().show(e),Ir.instance().event.change.add(this.changeKeyBoard,this),Ir.instance().event.hideKeyboard.add(this.hideKeyboard,this),Ir.instance().event.enter.add(this.enterKeyBoard,this),Ir.instance().event.submit.add(this.enterKeyBoard,this),Ir.instance().event.cancle.add(this.onCancel,this)}},{key:"hideKeyboard",value:function(){Ir.instance().hide()}},{key:"onCancel",value:function(){this.btnInputText.visible=!0,Ir.instance().event.change.remove(this.changeKeyBoard,this),Ir.instance().event.hideKeyboard.remove(this.hideKeyboard,this),Ir.instance().event.enter.remove(this.enterKeyBoard,this),Ir.instance().event.submit.remove(this.enterKeyBoard,this),Ir.instance().event.cancle.remove(this.onCancel,this),Ir.instance().hide()}},{key:"changeKeyBoard",value:function(){LogConsole.log("changeKeyBoard")}},{key:"enterKeyBoard",value:function(){var e=parseInt(Ir.instance().getValue());""!==e?isNaN(e)?jC.instance().addDialog(de.instance().getData("79")):dV.instance().sendData(sE.ONLINE_MODE_ROOM_QUICK_JOIN_REQUEST,oE.begin(parseInt(e))):jC.instance().addDialog(de.instance().getData("79")),this.onCancel()}},{key:"destroy",value:function(){this.removeEvent(),this.header.destroy(),this.onCancel(),Ei.instance().hideBanner(),WT(qT(t.prototype),"destroy",this).call(this)}}])&&VT(n.prototype,i),o&&VT(n,o),t}();function YT(e){return(YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function JT(e,t){return!t||"object"!==YT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $T(e,t,n){return($T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eI(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function eI(e){return(eI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tI(e,t){return(tI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),JT(this,eI(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tI(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={choose_bet:new Phaser.Signal},this.data=null,this.positionCreateRoom=oe.instance().positionCreateRoom,this.bg=new Bt(this.positionCreateRoom.choose_bet_bg_item_bet),this.addChild(this.bg),this.iconGem=new Bt(this.positionCreateRoom.choose_bet_icon_gem_item_bet),this.addChild(this.iconGem),this.txtMoneyBet=new Qt(this.positionCreateRoom.choose_bet_txtmoney_item_bet,"0"),this.txtMoneyBet.setTextBounds(0,0,104*oe.instance().scale,32*oe.instance().scale),this.addChild(this.txtMoneyBet),this.txtMuccuoc=new Qt(this.positionCreateRoom.choose_bet_label_mucuoc_item_bet,de.instance().getData("43")),this.txtMuccuoc.setTextBounds(0,0,150*oe.instance().scale,35*oe.instance().scale),this.addChild(this.txtMuccuoc),this.btnChoose=new qn(this.positionCreateRoom.choose_bet_btnchon_item_bet,de.instance().getData("44"),this.chooseBet,this),this.addChild(this.btnChoose)}},{key:"chooseBet",value:function(){LogConsole.log("chooseBet-OnlineModeChooseBetItem"),dV.instance().dataMySeft.diamond<this.data.bet_place?jC.instance().addDialog(de.instance().getData("45")):(this.btnChoose.inputEnabled=!1,this.event.choose_bet.dispatch(this.data))}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e,t){this.data=e,this.txtMoneyBet.text=this.data.bet_place,this.x=game.width,game.add.tween(this).to({x:0},200,Phaser.Easing.Power1,!0,100+50*(t+1))}},{key:"destroy",value:function(){$T(eI(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.game.width}},{key:"height",get:function(){return this.bg.height}}])&&XT(n.prototype,i),o&&XT(n,o),t}();function iI(e){return(iI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function aI(e,t){return!t||"object"!==iI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sI(e,t,n){return(sI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rI(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function rI(e){return(rI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lI(e,t){return(lI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aI(this,rI(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lI(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={back:new Phaser.Signal,choose_bet:new Phaser.Signal},ht.instance().showLoading(),this.arrBet=[],this.bg=new Phaser.Button(game,0,0,"bg_create_room"),this.addChild(this.bg),this.txtChonMucCuoc=new Qt(oe.instance().positionCreateRoom.choose_bet_label_chonmucuoc,de.instance().getData("70")),this.txtChonMucCuoc.setTextBounds(0,0,game.width,72*oe.instance().scale),this.addChild(this.txtChonMucCuoc);var e=new Phaser.Group(game,0,0,null);this.listBet=new Ia(game,e,new Phaser.Rectangle(0,0,game.width,game.height-235*oe.instance().scale),{direction:"y",padding:15*oe.instance().scale,searchForClicks:!0}),e.x=0,e.y=230*oe.instance().scale,this.addChild(e),this.header=new ZT,this.header.setDiamond(),this.header.event.back.add(this.chooseBack,this),this.addChild(this.header)}},{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseBack,this),dV.instance().events.onExtensionResponse.add(this.getData,this),ak.instance().event.load_online_mode_room_bet_complete.add(this.buildDataRoomBet,this),!0===ak.instance().ktLoadOnlineModeRoomBet?this.buildDataRoomBet():ak.instance().sendGetOnlineModeRoomBet(),Ei.instance().showBanerChooseBettingCreateRoomScreen()}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this),dV.instance().events.onExtensionResponse.remove(this.getData,this),ak.instance().event.load_online_mode_room_bet_complete.remove(this.buildDataRoomBet,this)}},{key:"buildDataRoomBet",value:function(){this.arrBet=ak.instance().createroom_bet_setting,this.addListBet(),game.time.events.add(100,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"getData",value:function(e){switch(e.cmd){case sE.ONLINE_MODE_ROOM_LOAD_BET_RESPONSE:}}},{key:"addListBet",value:function(){this.listBet.removeAll(),this.listBet.reset();for(var e=0;e<this.arrBet.length;e++){var t=new nI;t.event.choose_bet.add(this.chooseBet,this),t.setData(this.arrBet[e],e),this.listBet.add(t)}}},{key:"chooseBet",value:function(e){LogConsole.log("choose_bet"),dV.instance().dataMySeft.diamond<this.betMoney?jC.instance().addDialogConfirnMoney(de.instance().getData("71")):this.event.choose_bet.dispatch(e.id,e.bet_place)}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),this.listBet.removeAll(),this.listBet.destroy(),Ei.instance().hideBanner(),sI(rI(t.prototype),"destroy",this).call(this)}}])&&oI(n.prototype,i),o&&oI(n,o),t}();function hI(e){return(hI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dI(e,t){return!t||"object"!==hI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fI(e,t,n){return(fI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pI(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pI(e){return(pI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gI(e,t){return(gI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dI(this,pI(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gI(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={buy:new Phaser.Signal,select:new Phaser.Signal},this.data=null,this.positionCreateRoom=oe.instance().positionCreateRoom,this.ava=new ec,this.ava.x=33*oe.instance().scale,this.ava.y=16*oe.instance().scale,this.ava.setSize(107*oe.instance().scale,107*oe.instance().scale),this.addChild(this.ava),this.txtName=new Qt(this.positionCreateRoom.choose_playlist_itemplaylist_txtname,""),this.txtName.setTextBounds(0,0,305*oe.instance().scale,66*oe.instance().scale),this.addChild(this.txtName),this.txtVip=new Qt(this.positionCreateRoom.choose_playlist_itemplaylist_vip,""),this.txtVip.setTextBounds(0,0,305*oe.instance().scale,28*oe.instance().scale),this.level=new dc,this.level.x=this.positionCreateRoom.choose_playlist_itemplaylist_vip.x*oe.instance().scale,this.level.y=this.positionCreateRoom.choose_playlist_itemplaylist_vip.y*oe.instance().scale,this.addChild(this.level),this.btnBuy=null,this.line=new Bt(this.positionCreateRoom.choose_playlist_itemplaylist_line),this.addChild(this.line)}},{key:"setButtonBuy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.removeBtnBuy(),this.btnBuy=new qn(this.positionCreateRoom.choose_playlist_itemplaylist_btnBuy,e,this.chooseBuy,this),this.addChild(this.btnBuy),this.line.visible=!1}},{key:"removeBtnBuy",value:function(){null!==this.btnBuy&&(this.removeChild(this.btnBuy),this.btnBuy.destroy(),this.btnBuy=null)}},{key:"setButtonChoose",value:function(){this.removeBtnBuy(),this.btnBuy=new qn(this.positionCreateRoom.choose_playlist_itemplaylist_select,de.instance().getData("46"),this.chooseSelect,this),this.addChild(this.btnBuy)}},{key:"setDataQuickPlay",value:function(e,t){this.data=e,this.ava.beginLoad(this.data.thumb,t),this.txtName.text=this.data.name,console.log("this.data.user.user_id : "+this.data.user.user_id),this.data.user.user_id===dV.instance().dataMySeft.user_id?this.setButtonChoose():this.setButtonBuy(this.data.price),this.level.visible=!0,this.level.setData(this.data.user),t<8?(this.x=game.width,game.add.tween(this).to({x:0},200,Phaser.Easing.Power1,!0,150+50*(t+1))):this.x=0}},{key:"setData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.data=e,this.ava.beginLoad(this.data.thumb,t),this.txtName.text=this.data.name,!1===n?(this.level.visible=!0,this.level.setData(this.data.user),t<8?(this.x=game.width,game.add.tween(this).to({x:0},200,Phaser.Easing.Power1,!0,250+50*(t+1))):this.x=0,this.txtName.y=this.positionCreateRoom.choose_playlist_itemplaylist_txtname.y):(this.level.visible=!1,this.txtName.y=this.positionCreateRoom.choose_playlist_itemplaylist_txtname.y+20)}},{key:"chooseBuy",value:function(){LogConsole.log("chooseBuy"),null!=this.data&&jC.instance().addPopupBuy(this.data)}},{key:"chooseSelect",value:function(){LogConsole.log("chooseSelect"),this.btnBuy.inputEnabled=!1,this.event.select.dispatch(this.data)}},{key:"destroy",value:function(){fI(pI(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return 640*oe.instance().scale}},{key:"height",get:function(){return 145*oe.instance().scale}}])&&uI(n.prototype,i),o&&uI(n,o),t}();function mI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var vI=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putInt("playlist_id",e),LogConsole.log(t.getDump()),t}}],(n=null)&&mI(t.prototype,n),i&&mI(t,i),e}();function wI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var bI=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){var n=new SFS2X.SFSObject;return n.putInt("playlist_id",e),n.putInt("bet_id",t),n}}],(n=null)&&wI(t.prototype,n),i&&wI(t,i),e}();function _I(e){return(_I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EI(e){return(EI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CI(e,t){return(CI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var PI=function(e){function t(e,n){var i,o,a,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=EI(t).call(this,game,null))||"object"!==_I(a)&&"function"!=typeof a?kI(o):a).event={close:new Phaser.Signal},i.vip=s,i.positionCreateRoom=oe.instance().positionCreateRoom,!0===i.vip?(i.bg=new _n(i.positionCreateRoom.chat_waitting_friend_chat_bg_vip),i.addChild(i.bg)):(i.bg=new _n(i.positionCreateRoom.chat_waitting_friend_chat_bg),i.addChild(i.bg)),i.ava=new zc,i.ava.setSize(68,68),i.ava.setAvatar(n,0),i.ava.x=18,i.ava.y=17,i.addChild(i.ava),!0===i.vip&&(i.frameVip=new Phaser.Image(game,52,54,"vipSource","Ava_Nho"),i.frameVip.anchor.set(.5),i.frameVip.scale.set(1.01),i.addChild(i.frameVip)),!0===i.vip?(i.txtChat=new Qt(i.positionCreateRoom.chat_waitting_friend_chat_text_vip,e),i.txtChat.y=(i.bg.height-i.txtChat.height)/2,i.addChild(i.txtChat)):(i.txtChat=new Qt(i.positionCreateRoom.chat_waitting_friend_chat_text,e),i.txtChat.y=(i.bg.height-i.txtChat.height)/2,i.addChild(i.txtChat)),i.close=new _n(i.positionCreateRoom.chat_waitting_friend_chat_close,i.chooseClose,kI(kI(i))),i.addChild(i.close),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CI(e,t)}(t,Je),n=t,(i=[{key:"setIcon",value:function(e){this.create(this.txtChat.x+this.txtChat.width+10,20,"createroom",e)}},{key:"chooseClose",value:function(){this.event.close.dispatch()}}])&&SI(n.prototype,i),o&&SI(n,o),t}();function OI(e){return(OI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xI(e,t){return!t||"object"!==OI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TI(e,t,n){return(TI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=II(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function II(e){return(II=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AI(e,t){return(AI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xI(this,II(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AI(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){ht.instance().showLoading(),this.shopPlayList=null,this.isMaster=!1,this.betId=-1,this.betMoney=0,this.chatPlayer=null,this.idx=0,this.countItem=0,this.ktBuild=!0,this.idDelay=null,this.positionCreateRoom=oe.instance().positionCreateRoom,this.event={back:new Phaser.Signal,create_room:new Phaser.Signal},this.arrPlayList=[],this.bg=new Phaser.Button(game,0,0,"bg_create_room"),this.addChild(this.bg),this.parentPlayerList=new Phaser.Group(game,0,0,null),this.listPlayerlist=new Ia(game,this.parentPlayerList,new Phaser.Rectangle(0,0,game.width,game.height-395*oe.instance().scale),{direction:"y",padding:0,searchForClicks:!0}),this.listPlayerlist.events.changeIndex.add(this.changeIndex,this),this.parentPlayerList.x=0,this.parentPlayerList.y=240*oe.instance().scale,this.addChild(this.parentPlayerList),this.header=new ZT,this.header.setTitle(de.instance().getData("80")),this.header.event.back.add(this.chooseBack,this),this.addChild(this.header),this.bgSuggestPlayList=new Dn(this.positionCreateRoom.choose_playlist_itemplaylist_bg),this.addChild(this.bgSuggestPlayList),this.bgSuggestPlayList.x=game.width,this.playlistSuggest=new yI,this.playlistSuggest.setButtonBuy(200),this.playlistSuggest.y=this.positionCreateRoom.choose_playlist_itemplaylist_bg.y*oe.instance().scale,this.addChild(this.playlistSuggest),this.playlistSuggest.x=game.width,this.btnBuyMore=new qn(this.positionCreateRoom.choose_playlist_btn_muathemplaylist,de.instance().getData("81"),this.chooseBuyMore,this),this.btnBuyMore.y=game.height-120*oe.instance().scale,this.btnBuyMore.x=(game.width-this.btnBuyMore.width)/2,this.addChild(this.btnBuyMore),this.btnBuyMore.y=game.height,game.add.tween(this.btnBuyMore).to({y:game.height-120*oe.instance().scale},150,Phaser.Easing.Power1,!0,300)}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),ak.instance().event.buy_playlist.add(this.sendGetDataPlaylist,this),Ei.instance().showBanerChoosePlaylistCreateRoomScreen(),this.sendGetDataPlaylist()}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this),dV.instance().events.onExtensionResponse.remove(this.getData,this),ak.instance().event.buy_playlist.remove(this.sendGetDataPlaylist,this)}},{key:"sendGetDataPlaylist",value:function(){ht.instance().showLoading(),_t.instance().getPlaylistMe(!0),_t.instance().event.get_data_me_playlist_complete.add(this.getDataMePlaylistComplete,this)}},{key:"getDataMePlaylistComplete",value:function(e){if(_t.instance().event.get_data_me_playlist_complete.remove(this.getDataMePlaylistComplete,this),console.log(e),null!==e.suggestion_playlist){var t=e.suggestion_playlist;this.playlistSuggest.setData(t,0,!0),this.playlistSuggest.setButtonBuy(t.price)}else this.playlistSuggest.kill(),this.bgSuggestPlayList.kill(),this.parentPlayerList.y=180;this.arrPlayList=e.playlist,this.buildListPlaylist()}},{key:"getData",value:function(e){}},{key:"addChatRoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.removeChatRoom(),this.chatPlayer=new PI(e,t),""!==n&&this.chatPlayer.setIcon(n),this.chatPlayer.y=-102,this.chatPlayer.event.close.add(this.removeChatRoom,this),this.addChild(this.chatPlayer),game.add.tween(this.chatPlayer).to({y:1},300,Phaser.Easing.Power1,!0)}},{key:"removeChatRoom",value:function(){null!==this.chatPlayer&&(this.removeChild(this.chatPlayer),this.chatPlayer.destroy(),this.chatPlayer=null)}},{key:"setBetMoney",value:function(e){this.betMoney=e}},{key:"setBetId",value:function(e,t){this.betId=e,this.betMoney=t}},{key:"setIsMaster",value:function(e){this.isMaster=e,!1===this.isMaster?this.header.setHideBtnBack():(this.header.setShowBtnBack(),Qe.instance().event.backButton.add(this.chooseBack,this))}},{key:"buildListPlaylist",value:function(){game.add.tween(this.bgSuggestPlayList).to({x:this.positionCreateRoom.choose_playlist_itemplaylist_bg.x},150,Phaser.Easing.Power1,!0,300),game.add.tween(this.playlistSuggest).to({x:0},150,Phaser.Easing.Power1,!0,300),this.listPlayerlist.removeAll(),this.listPlayerlist.reset(),this.arrPlayList.sort(this.compareUserPlaylistMappingUpdate),this.removeDelayBuild(),this.idx=0,this.countItem=0,this.buildItemPage(),game.time.events.add(100,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"changeIndex",value:function(){var e=this.listPlayerlist.getIdx();this.countItem===e+1&&!1===this.ktBuild&&this.buildItemPage()}},{key:"removeDelayBuild",value:function(){null!==this.idDelay&&(game.time.events.remove(this.idDelay),this.idDelay=null)}},{key:"buildItemPage",value:function(){this.ktBuild=!0;for(var e=this.idx;e<this.arrPlayList.length;e++){var t=new yI;if(t.setData(this.arrPlayList[e],e),t.event.buy.add(this.chooseBuyPlaylist,this),t.event.select.add(this.chooseSelectPlaylist,this),t.setButtonChoose(),this.listPlayerlist.add(t),this.idx++,this.countItem++,this.countItem%8==0&&this.idx<this.arrPlayList.length){this.ktBuild=!1;break}this.idx===this.arrPlayList.length&&(this.ktBuild=!1)}}},{key:"chooseBuyPlaylist",value:function(){LogConsole.log("chooseBuyPlaylist")}},{key:"chooseSelectPlaylist",value:function(e){var t=e.id;LogConsole.log("chooseSelectPlaylist : "+t),this.isMaster?dV.instance().dataMySeft.diamond<this.betMoney?jC.instance().addDialogConfirnMoney(de.instance().getData("71")):(ht.instance().showLoading(),dV.instance().sendData(sE.ONLINE_MODE_ROOM_CREATE_REQUEST,bI.begin(t,this.betId))):dV.instance().dataMySeft.diamond<this.betMoney?jC.instance().addDialogConfirnMoney(de.instance().getData("69"),"chooseCanclePopupMoney"):(ht.instance().showLoading(),dV.instance().sendData(sE.ONLINE_MODE_ROOM_USER_SELECT_PLAYLIST_REQUEST,vI.begin(t)))}},{key:"chooseBuyMore",value:function(){LogConsole.log("chooseBuyMore"),jC.instance().addShop(0)}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeAllItem(),this.removeEvent(),this.removeDelayBuild(),this.listPlayerlist.removeAll(),this.listPlayerlist.destroy(),Ei.instance().hideBanner(),ht.instance().hideLoading(),TI(II(t.prototype),"destroy",this).call(this)}}])&&RI(n.prototype,i),o&&RI(n,o),t}();function DI(e){return(DI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MI(e,t){return!t||"object"!==DI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NI(e,t,n){return(NI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BI(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function BI(e){return(BI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jI(e,t){return(jI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var UI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),MI(this,BI(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jI(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){oe.instance().modeplay=oe.instance().MODEPLAY.createroom,this.event={back:new Phaser.Signal,create_room:new Phaser.Signal},this.chooseBetScreen=null,this.choosePlaylistScreen=null,this.addChooseBetScreen(),He.instance().logEvent(He.Party_online_mode_Creatroom),this.addEvent()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case sE.ONLINE_MODE_ROOM_CREATE_RESPONSE:}}},{key:"addChooseBetScreen",value:function(){this.removeChooseBetScreen(),this.chooseBetScreen=new cI,this.chooseBetScreen.event.choose_bet.add(this.chooseBetComplete,this),this.chooseBetScreen.event.back.add(this.chooseBack,this),this.addChild(this.chooseBetScreen),null!==this.choosePlaylistScreen?(Ch.instance().beginSwitch(this.choosePlaylistScreen,this.chooseBetScreen,!0),Ch.instance().event.tweenComplete.add(this.tweenChooseBetComplete,this)):this.chooseBetScreen.addEvent()}},{key:"chooseBetComplete",value:function(e,t){this.addChoosePlaylistScreen(e,t)}},{key:"removeChooseBetScreen",value:function(){null!==this.chooseBetScreen&&(this.removeChild(this.chooseBetScreen),this.chooseBetScreen.destroy(),this.chooseBetScreen=null)}},{key:"tweenChooseBetComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenChooseBetComplete,this),this.removeChoosePlaylistScreen(),null!==this.chooseBetScreen&&this.chooseBetScreen.addEvent()}},{key:"addChoosePlaylistScreen",value:function(e,t){LogConsole.log("addChoosePlaylistScreen"),this.removeChoosePlaylistScreen(),this.choosePlaylistScreen=new LI,this.choosePlaylistScreen.setBetId(e,t),this.choosePlaylistScreen.setIsMaster(!0),this.choosePlaylistScreen.event.create_room.add(this.callCreateRoom,this),this.choosePlaylistScreen.event.back.add(this.addChooseBetScreen,this),this.addChild(this.choosePlaylistScreen),null!==this.chooseBetScreen?(Ch.instance().beginSwitch(this.chooseBetScreen,this.choosePlaylistScreen,!1),Ch.instance().event.tweenComplete.add(this.tweenChoosePlayListComplete,this)):this.choosePlaylistScreen.addEvent()}},{key:"removeChoosePlaylistScreen",value:function(){null!==this.choosePlaylistScreen&&(this.removeChild(this.choosePlaylistScreen),this.choosePlaylistScreen.destroy(),this.choosePlaylistScreen=null)}},{key:"callCreateRoom",value:function(){dV.instance().sendData(sE.ONLINE_MODE_ROOM_CREATE_REQUEST,SendOnlineModeCRRoomCreate.begin(1,1))}},{key:"tweenChoosePlayListComplete",value:function(){this.removeChooseBetScreen(),Ch.instance().event.tweenComplete.remove(this.tweenChoosePlayListComplete,this),null!==this.choosePlaylistScreen&&this.choosePlaylistScreen.addEvent()}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),NI(BI(t.prototype),"destroy",this).call(this)}}])&&GI(n.prototype,i),o&&GI(n,o),t}();var FI=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user_id=0,this.user_name="",this.avatar="",this.gender="",this.experience_score=0,this.heart=0,this.diamond=0,this.ticket=0,this.weekly_high_score=0,this.all_time_high_score=0,this.level=0,this.online_mode_genre=0,this.online_mode_room_ready=!1,this.online_mode_loaded=0,this.is_playing_game=!1,this.isMaster=!1,this.score=0,this.diamond_change=0,this.exp_score=0,this.vip=!1};function ZI(e){return(ZI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function VI(e,t){return!t||"object"!==ZI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QI(e,t,n){return(QI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WI(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function WI(e){return(WI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qI(e,t){return(qI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var KI=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),VI(this,WI(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qI(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.positionCreateRoom=oe.instance().positionCreateRoom,this.spriteLoading=new Bt(this.positionCreateRoom.waitting_user_loading_ava),this.spriteLoading.anchor.x=.5,this.spriteLoading.anchor.y=.5,this.addChild(this.spriteLoading),this.spriteLoading.x=this.spriteLoading.width/2,this.spriteLoading.y=this.spriteLoading.height/2,LogConsole.log(this.spriteLoading.x),LogConsole.log(this.spriteLoading.y),this.timerToCountTime=null,this.timerEvent=null}},{key:"beginLoad",value:function(){this.removetimer(),this.timerToCountTime=this.game.time.create(!0),this.timerEvent=this.timerToCountTime.loop(50,this.onTimerToCountTime,this),this.timerToCountTime.start()}},{key:"onTimerToCountTime",value:function(){LogConsole.log("onTimerToCountTime"),this.spriteLoading.rotation+=.1}},{key:"removetimer",value:function(){null!==this.timerToCountTime&&(game.time.events.remove(this.timerEvent),this.timerEvent=null,this.timerToCountTime.stop(),this.timerToCountTime.destroy(),this.timerToCountTime=null)}},{key:"destroy",value:function(){this.removetimer(),QI(WI(t.prototype),"destroy",this).call(this)}}])&&HI(n.prototype,i),o&&HI(n,o),t}();function zI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var YI=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putInt("kick_user_id",e),t}}],(n=null)&&zI(t.prototype,n),i&&zI(t,i),e}();function XI(e){return(XI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JI(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $I(e,t){return!t||"object"!==XI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eA(e,t,n){return(eA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tA(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tA(e){return(tA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nA(e,t){return(nA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iA=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$I(this,tA(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nA(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={kick:new Phaser.Signal,click_avatar:new Phaser.Signal,choose_invite:new Phaser.Signal},this.data=new FI,this.ktEmpty=!0,this.idMaster=-1,this.idx=0,this.tween=null,this.ktShowKich=!1,this.ktShowLoading=!1,this.btnWin=null,this.ktDisConnect=!1,this.ktPlay=!1,this.iconChat=null,this.positionCreateRoom=oe.instance().positionCreateRoom,this.bg=new _n({x:0,y:0,nameAtlas:"createroom",nameSprite:"bg_header_playlist_suggest"},this.choosePlayer,this),this.bg.alpha=0,this.addChild(this.bg),this.txtName=new Qt(this.positionCreateRoom.waitting_user_txt_name,"Viet PV"),this.txtName.setTextBounds(0,0,155*oe.instance().scale,34*oe.instance().scale),this.addChild(this.txtName),this.btnKick=new qn(this.positionCreateRoom.waitting_user_btn_kick_trai,de.instance().getData("54"),this.chooseKick,this),this.btnKick.visible=!1,this.btnKick.x=130*oe.instance().scale,this.btnKick.y=(this.positionCreateRoom.waitting_user_btn_kick_trai.y-28)*oe.instance().scale,this.addChild(this.btnKick),this.btnProfile=new qn(this.positionCreateRoom.waitting_user_btn_kick_trai,de.instance().getData("55"),this.chooseProfile,this),this.btnProfile.visible=!1,this.btnProfile.x=130*oe.instance().scale,this.btnProfile.y=(this.positionCreateRoom.waitting_user_btn_kick_trai.y+28)*oe.instance().scale,this.addChild(this.btnProfile),this.btnKickPhai=new qn(this.positionCreateRoom.waitting_user_btn_kick_phai,de.instance().getData("54"),this.chooseKick,this),this.btnKickPhai.visible=!1,this.btnKickPhai.x=-78*oe.instance().scale,this.btnKickPhai.y=(this.positionCreateRoom.waitting_user_btn_kick_phai.y-28)*oe.instance().scale,this.addChild(this.btnKickPhai),this.btnProfilePhai=new qn(this.positionCreateRoom.waitting_user_btn_kick_phai,de.instance().getData("55"),this.chooseProfile,this),this.btnProfilePhai.visible=!1,this.btnProfilePhai.x=-78*oe.instance().scale,this.btnProfilePhai.y=(this.positionCreateRoom.waitting_user_btn_kick_phai.y+28)*oe.instance().scale,this.addChild(this.btnProfilePhai),this.ava=new zc,this.ava.setSize(150*oe.instance().scale,150*oe.instance().scale),this.ava.x=2.5*oe.instance().scale,this.ava.y=51.5*oe.instance().scale,this.addChild(this.ava),this.bg.width=this.ava.width,this.bg.height=this.ava.height,this.bg.x=this.ava.x,this.bg.y=this.ava.y,this.btnWaitting=new _n(this.positionCreateRoom.waitting_user_bg_player_waiting,this.chooseWaitting,this),this.btnWaitting.visible=!1,this.addChild(this.btnWaitting),this.khungAva=new Bt(this.positionCreateRoom.waitting_user_khungava),this.addChild(this.khungAva),this.frameAva=new Phaser.Image(game,77.5,131,"defaultSource","Ava_Vip"),this.frameAva.anchor.set(.5),this.frameAva.scale.set(1.015),this.frameAva.visible=!1,this.addChild(this.frameAva),this.laurel=new Phaser.Image(game,77.5,154,"defaultSource","Laurel"),this.laurel.anchor.set(.5),this.laurel.visible=!1,this.addChild(this.laurel),this.loading=new KI,this.loading.y=49*oe.instance().scale,this.loading.visible=!1,this.addChild(this.loading),this.txtSanSang=new Qt(this.positionCreateRoom.waitting_user_txt_sansang,""),this.txtSanSang.setTextBounds(0,0,155*oe.instance().scale,29*oe.instance().scale),this.addChild(this.txtSanSang),this.trueFailAnswer=new bd,this.trueFailAnswer.setSize(330*oe.instance().scale,330*oe.instance().scale),this.trueFailAnswer.x=-87*oe.instance().scale,this.trueFailAnswer.y=-35*oe.instance().scale,this.addChild(this.trueFailAnswer),this.addEvent()}},{key:"addEvent",value:function(){dV.instance().events.onPublicMessage.add(this.onPublicMessage,this)}},{key:"removeEvent",value:function(){dV.instance().events.onPublicMessage.remove(this.onPublicMessage,this)}},{key:"onPublicMessage",value:function(e){if(e.message===Me.CHAT_ONLINE_MODE){var t=e.sender,n=parseInt(t.name);e.data.containsKey("typeicon")&&this.data.user_id===n&&(this.removeIconChat(),this.iconChat=new pE(e.data.getUtfString("typeicon")),this.iconChat.event.call_remove.add(this.removeIconChat,this),this.iconChat.anchor.x=.5,this.iconChat.anchor.y=.5,this.iconChat.x=this.ava.x+this.ava.width/2,this.iconChat.y=this.ava.y+this.ava.height/2,game.add.tween(this.iconChat.scale).to({x:1.5,y:1.5},50,"Linear",!0),this.addChild(this.iconChat))}}},{key:"removeIconChat",value:function(){null!==this.iconChat&&(this.removeChild(this.iconChat),this.iconChat.destroy(),this.iconChat=null)}},{key:"setDisConnect",value:function(){this.ktDisConnect=!0}},{key:"setPlay",value:function(e){this.ktPlay=e,this.ktPlay&&(this.idx%2==0?this.onCompleteHideTween():this.onCompleteHideTweenPhai(),this.laurel.visible=!1)}},{key:"setDefaultUser",value:function(){this.txtName.changeStyle({fontSize:25}),this.txtSanSang.changeStyle({fontSize:21,font:"Gilroy",fill:"#7B7788"}),this.txtName.y=this.positionCreateRoom.waitting_user_txt_name.y*oe.instance().scale,this.txtSanSang.y=this.positionCreateRoom.waitting_user_txt_sansang.y*oe.instance().scale,!0===this.ktEmpty?this.laurel.visible=!1:!0===this.data.vip&&(this.laurel.visible=!0),this.removeButtonWin()}},{key:"setButtonWin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.removeButtonWin(),this.setGameOver(),!0===e?(this.btnWin=new qn(this.positionCreateRoom.result_btn_money_ava_result,"+"+(this.data.diamond_change+t)),this.btnWin.scale.x=1.3,this.btnWin.scale.y=1.3,this.btnWinExp=new qn(this.positionCreateRoom.result_btn_exp_ava_result_win,"+"+this.data.exp_score),this.btnWinExp.scale.x=1.3,this.btnWinExp.scale.y=1.3,this.addChild(this.btnWinExp),!0===this.data.vip&&(this.laurel.visible=!0)):(this.btnWin=new qn(this.positionCreateRoom.result_btn_exp_ava_result_lose,"+"+this.data.exp_score),this.btnWin.scale.x=1.3,this.btnWin.scale.y=1.3),this.addChild(this.btnWin),this.txtName.y=-30*oe.instance().scale,this.txtSanSang.y=12*oe.instance().scale}},{key:"removeButtonWin",value:function(){null!==this.btnWin&&(this.removeChild(this.btnWin),this.btnWin.destroy(),this.btnWin=null),null!==this.btnWinExp&&this.removeChild(this.btnWinExp)}},{key:"setScore",value:function(e){this.setTextSanSang(e)}},{key:"setTrueAnswer",value:function(){this.trueFailAnswer.setTrueAnswer()}},{key:"setFailtAnswer",value:function(){this.trueFailAnswer.setFailtAnswer()}},{key:"hideKhungAvatar",value:function(){this.khungAva.visible=!1}},{key:"showKhungAvatar",value:function(){this.khungAva.visible=!1}},{key:"setLoading",value:function(e){!1===this.ktShowLoading&&this.showLoading(),100===e&&(this.setTextSanSang(de.instance().getData("57")),this.hideLoading())}},{key:"showLoading",value:function(){!1===this.ktShowLoading&&(LogConsole.log("showLoading----------"),this.ktShowLoading=!0,this.loading.visible=!0,this.loading.beginLoad(),this.hideKhungAvatar(),this.setTextSanSang(de.instance().getData("58")+"..."))}},{key:"hideLoading",value:function(){LogConsole.log("hideLoading----------"),this.ktShowLoading=!1,this.loading.visible=!1,this.loading.removetimer()}},{key:"setMaster",value:function(e){this.idMaster=e,this.setTextMaster()}},{key:"setData",value:function(e,t){this.data=Object.assign({},this.data,e),this.ktEmpty=!1,this.ava.visible=!0,this.khungAva.visible=!0,this.txtName.text=this.data.user_name,this.ava.setAvatar(this.data.avatar,t),!0===this.data.isMaster?this.setTextSanSang(""):this.data.online_mode_room_ready?this.setTextSanSang(de.instance().getData("57")):this.setTextSanSang(de.instance().getData("59")),this.btnWaitting.visible=!1,!0===this.data.vip&&(this.frameAva.visible=!0,this.laurel.visible=!0)}},{key:"setGameOver",value:function(){this.txtName.changeStyle({fontSize:33}),this.txtSanSang.changeStyle({fontSize:32,font:"GilroyBold",fill:"#ffffff"})}},{key:"setUserPlayGame",value:function(){this.txtSanSang.changeStyle({fontSize:32,font:"GilroyBold",fill:"#ffffff"}),this.txtSanSang.y=(this.positionCreateRoom.waitting_user_txt_sansang.y-4)*oe.instance().scale}},{key:"setDataQuickPlay",value:function(e,t){this.data=Object.assign({},this.data,e),this.ktEmpty=!1,this.ava.visible=!0,this.khungAva.visible=!0,this.txtName.text=this.data.user_name,this.ava.setAvatar(this.data.avatar,t),this.btnWaitting.visible=!1,this.setTextSanSang(""),!0===this.data.vip&&(this.frameAva.visible=!0,this.laurel.visible=!0)}},{key:"setTextMaster",value:function(){!0===this.data.isMaster?this.setTextSanSang(""):this.data.online_mode_room_ready?this.setTextSanSang(de.instance().getData("57")):this.setTextSanSang(de.instance().getData("59"))}},{key:"setCurrentData",value:function(e){this.data=Object.assign({},this.data,e)}},{key:"getData",value:function(){return this.data}},{key:"setEmpty",value:function(){this.ktEmpty=!0,this.btnWaitting.visible=!0,this.ava.visible=!1,this.txtName.text="",this.btnKick.visible=!1,this.btnKick.inputEnabled=!1,this.btnKickPhai.visible=!1,this.btnKickPhai.inputEnabled=!1,this.btnProfile.visible=!1,this.btnProfile.inputEnabled=!1,this.btnProfilePhai.visible=!1,this.btnProfilePhai.inputEnabled=!1,this.ktDisConnect=!1,this.ktPlay=!1,this.ktShowKich=!1,this.ktShowLoading=!1,this.setTextSanSang(de.instance().getData("60")),this.hideKhungAvatar(),this.hideLoading(),this.idx%2==0?this.onCompleteHideTween():this.onCompleteHideTweenPhai(),this.frameAva.visible=!1,this.laurel.visible=!1}},{key:"setTextSanSang",value:function(e){this.txtSanSang.text=e}},{key:"setIdx",value:function(e){this.idx=e}},{key:"getIdx",value:function(){return this.idx}},{key:"choosePlayer",value:function(){LogConsole.log("choosePlayer : "+this.ktPlay),!1===this.ktPlay&&(dV.instance().dataMySeft.user_id===this.data.user_id?jC.instance().addUserProfile(this.data.user_id):(console.log("SocketController.instance().dataMySeft.user_id : "+dV.instance().dataMySeft.user_id),console.log("this.idMaster : "+this.idMaster),dV.instance().dataMySeft.user_id===this.idMaster?(this.ktShowKich=!this.ktShowKich,this.event.click_avatar.dispatch(this.idx),this.ktShowKich?this.idx%2==0?this.setShowKichTween():this.setShowKichTweenPhai():this.idx%2==0?this.setHideKichTween():this.setHideKichTweenPhai()):jC.instance().addUserProfile(this.data.user_id)))}},{key:"setCheckHideKichTween",value:function(){!0===this.ktShowKich&&(this.idx%2==0?this.setHideKichTween():this.setHideKichTweenPhai())}},{key:"setShowKichTween",value:function(){this.removeTween();var e;this.btnKick.x=57*oe.instance().scale,this.btnKick.visible=!0,this.btnKick.inputEnabled=!1,e=130*oe.instance().scale,this.ktShowKich=!0,this.btnProfile.x=57*oe.instance().scale,this.btnProfile.visible=!0,this.btnProfile.inputEnabled=!1,this.tween=game.add.tween(this.btnKick).to({x:e},200,Phaser.Easing.Power1,!0),this.tween=game.add.tween(this.btnProfile).to({x:e},200,Phaser.Easing.Power1,!0),this.tween.onComplete.add(this.onCompleteShowTween,this)}},{key:"setHideKichTween",value:function(){this.removeTween();var e;this.btnKick.x=130*oe.instance().scale,this.btnKick.visible=!0,this.btnKick.inputEnabled=!1,this.btnProfile.x=130*oe.instance().scale,this.btnProfile.visible=!0,this.btnProfile.inputEnabled=!1,e=57*oe.instance().scale,this.ktShowKich=!1,this.tween=game.add.tween(this.btnKick).to({x:e},200,Phaser.Easing.Power1,!0),this.tween=game.add.tween(this.btnProfile).to({x:e},200,Phaser.Easing.Power1,!0),this.tween.onComplete.add(this.onCompleteHideTween,this)}},{key:"setShowKichTweenPhai",value:function(){this.removeTween();var e;this.btnKickPhai.x=2*oe.instance().scale,this.btnKickPhai.visible=!0,this.btnKickPhai.inputEnabled=!1,this.btnProfilePhai.x=2*oe.instance().scale,this.btnProfilePhai.visible=!0,this.btnProfilePhai.inputEnabled=!1,e=-78*oe.instance().scale,this.ktShowKich=!0,this.tween=game.add.tween(this.btnKickPhai).to({x:e},200,Phaser.Easing.Power1,!0),this.tween=game.add.tween(this.btnProfilePhai).to({x:e},200,Phaser.Easing.Power1,!0),this.tween.onComplete.add(this.onCompleteShowTweenPhai,this)}},{key:"setHideKichTweenPhai",value:function(){this.removeTween();this.btnKickPhai.x=-78*oe.instance().scale,this.btnKickPhai.visible=!0,this.btnKickPhai.inputEnabled=!1,this.btnProfilePhai.x=-78*oe.instance().scale,this.btnProfilePhai.visible=!0,this.btnProfilePhai.inputEnabled=!1,this.ktShowKich=!1,this.tween=game.add.tween(this.btnKickPhai).to({x:2},200,Phaser.Easing.Power1,!0),this.tween=game.add.tween(this.btnProfilePhai).to({x:2},200,Phaser.Easing.Power1,!0),this.tween.onComplete.add(this.onCompleteHideTweenPhai,this)}},{key:"onCompleteShowTweenPhai",value:function(){this.btnKickPhai.visible=!0,this.btnKickPhai.inputEnabled=!0,this.btnProfilePhai.visible=!0,this.btnProfilePhai.inputEnabled=!0}},{key:"onCompleteHideTweenPhai",value:function(){this.ktShowKich=!1,this.btnKickPhai.visible=!1,this.btnKickPhai.inputEnabled=!1,this.btnProfilePhai.visible=!1,this.btnProfilePhai.inputEnabled=!1}},{key:"onCompleteShowTween",value:function(){this.btnKick.visible=!0,this.btnKick.inputEnabled=!0,this.btnProfile.visible=!0,this.btnProfile.inputEnabled=!0}},{key:"onCompleteHideTween",value:function(){this.ktShowKich=!1,this.btnKick.visible=!1,this.btnKick.inputEnabled=!1,this.btnProfile.visible=!1,this.btnProfile.inputEnabled=!1}},{key:"removeTween",value:function(){null!==this.tween&&(this.tween.stop(),game.tweens.remove(this.tween),this.tween=null)}},{key:"chooseWaitting",value:function(){this.event.choose_invite.dispatch()}},{key:"chooseKick",value:function(){LogConsole.log("chooseKick"),dV.instance().dataMySeft.user_id===this.idMaster&&(this.idx%2==0?this.onCompleteHideTween():this.onCompleteHideTweenPhai(),this.btnKick.inputEnabled=!1,this.btnKickPhai.inputEnabled=!1,dV.instance().sendData(sE.ONLINE_MODE_ROOM_KICK_USER_REQUEST,YI.begin(this.data.user_id)))}},{key:"chooseProfile",value:function(){dV.instance().dataMySeft.user_id===this.idMaster&&(this.idx%2==0?this.onCompleteHideTween():this.onCompleteHideTweenPhai(),jC.instance().addUserProfile(this.data.user_id))}},{key:"destroy",value:function(){this.removeEvent(),eA(tA(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.bg.width}},{key:"height",get:function(){return this.bg.height}}])&&JI(n.prototype,i),o&&JI(n,o),t}();var oA=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file_path="",this.question_type="",this.arrAnser=[],this.correct_answer=0,this.playerChoose={idx:0,correct_answer:!1,time:0},this.song=new v_,this.user_choose="",this.playlist_id=0};function aA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var sA=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),rl.instance().event.loadComplete.add(this.loadSourceComplete,this)}var t,n,i;return t=e,(n=[{key:"loadSourceComplete",value:function(){dV.instance().sendLoading(100)}},{key:"beginLoad",value:function(e){this.dataSource=e;for(var t=[],n=0;n<e.length;n++)"audio"==e[n].type&&t.push(e[n].url);rl.instance().loadSoundArray(t)}},{key:"loadStart",value:function(){LogConsole.log("loadStart----------")}},{key:"onFileComplete",value:function(e,t,n,i,o){LogConsole.log("progress "+e),LogConsole.log("key "+t),LogConsole.log("error "+n),LogConsole.log("loadedFileCount "+i),LogConsole.log("totalFileCount "+o),dV.instance().sendLoading(e)}},{key:"loadComplete",value:function(){LogConsole.log("loadComplete---------- : ")}},{key:"update",value:function(){}}])&&aA(t.prototype,n),i&&aA(t,i),e}();function rA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var lA=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){for(var t=[],n=[],i=e.getSFSArray(b_.questions),o=0;o<i.size();o++){var a=i.getSFSObject(o),s=new oA;if(s.file_path=a.getUtfString(b_.file_path),s.question_type=a.getUtfString(b_.question_type),s.correct_answer=a.getInt(b_.correct_answer),s.arrAnser.push(a.getUtfString(b_.answer1)),s.arrAnser.push(a.getUtfString(b_.answer2)),s.arrAnser.push(a.getUtfString(b_.answer3)),s.arrAnser.push(a.getUtfString(b_.answer4)),a.containsKey(b_.user)&&!a.isNull(b_.user)){var r=a.getSFSObject(b_.user);s.user_choose=r?r.getUtfString(b_.user_name):""}else s.user_choose="";var l=a.getSFSObject(b_.song);if(s.song=S_.getSongDetail(l),s.song.listenLink=s.file_path,a.containsKey("playlist"))if(a.isNull("playlist"));else{var c=a.getSFSObject("playlist");c.containsKey("playlist_name")&&(s.song.playlist_name=c.getUtfString("playlist_name")),c.containsKey("playlist_id")&&(s.playlist_id=c.getInt("playlist_id"))}t.push(s);var h={type:"audio"};h.url=s.file_path,n.push(h)}return(new sA).beginLoad(n),t}}],(n=null)&&rA(t.prototype,n),i&&rA(t,i),e}();function cA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var hA=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putUtfString("envitee_id",e+""),t}}],(n=null)&&cA(t.prototype,n),i&&cA(t,i),e}();function uA(e){return(uA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fA(e,t){return!t||"object"!==uA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pA(e){return(pA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gA(e,t){return(gA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yA=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=fA(this,pA(t).call(this,game,null))).positionOnlineMode=oe.instance().positionCreateRoom,i.bg=new Bt(i.positionOnlineMode.friend_detail_room_bg),i.addChild(i.bg),i.idPhong=new Qt(i.positionOnlineMode.friend_detail_room_id,de.instance().getData("48")+": "+e),i.idPhong.addColor("#ffa33a",de.instance().getData("48").length+1),i.addChild(i.idPhong),i.iconCount=new Bt(i.positionOnlineMode.friend_detail_room_icon_count),i.addChild(i.iconCount),i.countPlayer=new Qt(i.positionOnlineMode.friend_detail_room_count_player,"3/4"),i.updateCountPlayer(n),i.addChild(i.countPlayer),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gA(e,t)}(t,Je),n=t,(i=[{key:"updateCountPlayer",value:function(e){this.countPlayer.text=e+"/4"}}])&&dA(n.prototype,i),o&&dA(n,o),t}();function mA(e){return(mA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wA(e,t,n){return(wA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bA(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function bA(e){return(bA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _A(e,t){return(_A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var EA=function(e){function t(e,n){var i,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=!(a=bA(t).call(this,game,null))||"object"!==mA(a)&&"function"!=typeof a?SA(o):a,ht.instance().showLoading(),i.event={back:new Phaser.Signal,random:new Phaser.Signal},i.arrFriends=[],i.ktClick=!1,i.currentSearch="",i.positionCreateRoom=oe.instance().positionCreateRoom,i.bg=new Phaser.Button(game,0,0,"bg_create_room"),i.addChild(i.bg);var s=new Phaser.Group(game,0,0,null);return i.listFriends=new Ia(game,s,new Phaser.Rectangle(0,0,game.width,game.height-380*oe.instance().scale),{direction:"y",padding:0,searchForClicks:!0}),s.x=0,s.y=226*oe.instance().scale,i.addChild(s),i.header=new ZT,i.header.setTitle(de.instance().getData("93")),i.header.setHideBtnBack(),i.header.setSearchButton(),i.header.event.back.add(i.chooseBack,SA(SA(i))),i.header.event.search.add(i.chooseSearch,SA(SA(i))),i.addChild(i.header),i.detailRoom=new yA(e,n),i.detailRoom.y=100,i.addChild(i.detailRoom),i.txtSearch=new Qt(i.positionCreateRoom.listfriend_txt_current_search,de.instance().getData("94")),i.txtSearch.setTextBounds(0,0,game.width-120*oe.instance().scale,100*oe.instance().scale),i.addChild(i.txtSearch),i.btnCloseTextSearch=new _n(i.positionCreateRoom.listfriend_btn_close_search,i.chooseCloseTextSearch,SA(SA(i))),i.addChild(i.btnCloseTextSearch),i.btnCloseTextSearch.visible=!1,i.btnRandom=new qn(i.positionCreateRoom.listfriend_btn_random,de.instance().getData("95"),i.chooseRandom,SA(SA(i))),i.addChild(i.btnRandom),i.btnRandom.y=game.height,game.add.tween(i.btnRandom).to({y:game.height-115*oe.instance().scale},150,Phaser.Easing.Power1,!0,300),i.btnXong=new qn(i.positionCreateRoom.listfriend_btnXong,de.instance().getData("96"),i.chooseXong,SA(SA(i))),i.addChild(i.btnXong),i.btnXong.y=game.height,game.add.tween(i.btnXong).to({y:game.height-115*oe.instance().scale},150,Phaser.Easing.Power1,!0,300),i.addEvent(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_A(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){}},{key:"updateCountPlayer",value:function(e){this.detailRoom.updateCountPlayer(e)}},{key:"addEvent",value:function(){!0===ak.instance().ktLoadFriend?(this.arrFriends=ak.instance().listFriend.getFriends(),this.buildListFriends()):(ak.instance().event.load_list_friend_complete.add(this.loadListFriendComplete,this),ak.instance().sendGetFriendsList())}},{key:"loadListFriendComplete",value:function(){this.arrFriends=ak.instance().listFriend.getFriends(),this.buildListFriends()}},{key:"removeEvent",value:function(){ak.instance().event.load_list_friend_complete.remove(this.loadListFriendComplete,this)}},{key:"chooseCloseTextSearch",value:function(){this.txtSearch.text=de.instance().getData("94"),this.currentSearch="",this.btnCloseTextSearch.visible=!1,this.buildListFriends()}},{key:"buildListFriends",value:function(){this.listFriends.removeAll(),this.listFriends.reset();for(var e=0;e<this.arrFriends.length;e++){var t=this.arrFriends[e];if(""===this.currentSearch||-1!==this.xoa_dau(t.user_name).toUpperCase().indexOf(this.xoa_dau(this.currentSearch).toUpperCase())){var n=new tm;n.setData(t,e),n.event.invite.add(this.chooseInvite,this),this.listFriends.add(n)}}game.time.events.add(1e3,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"chooseInvite",value:function(e){dV.instance().sendData(sE.ONLINE_MODE_ROOM_INVITE_REQUEST,hA.begin(e.id))}},{key:"chooseSearch",value:function(){LogConsole.log("chooseSearch");var e={maxLength:"",showTransparent:!0,placeholder:de.instance().getData("97"),isSearch:!0};Ir.instance().show(e),Ir.instance().event.change.add(this.changeKeyBoard,this),Ir.instance().event.hideKeyboard.add(this.hideKeyboard,this),Ir.instance().event.enter.add(this.onSubmit,this),Ir.instance().event.submit.add(this.onSubmit,this),Ir.instance().event.cancle.add(this.onCancel,this)}},{key:"changeKeyBoard",value:function(){var e=Ir.instance().getValue();e===this.currentSearch||(this.currentSearch=e,""===this.currentSearch?this.chooseCloseTextSearch():(this.btnCloseTextSearch.visible=!0,this.txtSearch.text=this.currentSearch,this.buildListFriends()))}},{key:"onSubmit",value:function(){this.changeKeyBoard(),this.onCancel()}},{key:"hideKeyboard",value:function(){Ir.instance().hide()}},{key:"onCancel",value:function(){Ir.instance().event.change.remove(this.changeKeyBoard,this),Ir.instance().event.hideKeyboard.remove(this.hideKeyboard,this),Ir.instance().event.enter.remove(this.onSubmit,this),Ir.instance().event.submit.remove(this.onSubmit,this),Ir.instance().event.cancle.remove(this.onCancel,this),Ir.instance().hide()}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"chooseXong",value:function(){!1===this.ktClick&&(this.ktClick=!0,this.chooseBack())}},{key:"chooseRandom",value:function(){LogConsole.log("chooseRandom"),!1===this.ktClick&&(this.ktClick=!0,this.event.random.dispatch())}},{key:"destroy",value:function(){this.onCancel(),this.listFriends.removeAll(),this.listFriends.destroy(),this.removeEvent(),this.removeAllItem(),wA(bA(t.prototype),"destroy",this).call(this)}}])&&vA(n.prototype,i),o&&vA(n,o),t}();function CA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var kA=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){LogConsole.log(e.getDump());var t=[],n=e.getSFSArray(qa.users);if(null!==n)for(var i=0;i<n.size();i++){var o=n.getSFSObject(i),a=new pg;a.avatar=o.getUtfString(qa.avatar),a.is_online=!0,a.id=o.getInt(qa.id),a.user_name=o.getUtfString(qa.user_name),a.vip=o.getBool(qa.vip),t.push(a)}return t}}],(n=null)&&CA(t.prototype,n),i&&CA(t,i),e}();function PA(e){return(PA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function RA(e,t,n){return(RA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xA(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function xA(e){return(xA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TA(e,t){return(TA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function IA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var AA=function(e){function t(e,n){var i,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=!(a=xA(t).call(this,game,null))||"object"!==PA(a)&&"function"!=typeof a?IA(o):a,ht.instance().showLoading(),i.event={back:new Phaser.Signal,changeToBanBe:new Phaser.Signal},i.ktClick=!0,i.currentSearch="",i.positionCreateRoom=oe.instance().positionCreateRoom,i.bg=new Phaser.Button(game,0,0,"bg_create_room"),i.addChild(i.bg);var s=new Phaser.Group(game,0,0,null);return i.listFriends=new Ia(game,s,new Phaser.Rectangle(0,0,game.width,game.height-300*oe.instance().scale),{direction:"y",padding:0,searchForClicks:!0}),s.x=0,s.y=176*oe.instance().scale,i.addChild(s),i.header=new ZT,i.header.setHideBtnBack(),i.header.setTitle(de.instance().getData("98")),i.header.event.back.add(i.chooseBack,IA(IA(i))),i.addChild(i.header),i.detailRoom=new yA(e,n),i.detailRoom.y=100,i.addChild(i.detailRoom),i.btnRandom=new qn(i.positionCreateRoom.listfriend_btn_random,de.instance().getData("99"),i.chooseBanBe,IA(IA(i))),i.addChild(i.btnRandom),i.btnRandom.y=game.height,game.add.tween(i.btnRandom).to({y:game.height-115*oe.instance().scale},150,Phaser.Easing.Power1,!0,300),i.btnXong=new qn(i.positionCreateRoom.listfriend_btnXong,de.instance().getData("96"),i.chooseXong,IA(IA(i))),i.addChild(i.btnXong),i.btnXong.y=game.height,game.add.tween(i.btnXong).to({y:game.height-115*oe.instance().scale},150,Phaser.Easing.Power1,!0,300),i.addEvent(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TA(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){}},{key:"updateCountPlayer",value:function(e){this.detailRoom.updateCountPlayer(e)}},{key:"chooseBanBe",value:function(){!1===this.ktClick&&(this.ktClick=!0,this.event.changeToBanBe.dispatch())}},{key:"chooseXong",value:function(){!1===this.ktClick&&(this.ktClick=!0,this.chooseBack())}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().sendData(sE.ONLINE_MODE_ROOM_ONLINE_USERS_LIST_REQUEST,null),Ei.instance().showBanerInviteOtherUserWaitingScreen()}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case sE.ONLINE_MODE_ROOM_ONLINE_USERS_LIST_RESPONSE:this.arrPlayer=kA.begin(e.params),this.buildListPlayerRandom()}}},{key:"buildListPlayerRandom",value:function(){this.listFriends.removeAll(),this.listFriends.reset();for(var e=0;e<this.arrPlayer.length;e++){var t=new tm;t.setData(this.arrPlayer[e],e),t.event.invite.add(this.chooseInvite,this),this.listFriends.add(t)}game.time.events.add(1e3,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"chooseInvite",value:function(e){console.log("dataFriend-----------"),console.log(e),dV.instance().sendData(sE.ONLINE_MODE_ROOM_INVITE_REQUEST,hA.begin(e.id))}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),this.listFriends.removeAll(),this.listFriends.destroy(),Ei.instance().hideBanner(),RA(xA(t.prototype),"destroy",this).call(this)}}])&&OA(n.prototype,i),o&&OA(n,o),t}();function LA(e){return(LA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function GA(e,t){return!t||"object"!==LA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MA(e,t,n){return(MA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NA(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function NA(e){return(NA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BA(e,t){return(BA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jA=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=GA(this,NA(t).call(this,game,null))).idRoom=e,i.count=n,i.event={back:new Phaser.Signal},i.layoutContent=game.add.group(),i.addChild(i.layoutContent),i.listFriends=null,i.listRandom=null,i.chatPlayer=null,i.addEvent(),i.addListFriends(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BA(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onUserEnterRoom.add(this.userEnterRoom,this),dV.instance().events.onUserExitRoom.add(this.userExitRoom,this)}},{key:"removeEvent",value:function(){dV.instance().events.onUserEnterRoom.remove(this.userEnterRoom,this),dV.instance().events.onUserExitRoom.remove(this.userExitRoom,this)}},{key:"userEnterRoom",value:function(){this.count++,this.updateCountPlayer()}},{key:"userExitRoom",value:function(){this.count--,this.updateCountPlayer()}},{key:"updateCountPlayer",value:function(){null!==this.listFriends&&this.listFriends.updateCountPlayer(this.count),null!==this.listRandom&&this.listRandom.updateCountPlayer(this.count)}},{key:"addListFriends",value:function(){this.removeListFriends(),this.listFriends=new EA(this.idRoom,this.count),this.listFriends.event.back.add(this.chooseBack,this),this.listFriends.event.random.add(this.addListRandom,this),this.layoutContent.addChild(this.listFriends),null!==this.listRandom?(Ch.instance().beginSwitch(this.listRandom,this.listFriends,!1),Ch.instance().event.tweenComplete.add(this.tweenListRandomComplete,this)):(Ch.instance().beginSwitch(null,this.listFriends,!1),Ch.instance().event.tweenComplete.add(this.tweenListRandomComplete,this))}},{key:"tweenListRandomComplete",value:function(){this.listFriends.ktClick=!1,Ch.instance().event.tweenComplete.remove(this.tweenListRandomComplete,this),this.removeListRandom()}},{key:"removeListFriends",value:function(){null!==this.listFriends&&(this.layoutContent.removeChild(this.listFriends),this.listFriends.destroy(),this.listFriends=null)}},{key:"addListRandom",value:function(){this.removeListRandom(),this.listRandom=new AA(this.idRoom,this.count),this.listRandom.event.back.add(this.chooseBack,this),this.listRandom.event.changeToBanBe.add(this.addListFriends,this),this.layoutContent.addChild(this.listRandom),null!==this.listFriends?(Ch.instance().beginSwitch(this.listFriends,this.listRandom,!1),Ch.instance().event.tweenComplete.add(this.tweenListFriendsComplete,this)):this.listRandom.ktClick=!0}},{key:"tweenListFriendsComplete",value:function(){this.listRandom.ktClick=!1,Ch.instance().event.tweenComplete.remove(this.tweenListFriendsComplete,this),this.removeListFriends()}},{key:"removeListRandom",value:function(){null!==this.listRandom&&(this.layoutContent.removeChild(this.listRandom),this.listRandom.destroy(),this.listRandom=null)}},{key:"addChatRoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.removeChatRoom(),this.chatPlayer=new PI(e,t,i),""!==n&&this.chatPlayer.setIcon(n),this.chatPlayer.y=-102,this.chatPlayer.event.close.add(this.removeChatRoom,this),this.addChild(this.chatPlayer),game.add.tween(this.chatPlayer).to({y:1},300,Phaser.Easing.Power1,!0)}},{key:"removeChatRoom",value:function(){null!==this.chatPlayer&&(this.removeChild(this.chatPlayer),this.chatPlayer.destroy(),this.chatPlayer=null)}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){ht.instance().hideLoading(),this.removeEvent(),MA(NA(t.prototype),"destroy",this).call(this)}}])&&DA(n.prototype,i),o&&DA(n,o),t}();function UA(e){return(UA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ZA(e,t){return!t||"object"!==UA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HA(e){return(HA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VA(e,t){return(VA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var QA=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ZA(this,HA(t).call(this,game,null))).chart=null,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VA(e,t)}(t,Je),n=t,(i=[{key:"addChart",value:function(e){this.removeChart();var t={x:0,y:0,nameAtlas:"createroom",nameSprite:e?"Light_You":"Light_Other"};this.chart=new Bt(t),this.addChild(this.chart)}},{key:"removeChart",value:function(){null!==this.chart&&(this.removeChild(this.chart),this.chart.destroy(),this.chart=null)}},{key:"height",set:function(e){this.chart.height=e}}])&&FA(n.prototype,i),o&&FA(n,o),t}();function WA(e){return(WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qA(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function KA(e,t){return!t||"object"!==WA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zA(e,t,n){return(zA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YA(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function YA(e){return(YA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XA(e,t){return(XA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var JA=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KA(this,YA(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XA(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.timeCount=1e4,this.eventLoadingComplete=new Phaser.Signal,this.positionOnlineMode=oe.instance().positionCreateRoom,this.loaderPerc=0,this.beginLoad=!1,this.maxLoading=100,this.constLoading=.5,this.bg=new Bt(this.positionOnlineMode.bg_loading_answer_me),this.addChild(this.bg),this.bgLoading=new Bt(this.positionOnlineMode.bg_sansang_answer_me),this.addChild(this.bgLoading),this.maskLoading=new Phaser.Graphics(game,this.bgLoading.width/2,this.bgLoading.height/2),this.maskLoading.anchor.setTo(.5,.5),this.addChild(this.maskLoading),this.bgLoading.mask=this.maskLoading,this.drawMask(),this.timerToCountTime=this.game.time.create(!0),this.timerToCountTime.loop(50,this.onTimerToCountTime,this)}},{key:"addEventLoadingComplete",value:function(e,t){this.eventLoadingComplete.add(e,t)}},{key:"removeEventLoadingComplete",value:function(e,t){this.eventLoadingComplete.remove(e,t)}},{key:"dispatchEventLoadingComplete",value:function(){this.timerToCountTime.destroy(),this.eventLoadingComplete.dispatch()}},{key:"onTimerToCountTime",value:function(){this.drawMask()}},{key:"drawMask",value:function(){this.beginLoad&&this.loaderPerc<100&&(this.loaderPerc+=this.constLoading,this.loaderPerc>this.maxLoading&&(this.loaderPerc=this.maxLoading,this.loaderPerc),this.maskLoading.clear(),this.maskLoading.beginFill(16777215),this.maskLoading.rotation+=.1,100===this.loaderPerc?this.maskLoading.arc(0,0,this.bgLoading.width/2+4*oe.instance().scale,this.game.math.degToRad(0),this.game.math.degToRad(360),!0):this.maskLoading.arc(0,0,this.bgLoading.width/2+4*oe.instance().scale,this.game.math.degToRad(270),this.game.math.degToRad(270-3.6*this.loaderPerc),!0),this.maskLoading.endFill())}},{key:"setMaxLoading",value:function(e){this.maxLoading=e}},{key:"setBeginLoad",value:function(){this.timerToCountTime.start(),this.beginLoad=!0}},{key:"destroy",value:function(){this.maskLoading.clear(),this.timerToCountTime.stop(),this.timerToCountTime.destroy(),zA(YA(t.prototype),"destroy",this).call(this)}}])&&qA(n.prototype,i),o&&qA(n,o),t}();function $A(e){return($A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tL(e,t){return!t||"object"!==$A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nL(e){return(nL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iL(e,t){return(iL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tL(this,nL(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iL(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.positionOnlineMode=oe.instance().positionCreateRoom,this.bg=new Bt(this.positionOnlineMode.bg_me_answer1),this.bg.anchor.setTo(.5,.5),this.bg.x=this.bg.width/2,this.bg.y=this.bg.height/2,this.addChild(this.bg),this.bgWin=new Bt(this.positionOnlineMode.bg_win_me_answer1),this.bgWin.anchor.setTo(.5,.5),this.bgWin.x=this.bgWin.width/2,this.bgWin.y=this.bgWin.height/2,this.addChild(this.bgWin),this.loading=new JA,this.loading.visible=!1,this.addChild(this.loading),this.fail=new Bt(this.positionOnlineMode.bg_me_fail),this.fail.x=(this.bgWin.width-this.fail.width)/2,this.fail.y=(this.bgWin.height-this.fail.height)/2,this.addChild(this.fail),this.txtTime=new Qt(this.positionOnlineMode.bg_me_txt_time,""),this.addChild(this.txtTime),this.setDefault()}},{key:"setBeginLoad",value:function(){this.loading.visible=!0,this.loading.setBeginLoad()}},{key:"setDefault",value:function(){this.bg.visible=!0,this.bgWin.visible=!1,this.fail.visible=!1,this.txtTime.text=""}},{key:"setData",value:function(e){this.bg.visible=!1,this.bgWin.visible=!0,this.loading.visible=!1,e.correct_answer?(this.txtTime.text=this.financial(e.time),this.txtTime.x=(this.bgWin.width-this.txtTime.width)/2,this.txtTime.y=(this.bgWin.height-this.txtTime.height)/2+3*oe.instance().scale):this.fail.visible=!0}},{key:"alpha",set:function(e){if(this.children)for(var t=0;t<this.children.length;t++)this.children[t].alpha=e}}])&&eL(n.prototype,i),o&&eL(n,o),t}();function aL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var sL=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"ONLINE_MODE_GENRES_REQUEST",get:function(){return"ONLINE_MODE_GENRES_REQUEST"}},{key:"ONLINE_MODE_GENRES_RESPONSE",get:function(){return"ONLINE_MODE_GENRES_RESPONSE"}},{key:"ONLINE_MODE_BETS_REQUEST",get:function(){return"ONLINE_MODE_BETS_REQUEST"}},{key:"ONLINE_MODE_BETS_RESPONSE",get:function(){return"ONLINE_MODE_BETS_RESPONSE"}},{key:"ONLINE_MODE_PLAYLISTS_REQUEST",get:function(){return"ONLINE_MODE_PLAYLISTS_REQUEST"}},{key:"ONLINE_MODE_PLAYLISTS_RESPONSE",get:function(){return"ONLINE_MODE_PLAYLISTS_LIST_RESPONSE"}},{key:"ONLINE_MODE_FIND_GAME_REQUEST",get:function(){return"ONLINE_MODE_FIND_GAME_REQUEST"}},{key:"ONLINE_MODE_FIND_GAME_RESPONSE",get:function(){return"ONLINE_MODE_FIND_GAME_RESPONSE"}},{key:"JOIN_ROOM",get:function(){return"JOIN_ROOM"}},{key:"USER_EXIT_ROOM",get:function(){return"USER_EXIT_ROOM"}},{key:"USER_ENTER_ROOM",get:function(){return"USER_ENTER_ROOM"}},{key:"ONLINE_MODE_USER_COUNT_BROADCAST",get:function(){return"ONLINE_MODE_USER_COUNT_BROADCAST"}},{key:"ONLINE_MODE_SERVER_QUESTIONS_SEND",get:function(){return"ONLINE_MODE_SERVER_QUESTIONS_SEND"}},{key:"ONLINE_MODE_GAME_START",get:function(){return"ONLINE_MODE_GAME_START"}},{key:"ONLINE_MODE_USER_SELECTED_ANSWER_REQUEST",get:function(){return"ONLINE_MODE_USER_SELECTED_ANSWER_REQUEST"}},{key:"ONLINE_MODE_USER_SELECTED_ANSWER_RESPONSE",get:function(){return"ONLINE_MODE_USER_SELECTED_ANSWER_RESPONSE"}},{key:"ONLINE_MODE_MOVE_TO_NEXT_QUESTION",get:function(){return"ONLINE_MODE_MOVE_TO_NEXT_QUESTION"}},{key:"ONLINE_MODE_GAME_RESULT",get:function(){return"ONLINE_MODE_GAME_RESULT"}},{key:"ONLINE_MODE_ROOM_GAME_RESULT",get:function(){return"ONLINE_MODE_ROOM_GAME_RESULT"}},{key:"ONLINE_MODE_GAME_FINISH",get:function(){return"ONLINE_MODE_GAME_FINISH"}},{key:"ONLINE_GAME_START_WAITING_PLAYER_COUNTDOWN",get:function(){return"ONLINE_GAME_START_WAITING_PLAYER_COUNTDOWN"}},{key:"ONLINE_GAME_STOP_WAITING_PLAYER_COUNTDOWN",get:function(){return"ONLINE_GAME_STOP_WAITING_PLAYER_COUNTDOWN"}},{key:"ONLINE_MODE_COUNT_USER_ONLINE_REQUEST",get:function(){return"ONLINE_MODE_COUNT_USER_ONLINE_REQUEST"}},{key:"ONLINE_MODE_COUNT_USER_ONLINE_RESPONSE",get:function(){return"ONLINE_MODE_COUNT_USER_ONLINE_RESPONSE"}}],(n=null)&&aL(t.prototype,n),i&&aL(t,i),e}();function rL(e){return(rL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cL(e,t){return!t||"object"!==rL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hL(e,t,n){return(hL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uL(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function uL(e){return(uL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dL(e,t){return(dL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fL=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=cL(this,uL(t).call(this,game,0,0,null,e,n))).idx=-1,i.afterCreate(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dL(e,t)}(t,Phaser.Button),n=t,(i=[{key:"afterCreate",value:function(){this.ktSetAva=!0,this.positionOnlineMode=oe.instance().positionDefaultSource,this.noChoose=!1,this.bg=new Bt(this.positionOnlineMode.bg_answer_question),this.addChild(this.bg),this.bgNoChoose=new Bt(this.positionOnlineMode.bg_answer_question_nochoose),this.bgNoChoose.visible=!1,this.addChild(this.bgNoChoose),this.txtAnswer=new Qt(this.positionOnlineMode.text_answer_question),this.addChild(this.txtAnswer),this.ava=new zc,this.ava.setSize(36*oe.instance().scale,36*oe.instance().scale),this.ava.x=9*oe.instance().scale,this.ava.y=(this.bg.height-this.ava.height)/2,this.addChild(this.ava),this.setAva(dV.instance().dataMySeft.avatar)}},{key:"setNoChoose",value:function(){this.noChoose=!0}},{key:"setAva",value:function(e){this.ktSetAva&&(this.ktSetAva=!1,this.ava.setAvatar(e,1))}},{key:"setTextNoChoose",value:function(){LogConsole.log("setTextNoChoose : "+this.idx),this.bgNoChoose.visible=!0,this.bg.visible=!1,this.txtAnswer.changeStyle({fill:"#807d8d"})}},{key:"setDefaultText",value:function(){LogConsole.log("setDefaultText"+this.idx),this.bgNoChoose.visible=!1,this.bg.visible=!0,this.ava.visible=!1,this.txtAnswer.changeStyle({fill:"black"})}},{key:"setTrueText",value:function(){LogConsole.log("setTrueText"+this.idx),this.bgNoChoose.visible=!1,this.bg.visible=!0,this.txtAnswer.changeStyle({fill:"#30FF77"})}},{key:"setFailText",value:function(){LogConsole.log("setFailText"+this.idx),this.bgNoChoose.visible=!1,this.bg.visible=!0,this.txtAnswer.changeStyle({fill:"#ff0000"})}},{key:"setChooseAnswer",value:function(){this.ava.visible=!0}},{key:"setConstX",value:function(e){this.constX=e}},{key:"setData",value:function(e,t){this.noChoose=!1,this.idx=t,this.txtAnswer.setText(e),this.txtAnswer.x=(this.bg.width-this.txtAnswer.width)/2,this.txtAnswer.y=(this.bg.height-this.txtAnswer.height)/2,this.setDefaultText(),this.x=game.width,game.add.tween(this).to({x:this.constX},300,Phaser.Easing.Power1,!0,500+200*t)}},{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),hL(uL(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"getIdx",value:function(){return this.idx}},{key:"hideAnswer",value:function(e){this.x=this.constX,game.add.tween(this).to({x:-this.width-100},300,Phaser.Easing.Power1,!0,100*e)}},{key:"destroy",value:function(){hL(uL(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.bg.width}},{key:"height",get:function(){return this.bg.height}}])&&lL(n.prototype,i),o&&lL(n,o),t}();function pL(e){return(pL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yL(e,t){return!t||"object"!==pL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mL(e){return(mL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vL(e,t){return(vL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yL(this,mL(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vL(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.eventCompleteTime=new Phaser.Signal,this.timerToCountTime=null,this.bg=new Phaser.Image(game,0,0,null),this.bg.x=0,this.bg.y=0,this.addChild(this.bg),this.style={font:"40px Arial",fill:"white"},this.txtClock=new Phaser.Text(game,0,0,"",this.style),this.txtClock.x=0,this.txtClock.y=0,this.addChild(this.txtClock)}},{key:"addEventCompleteTime",value:function(e,t){this.eventCompleteTime.add(e,t)}},{key:"addEventCompleteTime",value:function(e,t){this.eventCompleteTime.remove(e,t)}},{key:"dispatchEventCompleteTime",value:function(){this.eventCompleteTime.dispatch()}},{key:"setTextTimer",value:function(){var e="00",t=parseInt(this.countNumber/10);e=t<10?"0"+t:t,this.txtClock.text=e}},{key:"countTimer",value:function(e){this.countNumber=10*e,this.setTextTimer(),this.stopCountTime(),this.timerToCountTime=this.game.time.create(!0),this.timerToCountTime.loop(100,this.onTimerToCountTime,this),this.timerToCountTime.start()}},{key:"onTimerToCountTime",value:function(){this.countNumber--,this.countNumber<0&&(this.countNumber=0),0===this.countNumber&&(this.dispatchEventCompleteTime(),this.stopCountTime()),this.setTextTimer()}},{key:"getTime",value:function(){return this.countNumber/10}},{key:"stopCountTime",value:function(){null!==this.timerToCountTime&&(this.timerToCountTime.stop(),this.timerToCountTime.destroy(),this.timerToCountTime=null)}},{key:"destroy",value:function(){this.txtClock.destroy(),this.timerToCountTime&&this.timerToCountTime.destroy()}}])&&gL(n.prototype,i),o&&gL(n,o),t}();function bL(e){return(bL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SL(e,t){return!t||"object"!==bL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EL(e,t,n){return(EL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CL(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function CL(e){return(CL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kL(e,t){return(kL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PL=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=SL(this,CL(t).call(this,e,n,i))).positionCreateRoom=oe.instance().positionCreateRoom,o.countTicket=new qn(o.positionCreateRoom.question_button_bodapan_count_mic,dV.instance().dataMySeft.support_item),o.addChild(o.countTicket),o.iconMic=new Bt(o.positionCreateRoom.question_button_bodapan_mic),o.addChild(o.iconMic),o.labelMoney=new Qt(o.positionCreateRoom.question_button_bodapan_txt_money,"-1"),o.labelMoney.setTextBounds(0,0,100*oe.instance().scale,40*oe.instance().scale),o.addChild(o.labelMoney),o.lbBo2dapan=new Qt(o.positionCreateRoom.question_button_bodapan_txt_bo2dapan,de.instance().getData("42")),o.lbBo2dapan.setTextBounds(0,0,205*oe.instance().scale,46*oe.instance().scale),o.addChild(o.lbBo2dapan),o.addEvent(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kL(e,t)}(t,_n),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onUserVarsUpdate.add(this.userVarsUpdate,this)}},{key:"removeEvent",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.userVarsUpdate,this)}},{key:"userVarsUpdate",value:function(){this.countTicket.setText(dV.instance().dataMySeft.support_item)}},{key:"destroy",value:function(){this.removeEvent(),EL(CL(t.prototype),"destroy",this).call(this)}}])&&_L(n.prototype,i),o&&_L(n,o),t}();function OL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var RL=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t,n,i){var o=new SFS2X.SFSObject;return o.putInt("answer_index",t),o.putInt("correct_answer",n),o.putFloat("answer_time",i),o.putInt("question_index",e),o}}],(n=null)&&OL(t.prototype,n),i&&OL(t,i),e}();function xL(e){return(xL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function IL(e,t){return!t||"object"!==xL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AL(e,t,n){return(AL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LL(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function LL(e){return(LL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DL(e,t){return(DL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var GL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),IL(this,LL(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DL(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.positionCreateRoom=oe.instance().positionCreateRoom,this.txtQuestion=new Qt(this.positionCreateRoom.text_question_playroom,""),this.txtQuestion.x=0,this.txtQuestion.y=3*oe.instance().scale,this.txtQuestion.setTextBounds(0,0,game.width,33*oe.instance().scale),this.addChild(this.txtQuestion),this.playerChoose=new Qt(this.positionCreateRoom.text_question_playroom,""),this.playerChoose.x=0,this.playerChoose.y=30*oe.instance().scale,this.playerChoose.setTextBounds(0,0,game.width,33*oe.instance().scale),this.addChild(this.playerChoose)}},{key:"setText",value:function(e){var t="";"SONG"==e&&(t=de.instance().getData("22")),"SINGER"==e&&(t=de.instance().getData("23")),LogConsole.log("strQuestion :"+t),this.txtQuestion.setText(t)}},{key:"setPlayerChoose",value:function(e){""===e?(this.playerChoose.clearColors(),this.playerChoose.text=de.instance().getData("50")):(this.playerChoose.text=de.instance().getData("51")+" "+e,this.playerChoose.addColor("#FFA238",de.instance().getData("51").length))}},{key:"destroy",value:function(){this.txtQuestion.destroy(),AL(LL(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return game.width}},{key:"height",get:function(){return this.txtQuestion.height}},{key:"alpha",set:function(e){if(this.children)for(var t=0;t<this.children.length;t++)this.children[t].alpha=e}}])&&TL(n.prototype,i),o&&TL(n,o),t}();function ML(e){return(ML="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function BL(e,t){return!t||"object"!==ML(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jL(e,t,n){return(jL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=UL(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function UL(e){return(UL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FL(e,t){return(FL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZL=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=BL(this,UL(t).call(this,game,null))).event={close:new Phaser.Signal},i.idxNextQuestion=null,i.ktSendChoose=!1,i.eventChooseAnswer=new Phaser.Signal,i.eventShowQuestion=new Phaser.Signal,i.idx=n,i.arrQuestion=e,i.ktChooseHelp=!1,i.answerSelect=-1,i.buildQuestionByIndex(),i.tween=null,i.addEvent(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FL(e,t)}(t,Je),n=t,(i=[{key:"addEventChooseAnswer",value:function(e,t){this.eventChooseAnswer.add(e,t)}},{key:"removeEventChooseAnswer",value:function(e,t){this.eventChooseAnswer.remove(e,t)}},{key:"dispatchEventChooseAnswer",value:function(e){this.eventChooseAnswer.dispatch(e)}},{key:"addEventShowQuestion",value:function(e,t){this.eventShowQuestion.add(e,t)}},{key:"removeEventShowQuestion",value:function(e,t){this.eventShowQuestion.add(e,t)}},{key:"dispatchEventShowQuestion",value:function(){this.eventShowQuestion.dispatch(this.idx)}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().events.onPublicMessage.add(this.onPublicMessage,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),dV.instance().events.onPublicMessage.remove(this.onPublicMessage,this)}},{key:"onPublicMessage",value:function(e){var t=this;e.message===ki.CHAT_ONLINE_MODE&&(e.sender.isItMe&&(this.btnChat.inputEnabled=!1,setTimeout(function(){t.btnChat.parent&&(t.btnChat.inputEnabled=!0)},3e3)))}},{key:"getData",value:function(e){var t;switch(e.cmd){case sL.ONLINE_MODE_MOVE_TO_NEXT_QUESTION:case sE.ONLINE_MODE_ROOM_MOVE_TO_NEXT_QUESTION:!1===this.ktSend&&(this.ktSend=!0);for(var n=0;n<this.arrAnswer.length;n++)this.arrAnswer[n].setTextNoChoose();t=this.arrQuestion[this.idx].correct_answer,this.arrAnswer[t-1].setTrueText(),-1!==this.answerSelect&&this.answerSelect!==t&&this.arrAnswer[this.answerSelect-1].setFailText(),this.removeNextQuestion(),this.idxNextQuestion=game.time.events.add(2*Phaser.Timer.SECOND,this.buildNextQuestion,this,e.params.getInt(b_.question_index));break;case sL.ONLINE_MODE_GAME_RESULT:case sL.ONLINE_MODE_ROOM_GAME_RESULT:for(var i=0;i<this.arrAnswer.length;i++)this.arrAnswer[i].setTextNoChoose();t=this.arrQuestion[this.idx].correct_answer,this.arrAnswer[t-1].setTrueText(),-1!==this.answerSelect&&this.answerSelect!==t&&this.arrAnswer[this.answerSelect-1].setFailText(),this.buildEndGame();break;case sE.SUPPORT_RESPONSE:break;case sL.ONLINE_MODE_USER_SELECTED_ANSWER_RESPONSE:case sE.ONLINE_MODE_ROOM_USER_SELECTED_ANSWER_RESPONSE:var o=e.params.getBool(qa.is_correct_answer),a=e.params.getInt(qa.user_id),s=e.params.getInt(qa.streak);!0===o&&a===dV.instance().dataMySeft.user_id&&s>1&&this.showStreakAnswer(s,this.arrQuestion[this.idx].correct_answer)}}},{key:"buildEndGame",value:function(){if(!1===this.ktSendChoose){var e={idx:this.idx,correct_answer:!1,time:10};this.arrQuestion[this.idx].playerChoose=e,this.dispatchEventChooseAnswer(e)}else this.ktSendChoose=!1;rl.instance().removeSound()}},{key:"removeNextQuestion",value:function(){null!==this.idxNextQuestion&&game.time.events.remove(this.idxNextQuestion)}},{key:"buildNextQuestion",value:function(e){if(LogConsole.log("buildNextQuestion : "+e),this.streakAnswer.setDefault(),this.idx<this.arrQuestion.length)if(!1===this.ktSendChoose){var t={idx:this.idx,correct_answer:!1,time:10};this.arrQuestion[this.idx].playerChoose=t,this.dispatchEventChooseAnswer(t)}else this.ktSendChoose=!1;this.idx=e-1,this.idx>this.arrQuestion.length-1?this.ktSend=!0:(this.buildQuestionByIndex(),this.dispatchEventShowQuestion())}},{key:"buildHelpAnswer",value:function(){var e=[],t=0;for(t=1;t<5;t++)t===this.arrQuestion[this.idx].correct_answer||e.push(t);for(LogConsole.log("correct_answer "+this.arrQuestion[this.idx].correct_answer),LogConsole.log(e),e.splice(game.rnd.integerInRange(0,2),1),LogConsole.log(e),t=0;t<e.length;t++)LogConsole.log("arrAnswerFail[i] : "+e[t]),this.arrAnswer[e[t]-1].setTextNoChoose(),this.arrAnswer[e[t]-1].setNoChoose()}},{key:"afterCreate",value:function(){this.positionCreateRoom=JSON.parse(game.cache.getText("positionCreateRoom")),this.streakAnswer=null,this.txtQuestion=new GL,this.txtQuestion.x=0,this.txtQuestion.y=0,this.addChild(this.txtQuestion);var e=new Phaser.Group(game,0,0,null);this.listAnswer=new Ia(game,e,new Phaser.Rectangle(0,0,game.width,500*oe.instance().scale),{direction:"y",padding:15*oe.instance().scale,searchForClicks:!0}),e.x=0,e.y=75*oe.instance().scale,this.addChild(e),this.arrAnswer=[],this.listAnswer.removeAll(),this.listAnswer.reset();for(var t=0;t<4;t++){var n=new fL(this.chooseAnswer,this),i=(game.width-n.width)/2;n.x=i,n.setConstX(i),this.listAnswer.add(n),this.arrAnswer.push(n)}this.clock=new wL,this.clock.addEventCompleteTime(this.timeComplete,this),this.clock.x=game.width-100,this.clock.y=-20,this.btnBo2DapAn=new PL(this.positionCreateRoom.question_button_bodapan_bg,this.chooseBo2Dapan,this),this.addChild(this.btnBo2DapAn),this.btnChat=new _n(this.positionCreateRoom.question_button_chat,this.chooseChat,this),this.addChild(this.btnChat),this.buildStreakAnswer()}},{key:"chooseChat",value:function(){jC.instance().addChatOnlineMode()}},{key:"chooseBo2Dapan",value:function(){LogConsole.log("chooseBo2Dapan"),dV.instance().dataMySeft.support_item>0?!1===this.ktChooseHelp&&!1===this.ktSend&&(this.ktChooseHelp=!0,dV.instance().dataMySeft.support_item=dV.instance().dataMySeft.support_item-1,dV.instance().dataMySeft.support_item<0&&(dV.instance().dataMySeft.support_item=0),this.buildHelpAnswer(),dV.instance().sendData(sE.SUPPORT_REQUEST,null)):jC.instance().addDialog(de.instance().getData("53"))}},{key:"timeComplete",value:function(){}},{key:"buildQuestionByIndex",value:function(){LogConsole.log("buildQuestionByIndex - "+this.idx),this.answerSelect=-1,this.clock.countTimer(10.5),this.ktSend=!1,this.ktChooseHelp=!1,rl.instance().playsound(this.arrQuestion[this.idx].file_path),this.txtQuestion.setText(this.arrQuestion[this.idx].question_type),this.txtQuestion.setPlayerChoose(this.arrQuestion[this.idx].user_choose);for(var e=0;e<this.arrQuestion[this.idx].arrAnser.length;e++)this.arrAnswer[e].setData(this.arrQuestion[this.idx].arrAnser[e],e)}},{key:"hideQuestion",value:function(){for(var e=0;e<this.arrQuestion[this.idx].arrAnser.length;e++)this.arrAnswer[e].hideAnswer(e);this.txtQuestion.setText(""),this.tween=game.add.tween(this).to({y:this.y},500,Phaser.Easing.Power1,!0),this.tween.onComplete.add(this.handleComplete,this)}},{key:"handleComplete",value:function(){this.event.close.dispatch()}},{key:"chooseAnswer",value:function(e){if(LogConsole.log("chooseAnswer"),LogConsole.log(e),0==this.ktSend)if(e.noChoose);else{var t=this.clock.getTime();if(this.ktSend=!0,t>0){for(var n=0;n<this.arrAnswer.length;n++)this.arrAnswer[n].setTextNoChoose();e.setChooseAnswer();var i={idx:this.idx,correct_answer:!1,time:0};this.answerSelect=e.getIdx()+1;var o=10.5-t-.5;o>10&&(o=10),o<.1&&(o=.1);var a=this.arrQuestion[this.idx].correct_answer;LogConsole.log("this.answerSelect : "+this.answerSelect),LogConsole.log("correct_answer : "+a),i.time=o,this.answerSelect==a?(LogConsole.log("dung-----------"),e.setTrueText(),i.correct_answer=!0,ak.instance().playlist.setExpPlaylistById(this.arrQuestion[this.idx].playlist_id)):(LogConsole.log("sai-----------"),e.setFailText()),this.arrQuestion[this.idx].playerChoose=i,this.dispatchEventChooseAnswer(i),this.ktSendChoose=!0;var s="";s=oe.instance().modeplay===oe.instance().MODEPLAY.OnlineMode?sL.ONLINE_MODE_USER_SELECTED_ANSWER_REQUEST:sE.ONLINE_MODE_ROOM_USER_SELECTED_ANSWER_REQUEST,dV.instance().sendData(s,RL.begin(this.idx+1,this.answerSelect,a,o))}else LogConsole.log("het thoi gian tra loi cau hoi")}}},{key:"buildStreakAnswer",value:function(){this.removeStreakAnswer(),this.streakAnswer=new Od,this.streakAnswer.x=(this.game.width-this.streakAnswer.width)/2,this.addChild(this.streakAnswer),this.hideStreakAnswer()}},{key:"hideStreakAnswer",value:function(){this.streakAnswer.visible=!1}},{key:"showStreakAnswer",value:function(e,t){this.streakAnswer.visible=!0,this.streakAnswer.setStreak(e),console.log("showStreakAnswer : "+t),2===t?this.streakAnswer.y=280:3===t?this.streakAnswer.y=50:1===t?this.streakAnswer.y=235:4===t&&(this.streakAnswer.y=105)}},{key:"removeStreakAnswer",value:function(){console.log(this.streakAnswer),null!==this.streakAnswer&&(this.removeChild(this.streakAnswer),this.streakAnswer.destroy(),this.streakAnswer=null)}},{key:"getArrQuestion",value:function(){return this.arrQuestion}},{key:"destroy",value:function(){rl.instance().removeAllSound(),jC.instance().removeChatOnlineMode(),this.removeEvent(),this.eventChooseAnswer.dispose(),this.txtQuestion.destroy(),this.listAnswer.removeAll(),this.listAnswer.destroy(),this.clock.destroy(),null!==this.tween&&(this.tween.stop(),game.tweens.remove(this.tween),this.tween=null),jL(UL(t.prototype),"destroy",this).call(this)}}])&&NL(n.prototype,i),o&&NL(n,o),t}();function HL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var VL=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){for(var n=e.getSFSArray(qa.players),i=0;i<n.size();i++)for(var o=n.getSFSObject(i),a=0;a<t.length;a++){var s=t[a].getData();if(null!=s&&s.user_id==o.getInt(qa.user_id)){s.score=o.getInt(qa.score),s.diamond_change=o.getInt(qa.diamond_change),s.exp_score=o.getInt(qa.exp_score),t[a].setCurrentData(s);break}}}}],(n=null)&&HL(t.prototype,n),i&&HL(t,i),e}();function QL(e){return(QL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qL(e){return(qL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KL(e,t){return(KL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var YL=function(e){function t(e,n){var i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=qL(t).call(this,game,null))||"object"!==QL(a)&&"function"!=typeof a?zL(o):a).event={play:new Phaser.Signal},i.idx=n,i.data=new v_,i.data=Object.assign({},i.data,e),i.ktPlay=!1,i.songListen=null,i.btnPlaySound=null,i.positionOnlineMode=oe.instance().positionCreateRoom,i.bg=new Phaser.Button(game,0,0,"bg-playlist",i.chooseChitiet,zL(zL(i))),i.bg.alpha=0,i.bg.width=i.width-180*oe.instance().scale,i.bg.height=i.height,i.bg.x=180*oe.instance().scale,i.addChild(i.bg),e.playerChoose.correct_answer?i.icon_true=new Bt(i.positionOnlineMode.icon_true_result):i.icon_true=new Bt(i.positionOnlineMode.icon_fail_result),i.addChild(i.icon_true),i.txtTime=new Qt(i.positionOnlineMode.text_time_player_list_result,i.financial(e.playerChoose.time)+"s"),e.playerChoose.correct_answer?i.txtTime.changeStyle({fill:"green"}):i.txtTime.changeStyle({fill:"red"}),i.txtTime.x=i.icon_true.x+(i.icon_true.width-i.txtTime.width)/2,i.addChild(i.txtTime),i.ava=new ec,i.ava.setSize(84*oe.instance().scale,84*oe.instance().scale),i.ava.x=90*oe.instance().scale,i.ava.y=27*oe.instance().scale,i.ava.beginLoad(i.data.song.thumb,i.idx),i.addChild(i.ava),i.btnPlaySound=new _n(i.positionOnlineMode.button_play_sound_player_list_result,i.choosePlaySound,zL(zL(i))),i.addChild(i.btnPlaySound),i.txtNameSong=new Qt(i.positionOnlineMode.text_name_song_player_list_result,i.formatName(i.data.song.song,22,!0)),i.txtNameSong.setTextBounds(0,0,375*oe.instance().scale,31*oe.instance().scale),i.addChild(i.txtNameSong),i.txtNameCasi=new Qt(i.positionOnlineMode.text_name_casi_player_list_result,i.data.song.singer),i.addChild(i.txtNameCasi),i.line=new Bt(i.positionOnlineMode.line_item_player_list),i.line.width=i.width-60*oe.instance().scale,i.line.x=35*oe.instance().scale,i.line.y=i.height,i.addChild(i.line),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KL(e,t)}(t,Je),n=t,(i=[{key:"stopAudio",value:function(){this.removeBtnPlay(),this.btnPlaySound=new _n(this.positionOnlineMode.button_play_sound_player_list_result,this.choosePlaySound,this),this.addChild(this.btnPlaySound)}},{key:"chooseChitiet",value:function(){LogConsole.log("chooseChitiet"),jC.instance().addDetailSong(this.data.song)}},{key:"choosePlaySound",value:function(){this.event.play.dispatch(this.data.song.id)}},{key:"playSound",value:function(){LogConsole.log("playSound"),!1===this.ktPlay?(this.ktPlay=!0,rl.instance().playsound(this.data.song.listenLink)):rl.instance().resumeSound(),this.removeBtnPlay(),this.btnPlaySound=new _n(this.positionOnlineMode.button_pause_sound_player_list_result,this.choosePauseSound,this),this.addChild(this.btnPlaySound)}},{key:"removeBtnPlay",value:function(){null!==this.btnPlaySound&&(this.removeChild(this.btnPlaySound),this.btnPlaySound.destroy(),this.btnPlaySound=null)}},{key:"choosePauseSound",value:function(){this.pauseSound()}},{key:"pauseSoundOut",value:function(){this.ktPlay=!1,this.stopAudio()}},{key:"pauseSound",value:function(){this.ktPlay&&rl.instance().pauseSound(),this.stopAudio()}},{key:"width",get:function(){return 570*oe.instance().scale}},{key:"height",get:function(){return 140*oe.instance().scale}}])&&WL(n.prototype,i),o&&WL(n,o),t}();function XL(e){return(XL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $L(e,t){return!t||"object"!==XL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eD(e,t,n){return(eD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tD(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tD(e){return(tD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nD(e,t){return(nD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iD=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=$L(this,tD(t).call(this,game,e.x,e.y,e.nameAtlas,i,o,null,e.nameSprite))).lbChoiLai=new Qt(e.button_reset_lb_choilai_player_list_result,de.instance().getData("41")),a.addChild(a.lbChoiLai),""!=n?(a.iconKimCuong=new Bt(e.button_reset_icon_KimCuong_player_list_result),a.addChild(a.iconKimCuong),a.lbMoney=new Qt(e.button_reset_lb_money_player_list_result,"-"+n),a.lbMoney.x=a.iconKimCuong.x-a.lbMoney.width-10,a.addChild(a.lbMoney)):a.lbChoiLai.x=(a.width-a.lbChoiLai.width)/2,a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nD(e,t)}(t,Phaser.Button),n=t,(i=[{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),eD(tD(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"destroy",value:function(){this.iconKimCuong&&this.iconKimCuong.destroy(),this.lbChoiLai.destroy(),this.lbMoney&&this.lbMoney.destroy(),eD(tD(t.prototype),"destroy",this).call(this)}}])&&JL(n.prototype,i),o&&JL(n,o),t}();function oD(e){return(oD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sD(e,t,n){return(sD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rD(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function rD(e){return(rD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lD(e,t){return(lD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var hD=function(e){function t(e,n){var i,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=rD(t).call(this,game,null))||"object"!==oD(a)&&"function"!=typeof a?cD(o):a).roomBet=n,i.event={replay:new Phaser.Signal,close:new Phaser.Signal,exit:new Phaser.Signal},i.tween=null,i.ktReplay=!1,i.positionOnlineMode=oe.instance().positionCreateRoom,i.bgPlayerList=new Dn(i.positionOnlineMode.bg_player_list_result),i.bgPlayerList.x=35*oe.instance().scale,i.bgPlayerList.y=620*oe.instance().scale,i.bgPlayerList.width=570*oe.instance().scale,i.bgPlayerList.height=485*oe.instance().scale,i.addChild(i.bgPlayerList);var s=new Phaser.Group(game,0,0,null);i.listPlayer=new Ia(game,s,new Phaser.Rectangle(0,0,i.bgPlayerList.width,i.bgPlayerList.height-100*oe.instance().scale),{direction:"y",padding:5*oe.instance().scale,searchForClicks:!0}),i.bgPlayerList.addChild(s);for(var r=0;r<e.length;r++){var l=new YL(e[r],r);l.event.play.add(i.playSound,cD(cD(i))),i.listPlayer.add(l)}return i.btnHome=new _n(i.positionOnlineMode.button_home_player_list_result,i.chooseExit,cD(cD(i))),i.btnHome.x=35*oe.instance().scale,i.btnHome.y=400*oe.instance().scale,i.addChild(i.btnHome),i.btnChoiLai=new iD(i.positionOnlineMode.button_reset_bg_player_list_result,i.roomBet,i.chooseChoiLai,cD(cD(i))),i.btnChoiLai.x=140*oe.instance().scale,i.btnChoiLai.y=400*oe.instance().scale,i.addChild(i.btnChoiLai),i.tween=game.add.tween(i.bgPlayerList).to({y:0},500,Phaser.Easing.Power1,!0,300),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lD(e,t)}(t,Je),n=t,(i=[{key:"playSound",value:function(e){for(var t=0;t<this.listPlayer.grp.children.length;t++){var n=this.listPlayer.grp.children[t];n.data.song.id!==e?n.pauseSoundOut():n.playSound()}}},{key:"tweenHide",value:function(){this.tween=game.add.tween(this).to({y:game.height+100*oe.instance().scale},500,Phaser.Easing.Power1,!0),this.tween.onComplete.add(this.handleComplete,this)}},{key:"handleComplete",value:function(){this.event.close.dispatch()}},{key:"chooseExit",value:function(){LogConsole.log("chooseExit"),this.btnHome.inputEnabled=!1,this.event.exit.dispatch()}},{key:"chooseChoiLai",value:function(){LogConsole.log("chooseChoiLai : "+this.ktReplay),!0===this.ktReplay&&(LogConsole.log("SocketController.instance().dataMySeft.diamond : "+dV.instance().dataMySeft.diamond),LogConsole.log("roomBet : "+this.roomBet),dV.instance().dataMySeft.diamond<this.roomBet?(this.event.exit.dispatch(),jC.instance().addDialog(de.instance().getData("52"))):(this.btnHome.inputEnabled=!1,this.tweenHide(),this.event.replay.dispatch()))}},{key:"destroy",value:function(){this.listPlayer.removeAll(),this.listPlayer.destroy(),null!==this.tween&&(this.tween.stop(),game.tweens.remove(this.tween),this.tween=null),sD(rD(t.prototype),"destroy",this).call(this)}}])&&aD(n.prototype,i),o&&aD(n,o),t}();function uD(e){return(uD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fD(e,t){return!t||"object"!==uD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pD(e,t,n){return(pD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gD(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function gD(e){return(gD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yD(e,t){return(yD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mD=function(e){function t(e,n,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=fD(this,gD(t).call(this,game,null))).event={destroy:new Phaser.Signal},o.objData=i,o.iconArrow=null;var a="#000000";o.positionCreateRoom=oe.instance().positionCreateRoom,o.objData.hasOwnProperty("atlas")?!0===o.objData.vip?(o.bg=new Dn(o.positionCreateRoom.chat_waitting_bg_chat_vip),o.bg.width=250,o.bg.height=85):(o.bg=new Dn(o.positionCreateRoom.chat_waitting_bg_chat),o.bg.width=250,o.bg.height=85):e?(a="#ffffff",o.bg=new Dn(n?o.positionCreateRoom.chat_me_left:o.positionCreateRoom.chat_me_right)):o.bg=new Dn(n?o.positionCreateRoom.chat_user_left:o.positionCreateRoom.chat_user_right),o.addChild(o.bg);var s={x:0,y:0,style:{fontSize:20,fill:a}};!0===o.objData.vip?s.style.fill="#ffffff":s.style.fill="#333333",o.txtContent=new Qt(s,i.label),o.txtContent.y=(o.height-o.txtContent.height)/2,o.addChild(o.txtContent);var r="popup";o.objData.hasOwnProperty("atlas")&&""===(r=o.objData.atlas)&&(r="popup");var l={x:0,y:0,nameAtlas:r,nameSprite:i.sprite};if(o.icon=new Bt(l),o.addChild(o.icon),o.objData.hasOwnProperty("atlas"))o.txtContent.x=(250-(o.txtContent.width+10+o.icon.width))/2,o.txtContent.y=30,o.icon.x=o.txtContent.x+o.txtContent.width+10,o.icon.y=15,!0===o.objData.vip?(o.iconArrow=new Bt(o.positionCreateRoom.chat_waitting_icon_arrow_vip),o.iconArrow.x=(o.bg.width-o.iconArrow.width)/2+5,o.iconArrow.y=o.bg.height,o.addChild(o.iconArrow)):(o.iconArrow=new Bt(o.positionCreateRoom.chat_waitting_icon_arrow),o.iconArrow.x=(o.bg.width-o.iconArrow.width)/2+5,o.iconArrow.y=o.bg.height,o.addChild(o.iconArrow));else{var c=18*oe.instance().scale;o.txtContent.x=c,o.icon.x=o.txtContent.x+o.txtContent.width+c,o.icon.y=(o.height-o.icon.height)/2,o.bg.width=o.txtContent.x+o.txtContent.width+c+o.icon.width+c}return o.idtimeout=setTimeout(function(){o.event.destroy.dispatch(o.objData.id)},3500),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yD(e,t)}(t,Je),n=t,(i=[{key:"destroy",value:function(){clearTimeout(this.idtimeout),pD(gD(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.bg.width}},{key:"height",get:function(){return this.objData.hasOwnProperty("atlas")?100:51*oe.instance().scale}}])&&dD(n.prototype,i),o&&dD(n,o),t}();function vD(e){return(vD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bD(e,t){return!t||"object"!==vD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _D(e,t,n){return(_D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SD(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function SD(e){return(SD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ED(e,t){return(ED=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var CD=function(e){function t(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=bD(this,SD(t).call(this,game,null))).id=n,i.vip=o,i.event={destroy:new Phaser.Signal},i.positionCreateRoom=oe.instance().positionCreateRoom,!0===i.vip?(i.bgChat=new Dn(i.positionCreateRoom.chat_waitting_bg_chat_vip),i.lbChat=new Qt(i.positionCreateRoom.chat_waitting_text_chat_vip,e)):(i.bgChat=new Dn(i.positionCreateRoom.chat_waitting_bg_chat),i.lbChat=new Qt(i.positionCreateRoom.chat_waitting_text_chat,e)),i.lbChat.height<47?i.bgChat.height=67:i.bgChat.height=i.lbChat.height+20,i.lbChat.width<35?i.bgChat.width=65:i.bgChat.width=i.lbChat.width+30,i.addChild(i.bgChat),i.lbChat.x=(i.bgChat.width-i.lbChat.width)/2,i.lbChat.y=(i.bgChat.height-i.lbChat.height)/2,i.addChild(i.lbChat),!0===i.vip?(i.iconArrow=new Bt(i.positionCreateRoom.chat_waitting_icon_arrow_vip),i.iconArrow.x=(i.bgChat.width-i.iconArrow.width)/2+5,i.iconArrow.y=i.bgChat.height,i.addChild(i.iconArrow)):(i.iconArrow=new Bt(i.positionCreateRoom.chat_waitting_icon_arrow),i.iconArrow.x=(i.bgChat.width-i.iconArrow.width)/2+5,i.iconArrow.y=i.bgChat.height,i.addChild(i.iconArrow)),i.idtimeout=setTimeout(function(){i.event.destroy.dispatch(i.id)},3500),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ED(e,t)}(t,Je),n=t,(i=[{key:"destroy",value:function(){clearTimeout(this.idtimeout),_D(SD(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.bgChat.width}},{key:"height",get:function(){return this.bgChat.height+this.iconArrow.height}}])&&wD(n.prototype,i),o&&wD(n,o),t}();function kD(e){return(kD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function OD(e){return(OD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RD(e,t){return(RD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var TD=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=OD(t).call(this,game,null))||"object"!==kD(i)&&"function"!=typeof i?xD(n):i).event={choose_item:new Phaser.Signal},e.label=o,e.icon=a,e.textChat=game.add.text(0,0,o,{fill:"#333333",font:"Gilroy",fontSize:23},xD(xD(e))),e.addChild(e.textChat),e.iconChat=e.create(0,0,"createroom",e.icon),e.textChat.x=(320-(e.textChat.width+10+e.iconChat.width))/2,e.textChat.y=30,e.iconChat.x=e.textChat.x+e.textChat.width+10,e.iconChat.y=15,e.btnChoose=game.make.button(0,0,"",e.chooseItem,xD(xD(e))),e.btnChoose.width=320,e.btnChoose.height=85,e.addChild(e.btnChoose),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RD(e,t)}(t,Je),n=t,(i=[{key:"chooseItem",value:function(){this.event.choose_item.dispatch(this.label,this.icon)}}])&&PD(n.prototype,i),o&&PD(n,o),t}();function ID(e){return(ID="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function LD(e){return(LD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DD(e,t){return(DD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var MD=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=LD(t).call(this,game,null))||"object"!==ID(i)&&"function"!=typeof i?GD(n):i).event={close:new Phaser.Signal,show_chat:new Phaser.Signal},e.bg=e.create(0,0,"createroom","White_Tab"),e.bg.width=game.width,e.bg.height=545,e.bgSearch=e.create(0,0,"createroom","Tab_Chat"),e.bgBoxChat=game.make.button(21,20,"createroom",e.chooseChat,GD(GD(e)),"Box_Chat","Box_Chat","Box_Chat","Box_Chat"),e.addChild(e.bgBoxChat),e.textChat=game.add.text(32,50,de.instance().getData("82"),{fill:"#333333",font:"Gilroy",fontSize:23},GD(GD(e))),e.addChild(e.textChat),e.btnClose=game.make.button(0,20,"createroom",e.chooseClose,GD(GD(e)),"chatquickX","chatquickX","chatquickX","chatquickX"),e.btnClose.x=game.width-e.btnClose.width-20,e.addChild(e.btnClose),e.btnChatText=game.make.button(0,30,"createroom",e.chooseChat,GD(GD(e)),"chatquickButton_Text","chatquickButton_Text","chatquickButton_Text","chatquickButton_Text"),e.btnChatText.x=e.btnClose.x-e.btnChatText.width-30,e.addChild(e.btnChatText);for(var o=[{label:de.instance().getData("83"),icon:"chatquick1"},{label:de.instance().getData("84"),icon:"chatquick2"},{label:de.instance().getData("85"),icon:"chatquick3"},{label:de.instance().getData("86"),icon:"chatquick4"},{label:de.instance().getData("87"),icon:"chatquick5"},{label:de.instance().getData("88"),icon:"chatquick6"},{label:de.instance().getData("89"),icon:"chatquick7"},{label:de.instance().getData("90"),icon:"chatquick8"},{label:de.instance().getData("91"),icon:"chatquick9"},{label:de.instance().getData("92"),icon:"chatquick10"}],a=0,s=120,r=0,l=0;l<o.length;l++){r++;var c=new TD(o[l].label,o[l].icon);c.event.choose_item.add(e.sendText,GD(GD(e))),c.x=a,c.y=s,r%2==0?(a=0,s+=85,e.create(a,s,"createroom","chatquickLine_01")):(a+=320,e.create(a,s+20,"createroom","chatquickLine_02")),e.addChild(c)}return e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DD(e,t)}(t,Je),n=t,(i=[{key:"sendText",value:function(e,t){console.log("label : "+e),console.log("icon : "+t);var n=new SFS2X.SFSObject;n.putUtfString("label",e),n.putUtfString("sprite",t),n.putUtfString("atlas","createroom"),dV.instance().sendPublicChat(Me.CHAT_ONLINE_MODE,n),this.chooseClose()}},{key:"chooseClose",value:function(){this.event.close.dispatch()}},{key:"chooseChat",value:function(){this.event.show_chat.dispatch()}}])&&AD(n.prototype,i),o&&AD(n,o),t}();function ND(e){return(ND="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jD(e,t){return!t||"object"!==ND(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UD(e,t,n){return(UD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FD(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function FD(e){return(FD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZD(e,t){return(ZD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jD(this,FD(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZD(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={back:new Phaser.Signal},this.listSongResult=null,this.choosePlayList=null,this.listFriend=null,this.quickChat=null,this.idTimeOutShowPlayList=null,this.ktPlay=!1,this.ktStart=!1,this.arrQuestion=[],this.timecount=0,this.ktCountDownPlay=!1,this.timeTween=null,this.timerCountDown=null,this.totalPlayerPlay=0,this.arrMeAnswer=[],this.addMeAnswer=game.add.group(),this.addListChart=game.add.group(),this.addChatWaitting=game.add.group(),this.idxQuestion=0,this.arrScore=[],this.arrChart={},this.arrPlayer=[],this.idMaster=-1,this.roomBet=0,this.idRoom="",this.currentBet=0,this.nameMaster="",this.idShowResult=null,this.ktReplay=!1,this.objChat={},this.startTime=0,this.endTime=0,this.ktshowBadConnection=!1,this.checkSendExit=!1,this.objChatWaitting={},this.arrLocal=[{x:100*oe.instance().scale,y:385*oe.instance().scale},{x:385*oe.instance().scale,y:385*oe.instance().scale},{x:100*oe.instance().scale,y:690*oe.instance().scale},{x:385*oe.instance().scale,y:690*oe.instance().scale}],this.arrLocalPlay2=[{x:206*oe.instance().scale,y:223*oe.instance().scale},{x:354*oe.instance().scale,y:223*oe.instance().scale}],this.arrLocalPlay3=[{x:114*oe.instance().scale,y:223*oe.instance().scale},{x:276*oe.instance().scale,y:223*oe.instance().scale},{x:438*oe.instance().scale,y:223*oe.instance().scale}],this.arrLocalPlay4=[{x:59*oe.instance().scale,y:223*oe.instance().scale},{x:206*oe.instance().scale,y:223*oe.instance().scale},{x:354*oe.instance().scale,y:223*oe.instance().scale},{x:495*oe.instance().scale,y:223*oe.instance().scale}],this.arrLocalResultWin={x:260*oe.instance().scale,y:140*oe.instance().scale},this.arrLocalResult2=[{x:275*oe.instance().scale,y:420*oe.instance().scale}],this.arrLocalResult3=[{x:185*oe.instance().scale,y:420*oe.instance().scale},{x:365*oe.instance().scale,y:420*oe.instance().scale}],this.arrLocalResult4=[{x:117*oe.instance().scale,y:420*oe.instance().scale},{x:275*oe.instance().scale,y:420*oe.instance().scale},{x:431*oe.instance().scale,y:420*oe.instance().scale}],this.arrLocalResultAllLose2=[{x:211*oe.instance().scale,y:260*oe.instance().scale},{x:355*oe.instance().scale,y:260*oe.instance().scale}],this.arrLocalResultAllLose3=[{x:117*oe.instance().scale,y:260*oe.instance().scale},{x:275*oe.instance().scale,y:260*oe.instance().scale},{x:431*oe.instance().scale,y:260*oe.instance().scale}],this.arrLocalResultAllLose4=[{x:60*oe.instance().scale,y:260*oe.instance().scale},{x:211*oe.instance().scale,y:260*oe.instance().scale},{x:355*oe.instance().scale,y:260*oe.instance().scale},{x:490*oe.instance().scale,y:260*oe.instance().scale}],this.positionCreateRoom=oe.instance().positionCreateRoom,this.bg=new Phaser.Button(game,0,0,"bg_create_room"),this.addChild(this.bg),this.header=new ZT,this.header.setWaittingRoom(),this.header.setIdPhong("dfdsf"),this.header.setNguoiTao("Viet Pv"),this.header.event.back.add(this.chooseBack,this),this.addChild(this.header),this.addChild(this.addListChart),this.buildListPlayer(),this.btnMoiBan=new qn(this.positionCreateRoom.waitting_btn_moiban,de.instance().getData("67"),this.chooseMoiBan,this),this.btnMoiBan.y=game.height,this.addChild(this.btnMoiBan),this.btnChoi=new qn(this.positionCreateRoom.waitting_btn_choi,de.instance().getData("24"),this.chooseChoi,this),this.btnChoi.y=game.height,this.addChild(this.btnChoi),this.btnChatWaitting=new _n(this.positionCreateRoom.chat_waitting_icon_chat,this.addQuickChat,this),this.btnChatWaitting.y=game.height-223,this.addChild(this.btnChatWaitting),this.addChild(this.addChatWaitting),this.txtCounDown=new Qt(this.positionCreateRoom.waitting_txt_countdown,""),this.txtCounDown.anchor.set(.5),this.txtCounDown.x=game.width/2,this.addChild(this.txtCounDown);var e=de.instance().getData("61").split("\n");this.txtTrick=new Qt(this.positionCreateRoom.waitting_txt_trick,de.instance().getData("61")),this.txtTrick.visible=!1,this.txtTrick.addColor("#FFA339",e[0].length),this.txtTrick.setTextBounds(0,0,game.width,95*oe.instance().scale),this.txtTrick.y=game.height-95*oe.instance().scale,this.addChild(this.txtTrick),this.hideButtonChoi(),this.hideButtonMoiBan(),this.btnMucCuoc=new qn(this.positionCreateRoom.button_muccuoc_room,"10"),this.addChild(this.btnMucCuoc),this.labelMuccuoc=new Qt(this.positionCreateRoom.text_muccuoc_room,de.instance().getData("43")),this.labelMuccuoc.x=(game.width-this.labelMuccuoc.width)/2,this.addChild(this.labelMuccuoc),this.lineWin=new Bt(this.positionCreateRoom.result_line_win),this.lineWin.visible=!1,this.addChild(this.lineWin),this.txtWin=new Qt(this.positionCreateRoom.result_txtWin_win,de.instance().getData("62")+" !!!"),this.txtWin.setTextBounds(0,0,game.width,47*oe.instance().scale),this.txtWin.visible=!1,this.addChild(this.txtWin),this.button_share=new _n(this.positionCreateRoom.button_share,this.chooseShare,this),this.button_share.visible=!1,this.addChild(this.button_share,this),this.buildUserJoinRoom(),this.addEvent()}},{key:"chooseShare",value:function(){Ri.instance().share()}},{key:"showBetRoom",value:function(){this.btnMucCuoc.visible=!0,this.labelMuccuoc.visible=!0}},{key:"hideBetRoom",value:function(){this.btnMucCuoc.visible=!1,this.labelMuccuoc.visible=!1}},{key:"resetArrayScore",value:function(){this.arrScore=[{idx:0,score:0},{idx:1,score:0},{idx:2,score:0},{idx:3,score:0}]}},{key:"hideButtonMoiBan",value:function(){this.btnMoiBan.inputEnabled=!1}},{key:"showButtonMoiBan",value:function(){this.btnMoiBan.inputEnabled=!0}},{key:"hideButtonChoi",value:function(){this.btnChoi.inputEnabled=!1}},{key:"showButtonChoi",value:function(){this.btnChoi.inputEnabled=!0}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().events.onUserEnterRoom.add(this.userEnterRoom,this),dV.instance().events.onUserExitRoom.add(this.userExitRoom,this),dV.instance().events.onUserVarsUpdate.add(this.userVarsUpdate,this),dV.instance().events.onRoomVarsUpdate.add(this.onRoomVarsUpdate,this),dV.instance().events.onPublicMessage.add(this.onPublicMessage,this),Qe.instance().event.bad_connection.add(this.checkBadConnection,this),Qe.instance().event.chooseExitBadConnection.add(this.chooseExitBadConnection,this),Qe.instance().event.chooseNoPopupConfirm.add(this.chooseNoPopupConfirm,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),dV.instance().events.onUserEnterRoom.remove(this.userEnterRoom,this),dV.instance().events.onUserExitRoom.remove(this.userExitRoom,this),dV.instance().events.onUserVarsUpdate.remove(this.userVarsUpdate,this),dV.instance().events.onRoomVarsUpdate.remove(this.onRoomVarsUpdate,this),dV.instance().events.onPublicMessage.remove(this.onPublicMessage,this),Qe.instance().event.bad_connection.remove(this.checkBadConnection,this),Qe.instance().event.chooseExitBadConnection.remove(this.chooseExitBadConnection,this),Qe.instance().event.chooseNoPopupConfirm.remove(this.chooseNoPopupConfirm,this)}},{key:"chooseNoPopupConfirm",value:function(e){"chooseCanclePopupMoney"===e&&this.chooseBack()}},{key:"checkBadConnection",value:function(){!1===this.ktPlay&&!1===this.ktshowBadConnection&&(this.ktshowBadConnection=!0,jC.instance().addBadConnection())}},{key:"chooseExitBadConnection",value:function(){this.chooseExit()}},{key:"onPublicMessage",value:function(e){if(LogConsole.log("onPublicMessage"),LogConsole.log(e),e.message===ki.CHAT_ONLINE_MODE){var t=e.sender,n=t.isItMe,i=parseInt(t.name),o=e.data.getBool("vip");if(e.data.containsKey("label")&&e.data.containsKey("sprite")){var a={label:e.data.getUtfString("label"),sprite:e.data.getUtfString("sprite"),vip:o};e.data.containsKey("atlas")&&(a.atlas=e.data.getUtfString("atlas"));for(var s=0,r=0;r<this.arrPlayer.length;r++)if(!1===this.arrPlayer[r].ktEmpty&&(s++,this.arrPlayer[r].getData().user_id===i)){var l=!1;l=a.hasOwnProperty("atlas")?this.arrPlayer[r].getData().idx%2==0:2===this.totalPlayerPlay?1!==s:1!==s&&2!==s,a.id=i,this.removeItemChatWaitting(i);var c=new mD(n,l,a);c.event.destroy.add(this.removeItemChatWaitting,this),this.addChatWaitting.addChild(c),a.hasOwnProperty("atlas")?(c.x=this.arrPlayer[r].x+(155-c.width)/2,c.y=this.arrPlayer[r].y+48-c.height,null!==this.listFriend&&this.listFriend.addChatRoom(a.label,t.getVariable("avatar").value,a.sprite,o),null!==this.choosePlayList&&this.choosePlayList.addChatRoom(a.label,t.getVariable("avatar").value,a.sprite,o)):l?(c.x=this.arrPlayer[r].x+130*oe.instance().scale-c.width,c.x<0&&(c.x=0),c.y=this.arrPlayer[r].y-15*oe.instance().scale):(c.x=this.arrPlayer[r].x+55*oe.instance().scale,c.y=this.arrPlayer[r].y-15*oe.instance().scale),this.objChatWaitting[i]=c;break}}if(e.data.containsKey("chatWaitting"))for(var h=0;h<this.arrPlayer.length;h++)if(!1===this.arrPlayer[h].ktEmpty&&this.arrPlayer[h].getData().user_id===i){this.removeItemChatWaitting(i);var u=new CD(e.data.getUtfString("chatWaitting"),i,o);u.event.destroy.add(this.removeItemChatWaitting,this),u.x=this.arrPlayer[h].x+(155-u.width)/2,u.y=this.arrPlayer[h].y+48-u.height,this.addChatWaitting.addChild(u),this.objChatWaitting[i]=u,null!==this.listFriend&&this.listFriend.addChatRoom(e.data.getUtfString("chatWaitting"),t.getVariable("avatar").value,"",o),null!==this.choosePlayList&&this.choosePlayList.addChatRoom(e.data.getUtfString("chatWaitting"),t.getVariable("avatar").value,"",o);break}}}},{key:"removeItemChatWaitting",value:function(e){this.objChatWaitting.hasOwnProperty(e)&&(this.addChatWaitting.removeChild(this.objChatWaitting[e]),this.objChatWaitting[e].destroy(),this.objChatWaitting[e]=null,delete this.objChatWaitting[e])}},{key:"removeItemChat",value:function(e){e&&(this.addChatWaitting.removeChild(e),e.destroy(),e=null)}},{key:"buildUserJoinRoom",value:function(){var e=this;LogConsole.log("buildUserJoinRoom"),LogConsole.log(oe.instance().dataJoinRoom.room);var t=oe.instance().dataJoinRoom.room.getUserList();this.idRoom=oe.instance().dataJoinRoom.room.id,oe.instance().modeplay=oe.instance().dataJoinRoom.room.getVariable("mode").value,this.idMaster=oe.instance().dataJoinRoom.room.getVariable(qa.room_master).value,this.roomBet=oe.instance().dataJoinRoom.room.getVariable(qa.bet_place).value,LogConsole.log(" this.roomBet : "+this.roomBet),this.btnMucCuoc.setText(this.roomBet);for(var n=0;n<t.length;n++){var i=t[n],o=this.getDataPlayer(i);this.arrPlayer[n].setData(o,n),this.arrPlayer[n].setMaster(this.idMaster),o.user_id===this.idMaster&&(this.nameMaster=o.user_name),this.totalPlayerPlay++}this.header.setIdPhong(this.idRoom),this.header.setNguoiTao(this.nameMaster),this.checkShowMaster(),dV.instance().dataMySeft.user_id!==this.idMaster&&(this.removeTimeoutShowChoosePlayList(),this.idTimeOutShowPlayList=setTimeout(function(){e.addChoosePlayList()},800)),this.checkShowInviteFriend(),this.checkShowButtonChoi(),this.showButtonWaittingChat(),oe.instance().dataJoinRoom=null,ht.instance().hideLoading()}},{key:"showButtonWaittingChat",value:function(){!1===this.ktPlay&&(this.btnChatWaitting.visible=!0,dV.instance().dataMySeft.user_id===this.idMaster?this.btnChatWaitting.y=game.height-223:this.btnChatWaitting.y=game.height-116)}},{key:"hideButtonWaittingChat",value:function(){this.btnChatWaitting.visible=!1,this.btnChatWaitting.y=game.height}},{key:"showPlayGame",value:function(){var e=this;this.hideTextTrick(),LogConsole.log("showPlayGame");var t=[];2===this.totalPlayerPlay?t=this.arrLocalPlay2:3===this.totalPlayerPlay?t=this.arrLocalPlay3:4===this.totalPlayerPlay&&(t=this.arrLocalPlay4);var n=-1;this.arrChart={};for(var i=0;i<this.arrPlayer.length;i++)if(!1===this.arrPlayer[i].ktEmpty)n++,this.arrPlayer[i].hideLoading(),this.arrPlayer[i].setTextSanSang(""),this.arrPlayer[i].setScore(0),this.arrPlayer[i].setUserPlayGame(),game.add.tween(this.arrPlayer[i]).to({x:t[n].x,y:t[n].y},400,Phaser.Easing.Power1,!0),game.add.tween(this.arrPlayer[i].scale).to({x:.62,y:.62},400,Phaser.Easing.Power1,!0),game.time.events.add(.4*Phaser.Timer.SECOND,this.buidlChartUser,this,this.arrPlayer[i].getData().user_id,n,i,t);else{var o=0;o=i%2==0?-this.arrPlayer[i].width-200*oe.instance().scale:game.width+200*oe.instance().scale,game.add.tween(this.arrPlayer[i]).to({x:o},200,Phaser.Easing.Power1,!0)}setTimeout(function(){e.buildListMeAnswer(),e.addShowQuestion(e.idxQuestion)},600)}},{key:"buidlChartUser",value:function(e,t,n,i){var o=new QA;dV.instance().dataMySeft.user_id===e?o.addChart(!0):o.addChart(!1),o.x=i[t].x+2*oe.instance().scale,o.y=i[t].y+72*oe.instance().scale,o.height=0,this.addListChart.addChild(o),this.arrChart[n]=o,this.setChart(0,n)}},{key:"hideChart",value:function(){for(;this.addListChart.children.length>0;){var e=this.addListChart.children[0];this.addListChart.removeChild(e),e.destroy(),e=null}}},{key:"setChart",value:function(e,t){if(this.arrChart[t]){var n=55*oe.instance().scale+200*oe.instance().scale*e,i=223*oe.instance().scale-200*oe.instance().scale*e,o=i+72;game.add.tween(this.arrChart[t]).to({y:o,height:n},500,Phaser.Easing.Power1,!0),game.add.tween(this.arrPlayer[t]).to({y:i},500,Phaser.Easing.Power1,!0),this.objChat[this.arrPlayer[t].getData().user_id]&&null!=this.objChat[this.arrPlayer[t].getData().user_id]&&game.add.tween(this.objChat[this.arrPlayer[t].getData().user_id]).to({y:i-92*oe.instance().scale},500,Phaser.Easing.Power1,!0)}}},{key:"buildListMeAnswer",value:function(){for(;this.addMeAnswer.children.length>0;){var e=this.addMeAnswer.children[0];this.addMeAnswer.removeChild(e),e.destroy(),e=null}var t=0,n=25*oe.instance().scale;this.arrMeAnswer=[];for(var i=0;i<this.arrQuestion.length;i++){var o=new oL;o.x=t,o.y=n,this.addMeAnswer.addChild(o),t+=54*oe.instance().scale,game.add.tween(o).to({y:0},400,Phaser.Easing.Elastic.Out,!0,30*i,1),this.arrMeAnswer.push(o)}this.addMeAnswer.y=385*oe.instance().scale,this.addChild(this.addMeAnswer),this.addMeAnswer.x=(game.width-t)/2}},{key:"hideAnswerMe",value:function(){for(var e=0;e<this.arrMeAnswer.length;e++)game.add.tween(this.arrMeAnswer[e]).to({alpha:0},200,Phaser.Easing.Elastic.Out,!0)}},{key:"setMeAnswer",value:function(e){this.arrMeAnswer[e.idx].setData(e)}},{key:"setShowMeAnswerCurrent",value:function(e){this.arrMeAnswer[e].setBeginLoad()}},{key:"addShowQuestion",value:function(e){LogConsole.log("addShowQuestion"),this.removeShowQuestion(),this.setShowMeAnswerCurrent(e),this.showQuestion=new ZL(this.arrQuestion,e),this.showQuestion.addEventChooseAnswer(this.setMeAnswer,this),this.showQuestion.addEventShowQuestion(this.setShowMeAnswerCurrent,this),this.showQuestion.event.close.add(this.removeShowQuestion,this),this.showQuestion.x=0,this.showQuestion.y=game.height-700*oe.instance().scale,this.addChild(this.showQuestion)}},{key:"removeShowQuestion",value:function(){null!=this.showQuestion&&(this.removeChild(this.showQuestion),this.showQuestion.destroy(),this.showQuestion=null)}},{key:"addListSongResult",value:function(){this.removeListSongResult(),this.listSongResult=new hD(this.arrQuestion,this.roomBet),this.listSongResult.event.replay.add(this.showReplayGame,this),this.listSongResult.event.exit.add(this.chooseExit,this),this.listSongResult.event.close.add(this.removeListSongResult,this),this.listSongResult.y=game.height-515*oe.instance().scale,this.addChild(this.listSongResult)}},{key:"removeListSongResult",value:function(){null!==this.listSongResult&&(this.removeChild(this.listSongResult),this.listSongResult.destroy(),this.listSongResult=null)}},{key:"chooseExit",value:function(){ht.instance().showLoading(),dV.instance().sendData(sE.ONLINE_MODE_ROOM_GAME_FINISH,null)}},{key:"showTimeCountDown",value:function(e){this.removeTimeCountDown(),this.timecount=e,this.setTextCountDown(),this.timerCountDown=this.game.time.create(!0),this.timerEventCountDown=this.timerCountDown.loop(1e3,this.onTimerCountDown,this),this.timerCountDown.start()}},{key:"onTimerCountDown",value:function(){this.timecount--,this.setTextCountDown()}},{key:"setTextCountDown",value:function(){this.timecount>-1?(this.timecount<6&&(game.sound.stopAll(),game.sound.play("beep_audio")),this.ktCountDownPlay&&0===this.timecount?this.txtCounDown.text=de.instance().getData("63"):this.txtCounDown.text=this.timecount,this.txtCounDown.y=this.positionCreateRoom.waitting_txt_countdown.y*oe.instance().scale+80*oe.instance().scale,game.add.tween(this.txtCounDown).to({y:this.positionCreateRoom.waitting_txt_countdown.y*oe.instance().scale},200,Phaser.Easing.Elastic.Out,!0)):(this.ktCountDownPlay&&this.showPlayGame(),this.removeTimeCountDown())}},{key:"removeTimeCountDown",value:function(){null!==this.timerCountDown&&(game.time.events.remove(this.timerEventCountDown),this.timerEventCountDown=null,this.timerCountDown.stop(),this.timerCountDown.destroy(),this.timerCountDown=null),this.txtCounDown.text=""}},{key:"hideHeader",value:function(){this.header.setHideBtnBack(),this.header.y=0,game.add.tween(this.header).to({y:-180*oe.instance().scale},300,Phaser.Easing.Power1,!0)}},{key:"showHeader",value:function(){this.header.setShowBtnBack(),this.header.y=-180*oe.instance().scale,game.add.tween(this.header).to({y:0},300,Phaser.Easing.Power1,!0)}},{key:"showTextTrick",value:function(){this.txtTrick.visible=!0}},{key:"hideTextTrick",value:function(){this.txtTrick.visible=!1}},{key:"checkShowMaster",value:function(){LogConsole.log("checkShowMaster : "+dV.instance().dataMySeft.user_id),!1===this.ktPlay&&(dV.instance().dataMySeft.user_id===this.idMaster?(this.btnMoiBan.visible=!0,this.btnMoiBan.y=game.height,game.add.tween(this.btnMoiBan).to({y:game.height-123*oe.instance().scale},300,Phaser.Easing.Power1,!0,100),this.btnChoi.visible=!0,this.btnChoi.inputEnabled=!0,this.btnChoi.y=game.height,game.add.tween(this.btnChoi).to({y:game.height-123*oe.instance().scale},300,Phaser.Easing.Power1,!0,100)):(this.btnMoiBan.visible=!1,this.btnChoi.visible=!1))}},{key:"hideButtonMaster",value:function(){!0===this.ktPlay&&dV.instance().dataMySeft.user_id===this.idMaster&&(this.btnMoiBan.visible=!0,this.btnMoiBan.y=game.height-123*oe.instance().scale,game.add.tween(this.btnMoiBan).to({y:game.height},300,Phaser.Easing.Power1,!0,100),this.btnChoi.visible=!0,this.btnChoi.y=game.height-123*oe.instance().scale,game.add.tween(this.btnChoi).to({y:game.height},300,Phaser.Easing.Power1,!0,100))}},{key:"checkShowInviteFriend",value:function(){if(!1===this.ktPlay&&dV.instance().dataMySeft.user_id===this.idMaster){for(var e=0,t=0;t<this.arrPlayer.length;t++)!1===this.arrPlayer[t].ktEmpty&&e++;e<4?this.showButtonMoiBan():(this.hideButtonMoiBan(),this.removeListFriend())}}},{key:"checkShowButtonChoi",value:function(){if(!1===this.ktPlay&&dV.instance().dataMySeft.user_id===this.idMaster){LogConsole.log("checkShowButtonChoi");for(var e=0,t=0,n=0;n<this.arrPlayer.length;n++)!1===this.arrPlayer[n].ktEmpty&&(e++,!0===this.arrPlayer[n].getData().online_mode_room_ready?t++:!0===this.arrPlayer[n].getData().isMaster&&t++);LogConsole.log("countReady : "+t),LogConsole.log("countPlayer : "+e),1===e?this.hideButtonChoi():t===e?this.showButtonChoi():this.hideButtonChoi()}}},{key:"getDataPlayer",value:function(e){var t=new FI;return t.user_id=e.getVariable(qa.user_id).value,t.user_name=e.getVariable(qa.user_name).value,t.avatar=e.getVariable(qa.avatar).value,t.online_mode_room_ready=e.getVariable(qa.online_mode_room_ready).value,t.vip=e.getVariable(qa.vip).value,t.user_id===this.idMaster?t.isMaster=!0:t.isMaster=!1,t}},{key:"getData",value:function(e){switch(e.cmd){case sE.ONLINE_MODE_ROOM_PLAYLIST_RESPONSE:break;case sE.ONLINE_MODE_ROOM_SERVER_QUESTIONS_RESPONSE:if(!1===this.ktPlay){this.hideBetRoom(),this.ktStart=!1,this.resetArrayScore(),this.ktCountDownPlay=!1,this.ktPlay=!0,dV.instance().sendLoading(1),this.hideButtonMaster(),this.hideHeader(),this.showTextTrick();for(var t=0;t<this.arrPlayer.length;t++)this.arrPlayer[t].setPlay(!0);this.arrQuestion=lA.begin(e.params)}break;case sE.ONLINE_MODE_ROOM_GAME_START:this.hideButtonWaittingChat(),this.hideKeyBoard(),Ei.instance().playCreateRoom(),this.hideButtonMoiBan(),this.hideButtonChoi(),this.startTime=this.getTime(),He.instance().logEvent(He.pro_quiz_start_createroom),this.ktStart=!0,this.ktCountDownPlay=!0,this.idxQuestion=e.params.getInt(b_.question_index)-1,this.showTimeCountDown(3),jC.instance().removeUserProfile();break;case sE.ONLINE_MODE_ROOM_USER_SELECTED_ANSWER_RESPONSE:this.setScorePlayer(e.params);break;case sE.ONLINE_MODE_ROOM_GAME_RESULT:this.endTime=this.getTime();var n=parseInt((this.endTime-this.startTime)/1e3);He.instance().logEvent(He.play_time,n),He.instance().logEvent(He.pro_quiz_end_createroom),this.removeShowResult(),this.idShowResult=game.time.events.add(2*Phaser.Timer.SECOND,this.showResult,this,e.params);break;case sE.ONLINE_MODE_ROOM_QUICK_JOIN_RESPONSE:}}},{key:"removeShowResult",value:function(){null!==this.idShowResult&&(game.time.events.remove(this.idShowResult),this.idShowResult=null)}},{key:"showReplayGame",value:function(){var e=this;if(!0===this.ktReplay){this.lineWin.visible=!1,this.txtWin.visible=!1,this.showHeader(),this.checkShowMaster(),this.removeEffectWin(),this.hideButtonChoi(),this.hideButtonMoiBan(),this.showBetRoom(),this.button_share.visible=!1;for(var t=0;t<this.arrPlayer.length;t++)this.arrPlayer[t].setDefaultUser(),!1===this.arrPlayer[t].ktEmpty&&this.arrPlayer[t].setTextMaster(),game.add.tween(this.arrPlayer[t]).to({x:this.arrLocal[t].x,y:this.arrLocal[t].y},300,Phaser.Easing.Power1,!0),game.add.tween(this.arrPlayer[t].scale).to({x:1,y:1},300,Phaser.Easing.Power1,!0);this.removeTimeoutShowChoosePlayList(),this.idTimeOutShowPlayList=setTimeout(function(){e.addChoosePlayList()},800)}}},{key:"showResult",value:function(e){game.sound.stopAll(),this.ktReplay=!1,this.lineWin.visible=!0,this.txtWin.visible=!0,this.ktPlay=!1,VL.begin(e,this.arrPlayer);var t=[];this.arrScore[0].score>0?2===this.totalPlayerPlay?t=this.arrLocalResult2:3===this.totalPlayerPlay?t=this.arrLocalResult3:4===this.totalPlayerPlay&&(t=this.arrLocalResult4):2===this.totalPlayerPlay?t=this.arrLocalResultAllLose2:3===this.totalPlayerPlay?t=this.arrLocalResultAllLose3:4===this.totalPlayerPlay&&(t=this.arrLocalResultAllLose4);var n=-1,i=0,o=0,a=0;this.button_share.visible=!0,this.showQuestion.hideQuestion(),this.hideAnswerMe(),this.hideChart(),this.addListSongResult();for(var s=0;s<this.arrScore.length;s++)!1===this.arrPlayer[this.arrScore[s].idx].ktEmpty&&(0===s?this.arrScore[0].score>0?(i=this.arrLocalResultWin.x,o=this.arrLocalResultWin.y,a=.76,this.arrPlayer[this.arrScore[s].idx].setButtonWin(!0,this.roomBet),this.removeShowResult(),this.idShowResult=game.time.events.add(.8*Phaser.Timer.SECOND,this.addEffectUserWin,this,this.arrPlayer[this.arrScore[s].idx]),this.arrPlayer[this.arrScore[s].idx].getData().user_id===dV.instance().dataMySeft.user_id&&be.instance().playSound(be.winturnbasepartymode)):(i=t[++n].x,o=t[n].y,a=.61,this.arrPlayer[this.arrScore[s].idx].setButtonWin(!1),this.ktReplay=!0,this.listSongResult.ktReplay=!0):(i=t[++n].x,o=t[n].y,a=.61,this.arrPlayer[this.arrScore[s].idx].setButtonWin(!1),this.arrPlayer[this.arrScore[s].idx].getData().user_id===dV.instance().dataMySeft.user_id&&be.instance().playSound(be.loseturnbasepartymode)),game.add.tween(this.arrPlayer[this.arrScore[s].idx]).to({x:i,y:o},500,Phaser.Easing.Power1,!0,200),game.add.tween(this.arrPlayer[this.arrScore[s].idx].scale).to({x:a,y:a},500,Phaser.Easing.Power1,!0,200));for(var r=0;r<this.arrPlayer.length;r++)this.arrPlayer[r].setPlay(!1),!0===this.arrPlayer[r].ktDisConnect&&(this.arrPlayer[r].setEmpty(),this.totalPlayerPlay--)}},{key:"addEffectUserWin",value:function(e){this.removeEffectWin(),this.rotationWin=new Bt(this.positionCreateRoom.light_rotation_list_result),this.rotationWin.anchor.set(.5),this.addListChart.addChild(this.rotationWin),this.rotationWin.x=e.x+60*oe.instance().scale,this.rotationWin.y=e.y+100*oe.instance().scale,this.tweenRotationwin=game.add.tween(this.rotationWin).to({rotation:360},2e3,Phaser.Easing.Power1,!0),this.tweenRotationwin.repeat(99999,250),this.firework=new Phaser.Sprite(game,0,0,"firework"),this.firework.width=430*oe.instance().scale,this.firework.height=228*oe.instance().scale,this.firework.x=103*oe.instance().scale,this.firework.y=106*oe.instance().scale,this.firework.animations.add("playfirework"),this.firework.animations.play("playfirework",30,!0),this.addListChart.addChild(this.firework),this.ktReplay=!0,this.listSongResult.ktReplay=!0}},{key:"removeEffectWin",value:function(){if(this.addListChart.children)for(;this.addListChart.children.length>0;){var e=this.addListChart.children[0];this.addListChart.removeChild(e),e.destroy(),e=null}}},{key:"setScorePlayer",value:function(e){if(LogConsole.log("setScorePlayer : "+e.getDump()),"OK"===e.getUtfString(qa.status)){LogConsole.log(1);for(var t=0;t<this.arrPlayer.length;t++)if(!1===this.arrPlayer[t].ktEmpty){LogConsole.log(2);var n=this.arrPlayer[t].getData(),i=e.getInt(qa.user_id);if(n.user_id===i){var o=e.getInt(qa.score),a=e.getBool(qa.is_correct_answer);this.arrPlayer[t].setScore(o),!0===a?this.arrPlayer[t].setTrueAnswer():this.arrPlayer[t].setFailtAnswer();for(var s=0;s<this.arrScore.length;s++)if(this.arrScore[s].idx==t){this.arrScore[s].score=o;break}break}}}this.arrScore.sort(this.compare);var r=this.arrScore[0].score;if(r>0){this.setChart(1,this.arrScore[0].idx);for(var l=1;l<this.arrScore.length;l++)!1===this.arrPlayer[this.arrScore[l].idx].ktEmpty&&this.setChart(this.arrScore[l].score/r,this.arrScore[l].idx)}}},{key:"addChoosePlayList",value:function(){this.removeChoosePlayList(),this.choosePlayList=new LI,this.choosePlayList.setBetMoney(this.roomBet),this.choosePlayList.setIsMaster(!1),this.choosePlayList.addEvent(),this.choosePlayList.event.back.add(this.removeChoosePlayList,this),this.addChild(this.choosePlayList),this.checkShowButtonChoi(),this.checkShowInviteFriend(),this.showButtonWaittingChat()}},{key:"removeChoosePlayList",value:function(){null!==this.choosePlayList&&(this.removeChild(this.choosePlayList),this.choosePlayList.destroy(),this.choosePlayList=null)}},{key:"onRoomVarsUpdate",value:function(e){if(LogConsole.log("onRoomVarsUpdate"),-1!=e.changedVars.indexOf("room_master")){this.idMaster=e.room.getVariable("room_master").value,dV.instance().dataMySeft.user_id===this.idMaster&&(this.isMaster=!0,!1===this.ktPlay&&jC.instance().addDialog(de.instance().getData("68"))),LogConsole.log("isMaster : "+this.idMaster),null===this.listSongResult&&(this.checkShowMaster(),this.checkShowInviteFriend(),this.checkShowButtonChoi(),this.showButtonWaittingChat());for(var t=0;t<this.arrPlayer.length;t++)!1===this.arrPlayer[t].ktEmpty&&(this.arrPlayer[t].idMaster=this.idMaster,this.arrPlayer[t].getData().user_id===this.idMaster?(this.arrPlayer[t].getData().isMaster=!0,this.nameMaster=this.arrPlayer[t].getData().user_name,this.arrPlayer[t].setCurrentData(this.arrPlayer[t].getData())):(this.arrPlayer[t].getData().isMaster=!1,this.arrPlayer[t].setCurrentData(this.arrPlayer[t].getData())),null===this.listSongResult&&!1===this.ktPlay&&this.arrPlayer[t].setTextMaster());this.header.setNguoiTao(this.nameMaster)}}},{key:"userVarsUpdate",value:function(e){var t=null,n=null;if(-1!==e.changedVars.indexOf(qa.online_mode_loaded)&&(t=e.user,n=this.getDataPlayer(t),!0===this.ktPlay))for(var i=t.getVariable(qa.online_mode_loaded).value,o=0;o<this.arrPlayer.length;o++){var a=this.arrPlayer[o];!1===a.ktEmpty&&a.getData().user_id===n.user_id&&i>0&&a.setLoading(i)}if(-1!==e.changedVars.indexOf(qa.online_mode_room_ready)){t=e.user,n=this.getDataPlayer(t),!0===t.isItMe&&!0===n.online_mode_room_ready&&null!==this.choosePlayList&&this.removeChoosePlayList();for(var s=0;s<this.arrPlayer.length;s++){var r=this.arrPlayer[s];if(!1===r.ktEmpty)if(r.getData().user_id==n.user_id){this.arrPlayer[s].setCurrentData(n),!1===this.ktPlay&&r.setTextMaster();break}}this.checkShowButtonChoi()}}},{key:"userEnterRoom",value:function(e){if(LogConsole.log("userEnterRoom------"),e.room.isGame){var t=e.user;LogConsole.log(t);for(var n=this.getDataPlayer(t),i=0;i<this.arrPlayer.length;i++)if(!0===this.arrPlayer[i].ktEmpty){this.arrPlayer[i].setMaster(this.idMaster),this.arrPlayer[i].setData(n,i),this.totalPlayerPlay++;break}}this.checkShowButtonChoi(),this.checkShowInviteFriend()}},{key:"userExitRoom",value:function(e){if(LogConsole.log("userExitRoom------ : "+e.user.isItMe),LogConsole.log(e.user),e.room.isGame)if(e.user.isItMe)this.event.back.dispatch();else{var t=e.user;LogConsole.log(t);for(var n=t.getVariable(qa.user_id).value,i=0;i<this.arrPlayer.length;i++)if(!1===this.arrPlayer[i].ktEmpty){var o=this.arrPlayer[i].getData();if(o.user_id===n){this.ktPlay?(this.ktStart,o.user_id=-1,this.arrPlayer[i].setCurrentData(o),this.arrPlayer[i].setDisConnect()):(this.arrPlayer[i].setEmpty(),this.totalPlayerPlay--);break}}this.checkShowButtonChoi(),this.checkShowInviteFriend()}}},{key:"buildListPlayer",value:function(){this.arrPlayer=[];for(var e=0;e<this.arrLocal.length;e++){var t=new iA;t.setEmpty(),t.setIdx(e),t.event.click_avatar.add(this.click_avatar,this),t.event.choose_invite.add(this.addListFriend,this),t.x=e%2==0?-t.width-200*oe.instance().scale:game.width+200*oe.instance().scale,t.y=this.arrLocal[e].y,game.add.tween(t).to({x:this.arrLocal[e].x},250,Phaser.Easing.Power1,!0,400),this.addChild(t),this.arrPlayer.push(t)}}},{key:"click_avatar",value:function(e){for(var t=0;t<this.arrPlayer.length;t++)this.arrPlayer[t].getIdx()===e||this.arrPlayer[t].setCheckHideKichTween()}},{key:"addListFriend",value:function(){dV.instance().dataMySeft.user_id===this.idMaster&&!1===this.ktPlay&&(this.removeListFriend(),this.listFriend=new jA(this.idRoom,this.totalPlayerPlay),this.listFriend.event.back.add(this.backListFriend,this),this.addChild(this.listFriend))}},{key:"backListFriend",value:function(){Ch.instance().beginSwitch(this.listFriend,null,!1),Ch.instance().event.tweenComplete.add(this.tweenListFriendComplete,this)}},{key:"tweenListFriendComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenListFriendComplete,this),this.removeListFriend()}},{key:"removeListFriend",value:function(){null!==this.listFriend&&(this.removeChild(this.listFriend),this.listFriend.destroy(),this.listFriend=null)}},{key:"addQuickChat",value:function(){this.removeQuickChat(),this.quickChat=new MD,this.quickChat.event.close.add(this.removeQuickChat,this),this.quickChat.event.show_chat.add(this.chooseChatWatting,this),this.quickChat.y=game.height-this.quickChat.height,this.addChild(this.quickChat)}},{key:"removeQuickChat",value:function(){null!==this.quickChat&&(this.removeChild(this.quickChat),this.quickChat.destroy(),this.quickChat=null)}},{key:"chooseChatWatting",value:function(){this.removeQuickChat();Ir.instance().show({maxLength:"",showTransparent:!0,placeholder:"Chat",isSearch:!1}),Ir.instance().event.enter.add(this.onSubmit,this),Ir.instance().event.submit.add(this.onSubmit,this),Ir.instance().event.cancle.add(this.onCancel,this)}},{key:"hideKeyBoard",value:function(){Ir.instance().hide(),Ir.instance().event.enter.remove(this.onSubmit,this),Ir.instance().event.submit.remove(this.onSubmit,this),Ir.instance().event.cancle.remove(this.onCancel,this)}},{key:"onSubmit",value:function(){var e=Ir.instance().getValue();if(""!==e){var t=new SFS2X.SFSObject;t.putUtfString("chatWaitting",e),dV.instance().sendPublicChat(ki.CHAT_ONLINE_MODE,t)}this.onCancel()}},{key:"onCancel",value:function(){this.hideKeyBoard()}},{key:"chooseChoi",value:function(){LogConsole.log("chooseChoi"),dV.instance().dataMySeft.diamond<this.roomBet?jC.instance().addDialogConfirnMoney(de.instance().getData("69"),"chooseCanclePopupMoney"):(this.btnChoi.inputEnabled=!1,dV.instance().sendData(sE.ONLINE_MODE_ROOM_START_GAME_REQUEST,null))}},{key:"chooseMoiBan",value:function(){LogConsole.log("chooseMoiBan"),this.addListFriend()}},{key:"chooseBack",value:function(){!0===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&null!==this.listFriend||!1===this.ktPlay&&!1===this.checkSendExit&&(this.checkSendExit=!0,ht.instance().showLoading(),dV.instance().sendExitRoom())}},{key:"removeTimeoutShowChoosePlayList",value:function(){null!==this.idTimeOutShowPlayList&&clearTimeout(this.idTimeOutShowPlayList)}},{key:"destroy",value:function(){this.removeShowResult(),rn.instance().resetLoad(),rl.instance().removeAllSound(),this.removeTimeoutShowChoosePlayList(),this.removeEvent(),this.removeAllItem(),this.hideKeyBoard(),UD(FD(t.prototype),"destroy",this).call(this)}}])&&BD(n.prototype,i),o&&BD(n,o),t}();function VD(e){return(VD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WD(e,t){return!t||"object"!==VD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qD(e,t,n){return(qD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KD(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function KD(e){return(KD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zD(e,t){return(zD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var YD=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=WD(this,KD(t).call(this,game,null))).event={back:new Phaser.Signal,quickplay:new Phaser.Signal},n.ktBack=e,n.nameState="",n.screenChooseMode=null,n.screenCreateRoom=null,n.screenPlaying=null,n.checkDataRoom(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zD(e,t)}(t,Je),n=t,(i=[{key:"checkShowInvite",value:function(e){console.log("checkShowInvite onlinemode "),"choosemode"===this.nameState&&!1===ih.instance().getUserBlock(e.getInt("inviter_id"))&&jC.instance().addDialogInviteFriend(e,!0)}},{key:"checkDataRoom",value:function(){LogConsole.log("checkDataRoom--------------"),LogConsole.log(oe.instance().dataJoinRoom),null!==oe.instance().dataJoinRoom?this.addScreenPlayRoom():this.addScreenChooseMode()}},{key:"addScreenChooseMode",value:function(){this.removeScreenChooseMode(),this.nameState="choosemode",this.screenChooseMode=new zT,this.screenChooseMode.event.create_room.add(this.addScreenCreateRoom,this),this.screenChooseMode.event.close.add(this.backToMainMenu,this),this.screenChooseMode.event.quick_play.add(this.addScreenQuickPlay,this),this.addChild(this.screenChooseMode),null!==this.screenCreateRoom?this.removeScreenCreateRoom():null!==this.screenPlaying?this.removeScreenPlayRoom():0==this.ktBack&&Ch.instance().beginSwitch(null,this.screenChooseMode,!1)}},{key:"removeScreenChooseMode",value:function(){null!==this.screenChooseMode&&(this.removeChild(this.screenChooseMode),this.screenChooseMode.destroy(),this.screenChooseMode=null)}},{key:"addScreenCreateRoom",value:function(){this.removeScreenCreateRoom(),this.nameState="createroom",this.screenCreateRoom=new UI,this.screenCreateRoom.event.back.add(this.addScreenChooseMode,this),this.addChild(this.screenCreateRoom),null!==this.screenChooseMode&&this.removeScreenChooseMode(),null!==this.screenPlaying&&this.removeScreenPlayRoom()}},{key:"removeScreenCreateRoom",value:function(){null!==this.screenCreateRoom&&(this.removeChild(this.screenCreateRoom),this.screenCreateRoom.destroy(),this.screenCreateRoom=null)}},{key:"addScreenQuickPlay",value:function(){this.event.quickplay.dispatch()}},{key:"addScreenPlayRoom",value:function(){this.removeScreenPlayRoom(),this.nameState="playroom",this.screenPlaying=new HD,this.screenPlaying.event.back.add(this.addScreenChooseMode,this),this.addChild(this.screenPlaying),null!==this.screenCreateRoom&&(Ch.instance().beginSwitch(this.screenCreateRoom,this.screenPlaying,!1),Ch.instance().event.tweenComplete.add(this.onCompleteTweenScreenCreateRoom,this)),null!==this.screenChooseMode&&this.removeScreenChooseMode()}},{key:"removeScreenPlayRoom",value:function(){null!==this.screenPlaying&&(this.removeChild(this.screenPlaying),this.screenPlaying.destroy(),this.screenPlaying=null)}},{key:"onCompleteTweenScreenCreateRoom",value:function(){Ch.instance().event.tweenComplete.remove(this.onCompleteTweenScreenCreateRoom,this),this.removeScreenCreateRoom()}},{key:"onCompleteTweenScreenChooseMode",value:function(){Ch.instance().event.tweenComplete.remove(this.onCompleteTweenScreenChooseMode,this),this.removeScreenChooseMode()}},{key:"onCompleteTweenScreenPlaying",value:function(){Ch.instance().event.tweenComplete.remove(this.onCompleteTweenScreenPlaying,this),this.removeScreenPlayRoom()}},{key:"backToMainMenu",value:function(){FH.instance().changeScreen(De.MAIN_MENU,{})}},{key:"destroy",value:function(){this.onCompleteTweenScreenChooseMode(),this.onCompleteTweenScreenCreateRoom(),this.onCompleteTweenScreenChooseMode(),qD(KD(t.prototype),"destroy",this).call(this)}}])&&QD(n.prototype,i),o&&QD(n,o),t}();function XD(e){return(XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $D(e,t){return!t||"object"!==XD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eG(e,t,n){return(eG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tG(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function tG(e){return(tG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nG(e,t){return(nG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var iG=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=$D(this,tG(t).call(this,game,0,0,null,n,i))).positionCreateRoom=oe.instance().positionCreateRoom,o.defaultBg=new Dn(o.positionCreateRoom.quickplay_tab_btn_default),o.addChild(o.defaultBg),o.activeBg=new Dn(o.positionCreateRoom.quickplay_tab_btn_active),o.addChild(o.activeBg),o.lineActive=new Bt(o.positionCreateRoom.quickplay_tab_line),o.addChild(o.lineActive),o.lb=new Qt(o.positionCreateRoom.quickplay_tab_btn_label,e),o.lb.setTextBounds(0,0,o.defaultBg.width,o.defaultBg.height),o.addChild(o.lb),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nG(e,t)}(t,Phaser.Button),n=t,(i=[{key:"setActiveBet",value:function(){this.activeBg.width=game.width,this.activeBg.height=100*oe.instance().scale,this.lb.setTextBounds(0,0,this.activeBg.width,this.activeBg.height),this.lineActive.width=this.activeBg.targetWidth,this.activeBg.visible=!0,this.lineActive.visible=!0,this.defaultBg.visible=!1}},{key:"setActive",value:function(){this.activeBg.visible=!0,this.lineActive.visible=!0,this.defaultBg.visible=!1}},{key:"setDefault",value:function(){this.activeBg.visible=!1,this.lineActive.visible=!1,this.defaultBg.visible=!0}},{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),eG(tG(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"width",get:function(){return this.activeBg.width}},{key:"height",get:function(){return this.activeBg.height}}])&&JD(n.prototype,i),o&&JD(n,o),t}();function oG(e){return(oG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sG(e,t){return!t||"object"!==oG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rG(e){return(rG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lG(e,t){return(lG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cG=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sG(this,rG(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lG(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.event={choose:new Phaser.Signal},this.type=oe.instance().typeMenuGenes,this.btnVN=new iG(dv.getNameRegion(dv.Local),this.clickVN,this),this.addChild(this.btnVN),this.btnQuocTe=new iG(dv.getNameRegion(dv.International),this.clickQuocTe,this),this.btnQuocTe.x=this.btnVN.width,this.addChild(this.btnQuocTe),this.type==dv.Local?(this.btnVN.setActive(),this.btnQuocTe.setDefault()):(this.btnVN.setDefault(),this.btnQuocTe.setActive())}},{key:"clickVN",value:function(e){this.type==dv.International&&(this.type=dv.Local,this.btnQuocTe.setDefault(),this.btnVN.setActive(),this.event.choose.dispatch(this.type))}},{key:"clickQuocTe",value:function(e){this.type==dv.Local&&(this.type=dv.International,this.btnVN.setDefault(),this.btnQuocTe.setActive(),this.event.choose.dispatch(this.type))}}])&&aG(n.prototype,i),o&&aG(n,o),t}();function hG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var uG=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){for(var n=t.getSFSArray(b_.genres_user_count),i=0;i<n.size();i++)for(var o=n.getSFSObject(i),a=0;a<e.length;a++)if(e[a].id===o.getInt(b_.genre_id)){e[a].number_player=o.getInt(b_.number_player);break}return e}}],(n=null)&&hG(t.prototype,n),i&&hG(t,i),e}();function dG(e){return(dG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pG(e,t){return!t||"object"!==dG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gG(e,t,n){return(gG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yG(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function yG(e){return(yG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mG(e,t){return(mG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vG=function(e){function t(e,n,i,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=pG(this,yG(t).call(this,game,0,0,null,i,o))).idx=n,a.data=e,LogConsole.log(e),a.positionIsNewUserConfig=JSON.parse(game.cache.getText("positionIsNewUserConfig")),a.positionCreateRoom=oe.instance().positionCreateRoom,a.objSprite=a.positionIsNewUserConfig.chooseMain.genres;var s=a.objSprite.nhac_tre;a.objSprite.hasOwnProperty(e.code)&&(s=a.objSprite[e.code]),LogConsole.log(s),a.bgGenres=new Bt(s),a.addChild(a.bgGenres),e.hasOwnProperty("number_player")?a.countPlayer=new qn(a.positionCreateRoom.quickplay_bg_count_player,e.number_player):a.countPlayer=new qn(a.positionCreateRoom.quickplay_bg_count_player,"0"),a.addChild(a.countPlayer);return a.idx%2==0?(a.x=-a.width-118*oe.instance().scale,35*oe.instance().scale):(a.x=2*a.width+179*oe.instance().scale,a.width+61*oe.instance().scale),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mG(e,t)}(t,Phaser.Button),n=t,(i=[{key:"setEffect",value:function(){LogConsole.log("setEffect"+this.idx);var e=0;this.idx%2==0?(this.x=-this.width-118*oe.instance().scale,e=35*oe.instance().scale):(this.x=2*this.width+179*oe.instance().scale,e=this.width+61*oe.instance().scale),game.add.tween(this).to({x:e},200,Phaser.Easing.Power1,!0,150+50*(this.idx+1))}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){this.data=e,this.countPlayer.setText(e.number_player)}},{key:"onInputDownHandler",value:function(){LogConsole.log("onInputDownHandler------------"),gG(yG(t.prototype),"onInputDownHandler",this).call(this),be.instance().playSound(be.buttonclick)}},{key:"destroy",value:function(){gG(yG(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return this.bgGenres.width}},{key:"height",get:function(){return this.bgGenres.height}}])&&fG(n.prototype,i),o&&fG(n,o),t}();function wG(e){return(wG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _G(e,t){return!t||"object"!==wG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function SG(e,t,n){return(SG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EG(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function EG(e){return(EG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CG(e,t){return(CG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kG=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_G(this,EG(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CG(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){ht.instance().showLoading(),this.event={back:new Phaser.Signal,next_bet:new Phaser.Signal},this.typeMenu=oe.instance().typeMenuGenes,this.arrItem=[],this.positionCreateRoom=oe.instance().positionCreateRoom,this.bg=new Phaser.Button(game,0,0,"bg_create_room"),this.addChild(this.bg),this.parenItem=game.add.group();var e={column:2,width:game.width,height:game.height-235*oe.instance().scale,rowHeight:160*oe.instance().scale,leftDistance:27*oe.instance().scale,direction:"y",distanceBetweenColumns:36*oe.instance().scale,distanceBetweenRows:36*oe.instance().scale};this.scroll=new fy(e),this.scroll.y=240*oe.instance().scale,this.addChild(this.scroll),this.header=new ZT,this.header.event.back.add(this.chooseBack,this),this.header.setDiamond(),this.addChild(this.header),this.menu=new cG,this.menu.event.choose.add(this.chooseGenres,this),this.menu.y=100*oe.instance().scale,this.addChild(this.menu)}},{key:"chooseGenres",value:function(e){this.typeMenu=e,oe.instance().typeMenuGenes=this.typeMenu,this.buildListGenres()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),_t.instance().getGenresAll(),_t.instance().event.get_data_genres_complete.add(this.getDataGenresComplete,this),Ei.instance().showBanerQuickPlayModeRoomScreen()}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getDataGenresComplete",value:function(e){_t.instance().event.get_data_genres_complete.remove(this.getDataGenresComplete,this),this.dataGenres=e,this.buildListGenres()}},{key:"getData",value:function(e){switch(e.cmd){case sL.ONLINE_MODE_GENRES_RESPONSE:case sL.ONLINE_MODE_USER_COUNT_BROADCAST:break;case sL.ONLINE_MODE_COUNT_USER_ONLINE_RESPONSE:this.dataGenres=uG.begin(this.dataGenres,e.params),this.buildListGenresUpdate()}}},{key:"buildListGenres",value:function(){ht.instance().showLoading(),this.arrItem=[];for(var e=-1,t=0;t<this.dataGenres.length;t++){var n=this.dataGenres[t];if(n.region===this.typeMenu){var i=new vG(n,++e,this.chooseItem,this);this.arrItem.push(i)}}this.scroll.viewList=this.arrItem;for(var o=0;o<this.arrItem.length;o++){this.arrItem[o].setEffect()}game.time.events.add(100,this.buildHideLoading,this),dV.instance().sendData(sL.ONLINE_MODE_COUNT_USER_ONLINE_REQUEST,null)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"chooseItem",value:function(e){LogConsole.log("chooseItem ------ ");var t=e.getData();this.event.next_bet.dispatch(t)}},{key:"buildListGenresUpdate",value:function(){console.log(this.dataGenres);for(var e=0;e<this.arrItem.length;e++)for(var t=this.arrItem[e],n=t.getData(),i=0;i<this.dataGenres.length;i++){var o=this.dataGenres[i];if(o.id===n.id){t.setData(o);break}}}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"removeAllParentItem",value:function(){if(this.parenItem.children)for(;this.parenItem.children.length>0;){var e=this.parenItem.children[0];this.removeChild(e),e.destroy(),e=null}}},{key:"destroy",value:function(){this.removeEvent(),this.scroll.destroy(),this.removeAllParentItem(),this.removeAllItem(),Ei.instance().hideBanner(),SG(EG(t.prototype),"destroy",this).call(this)}}])&&bG(n.prototype,i),o&&bG(n,o),t}();function PG(e){return(PG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OG(e){return(OG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xG(e,t,n){return t&&RG(e.prototype,t),n&&RG(e,n),e}function TG(e,t){return(TG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function IG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var AG=function(e){function t(e){var n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=OG(t).call(this,game,null))||"object"!==PG(o)&&"function"!=typeof o?IG(i):o).event={backBet:new Phaser.Signal,backGenres:new Phaser.Signal},n.positionCreateRoom=oe.instance().positionCreateRoom,n.bgTree=new iG(""),n.bgTree.setActiveBet(),n.addChild(n.bgTree),n.lbBackGennes=new Qt(n.positionCreateRoom.quickplay_txt_button_back_menu_visilbe,a),n.lbBackGennes.x=33*oe.instance().scale,n.lbBackGennes.y=39*oe.instance().scale,n.lbBackGennes.setButton(n.backToGenres,IG(IG(n))),n.addChild(n.lbBackGennes),n.iconArraow=new Bt(n.positionCreateRoom.quickplay_arrow_back_menu),n.iconArraow.x=n.lbBackGennes.x+n.lbBackGennes.width+12*oe.instance().scale,n.iconArraow.y=n.lbBackGennes.y+(n.lbBackGennes.height-n.iconArraow.height)/2,n.addChild(n.iconArraow),e===t.TREE_BET?n.lbGennes=new Qt(n.positionCreateRoom.quickplay_txt_button_back_menu,s):(n.lbGennes=new Qt(n.positionCreateRoom.quickplay_txt_button_back_menu_visilbe,s),n.lbGennes.setButton(n.backToBets,IG(IG(n)))),n.lbGennes.y=n.lbBackGennes.y,n.lbGennes.x=n.iconArraow.x+n.iconArraow.width+12*oe.instance().scale,n.addChild(n.lbGennes),e===t.TREE_PLAYLIST&&(n.iconArraow1=new Bt(n.positionCreateRoom.quickplay_arrow_back_menu),n.iconArraow1.x=n.lbGennes.x+n.lbGennes.width+12*oe.instance().scale,n.iconArraow1.y=n.lbGennes.y+(n.lbGennes.height-n.iconArraow1.height)/2,n.addChild(n.iconArraow1),n.lbPlayerList=new Qt(n.positionCreateRoom.quickplay_txt_button_back_menu,de.instance().getData("54")),n.lbPlayerList.y=n.lbBackGennes.y,n.lbPlayerList.x=n.iconArraow1.x+n.iconArraow1.width+12*oe.instance().scale,n.addChild(n.lbPlayerList)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TG(e,t)}(t,Je),xG(t,null,[{key:"TREE_BET",value:function(){return"TREE_BET"}},{key:"TREE_PLAYLIST",value:function(){return"TREE_PLAYLIST"}}]),xG(t,[{key:"backToGenres",value:function(){this.event.backGenres.dispatch()}},{key:"backToBets",value:function(){LogConsole.log("backToBets"),this.event.backBet.dispatch()}}]),t}();function LG(e){return(LG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function GG(e,t,n){return(GG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MG(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function MG(e){return(MG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NG(e,t){return(NG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jG=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,n=!(o=MG(t).call(this,game,null))||"object"!==LG(o)&&"function"!=typeof o?BG(i):o,ht.instance().showLoading(),n.dataGennes=e,n.event={back:new Phaser.Signal,backGenres:new Phaser.Signal,choose_bet:new Phaser.Signal},n.bg=new Phaser.Button(game,0,0,"bg_create_room"),n.addChild(n.bg),n.tabTree=new AG(AG.TREE_BET,dv.getNameRegion(n.dataGennes.region),n.dataGennes.genre),n.tabTree.event.backGenres.add(n.chooseBackToGenres,BG(BG(n))),n.tabTree.y=100*oe.instance().scale,n.addChild(n.tabTree);var a=new Phaser.Group(game,0,0,null);return n.listBet=new Ia(game,a,new Phaser.Rectangle(0,0,game.width,game.height-270*oe.instance().scale),{direction:"y",padding:18*oe.instance().scale,searchForClicks:!0}),a.x=0,a.y=270*oe.instance().scale,n.addChild(a),n.header=new ZT,n.header.event.back.add(n.chooseBack,BG(BG(n))),n.header.setDiamond(),n.addChild(n.header),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NG(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),ak.instance().event.load_online_mode_bet_complete.add(this.buildDataRoomBet,this),!0===ak.instance().ktLoadOnlineModeBet?this.buildDataRoomBet():ak.instance().sendGetOnlineModeBet(),Ei.instance().showBanerChooseBettingQuickPlayScreen()}},{key:"buildDataRoomBet",value:function(){this.buidlListBet()}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),ak.instance().event.load_online_mode_bet_complete.remove(this.buildDataRoomBet,this)}},{key:"getData",value:function(e){switch(e.cmd){case sL.ONLINE_MODE_BETS_RESPONSE:}}},{key:"buidlListBet",value:function(){for(var e=ak.instance().quickplay_bet_setting,t=0;t<e.length;t++)if(dV.instance().dataMySeft.level>=e[t].user_level_required){var n=new nI;n.event.choose_bet.add(this.chooseBet,this),e[t].genre=this.dataGennes.genre,n.setData(e[t],t),this.listBet.add(n)}game.time.events.add(100,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"chooseBet",value:function(e){LogConsole.log("choose_bet"),e.dataGennes=this.dataGennes,oe.instance().dataPlayOnlineMode.bet_place=e.bet_place,dV.instance().dataMySeft.diamond<e.bet_place?jC.instance().addDialogConfirnMoney(de.instance().getData("100")):this.event.choose_bet.dispatch(e)}},{key:"chooseBackToGenres",value:function(){this.event.backGenres.dispatch()}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),this.listBet.removeAll(),this.listBet.destroy(),Ei.instance().hideBanner(),GG(MG(t.prototype),"destroy",this).call(this)}}])&&DG(n.prototype,i),o&&DG(n,o),t}();function UG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var FG=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t,n){var i=new SFS2X.SFSObject;return i.putInt("playlist_id",e),i.putInt("genre_id",t),i.putInt("bet_id",n),i}}],(n=null)&&UG(t.prototype,n),i&&UG(t,i),e}();function ZG(e){return(ZG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function VG(e,t,n){return(VG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QG(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function QG(e){return(QG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WG(e,t){return(WG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qG(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var KG=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,n=!(o=QG(t).call(this,game,null))||"object"!==ZG(o)&&"function"!=typeof o?qG(i):o,ht.instance().showLoading(),LogConsole.log("OnlineModeListPlaylist----------------------------"),n.event={back:new Phaser.Signal,backBet:new Phaser.Signal,backGenres:new Phaser.Signal},n.positionCreateRoom=oe.instance().positionCreateRoom,n.bg=new Phaser.Button(game,0,0,"bg_create_room"),n.addChild(n.bg),n.dataBet=e,n.idDelay=null,n.idx=0,n.countItem=0,n.arrPlayList=[],n.ktBuild=!1,n.tabTree=new AG(AG.TREE_PLAYLIST,dv.getNameRegion(n.dataBet.dataGennes.region),n.dataBet.dataGennes.genre),n.tabTree.event.backBet.add(n.chooseBackToBet,qG(qG(n))),n.tabTree.event.backGenres.add(n.chooseBackToGenres,qG(qG(n))),n.tabTree.y=100*oe.instance().scale,n.addChild(n.tabTree);var a=new Phaser.Group(game,0,0,null);return n.listPlayerlist=new Ia(game,a,new Phaser.Rectangle(0,0,game.width,game.height-205*oe.instance().scale),{direction:"y",padding:0,searchForClicks:!0}),n.listPlayerlist.events.changeIndex.add(n.changeIndex,qG(qG(n))),a.x=0,a.y=205*oe.instance().scale,n.addChild(a),n.header=new ZT,n.header.event.back.add(n.chooseBack,qG(qG(n))),n.header.setDiamond(),n.addChild(n.header),n.bgSuggestPlayList=new Dn(n.positionCreateRoom.choose_playlist_itemplaylist_bg),n.bgSuggestPlayList.y=205*oe.instance().scale,n.addChild(n.bgSuggestPlayList),n.bgSuggestPlayList.x=game.width,n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WG(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){console.log("addEvent-------------"),dV.instance().events.onExtensionResponse.add(this.getData,this),ak.instance().event.buy_playlist.add(this.sendGetDataPlaylist,this),this.sendGetDataPlaylist(),Ei.instance().showBanerChoosePlaylistquickPlayScreen()}},{key:"removeEvent",value:function(){ak.instance().event.buy_playlist.remove(this.sendGetDataPlaylist,this),dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"sendGetDataPlaylist",value:function(){ht.instance().showLoading(),_t.instance().getQuickplayPlaylistByGenres(this.dataBet.dataGennes.id),_t.instance().event.get_data_me_playlist_complete.add(this.getDataMePlaylistComplete,this)}},{key:"getDataMePlaylistComplete",value:function(e){_t.instance().event.get_data_me_playlist_complete.remove(this.getDataMePlaylistComplete,this),this.arrPlayList=e.sort(this.compareUserPlaylistMappingUpdate),console.log(this.arrPlayList),this.buildPlayerList()}},{key:"buildDataPlaylist",value:function(){this.buildPlayerList()}},{key:"getData",value:function(e){}},{key:"buildPlayerList",value:function(){this.listPlayerlist.removeAll(),this.listPlayerlist.reset(),this.removeDelayBuild(),this.idx=0,this.countItem=0,this.buildItemPage(),game.time.events.add(100,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"changeIndex",value:function(){var e=this.listPlayerlist.getIdx();this.countItem===e+1&&!1===this.ktBuild&&this.buildItemPage()}},{key:"buildItemPage",value:function(){this.ktBuild=!0;for(var e=this.idx;e<this.arrPlayList.length;e++){var t=new yI;if(t.event.buy.add(this.chooseBuy,this),t.event.select.add(this.chooseSelect,this),t.setDataQuickPlay(this.arrPlayList[e],e),this.listPlayerlist.add(t),this.idx++,this.countItem++,this.countItem%8==0&&this.idx<this.arrPlayList.length){this.ktBuild=!1;break}this.idx===this.arrPlayList.length&&(this.ktBuild=!1)}}},{key:"removeDelayBuild",value:function(){null!==this.idDelay&&(game.time.events.remove(this.idDelay),this.idDelay=null)}},{key:"chooseBuyMore",value:function(){LogConsole.log("chooseBuyMore"),jC.instance().addShop(0)}},{key:"chooseBuy",value:function(e){jC.instance().addPopupBuy(e)}},{key:"chooseSelect",value:function(e){console.log(e),oe.instance().dataPlayOnlineMode.id=e.id,oe.instance().dataPlayOnlineMode.genre_id=this.dataBet.dataGennes.id,oe.instance().dataPlayOnlineMode.bet_id=this.dataBet.id,ht.instance().showLoading(),dV.instance().sendData(sL.ONLINE_MODE_FIND_GAME_REQUEST,FG.begin(e.id,this.dataBet.dataGennes.id,this.dataBet.id))}},{key:"getGenres",value:function(){return this.dataBet.dataGennes}},{key:"chooseBack",value:function(){LogConsole.log("chooseBack playlist"),this.event.back.dispatch()}},{key:"chooseBackToBet",value:function(){var e=this.dataBet.dataGennes;this.event.backBet.dispatch(e)}},{key:"chooseBackToGenres",value:function(){this.event.backGenres.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),this.removeDelayBuild(),this.listPlayerlist.removeAll(),this.listPlayerlist.destroy(),Ei.instance().hideBanner(),VG(QG(t.prototype),"destroy",this).call(this)}}])&&HG(n.prototype,i),o&&HG(n,o),t}();var zG=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=0,this.code="",this.genre="",this.number_player=0,this.id=0,this.priority=0,this.region=""};function YG(e){return(YG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XG(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function JG(e,t,n){return(JG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$G(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function $G(e){return($G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eM(e,t){return(eM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var nM=function(e){function t(e,n){var i,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=$G(t).call(this,game,null))||"object"!==YG(a)&&"function"!=typeof a?tM(o):a).event={back:new Phaser.Signal,play_again:new Phaser.Signal},i.dataJoin=e,i.dataGennes=n,i.arrPlayer=[],i.idRoom=0,i.roomBet=0,i.totalPlayerPlay=0,i.ktPlay=!1,i.ktshowBadConnection=!1,i.ktStart=!1,i.idxQuestion=0,i.arrScore=[],i.arrChart={},i.arrQuestion=[],i.timecount=0,i.ktCountDownPlay=!1,i.timeTween=null,i.timerCountDown=null,i.listSongResult=null,i.showQuestion=null,i.ktReplay=!1,i.objChat={},i.startTime=0,i.endTime=0,i.addMeAnswer=game.add.group(),i.addListChart=game.add.group(),i.checkSendExit=!1,i.arrLocal=[{x:100*oe.instance().scale,y:385*oe.instance().scale},{x:385*oe.instance().scale,y:385*oe.instance().scale},{x:100*oe.instance().scale,y:690*oe.instance().scale},{x:385*oe.instance().scale,y:690*oe.instance().scale}],i.arrLocalPlay2=[{x:206*oe.instance().scale,y:223*oe.instance().scale},{x:354*oe.instance().scale,y:223*oe.instance().scale}],i.arrLocalPlay3=[{x:114*oe.instance().scale,y:223*oe.instance().scale},{x:276*oe.instance().scale,y:223*oe.instance().scale},{x:438*oe.instance().scale,y:223*oe.instance().scale}],i.arrLocalPlay4=[{x:59*oe.instance().scale,y:223*oe.instance().scale},{x:206*oe.instance().scale,y:223*oe.instance().scale},{x:354*oe.instance().scale,y:223*oe.instance().scale},{x:495*oe.instance().scale,y:223*oe.instance().scale}],i.arrLocalResultWin={x:260*oe.instance().scale,y:140*oe.instance().scale},i.arrLocalResult2=[{x:275*oe.instance().scale,y:420*oe.instance().scale}],i.arrLocalResult3=[{x:185*oe.instance().scale,y:420*oe.instance().scale},{x:365*oe.instance().scale,y:420*oe.instance().scale}],i.arrLocalResult4=[{x:117*oe.instance().scale,y:420*oe.instance().scale},{x:275*oe.instance().scale,y:420*oe.instance().scale},{x:431*oe.instance().scale,y:420*oe.instance().scale}],i.arrLocalResultAllLose2=[{x:211*oe.instance().scale,y:260*oe.instance().scale},{x:355*oe.instance().scale,y:260*oe.instance().scale}],i.arrLocalResultAllLose3=[{x:117*oe.instance().scale,y:260*oe.instance().scale},{x:275*oe.instance().scale,y:260*oe.instance().scale},{x:431*oe.instance().scale,y:260*oe.instance().scale}],i.arrLocalResultAllLose4=[{x:60*oe.instance().scale,y:260*oe.instance().scale},{x:211*oe.instance().scale,y:260*oe.instance().scale},{x:355*oe.instance().scale,y:260*oe.instance().scale},{x:490*oe.instance().scale,y:260*oe.instance().scale}],i.positionCreateRoom=oe.instance().positionCreateRoom,i.bg=new Phaser.Button(game,0,0,"bg_create_room"),i.addChild(i.bg),i.header=new ZT,i.header.setTitle(i.dataGennes.genre),i.header.event.back.add(i.chooseBack,tM(tM(i))),i.addChild(i.header),i.addChild(i.addListChart),i.buildListPlayer(),i.txtCounDown=new Qt(i.positionCreateRoom.waitting_txt_countdown,""),i.txtCounDown.anchor.set(.5),i.txtCounDown.x=game.width/2,i.addChild(i.txtCounDown);var s=de.instance().getData("61").split("\n");return i.txtTrick=new Qt(i.positionCreateRoom.waitting_txt_trick,de.instance().getData("61")),i.txtTrick.visible=!1,i.txtTrick.addColor("#FFA339",s[0].length),i.txtTrick.setTextBounds(0,0,game.width,95*oe.instance().scale),i.txtTrick.y=game.height-95*oe.instance().scale,i.addChild(i.txtTrick),i.lbWaittinngPlayer=new Qt(i.positionCreateRoom.quickplay_text_player_waitting,""),i.addChild(i.lbWaittinngPlayer),i.btnMucCuoc=new qn(i.positionCreateRoom.button_muccuoc_room,"10"),i.addChild(i.btnMucCuoc),i.labelMuccuoc=new Qt(i.positionCreateRoom.text_muccuoc_room,de.instance().getData("43")),i.labelMuccuoc.x=(game.width-i.labelMuccuoc.width)/2,i.addChild(i.labelMuccuoc),i.lineWin=new Bt(i.positionCreateRoom.result_line_win),i.lineWin.visible=!1,i.addChild(i.lineWin),i.txtWin=new Qt(i.positionCreateRoom.result_txtWin_win,de.instance().getData("62")+" !!!"),i.txtWin.setTextBounds(0,0,game.width,47*oe.instance().scale),i.txtWin.visible=!1,i.addChild(i.txtWin),i.button_share=new _n(i.positionCreateRoom.button_share,i.chooseShare,tM(tM(i))),i.button_share.visible=!1,i.addChild(i.button_share,tM(tM(i))),i.buildUserJoinRoom(),i.addEvent(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eM(e,t)}(t,Je),n=t,(i=[{key:"chooseShare",value:function(){Ri.instance().share()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().events.onUserEnterRoom.add(this.userEnterRoom,this),dV.instance().events.onUserExitRoom.add(this.userExitRoom,this),dV.instance().events.onUserVarsUpdate.add(this.userVarsUpdate,this),dV.instance().events.onRoomVarsUpdate.add(this.onRoomVarsUpdate,this),dV.instance().events.onPublicMessage.add(this.onPublicMessage,this),Qe.instance().event.bad_connection.add(this.checkBadConnection,this),Qe.instance().event.chooseExitBadConnection.add(this.chooseExitBadConnection,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),dV.instance().events.onUserEnterRoom.remove(this.userEnterRoom,this),dV.instance().events.onUserExitRoom.remove(this.userExitRoom,this),dV.instance().events.onUserVarsUpdate.remove(this.userVarsUpdate,this),dV.instance().events.onRoomVarsUpdate.remove(this.onRoomVarsUpdate,this),dV.instance().events.onPublicMessage.remove(this.onPublicMessage,this),Qe.instance().event.bad_connection.remove(this.checkBadConnection,this),Qe.instance().event.chooseExitBadConnection.remove(this.chooseExitBadConnection,this)}},{key:"showBetRoom",value:function(){this.btnMucCuoc.visible=!0,this.labelMuccuoc.visible=!0}},{key:"hideBetRoom",value:function(){this.btnMucCuoc.visible=!1,this.labelMuccuoc.visible=!1}},{key:"checkBadConnection",value:function(){!1===this.ktPlay&&!1===this.ktshowBadConnection&&(this.ktshowBadConnection=!0,jC.instance().addBadConnection())}},{key:"chooseExitBadConnection",value:function(){this.chooseExit()}},{key:"onPublicMessage",value:function(e){if(LogConsole.log("onPublicMessage"),LogConsole.log(e),e.message===ki.CHAT_ONLINE_MODE){var t=e.sender,n=t.isItMe,i=parseInt(t.name);if(e.data.containsKey("label")&&e.data.containsKey("sprite"))for(var o={label:e.data.getUtfString("label"),sprite:e.data.getUtfString("sprite")},a=0,s=0;s<this.arrPlayer.length;s++)if(!1===this.arrPlayer[s].ktEmpty&&(a++,this.arrPlayer[s].getData().user_id===i)){var r=!1;r=2===this.totalPlayerPlay?1!==a:1!==a&&2!==a;var l=new mD(n,r,o);l.event.destroy.add(this.removeItemChat,this),this.addChild(l),r?(l.x=this.arrPlayer[s].x+130*oe.instance().scale-l.width,l.x<0&&(l.x=0),l.y=this.arrPlayer[s].y-15*oe.instance().scale):(l.x=this.arrPlayer[s].x+55*oe.instance().scale,l.y=this.arrPlayer[s].y-15*oe.instance().scale),this.objChat[i]=l;break}}}},{key:"removeItemChat",value:function(e){e&&(this.removeChild(e),e.destroy(),e=null)}},{key:"getData",value:function(e){switch(e.cmd){case sL.ONLINE_MODE_SERVER_QUESTIONS_SEND:if(!1===this.ktPlay){this.hideBetRoom(),this.ktStart=!1,this.resetArrayScore(),this.ktCountDownPlay=!1,this.ktPlay=!0,dV.instance().sendLoading(1),this.hideHeader(),this.showTextTrick();for(var t=0;t<this.arrPlayer.length;t++)this.arrPlayer[t].setPlay(!0);this.arrQuestion=lA.begin(e.params)}break;case sL.ONLINE_MODE_GAME_START:Ei.instance().playQuickPlay(),this.startTime=this.getTime(),He.instance().logEvent(He.pro_quiz_start_quickplay),this.ktStart=!0,this.ktCountDownPlay=!0,this.idxQuestion=e.params.getInt(b_.question_index)-1,this.showTimeCountDown(3),jC.instance().removeUserProfile();break;case sL.ONLINE_MODE_USER_SELECTED_ANSWER_RESPONSE:this.setScorePlayer(e.params);break;case sL.ONLINE_MODE_GAME_RESULT:this.endTime=this.getTime();var n=parseInt((this.endTime-this.startTime)/1e3);He.instance().logEvent(He.play_time,n),He.instance().logEvent(He.pro_quiz_end_quickplay),this.removeShowResult(),this.idShowResult=game.time.events.add(2*Phaser.Timer.SECOND,this.showResult,this,e.params);break;case sE.ONLINE_MODE_ROOM_QUICK_JOIN_RESPONSE:}}},{key:"userEnterRoom",value:function(e){if(LogConsole.log("userEnterRoom------"),e.room.isGame){var t=e.user;LogConsole.log(t);for(var n=this.getDataPlayer(t),i=0;i<this.arrPlayer.length;i++)if(!0===this.arrPlayer[i].ktEmpty){this.arrPlayer[i].setDataQuickPlay(n,i),this.totalPlayerPlay++;break}}this.checkWaittingPlayer()}},{key:"userExitRoom",value:function(e){if(LogConsole.log("userExitRoom------ : "+e.user.isItMe),LogConsole.log(e.user),e.room.isGame)if(LogConsole.log("data.user.isItMe : "+e.user.isItMe),e.user.isItMe)oe.instance().ktPlayAgainOnlineMode?this.event.play_again.dispatch(this.dataJoin):this.event.back.dispatch();else if(null!==this.listSongResult);else{for(var t=e.user.getVariable(qa.user_id).value,n=0;n<this.arrPlayer.length;n++)if(!1===this.arrPlayer[n].ktEmpty){var i=this.arrPlayer[n].getData();if(i.user_id===t){this.ktPlay?(this.ktStart,i.user_id=-1,this.arrPlayer[n].setCurrentData(i),this.arrPlayer[n].setDisConnect()):(this.arrPlayer[n].setEmpty(),this.totalPlayerPlay--);break}}this.checkWaittingPlayer()}}},{key:"userVarsUpdate",value:function(e){if(-1!==e.changedVars.indexOf(qa.online_mode_loaded)){var t=e.user,n=this.getDataPlayer(t);if(!0===this.ktPlay){var i=t.getVariable(qa.online_mode_loaded).value;LogConsole.log("perLoad : "+i);for(var o=0;o<this.arrPlayer.length;o++){var a=this.arrPlayer[o];!1===a.ktEmpty&&a.getData().user_id===n.user_id&&i>0&&a.setLoading(i)}}for(var s=0;s<this.arrPlayer.length;s++){var r=this.arrPlayer[s];if(!1===r.ktEmpty)if(r.getData().user_id==n.user_id){this.arrPlayer[s].setCurrentData(n);break}}}}},{key:"onRoomVarsUpdate",value:function(){}},{key:"buildUserJoinRoom",value:function(){LogConsole.log("buildUserJoinRoom"),LogConsole.log(this.dataGennes),LogConsole.log(this.dataJoin.room);var e=this.dataJoin.room.getUserList();this.idRoom=this.dataJoin.room.id,oe.instance().modeplay=this.dataJoin.room.getVariable("mode").value,this.roomBet=oe.instance().dataPlayOnlineMode.bet_place,this.btnMucCuoc.setText(this.roomBet);for(var t=0;t<e.length;t++){var n=e[t],i=this.getDataPlayer(n);this.arrPlayer[t].setDataQuickPlay(i,t),this.totalPlayerPlay++}this.checkWaittingPlayer(),ht.instance().hideLoading()}},{key:"showResult",value:function(e){game.sound.stopAll(),this.ktReplay=!1,this.lineWin.visible=!0,this.txtWin.visible=!0,this.ktPlay=!1,VL.begin(e,this.arrPlayer);var t=[];this.arrScore[0].score>0?2===this.totalPlayerPlay?t=this.arrLocalResult2:3===this.totalPlayerPlay?t=this.arrLocalResult3:4===this.totalPlayerPlay&&(t=this.arrLocalResult4):2===this.totalPlayerPlay?t=this.arrLocalResultAllLose2:3===this.totalPlayerPlay?t=this.arrLocalResultAllLose3:4===this.totalPlayerPlay&&(t=this.arrLocalResultAllLose4);for(var n=-1,i=0,o=0,a=0,s=0;s<this.arrScore.length;s++)!1===this.arrPlayer[this.arrScore[s].idx].ktEmpty&&(0===s?this.arrScore[0].score>0?(i=this.arrLocalResultWin.x,o=this.arrLocalResultWin.y,a=.76,this.arrPlayer[this.arrScore[s].idx].setButtonWin(!0,this.roomBet),this.removeShowResult(),this.idShowResult=game.time.events.add(.8*Phaser.Timer.SECOND,this.addEffectUserWin,this,this.arrPlayer[this.arrScore[s].idx]),this.arrPlayer[this.arrScore[s].idx].getData().user_id===dV.instance().dataMySeft.user_id&&be.instance().playSound(be.winturnbasepartymode)):(i=t[++n].x,o=t[n].y,a=.61,this.arrPlayer[this.arrScore[s].idx].setButtonWin(!1)):(i=t[++n].x,o=t[n].y,a=.61,this.arrPlayer[this.arrScore[s].idx].setButtonWin(!1),this.arrPlayer[this.arrScore[s].idx].getData().user_id===dV.instance().dataMySeft.user_id&&be.instance().playSound(be.loseturnbasepartymode)),game.add.tween(this.arrPlayer[this.arrScore[s].idx]).to({x:i,y:o},500,Phaser.Easing.Power1,!0,200),game.add.tween(this.arrPlayer[this.arrScore[s].idx].scale).to({x:a,y:a},500,Phaser.Easing.Power1,!0,200));for(var r=0;r<this.arrPlayer.length;r++)this.arrPlayer[r].setPlay(!1),!0===this.arrPlayer[r].ktDisConnect&&(this.arrPlayer[r].setEmpty(),this.totalPlayerPlay--);this.button_share.visible=!0,this.showQuestion.hideQuestion(),this.hideAnswerMe(),this.hideChart(),this.addListSongResult()}},{key:"addEffectUserWin",value:function(e){this.removeEffectWin(),this.rotationWin=new Bt(this.positionCreateRoom.light_rotation_list_result),this.rotationWin.anchor.set(.5),this.addListChart.addChild(this.rotationWin),this.rotationWin.x=e.x+60*oe.instance().scale,this.rotationWin.y=e.y+100*oe.instance().scale,this.tweenRotationwin=game.add.tween(this.rotationWin).to({rotation:360},2e3,Phaser.Easing.Power1,!0),this.tweenRotationwin.repeat(99999,250),this.firework=new Phaser.Sprite(game,0,0,"firework"),this.firework.width=430*oe.instance().scale,this.firework.height=228*oe.instance().scale,this.firework.x=103*oe.instance().scale,this.firework.y=106*oe.instance().scale,this.firework.animations.add("playfirework"),this.firework.animations.play("playfirework",30,!0),this.addListChart.addChild(this.firework),this.ktReplay=!0,this.listSongResult.ktReplay=!0}},{key:"removeEffectWin",value:function(){if(this.addListChart.children)for(;this.addListChart.children.length>0;){var e=this.addListChart.children[0];this.addListChart.removeChild(e),e.destroy(),e=null}}},{key:"resetArrayScore",value:function(){this.arrScore=[{idx:0,score:0},{idx:1,score:0},{idx:2,score:0},{idx:3,score:0}]}},{key:"showPlayGame",value:function(){var e=this;this.hideTextTrick(),LogConsole.log("showPlayGame");var t=[];2===this.totalPlayerPlay?t=this.arrLocalPlay2:3===this.totalPlayerPlay?t=this.arrLocalPlay3:4===this.totalPlayerPlay&&(t=this.arrLocalPlay4);var n=-1;this.arrChart={};for(var i=0;i<this.arrPlayer.length;i++)if(!1===this.arrPlayer[i].ktEmpty)n++,this.arrPlayer[i].hideLoading(),this.arrPlayer[i].setTextSanSang(""),this.arrPlayer[i].setScore(0),this.arrPlayer[i].setUserPlayGame(),game.add.tween(this.arrPlayer[i]).to({x:t[n].x,y:t[n].y},400,Phaser.Easing.Power1,!0),game.add.tween(this.arrPlayer[i].scale).to({x:.62,y:.62},400,Phaser.Easing.Power1,!0),game.time.events.add(.4*Phaser.Timer.SECOND,this.buidlChartUser,this,this.arrPlayer[i].getData().user_id,n,i,t);else{var o=0;o=i%2==0?-this.arrPlayer[i].width-200*oe.instance().scale:game.width+200*oe.instance().scale,game.add.tween(this.arrPlayer[i]).to({x:o},200,Phaser.Easing.Power1,!0)}setTimeout(function(){e.buildListMeAnswer(),e.addShowQuestion(e.idxQuestion)},600)}},{key:"buidlChartUser",value:function(e,t,n,i){var o=new QA;dV.instance().dataMySeft.user_id===e?o.addChart(!0):o.addChart(!1),o.x=i[t].x+2*oe.instance().scale,o.y=i[t].y+72*oe.instance().scale,o.height=0,this.addListChart.addChild(o),this.arrChart[n]=o,this.setChart(0,n)}},{key:"hideChart",value:function(){for(;this.addListChart.children.length>0;){var e=this.addListChart.children[0];this.addListChart.removeChild(e),e.destroy(),e=null}}},{key:"setChart",value:function(e,t){if(this.arrChart[t]){var n=55*oe.instance().scale+200*oe.instance().scale*e,i=223*oe.instance().scale-200*oe.instance().scale*e,o=i+72;game.add.tween(this.arrChart[t]).to({y:o,height:n},500,Phaser.Easing.Power1,!0),game.add.tween(this.arrPlayer[t]).to({y:i},500,Phaser.Easing.Power1,!0),this.objChat[this.arrPlayer[t].getData().user_id]&&null!=this.objChat[this.arrPlayer[t].getData().user_id]&&game.add.tween(this.objChat[this.arrPlayer[t].getData().user_id]).to({y:i-92*oe.instance().scale},500,Phaser.Easing.Power1,!0)}}},{key:"setScorePlayer",value:function(e){if(LogConsole.log("setScorePlayer : "+e.getDump()),"OK"===e.getUtfString(qa.status)){LogConsole.log(1);for(var t=0;t<this.arrPlayer.length;t++)if(!1===this.arrPlayer[t].ktEmpty){LogConsole.log(2);var n=this.arrPlayer[t].getData(),i=e.getInt(qa.user_id);if(n.user_id===i){var o=e.getInt(qa.score),a=e.getBool(qa.is_correct_answer);this.arrPlayer[t].setScore(o),!0===a?this.arrPlayer[t].setTrueAnswer():this.arrPlayer[t].setFailtAnswer();for(var s=0;s<this.arrScore.length;s++)if(this.arrScore[s].idx==t){this.arrScore[s].score=o;break}break}}}this.arrScore.sort(this.compare);var r=this.arrScore[0].score;if(r>0){this.setChart(1,this.arrScore[0].idx);for(var l=1;l<this.arrScore.length;l++)!1===this.arrPlayer[this.arrScore[l].idx].ktEmpty&&this.setChart(this.arrScore[l].score/r,this.arrScore[l].idx)}}},{key:"buildListMeAnswer",value:function(){for(;this.addMeAnswer.children.length>0;){var e=this.addMeAnswer.children[0];this.addMeAnswer.removeChild(e),e.destroy(),e=null}var t=0,n=25*oe.instance().scale;this.arrMeAnswer=[];for(var i=0;i<this.arrQuestion.length;i++){var o=new oL;o.x=t,o.y=n,this.addMeAnswer.addChild(o),t+=54*oe.instance().scale,game.add.tween(o).to({y:0},400,Phaser.Easing.Elastic.Out,!0,30*i,1),this.arrMeAnswer.push(o)}this.addMeAnswer.y=385*oe.instance().scale,this.addChild(this.addMeAnswer),this.addMeAnswer.x=(game.width-t)/2}},{key:"hideAnswerMe",value:function(){for(var e=0;e<this.arrMeAnswer.length;e++)game.add.tween(this.arrMeAnswer[e]).to({alpha:0},200,Phaser.Easing.Elastic.Out,!0)}},{key:"setMeAnswer",value:function(e){this.arrMeAnswer[e.idx].setData(e)}},{key:"setShowMeAnswerCurrent",value:function(e){this.arrMeAnswer[e].setBeginLoad()}},{key:"addShowQuestion",value:function(e){LogConsole.log("addShowQuestion"),this.removeShowQuestion(),this.setShowMeAnswerCurrent(e),this.showQuestion=new ZL(this.arrQuestion,e),this.showQuestion.addEventChooseAnswer(this.setMeAnswer,this),this.showQuestion.addEventShowQuestion(this.setShowMeAnswerCurrent,this),this.showQuestion.event.close.add(this.removeShowQuestion,this),this.showQuestion.x=0,this.showQuestion.y=game.height-700*oe.instance().scale,this.addChild(this.showQuestion)}},{key:"removeShowQuestion",value:function(){null!=this.showQuestion&&(this.removeChild(this.showQuestion),this.showQuestion.destroy(),this.showQuestion=null)}},{key:"addListSongResult",value:function(){this.removeListSongResult(),this.listSongResult=new hD(this.arrQuestion,this.roomBet),this.listSongResult.ktReplay=!0,this.listSongResult.event.replay.add(this.showReplayGame,this),this.listSongResult.event.close.add(this.removeListSongResult,this),this.listSongResult.event.exit.add(this.chooseExit,this),this.listSongResult.y=game.height-515*oe.instance().scale,this.addChild(this.listSongResult)}},{key:"removeListSongResult",value:function(){null!==this.listSongResult&&(this.removeChild(this.listSongResult),this.listSongResult.destroy(),this.listSongResult=null)}},{key:"chooseExit",value:function(){oe.instance().ktPlayAgainOnlineMode=!1,ht.instance().showLoading(),dV.instance().sendData(sL.ONLINE_MODE_GAME_FINISH,null)}},{key:"showReplayGame",value:function(){LogConsole.log("showReplayGame---------"),this.lineWin.visible=!1,this.txtWin.visible=!1,oe.instance().ktPlayAgainOnlineMode=!0,ht.instance().showLoading(),dV.instance().sendData(sL.ONLINE_MODE_GAME_FINISH,null)}},{key:"showTimeCountDown",value:function(e){this.lbWaittinngPlayer.text="",this.removeTimeCountDown(),this.timecount=e,this.setTextCountDown(),this.timerCountDown=this.game.time.create(!0),this.timerEventCountDown=this.timerCountDown.loop(1e3,this.onTimerCountDown,this),this.timerCountDown.start()}},{key:"onTimerCountDown",value:function(){this.timecount--,this.setTextCountDown()}},{key:"setTextCountDown",value:function(){this.timecount>-1?(this.timecount<6&&(game.sound.stopAll(),game.sound.play("beep_audio")),this.ktCountDownPlay&&0===this.timecount?this.txtCounDown.text=de.instance().getData("63"):this.txtCounDown.text=this.timecount,this.txtCounDown.y=this.positionCreateRoom.waitting_txt_countdown.y*oe.instance().scale+80*oe.instance().scale,game.add.tween(this.txtCounDown).to({y:this.positionCreateRoom.waitting_txt_countdown.y*oe.instance().scale},200,Phaser.Easing.Elastic.Out,!0)):(this.ktCountDownPlay&&this.showPlayGame(),this.removeTimeCountDown())}},{key:"removeTimeCountDown",value:function(){null!==this.timerCountDown&&(game.time.events.remove(this.timerEventCountDown),this.timerEventCountDown=null,this.timerCountDown.stop(),this.timerCountDown.destroy(),this.timerCountDown=null),this.txtCounDown.text=""}},{key:"hideHeader",value:function(){this.header.setHideBtnBack(),this.header.y=0,game.add.tween(this.header).to({y:-180*oe.instance().scale},300,Phaser.Easing.Power1,!0)}},{key:"showHeader",value:function(){this.header.setShowBtnBack(),this.header.y=-180*oe.instance().scale,game.add.tween(this.header).to({y:0},300,Phaser.Easing.Power1,!0)}},{key:"showTextTrick",value:function(){this.txtTrick.visible=!0}},{key:"hideTextTrick",value:function(){this.txtTrick.visible=!1}},{key:"buildListPlayer",value:function(){this.arrPlayer=[];for(var e=0;e<this.arrLocal.length;e++){var t=new iA;t.setEmpty(),t.setIdx(e),t.x=e%2==0?-t.width-200*oe.instance().scale:game.width+200*oe.instance().scale,t.y=this.arrLocal[e].y,game.add.tween(t).to({x:this.arrLocal[e].x},250,Phaser.Easing.Power1,!0,400),this.addChild(t),this.arrPlayer.push(t)}}},{key:"getDataPlayer",value:function(e){var t=new FI;return t.user_id=e.getVariable(qa.user_id).value,t.user_name=e.getVariable(qa.user_name).value,t.avatar=e.getVariable(qa.avatar).value,t.vip=e.getVariable(qa.vip).value,t}},{key:"checkWaittingPlayer",value:function(){if(!1===this.ktPlay&&null===this.listSongResult){for(var e=4,t=0;t<this.arrPlayer.length;t++)!1===this.arrPlayer[t].ktEmpty&&e--;e>0?(this.lbWaittinngPlayer.text=de.instance().getData("64")+" "+e+" "+de.instance().getData("65")+"...",this.lbWaittinngPlayer.x=(game.width-this.lbWaittinngPlayer.width)/2):(this.lbWaittinngPlayer.text=de.instance().getData("66")+"...",this.lbWaittinngPlayer.x=(game.width-this.lbWaittinngPlayer.width)/2)}}},{key:"removeShowResult",value:function(){null!==this.idShowResult&&(game.time.events.remove(this.idShowResult),this.idShowResult=null)}},{key:"chooseBack",value:function(){!1===this.ktPlay&&!1===this.checkSendExit&&(this.checkSendExit=!0,oe.instance().ktPlayAgainOnlineMode=!1,ht.instance().showLoading(),dV.instance().sendExitRoom())}},{key:"destroy",value:function(){rn.instance().resetLoad(),rl.instance().removeAllSound(),this.removeShowResult(),this.removeEvent(),this.removeAllItem(),JG($G(t.prototype),"destroy",this).call(this)}}])&&XG(n.prototype,i),o&&XG(n,o),t}();function iM(e){return(iM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function aM(e,t){return!t||"object"!==iM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sM(e,t,n){return(sM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rM(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function rM(e){return(rM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lM(e,t){return(lM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cM=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aM(this,rM(t).call(this,game,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lM(e,t)}(t,Je),n=t,(i=[{key:"afterCreate",value:function(){this.chooseGenes=null,this.chooseBet=null,this.choosePlaylist=null,this.playGame=null,this.event={back:new Phaser.Signal},this.bg=new Phaser.Image(game,0,0,"bg-playlist"),this.addChild(this.bg),this.addChooseGenes(),He.instance().logEvent(He.Party_online_mode_quickplay),this.addEvent()}},{key:"getData",value:function(e){switch(e.cmd){case sL.ONLINE_MODE_FIND_GAME_RESPONSE:"FAILED"===e.params.getUtfString("status")&&this.chooseBack()}}},{key:"addEventAll",value:function(){null!==this.chooseGenes&&this.chooseGenes.addEvent(),null!==this.chooseBet&&this.chooseBet.addEvent(),null!==this.choosePlaylist&&this.choosePlaylist.addEvent()}},{key:"addChooseGenes",value:function(){this.removeChooseGenes(),this.chooseGenes=new kG,this.chooseGenes.event.back.add(this.chooseBack,this),this.chooseGenes.event.next_bet.add(this.addChooseBet,this),this.addChild(this.chooseGenes),null!==this.chooseBet?(Ch.instance().beginSwitch(this.chooseBet,this.chooseGenes,!0),Ch.instance().event.tweenComplete.add(this.tweenChooseBetComplete,this)):null!==this.choosePlaylist?(Ch.instance().beginSwitch(this.choosePlaylist,this.chooseGenes,!0),Ch.instance().event.tweenComplete.add(this.tweenChoosePlaylistComplete,this)):null!==this.playGame?(Ch.instance().beginSwitch(this.playGame,this.chooseGenes,!0),Ch.instance().event.tweenComplete.add(this.tweenplayGameComplete,this)):this.addEventAll()}},{key:"tweenChooseBetComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenChooseBetComplete,this),this.removeChooseBet(),this.addEventAll()}},{key:"tweenChoosePlaylistComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenChoosePlaylistComplete,this),this.removeChoosePlaylist(),this.addEventAll()}},{key:"tweenChooseGenesComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenChooseGenesComplete,this),this.removeChooseGenes(),this.addEventAll()}},{key:"tweenplayGameComplete",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenplayGameComplete,this),this.removePlayGame(),this.addEventAll()}},{key:"removeChooseGenes",value:function(){null!==this.chooseGenes&&(this.removeChild(this.chooseGenes),this.chooseGenes.destroy(),this.chooseGenes=null)}},{key:"addChooseBet",value:function(e){this.removeChooseBet(),this.chooseBet=new jG(e),this.chooseBet.event.back.add(this.chooseBack,this),this.chooseBet.event.choose_bet.add(this.addChoosePlaylist,this),this.chooseBet.event.backGenres.add(this.addChooseGenes,this),this.addChild(this.chooseBet),null!==this.chooseGenes?(Ch.instance().beginSwitch(this.chooseGenes,this.chooseBet,!1),Ch.instance().event.tweenComplete.add(this.tweenChooseGenesComplete,this)):null!==this.choosePlaylist?(Ch.instance().beginSwitch(this.choosePlaylist,this.chooseBet,!0),Ch.instance().event.tweenComplete.add(this.tweenChoosePlaylistComplete,this)):this.addEventAll()}},{key:"removeChooseBet",value:function(){null!==this.chooseBet&&(this.removeChild(this.chooseBet),this.chooseBet.destroy(),this.chooseBet=null)}},{key:"addChoosePlaylist",value:function(e){this.removeChoosePlaylist(),this.choosePlaylist=new KG(e),this.choosePlaylist.event.back.add(this.chooseBack,this),this.choosePlaylist.event.backGenres.add(this.addChooseGenes,this),this.choosePlaylist.event.backBet.add(this.addChooseBet,this),this.addChild(this.choosePlaylist),null!==this.chooseBet?(Ch.instance().beginSwitch(this.chooseBet,this.choosePlaylist,!1),Ch.instance().event.tweenComplete.add(this.tweenChooseBetComplete,this)):this.addEventAll()}},{key:"removeChoosePlaylist",value:function(){null!==this.choosePlaylist&&(this.removeChild(this.choosePlaylist),this.choosePlaylist.destroy(),this.choosePlaylist=null)}},{key:"addPlayGame",value:function(e){this.removePlayGame();var t=new zG;null!==this.choosePlaylist?(t=this.choosePlaylist.getGenres(),oe.instance().dataGennes=t):t=oe.instance().dataGennes,this.playGame=new nM(e,t),this.playGame.event.back.add(this.chooseBack,this),this.playGame.event.play_again.add(this.playAgain,this),this.addChild(this.playGame),null!==this.choosePlaylist&&(Ch.instance().beginSwitch(this.choosePlaylist,this.playGame,!1),Ch.instance().event.tweenComplete.add(this.tweenChoosePlaylistComplete,this)),null!==this.chooseBet&&this.removeChooseBet(),null!==this.chooseGenes&&this.removeChooseGenes()}},{key:"playAgain",value:function(){dV.instance().sendData(sL.ONLINE_MODE_FIND_GAME_REQUEST,FG.begin(oe.instance().dataPlayOnlineMode.id,oe.instance().dataPlayOnlineMode.genre_id,oe.instance().dataPlayOnlineMode.bet_id))}},{key:"removePlayGame",value:function(){null!==this.playGame&&(this.removeChild(this.playGame),this.playGame.destroy(),this.playGame=null)}},{key:"chooseBack",value:function(){LogConsole.log("chooseBack-quicplay"),this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),sM(rM(t.prototype),"destroy",this).call(this)}}])&&oM(n.prototype,i),o&&oM(n,o),t}();function hM(e){return(hM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dM(e,t){return!t||"object"!==hM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fM(e,t,n){return(fM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pM(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pM(e){return(pM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gM(e,t){return(gM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yM=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=dM(this,pM(t).call(this,game,null))).onlineModeCreateRoom=null,e.onlineModeQuikPlay=null,e.arrResource=[{type:"text",link:"img/config/positionCreateRoom.json",key:"positionCreateRoom"},{type:"atlas",link:"img/atlas/createroom.png",key:"createroom",linkJson:"img/atlas/createroom.json"}],e.loadResource(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gM(e,t)}(t,Em),n=t,(i=[{key:"checkShowInvite",value:function(e){null!==this.onlineModeCreateRoom&&this.onlineModeCreateRoom.checkShowInvite(e)}},{key:"loadFileComplete",value:function(){fM(pM(t.prototype),"loadFileComplete",this).call(this),this.addEvent(),this.addOnlineModeCreateRoom()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().events.onRoomJoin.add(this.joinRoom,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),dV.instance().events.onRoomJoin.remove(this.joinRoom,this)}},{key:"addQuickPlayGame",value:function(){this.removeQuickPlayGame(),this.onlineModeQuikPlay=new cM,this.onlineModeQuikPlay.event.back.add(this.quickPlayBackToCreateRoom,this),this.addChild(this.onlineModeQuikPlay),null!==this.onlineModeCreateRoom&&(Ch.instance().beginSwitch(this.onlineModeCreateRoom,this.onlineModeQuikPlay,!1),Ch.instance().event.tweenComplete.add(this.tweenCompleteCreateRoom,this))}},{key:"tweenCompleteCreateRoom",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenCompleteCreateRoom,this),this.removeOnlineModeCreateRoom()}},{key:"removeQuickPlayGame",value:function(){null!==this.onlineModeQuikPlay&&(this.removeChild(this.onlineModeQuikPlay),this.onlineModeQuikPlay.destroy(),this.onlineModeQuikPlay=null)}},{key:"quickPlayBackToCreateRoom",value:function(){this.addOnlineModeCreateRoom(!0)}},{key:"addOnlineModeCreateRoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.removeOnlineModeCreateRoom(),this.onlineModeCreateRoom=new YD(e),this.onlineModeCreateRoom.event.quickplay.add(this.addQuickPlayGame,this),this.addChild(this.onlineModeCreateRoom),null!==this.onlineModeQuikPlay&&(Ch.instance().beginSwitch(this.onlineModeQuikPlay,this.onlineModeCreateRoom,!0),Ch.instance().event.tweenComplete.add(this.tweenCompleteQuickPlay,this))}},{key:"tweenCompleteQuickPlay",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenCompleteQuickPlay,this),this.removeQuickPlayGame()}},{key:"removeOnlineModeCreateRoom",value:function(){null!==this.onlineModeCreateRoom&&(this.removeChild(this.onlineModeCreateRoom),this.onlineModeCreateRoom.destroy(),this.onlineModeCreateRoom=null)}},{key:"getData",value:function(e){}},{key:"joinRoom",value:function(e){if(LogConsole.log("joinRoom"),LogConsole.log(e),e.room.isGame){var t=e.room.getVariable("mode").value;"OnlineMode"===t?null!==this.onlineModeQuikPlay?this.onlineModeQuikPlay.addPlayGame(e):(this.addQuickPlayGame(),this.onlineModeQuikPlay.addPlayGame(e)):"OnlineModeRoom"===t&&(oe.instance().dataJoinRoom=e,null!==this.onlineModeCreateRoom?this.onlineModeCreateRoom.checkDataRoom():null!==this.onlineModeQuikPlay?this.addOnlineModeCreateRoom(!0):this.addOnlineModeCreateRoom())}}},{key:"destroy",value:function(){this.removeEvent(),oe.instance().positionCreateRoomData=null,rl.instance().removeAllSound(),fM(pM(t.prototype),"destroy",this).call(this)}}])&&uM(n.prototype,i),o&&uM(n,o),t}();function mM(e){return(mM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wM(e,t){return!t||"object"!==mM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bM(e){return(bM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _M(e,t){return(_M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var SM=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=wM(this,bM(t).call(this,game,0,0,"otherSprites","tab-friend"))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_M(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.required,this.reward}},{key:"addRequireAndReward",value:function(e){this.required=new Phaser.Text(game,this.positionQAndAConfig.scroll.require_done.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.require_done.y*window.GameConfig.RESIZE,e.quest,this.positionQAndAConfig.scroll.require_done.configs),this.required.anchor.set(0,.5),this.addChild(this.required);var t=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.doneIcon.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.doneIcon.y*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.doneIcon.nameAtlas,this.positionQAndAConfig.scroll.doneIcon.nameSprite);t.anchor.set(1,0),this.addChild(t);var n=new Bt(this.positionQAndAConfig.line_under);this.addChild(n)}}])&&vM(n.prototype,i),o&&vM(n,o),t}();function EM(e){return(EM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function kM(e,t){return!t||"object"!==EM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function PM(e){return(PM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OM(e,t){return(OM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RM=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=kM(this,PM(t).call(this,game,0,0,"otherSprites","tab-friend"))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OM(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.required,this.reward}},{key:"addRequireAndReward",value:function(e){var t;this.required=new Phaser.Text(game,this.positionQAndAConfig.scroll.requireInitDaily.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.requireInitDaily.y*window.GameConfig.RESIZE,"".concat(e.quest," (").concat(e.achieved,"/").concat(e.required,")"),this.positionQAndAConfig.scroll.requireInitDaily.configs),this.required.anchor.set(0,.5),this.addChild(this.required),this.reward=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnRewardDoingDaily.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardDoingDaily.y*window.GameConfig.RESIZE,null),"DIAMOND"==e.reward_type?t="Gem":"TICKET"==e.reward_type?t="Ticket":"SUPPORT_ITEM"==e.reward_type&&(t="Mic");var n=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnRewardDoingDaily.diamond.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardDoingDaily.diamond.y*window.GameConfig.RESIZE,"questAndAchieveSprites",t);this.reward.addChild(n);var i=new Phaser.Text(game,this.positionQAndAConfig.scroll.btnRewardDoingDaily.txtDiamond.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardDoingDaily.txtDiamond.y*window.GameConfig.RESIZE,e.reward,this.positionQAndAConfig.scroll.btnRewardDoingDaily.txtDiamond.configs);this.reward.addChild(i),this.addChild(this.reward);var o=new Bt(this.positionQAndAConfig.line_under);this.addChild(o)}}])&&CM(n.prototype,i),o&&CM(n,o),t}();function xM(e){return(xM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function IM(e,t){return!t||"object"!==xM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AM(e){return(AM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LM(e,t){return(LM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var DM=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=IM(this,AM(t).call(this,game,0,102*window.GameConfig.RESIZE,null))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.headerScroll,e.listScroll,e.event={claimReward:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LM(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addHeaderScroll();var e=new Phaser.Group(game);e.x=0,e.y=95*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-386)*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0})}},{key:"addHeaderScroll",value:function(){this.headerScroll=new Phaser.Sprite(game,0,0,"otherSprites","tab-list"),this.addChildInHeaderScroll(this.positionQAndAConfig.scroll.daily.header),this.addChild(this.headerScroll)}},{key:"addChildInHeaderScroll",value:function(e){var t=new Phaser.Text(game,e.txt_request.x*window.GameConfig.RESIZE,e.txt_request.y*window.GameConfig.RESIZE,de.instance().getData("232"),e.txt_request.configs);this.headerScroll.addChild(t);var n=new Phaser.Text(game,e.txt_reward.x*window.GameConfig.RESIZE,e.txt_reward.y*window.GameConfig.RESIZE,de.instance().getData("233"),e.txt_reward.configs);n.anchor.set(1,0),this.headerScroll.addChild(n);var i=new Phaser.Sprite(game,e.line.x*window.GameConfig.RESIZE,e.line.y*window.GameConfig.RESIZE,e.line.nameAtlas,e.line.nameSprite);this.headerScroll.addChild(i)}},{key:"setQuestsAndQuestLogs",value:function(e){this.quests=e,this.addListScroll()}},{key:"addListScroll",value:function(){for(var e=0;e<this.quests.length;e++)if(LogConsole.log(this.quests[e]),this.quests[e].achieved<this.quests[e].required){var t=new RM;t.addRequireAndReward(this.quests[e]),this.listView.add(t)}else{var n=new SM;n.addRequireAndReward(this.quests[e]),this.listView.add(n)}}},{key:"destroy",value:function(){for(this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}}])&&TM(n.prototype,i),o&&TM(n,o),t}();function GM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var MM=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reward=0,this.reward_type="",this.achieved=0,this.id=0,this.quest="",this.required=0,this.quest_type=0}var t,n,i;return t=e,i=[{key:"get_daily_quest",get:function(){return"daily_quest"}}],(n=null)&&GM(t.prototype,n),i&&GM(t,i),e}();function NM(e){return(NM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jM(e,t){return!t||"object"!==NM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UM(e){return(UM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FM(e,t){return(FM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZM=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=jM(this,UM(t).call(this,game,e,n,null))).type=1,i&&(o.typeBefore=i),o.type>o.typeBefore?o.x=game.width:o.x=-game.width,o.positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),o.scrollScreenOnTab=null,o.signalInput=new Phaser.Signal,o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FM(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"addScrollScreen",value:function(){this.scrollScreenOnTab=new DM,this.addChild(this.scrollScreenOnTab)}},{key:"onExtensionResponse",value:function(e){var t=this;e.cmd==ki.DAILY_QUEST_LOAD_RESPONSE&&("OK"==e.params.getUtfString("status")?this.handleDailyQuest(e.params,function(){t.doneDailyQuestResponse()}):console.warn(e.params.getUtfString("message")))}},{key:"doneDailyQuestResponse",value:function(){this.addScrollScreen(),this.scrollScreenOnTab.setQuestsAndQuestLogs(oe.instance().dailyQuestLists),He.instance().logEvent(He.Quest_Daily),this.timeoutHideLoading=setTimeout(function(){ht.instance().hideLoading()},1e3)}},{key:"show",value:function(){ht.instance().showLoading(),this.checkDailyQuestLoadRequest(),0==oe.instance().isDailyQuestLoad.checking?(oe.instance().dailyQuestLists.length>0?this.doneDailyQuestResponse():dV.instance().sendData(ki.DAILY_QUEST_LOAD_REQUEST,null),oe.instance().isDailyQuestLoad.checking=!0,oe.instance().isDailyQuestLoad.updated=Date.now()):this.doneDailyQuestResponse(),game.add.tween(this).to({x:0},150,"Linear",!0),He.instance().logEvent(He.Quest_Daily)}},{key:"checkDailyQuestLoadRequest",value:function(){1==oe.instance().isDailyQuestLoad.checking?Date.now()-oe.instance().isDailyQuestLoad.updated<6e3&&oe.instance().dailyQuestLists.length>0?oe.instance().isDailyQuestLoad.checking=!0:oe.instance().isDailyQuestLoad.checking=!1:oe.instance().isDailyQuestLoad.checking=!1}},{key:"hide",value:function(e){var t=this;if(this.type>e){var n=game.add.tween(this).to({x:game.width},150,"Linear",!0);n.start(),n.onComplete.add(function(){t.destroy()},this)}else{var i=game.add.tween(this).to({x:-game.width-300*window.GameConfig.RESIZE},150,"Linear",!0);i.start(),i.onComplete.add(function(){t.destroy()},this)}}},{key:"handleDailyQuest",value:function(e,t){oe.instance().dailyQuestLists=[];for(var n=e.getSFSArray("daily_quest"),i=0;i<n.size();i++){var o=new MM,a=n.getSFSObject(i);o.reward=a.getInt("reward"),o.reward_type=a.getUtfString("reward_type"),o.achieved=a.getInt("achieved"),o.id=a.getInt("id"),o.quest=a.getUtfString("quest"),o.required=a.getInt("required"),o.quest_type=a.getInt("quest_type"),oe.instance().dailyQuestLists.push(o)}t()}},{key:"destroy",value:function(){for(clearTimeout(this.timeoutHideLoading),dV.instance().removeEventExtension(this.onExtensionResponse,this);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}}])&&BM(n.prototype,i),o&&BM(n,o),t}();function HM(e){return(HM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function QM(e,t){return!t||"object"!==HM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WM(e){return(WM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qM(e,t){return(qM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var KM=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=QM(this,WM(t).call(this,game,0,0,"otherSprites","tab-friend"))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.signalClaim=new Phaser.Signal,e.type=n,e.event={claimReward:new Phaser.Signal,claimPlayScript:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qM(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.required,this.reward,this.btnClaim}},{key:"onStep6Claim",value:function(){this.event.claimReward.dispatch(this.quest,this.quest_log_id)}},{key:"addRequireAndReward",value:function(e,t){var n;this.quest=e,this.quest_log_id=t,_o.instance().event.step6.add(this.onStep6Claim,this),this.required=new Phaser.Text(game,this.positionQAndAConfig.scroll.requireInit.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.requireInit.y*window.GameConfig.RESIZE,e.quest,this.positionQAndAConfig.scroll.requireInit.configs),this.required.anchor.set(0,.5),this.addChild(this.required),this.reward=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnRewardInit.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardInit.y*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardInit.nameAtlas,this.positionQAndAConfig.scroll.btnRewardInit.nameSprite),"DIAMOND"==e.reward_type?n="Gem":"TICKET"==e.reward_type?n="Ticket":"SUPPORT_ITEM"==e.reward_type&&(n="Mic");var i=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnRewardInit.diamond.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardInit.diamond.y*window.GameConfig.RESIZE,"questAndAchieveSprites",n);this.reward.addChild(i);var o=new Phaser.Text(game,this.positionQAndAConfig.scroll.btnRewardInit.txtDiamond.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardInit.txtDiamond.y*window.GameConfig.RESIZE,e.reward,this.positionQAndAConfig.scroll.btnRewardInit.txtDiamond.configs);this.reward.addChild(o),this.addChild(this.reward),this.reward.inputEnabled=!0,this.btnClaim=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnClaimReward.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnClaimReward.y*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnClaimReward.nameAtlas,this.positionQAndAConfig.scroll.btnClaimReward.nameSprite),this.btnClaim.inputEnabled=!0,this.btnClaim.idQuest=t;var a=new Phaser.Text(game,this.positionQAndAConfig.scroll.btnClaimReward.txt.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnClaimReward.txt.y*window.GameConfig.RESIZE,de.instance().getData("234"),this.positionQAndAConfig.scroll.btnClaimReward.txt.configs);this.btnClaim.addChild(a),this.addChild(this.btnClaim),this.btnClaim.events.onInputUp.add(this.onClaim,this);var s=new Bt(this.positionQAndAConfig.line_under);this.addChild(s)}},{key:"onClaim",value:function(){be.instance().playSound(be.buttonclick),this.btnClaim.inputEnabled=!1,0==this.type?this.event.claimReward.dispatch(this.quest,this.btnClaim.idQuest):this.event.claimPlayScript.dispatch()}},{key:"onReceiveReward",value:function(){_o.instance().event.step6.remove(this.onStep6Claim,this),this.reward.destroy(),this.loadTexture("otherSprites","tab-friend");var e=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.doneIcon.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.doneIcon.y*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.doneIcon.nameAtlas,this.positionQAndAConfig.scroll.doneIcon.nameSprite);e.anchor.set(1,0),this.addChild(e)}}])&&VM(n.prototype,i),o&&VM(n,o),t}();function zM(e){return(zM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function XM(e,t){return!t||"object"!==zM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JM(e){return(JM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $M(e,t){return($M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eN=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=XM(this,JM(t).call(this,game,0,0,"otherSprites","tab-friend"))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$M(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.required,this.reward}},{key:"addRequireAndReward",value:function(e){var t;this.required=new Phaser.Text(game,this.positionQAndAConfig.scroll.require.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.require.y*window.GameConfig.RESIZE,e.quest,this.positionQAndAConfig.scroll.require.configs),this.required.anchor.set(0,.5),this.addChild(this.required),this.reward=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnReward.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnReward.y*window.GameConfig.RESIZE,null),"DIAMOND"==e.reward_type?t="Gem":"TICKET"==e.reward_type?t="Ticket":"SUPPORT_ITEM"==e.reward_type&&(t="Mic");var n=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnReward.diamond.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnReward.diamond.y*window.GameConfig.RESIZE,"questAndAchieveSprites",t);this.reward.addChild(n);var i=new Phaser.Text(game,this.positionQAndAConfig.scroll.btnReward.txtDiamond.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnReward.txtDiamond.y*window.GameConfig.RESIZE,e.reward,this.positionQAndAConfig.scroll.btnReward.txtDiamond.configs);this.reward.addChild(i),this.addChild(this.reward);var o=new Bt(this.positionQAndAConfig.line_under);this.addChild(o)}}])&&YM(n.prototype,i),o&&YM(n,o),t}();function tN(e){return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function iN(e,t){return!t||"object"!==tN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oN(e){return(oN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aN(e,t){return(aN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sN=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=iN(this,oN(t).call(this,game,0,0,"questAndAchieveSprites","Tab_Quest_Dang_Lam"))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aN(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.required,this.reward}},{key:"addRequireAndReward",value:function(e,t){var n;this.required=new Phaser.Text(game,this.positionQAndAConfig.scroll.requireInit.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.requireInit.y*window.GameConfig.RESIZE,"".concat(e.quest," (").concat(t.next_quest_archieved,"/").concat(e.required,")"),this.positionQAndAConfig.scroll.requireInit.configs),this.required.anchor.set(0,.5),this.addChild(this.required),this.reward=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnRewardDoing.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardDoing.y*window.GameConfig.RESIZE,null),"DIAMOND"==e.reward_type?n="Gem":"TICKET"==e.reward_type?n="Ticket":"SUPPORT_ITEM"==e.reward_type&&(n="Mic");var i=new Phaser.Sprite(game,this.positionQAndAConfig.scroll.btnRewardDoing.diamond.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardDoing.diamond.y*window.GameConfig.RESIZE,"questAndAchieveSprites",n);this.reward.addChild(i);var o=new Phaser.Text(game,this.positionQAndAConfig.scroll.btnRewardDoing.txtDiamond.x*window.GameConfig.RESIZE,this.positionQAndAConfig.scroll.btnRewardDoing.txtDiamond.y*window.GameConfig.RESIZE,e.reward,this.positionQAndAConfig.scroll.btnRewardDoing.txtDiamond.configs);this.reward.addChild(o),this.addChild(this.reward)}}])&&nN(n.prototype,i),o&&nN(n,o),t}();function rN(e){return(rN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cN(e,t){return!t||"object"!==rN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hN(e){return(hN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uN(e,t){return(uN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dN=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=cN(this,hN(t).call(this,game,0,102*window.GameConfig.RESIZE,null))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.headerScroll,e.listScroll,e.quests,e.questLogs,e.nextQuest,e.listView,e.event={claimReward:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uN(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addHeaderScroll();var e=new Phaser.Group(game);e.x=0,e.y=95*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0,0,640*window.GameConfig.RESIZE,(game.height-386)*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0})}},{key:"addHeaderScroll",value:function(){this.headerScroll=new Phaser.Sprite(game,0,0,"otherSprites","tab-list"),this.addChildInHeaderScroll(this.positionQAndAConfig.scroll.main.header),this.addChild(this.headerScroll)}},{key:"addChildInHeaderScroll",value:function(e){var t=new Phaser.Text(game,e.txt_request.x*window.GameConfig.RESIZE,e.txt_request.y*window.GameConfig.RESIZE,de.instance().getData("232"),e.txt_request.configs);this.headerScroll.addChild(t);var n=new Phaser.Text(game,e.txt_reward.x*window.GameConfig.RESIZE,e.txt_reward.y*window.GameConfig.RESIZE,de.instance().getData("233"),e.txt_reward.configs);n.anchor.set(1,0),this.headerScroll.addChild(n);var i=new Phaser.Sprite(game,e.line.x*window.GameConfig.RESIZE,e.line.y*window.GameConfig.RESIZE,e.line.nameAtlas,e.line.nameSprite);this.headerScroll.addChild(i)}},{key:"setQuestsAndQuestLogs",value:function(e,t,n){this.quests=e,this.questLogs=t,this.nextQuest=n,this.addListScroll()}},{key:"addListScroll",value:function(){for(var e=0,t=0;t<this.quests.length;t++){for(var n=!1,i=0;i<this.questLogs.length;i++)if(this.questLogs[i].quest_id==this.quests[t].id){if(n=!0,"INIT"==this.questLogs[i].state){var o=new KM;o.addRequireAndReward(this.quests[t],this.questLogs[i].id),o.event.claimReward.add(this.claimReward,this),this.listView.add(o)}else if("REWARDED"==this.questLogs[i].state){e+=1;var a=new SM;a.addRequireAndReward(this.quests[t]),this.listView.add(a)}break}if(!1===n)if(this.quests[t].id==this.nextQuest.next_quest_id){var s=new sN;s.addRequireAndReward(this.quests[t],this.nextQuest),this.listView.add(s)}else{var r=new eN;r.addRequireAndReward(this.quests[t]),this.listView.add(r)}}e==this.listView.grp.children.length?this.listView.tweenToItem(e-1):this.listView.tweenToItem(e)}},{key:"claimReward",value:function(e,t){this.destroy(),this.event.claimReward.dispatch(e,t)}},{key:"destroy",value:function(){for(this.listView&&(this.listView.removeAll(),this.listView.destroy());this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&lN(n.prototype,i),o&&lN(n,o),t}();function fN(e){return(fN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gN(e,t){return!t||"object"!==fN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yN(e){return(yN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mN(e,t){return(mN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vN=function(e){function t(e,n,i){var o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=gN(this,yN(t).call(this,game,e,n,null))).type=2,i&&(o.typeBefore=i),o.type>o.typeBefore?o.x=game.width:o.x=-game.width,o.positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),o.firstLoad=a,o.scrollScreenOnTab=null,o.signalInput=new Phaser.Signal,o.event={claimReward:new Phaser.Signal,nextQuestResponse:new Phaser.Signal},o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mN(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),dV.instance().addEventExtension(this.onExtensionResponse,this),ak.instance().event.load_main_quest_complete.add(this.loadMainQuestComplete,this)}},{key:"loadMainQuestComplete",value:function(){this.handleQuestMain(),this.doneQuestLoadResponse()}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"addScrollScreen",value:function(){this.removeScrollScreen(),this.scrollScreenOnTab=new dN,this.scrollScreenOnTab.event.claimReward.add(this.claimReward,this),this.scrollScreenOnTab.setQuestsAndQuestLogs(oe.instance().mainQuestLists,oe.instance().mainQuestLogLists,oe.instance().mainNextQuest),this.addChild(this.scrollScreenOnTab)}},{key:"removeScrollScreen",value:function(){null!==this.scrollScreenOnTab&&(game.world.remove(this.scrollScreenOnTab),this.scrollScreenOnTab.destroy(),this.scrollScreenOnTab=null)}},{key:"claimReward",value:function(e,t){this.quest=e,this.quest_log_id=t,this.destroy(),this.event.claimReward.dispatch(e,t)}},{key:"show",value:function(){ht.instance().showLoading(),!1===this.firstLoad?(this.checkQuestLoadRequest(),0==oe.instance().isMainQuestLoad.checking?(dV.instance().sendData(ki.QUEST_CHECK_ACHIEVED_REQUEST,null),oe.instance().isMainQuestLoad.updated=Date.now(),oe.instance().isMainQuestLoad.checking=!0):(oe.instance().mainQuestLists=ak.instance().quests,oe.instance().mainQuestLogLists=ak.instance().quest_logs,dV.instance().sendData(ki.QUEST_CHECK_ACHIEVED_REQUEST,null)),game.add.tween(this).to({x:0},150,"Linear",!0)):(oe.instance().mainQuestLists=ak.instance().quests,oe.instance().mainQuestLogLists=ak.instance().quest_logs,this.loadMainQuestComplete(),game.add.tween(this).to({x:0},150,"Linear",!0))}},{key:"checkQuestLoadRequest",value:function(){1==oe.instance().isMainQuestLoad.checking?Date.now()-oe.instance().isMainQuestLoad.updated<6e3?oe.instance().isMainQuestLoad.checking=!0:oe.instance().isMainQuestLoad.checking=!1:oe.instance().isMainQuestLoad.checking=!1}},{key:"hide",value:function(e){var t=this;if(this.type>e){var n=game.add.tween(this).to({x:game.width},150,"Linear",!0);n.start(),n.onComplete.add(function(){dV.instance().removeEventExtension(t.onExtensionResponse,t),t.destroy()},this)}else{var i=game.add.tween(this).to({x:-game.width-300*window.GameConfig.RESIZE},150,"Linear",!0);i.start(),i.onComplete.add(function(){dV.instance().removeEventExtension(t.onExtensionResponse,t),t.destroy()},this)}}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.QUEST_CLAIM_REWARD_RESPONSE&&("OK"==e.params.getUtfString("status")?(this.scrollScreenOnTab.destroy(),this.scrollScreenOnTab=null):console.warn(e.params.getUtfString("message"))),e.cmd==ki.QUEST_LOAD_RESPONSE&&("OK"==e.params.getUtfString("status")||console.warn(e.params.getUtfString("message"))),e.cmd==ki.QUEST_CHECK_ACHIEVED_RESPONSE&&("OK"==e.params.getUtfString("status")?this.handleQuestLoadResponse(e.params):console.warn(e.params.getUtfString("message")))}},{key:"doneQuestLoadResponse",value:function(){this.addScrollScreen(),He.instance().logEvent(He.Quest_main),this.timeoutHideLoading=setTimeout(function(){ht.instance().hideLoading()},1e3)}},{key:"handleQuestLoadResponse",value:function(e,t){oe.instance().mainQuestLists=[],oe.instance().mainQuestLogLists=[],oe.instance().mainNextQuest=null;var n=e.getSFSObject("next_quest");oe.instance().mainNextQuest={next_quest_id:n.getInt("next_quest_id"),next_quest_archieved:n.getInt("next_quest_archieved")},1==ak.instance().ktloadMainQuestComplete?this.loadMainQuestComplete():ak.instance().sendGetMainQuest()}},{key:"handleQuestMain",value:function(){oe.instance().mainQuestLists=ak.instance().quests,oe.instance().mainQuestLogLists=ak.instance().quest_logs}},{key:"destroy",value:function(){for(clearTimeout(this.timeoutHideLoading),dV.instance().removeEventExtension(this.onExtensionResponse,this),ak.instance().event.load_main_quest_complete.remove(this.loadMainQuestComplete,this);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}}])&&pN(n.prototype,i),o&&pN(n,o),t}();function wN(e){return(wN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _N(e,t){return!t||"object"!==wN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function SN(e){return(SN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EN(e,t){return(EN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var CN=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=_N(this,SN(t).call(this,game))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),i.configs=e,i.index=n,i.event={claimReward:new Phaser.Signal},i.afterInit(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EN(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.medal,this.title,this.condition,this.tick,this.box,this.addMedal(this.positionQAndAConfig.achievement.medal),this.addTitle(this.positionQAndAConfig.achievement.title),this.addCondition(this.positionQAndAConfig.achievement.condition),this.paddingTitleAndCondition(),1==this.configs.is_done?"INIT"==this.configs.achievement_log.state?(this.title.setText("".concat(this.configs.title," ").concat(this.configs.current_level," (").concat(this.configs.achieved,"/").concat(this.configs.required,")")),this.addBoxClaim()):this.addTick():5==this.configs.current_level?this.addTick():this.addBox(),this.addLine(),this.checkIsDone(),this.addStar()}},{key:"addMedal",value:function(e){this.medal=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.medal.scale.set(window.GameConfig.SCALE_MEDAL*window.GameConfig.RESIZE),this.loadMedal(this.configs.medal),this.addChild(this.medal)}},{key:"loadMedal",value:function(e){this.medalUrl=e,game.cache.checkImageKey(this.medalUrl)?this.onLoadMedalComplete():(rn.instance().event.load_image_complate.add(this.onLoadMedalComplete,this),rn.instance().addLoader(this.medalUrl))}},{key:"onLoadMedalComplete",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoadMedalComplete,this),game.cache.checkImageKey(this.medalUrl)&&setTimeout(function(){try{game.cache.checkImageKey(e.medalUrl)&&e&&e.medal.loadTexture(e.medalUrl)}catch(e){}},50*this.index)}},{key:"addTitle",value:function(e){this.title=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,"".concat(this.configs.title," ").concat(this.configs.current_level+1," (").concat(this.configs.achieved,"/").concat(this.configs.required,")"),e.configs),5==this.configs.current_level&&this.title.setText("".concat(this.configs.title," ").concat(this.configs.current_level," (").concat(this.configs.achieved,"/").concat(this.configs.required,")")),this.addChild(this.title)}},{key:"addCondition",value:function(e){this.condition=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,this.configs.condition,e.configs),this.addChild(this.condition)}},{key:"paddingTitleAndCondition",value:function(){var e=this.title.height+this.condition.height;this.title.y=(164*window.GameConfig.RESIZE-e)/2-5*window.GameConfig.RESIZE,this.condition.y=(164*window.GameConfig.RESIZE-e)/2+this.title.height+5*window.GameConfig.RESIZE}},{key:"addTick",value:function(){var e=new Phaser.Sprite(game,this.positionQAndAConfig.achievement.tick.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.tick.y*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.tick.nameAtlas,this.positionQAndAConfig.achievement.tick.nameSprite);e.anchor.set(.5),this.addChild(e)}},{key:"addBox",value:function(){this.box=new Phaser.Sprite(game,this.positionQAndAConfig.achievement.box.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.box.y*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.box.nameAtlas,this.positionQAndAConfig.achievement.box.nameSprite),this.box.anchor.set(.5),this.box.alpha=.5,this.addIconAndTxtReward(),this.addChild(this.box)}},{key:"addIconAndTxtReward",value:function(){var e=this.addIcon(),t=this.addReward(),n=e.width+t.width;t.x=(this.box.width-n)/2-5*window.GameConfig.RESIZE-this.box.width/2,e.x=(this.box.width-n)/2+t.width+5*window.GameConfig.RESIZE-this.box.width/2,this.box.addChild(e),this.box.addChild(t)}},{key:"addIcon",value:function(){var e;return"DIAMOND"==this.configs.reward_type?e="Gem":"TICKET"==this.configs.reward_type?e="Ticket-tiny":"SUPPORT_ITEM"==this.configs.reward_type&&(e="Mic_tiny"),new Phaser.Sprite(game,0,-8*window.GameConfig.RESIZE,"defaultSource",e)}},{key:"addReward",value:function(){return new Phaser.Text(game,0,-8*window.GameConfig.RESIZE,this.configs.reward,{font:"GilroyBold",fill:"#ffffff",fontSize:18})}},{key:"addBoxClaim",value:function(){this.box=new Phaser.Sprite(game,this.positionQAndAConfig.achievement.box_claim.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.box_claim.y*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.box_claim.nameAtlas,this.positionQAndAConfig.achievement.box_claim.nameSprite),this.box.anchor.set(.5),this.box.inputEnabled=!0,this.box.events.onInputUp.add(this.onClaimReward,this),this.addIconAndTxtBoxClaim(),this.addChild(this.box)}},{key:"addIconAndTxtBoxClaim",value:function(){var e=new Phaser.Text(game,this.positionQAndAConfig.achievement.box_claim.txt.x*window.GameConfig.RESIZE,this.positionQAndAConfig.achievement.box_claim.txt.y*window.GameConfig.RESIZE,de.instance().getData("189"),this.positionQAndAConfig.achievement.box_claim.txt.configs);e.anchor.set(.5),this.box.addChild(e);var t=this.addIcon();t.y=14*window.GameConfig.RESIZE;var n=this.addReward();n.y=14*window.GameConfig.RESIZE;var i=t.width+n.width;n.x=(this.box.width-i)/2-5*window.GameConfig.RESIZE-this.box.width/2,t.x=(this.box.width-i)/2+n.width+5*window.GameConfig.RESIZE-this.box.width/2,this.box.addChild(t),this.box.addChild(n)}},{key:"onClaimReward",value:function(){this.box.inputEnabled=!1,be.instance().playSound(be.buttonclick),this.event.claimReward.dispatch(this.configs)}},{key:"addLine",value:function(){var e=new Phaser.Sprite(game,35*window.GameConfig.RESIZE,162*window.GameConfig.RESIZE,"defaultSource","Line");this.addChild(e)}},{key:"addStar",value:function(){"INIT"==this.configs.achievement_log.state?(this.stars=new Uo(80,22,this.configs.current_level,.5),this.addChild(this.stars)):(this.stars=new Uo(80,22,this.configs.current_level+1,.5),this.addChild(this.stars)),1==this.configs.current_level||2==this.configs.current_level||3==this.configs.current_level||4==this.configs.current_level||this.configs.current_level}},{key:"checkIsDone",value:function(){1==this.configs.is_done?this.alpha=1:0==this.configs.current_level?this.alpha=.4:this.alpha=1}},{key:"height",get:function(){return 164*window.GameConfig.RESIZE}}])&&bN(n.prototype,i),o&&bN(n,o),t}();function kN(e){return(kN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ON(e,t){return!t||"object"!==kN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RN(e,t,n){return(RN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xN(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function xN(e){return(xN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TN(e,t){return(TN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var IN=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ON(this,xN(t).call(this,game))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.event={claimReward:new Phaser.Signal},e.listScroll,e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TN(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.sendLoadAchievementRequest(),this.addEventExtension()}},{key:"addListScroll",value:function(){var e=new Phaser.Group(game);e.x=0,e.y=95*window.GameConfig.RESIZE,this.addChild(e);var t=new Phaser.Rectangle(0,10,640*window.GameConfig.RESIZE,(game.height-286)*window.GameConfig.RESIZE);this.listView=new Ia(game,e,t,{direction:"y",overflow:100,padding:0,searchForClicks:!0});for(var n=0;n<oe.instance().achievements.length;n++){var i=new CN(oe.instance().achievements[n],n);i.event.claimReward.add(this.claimReward,this),this.listView.add(i)}}},{key:"claimReward",value:function(e){this.listView.destroy(),this.event.claimReward.dispatch(e),this.destroy()}},{key:"sendLoadAchievementRequest",value:function(){ht.instance().showLoading(),this.checkAchievementLoadRequest()}},{key:"checkAchievementLoadRequest",value:function(){oe.instance().achievements.length>0?this.doneAchievementResponse():(dV.instance().sendData(ki.ACHIEVEMENT_LOAD_REQUEST,null),oe.instance().isAchievementLoad.checking=!0,oe.instance().isAchievementLoad.updated=Date.now())}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"onExtensionResponse",value:function(e){var t=this;e.cmd==ki.ACHIEVEMENT_LOAD_RESPONSE&&("OK"==e.params.getUtfString("status")?this.handleAchievementResponse(e.params,function(){t.sortAchievement(function(){t.doneAchievementResponse()})}):console.warn(e.params.getUtfString("message")))}},{key:"sortAchievement",value:function(e){oe.instance().achievements.sort(function(e){return"INIT"==e.achievement_log.state?-1:0}),e()}},{key:"doneAchievementResponse",value:function(){this.addListScroll(),this.timeOutHideLoading=setTimeout(function(){ht.instance().hideLoading()},1e3)}},{key:"handleAchievementResponse",value:function(e,t){oe.instance().achievements=[];for(var n=[],i=e.getSFSArray("achievements"),o=0;o<i.size();o++){var a=i.getSFSObject(o),s=a.getInt("reward"),r=a.getUtfString("condition"),l=!1;a.containsKey("achievement_log")&&(l=!0);var c={user_id:0,achievement_id:0,created:0,id:0,state:"UNKNOWN",updated:0,level:0};if(1==l){var h=a.getSFSObject("achievement_log");c.user_id=h.getInt("user_id"),c.achievement_id=h.getInt("achievement_id"),c.created=h.getLong("created"),c.id=h.getLong("id"),c.state=h.getUtfString("state"),c.updated=h.getLong("updated"),c.level=h.getInt("level")}var u=a.getUtfString("reward_type"),d=a.getUtfString("medal"),f=a.getInt("achieved"),p=a.getInt("id"),g=a.getUtfString("title"),y=a.getInt("required"),m=a.getInt("current_level");n.push({reward:s,condition:r,is_done:l,reward_type:u,medal:d,achieved:f,id:p,title:g,required:y,achievement_log:c,current_level:m})}oe.instance().achievements=n,t()}},{key:"destroy",value:function(){for(clearTimeout(this.timeOutHideLoading),this.removeEventExtension(),this.listView.removeAll(),this.listView.destroy();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),this.listView.destroy(),RN(xN(t.prototype),"destroy",this).call(this)}}])&&PN(n.prototype,i),o&&PN(n,o),t}();function AN(e){return(AN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function DN(e,t){return!t||"object"!==AN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GN(e){return(GN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MN(e,t){return(MN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var NN=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=DN(this,GN(t).call(this,game,e,n,null))).type=3,i&&(o.typeBefore=i),o.type>o.typeBefore?o.x=game.width:o.x=-game.width,o.positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),o.scrollScreenOnTab=null,o.signalInput=new Phaser.Signal,o.event={claimReward:new Phaser.Signal},o.afterInit(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MN(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addScrollScreen()}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"addScrollScreen",value:function(){this.scrollScreenOnTab=new IN,this.scrollScreenOnTab.event.claimReward.add(this.claimReward,this),this.addChild(this.scrollScreenOnTab),He.instance().logEvent(He.Quest_Achievement)}},{key:"claimReward",value:function(e){this.event.claimReward.dispatch(e)}},{key:"show",value:function(){game.add.tween(this).to({x:0},150,"Linear",!0)}},{key:"hide",value:function(e){var t=this;if(this.type>e){var n=game.add.tween(this).to({x:game.width},150,"Linear",!0);n.start(),n.onComplete.add(function(){t.destroy()},this)}else{var i=game.add.tween(this).to({x:-game.width-300*window.GameConfig.RESIZE},150,"Linear",!0);i.start(),i.onComplete.add(function(){t.destroy()},this)}}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&LN(n.prototype,i),o&&LN(n,o),t}();function BN(e){return(BN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function UN(e,t){return!t||"object"!==BN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FN(e){return(FN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZN(e,t){return(ZN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HN=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=UN(this,FN(t).call(this,game,0,175*window.GameConfig.RESIZE,null))).positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),e.tabDaily,e.tabMain,e.tabAchievement,e.lineDoc,e.event={claimReward:new Phaser.Signal,claimRewardQuest:new Phaser.Signal},e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZN(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.typeNew,this.typeOld,this.mainQuests,this.mainQuestLogs,this.mainNextQuest,this.firstLoadMain=!1,this.addBtnNavBar(),this.addLineDoc(this.positionQAndAConfig.tabUnderHeader.line_doc)}},{key:"addBtnNavBar",value:function(){this.addDailyBtn(),this.addActiveDailyBtn(),this.addMainBtn(),this.addActiveMainBtn(),this.addAchievementBtn(),this.addActiveAchievementBtn(),this.buildBtnArray()}},{key:"setMainQuestsAndQuestLogs",value:function(e,t,n){this.mainQuests=e,this.mainQuestLogs=t,this.mainNextQuest=n}},{key:"adjustPositionCenter",value:function(e,t,n){var i=e.width+t.width;e.x=(n.width-i)/2,t.x=e.x+e.width+10}},{key:"addDailyBtn",value:function(){this.dailyBtn=new Phaser.Button(game,0,0,"questAndAchieveSprites",function(){},this,null,"Tab_Menu_Quest");var e=this.addIcon(this.positionQAndAConfig.tabUnderHeader.daily.disactive.icon),t=this.addTxt(this.positionQAndAConfig.tabUnderHeader.daily.disactive.txt,de.instance().getData("229"));this.dailyBtn.addChild(e),this.dailyBtn.addChild(t),this.adjustPositionCenter(e,t,this.dailyBtn),this.dailyBtn.events.onInputUp.add(this.onClickDailyBtn,this),this.addChild(this.dailyBtn)}},{key:"onClickDailyBtn",value:function(){He.instance().logEvent(He.Quest_Daily_button),be.instance().playSound(be.buttonclick),Gl.switchButton(this.btnArray,this.activeBtnArray,this.dailyBtn,this.dailyActiveBtn),this.typeNew=1,this.changeScreen(this.typeNew,this.typeOld),this.typeOld=1}},{key:"addActiveDailyBtn",value:function(){this.dailyActiveBtn=new Phaser.Button(game,0,0,"questAndAchieveSprites",function(){},this,null,"Tab_Menu_Quest");var e=this.addIcon(this.positionQAndAConfig.tabUnderHeader.daily.active.icon),t=this.addTxt(this.positionQAndAConfig.tabUnderHeader.daily.active.txt,de.instance().getData("229"));this.dailyActiveBtn.addChild(e),this.dailyActiveBtn.addChild(t),this.adjustPositionCenter(e,t,this.dailyActiveBtn),this.addLineUnder(this.dailyActiveBtn,this.positionQAndAConfig.tabUnderHeader.daily.active.line),this.addChild(this.dailyActiveBtn)}},{key:"addMainBtn",value:function(){this.mainBtn=new Phaser.Button(game,215*window.GameConfig.RESIZE,0,"questAndAchieveSprites",function(){},this,null,"Tab_Menu_Quest");var e=this.addIcon(this.positionQAndAConfig.tabUnderHeader.main.disactive.icon),t=this.addTxt(this.positionQAndAConfig.tabUnderHeader.main.disactive.txt,de.instance().getData("230"));this.mainBtn.addChild(e),this.mainBtn.addChild(t),this.adjustPositionCenter(e,t,this.mainBtn),this.mainBtn.events.onInputUp.add(this.onClickMainBtn,this),this.addChild(this.mainBtn)}},{key:"onClickMainBtn",value:function(){He.instance().logEvent(He.Quest_main_button),be.instance().playSound(be.buttonclick),Gl.switchButton(this.btnArray,this.activeBtnArray,this.mainBtn,this.mainActiveBtn),this.typeNew=2,this.changeScreen(this.typeNew,this.typeOld),this.typeOld=2}},{key:"addActiveMainBtn",value:function(){this.mainActiveBtn=new Phaser.Button(game,215*window.GameConfig.RESIZE,0,"questAndAchieveSprites",function(){},this,null,"Tab_Menu_Quest");var e=this.addIcon(this.positionQAndAConfig.tabUnderHeader.main.active.icon),t=this.addTxt(this.positionQAndAConfig.tabUnderHeader.main.active.txt,de.instance().getData("230"));this.mainActiveBtn.addChild(e),this.mainActiveBtn.addChild(t),this.adjustPositionCenter(e,t,this.mainActiveBtn),this.addLineUnder(this.mainActiveBtn,this.positionQAndAConfig.tabUnderHeader.main.active.line),this.addChild(this.mainActiveBtn)}},{key:"addAchievementBtn",value:function(){this.achievementBtn=new Phaser.Button(game,427*window.GameConfig.RESIZE,0,"questAndAchieveSprites",function(){},this,null,"Tab_Menu_Quest");var e=this.addIcon(this.positionQAndAConfig.tabUnderHeader.achievement.disactive.icon),t=this.addTxt(this.positionQAndAConfig.tabUnderHeader.achievement.disactive.txt,de.instance().getData("231"));this.achievementBtn.addChild(e),this.achievementBtn.addChild(t),this.adjustPositionCenter(e,t,this.achievementBtn),this.achievementBtn.events.onInputUp.add(this.onClickAchievementBtn,this),this.addChild(this.achievementBtn)}},{key:"onClickAchievementBtn",value:function(){He.instance().logEvent(He.Quest_Achievement_button),be.instance().playSound(be.buttonclick),Gl.switchButton(this.btnArray,this.activeBtnArray,this.achievementBtn,this.achievementActiveBtn),this.typeNew=3,this.changeScreen(this.typeNew,this.typeOld),this.typeOld=3}},{key:"addActiveAchievementBtn",value:function(){this.achievementActiveBtn=new Phaser.Button(game,427*window.GameConfig.RESIZE,0,"questAndAchieveSprites",function(){},this,null,"Tab_Menu_Quest");var e=this.addIcon(this.positionQAndAConfig.tabUnderHeader.achievement.active.icon),t=this.addTxt(this.positionQAndAConfig.tabUnderHeader.achievement.active.txt,de.instance().getData("231"));this.achievementActiveBtn.addChild(e),this.achievementActiveBtn.addChild(t),this.adjustPositionCenter(e,t,this.achievementActiveBtn),this.addLineUnder(this.achievementActiveBtn,this.positionQAndAConfig.tabUnderHeader.achievement.active.line),this.addChild(this.achievementActiveBtn)}},{key:"addIcon",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxt",value:function(e,t){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,t,e.configs)}},{key:"addLineUnder",value:function(e,t){var n=new Phaser.Sprite(game,t.x*window.GameConfig.RESIZE,t.y*window.GameConfig.RESIZE,t.nameAtlas,t.nameSprite);e.addChild(n)}},{key:"buildBtnArray",value:function(){this.activeBtnArray=[this.dailyActiveBtn,this.mainActiveBtn,this.achievementActiveBtn],this.btnArray=[this.dailyBtn,this.mainBtn,this.achievementBtn]}},{key:"changeScreen",value:function(e,t){1==e?(Gl.switchButton(this.btnArray,this.activeBtnArray,this.dailyBtn,this.dailyActiveBtn),this.tabDaily=new ZM(0,0,t),this.addChild(this.tabDaily),this.tabDaily.show(),this.hideScreen(e,t),null==t&&(this.typeOld=e)):2==e?(Gl.switchButton(this.btnArray,this.activeBtnArray,this.mainBtn,this.mainActiveBtn),this.tabMain=new vN(0,0,t,this.firstLoadMain),this.firstLoadMain=!0,this.tabMain.event.claimReward.add(this.claimRewardQuest,this),this.hideScreen(e,t),this.tabMain.show(),this.addChild(this.tabMain),null==t&&(this.typeOld=e)):3==e&&(Gl.switchButton(this.btnArray,this.activeBtnArray,this.achievementBtn,this.achievementActiveBtn),this.tabAchievement=new NN(0,0,t),this.tabAchievement.event.claimReward.add(this.claimReward,this),this.hideScreen(e,t),this.tabAchievement.show(),this.addChild(this.tabAchievement),null==t&&(this.typeOld=e))}},{key:"claimRewardQuest",value:function(e,t){this.event.claimRewardQuest.dispatch(e,t)}},{key:"claimReward",value:function(e){this.event.claimReward.dispatch(e)}},{key:"hideScreen",value:function(e,t){1==t?this.tabDaily.hide(e):2==t?this.tabMain.hide(e):3==t&&this.tabAchievement.hide(e)}},{key:"addLineDoc",value:function(e){for(var t=1;t<3;t++){var n=new Phaser.Sprite(game,e.x*t*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite);this.addChild(n)}}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}}])&&jN(n.prototype,i),o&&jN(n,o),t}();function VN(e){return(VN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WN(e,t){return!t||"object"!==VN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qN(e){return(qN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KN(e,t){return(KN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zN=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=WN(this,qN(t).call(this,game))).type=e,n.header,n.tabsUnderHeader,n.scrollGroup,n.quests=[],n.questLogs=[],n.nextQuest,n.achievementClaim,n.typeClaim=0,n.signalBack=new Phaser.Signal,n.arrResource=[{type:"text",link:"img/config/questAndAchieveConfig.json",key:"positionQAndAConfig"}],n.loadResource(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KN(e,t)}(t,Wp),n=t,(i=[{key:"onLoadFileComplete",value:function(){this.positionQAndAConfig=JSON.parse(game.cache.getText("positionQAndAConfig")),this.afterInit(),this.setQuestAndQuestLogs()}},{key:"afterInit",value:function(){this.addEventExtension(),this.addHeaderTab(this.positionQAndAConfig.header),this.addHeaderResources(this.positionQAndAConfig.header),ht.instance().hideLoading(),oe.instance().achievements=[],oe.instance().dailyQuestLists=[],Ei.instance().showBanerQuestScreen()}},{key:"addHeaderResources",value:function(e){this.headerResource=new Phaser.Sprite(game,e.tab_chonplaylist.x*window.GameConfig.RESIZE,e.tab_chonplaylist.y*window.GameConfig.RESIZE,e.tab_chonplaylist.nameAtlas,e.tab_chonplaylist.nameSprite),this.addChild(this.headerResource),this.txtQuest,this.btnBack,this.addTxtQuest(this.positionQAndAConfig.header.txt_quest),this.addButtonBack(e.btn_back),this.txtGem,this.txtTicket,this.txtMic,this.tabGemHeader,this.tabTicketHeader,this.tabMicHeader,this.addTabGemHeader(this.positionQAndAConfig.header),this.addTabTicketHeader(this.positionQAndAConfig.header),this.addTabMicHeader(this.positionQAndAConfig.header)}},{key:"addTabGemHeader",value:function(e){this.tabGemHeader=new Phaser.Sprite(game,e.tabGem.x*window.GameConfig.RESIZE,e.tabGem.y*window.GameConfig.RESIZE,e.tabGem.nameAtlas,e.tabGem.nameSprite);var t=this.addGem(this.positionQAndAConfig.header.gem);this.txtGem=this.addTxtGem(this.positionQAndAConfig.header.txtResource);var n=t.width+this.txtGem.width;this.txtGem.x=(this.tabGemHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabGemHeader.width-n)/2+this.txtGem.width+5*window.GameConfig.RESIZE,this.tabGemHeader.addChild(t),this.tabGemHeader.addChild(this.txtGem),this.headerResource.addChild(this.tabGemHeader)}},{key:"addGem",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtGem",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("diamond").value,e.configs)}},{key:"addTabTicketHeader",value:function(e){this.tabTicketHeader=new Phaser.Sprite(game,e.tabTicket.x*window.GameConfig.RESIZE,e.tabTicket.y*window.GameConfig.RESIZE,e.tabTicket.nameAtlas,e.tabTicket.nameSprite);var t=this.addTicket(this.positionQAndAConfig.header.ticket);this.txtTicket=this.addTxtTicket(this.positionQAndAConfig.header.txtResource);var n=t.width+this.txtTicket.width;this.txtTicket.x=(this.tabTicketHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabTicketHeader.width-n)/2+this.txtTicket.width+5*window.GameConfig.RESIZE,this.tabTicketHeader.addChild(t),this.tabTicketHeader.addChild(this.txtTicket),this.headerResource.addChild(this.tabTicketHeader)}},{key:"addTicket",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtTicket",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("ticket").value,e.configs)}},{key:"addTabMicHeader",value:function(e){this.tabMicHeader=new Phaser.Sprite(game,e.tabMic.x*window.GameConfig.RESIZE,e.tabMic.y*window.GameConfig.RESIZE,e.tabMic.nameAtlas,e.tabMic.nameSprite);var t=this.addMic(this.positionQAndAConfig.header.micro);this.txtMic=this.addTxtMic(this.positionQAndAConfig.header.txtResource);var n=t.width+this.txtMic.width;this.txtMic.x=(this.tabMicHeader.width-n)/2-5*window.GameConfig.RESIZE,t.x=(this.tabMicHeader.width-n)/2+this.txtMic.width+5*window.GameConfig.RESIZE,this.tabMicHeader.addChild(t),this.tabMicHeader.addChild(this.txtMic),this.headerResource.addChild(this.tabMicHeader)}},{key:"addMic",value:function(e){return new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite)}},{key:"addTxtMic",value:function(e){return new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,dV.instance().socket.mySelf.getVariable("support_item").value,e.configs)}},{key:"addHeaderTab",value:function(e){this.headerTab=new Phaser.Sprite(game,e.tab_quest.x*window.GameConfig.RESIZE,e.tab_quest.y*window.GameConfig.RESIZE,e.tab_quest.nameAtlas,e.tab_quest.nameSprite),this.addChild(this.headerTab)}},{key:"addButtonBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.headerResource.addChild(this.btnBack)}},{key:"onBack",value:function(){be.instance().playSound(be.buttonclick),this.removeAllChild(),FH.instance().changeScreen(De.MAIN_MENU),this.destroy()}},{key:"setQuestAndQuestLogs",value:function(){this.addTabsUnderHeader(this.type)}},{key:"addTxtQuest",value:function(e){this.txtQuest=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,de.instance().getData("228"),e.configs),this.txtQuest.anchor.set(.5,0),this.headerTab.addChild(this.txtQuest)}},{key:"addTabsUnderHeader",value:function(e){this.tabsUnderHeader=new HN,this.tabsUnderHeader.changeScreen(e),this.tabsUnderHeader.event.claimReward.add(this.claimReward,this),this.tabsUnderHeader.event.claimRewardQuest.add(this.claimRewardQuest,this),this.addChild(this.tabsUnderHeader),oe.instance().playScript.playing_guide==_o.DONE_TURNBASE&&(this.playScript=new _o,this.playScript.afterInit(),this.playScript.removeAllTut(),this.playScript.addStep6BtnReceiveInQAndA(),this.playScript.onSkipPS(),this.addChild(this.playScript))}},{key:"claimRewardQuest",value:function(e,t){this.questClaim=e,this.questClaimId=t,this.sendRequestClaimQuest()}},{key:"claimReward",value:function(e){this.achievementClaim=e,this.sendRequestClaimAchievement()}},{key:"updateVariableResource",value:function(e){var t=this;if("DIAMOND"==e.reward_type){this.txtGem.setText(dV.instance().socket.mySelf.getVariable("diamond").value-e.reward);var n=game.add.tween(this.txtGem).to({text:dV.instance().socket.mySelf.getVariable("diamond").value},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){t.txtGem.text=parseInt(t.txtGem.text)},this),n.onComplete.add(function(){t.checkAds()},this)}else if("TICKET"==e.reward_type){this.txtTicket.setText(dV.instance().socket.mySelf.getVariable("ticket").value-e.reward);var i=game.add.tween(this.txtTicket).to({text:dV.instance().socket.mySelf.getVariable("ticket").value},300,"Linear",!1);i.start(),i.onUpdateCallback(function(){t.txtTicket.text=parseInt(t.txtTicket.text)},this),i.onComplete.add(function(){t.checkAds()},this)}else if("SUPPORT_ITEM"==e.reward_type){this.txtMic.setText(dV.instance().socket.mySelf.getVariable("support_item").value-e.reward);var o=game.add.tween(this.txtMic).to({text:dV.instance().socket.mySelf.getVariable("support_item").value},300,"Linear",!1);o.start(),o.onUpdateCallback(function(){t.txtMic.text=parseInt(t.txtMic.text)},this),o.onComplete.add(function(){t.checkAds()},this)}}},{key:"checkAds",value:function(){oe.instance().playScript.playing_guide==_o.DONE_ALL&&(1==this.typeClaim?(Ei.instance().questTakeReward(),Ei.instance().showInterstitialQuestTakereward()):2==this.typeClaim&&(Ei.instance().achievementTakeReward(),Ei.instance().showInterstitialachievementTakeReward()))}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.add(this.onBack,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this),Qe.instance().event.backButton.remove(this.onBack,this)}},{key:"onExtensionResponse",value:function(e){var t=this;e.cmd==ki.ACHIEVEMENT_CLAIM_REWARD_RESPONSE&&"OK"==e.params.getUtfString("status")&&(oe.instance().achievements=[],this.typeClaim=2,this.tabsUnderHeader.changeScreen(3),jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,{type:this.achievementClaim.reward_type,reward:this.achievementClaim.reward}),this.timeUpdateAchievement=game.time.events.add(2*Phaser.Timer.SECOND,function(){t.updateVariableResource(t.achievementClaim)},this),ht.instance().hideLoading()),e.cmd==ki.QUEST_CLAIM_REWARD_RESPONSE&&"OK"==e.params.getUtfString("status")&&(this.typeClaim=1,this.tabsUnderHeader.changeScreen(2),jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,{type:this.questClaim.reward_type,reward:this.questClaim.reward}),this.timeUpdateQuest=game.time.events.add(2*Phaser.Timer.SECOND,function(){t.updateVariableResource(t.questClaim)},this),ht.instance().hideLoading(),this.timeUpdatePlayScript=game.time.events.add(3.2*Phaser.Timer.SECOND,function(){oe.instance().playScript.playing_guide==_o.DONE_TURNBASE&&dV.instance().sendData(ki.PLAY_SCRIPT_DONE_GET_QUEST_REQUEST,null)}),Gl.changeQuestLogsOnClaim(this.questClaimId,ak.instance().quest_logs),this.questClaimId=null,dV.instance().sendData(ki.QUEST_CHECK_ACHIEVED_REQUEST,null)),e.cmd==ki.PLAY_SCRIPT_DONE_GET_QUEST_RESPONSE&&"OK"==e.params.getUtfString("status")&&(this.playScript=new _o,this.playScript.afterInit(),this.playScript.addStep7CloseQAndA(),this.playScript.event.step7.add(this.cancleQuestTut,this),this.addChild(this.playScript)),e.cmd==ki.PLAY_SCRIPT_DONE_ALL_RESPONSE&&"OK"==e.params.getUtfString("status")&&(oe.instance().playScript.playing_guide=_o.DONE_ALL,this.playScript.destroy())}},{key:"cancleQuestTut",value:function(){be.instance().playSound(be.buttonclick),this.removeAllChild(),FH.instance().changeScreen(De.MAIN_MENU),this.destroy()}},{key:"sendRequestClaimQuest",value:function(){LogConsole.log(this.questClaim);var e=new SFS2X.SFSObject;e.putLong("quest_log_id",this.questClaimId),dV.instance().sendData(ki.QUEST_CLAIM_REWARD_REQUEST,e),ht.instance().showLoading()}},{key:"sendRequestClaimAchievement",value:function(){LogConsole.log(this.achievementClaim);var e=new SFS2X.SFSObject;e.putLong("achievement_log_id",this.achievementClaim.achievement_log.id),dV.instance().sendData(ki.ACHIEVEMENT_CLAIM_REWARD_REQUEST,e),ht.instance().showLoading()}},{key:"removeAllChild",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}}},{key:"destroy",value:function(){for(this.removeEventExtension(),Ei.instance().hideBanner(),game.time.events.remove(this.timeUpdateAchievement),game.time.events.remove(this.timeUpdateQuest),game.time.events.remove(this.timeUpdatePlayScript);this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this)}}])&&QN(n.prototype,i),o&&QN(n,o),t}();function YN(e){return(YN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function JN(e,t){return!t||"object"!==YN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $N(e){return($N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eB(e,t){return(eB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tB=function(e){function t(e,n,i,o,a,s){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=JN(this,$N(t).call(this,game,0,n,i.nameAtlas,i.nameSprite))).configs=o,r.childrenGenre=a,r.index=s,r.posX=e,r.posY=n,r.choosed=o.choosed,0==r.index?r.x=-296*window.GameConfig.RESIZE:r.index%2==1?r.x=936*window.GameConfig.RESIZE:r.x=-296*window.GameConfig.RESIZE,r.signalInput=new Phaser.Signal,r.afterInit(),r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eB(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.inputEnabled=!0,this.events.onInputUp.add(this.onClickSprite,this),this.addTicked(),this.makeTweenGenre()}},{key:"makeTweenGenre",value:function(){var e=game.add.tween(this).to({x:this.posX},500,Phaser.Easing.Back.Out,!1);setTimeout(function(){e.start()},100*this.index)}},{key:"onClickSprite",value:function(){be.instance().playSound(be.buttonclick),this.childrenGenre.length>0?this.signalInput.dispatch({cmd:"HAS_CHILD",childrenGenre:this.childrenGenre,nameParent:this.configs.genre}):1==this.choosed?(this.destroyTicked(),this.signalInput.dispatch({cmd:"DISCHOOSED",id:this.configs.id}),this.choosed=!1):0==this.choosed&&(this.showTicked(),this.signalInput.dispatch({cmd:"CHOOSED",id:this.configs.id}),this.choosed=!0)}},{key:"addTicked",value:function(){this.tick=new Phaser.Sprite(game,223*window.GameConfig.RESIZE,103*window.GameConfig.RESIZE,"isNewUserSprites","Button_Active"),this.frameAcitve=new Phaser.Sprite(game,0*window.GameConfig.RESIZE,0*window.GameConfig.RESIZE,"isNewUserSprites","Khung_Active"),1==this.choosed||(this.frameAcitve.kill(),this.tick.kill()),this.addChild(this.frameAcitve),this.addChild(this.tick)}},{key:"destroyTicked",value:function(){this.frameAcitve.kill(),this.tick.kill()}},{key:"showTicked",value:function(){this.frameAcitve.revive(),this.tick.revive()}},{key:"addEventInput",value:function(e,t){this.signalInput.add(e,t)}},{key:"removeEventInput",value:function(e,t){this.signalInput.remove(e,t)}}])&&XN(n.prototype,i),o&&XN(n,o),t}();function nB(e){return(nB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oB(e,t){return!t||"object"!==nB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aB(e){return(aB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sB(e,t){return(sB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rB=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oB(this,aB(t).call(this,game,e,n,null))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sB(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"add",value:function(e){this.addChild(e)}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&iB(n.prototype,i),o&&iB(n,o),t}();function lB(e){return(lB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hB(e,t){return!t||"object"!==lB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uB(e){return(uB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dB(e,t){return(dB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fB=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hB(this,uB(t).call(this,game,0,249*window.GameConfig.RESIZE,null))).arrGenres=e,n.positionIsNewUserConfig=JSON.parse(game.cache.getText("positionIsNewUserConfig")),n.afterInit(),n.signalEvent=new Phaser.Signal,n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dB(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.listViewMain,this.chooseChildrenGenre,this.fatherParentGenres=this.arrGenres.filter(function(e){return 0==e.parent}),this.addParentGenres()}},{key:"addParentGenres",value:function(){var e=this,t=new rB(0,0),n=new Phaser.Group(game,this);n.x=0,n.y=0,this.addChild(n);var i=new Phaser.Rectangle(35*window.GameConfig.RESIZE,0,570*window.GameConfig.RESIZE,(game.height-141)*window.GameConfig.RESIZE);this.listViewMain=new Ia(game,n,i,{direction:"y",overflow:100,padding:0,searchForClicks:!0});for(var o=0,a=0,s=function(n){n%2==0&&n>0?(o=0,a+=window.GameConfig.CONFIGS_GENRE.y*window.GameConfig.RESIZE,t.height+=window.GameConfig.CONFIGS_GENRE.y*window.GameConfig.RESIZE):0==n?o=0:o+=window.GameConfig.CONFIGS_GENRE.x*window.GameConfig.RESIZE;var i=e.arrGenres.filter(function(t){return t.parent==e.fatherParentGenres[n].id}),s=new tB(o,a,e.positionIsNewUserConfig.chooseMain.genres[e.fatherParentGenres[n].code],e.fatherParentGenres[n],i,n);s.addEventInput(e.onClickGenreSprite,e),t.add(s)},r=0;r<this.fatherParentGenres.length;r++)s(r);this.listViewMain.add(t)}},{key:"onClickGenreSprite",value:function(e){"CHOOSED"==e.cmd?this.signalEvent.dispatch({cmd:"CHOOSED",id:e.id}):"HAS_CHILD"==e.cmd?(this.kill(),this.signalEvent.dispatch({cmd:"HAS_CHILD",childrenGenre:e.childrenGenre,nameParent:e.nameParent})):"DISCHOOSED"==e.cmd&&this.signalEvent.dispatch({cmd:"DISCHOOSED",id:e.id})}},{key:"addEvent",value:function(e,t){this.signalEvent.add(e,t)}},{key:"removeEvent",value:function(e,t){this.signalEvent.remove(e,t)}},{key:"height",set:function(e){this._height=e},get:function(){return this._height}}])&&cB(n.prototype,i),o&&cB(n,o),t}();function pB(e){return(pB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yB(e,t){return!t||"object"!==pB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mB(e){return(mB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vB(e,t){return(vB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wB=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=yB(this,mB(t).call(this,game))).arrGenres=e,i.genreParent=n,i.positionIsNewUserConfig=JSON.parse(game.cache.getText("positionIsNewUserConfig")),i.afterInit(),i.signalEvent=new Phaser.Signal,i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vB(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.listView,this.btnBack,this.txtParentGenre,this.addBtnBack(this.positionIsNewUserConfig.chooseUS_UK.btn_back),this.addTxtParentGenre(this.positionIsNewUserConfig.chooseUS_UK.txt_parent),this.addGenres()}},{key:"addBtnBack",value:function(e){this.btnBack=new Phaser.Sprite(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,e.nameAtlas,e.nameSprite),this.btnBack.anchor.set(.5),this.btnBack.inputEnabled=!0,this.btnBack.events.onInputUp.add(this.onBack,this),this.addChild(this.btnBack)}},{key:"onBack",value:function(){be.instance().playSound(be.buttonclick),this.signalEvent.dispatch({type:"BACK"}),this.destroy()}},{key:"addTxtParentGenre",value:function(e){this.txtParentGenre=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,this.genreParent,e.configs),this.txtParentGenre.anchor.set(.5,0),this.addChild(this.txtParentGenre)}},{key:"addGenres",value:function(){var e=this,t=new rB(0,0),n=new Phaser.Group(game,this);n.x=0,n.y=0,this.addChild(n);var i=new Phaser.Rectangle(35*window.GameConfig.RESIZE,248*window.GameConfig.RESIZE,570*window.GameConfig.RESIZE,(game.height-141)*window.GameConfig.RESIZE);this.listView=new Ia(game,n,i,{direction:"y",overflow:100,padding:0,searchForClicks:!0});for(var o=0,a=0,s=function(n){n%2==0&&n>0?(o=0,a+=window.GameConfig.CONFIGS_GENRE.y*window.GameConfig.RESIZE,t.height+=window.GameConfig.CONFIGS_GENRE.y*window.GameConfig.RESIZE):0==n?o=0:o+=window.GameConfig.CONFIGS_GENRE.x*window.GameConfig.RESIZE;var i=e.arrGenres.filter(function(t){return t.parent==e.arrGenres[n].id}),s=new tB(o,a,e.positionIsNewUserConfig.chooseUS_UK.genres[e.arrGenres[n].code],e.arrGenres[n],i,n);s.addEventInput(e.onClickGenreSprite,e),t.add(s)},r=0;r<this.arrGenres.length;r++)s(r);this.listView.add(t)}},{key:"onClickGenreSprite",value:function(e){"CHOOSED"==e.cmd?this.signalEvent.dispatch({cmd:"CHOOSED",id:e.id}):"HAS_CHILD"==e.cmd?(this.kill(),this.signalEvent.dispatch({cmd:"HAS_CHILD",childrenGenre:e.childrenGenre,nameParent:e.nameParent})):"DISCHOOSED"==e.cmd&&this.signalEvent.dispatch({cmd:"DISCHOOSED",id:e.id})}},{key:"addEvent",value:function(e,t){this.signalEvent.add(e,t)}},{key:"removeEvent",value:function(e,t){this.signalEvent.remove(e,t)}}])&&gB(n.prototype,i),o&&gB(n,o),t}();var bB=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thumb="",this.name=""};function _B(e){return(_B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EB(e,t){return!t||"object"!==_B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CB(e){return(CB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kB(e,t){return(kB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var PB=function(e){function t(e,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=EB(this,CB(t).call(this,game,e,n,null))).positionIsNewUserConfig=JSON.parse(game.cache.getText("positionIsNewUserConfig")),a.indexSprite=o,a.genre=new bB,a.genre=Object.assign({},a.genre,i),a.thumb,a.name,a.afterInit(),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kB(e,t)}(t,Phaser.Sprite),n=t,(i=[{key:"afterInit",value:function(){this.addThumb(),this.addName(this.positionIsNewUserConfig.received.txt_playlist)}},{key:"addThumb",value:function(){this.thumb=new Phaser.Sprite(game,0,0,"otherSprites","Nhactre"),this.thumb.scale.set(1*window.GameConfig.RESIZE);var e=new Phaser.Graphics(game,0,0);e.beginFill(16777215),e.drawRoundedRect(0*window.GameConfig.RESIZE,0*window.GameConfig.RESIZE,165*window.GameConfig.RESIZE,165*window.GameConfig.RESIZE,10),e.anchor.set(.5),this.thumb.addChild(e),this.thumb.mask=e,this.key,this.addChild(this.thumb),this.beginLoad(this.genre.thumb)}},{key:"beginLoad",value:function(e){e&&(this.key=e),game.cache.checkImageKey(this.key)?this.onLoad():(rn.instance().event.load_image_complate.add(this.onLoad,this),rn.instance().addLoader(this.key))}},{key:"onLoad",value:function(){var e=this;rn.instance().event.load_image_complate.remove(this.onLoad,this),setTimeout(function(){e.thumb.loadTexture(e.key)},100*this.indexSprite)}},{key:"addName",value:function(e){this.name=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,this.genre.name,e.configs),this.addChild(this.name)}}])&&SB(n.prototype,i),o&&SB(n,o),t}();function OB(e){return(OB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xB(e,t){return!t||"object"!==OB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TB(e,t,n){return(TB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=IB(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function IB(e){return(IB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AB(e,t){return(AB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LB=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xB(this,IB(t).call(this,game))).positionIsNewUserConfig=JSON.parse(game.cache.getText("positionIsNewUserConfig")),n.arrBeGiven=e,n.listView,n.btnReceive,n.afterInit(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AB(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addListView(),this.addBtnReceive(this.positionIsNewUserConfig.received.btn_receive)}},{key:"addListView",value:function(){var e=new rB(0,0),t=new Phaser.Group(game,this);t.x=0,t.y=0,this.addChild(t);var n=new Phaser.Rectangle(35*window.GameConfig.RESIZE,249*window.GameConfig.RESIZE,569*window.GameConfig.RESIZE,(game.height-324)*window.GameConfig.RESIZE);this.listView=new Ia(game,t,n,{direction:"y",overflow:100,padding:0,searchForClicks:!0});for(var i=0,o=0,a=0;a<this.arrBeGiven.length;a++){if(a%3==0&&a>0){i=0,o+=window.GameConfig.CONFIGS_PLAYLIST_RECEIVED.y*window.GameConfig.RESIZE,e.height+=window.GameConfig.CONFIGS_PLAYLIST_RECEIVED.y*window.GameConfig.RESIZE;var s=new Phaser.Sprite(game,0*window.GameConfig.RESIZE,(window.GameConfig.CONFIGS_PLAYLIST_RECEIVED.y-40)*window.GameConfig.RESIZE,"defaultSource","Line");e.addChild(s)}else 0==a?i=0:i+=window.GameConfig.CONFIGS_PLAYLIST_RECEIVED.x*window.GameConfig.RESIZE;var r=new PB(i,o,this.arrBeGiven[a],a);e.add(r)}this.listView.add(e)}},{key:"addBtnReceive",value:function(e){this.btn_receive=new Phaser.Sprite(game,e.btn.x*window.GameConfig.RESIZE,(game.height-oe.instance().STANDARD_HEIGHT+e.btn.y)*window.GameConfig.RESIZE,e.btn.nameAtlas,e.btn.nameSprite),this.btn_receive.inputEnabled=!0,this.btn_receive.events.onInputUp.add(this.onClickReceived,this),this.txt_rececive,this.addTxtBtn(e),this.addChild(this.btn_receive)}},{key:"onClickReceived",value:function(){be.instance().playSound(be.buttonclick),this.destroy(),FH.instance().changeScreen(De.MAIN_MENU)}},{key:"addTxtBtn",value:function(e){this.txt_rececive=new Phaser.Text(game,this.btn_receive.width/2,this.btn_receive.height/2,e.txt_receive.text,e.txt_receive.configs),this.txt_rececive.anchor.set(.5),this.btn_receive.addChild(this.txt_rececive)}},{key:"destroy",value:function(){for(;this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),TB(IB(t.prototype),"destroy",this).call(this)}}])&&RB(n.prototype,i),o&&RB(n,o),t}();function DB(e){return(DB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MB(e,t){return!t||"object"!==DB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NB(e,t,n){return(NB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BB(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function BB(e){return(BB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jB(e,t){return(jB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var UB=function(e){function t(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=MB(this,BB(t).call(this,game))).state=e,i.positionBootConfig=n,i.positionIsNewUserConfig=JSON.parse(game.cache.getText("positionIsNewUserConfig")),i.countChoice=3,i.listChoicedFavorites=[],i.arrGenres=[],i.arrBeGiven=[],i.stateParams={waitingGames:[],doneGames:[],challengeGames:[]},i.chooseMain,i.chooseUS_UK,i.receivedList,i.addEventExtension(),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jB(e,t)}(t,Z),n=t,(i=[{key:"preload",value:function(){this.addBackGround(this.positionIsNewUserConfig.chooseMain),this.addTextChoose(this.positionIsNewUserConfig.chooseMain.txt_choose),this.callNewUserGenresListRequest()}},{key:"addGroupFavoriteList",value:function(e){this.arrGenres=e,this.chooseMain=new fB(this.arrGenres),this.chooseMain.addEvent(this.onEventChoosePlaylist,this),this.addChild(this.chooseMain)}},{key:"onEventChoosePlaylist",value:function(e){if("CHOOSED"==e.cmd)He.instance().logEvent(He.Choose_genre_Buttons),this.listChoicedFavorites.push(e.id),this.countChoice--,this.txtChoose.setText("".concat(de.instance().getData(193)," ").concat(this.countChoice," ").concat(de.instance().getData(194))),3==this.listChoicedFavorites.length&&(this.chooseMain.destroy(),this.sendUserSelectedGenres());else if("HAS_CHILD"==e.cmd){for(var t=0;t<e.childrenGenre.length;t++){e.childrenGenre[t].choosed=!1;for(var n=0;n<this.listChoicedFavorites.length;n++)if(this.listChoicedFavorites[n]==e.childrenGenre[t].id){e.childrenGenre[t].choosed=!0;break}}this.chooseUS_UK=new wB(e.childrenGenre,e.nameParent),this.chooseUS_UK.addEvent(this.onEventChildren,this),this.addChild(this.chooseUS_UK)}else"DISCHOOSED"==e.cmd&&(this.listChoicedFavorites=this.listChoicedFavorites.filter(function(t){return t!==e.id}),this.countChoice++,this.txtChoose.setText("".concat(de.instance().getData(193)," ").concat(this.countChoice," ").concat(de.instance().getData(194))))}},{key:"onEventChildren",value:function(e){"BACK"==e.type&&this.chooseMain.revive(),"CHOOSED"==e.cmd?(this.listChoicedFavorites.push(e.id),this.countChoice--,this.txtChoose.setText("".concat(de.instance().getData(193)," ").concat(this.countChoice," ").concat(de.instance().getData(194))),3==this.listChoicedFavorites.length&&(this.chooseUS_UK.destroy(),this.chooseMain.destroy(),this.sendUserSelectedGenres())):"HAS_CHILD"==e.cmd?(this.chooseUS_UK=new wB(e.childrenGenre,e.nameParent),this.chooseUS_UK.addEvent(this.onEventChildren,this),this.addChild(this.chooseUS_UK)):"DISCHOOSED"==e.cmd&&(this.listChoicedFavorites=this.listChoicedFavorites.filter(function(t){return t!==e.id}),LogConsole.log(this.listChoicedFavorites),this.countChoice++,this.txtChoose.setText("".concat(de.instance().getData(193)," ").concat(this.countChoice," ").concat(de.instance().getData(194))))}},{key:"checkIfTabHasChild",value:function(e,t){var n=this.arrGenres.filter(function(t){return t.parent==e});t(n.length>0,n)}},{key:"onClickTextGenreBeFixedByDesign",value:function(){this.tabFavoriteChild.kill(),this.grapFavoriteList.revive()}},{key:"sendUserSelectedGenres",value:function(){var e=new SFS2X.SFSObject,t=new SFS2X.SFSArray;t.addInt(this.listChoicedFavorites[0]),t.addInt(this.listChoicedFavorites[1]),t.addInt(this.listChoicedFavorites[2]),e.putSFSArray("genreIds",t),dV.instance().sendData(ki.NEW_USER_SELECTED_GENRES_REQUEST,e),ht.instance().showLoading()}},{key:"callNewUserGenresListRequest",value:function(){this.handleParamsOnNewUserGenres()}},{key:"handleParamsOnSelectedPlaylist",value:function(e){var t=e.getSFSArray("response"),n=[];if("OK"==e.getUtfString("status")){for(var i=0;i<t.size();i++){var o=t.getSFSObject(i),a=o.getUtfString("thumb"),s=o.getUtfString("name"),r=o.getInt("is_solo_mode"),l=o.getInt("id");if(this.arrBeGiven.push({thumb:a,name:s}),0==r){_t.instance().insertTableUserPlaylistMappings(this.arrBeGiven);var c=new vt;c.playlist_id=l,c.user_id=dV.instance().dataMySeft.user_id,c.next_level_score=ak.instance().playlist_level_setting[c.level+1],n.push(c)}}_t.instance().insertTableUserPlaylistMappings(n,!0),_t.instance().event.insert_data_user_playlist_mapping_complete.add(this.insertDataUserPlaylistMappingBuy,this)}else console.warn("Response NEW_USER_SELECTED_GENRES_RESPONSE error: ".concat(e.getUtfString("message")))}},{key:"insertDataUserPlaylistMappingBuy",value:function(){_t.instance().event.insert_data_user_playlist_mapping_complete.remove(this.insertDataUserPlaylistMappingBuy,this),this.createListPlaylistBeChoosed(),ht.instance().hideLoading()}},{key:"handleParamsOnNewUserGenres",value:function(){this.loadPlaylistComplete()}},{key:"addEventExtension",value:function(){ak.instance().event.load_playlist_complete.add(this.loadPlaylistComplete,this)}},{key:"removeEventExtension",value:function(){ak.instance().event.load_playlist_complete.remove(this.loadPlaylistComplete,this)}},{key:"loadPlaylistComplete",value:function(){_t.instance().event.get_data_genres_complete.add(this.getDataGenresComplete,this),_t.instance().getGenresAll()}},{key:"getDataGenresComplete",value:function(e){_t.instance().event.get_data_genres_complete.remove(this.getDataGenresComplete,this),this.arrGenres=e,this.addGroupFavoriteList(this.arrGenres),ht.instance().hideLoading()}},{key:"ifHasChild",value:function(e,t){this.addTextGenreBeFixedByDesignAfter(t.id,t.valueFavorite),this.grapFavoriteList.kill(),this.addTabFavoriteChild(e)}},{key:"addBackGround",value:function(e){var t=game.add.sprite(e.bg.x*window.GameConfig.RESIZE,e.bg.y*window.GameConfig.RESIZE,e.bg.nameSprite),n=new Phaser.Sprite(game,e.line_top.x*window.GameConfig.RESIZE,e.line_top.y*window.GameConfig.RESIZE,e.line_top.nameAtlas,e.line_top.nameSprite);t.addChild(n),this.addChild(t)}},{key:"addTextChoose",value:function(e){this.txtChoose=new Phaser.Text(game,e.x*window.GameConfig.RESIZE,e.y*window.GameConfig.RESIZE,"".concat(e.userChooseGenresLeft," ").concat(this.countChoice," ").concat(e.userChooseGenresRight),e.configs),this.txtChoose.anchor.set(.5,0),this.addChild(this.txtChoose)}},{key:"createListPlaylistBeChoosed",value:function(){this.txtChoose.setText(de.instance().getData(192)),this.receivedList=new LB(this.arrBeGiven),this.addChild(this.receivedList)}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),NB(BB(t.prototype),"destroy",this).call(this)}}])&&GB(n.prototype,i),o&&GB(n,o),t}();function ZB(e){return(ZB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function VB(e,t){return!t||"object"!==ZB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QB(e,t,n){return(QB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WB(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function WB(e){return(WB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qB(e,t){return(qB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var KB=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=VB(this,WB(t).call(this,game))).positionBootConfig=JSON.parse(game.cache.getText("positionBootConfig")),e.positionIsNewUserConfig=JSON.parse(game.cache.getText("positionIsNewUserConfig")),e.afterInit(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qB(e,t)}(t,Z),n=t,(i=[{key:"afterInit",value:function(){this.addEventExtension(),this.NewUserModule=new UB(this,this.positionBootConfig),this.NewUserModule.preload(),this.addChild(this.NewUserModule)}},{key:"onExtensionResponse",value:function(e){e.cmd==ki.NEW_USER_SELECTED_GENRES_RESPONSE&&this.NewUserModule.handleParamsOnSelectedPlaylist(e.params)}},{key:"addEventExtension",value:function(){dV.instance().addEventExtension(this.onExtensionResponse,this)}},{key:"removeEventExtension",value:function(){dV.instance().removeEventExtension(this.onExtensionResponse,this)}},{key:"destroy",value:function(){for(this.removeEventExtension();this.children.length>0;){var e=this.children[0];this.removeChild(e),e.destroy(),e=null}this.parent&&this.parent.removeChild(this),QB(WB(t.prototype),"destroy",this).call(this)}}])&&HB(n.prototype,i),o&&HB(n,o),t}();function zB(e){return(zB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YB(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function XB(e){return(XB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JB(e,t){return(JB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ej=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=XB(t).call(this,game,null))||"object"!==zB(i)&&"function"!=typeof i?$B(n):i).event={back:new Phaser.Signal,trophy:new Phaser.Signal},e.positionEventMode=oe.instance().positionEventMode,e.bg=new _n(e.positionEventMode.header_bg_queue),e.addChild(e.bg),e.iconTrophy=new _n(e.positionEventMode.header_icon_trophy,e.chooseTrophy,$B($B(e))),e.addChild(e.iconTrophy);var o=new Phaser.Sprite(game,0,0,"btnRankAnim");return o.width=51,o.height=50,o.x=-12,o.y=-10,o.animations.add("run_rank"),o.animations.play("run_rank",26,!0),e.iconTrophy.addChild(o),e.btnBack=new _n(e.positionEventMode.header_buttom_back,e.chooseBack,$B($B(e))),e.btnBack.width=50*oe.instance().scale,e.btnBack.height=50*oe.instance().scale,e.btnBack.x=10*oe.instance().scale,e.btnBack.y=10*oe.instance().scale,e.addChild(e.btnBack),e.txtTitle=new Qt(e.positionEventMode.header_queue_text_title,""),e.txtTitle.setTextBounds(0,0,e.bg.width,e.bg.height),e.addChild(e.txtTitle),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JB(e,t)}(t,Je),n=t,(i=[{key:"setTitle",value:function(e){this.txtTitle.text=e}},{key:"setHideBack",value:function(){this.btnBack.visible=!1}},{key:"setHideTrophy",value:function(){this.iconTrophy.visible=!1}},{key:"chooseTrophy",value:function(){LogConsole.log("chooseTrophy"),Ir.instance().hide(),this.btnBack.inputEnabled=!1,this.event.trophy.dispatch()}},{key:"chooseBack",value:function(){LogConsole.log("chooseBack"),Ir.instance().hide(),this.btnBack.inputEnabled=!1,this.event.back.dispatch()}}])&&YB(n.prototype,i),o&&YB(n,o),t}();function tj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nj=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"EVENT_MODE_LOAD_LIST_REQUEST",get:function(){return"EVENT_MODE_LOAD_LIST_REQUEST"}},{key:"EVENT_MODE_LOAD_LIST_RESPONSE",get:function(){return"EVENT_MODE_LOAD_LIST_RESPONSE"}},{key:"EVENT_MODE_JOIN_REQUEST",get:function(){return"EVENT_MODE_JOIN_REQUEST"}},{key:"EVENT_MODE_JOIN_RESPONSE",get:function(){return"EVENT_MODE_JOIN_RESPONSE"}},{key:"EVENT_MODE_PLAY_GAME_REQUEST",get:function(){return"EVENT_MODE_PLAY_GAME_REQUEST"}},{key:"EVENT_MODE_PLAY_GAME_RESPONSE",get:function(){return"EVENT_MODE_PLAY_GAME_RESPONSE"}},{key:"EVENT_MODE_QUESTION_RESPONSE",get:function(){return"EVENT_MODE_QUESTION_RESPONSE"}},{key:"EVENT_MODE_USER_READY_REQUEST",get:function(){return"EVENT_MODE_USER_READY_REQUEST"}},{key:"EVENT_MODE_USER_READY_RESPONSE",get:function(){return"EVENT_MODE_USER_READY_RESPONSE"}},{key:"EVENT_MODE_START_GAME",get:function(){return"EVENT_MODE_START_GAME"}},{key:"EVENT_MODE_START_RESPONSE",get:function(){return"EVENT_MODE_START_RESPONSE"}},{key:"EVENT_MODE_USER_SELECTED_ANSWER_REQUEST",get:function(){return"EVENT_MODE_USER_SELECTED_ANSWER_REQUEST"}},{key:"EVENT_MODE_USER_SELECTED_ANSWER_RESPONSE",get:function(){return"EVENT_MODE_USER_SELECTED_ANSWER_RESPONSE"}},{key:"EVENT_MODE_MOVE_TO_NEXT_QUESTION",get:function(){return"EVENT_MODE_MOVE_TO_NEXT_QUESTION"}},{key:"EVENT_MODE_FINISH_GAME",get:function(){return"EVENT_MODE_FINISH_GAME"}},{key:"EVENT_MODE_DONE_GAME",get:function(){return"EVENT_MODE_DONE_GAME"}},{key:"EVENT_MODE_LOAD_DISPLAY_PLAYERS",get:function(){return"EVENT_MODE_LOAD_DISPLAY_PLAYERS"}},{key:"EVENT_MODE_RANKING_REQUEST",get:function(){return"EVENT_MODE_RANKING_REQUEST"}},{key:"EVENT_MODE_RANKING_RESPONSE",get:function(){return"EVENT_MODE_RANKING_RESPONSE"}},{key:"EVENT_MODE_REWARD_NOTIFICATION",get:function(){return"EVENT_MODE_REWARD_NOTIFICATION"}},{key:"EVENT_MODE_EVENT_ENDED",get:function(){return"EVENT_MODE_EVENT_ENDED"}},{key:"EVENT_MODE_CLAIM_REWARD_REQUEST",get:function(){return"EVENT_MODE_CLAIM_REWARD_REQUEST"}},{key:"EVENT_MODE_CLAIM_REWARD_RESPONSE",get:function(){return"EVENT_MODE_CLAIM_REWARD_RESPONSE"}},{key:"EVENT_MODE_EVENT_START_BROADCAST",get:function(){return"EVENT_MODE_EVENT_START_BROADCAST"}},{key:"EVENT_MODE_NEXT_QUESTION_REQUEST",get:function(){return"EVENT_MODE_NEXT_QUESTION_REQUEST"}},{key:"EVENT_MODE_HIGHEST_ACHIEVED",get:function(){return"EVENT_MODE_HIGHEST_ACHIEVED"}},{key:"EVENT_MODE_USER_DONE_GAME_REQUEST",get:function(){return"EVENT_MODE_USER_DONE_GAME_REQUEST"}},{key:"EVENT_MODE_USER_DONE_GAME_RESPONSE",get:function(){return"EVENT_MODE_USER_DONE_GAME_RESPONSE"}},{key:"EVENT_MODE_LOAD_REQUEST",get:function(){return"EVENT_MODE_LOAD_REQUEST"}},{key:"EVENT_MODE_LOAD_RESPONSE",get:function(){return"EVENT_MODE_LOAD_RESPONSE"}}],(n=null)&&tj(t.prototype,n),i&&tj(t,i),e}();function ij(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var oj=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putLong("event_id",e),t}}],(n=null)&&ij(t.prototype,n),i&&ij(t,i),e}();function aj(e){return(aj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rj(e,t){return!t||"object"!==aj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lj(e){return(lj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cj(e,t){return(cj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hj=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=rj(this,lj(t).call(this,game,null))).arrCircle=[],e.positionEventMode=oe.instance().positionEventMode,e.circleFist=new Bt(e.positionEventMode.queueroom_map_circle),e.circleFist.y=85*oe.instance().scale,e.lineDocFist=new Bt(e.positionEventMode.queueroom_map_line_doc),e.lineDocFist.x=(e.circleFist.width-e.lineDocFist.width)/2,e.addChild(e.lineDocFist);var n=new Bt(e.positionEventMode.queueroom_map_line_ngang);n.x=e.circleFist.width/2,n.y=e.circleFist.y+(e.circleFist.height-n.height)/2,e.addChild(n),e.addChild(e.circleFist),e.circleEnd=new Bt(e.positionEventMode.queueroom_map_circle),e.circleEnd.x=n.x+n.width-e.circleEnd.width/2,e.circleEnd.y=e.circleFist.y,e.lineDocEnd=new Bt(e.positionEventMode.queueroom_map_line_doc),e.lineDocEnd.x=e.circleEnd.x+(e.circleFist.width-e.lineDocEnd.width)/2,e.addChild(e.lineDocEnd),e.addChild(e.circleEnd);for(var i=n.width/5,o=0;o<4;o++){var a=new Bt(e.positionEventMode.queueroom_map_circle_small);a.x=i*(o+1),a.y=e.circleFist.y+(e.circleFist.height-a.height)/2,e.addChild(a),e.arrCircle.push(a)}return e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cj(e,t)}(t,Je),n=t,(i=[{key:"addLineRanking",value:function(){this.cup=new Bt(this.positionEventMode.queueroom_trophy_big),this.addChild(this.cup);for(var e=0;e<this.arrCircle.length;e++)this.arrCircle[e].visible=!1;this.circleFist.visible=!1}},{key:"setIdxBegin",value:function(e){this.idx=e,e<2?this.setIdx(e):this.setHideLine()}},{key:"setLine",value:function(){this.setIdx(this.idx)}},{key:"setHideLine",value:function(){this.lineDocEnd.visible=!1,this.lineDocFist.visible=!1}},{key:"setIdx",value:function(e){this.idx=e,e%2==0?(this.lineDocEnd.visible=!0,this.lineDocFist.visible=!1):(this.lineDocEnd.visible=!1,this.lineDocFist.visible=!0)}}])&&sj(n.prototype,i),o&&sj(n,o),t}();var uj=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.question_index=0,this.user_id=0,this.user_name="",this.avatar="",this.is_dead=0,this.vip=!1};var dj=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event_id=0,this.user_id=0,this.created=0,this.user_name="",this.position=0,this.achieved=0,this.id=0,this.avatar="",this.updated=0,this.vip=!1};function fj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pj=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){for(var t={arrUser:[],topThree:[]},n=e.getSFSArray(YC.display_players),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=new uj;a.question_index=o.getInt(YC.question_index),a.user_id=o.getInt(YC.user_id),a.user_name=o.getUtfString(YC.user_name),a.avatar=o.getUtfString(YC.avatar),a.is_dead=o.getInt(YC.is_dead),a.vip=o.getBool(YC.vip),t.arrUser.push(a)}for(var s=e.getSFSArray(YC.top_three),r=0;r<s.size();r++){var l=s.getSFSObject(r),c=new dj;c.user_id=l.getInt(YC.user_id),c.user_name=l.getUtfString(YC.user_name),c.achieved=l.getInt(YC.rank),c.avatar=l.getUtfString(YC.avatar),c.vip=l.getBool(YC.vip),t.topThree.push(c)}return t}}],(n=null)&&fj(t.prototype,n),i&&fj(t,i),e}();function gj(e){return(gj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mj(e,t){return!t||"object"!==gj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vj(e){return(vj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wj(e,t){return(wj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bj=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=mj(this,vj(t).call(this,game,null))).data=null,e.iconVip=null,e.positionEventMode=oe.instance().positionEventMode,e.txtUserName=new Qt(e.positionEventMode.queueroom_txt_username,""),e.txtUserName.setTextBounds(0,0,89*oe.instance().scale,25*oe.instance().scale),e.addChild(e.txtUserName),e.txtScore=new Qt(e.positionEventMode.queueroom_txt_score,""),e.txtScore.setTextBounds(0,0,89*oe.instance().scale,25*oe.instance().scale),e.addChild(e.txtScore),e.ava=new zc,e.ava.setSize(45*oe.instance().scale,45*oe.instance().scale),e.ava.x=22*oe.instance().scale,e.ava.y=28*oe.instance().scale,e.addChild(e.ava),e.bgTopAvatar=null,e.bgTopAvataDie=null,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wj(e,t)}(t,Je),n=t,(i=[{key:"setTopAvatar",value:function(e){this.bgTopAvatar=new Bt(0===e?this.positionEventMode.queueroom_icon_rank1:1===e?this.positionEventMode.queueroom_icon_rank2:2===e?this.positionEventMode.queueroom_icon_rank3:this.positionEventMode.queueroom_icon_rankn),this.addChild(this.bgTopAvatar)}},{key:"setTopAvatarMe",value:function(){this.bgTopAvatar=new Bt(this.positionEventMode.queueroom_icon_rankme),this.addChild(this.bgTopAvatar)}},{key:"setTopAvatarDie",value:function(){null===this.bgTopAvataDie?(this.bgTopAvatar=new Bt(this.positionEventMode.queueroom_icon_maskdie),this.addChild(this.bgTopAvatar)):this.showTopAvatarDie()}},{key:"showTopAvatarDie",value:function(){this.bgTopAvatar.visible=!0}},{key:"hideTopAvatarDie",value:function(){this.bgTopAvatar.visible=!1}},{key:"hideName",value:function(){this.txtUserName.visible=!1}},{key:"showName",value:function(){this.txtUserName.visible=!0}},{key:"getData",value:function(){return this.data}},{key:"setDataRank",value:function(e,t){null===this.data?(this.ava.setAvatar(e.avatar,t),this.txtUserName.text=this.formatName(e.user_name,10),this.txtScore.text=e.achieved):(this.data.user_id!==e.user_id&&this.ava.setAvatar(e.avatar,t),this.data.user_name!==e.user_name&&(this.txtUserName.text=this.formatName(e.user_name,10)),this.data.achieved!==e.achieved&&(this.txtScore.text=e.achieved)),null!==this.data&&(!0===this.data.vip?null===this.iconVip?(this.iconVip=new Phaser.Sprite(game,29,61,"vipSource","Label_VIP"),this.iconVip.scale.set(.6),this.addChild(this.iconVip)):this.iconVip.visible=!0:null!==this.iconVip&&(this.iconVip.visible=!1)),this.data=e}},{key:"setData",value:function(e,t){this.data=e,this.txtUserName.text=this.formatName(this.data.user_name,10),this.ava.setAvatar(e.avatar,t),!0===this.data.vip?null===this.iconVip?(this.iconVip=new Phaser.Sprite(game,29,61,"vipSource","Label_VIP"),this.iconVip.scale.set(.6),this.addChild(this.iconVip)):this.iconVip.visible=!0:null!==this.iconVip&&(this.iconVip.visible=!1)}},{key:"updateData",value:function(e){this.data=e}},{key:"setNameTop",value:function(){this.txtUserName.y=0}},{key:"setNameBot",value:function(){this.txtUserName.y=79*oe.instance().scale}}])&&yj(n.prototype,i),o&&yj(n,o),t}();function _j(e){return(_j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ej(e,t){return!t||"object"!==_j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cj(e){return(Cj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kj(e,t){return(kj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pj=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ej(this,Cj(t).call(this,game,null))).positionEventMode=oe.instance().positionEventMode,e.icon=new Bt(e.positionEventMode.queueroom_count_user_map),e.addChild(e.icon),e.txtCount=new Qt(e.positionEventMode.queueroom_count_user_text,"(99)"),e.txtCount.setTextBounds(0,0,e.constWidth,e.constHeigth),e.addChild(e.txtCount),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kj(e,t)}(t,Je),n=t,(i=[{key:"setLeft",value:function(e){this.txtCount.changeStyle({align:"right",boundsAlignH:"right",boundsAlignV:"middle"}),this.txtCount.x=-this.constWidth-3*oe.instance().scale,this.txtCount.y=(this.icon.height-this.constHeigth)/2+3*oe.instance().scale,this.txtCount.text="("+e+")"}},{key:"setRight",value:function(e){this.txtCount.changeStyle({align:"left",boundsAlignH:"left",boundsAlignV:"middle"}),this.txtCount.x=this.icon.width+3,this.txtCount.y=(this.icon.height-this.constHeigth)/2+3*oe.instance().scale,this.txtCount.text="("+e+")"}},{key:"setTop",value:function(e){this.txtCount.changeStyle({align:"center",boundsAlignH:"center",boundsAlignV:"middle"}),this.txtCount.x=(this.icon.width-this.constWidth)/2,this.txtCount.y=-this.constHeigth,this.txtCount.text="("+e+")"}},{key:"setBottom",value:function(e){this.txtCount.changeStyle({align:"center",boundsAlignH:"center",boundsAlignV:"middle"}),this.txtCount.x=(this.icon.width-this.constWidth)/2,this.txtCount.y=this.icon.height+3,this.txtCount.text="("+e+")"}},{key:"constWidth",get:function(){return 35*oe.instance().scale}},{key:"constHeigth",get:function(){return 22*oe.instance().scale}}])&&Sj(n.prototype,i),o&&Sj(n,o),t}();function Oj(e){return(Oj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rj(e,t){return!t||"object"!==Oj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xj(e,t,n){return(xj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tj(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Tj(e){return(Tj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ij(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Aj(e,t,n){return t&&Ij(e.prototype,t),n&&Ij(e,n),e}function Lj(e,t){return(Lj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dj=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Rj(this,Tj(t).call(this,game,null))).dataEvent=Object.assign({},new At,n),e.arrMap=[],e.arrUser=[],e.arrTop3=[],e.objUser={};var i=e.constBeginX,o=e.constBeginY,a=e.constKc;e.idxTween=2,e.idxLine=0,e.localXFinish=0,e.localYFinish=0,e.tweenMap=null,e.layoutAddMap=game.add.group(),e.layoutAddMap.y=154*oe.instance().scale,e.addChild(e.layoutAddMap),e.layoutMap=game.add.group(),e.layoutMap.y=0,e.layoutAddMap.addChild(e.layoutMap),e.layoutCountPlayer=game.add.group(),e.layoutMap.addChild(e.layoutCountPlayer);for(var s=0;s<4;s++){var r=new hj;r.setIdxBegin(s),r.x=i,r.y=o,o-=a,e.layoutMap.addChild(r),e.arrMap.push(r)}e.flagIcon=new Bt(oe.instance().positionEventMode.queueroom_icon_flag),e.flagIcon.visible=!1,e.layoutMap.addChild(e.flagIcon),e.lineWin=new hj,e.lineWin.addLineRanking(),e.lineWin.setHideLine(),e.lineWin.x=e.constBeginX,e.lineWin.y=0,e.addChild(e.lineWin),e.buildTop3();var l=game.add.graphics(0,0);return l.alpha=.3,l.beginFill(16724736),l.drawRect(0,0,1080*oe.instance().scale,445*oe.instance().scale),l.endFill(),l.y=-41*oe.instance().scale,e.layoutAddMap.addChild(l),e.layoutAddMap.mask=l,e.addMe(),e.dataEvent.finish_at>0&&(e.clock=new Jt,e.clock.x=18*oe.instance().scale,e.clock.y=35*oe.instance().scale,e.clock.setTimer(e.dataEvent.finish_at),e.addChild(e.clock)),e.countUser=new qn(oe.instance().positionEventMode.count_playing_user,"0"),e.addChild(e.countUser),e.addEvent(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lj(e,t)}(t,Je),Aj(t,[{key:"constBeginY",get:function(){return 183*oe.instance().scale}},{key:"constBeginX",get:function(){return 58*oe.instance().scale}},{key:"constWidthLine",get:function(){return 480*oe.instance().scale}},{key:"constKc",get:function(){return 115*oe.instance().scale}}]),Aj(t,[{key:"getTime",value:function(){return this.clock?this.clock.getTime():0}},{key:"addMe",value:function(){this.meUser=new bj,this.meUser.setTopAvatarMe();var e=new uj;e.avatar=dV.instance().dataMySeft.avatar,e.question_index=0,e.user_id=dV.instance().dataMySeft.user_id,e.user_name=dV.instance().dataMySeft.user_name,e.vip=dV.instance().dataMySeft.vip,this.meUser.setData(e),this.changeLocalMe(0)}},{key:"buildHighestLocalMe",value:function(){if(oe.instance().idxHighest>0){this.flagIcon.visible=!0;var e=this.getLocalObject(oe.instance().idxHighest);this.flagIcon.x=e.x+41,this.flagIcon.y=e.y+14}else this.flagIcon.visible=!1}},{key:"changeLocalMe",value:function(e){var t=this;this.meUser.getData().question_index=e,e>1&&oe.instance().idxHighest<e-1&&(oe.instance().idxHighest=e-1),e===oe.instance().idxHighest&&(this.flagIcon.visible=!1);var n=this.getLocalObject(e);0===e?(this.meUser.x=n.x,this.meUser.y=n.y):(this.meUser.x!=this.localXFinish&&(this.meUser.x=this.localXFinish),this.meUser.y!=this.localYFinish&&(this.meUser.y=this.localYFinish)),this.localXFinish=n.x,this.localYFinish=n.y,this.layoutMap.addChild(this.meUser),game.add.tween(this.meUser).to({x:n.x,y:n.y},1e3,Phaser.Easing.Power1,!0),n.local%2!=0?this.meUser.setNameBot():this.meUser.setNameTop();var i=parseInt(e/6);this.idxLine<i&&(this.idxLine=i,this.idxLine>1&&setTimeout(function(){t.beginTween()},1200))}},{key:"buildTop3",value:function(){this.arrTop3=[];for(var e=0;e<3;e++){var t=new bj;t.setTopAvatar(e),t.setNameBot(),t.visible=!1,t.x=this.constBeginX-26+this.constWidthLine/4*(e+1),t.y=this.lineWin.y+50*oe.instance().scale,this.addChild(t),this.arrTop3.push(t)}}},{key:"beginTween",value:function(){this.arrMap[this.idxTween].setLine();var e=6+6*(this.idxLine+2),t=e-7;for(var n in this.objUser)this.objUser[n].getData().question_index>t&&this.objUser[n].getData().question_index<e&&(this.objUser[n].visible=!0);var i=this.idxTween-2;i<0&&(i=this.arrMap.length+i),this.tweenMap=game.add.tween(this.layoutMap).to({y:this.constKc*(this.idxLine-1)},2e3,Phaser.Easing.Power1,!0),this.tweenMap.onComplete.add(this.onCompleteTweenMap,this),game.add.tween(this.arrMap[i]).to({alpha:0},1500,Phaser.Easing.Power1,!0)}},{key:"onCompleteTweenMap",value:function(){var e=this.idxTween-2;e<0&&(e=this.arrMap.length+e),this.arrMap[e].y=this.constBeginY-(this.idxLine+2)*this.constKc,this.arrMap[e].alpha=1,this.arrMap[e].setHideLine(),this.idxTween++,this.idxTween===this.arrMap.length&&(this.idxTween=0);var t=6+6*(this.idxLine-1);for(var n in this.objUser)this.objUser[n].getData().question_index<t&&(this.objUser[n].visible=!1)}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),-1===oe.instance().idxHighest||this.buildHighestLocalMe()}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case nj.EVENT_MODE_LOAD_DISPLAY_PLAYERS:var t=pj.begin(e.params);this.arrUser=t.arrUser,this.topThree=t.topThree,this.countUser.setText(e.params.getInt("number_user")),this.buildArrUser();break;case nj.EVENT_MODE_START_GAME:case nj.EVENT_MODE_MOVE_TO_NEXT_QUESTION:this.changeLocalMe(e.params.getInt(YC.question_index));break;case nj.EVENT_MODE_HIGHEST_ACHIEVED:oe.instance().idxHighest=e.params.getInt(YC.highest_achieved),this.buildHighestLocalMe()}}},{key:"getLocalObject",value:function(e){var t={local:0,x:0,y:0,vc:0};t.vc=parseInt(e/6),t.local=e%6;var n=this.constWidthLine/5;return t.vc%2==0?t.x=this.constBeginX-30*oe.instance().scale+n*t.local:t.x=this.constBeginX-30*oe.instance().scale+this.constWidthLine-n*t.local,this.line=parseInt(e/6),t.y=this.constBeginY+6*oe.instance().scale-this.constKc*t.vc+42*oe.instance().scale,t}},{key:"buildArrUser",value:function(){for(var e=0;e<this.topThree.length;e++)this.arrTop3[e]&&(null===this.arrTop3[e].getData()&&(this.arrTop3[e].visible=!0),this.arrTop3[e].setDataRank(this.topThree[e],e));var t=6+6*(this.idxLine+1),n=6+6*(this.idxLine-2)-1;for(var i in this.objUser){var o=this.objUser[i],a=o.getData();1===a.is_dead&&(this.layoutMap.removeChild(o),o.destroy(),o=null,delete this.objUser[i]),o=null,a=null}for(var s={},r=0,l=null,c=0,h=0;h<this.arrUser.length;h++){if(this.objUser.hasOwnProperty(this.arrUser[h].user_id)){r=this.objUser[this.arrUser[h].user_id].getData().question_index;var u=this.arrUser[h].question_index;if(r<u){l=this.objUser[this.arrUser[h].user_id];for(var d=u-r,f=0;f<d;f++){var p=2e3/d;game.time.events.add(p*f,this.buildLocalTween,this,l,r+f+1,p)}l.updateData(this.arrUser[h])}else{var g=this.getLocalObject(r);(l=this.objUser[this.arrUser[h].user_id]).x=g.x,l.y=g.y,g.local%2!=0?l.setNameBot():l.setNameTop(),1===this.arrUser[h].is_dead&&l.setTopAvatarDie(),l.updateData(this.arrUser[h])}}else{c++,this.objUser[this.arrUser[h].user_id]=new bj,(l=this.objUser[this.arrUser[h].user_id]).setTopAvatar(4),l.setData(this.arrUser[h],c);var y=this.arrUser[h].question_index,m=this.getLocalObject(y);l.x=m.x,l.y=m.y,m.local%2!=0?l.setNameBot():l.setNameTop(),this.layoutMap.addChild(l),l.visible=!1,l.setData(this.arrUser[h])}r=(l=this.objUser[this.arrUser[h].user_id]).getData().question_index,this.idxLine<2?l.visible=!(r>17):l.visible=r<t&&r>n,s[r]?(s[r]+=1,l.hideName()):(s[r]=1,this.meUser.getData().question_index===r?l.hideName():l.showName())}for(l=null,s[this.meUser.getData().question_index]?s[this.meUser.getData().question_index]+=1:s[this.meUser.getData().question_index]=1;this.layoutCountPlayer.children.length>0;){var v=this.layoutCountPlayer.children[0];this.layoutCountPlayer.removeChild(v),v.destroy(),v=null}for(var w in s){var b=!0;if(this.idxLine<2?w>17&&(b=!1):w<t&&w>n||(b=!1),b&&s[w]>1){var _=this.getLocalObject(w),S=new Pj;S.x=_.x,S.y=_.y,_.vc%2==0?0===_.local?(S.setBottom(s[w]),S.x=_.x-15*oe.instance().scale,S.y=_.y+35*oe.instance().scale):5===_.local?(S.setBottom(s[w]),S.y=_.y+35*oe.instance().scale,S.x=_.x+77*oe.instance().scale):(S.setRight(s[w]),S.x=_.x+18*oe.instance().scale,_.local%2!=0?S.y=_.y+6*oe.instance().scale:S.y=_.y+80*oe.instance().scale):0===_.local?(S.setBottom(s[w]),S.y=_.y+35*oe.instance().scale,S.x=_.x+77*oe.instance().scale):5===_.local?(S.setBottom(s[w]),S.x=_.x-15*oe.instance().scale,S.y=_.y+35*oe.instance().scale):(S.setRight(s[w]),S.x=_.x+18*oe.instance().scale,_.local%2!=0?S.y=_.y+6*oe.instance().scale:S.y=_.y+80*oe.instance().scale),this.layoutCountPlayer.addChild(S)}}this.layoutMap.addChild(this.meUser)}},{key:"buildLocalTween",value:function(e,t,n){var i=this.getLocalObject(t);game.add.tween(e).to({x:i.x,y:i.y},n,Phaser.Easing.Power1,!0),i.local%2!=0?e.setNameBot():e.setNameTop()}},{key:"destroy",value:function(){if(this.removeEvent(),null!==this.layoutMap&&this.layoutMap.children)for(;this.layoutMap.children.length>0;){var e=this.layoutMap.children[0];null!==e&&(game.tweens.removeFrom(e),this.layoutMap.removeChild(e),e.destroy(),e={},e=null)}this.removeAllItem(),xj(Tj(t.prototype),"destroy",this).call(this)}}]),t}();function Gj(e){return(Gj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nj(e,t){return!t||"object"!==Gj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bj(e,t,n){return(Bj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jj(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function jj(e){return(jj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uj(e,t){return(Uj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fj=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Nj(this,jj(t).call(this,e,n,i))).positionEventMode=oe.instance().positionEventMode,o.iconTicket=new Bt(o.positionEventMode.queueroom_button_play_icon_ticket),o.addChild(o.iconTicket),o.lbPlay=new Qt(o.positionEventMode.queueroom_button_play_text_play,de.instance().getData("24")),o.lbPlay.setTextBounds(0,0,570*oe.instance().scale,43*oe.instance().scale),o.addChild(o.lbPlay),o.txtCount=new Qt(o.positionEventMode.queueroom_button_play_count_ticket,"-1("+dV.instance().dataMySeft.ticket+")"),o.txtCount.setTextBounds(0,0,85*oe.instance().scale,43*oe.instance().scale),o.addChild(o.txtCount),o.addEvent(),o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uj(e,t)}(t,_n),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onUserVarsUpdate.add(this.userVarsUpdate,this)}},{key:"removeEvent",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.userVarsUpdate,this)}},{key:"userVarsUpdate",value:function(){this.txtCount.text="-1("+dV.instance().dataMySeft.ticket+")"}},{key:"destroy",value:function(){this.removeEvent(),Bj(jj(t.prototype),"destroy",this).call(this)}}])&&Mj(n.prototype,i),o&&Mj(n,o),t}();function Zj(e){return(Zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vj(e){return(Vj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qj(e,t){return(Qj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var qj=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=Vj(t).call(this,game,null))||"object"!==Zj(i)&&"function"!=typeof i?Wj(n):i).data=o,e.positionEventMode=JSON.parse(game.cache.getText("positionEventMode")),e.bgVip=new Phaser.Image(game,0,0,"vipSource","Vip_BG"),e.addChild(e.bgVip),e.ava=new zc,e.ava.setSize(47*oe.instance().scale,47*oe.instance().scale),e.ava.x=35*oe.instance().scale,e.ava.y=10*oe.instance().scale,e.addChild(e.ava),e.btnMaskAva=new Phaser.Button(game,e.ava.x,e.ava.y,null,e.chooseAva,Wj(Wj(e))),e.btnMaskAva.width=e.ava.width,e.btnMaskAva.height=e.ava.height,e.addChild(e.btnMaskAva),e.txtChat=new Qt(e.positionEventMode.queueroom_text_chat_vip,""),e.txtChat.setTextBounds(0,0,450*oe.instance().scale,55*oe.instance().scale),e.addChild(e.txtChat),e.txtChatStr=new Qt(e.positionEventMode.queueroom_text_chat_vip_str,""),e.txtChatStr.setTextBounds(0,0,450*oe.instance().scale,55*oe.instance().scale),e.addChild(e.txtChatStr),e.txtTime=new Qt(e.positionEventMode.queueroom_text_chat_time_vip,""),e.txtTime.setTextBounds(0,0,518*oe.instance().scale,55*oe.instance().scale),e.addChild(e.txtTime),e.line=new Bt(e.positionEventMode.item_ranking_line_space),e.line.y=73*oe.instance().scale,e.addChild(e.line),e.frameAva=new Phaser.Image(game,58,35,"vipSource","Ava_Nho"),e.frameAva.anchor.set(.5),e.frameAva.scale.set(.7),e.addChild(e.frameAva),e.changeData(e.data),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qj(e,t)}(t,Je),n=t,(i=[{key:"changeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.data=e;var n="";null!==this.data&&(n=this.data.message);var i=n.split(" ");n="";for(var o=0;o<i.length;o++)oe.instance().silentchat.hasOwnProperty(i[o])?n+=" "+i[o].replace(oe.instance().silentchat[i[o]],"***"):n+=" "+i[o];!0===this.data.vip?(this.bgVip.revive(),this.ava.x=35*oe.instance().scale,this.ava.y=10*oe.instance().scale,this.txtChat.text=this.data.user_name+": ",this.txtChat.addColor("#ffffff",0),this.txtChatStr.text=n,this.txtChatStr.x=this.txtChat.x+this.txtChat.width+5,this.frameAva.revive()):(this.bgVip.kill(),this.ava.x=35*oe.instance().scale,this.ava.y=16*oe.instance().scale,this.txtChat.text=this.data.user_name+": "+n,this.txtChat.addColor("#ffa33a",0),this.txtChat.addColor("#ffffff",this.data.user_name.length),this.txtChatStr.text="",this.frameAva.kill()),this.setData(t)}},{key:"chooseAva",value:function(){Ir.instance().hide(),jC.instance().addUserProfile(this.data.user_id)}},{key:"setData",value:function(e){this.ava.setAvatar(this.data.avatar,e);var t=new Date(this.data.sent_at),n=t.getHours(),i=t.getMinutes(),o="00",a="00";o=n>9?n:"0"+n,a=i>9?i:"0"+i,this.txtTime.text=o+":"+a}},{key:"height",get:function(){return 68*oe.instance().scale}}])&&Hj(n.prototype,i),o&&Hj(n,o),t}();function Kj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var zj=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){var n=new SFS2X.SFSObject;return n.putLong("event_id",e),n.putLong("time",t),n}}],(n=null)&&Kj(t.prototype,n),i&&Kj(t,i),e}();function Yj(e){return(Yj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xj(e,t,n){return(Xj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jj(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Jj(e){return(Jj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eU(e,t,n){return t&&$j(e.prototype,t),n&&$j(e,n),e}function tU(e,t){return(tU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var iU=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=Jj(t).call(this,game,null))||"object"!==Yj(o)&&"function"!=typeof o?nU(i):o).arrChat=[],n.ktShowAll=!1,n.positionEventMode=JSON.parse(game.cache.getText("positionEventMode")),n.loading=null,n.event_id=e,n.listChat=null,n.config={debug:!1,host:"yan.gamezoka.com",port:8460,useSSL:!0,zone:"MusicChat"},null!==oe.instance().response&&oe.instance().response.hasOwnProperty("sfs_chat_info")&&(n.config.debug=oe.instance().response.sfs_chat_info.sfs_chat_debug,n.config.host=oe.instance().response.sfs_chat_info.sfs_chat_host,n.config.port=oe.instance().response.sfs_chat_info.sfs_chat_port,n.config.useSSL=oe.instance().response.sfs_chat_info.sfs_chat_ssl,n.config.zone=oe.instance().response.sfs_chat_info.sfs_chat_zone),n.bg=new Dn(n.positionEventMode.queueroom_bg_chat),n.addChild(n.bg),n.btnShowChat=new _n(n.positionEventMode.queueroom_button_showchat,n.chooseShowchat,nU(nU(n))),n.btnShowChat.anchor.x=.5,n.btnShowChat.anchor.y=.5,n.addChild(n.btnShowChat),n.buildSortChat(),n.btnInputText=new qn(n.positionEventMode.queueroom_button_input_chat,de.instance().getData("5")+"...",n.chooseChat,nU(nU(n))),n.btnInputText.y=game.height-226*oe.instance().scale,n.addChild(n.btnInputText),n.btnSend=new _n(n.positionEventMode.queueroom_button_send_chat,n.chooseSend,nU(nU(n))),n.btnSend.y=game.height-226*oe.instance().scale,n.addChild(n.btnSend),n.socket=new SFS2X.SmartFox(n.config),n.connect(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tU(e,t)}(t,Je),eU(t,null,[{key:"EVENT_JOIN_CHAT",get:function(){return"EVENT_JOIN_CHAT"}},{key:"EVENT_USER_LOAD_MESSAGE",get:function(){return"EVENT_USER_LOAD_MESSAGE"}},{key:"EVENT_USER_SEND_MESSAGE",get:function(){return"EVENT_USER_SEND_MESSAGE"}},{key:"EVENT_CHAT_MESSAGE_BROADCAST",get:function(){return"EVENT_CHAT_MESSAGE_BROADCAST"}},{key:"USER_JOIN_CHAT_ROOM_SUCCESS",get:function(){return"USER_JOIN_CHAT_ROOM_SUCCESS"}}]),eU(t,[{key:"chooseChat",value:function(){this.addKeyBoard()}},{key:"chooseSend",value:function(){this.onSubmit()}},{key:"addKeyBoard",value:function(){if(console.log("addKeyBoard--------"),"web"===oe.instance().platform){"input";var e={maxLength:"",showTransparent:!0,placeholder:de.instance().getData("5")+"...",isSearch:!1,typeInputText:"input",configText:{width:this.btnInputText.width,height:this.btnInputText.height,x:this.btnInputText.x,y:this.btnInputText.y}};Ir.instance().show(e)}else{"chat";var t={maxLength:"",showTransparent:!0,placeholder:de.instance().getData("5")+"...",isSearch:!1,typeInputText:"chat",configText:{width:this.btnInputText.width,height:this.btnInputText.height,x:this.btnInputText.x,y:this.btnInputText.y}};Ir.instance().show(t)}}},{key:"onSubmit",value:function(){var e=Ir.instance().getValue();if(""!=e){var n=new SFS2X.SFSObject;n.putUtfString("message",e),n.putLong("event_id",this.event_id),this.sendData(t.EVENT_USER_SEND_MESSAGE,n)}Ir.instance().setValue("")}},{key:"onCancel",value:function(){console.log("onCancel -----------------"),Ir.instance().hide(),this.btnInputText.visible=!0}},{key:"hideKeyboard",value:function(){console.log("hideKeyboard ----------------------"),Ir.instance().hide(),this.ktShowAll?this.buildMaxChat():this.buildSortChat()}},{key:"changeHeightKeyBoard",value:function(e){this.removeListView(),this.btnShowChat.visible=!1,this.bg.y=61,this.bg.height=game.height-61,this.btnShowChat.scale.y=1,this.btnShowChat.x=this.bg.width/2,this.btnShowChat.y=this.bg.y+18*oe.instance().scale;var t=new Phaser.Group(game,0,0,null);this.listChat=new Ia(game,t,new Phaser.Rectangle(0,0,game.width,game.height-e-61),{direction:"y",padding:15*oe.instance().scale,searchForClicks:!0}),t.x=0,t.y=61,this.addChild(t);for(var n=0;n<this.arrChat.length;n++){var i=new qj(this.arrChat[n]);i.setData(n),this.listChat.add(i)}this.arrChat.length>4&&this.listChat.tweenToItem(this.arrChat.length-1)}},{key:"changeKeyBoard",value:function(){}},{key:"removeListView",value:function(){null!==this.listChat&&(this.removeChild(this.listChat),this.listChat.removeAll(),this.listChat.destroy(),this.listChat=null)}},{key:"chooseShowchat",value:function(){this.ktShowAll?this.buildSortChat():this.buildMaxChat()}},{key:"buildSortChat",value:function(){this.ktShowAll=!1,this.removeListView(),this.btnShowChat.visible=!0,this.bg.y=this.positionEventMode.queueroom_bg_chat.y*oe.instance().scale,this.bg.height=game.height-535*oe.instance().scale,this.btnShowChat.scale.y=1,this.btnShowChat.x=this.bg.width/2,this.btnShowChat.y=this.bg.y+18*oe.instance().scale;var e=new Phaser.Group(game,0,0,null);this.listChat=new Ia(game,e,new Phaser.Rectangle(0,0,game.width,game.height-822*oe.instance().scale),{direction:"y",padding:9*oe.instance().scale,searchForClicks:!0}),e.x=0,e.y=580*oe.instance().scale,this.addChild(e);for(var t=0;t<this.arrChat.length;t++){var n=new qj(this.arrChat[t]);n.setData(t),this.listChat.add(n)}this.arrChat.length>4&&this.listChat.tweenToItem(this.arrChat.length-1)}},{key:"buildMaxChat",value:function(){this.removeListView(),this.btnShowChat.visible=!0,this.ktShowAll=!0,this.bg.y=61*oe.instance().scale,this.bg.height=game.height,this.btnShowChat.scale.y=-1,this.btnShowChat.x=this.bg.width/2,this.btnShowChat.y=this.bg.y+18*oe.instance().scale;var e=new Phaser.Group(game,0,0,null);this.listChat=new Ia(game,e,new Phaser.Rectangle(0,0,game.width,game.height-365*oe.instance().scale),{direction:"y",padding:18*oe.instance().scale,searchForClicks:!1}),e.x=0,e.y=120*oe.instance().scale,this.addChild(e);for(var t=0;t<this.arrChat.length;t++){var n=new qj(this.arrChat[t]);n.setData(t),this.listChat.add(n)}this.arrChat.length>9&&this.listChat.tweenToItem(this.arrChat.length-1)}},{key:"addLoading",value:function(){this.removeLoading(),this.loading=new ot,this.addChild(this.loading)}},{key:"removeLoading",value:function(){null!==this.loading&&(this.removeChild(this.loading),this.loading.destroy(),this.loading=null)}},{key:"connect",value:function(){this.addLoading(),this.addEvent(),this.socket.connect()}},{key:"addEvent",value:function(){this.removeEvent(),this.socket.addEventListener(SFS2X.SFSEvent.CONNECTION,this.onConnectionCallback,this),this.socket.addEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLostCallback,this),this.socket.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponseCallback,this),this.socket.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinErrorCallback,this),this.socket.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoinCallback,this),this.socket.addEventListener(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginErrorCallback,this),this.socket.addEventListener(SFS2X.SFSEvent.LOGIN,this.onLoginCallback,this),this.socket.addEventListener(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessageCallback,this),this.socket.addEventListener(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate,this),Ir.instance().event.change.add(this.changeKeyBoard,this),Ir.instance().event.changeHeight.add(this.changeHeightKeyBoard,this),Ir.instance().event.hideKeyboard.add(this.hideKeyboard,this),Ir.instance().event.enter.add(this.onSubmit,this),Ir.instance().event.submit.add(this.onSubmit,this),Ir.instance().event.cancle.add(this.onCancel,this)}},{key:"removeEvent",value:function(){console.log("removeEvent -------"),this.socket.removeEventListener(SFS2X.SFSEvent.CONNECTION,this.onConnectionCallback,this),this.socket.removeEventListener(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLostCallback,this),this.socket.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponseCallback,this),this.socket.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinErrorCallback,this),this.socket.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoinCallback,this),this.socket.removeEventListener(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginErrorCallback,this),this.socket.removeEventListener(SFS2X.SFSEvent.LOGIN,this.onLoginCallback,this),this.socket.removeEventListener(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessageCallback,this),this.socket.removeEventListener(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate,this),Ir.instance().event.change.remove(this.changeKeyBoard,this),Ir.instance().event.changeHeight.remove(this.changeHeightKeyBoard,this),Ir.instance().event.hideKeyboard.remove(this.hideKeyboard,this),Ir.instance().event.enter.remove(this.onSubmit,this),Ir.instance().event.submit.remove(this.onSubmit,this),Ir.instance().event.cancle.remove(this.onCancel,this)}},{key:"onUserVarsUpdate",value:function(e){}},{key:"onPublicMessageCallback",value:function(e){if(LogConsole.log("onPublicMessageCallback"),LogConsole.log(e),e.message===Me.CHAT_EVENT_MODE){var t=e.sender,n=(t.isItMe,e.room._userManager._usersByName.get(t.name)),i={user_id:n.getVariable("user_id").value,user_name:n.getVariable("user_name").value,avatar:n.getVariable("avatar").value,vip:n.getVariable("vip").value,message:e.data.getUtfString("message"),sent_at:data.getLong("sent_at")};this.buildItemChat(i)}}},{key:"buildItemChat",value:function(e){this.addItemChat(e)}},{key:"buildHistoryChat",value:function(e){var t=[];this.listChat.removeAll(),this.listChat.reset(),this.arrChat=[];for(var n=0;n<e.size();n++){var i=e.getSFSObject(n),o={user_id:i.getInt("user_id"),user_name:i.getUtfString("user_name"),avatar:i.getUtfString("avatar"),vip:i.getBool("vip"),message:i.getUtfString("message"),sent_at:i.getLong("sent_at")};t.push(o)}t=t.sort(this.sortChat);for(var a=0;a<t.length;a++)this.buildItemChat(t[a]);this.ktShowAll?this.arrChat.length>9&&this.listChat.tweenToItem(this.arrChat.length-1):this.arrChat.length>4&&this.listChat.tweenToItem(this.arrChat.length-1)}},{key:"sortChat",value:function(e,t){return e.sent_at>t.sent_at?1:e.sent_at<t.sent_at?-1:0}},{key:"addItemChat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(LogConsole.log("addItemChat----"),LogConsole.log(e),this.arrChat.length<30){var n=new qj(e);n.setData(t),this.listChat.add(n),this.arrChat.push(e)}else{this.arrChat.splice(0,1),this.arrChat.push(e);for(var i=0;i<this.listChat.grp.children.length;i++){this.listChat.grp.children[i].changeData(this.arrChat[i])}}}},{key:"onExtensionResponseCallback",value:function(e){switch(LogConsole.log("onExtensionResponseCallback--------------"),LogConsole.log("cmd : "+e.cmd),LogConsole.log("data : "+e.params.getDump()),e.cmd){case t.EVENT_JOIN_CHAT:break;case t.EVENT_USER_LOAD_MESSAGE:this.removeLoading(),"OK"===e.params.getUtfString("status")&&this.buildHistoryChat(e.params.getSFSArray("messages"));break;case t.USER_JOIN_CHAT_ROOM_SUCCESS:break;case t.EVENT_CHAT_MESSAGE_BROADCAST:var n=e.params,i={user_id:n.getInt("user_id"),user_name:n.getUtfString("user_name"),avatar:n.getUtfString("avatar"),vip:n.getBool("vip"),message:n.getUtfString("message"),sent_at:n.getLong("sent_at")};this.buildItemChat(i),this.arrChat.length>0&&this.listChat.tweenToItem(this.arrChat.length-1)}}},{key:"onLoginCallback",value:function(e){LogConsole.log("onLoginCallback"),LogConsole.log(e);var n=[];n.push(new SFS2X.SFSUserVariable("user_id",dV.instance().dataMySeft.user_id)),n.push(new SFS2X.SFSUserVariable("user_name",dV.instance().dataMySeft.user_name)),n.push(new SFS2X.SFSUserVariable("avatar",dV.instance().dataMySeft.avatar)),n.push(new SFS2X.SFSUserVariable("vip",dV.instance().dataMySeft.vip)),this.socket.send(new SFS2X.SetUserVariablesRequest(n));var i=new SFS2X.SFSObject;i.putLong("event_id",this.event_id),this.sendData(t.EVENT_JOIN_CHAT,i)}},{key:"onLoginErrorCallback",value:function(e){LogConsole.log("onLoginErrorCallback"),LogConsole.log(e)}},{key:"onRoomJoinCallback",value:function(e){LogConsole.log("onRoomJoinCallback"),LogConsole.log(e),this.listChat.removeAll(),this.listChat.reset(),this.sendData(t.EVENT_USER_LOAD_MESSAGE,zj.begin(this.event_id,this.getTime()))}},{key:"onRoomJoinErrorCallback",value:function(e){LogConsole.log("onRoomJoinErrorCallback"),LogConsole.log(e)}},{key:"onConnectionCallback",value:function(e){if(LogConsole.log("onConnectionCallback"),LogConsole.log(e),!0===e.success){var t=new SFS2X.SFSObject;t.putUtfString("token","heheh"),this.socket.send(new SFS2X.LoginRequest(dV.instance().dataMySeft.user_id+"","",t,this.config.zone))}else LogConsole.log("loi roi"),this.connect()}},{key:"onConnectionLostCallback",value:function(e){LogConsole.log("onConnectionLostCallback"),LogConsole.log(e),null!==dV.instance().roomLobby&&this.connect()}},{key:"sendData",value:function(e,t){LogConsole.log("sendData"),LogConsole.log("type : "+e),null!=t&&LogConsole.log("data : "+t.getDump()),this.socket.send(new SFS2X.ExtensionRequest(e,t,this.socket.lastJoinedRoom))}},{key:"sendPublicChat",value:function(e,t){this.socket.send(new SFS2X.PublicMessageRequest(e,t,this.socket.lastJoinedRoom))}},{key:"destroy",value:function(){this.onCancel(),this.socket.disconnect(),this.removeEvent(),this.removeAllItem(),this.removeListView(),Xj(Jj(t.prototype),"destroy",this).call(this)}}]),t}();function oU(e){return(oU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sU(e,t,n){return(sU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rU(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function rU(e){return(rU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lU(e,t){return(lU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var hU=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(i=rU(t).call(this,game,null))||"object"!==oU(i)&&"function"!=typeof i?cU(n):i,ht.instance().showLoading(),e.dataEvent=Object.assign({},new At,o),e.event={back:new Phaser.Signal,ranking:new Phaser.Signal,play_room:new Phaser.Signal},e.positionEventMode=JSON.parse(game.cache.getText("positionEventMode")),e.bg=new Phaser.Button(game,0,0,"bg_create_room"),e.addChild(e.bg),e.map=new Dj(e.dataEvent),e.map.y=50*oe.instance().scale,e.addChild(e.map),e.chat=new iU(e.dataEvent.id),e.addChild(e.chat),e.header=new ej,e.header.event.trophy.add(e.chooseTrophy,cU(cU(e))),e.header.event.back.add(e.chooseBack,cU(cU(e))),e.header.setTitle(e.dataEvent.name),e.addChild(e.header),e.btnPlay=new Fj(e.positionEventMode.queueroom_bg_button_play,e.choosePlay,cU(cU(e))),e.btnPlay.y=game.height-138*oe.instance().scale,e.addChild(e.btnPlay),He.instance().logEvent(He.Event_mode_join_room),Ei.instance().showInterstitialEventMode(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lU(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(e){be.instance().playSound(be.joineventmode),Qe.instance().event.backButton.add(this.chooseBack,this),dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().events.onUserExitRoom.add(this.userExitRoom,this),this.dataEvent.id>0?!1===e?dV.instance().sendData(nj.EVENT_MODE_JOIN_REQUEST,oj.begin(this.dataEvent.id)):ht.instance().hideLoading():this.event.back.dispatch()}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this),dV.instance().events.onExtensionResponse.remove(this.getData,this),dV.instance().events.onUserExitRoom.remove(this.userExitRoom,this)}},{key:"userExitRoom",value:function(e){e.room.isGame&&e.user.isItMe&&this.event.back.dispatch()}},{key:"getData",value:function(e){switch(e.cmd){case nj.EVENT_MODE_JOIN_RESPONSE:"FAILED"===e.params.getUtfString("status")&&this.event.back.dispatch(),ht.instance().hideLoading()}}},{key:"choosePlay",value:function(){LogConsole.log("choosePlay"),Ir.instance().hide(),He.instance().logEvent(He.Event_mode_play_button),this.map.getTime()>5?dV.instance().dataMySeft.ticket<1?jC.instance().addDialogConfirnTicket(de.instance().getData("20")):(be.instance().playSound(be.clickbuttonplayeventmode),this.btnPlay.inputEnabled=!1,this.event.play_room.dispatch()):jC.instance().addDialog(de.instance().getData("27"))}},{key:"chooseTrophy",value:function(){this.event.ranking.dispatch(this.dataEvent.id)}},{key:"chooseBack",value:function(){be.instance().removeSound(),dV.instance().sendExitRoom()}},{key:"destroy",value:function(){be.instance().removeSound(),rn.instance().resetLoad(),this.removeEvent(),this.chat.destroy(),this.map.destroy(),sU(rU(t.prototype),"destroy",this).call(this)}}])&&aU(n.prototype,i),o&&aU(n,o),t}();function uU(e){return(uU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fU(e,t,n){return(fU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pU(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pU(e){return(pU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gU(e,t){return(gU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var mU=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=pU(t).call(this,game,null))||"object"!==uU(i)&&"function"!=typeof i?yU(n):i).event={back:new Phaser.Signal},e.score=0,e.popupHelp=null,e.positionEventMode=oe.instance().positionEventMode,e.bg=new _n(e.positionEventMode.header_bg),e.addChild(e.bg),e.btnBack=new _n(e.positionEventMode.header_buttom_back,e.chooseBack,yU(yU(e))),e.addChild(e.btnBack),e.score=dV.instance().dataMySeft.ticket,e.btnTicket=new qn(e.positionEventMode.header_buttom_ticket,dV.instance().dataMySeft.ticket),e.addChild(e.btnTicket),e.txtTitle=new Qt(e.positionEventMode.header_text_title,""),e.txtTitle.setTextBounds(0,0,e.bg.width,e.bg.height),e.addChild(e.txtTitle),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gU(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onUserVarsUpdate.add(this.userVarsUpdate,this)}},{key:"removeEvent",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.userVarsUpdate,this)}},{key:"userVarsUpdate",value:function(){var e=this,t={score:this.score};this.score=dV.instance().dataMySeft.ticket;var n=game.add.tween(t).to({score:dV.instance().dataMySeft.ticket},300,"Linear",!1);n.start(),n.onUpdateCallback(function(){e.btnTicket&&e.btnTicket.setText(parseInt(t.score))},this)}},{key:"setHelp",value:function(){this.ktAddHelp=!1,this.popupHelp=null,this.btnHelp=new _n(oe.instance().positionPopup.header_button_help,this.chooseHelp,this),this.addChild(this.btnHelp)}},{key:"chooseHelp",value:function(){console.log("chooseHelp : "+this.ktAddHelp),this.ktAddHelp=!this.ktAddHelp,!0===this.ktAddHelp?this.addPopupHelp():this.removePopupHelp()}},{key:"addPopupHelp",value:function(){this.removePopupHelp(),this.popupHelp=new po(de.instance().getData("25")),this.popupHelp.y=83*oe.instance().scale,this.popupHelp.x=game.width-this.popupHelp.width-71*oe.instance().scale,game.world.add(this.popupHelp)}},{key:"removePopupHelp",value:function(){null!==this.popupHelp&&(game.world.remove(this.popupHelp),this.popupHelp.destroy(),this.popupHelp=null)}},{key:"setTitle",value:function(e){this.txtTitle.text=e}},{key:"addSelectRoom",value:function(){this.countTicket=new qn(this.positionEventMode.header_buttom_ticket,dV.instance().dataMySeft.ticket),this.addChild(this.countTicket)}},{key:"chooseBack",value:function(){this.btnBack.inputEnabled=!1,this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),this.removePopupHelp(),jC.instance().removeAnimClaimReward(),fU(pU(t.prototype),"destroy",this).call(this)}}])&&dU(n.prototype,i),o&&dU(n,o),t}();function vU(e){return(vU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bU(e,t){return!t||"object"!==vU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _U(e){return(_U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SU(e,t){return(SU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var EU=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bU(this,_U(t).call(this,game,null))).title=e,n.positionEventMode=oe.instance().positionEventMode,n.txtDes=new Qt(n.positionEventMode.queueroom_txt_title_event,e),n.addChild(n.txtDes),n.line=new Bt(n.positionEventMode.queueroom_line_select_event),n.addChild(n.line),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SU(e,t)}(t,Je),n=t,(i=[{key:"setCount",value:function(e){this.txtDes.text=this.title+" ("+e+")"}},{key:"height",get:function(){return 53*oe.instance().scale}},{key:"width",get:function(){return game.width}}])&&wU(n.prototype,i),o&&wU(n,o),t}();function CU(e){return(CU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PU(e,t,n){return(PU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OU(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function OU(e){return(OU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RU(e,t){return(RU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var TU=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(i=OU(t).call(this,game,null))||"object"!==CU(i)&&"function"!=typeof i?xU(n):i,ht.instance().showLoading(),e.event={back:new Phaser.Signal,choose_event:new Phaser.Signal,view_history:new Phaser.Signal},e.objStart={},e.bg=new Phaser.Button(game,0,0,"bg_create_room"),e.addChild(e.bg);var o=new Phaser.Group(game,0,0,null);return e.listRoom=new Ia(game,o,new Phaser.Rectangle(0,0,game.width,game.height-142*oe.instance().scale),{direction:"y",padding:38*oe.instance().scale,searchForClicks:!0}),o.x=0,o.y=142*oe.instance().scale,e.addChild(o),e.header=new mU,e.header.event.back.add(e.chooseBack,xU(xU(e))),e.addChild(e.header),He.instance().logEvent(He.Event_mode),Ei.instance().showBanerEventRoomScreen(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RU(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseBack,this),dV.instance().events.onExtensionResponse.add(this.getData,this),ak.instance().event.event_update.add(this.addListRoom,this),ak.instance().event.load_event_list_complete.add(this.buildDataRoomEvent,this),!0===ak.instance().ktLoadEventList?this.buildDataRoomEvent():ak.instance().sendGetEventList()}},{key:"buildDataRoomEvent",value:function(){this.addListRoom(),dV.instance().sendData(nj.EVENT_MODE_LOAD_REQUEST,null),ht.instance().hideLoading()}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this),dV.instance().events.onExtensionResponse.remove(this.getData,this),ak.instance().event.event_update.remove(this.addListRoom,this),ak.instance().event.load_event_list_complete.remove(this.buildDataRoomEvent,this)}},{key:"getData",value:function(e){switch(e.cmd){case nj.EVENT_MODE_LOAD_LIST_RESPONSE:break;case nj.EVENT_MODE_LOAD_RESPONSE:if("OK"===e.params.getUtfString("status"))for(var t=e.params.getSFSArray("event_ccu"),n=0;n<t.size();n++){var i=t.getSFSObject(n);this.objStart[i.getLong("event_id")]&&this.objStart[i.getLong("event_id")].setCuu(i.getInt("number_user"))}}}},{key:"addListRoom",value:function(){this.listRoom.removeAll(),this.listRoom.reset();var e=0,t=-1;this.objStart={};var n=new EU(de.instance().getData("29"));this.listRoom.add(n);var i=ak.instance().roomEvent.getStartRoom();for(e=0;e<i.length;e++){t++;var o=new WC(i[e],t);o.event.choose_item.add(this.chooseItem,this),o.x=35*oe.instance().scale,this.listRoom.add(o),this.objStart[i[e].id]=o}n.setCount(i.length);var a=new EU(de.instance().getData("30"));this.listRoom.add(a);var s=ak.instance().roomEvent.getWaittingRoom();for(e=0;e<s.length;e++){t++;var r=new WC(s[e],t);r.event.choose_item.add(this.chooseItem,this),r.x=35*oe.instance().scale,this.listRoom.add(r)}a.setCount(s.length);var l=new EU(de.instance().getData("31"));this.listRoom.add(l);var c=ak.instance().roomEvent.getEndRoom();for(e=0;e<c.length;e++){t++;var h=new WC(c[e],t);h.event.choose_item.add(this.chooseItem,this),h.event.view_history.add(this.viewHistory,this),h.x=35*oe.instance().scale,this.listRoom.add(h)}l.setCount(c.length)}},{key:"viewHistory",value:function(e){this.event.view_history.dispatch(e)}},{key:"chooseItem",value:function(e){He.instance().logEvent(He.Event_mode_join_room_button),this.event.choose_event.dispatch(e)}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),rn.instance().resetLoad(),this.listRoom.removeAll(),this.listRoom.destroy(),Ei.instance().hideBanner(),PU(OU(t.prototype),"destroy",this).call(this)}}])&&kU(n.prototype,i),o&&kU(n,o),t}();function IU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var AU=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t,n){var i=new SFS2X.SFSObject;return i.putLong("event_id",e),i.putInt("from_idx",t),i.putInt("to_idx",n),i}}],(n=null)&&IU(t.prototype,n),i&&IU(t,i),e}();var LU=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diamond=0,this.event_id=0,this.ticket=0,this.created=0,this.event_ranking="",this.updated=0,this.support_item=0};function DU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var GU=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t={arrRanking:[],rankMe:new dj,arrReward:[]};if(e.containsKey(YC.event_ranking))for(var n=e.getSFSArray(YC.event_ranking),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=new dj;a.event_id=o.getLong(YC.event_id),a.user_id=o.getInt(YC.user_id),a.created=o.getLong(YC.created),a.user_name=o.getUtfString(YC.user_name),a.position=o.getInt(YC.position),a.achieved=o.getInt(YC.achieved),a.id=o.getLong(YC.id),a.avatar=o.getUtfString(YC.avatar),a.updated=o.getLong(YC.updated),a.vip=o.getBool(YC.vip),t.arrRanking.push(a)}if(e.containsKey(YC.your_rank)){var s=e.getSFSObject(YC.your_rank);t.rankMe.event_id=s.getLong(YC.event_id),t.rankMe.user_id=s.getInt(YC.user_id),t.rankMe.created=s.getLong(YC.created),t.rankMe.user_name=s.getUtfString(YC.user_name),t.rankMe.position=s.getInt(YC.position),t.rankMe.achieved=s.getInt(YC.achieved),t.rankMe.id=s.getLong(YC.id),t.rankMe.avatar=s.getUtfString(YC.avatar),t.rankMe.updated=s.getLong(YC.updated),t.rankMe.vip=s.getBool(YC.vip)}if(e.containsKey(YC.event_reward))for(var r=e.getSFSArray(YC.event_reward),l=0;l<r.size();l++){var c=r.getSFSObject(l),h=new LU;h.diamond=c.getInt(YC.diamond),h.event_id=c.getLong(YC.event_id),h.ticket=c.getInt(YC.ticket),h.created=c.getLong(YC.created),h.event_ranking=c.getUtfString(YC.event_ranking),h.updated=c.getLong(YC.updated),h.support_item=c.getInt(YC.support_item),t.arrReward.push(h)}return t}}],(n=null)&&DU(t.prototype,n),i&&DU(t,i),e}();function MU(e){return(MU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function BU(e){return(BU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jU(e,t){return(jU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var FU=function(e){function t(e,n){var i,o,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=BU(t).call(this,game,null))||"object"!==MU(a)&&"function"!=typeof a?UU(o):a).idx=n,i.data=e,i.isMe=r,i._width=140*oe.instance().scale,i.positionEventMode=oe.instance().positionEventMode,i.ava=new zc,i.ava.setSize(64*oe.instance().scale,64*oe.instance().scale),i.ava.x=137*oe.instance().scale,i.ava.y=41*oe.instance().scale,i.addChild(i.ava),i.btnMaskAva=new Phaser.Button(game,i.ava.x,i.ava.y,null,i.chooseAva,UU(UU(i))),i.btnMaskAva.width=i.ava.width,i.btnMaskAva.height=i.ava.height,i.addChild(i.btnMaskAva),i.line=new Bt(i.positionEventMode.item_ranking_line_space),i.addChild(i.line),0===n?i.bgTopAvata=new Bt(i.positionEventMode.item_ranking_avatar_top1):1===n?i.bgTopAvata=new Bt(i.positionEventMode.item_ranking_avatar_top2):2===n?i.bgTopAvata=new Bt(i.positionEventMode.item_ranking_avatar_top3):(i.ava.x=137*oe.instance().scale,i.ava.y=26*oe.instance().scale,i.bgTopAvata=new Bt(i.positionEventMode.item_ranking_avatar_top4),i._width=130*oe.instance().scale,i.line.y=i._width-2),i.addChild(i.bgTopAvata),i.iconTrophy=new Bt(i.positionEventMode.item_ranking_trophy_item),i.addChild(i.iconTrophy),n<3?(i.txtStt=new Qt(i.positionEventMode.item_ranking_text_top123,n+1),i.txtStt.setTextBounds(0,0,28*oe.instance().scale,27*oe.instance().scale),i.txtUserName=new Qt(i.positionEventMode.item_ranking_text_user_name123,i.formatName(e.user_name,15)),i.txtScore=new Qt(i.positionEventMode.item_ranking_text_score123,e.achieved)):(i.iconTrophy.y=43,i.txtStt=new Qt(i.positionEventMode.item_ranking_text_top4,n+1),i.txtUserName=new Qt(i.positionEventMode.item_ranking_text_user_name4,i.formatName(e.user_name,15)),i.txtScore=new qn(i.positionEventMode.item_ranking_text_score4,e.achieved)),i.addChild(i.txtScore),i.addChild(i.txtStt),i.addChild(i.txtUserName),i.iconVip=new Phaser.Sprite(game,143,88,"vipSource","Label_VIP"),i.iconVip.visible=!1,i.addChild(i.iconVip),n>2&&(i.iconVip.y=74),r?i.ava.setAvatar(e.avatar,0):i.ava.setAvatar(e.avatar,n),!0===e.vip&&(i.iconVip.visible=!0),null===s||(i.dataWin=new Un(s,!0),i.dataWin.x=i.width-i.dataWin.width-12*oe.instance().scale,i.dataWin.y=(i.height-i.dataWin.height)/2,i.addChild(i.dataWin)),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jU(e,t)}(t,Je),n=t,(i=[{key:"chooseAva",value:function(){console.log("clickAva"),console.log(this.data),jC.instance().addUserProfile(this.data.user_id)}},{key:"hideLine",value:function(){this.line.visible=!1}},{key:"beginTween",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.x=0}},{key:"width",get:function(){return game.width}},{key:"height",get:function(){return this._width}}])&&NU(n.prototype,i),o&&NU(n,o),t}();function ZU(e){return(ZU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function VU(e,t){return!t||"object"!==ZU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QU(e){return(QU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WU(e,t){return(WU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qU=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=VU(this,QU(t).call(this,game,null))).positionEventMode=oe.instance().positionEventMode,n.bg=new Dn(n.positionEventMode.ranking_bg_title),n.addChild(n.bg);var o=new Bt(n.positionEventMode.ranking_trophy410);return n.addChild(o),n.txtTitle=new Qt(n.positionEventMode.ranking_text_title,e),n.addChild(n.txtTitle),null===i||(n.dataWin=new Un(i,!0),n.dataWin.hideBg(),n.dataWin.x=n.bg.width-n.dataWin.width-35*oe.instance().scale,n.dataWin.y=(n.bg.height-n.dataWin.height)/2,n.addChild(n.dataWin)),n.line=new Bt(n.positionEventMode.queueroom_line_select_event),n.line.y=72*oe.instance().scale,n.addChild(n.line),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WU(e,t)}(t,Je),n=t,(i=[{key:"width",get:function(){return this.bg.width}},{key:"height",get:function(){return this.bg.height}}])&&HU(n.prototype,i),o&&HU(n,o),t}();function KU(e){return(KU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function YU(e,t,n){return(YU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=XU(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function XU(e){return(XU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JU(e,t){return(JU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var eF=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=XU(t).call(this,game,null))||"object"!==KU(o)&&"function"!=typeof o?$U(i):o).positionEventMode=oe.instance().positionEventMode,ht.instance().showLoading(),n.event_id=e,n.event={back:new Phaser.Signal},n.idxItem=1,n.arrRanking=[],n.objRankMe=null,n.arrReward=null,n.ktLoad=!1,n.ktLoadMore=!1,n.bg=new Phaser.Button(game,0,0,"bg_create_room"),n.addChild(n.bg);var a=new Phaser.Group(game,0,0,null);return n.listRanking=new Ia(game,a,new Phaser.Rectangle(0,0,game.width,game.height-212*oe.instance().scale),{direction:"y",padding:0,searchForClicks:!0}),n.listRanking.events.changeIndex.add(n.changeIndex,$U($U(n))),n.listRanking.scroller.events.onInputUp.add(n.checkLoadMore,$U($U(n))),a.x=0,a.y=102*oe.instance().scale,n.addChild(a),n.bgMe=new Bt(n.positionEventMode.ranking_bg_me),n.bgMe.y=game.height-108*oe.instance().scale,n.addChild(n.bgMe),n.txtError=new Qt(n.positionEventMode.item_ranking_txt_error,de.instance().getData("28")),n.txtError.setTextBounds(0,0,game.width,38*oe.instance().scale),n.txtError.y=game.height-76*oe.instance().scale,n.addChild(n.txtError),n.txtError.visible=!1,n.rankMe=null,n.header=new mU,n.header.setHelp(),n.header.event.back.add(n.chooseBack,$U($U(n))),n.addChild(n.header),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JU(e,t)}(t,Je),n=t,(i=[{key:"changeIndex",value:function(){this.listRanking.getIdx()+1===this.listRanking.grp.children.length&&(this.ktLoadMore=!0)}},{key:"checkLoadMore",value:function(){!0===this.ktLoadMore?(this.ktLoadMore=!1,this.sendLoadDataFromServer()):ht.instance().hideLoading()}},{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseBack,this),dV.instance().events.onExtensionResponse.add(this.getData,this),this.event_id>0?this.sendLoadDataFromServer():(ht.instance().hideLoading(),this.chooseBack())}},{key:"sendLoadDataFromServer",value:function(){if(this.idxItem<100&&!1===this.ktLoad){this.ktLoad=!0,ht.instance().showLoading();var e=this.idxItem,t=this.idxItem+9;t>100&&(t=100),dV.instance().sendData(nj.EVENT_MODE_RANKING_REQUEST,AU.begin(this.event_id,e,t))}}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this),dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case nj.EVENT_MODE_RANKING_RESPONSE:this.ktLoad=!1;for(var t=GU.begin(e.params),n=0;n<t.arrRanking.length;n++)this.arrRanking.push(t.arrRanking[n]);this.idxItem=this.arrRanking.length+1,null===this.objRankMe&&(this.objRankMe=t.rankMe),null===this.arrReward&&(this.arrReward=t.arrReward),this.buildRanking()}}},{key:"removeRankMe",value:function(){null!==this.rankMe&&(this.removeChild(this.rankMe),this.rankMe.destroy(),this.rankMe=null)}},{key:"buildRanking",value:function(){this.listRanking.removeAll();var e,t,n,i=3,o=0;this.arrRanking.length<3&&(i=this.arrRanking.length);for(var a=0;a<i;a++){var s=void 0;(s=this.arrReward[a]?new FU(this.arrRanking[a],a,this.arrReward[a]):new FU(this.arrRanking[a],a)).beginTween(o),this.listRanking.add(s),a==i-1&&s.hideLine(),o++}if(e=this.arrReward[3]?new qU("4-10",this.arrReward[3]):new qU("4-10"),this.listRanking.add(e),this.arrRanking.length>3){var r=10;this.arrRanking.length<10&&(r=this.arrRanking.length);for(var l=3;l<r;l++){var c=new FU(this.arrRanking[l],l);c.beginTween(o),this.listRanking.add(c),l==r-1&&c.hideLine(),o++}}if(t=this.arrReward[4]?new qU("11-50",this.arrReward[4]):new qU("11-50"),this.listRanking.add(t),this.arrRanking.length>10){var h=50;this.arrRanking.length<50&&(h=this.arrRanking.length);for(var u=10;u<h;u++){var d=new FU(this.arrRanking[u],u);d.beginTween(o),this.listRanking.add(d),u==h-1&&d.hideLine(),o++}}if(n=this.arrReward[5]?new qU("51-100",this.arrReward[5]):new qU("51-100"),this.listRanking.add(n),this.arrRanking.length>50){var f=100;this.arrRanking.length<100&&(f=this.arrRanking.length);for(var p=50;p<f;p++){var g=new FU(this.arrRanking[p],p);g.beginTween(),this.listRanking.add(g),p==f-1&&g.hideLine()}}this.objRankMe.position>0?(null===this.rankMe&&(this.removeRankMe(),this.objRankMe.user_name=dV.instance().dataMySeft.user_name,this.objRankMe.avatar=dV.instance().dataMySeft.avatar,this.objRankMe.position<4&&this.arrReward[this.objRankMe.position-1]?this.rankMe=new FU(this.objRankMe,this.objRankMe.position-1,this.arrReward[this.objRankMe.position-1],!0):this.rankMe=new FU(this.objRankMe,this.objRankMe.position-1,null,!0),this.rankMe.x=0,this.rankMe.y=game.height-112*oe.instance().scale,this.addChild(this.rankMe)),this.txtError.visible=!1):this.txtError.visible=!0,game.time.events.add(1e3,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"chooseBack",value:function(){this.event.back.dispatch()}},{key:"destroy",value:function(){rn.instance().resetLoad(),this.listRanking.removeAll(),this.listRanking.destroy(),this.removeEvent(),YU(XU(t.prototype),"destroy",this).call(this)}}])&&zU(n.prototype,i),o&&zU(n,o),t}();function tF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nF=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t,n,i,o,a){console.log("answer_time : "+o);var s=new SFS2X.SFSObject;return s.putInt("answer_index",e),s.putInt("correct_answer",t),s.putInt("question_index",n),s.putBool("is_loaded_next_question",i),s.putFloat("answer_time",o),s.putBool("is_correct_answer",a),s}}],(n=null)&&tF(t.prototype,n),i&&tF(t,i),e}();function iF(e){return(iF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function aF(e,t){return!t||"object"!==iF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sF(e){return(sF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rF(e,t){return(rF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lF=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=aF(this,sF(t).call(this,game,null))).event={complete:new Phaser.Signal},e.tweenSpriteTime=null,e.positionEventMode=oe.instance().positionEventMode,e.loading=new Bt(e.positionEventMode.playroom_loading_time_question),e.loading.width=0,e.addChild(e.loading),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rF(e,t)}(t,Je),n=t,(i=[{key:"addTween",value:function(){this.loading.width=0,this.stopTween(),this.tweenSpriteTime=game.add.tween(this.loading).to({width:570*oe.instance().scale},1e4,"Linear"),this.tweenSpriteTime.onComplete.add(this.onComplete,this),this.tweenSpriteTime.start()}},{key:"onComplete",value:function(){this.event.complete.dispatch()}},{key:"getTime",value:function(){return console.log("getTime----------"),console.log(this.tweenSpriteTime),console.log(this.tweenSpriteTime.timeline[0].dt),null!==this.tweenSpriteTime?this.tweenSpriteTime.timeline[0].dt/1e3:0}},{key:"stopTween",value:function(){null!==this.tweenSpriteTime&&(this.tweenSpriteTime.stop(),this.tweenSpriteTime.onComplete.remove(this.onComplete,this))}}])&&oF(n.prototype,i),o&&oF(n,o),t}();function cF(e){return(cF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function uF(e){return(uF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dF(e,t){return(dF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pF=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=uF(t).call(this,game,null))||"object"!==cF(i)&&"function"!=typeof i?fF(n):i).event={show_loading:new Phaser.Signal,hide_loading:new Phaser.Signal,next_question:new Phaser.Signal,fail_question:new Phaser.Signal},e.data=null,e.idx=0,e.idxLoad=0,e.ktSend=!0,e.ktSendNexQuestion=!1,e.positionEventMode=oe.instance().positionEventMode,e.txtNumber=new Qt(e.positionEventMode.playroom_text_number_question,""),e.txtNumber.setTextBounds(0,0,game.width,31*oe.instance().scale),e.addChild(e.txtNumber),e.txtDes=new Qt(e.positionEventMode.playroom_text_des_question,""),e.txtDes.setTextBounds(0,0,game.width,30*oe.instance().scale),e.addChild(e.txtDes);var o=new Phaser.Group(game,0,0,null);e.listAnswer=new Ia(game,o,new Phaser.Rectangle(0,0,game.width,500*oe.instance().scale),{direction:"y",padding:15*oe.instance().scale,searchForClicks:!0}),o.y=89*oe.instance().scale,e.addChild(o),e.arrAnswer=[],e.listAnswer.removeAll(),e.listAnswer.reset(),LogConsole.log("answr----------------------------------");for(var a=0;a<4;a++){var s=new fL(e.chooseAnswer,fF(fF(e)));s.inputEnabled=!1;var r=(game.width-s.width)/2;s.x=r,s.setConstX(r),s.visible=!1,e.arrAnswer.push(s)}return LogConsole.log("end----------------------------------"),e.loadingQuestion=new lF,e.loadingQuestion.event.complete.add(e.timeCompelte,fF(fF(e))),e.loadingQuestion.x=35*oe.instance().scale,e.loadingQuestion.y=80*oe.instance().scale,e.addChild(e.loadingQuestion),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dF(e,t)}(t,Je),n=t,(i=[{key:"setIdxLoad",value:function(e){this.idxLoad=e,console.log("setIdxLoad ----------- : "+this.idxLoad),console.log("this.ktSendNexQuestion : "+this.ktSendNexQuestion),!0===this.ktSendNexQuestion&&(this.ktSendNexQuestion=!1,this.event.next_question.dispatch())}},{key:"timeCompelte",value:function(){if(!1===this.ktSend){this.ktSend=!0;for(var e=0;e<this.arrAnswer.length;e++)this.arrAnswer[e].setTextNoChoose();var t=this.data.correct_answer;this.arrAnswer[t-1].setTrueText();dV.instance().sendData(nj.EVENT_MODE_USER_SELECTED_ANSWER_REQUEST,nF.begin(0,t,this.idx+1,!0,10,!1)),this.event.fail_question.dispatch()}}},{key:"showQuestion",value:function(){for(var e=0;e<this.arrAnswer.length;e++)this.arrAnswer[e].visible=!0,this.arrAnswer[e].inputEnabled=!0,this.listAnswer.add(this.arrAnswer[e])}},{key:"chooseAnswer",value:function(e){if(!1===this.ktSend){this.ktSend=!0;var t=this.loadingQuestion.getTime();console.log("answer_time : "+t);var n=!1;this.loadingQuestion.stopTween();for(var i=0;i<this.arrAnswer.length;i++)this.arrAnswer[i].setTextNoChoose();var o=this.data.correct_answer,a=e.getIdx()+1;a==o?(e.setTrueText(),n=!0,be.instance().playSound(be.streakanswer)):(e.setFailText(),n=!1,this.arrAnswer[o-1].setTrueText());var s=!1;this.ktSendNexQuestion=!0,this.idx+1<this.idxLoad&&(s=!0,this.ktSendNexQuestion=!1),dV.instance().sendData(nj.EVENT_MODE_USER_SELECTED_ANSWER_REQUEST,nF.begin(a,o,this.idx+1,s,t,n)),!0===n?this.event.next_question.dispatch():this.event.fail_question.dispatch()}}},{key:"buildQuestionByIndex",value:function(e,t){this.ktSendNexQuestion=!1,LogConsole.log("buildQuestionByIndex - "+e),LogConsole.log(t),this.idx=e,this.data=t,this.ktSend=!1,this.loadingQuestion.addTween(),rl.instance().playsound(this.data.file_path),this.txtNumber.text=de.instance().getData("21")+" "+(e+1);var n="";"SONG"==t.question_type?n=de.instance().getData("22"):"SINGER"==t.question_type&&(n=de.instance().getData("23")),this.txtDes.text=n;for(var i=0;i<this.data.arrAnser.length;i++)this.arrAnswer[i].setData(this.data.arrAnser[i],i)}},{key:"destroy",value:function(){this.loadingQuestion.event.complete.remove(this.timeCompelte,this),rl.instance().removeSound(),this.removeAllItem()}}])&&hF(n.prototype,i),o&&hF(n,o),t}();function gF(e){return(gF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mF(e){return(mF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vF(e,t){return(vF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var bF=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=mF(t).call(this,game,null))||"object"!==gF(i)&&"function"!=typeof i?wF(n):i).event={change_local_me:new Phaser.Signal,fail_question:new Phaser.Signal,done_game:new Phaser.Signal,cancle_bad_connect:new Phaser.Signal},e.arrQuestion=[],e.idxLoad=0,e.ktLoad=!1,e.ktFist=!0,e.ktEvendEnd=!1,e.idxNextQuestion=null,e.idBadConnect=null,e.idxQuestion=0,e.loading=null,e.badConnect=null,e.remaining_question_number=0,e.question=new pF,e.question.event.next_question.add(e.buildNextQuestionUser,wF(wF(e))),e.question.event.fail_question.add(e.buildFailQuestionUser,wF(wF(e))),e.question.event.show_loading.add(e.addLoading,wF(wF(e))),e.question.event.hide_loading.add(e.removeLoading,wF(wF(e))),e.question.y=game.height-591*oe.instance().scale,e.addChild(e.question),rl.instance().removeAllSound(),e.addLoading(),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vF(e,t)}(t,Je),n=t,(i=[{key:"addLoading",value:function(){this.removeLoading(),this.loading=new ot,this.addChild(this.loading)}},{key:"removeLoading",value:function(){null!==this.loading&&(this.removeChild(this.loading),this.loading.destroy(),this.loading=null)}},{key:"loadStart",value:function(){LogConsole.log("loadStart----------")}},{key:"onFileComplete",value:function(e,t,n,i,o){LogConsole.log("onFileComplete ----------")}},{key:"loadComplete",value:function(){LogConsole.log("loadComplete---------- : "+this.idxLoad),this.idxLoad++,this.idxLoad<this.arrQuestion.length?(this.beginLoad(),!0===this.ktFist&&(Ei.instance().playEventMode(),this.ktFist=!1,this.removeIdBadConnect(),this.idxQuestion=0,this.question.showQuestion(),this.buildNextQuestion(),this.removeLoading())):this.ktLoad=!1}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),rl.instance().event.loadComplete.add(this.loadComplete,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),rl.instance().event.loadComplete.remove(this.loadComplete,this),this.question.event.next_question.remove(this.buildNextQuestionUser,this),this.question.event.fail_question.remove(this.buildFailQuestionUser,this),this.question.event.show_loading.remove(this.addLoading,this),this.question.event.hide_loading.remove(this.removeLoading,this)}},{key:"getData",value:function(e){switch(e.cmd){case nj.EVENT_MODE_QUESTION_RESPONSE:this.addDataQuestion(e.params);break;case nj.EVENT_MODE_START_GAME:this.idxQuestion=e.params.getInt(YC.question_index)-1,this.question.showQuestion(),this.buildNextQuestion();break;case nj.EVENT_MODE_MOVE_TO_NEXT_QUESTION:this.removeLoading(),this.idxQuestion=e.params.getInt(YC.question_index)-1,this.removeNextQuestion(),this.idxNextQuestion=game.time.events.add(1*Phaser.Timer.SECOND,this.buildNextQuestion,this);break;case nj.EVENT_MODE_EVENT_ENDED:this.ktEvendEnd=!0}}},{key:"removeNextQuestion",value:function(){null!==this.idxNextQuestion&&game.time.events.remove(this.idxNextQuestion)}},{key:"buildFailQuestionUser",value:function(){!1===this.ktEvendEnd&&this.event.fail_question.dispatch(this.idxQuestion)}},{key:"removeIdBadConnect",value:function(){null!==this.idBadConnect&&game.time.events.remove(this.idBadConnect)}},{key:"addShowBadConnect",value:function(){this.removeShowBadConnect(),this.badConnect=new cS,this.badConnect.setTextOk("CHƠI TIẾP"),this.badConnect.setTextCancle("QUAY LẠI"),this.badConnect.event.OK.add(this.chooseOkBadConnect,this),this.badConnect.event.CANCLE.add(this.chooseCancleBadConnect,this),this.badConnect.setTextConfirm(de.instance().getData("6")),this.addChild(this.badConnect)}},{key:"chooseOkBadConnect",value:function(){this.removeShowBadConnect(),this.removeIdBadConnect(),this.idBadConnect=game.time.events.add(10*Phaser.Timer.SECOND,this.addShowBadConnect,this)}},{key:"chooseCancleBadConnect",value:function(){dV.instance().sendData(nj.EVENT_MODE_USER_DONE_GAME_REQUEST,null),this.event.cancle_bad_connect.dispatch()}},{key:"removeShowBadConnect",value:function(){null!==this.badConnect&&(this.removeChild(this.badConnect),this.badConnect.destroy(),this.badConnect=null)}},{key:"buildNextQuestionUser",value:function(){this.idxQuestion++,console.log("buildNextQuestionUser : "+this.idxQuestion),console.log("idxLoad : "+this.idxLoad),0===this.remaining_question_number&&this.idxQuestion===this.arrQuestion.length?(dV.instance().sendData(nj.EVENT_MODE_USER_DONE_GAME_REQUEST,null),this.event.done_game.dispatch()):this.idxQuestion<this.idxLoad?(this.removeLoading(),this.removeIdBadConnect(),this.removeNextQuestion(),this.removeShowBadConnect(),this.idxNextQuestion=game.time.events.add(1*Phaser.Timer.SECOND,this.buildNextQuestion,this)):(this.idxQuestion--,this.addLoading(),this.removeIdBadConnect(),this.idBadConnect=game.time.events.add(10*Phaser.Timer.SECOND,this.addShowBadConnect,this))}},{key:"buildNextQuestion",value:function(){if(this.arrQuestion[this.idxQuestion]){var e=this.idxQuestion-4;e>-1&&rl.instance().removeSoundFromUrl(this.arrQuestion[e].file_path),this.event.change_local_me.dispatch(this.idxQuestion+1),this.question.buildQuestionByIndex(this.idxQuestion,this.arrQuestion[this.idxQuestion])}else jC.instance().addDialog("Vượt quá câu hỏi nhận được")}},{key:"addDataQuestion",value:function(e){var t=e.getSFSArray(b_.questions);this.remaining_question_number=e.getInt("remaining_question_number");for(var n=0;n<t.size();n++){var i=t.getSFSObject(n),o=new oA;o.file_path=i.getUtfString(b_.file_path),o.question_type=i.getUtfString(b_.question_type),o.correct_answer=i.getInt(b_.correct_answer),o.arrAnser.push(i.getUtfString(b_.answer1)),o.arrAnser.push(i.getUtfString(b_.answer2)),o.arrAnser.push(i.getUtfString(b_.answer3)),o.arrAnser.push(i.getUtfString(b_.answer4)),this.arrQuestion.push(o)}!1===this.ktLoad&&this.beginLoad()}},{key:"beginLoad",value:function(){LogConsole.log("this.idxLoad : "+this.idxLoad),LogConsole.log("arrQuestion : "+this.arrQuestion.length),this.ktLoad=!0,this.question.setIdxLoad(this.idxLoad),rl.instance().loadSound(this.arrQuestion[this.idxLoad].file_path),!0===this.ktFist&&(this.removeIdBadConnect(),this.idBadConnect=game.time.events.add(10*Phaser.Timer.SECOND,this.addShowBadConnect,this))}},{key:"destroy",value:function(){this.removeEvent(),this.removeAllItem(),this.removeIdBadConnect(),this.removeNextQuestion(),rl.instance().removeAllSound()}}])&&yF(n.prototype,i),o&&yF(n,o),t}();function _F(e){return(_F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EF(e,t,n){return(EF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CF(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function CF(e){return(CF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kF(e,t){return(kF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var OF=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=CF(t).call(this,game,null))||"object"!==_F(i)&&"function"!=typeof i?PF(n):i).event={backToSelect:new Phaser.Signal,end_game:new Phaser.Signal,done_game:new Phaser.Signal,cancle_bad_connect:new Phaser.Signal},e.dataEvent=Object.assign({},new At,o),e.bg=new Phaser.Button(game,0,0,"bg_create_room"),e.addChild(e.bg),e.header=new ej,e.header.setTitle(e.dataEvent.name),e.header.setHideBack(),e.header.setHideTrophy(),e.addChild(e.header),e.map=new Dj(e.dataEvent),game.height>1136?e.map.y=50*oe.instance().scale+(game.height-1136)/2:e.map.y=50*oe.instance().scale,e.addChild(e.map),e.question=new bF,e.question.event.cancle_bad_connect.add(e.cancleBadConnect,PF(PF(e))),e.question.event.fail_question.add(e.failQuestion,PF(PF(e))),e.question.event.done_game.add(e.doneQuestion,PF(PF(e))),e.question.event.change_local_me.add(e.changeLocalMe,PF(PF(e))),e.addChild(e.question),He.instance().logEvent(He.Event_mode_play),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kF(e,t)}(t,Je),n=t,(i=[{key:"doneQuestion",value:function(){this.event.done_game.dispatch()}},{key:"failQuestion",value:function(e){this.event.end_game.dispatch(e)}},{key:"changeLocalMe",value:function(e){this.map.changeLocalMe(e)}},{key:"cancleBadConnect",value:function(){this.event.cancle_bad_connect.dispatch()}},{key:"chooseTrophy",value:function(){}},{key:"chooseBack",value:function(){}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().events.onUserExitRoom.add(this.userExitRoom,this),dV.instance().sendData(nj.EVENT_MODE_PLAY_GAME_REQUEST,null)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),dV.instance().events.onUserExitRoom.remove(this.userExitRoom,this),this.question.event.cancle_bad_connect.remove(this.cancleBadConnect,this),this.question.event.fail_question.remove(this.failQuestion,this),this.question.event.done_game.remove(this.doneQuestion,this),this.question.event.change_local_me.remove(this.changeLocalMe,this)}},{key:"getData",value:function(e){switch(e.cmd){case nj.EVENT_MODE_START_GAME:Ei.instance().playEventMode(),He.instance().logEvent(He.pro_quiz_start_eventmode),Ei.instance().playEventMode(),this.question.removeLoading()}}},{key:"userExitRoom",value:function(e){e.room.isGame&&e.user.isItMe&&this.event.backToSelect.dispatch()}},{key:"destroy",value:function(){rn.instance().resetLoad(),rl.instance().removeAllSound(),this.removeEvent(),this.removeAllItem(),EF(CF(t.prototype),"destroy",this).call(this)}}])&&SF(n.prototype,i),o&&SF(n,o),t}();function RF(e){return(RF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function TF(e){return(TF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IF(e,t){return(IF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var LF=function(e){function t(){var e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=TF(t).call(this,game,null))||"object"!==RF(i)&&"function"!=typeof i?AF(n):i).event={exit:new Phaser.Signal,continute:new Phaser.Signal},e.positionPopup=oe.instance().positionPopup,e.popup=new Do,e.popup.setHeight(350*oe.instance().scale),e.popup.x=0,e.popup.y=89*oe.instance().scale,e.addChild(e.popup),e.icon=new Bt(e.positionPopup.popup_icon_emo_win),e.icon.x=e.popup.x+(e.popup.width-e.icon.width)/2,e.icon.y=0,e.addChild(e.icon),e.txtChucMung=new Qt(e.positionPopup.popup_win_event_text_chucmung,de.instance().getData("16")+"!!!"),e.txtChucMung.setTextBounds(0,0,e.popup.width,57*oe.instance().scale),e.addChild(e.txtChucMung),e.txtCountQuestion=new Qt(e.positionPopup.popup_win_event_text_count_question,de.instance().getData("17")+" "+o+" "+de.instance().getData("18")),e.txtCountQuestion.addColor("#ffa33a",de.instance().getData("17").length),e.txtCountQuestion.addColor("#000000",de.instance().getData("17").length+1+o.toString().length),e.txtCountQuestion.setTextBounds(0,0,e.popup.width,34*oe.instance().scale),e.addChild(e.txtCountQuestion),e.btnExit=new qn(e.positionPopup.popup_win_event_button_exit,de.instance().getData("9"),e.chooseExit,AF(AF(e))),e.addChild(e.btnExit),e.btnContinute=new qn(e.positionPopup.popup_win_event_button_continute,de.instance().getData("19")+"  -1",e.chooseContinute,AF(AF(e))),e.addChild(e.btnContinute),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IF(e,t)}(t,Je),n=t,(i=[{key:"chooseExit",value:function(){this.event.exit.dispatch()}},{key:"chooseContinute",value:function(){dV.instance().dataMySeft.ticket<1?(jC.instance().addDialogConfirnTicket(de.instance().getData("20")),this.chooseExit()):this.event.continute.dispatch()}}])&&xF(n.prototype,i),o&&xF(n,o),t}();function DF(e){return(DF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MF(e){return(MF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NF(e,t){return(NF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jF=function(e){function t(e,n){var i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=MF(t).call(this,game,null))||"object"!==DF(a)&&"function"!=typeof a?BF(o):a).event={exit:new Phaser.Signal,continute:new Phaser.Signal},i.positionPopup=oe.instance().positionPopup,i.bg=new Phaser.Button(game,0,0,"screen-dim"),i.addChild(i.bg),i.popupWin=new LF(e),i.popupWin.event.exit.add(i.chooseExit,BF(BF(i))),i.popupWin.event.continute.add(i.chooseContinute,BF(BF(i))),i.popupWin.x=35*oe.instance().scale,i.popupWin.y=game.height-853*oe.instance().scale,i.addChild(i.popupWin),i.time=new Jt,i.time.setTimer(n.finish_at),i.time.x=284*oe.instance().scale,i.time.y=118*oe.instance().scale,i.addChild(i.time),i.countTicket=new qn(i.positionPopup.popup_win_event_count_ticket,dV.instance().dataMySeft.ticket),i.addChild(i.countTicket),be.instance().playSound(be.gameovereventmode),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NF(e,t)}(t,Je),n=t,(i=[{key:"chooseExit",value:function(){LogConsole.log("chooseExit"),this.event.exit.dispatch()}},{key:"chooseContinute",value:function(){LogConsole.log("chooseContinute"),this.event.continute.dispatch()}}])&&GF(n.prototype,i),o&&GF(n,o),t}();function UF(e){return(UF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ZF(e){return(ZF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HF(e,t){return(HF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var QF=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=ZF(t).call(this,game,null))||"object"!==UF(i)&&"function"!=typeof i?VF(n):i).event={exit:new Phaser.Signal},e.positionPopup=oe.instance().positionPopup,e.popup=new Do,e.popup.setHeight(350*oe.instance().scale),e.popup.x=0,e.popup.y=89*oe.instance().scale,e.addChild(e.popup),e.icon=new Bt(e.positionPopup.popup_icon_emo_done),e.icon.x=e.popup.x+(e.popup.width-e.icon.width)/2,e.icon.y=-67*oe.instance().scale,e.addChild(e.icon),e.txtChucMung=new Qt(e.positionPopup.popup_win_event_text_chucmung,de.instance().getData("7")),e.txtChucMung.setTextBounds(0,0,e.popup.width,57*oe.instance().scale),e.addChild(e.txtChucMung),e.txtCountQuestion=new Qt(e.positionPopup.popup_win_event_text_done,de.instance().getData("8")),e.txtCountQuestion.setTextBounds(0,0,474*oe.instance().scale,34*oe.instance().scale),e.addChild(e.txtCountQuestion),e.btnExit=new qn(e.positionPopup.popup_done_event_button_exit,de.instance().getData("9"),e.chooseExit,VF(VF(e))),e.addChild(e.btnExit),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HF(e,t)}(t,Je),n=t,(i=[{key:"chooseExit",value:function(){this.event.exit.dispatch()}}])&&FF(n.prototype,i),o&&FF(n,o),t}();function WF(e){return(WF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function KF(e){return(KF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zF(e,t){return(zF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var XF=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=KF(t).call(this,game,null))||"object"!==WF(o)&&"function"!=typeof o?YF(i):o).event={exit:new Phaser.Signal},n.positionPopup=oe.instance().positionPopup,n.bg=new Phaser.Button(game,0,0,"screen-dim"),n.addChild(n.bg),n.popupWin=new QF,n.popupWin.event.exit.add(n.chooseExit,YF(YF(n))),n.popupWin.x=35*oe.instance().scale,n.popupWin.y=game.height-853*oe.instance().scale,n.addChild(n.popupWin),n.time=new Jt,n.time.setTimer(e.finish_at),n.time.x=266*oe.instance().scale,n.time.y=118*oe.instance().scale,n.addChild(n.time),n.countTicket=new qn(n.positionPopup.popup_win_event_count_ticket,dV.instance().dataMySeft.ticket),n.addChild(n.countTicket),be.instance().playSound(be.popupeventmodeend),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zF(e,t)}(t,Je),n=t,(i=[{key:"chooseExit",value:function(){this.event.exit.dispatch(),be.instance().removeSound()}}])&&qF(n.prototype,i),o&&qF(n,o),t}();function JF(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t={event_top_rank_log:{},event:{},event_reward:{}};if(e.containsKey(YC.event_top_rank_log)){var n=e.getSFSObject(YC.event_top_rank_log);t.event_top_rank_log.event_id=n.getLong(YC.event_id),t.event_top_rank_log.top=n.getInt(YC.top),t.event_top_rank_log.user_id=n.getInt(YC.user_id),t.event_top_rank_log.created=n.getLong(YC.created),t.event_top_rank_log.achieved=n.getInt(YC.achieved),t.event_top_rank_log.id=n.getLong(YC.id),t.event_top_rank_log.state=n.getUtfString(YC.state),t.event_top_rank_log.updated=n.getLong(YC.updated)}if(e.containsKey(YC.event)){var i=e.getSFSObject(YC.event);t.event.finish_at=i.getLong(YC.finish_at),t.event.created=i.getLong(YC.created),t.event.description=i.getUtfString(YC.description),t.event.banner=i.getUtfString(YC.banner),t.event.active=i.getInt(YC.active),t.event.start_at=i.getLong(YC.start_at),t.event.event_type=i.getUtfString(YC.event_type),t.event.name=i.getUtfString(YC.name),t.event.medal=i.getUtfString(YC.medal),t.event.id=i.getLong(YC.id),t.event.state=i.getUtfString(YC.state),t.event.updated=i.getLong(YC.updated)}if(e.containsKey(YC.event_reward)){var o=e.getSFSObject(YC.event_reward);t.event_reward.diamond=o.getInt(YC.diamond),t.event_reward.event_id=o.getLong(YC.event_id),t.event_reward.ticket=o.getInt(YC.ticket),t.event_reward.event_ranking=o.getUtfString(YC.event_ranking),t.event_reward.updated=o.getLong(YC.updated),t.event_reward.support_item=o.getInt(YC.support_item)}return t}}],(n=null)&&JF(t.prototype,n),i&&JF(t,i),e}();function eZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tZ=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new SFS2X.SFSObject;return t.putLong("event_top_rank_log_id",e),t}}],(n=null)&&eZ(t.prototype,n),i&&eZ(t,i),e}();function nZ(e){return(nZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oZ(e){return(oZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aZ(e,t){return(aZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var rZ=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=oZ(t).call(this,game,null))||"object"!==nZ(o)&&"function"!=typeof o?sZ(i):o).dataEvent=e,n.event={accept_gift:new Phaser.Signal,view_result:new Phaser.Signal,exit:new Phaser.Signal},n.positionEventMode=oe.instance().positionEventMode,n.positionPopup=oe.instance().positionPopup,n.bg=new Do,n.bg.y=198*oe.instance().scale,n.bg.setHeight(612*oe.instance().scale),n.addChild(n.bg),n.iconTrophy=new Phaser.Sprite(game,0,0,"iconpopupwinevent"),n.iconTrophy.animations.add("iconpopupwinevent"),n.iconTrophy.animations.play("iconpopupwinevent",30,!0),n.iconTrophy.width=526,n.iconTrophy.height=320,n.iconTrophy.x=(n.bg.width-n.iconTrophy.width)/2,n.iconTrophy.y=-50,n.addChild(n.iconTrophy),n.lbKetThuc=new Qt(n.positionEventMode.popup_win_text_ketthucsukien,de.instance().getData("10")),n.lbKetThuc.setTextBounds(0,0,n.bg.width,30*oe.instance().scale),n.addChild(n.lbKetThuc),n.lbNameEvent=new Qt(n.positionEventMode.popup_win_text_name,e.event.name),n.lbNameEvent.setTextBounds(0,0,n.bg.width,46*oe.instance().scale),n.addChild(n.lbNameEvent),n.lbChucMung=new Qt(n.positionEventMode.popup_win_text_chucmung,de.instance().getData("11")),n.lbChucMung.setTextBounds(0,0,n.bg.width,30*oe.instance().scale),n.addChild(n.lbChucMung),n.lbSTT=new Qt(n.positionEventMode.popup_win_text_stt,e.event_top_rank_log.top),n.lbSTT.setTextBounds(0,0,n.bg.width,46*oe.instance().scale),n.addChild(n.lbSTT),n.lbPhanThuong=new Qt(n.positionEventMode.popup_win_text_phanthuong,de.instance().getData("12")),n.lbPhanThuong.setTextBounds(0,0,n.bg.width,30*oe.instance().scale),n.addChild(n.lbPhanThuong),n.gift=new Un(e.event_reward,!0),n.gift.x=(n.bg.width-n.gift.width)/2,n.gift.y=518*oe.instance().scale,n.addChild(n.gift),n.btnClose=new _n(n.positionPopup.popup_close_btn_exit,n.chooseClose,sZ(sZ(n))),n.btnClose.x=n.bg.width-n.btnClose.width/2,n.btnClose.y=n.bg.y-n.btnClose.height/3,n.addChild(n.btnClose),n.btnXemKetQua=new qn(n.positionPopup.popup_confirm_button_ok,de.instance().getData("13"),n.chooseCancle,sZ(sZ(n))),n.btnXemKetQua.x=35,n.btnXemKetQua.y=610*oe.instance().scale,n.addChild(n.btnXemKetQua),n.btnShare=new qn(n.positionPopup.popup_confirm_button_share,de.instance().getData("14"),n.chooseShare,sZ(sZ(n))),n.btnShare.y=610*oe.instance().scale,n.addChild(n.btnShare),n.btnNhanthuong=new qn(n.positionPopup.popup_confirm_button_ok_full,de.instance().getData("15"),n.chooseOK,sZ(sZ(n))),n.btnNhanthuong.x=35,n.btnNhanthuong.y=715*oe.instance().scale,n.addChild(n.btnNhanthuong),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aZ(e,t)}(t,Je),n=t,(i=[{key:"chooseShare",value:function(){Ri.instance().share()}},{key:"chooseOK",value:function(){this.btnNhanthuong.inputEnabled=!1,this.event.accept_gift.dispatch(),dV.instance().sendData(nj.EVENT_MODE_CLAIM_REWARD_REQUEST,tZ.begin(this.dataEvent.event_top_rank_log.id))}},{key:"chooseCancle",value:function(){this.event.view_result.dispatch(this.dataEvent.event.id)}},{key:"chooseClose",value:function(){this.event.exit.dispatch()}}])&&iZ(n.prototype,i),o&&iZ(n,o),t}();function lZ(e){return(lZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hZ(e,t){return!t||"object"!==lZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uZ(e,t,n){return(uZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dZ(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function dZ(e){return(dZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fZ(e,t){return(fZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pZ=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hZ(this,dZ(t).call(this,game,null))).data=e,n.event={accept_gift:new Phaser.Signal,view_result:new Phaser.Signal,exit:new Phaser.Signal},n.idxGet=0,n.idShowResult=null,n.positionPopup=oe.instance().positionPopup,n.bg=new Phaser.Button(game,0,0,"screen-dim"),n.addChild(n.bg),n.arrResource=[{type:"spritesheet",link:"img/atlas/IconEventModeWin.png",key:"iconpopupwinevent",width:400,height:243,countFrame:23}],n.loadResource(),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fZ(e,t)}(t,Em),n=t,(i=[{key:"loadFileComplete",value:function(){uZ(dZ(t.prototype),"loadFileComplete",this).call(this),this.popupWin=new rZ(this.data),this.popupWin.event.exit.add(this.chooseExit,this),this.popupWin.event.accept_gift.add(this.chooseAceptGift,this),this.popupWin.event.view_result.add(this.chooseViewResult,this),this.popupWin.x=35*oe.instance().scale,this.popupWin.y=game.height-964*oe.instance().scale,this.addChild(this.popupWin),this.scoreDiamond=dV.instance().dataMySeft.diamond,this.btnDiamond=new qn(this.positionPopup.tn_header_item_gem,this.scoreDiamond),this.addChild(this.btnDiamond),this.scoreTicket=dV.instance().dataMySeft.ticket,this.btnTicket=new qn(this.positionPopup.tn_header_item_ticket,this.scoreTicket),this.addChild(this.btnTicket),this.scoreSupportItem=dV.instance().dataMySeft.support_item,this.btnSupportItem=new qn(this.positionPopup.tn_header_item_mic,this.scoreSupportItem),this.addChild(this.btnSupportItem),this.addEvent()}},{key:"addEvent",value:function(){dV.instance().events.onUserVarsUpdate.add(this.onUserVarsUpdate,this)}},{key:"removeEvent",value:function(){dV.instance().events.onUserVarsUpdate.remove(this.onUserVarsUpdate,this)}},{key:"onUserVarsUpdate",value:function(){var e,t=this,n={score:0};this.scoreDiamond<dV.instance().dataMySeft.diamond?(game.tweens.removeFrom(this.btnDiamond),n.score=this.scoreDiamond,this.scoreDiamond=dV.instance().dataMySeft.diamond,console.log("scoreDiamond : "+this.scoreDiamond),(e=game.add.tween(n).to({score:dV.instance().dataMySeft.diamond},500,"Linear",!0,1e3)).start(),e.onUpdateCallback(function(){t.btnDiamond&&t.btnDiamond.setText(parseInt(n.score))},this),e.onComplete.add(function(){t.btnDiamond&&t.btnDiamond.setText(parseInt(t.scoreDiamond))},this),this.addCheckTweenMoney()):this.scoreTicket<dV.instance().dataMySeft.ticket?(game.tweens.removeFrom(this.btnTicket),n.score=this.scoreTicket,this.scoreTicket=dV.instance().dataMySeft.ticket,console.log("scoreTicket : "+this.scoreTicket),(e=game.add.tween(n).to({score:dV.instance().dataMySeft.ticket},500,"Linear",!0,1e3)).start(),e.onUpdateCallback(function(){t.btnTicket&&t.btnTicket.setText(parseInt(n.score))},this),e.onComplete.add(function(){t.btnTicket&&t.btnTicket.setText(parseInt(t.scoreTicket))},this),this.addCheckTweenMoney()):this.scoreSupportItem<dV.instance().dataMySeft.support_item&&(game.tweens.removeFrom(this.btnSupportItem),n.score=this.scoreSupportItem,this.scoreSupportItem=dV.instance().dataMySeft.support_item,console.log("scoreSupportItem : "+this.scoreSupportItem),(e=game.add.tween(n).to({score:dV.instance().dataMySeft.support_item},500,"Linear",!0,1e3)).start(),e.onUpdateCallback(function(){t.btnSupportItem&&t.btnSupportItem.setText(parseInt(n.score))},this),e.onComplete.add(function(){t.btnSupportItem&&t.btnSupportItem.setText(parseInt(t.scoreSupportItem))},this))}},{key:"chooseExit",value:function(){this.event.exit.dispatch(),jC.instance().removeAnimClaimReward(),this.removeShowResult(),this.removeCheckTweenMoney()}},{key:"chooseAceptGift",value:function(){this.idxGet++;var e={resourceType:"SUPPORT_ITEM",reward:0};1===this.idxGet?this.data.event_reward.diamond>0?(e.resourceType="DIAMOND",e.reward=this.data.event_reward.diamond,this.showGetMoney(e)):this.chooseAceptGift():2===this.idxGet?this.data.event_reward.ticket>0?(e.resourceType="TICKET",e.reward=this.data.event_reward.ticket,this.showGetMoney(e)):this.chooseAceptGift():3===this.idxGet?this.data.event_reward.support_item>0?(e.resourceType="SUPPORT_ITEM",e.reward=this.data.event_reward.support_item,this.showGetMoney(e)):this.chooseAceptGift():this.chooseExit()}},{key:"showGetMoney",value:function(e){var t=470*oe.instance().scale,n=45*oe.instance().scale,i="SUPPORT_ITEM";"DIAMOND"===e.resourceType?(i="DIAMOND",t=110*oe.instance().scale,n=45*oe.instance().scale):"TICKET"===e.resourceType?(i="TICKET",t=286*oe.instance().scale,n=45*oe.instance().scale):"SUPPORT_ITEM"===e.resourceType&&(i="SUPPORT_ITEM",t=500*oe.instance().scale,n=45*oe.instance().scale);var o={type:i,reward:e.reward,finishPoint:{x:t,y:n}};jC.instance().changeScreen(De.ANIM_CLAIM_REWARD,o),this.removeShowResult(),this.idShowResult=game.time.events.add(2*Phaser.Timer.SECOND,this.chooseAceptGift,this)}},{key:"removeShowResult",value:function(){null!==this.idShowResult&&(game.time.events.remove(this.idShowResult),this.idShowResult=null)}},{key:"addCheckTweenMoney",value:function(){this.removeCheckTweenMoney(),this.idTweenMoney=game.time.events.add(2*Phaser.Timer.SECOND,this.onUserVarsUpdate,this)}},{key:"removeCheckTweenMoney",value:function(){null!==this.idTweenMoney&&(game.time.events.remove(this.idTweenMoney),this.idTweenMoney=null)}},{key:"chooseViewResult",value:function(e){this.event.view_result.dispatch(e),jC.instance().removeAnimClaimReward(),this.removeShowResult(),this.removeCheckTweenMoney()}},{key:"destroy",value:function(){this.removeEvent(),this.removeShowResult(),this.removeCheckTweenMoney(),jC.instance().removeAnimClaimReward(),uZ(dZ(t.prototype),"destroy",this).call(this)}}])&&cZ(n.prototype,i),o&&cZ(n,o),t}();function gZ(e){return(gZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mZ(e,t){return!t||"object"!==gZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vZ(e,t,n){return(vZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wZ(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wZ(e){return(wZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bZ(e,t){return(bZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _Z=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=mZ(this,wZ(t).call(this,game,null))).event={back:new Phaser.Signal},e.startTime=0,e.endTime=0,e.ktshowBadConnection=!1,e.dataEventRoom=new At,e.queueScreen=null,e.selectRoomScreen=null,e.rankingScreen=null,e.playRoomScreen=null,e.dialogWin=null,e.screenBegin="",e.popupTop100=null,e.checkJoinRoom=!1,e.ktPlay=!1,e.arrResource=[{type:"atlas",link:"img/atlas/eventmode.png",key:"eventmode",linkJson:"img/atlas/eventmode.json"},{type:"text",link:"img/config/positionEventMode.json",key:"positionEventMode"}],e.loadResource(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bZ(e,t)}(t,Em),n=t,(i=[{key:"loadFileComplete",value:function(){vZ(wZ(t.prototype),"loadFileComplete",this).call(this),this.addSelectRoomScreen(),this.addEvent()}},{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),dV.instance().events.onRoomJoin.add(this.joinRoom,this),Qe.instance().event.bad_connection.add(this.checkBadConnection,this),Qe.instance().event.chooseExitBadConnection.add(this.chooseExitBadConnection,this)}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this),dV.instance().events.onRoomJoin.remove(this.joinRoom,this),Qe.instance().event.bad_connection.remove(this.checkBadConnection,this),Qe.instance().event.chooseExitBadConnection.remove(this.chooseExitBadConnection,this)}},{key:"checkBadConnection",value:function(){!1===this.ktPlay&&!1===this.ktshowBadConnection&&null!==this.queueScreen&&(this.ktshowBadConnection=!0,jC.instance().addBadConnection())}},{key:"chooseExitBadConnection",value:function(){null!==this.queueScreen?this.queueScreen.chooseBack():this.chooseBack()}},{key:"getData",value:function(e){var t=0;switch(e.cmd){case nj.EVENT_MODE_START_GAME:this.ktPlay=!0,this.startTime=this.getTime();break;case nj.EVENT_MODE_QUESTION_RESPONSE:this.ktPlay=!0;break;case nj.EVENT_MODE_FINISH_GAME:this.ktPlay=!1,this.endTime=this.getTime(),t=parseInt((this.endTime-this.startTime)/1e3),He.instance().logEvent(He.play_time,t),He.instance().logEvent(He.pro_quiz_end_eventmode),rl.instance().removeSound(),game.time.events.add(2*Phaser.Timer.SECOND,this.addDialogFinishGame,this,e.params.getInt(YC.question_index));break;case nj.EVENT_MODE_DONE_GAME:this.endTime=this.getTime(),t=parseInt((this.endTime-this.startTime)/1e3),He.instance().logEvent(He.play_time,t),He.instance().logEvent(He.pro_quiz_end_eventmode),game.time.events.add(2*Phaser.Timer.SECOND,this.addDialogDoneGame,this),rl.instance().removeSound();break;case nj.EVENT_MODE_REWARD_NOTIFICATION:rl.instance().removeSound(),game.time.events.add(.2*Phaser.Timer.SECOND,this.addDialogTop100,this,$F.begin(e.params));break;case nj.EVENT_MODE_EVENT_ENDED:rl.instance().removeSound(),game.time.events.add(.4*Phaser.Timer.SECOND,this.addDialogEndGame,this)}}},{key:"joinRoom",value:function(e){LogConsole.log("data.room.isGame : "+e.room.isGame),e.room.isGame?this.checkJoinRoom=!0:this.addSelectRoomScreen()}},{key:"addEventScreen",value:function(){null!==this.rankingScreen&&this.rankingScreen.addEvent(),null!==this.playRoomScreen&&this.playRoomScreen.addEvent(),null!==this.selectRoomScreen&&this.selectRoomScreen.addEvent(),null!==this.queueScreen&&this.queueScreen.addEvent(this.checkJoinRoom)}},{key:"tweenCompleteQueueScreen",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenCompleteQueueScreen,this),this.removeQueueScreen(),this.addEventScreen()}},{key:"tweenCompleteSelectRoomScreen",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenCompleteSelectRoomScreen,this),this.removeSelectRoomScreen(),this.addEventScreen()}},{key:"tweenCompleteRankingScreen",value:function(){Ch.instance().event.tweenComplete.remove(this.tweenCompleteRankingScreen,this),this.removeRankingScreen(),this.addEventScreen()}},{key:"addSelectRoomScreen",value:function(){this.screenBegin="selectroom",this.removeSelectRoomScreen(),this.checkJoinRoom=!1,this.selectRoomScreen=new TU,this.selectRoomScreen.event.view_history.add(this.addRankingScreen,this),this.selectRoomScreen.event.choose_event.add(this.addQueueScreen,this),this.selectRoomScreen.event.back.add(this.chooseBack,this),this.addChild(this.selectRoomScreen),LogConsole.log("this.queueScreen : "+this.queueScreen),null!==this.queueScreen?(Ch.instance().beginSwitch(this.queueScreen,this.selectRoomScreen,!0),Ch.instance().event.tweenComplete.add(this.tweenCompleteQueueScreen,this)):null!==this.rankingScreen?(this.removeRankingScreen(),this.selectRoomScreen.addEvent()):this.selectRoomScreen.addEvent()}},{key:"removeSelectRoomScreen",value:function(){null!==this.selectRoomScreen&&(this.removeChild(this.selectRoomScreen),this.selectRoomScreen.destroy(),this.selectRoomScreen=null)}},{key:"addQueueScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.screenBegin="queue",this.dataEventRoom=Object.assign({},this.dataEventRoom,e),this.removeQueueScreen(),this.queueScreen=new hU(this.dataEventRoom),this.queueScreen.event.ranking.add(this.addRankingScreen,this),this.queueScreen.event.back.add(this.addSelectRoomScreen,this),this.queueScreen.event.play_room.add(this.addPlayRoomScreen,this),this.addChild(this.queueScreen),null!==this.selectRoomScreen?(Ch.instance().beginSwitch(this.selectRoomScreen,this.queueScreen,!1),Ch.instance().event.tweenComplete.add(this.tweenCompleteSelectRoomScreen,this)):null!==this.rankingScreen?(Ch.instance().beginSwitch(this.rankingScreen,this.queueScreen,!0),Ch.instance().event.tweenComplete.add(this.tweenCompleteRankingScreen,this)):null!==this.playRoomScreen?(this.removePlayRoomScreen(),this.queueScreen.addEvent(this.checkJoinRoom)):this.queueScreen.addEvent(this.checkJoinRoom)}},{key:"joinRoomQueue",value:function(){this.checkJoinRoom=!0}},{key:"removeQueueScreen",value:function(){null!==this.queueScreen&&(this.removeChild(this.queueScreen),this.queueScreen.destroy(),this.queueScreen=null)}},{key:"addRankingScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e>0&&(this.event_id=e),this.removeRankingScreen(),this.rankingScreen=new eF(this.event_id),this.rankingScreen.event.back.add(this.chooseBackTop,this),this.addChild(this.rankingScreen),null!==this.queueScreen?(Ch.instance().beginSwitch(this.queueScreen,this.rankingScreen,!1),Ch.instance().event.tweenComplete.add(this.tweenCompleteQueueScreen,this)):null!==this.selectRoomScreen?(this.removeSelectRoomScreen(),this.rankingScreen.addEvent()):null!==this.playRoomScreen?(this.removePlayRoomScreen(),this.rankingScreen.addEvent()):this.rankingScreen.addEvent()}},{key:"chooseBackTop",value:function(){"selectroom"===this.screenBegin?this.addSelectRoomScreen():"queue"===this.screenBegin?this.addQueueScreen():"play"===this.screenBegin&&this.addPlayRoomScreen()}},{key:"removeRankingScreen",value:function(){null!==this.rankingScreen&&(this.removeChild(this.rankingScreen),this.rankingScreen.destroy(),this.rankingScreen=null)}},{key:"addPlayRoomScreen",value:function(){this.screenBegin="play",this.removePlayRoomScreen(),this.playRoomScreen=new OF(this.dataEventRoom),this.playRoomScreen.event.backToSelect.add(this.addSelectRoomScreen,this),this.playRoomScreen.event.end_game.add(this.addDialogFinishGameUser,this),this.playRoomScreen.event.done_game.add(this.addDialogDoneGameUser,this),this.playRoomScreen.event.cancle_bad_connect.add(this.addQueueScreen,this),this.addChild(this.playRoomScreen),null!==this.queueScreen?(Ch.instance().beginSwitch(this.queueScreen,this.playRoomScreen,!1),Ch.instance().event.tweenComplete.add(this.tweenCompleteQueueScreen,this)):this.playRoomScreen.addEvent()}},{key:"addDialogFinishGameUser",value:function(e){this.ktPlay=!1,this.endTime=this.getTime();var t=parseInt((this.endTime-this.startTime)/1e3);He.instance().logEvent(He.play_time,t),He.instance().logEvent(He.pro_quiz_end_eventmode),rl.instance().removeSound(),game.time.events.add(2*Phaser.Timer.SECOND,this.addDialogFinishGame,this,e)}},{key:"addDialogDoneGameUser",value:function(){this.endTime=this.getTime();var e=parseInt((this.endTime-this.startTime)/1e3);He.instance().logEvent(He.play_time,e),He.instance().logEvent(He.pro_quiz_end_eventmode),game.time.events.add(2*Phaser.Timer.SECOND,this.addDialogDoneGame,this),rl.instance().removeSound()}},{key:"removePlayRoomScreen",value:function(){null!==this.playRoomScreen&&(this.removeChild(this.playRoomScreen),this.playRoomScreen.destroy(),this.playRoomScreen=null)}},{key:"addDialogDoneGame",value:function(){this.removePlayRoomScreen(),this.removeDialogFinishGame(),this.dialogWin=new XF(this.dataEventRoom),this.dialogWin.event.exit.add(this.chooseExitDialog,this),this.addChild(this.dialogWin)}},{key:"removeDialogDoneGame",value:function(){}},{key:"addDialogFinishGame",value:function(e){this.removePlayRoomScreen(),this.removeDialogFinishGame(),this.dialogWin=new jF(e,this.dataEventRoom),this.dialogWin.event.exit.add(this.chooseExitDialog,this),this.dialogWin.event.continute.add(this.chooseContinuteDialog,this),this.addChild(this.dialogWin)}},{key:"chooseExitDialog",value:function(){LogConsole.log("chooseExitDialog"),this.removeDialogFinishGame(),this.addQueueScreen()}},{key:"chooseContinuteDialog",value:function(){LogConsole.log("chooseContinuteDialog"),this.removeDialogFinishGame(),this.addPlayRoomScreen()}},{key:"removeDialogFinishGame",value:function(){null!==this.dialogWin&&(this.removeChild(this.dialogWin),this.dialogWin.destroy(),this.dialogWin=null)}},{key:"addDialogTop100",value:function(e){this.removeDialogTop100(),this.popupTop100=new pZ(e),this.popupTop100.event.exit.add(this.removeDialogTop100,this),this.popupTop100.event.view_result.add(this.addRankingScreen,this),this.popupTop100.event.accept_gift.add(this.removeDialogTop100,this),this.addChild(this.popupTop100)}},{key:"removeDialogTop100",value:function(){null!==this.popupTop100&&(this.removeChild(this.popupTop100),this.popupTop100.destroy(),this.popupTop100=null)}},{key:"addDialogEndGame",value:function(){this.removeDialogFinishGame(),this.addSelectRoomScreen(),jC.instance().addDialog(de.instance().getData("27"))}},{key:"chooseBack",value:function(){FH.instance().changeScreen(De.MAIN_MENU)}},{key:"destroy",value:function(){oe.instance().positionEventModeData=null,this.removeEvent(),vZ(wZ(t.prototype),"destroy",this).call(this)}}])&&yZ(n.prototype,i),o&&yZ(n,o),t}();function SZ(e){return(SZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function CZ(e,t,n){return(CZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kZ(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kZ(e){return(kZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PZ(e,t){return(PZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var RZ=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(i=kZ(t).call(this,game,null))||"object"!==SZ(i)&&"function"!=typeof i?OZ(n):i).event={back:new Phaser.Signal,help:new Phaser.Signal},e.positionRanking=oe.instance().positionRanking,e.bg=new Bt(e.positionRanking.header_bg),e.addChild(e.bg),e.txtTitle=new Qt(e.positionRanking.header_text_title,de.instance().getData("125")),e.txtTitle.setTextBounds(0,0,game.width,31*oe.instance().scale),e.addChild(e.txtTitle),e.btnBack=new _n(e.positionRanking.header_button_back,e.chooseBack,OZ(OZ(e))),e.addChild(e.btnBack),e.btnHelp=new _n(e.positionRanking.header_button_help,e.chooseHelp,OZ(OZ(e))),e.addChild(e.btnHelp),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PZ(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){Qe.instance().event.backButton.add(this.chooseBack,this)}},{key:"removeEvent",value:function(){Qe.instance().event.backButton.remove(this.chooseBack,this)}},{key:"chooseBack",value:function(){this.btnBack.inputEnabled=!1,this.event.back.dispatch()}},{key:"chooseHelp",value:function(){this.event.help.dispatch()}},{key:"destroy",value:function(){this.removeEvent(),CZ(kZ(t.prototype),"destroy",this).call(this)}}])&&EZ(n.prototype,i),o&&EZ(n,o),t}();function xZ(e){return(xZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function IZ(e){return(IZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AZ(e,t){return(AZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var DZ=function(e){function t(e,n){var i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=IZ(t).call(this,game,null))||"object"!==xZ(a)&&"function"!=typeof a?LZ(o):a).event={choose_item:new Phaser.Signal},i.idx=n,i.positionRanking=oe.instance().positionRanking,i.bg=new _n(i.positionRanking.menu_item_active,i.chooseButton,LZ(LZ(i))),i.bg.x=0,i.bg.y=0,i.bg.alpha=0,i.bg.height=100*oe.instance().scale,i.addChild(i.bg),i.txtContent=new Qt(i.positionRanking.menu_item_text_content,e),i.bg.width=i.txtContent.width+71*oe.instance().scale,i.txtContent.x=(i.bg.width-i.txtContent.width)/2,i.txtContent.y=(i.bg.height-i.txtContent.height)/2,i.addChild(i.txtContent),i.lineActive=new Bt(i.positionRanking.menu_item_active),i.lineActive.width=i.bg.width,i.addChild(i.lineActive),i.lineDoc=new Bt(i.positionRanking.menu_item_line_doc),i.lineDoc.x=i.bg.width-i.lineDoc.width,i.lineDoc.y=(i.bg.height-i.lineDoc.height)/2,i.addChild(i.lineDoc),i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AZ(e,t)}(t,Je),n=t,(i=[{key:"hideLineDoc",value:function(){this.lineDoc.visible=!1}},{key:"active",value:function(){this.lineActive.visible=!0,this.txtContent.changeStyle({fill:"#ffffff"})}},{key:"deactive",value:function(){this.lineActive.visible=!1,this.txtContent.changeStyle({fill:"#695782"})}},{key:"chooseButton",value:function(){this.event.choose_item.dispatch(this.idx)}},{key:"getIdx",value:function(){return this.idx}},{key:"width",get:function(){return this.bg.width}},{key:"height",get:function(){return this.bg.height}}])&&TZ(n.prototype,i),o&&TZ(n,o),t}();function GZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var MZ=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"RANKING_LEVEL_LOAD_REQUEST",get:function(){return"RANKING_LEVEL_LOAD_REQUEST"}},{key:"RANKING_LEVEL_LOAD_RESPONSE",get:function(){return"RANKING_LEVEL_LOAD_RESPONSE"}},{key:"RANKING_DIAMOND_LOAD_REQUEST",get:function(){return"RANKING_DIAMOND_LOAD_REQUEST"}},{key:"RANKING_DIAMOND_LOAD_RESPONSE",get:function(){return"RANKING_DIAMOND_LOAD_RESPONSE"}},{key:"RANKING_TURNBASE_LOAD_REQUEST",get:function(){return"RANKING_TURNBASE_LOAD_REQUEST"}},{key:"RANKING_TURNBASE_LOAD_RESPONSE",get:function(){return"RANKING_TURNBASE_LOAD_RESPONSE"}},{key:"RANKING_ONLINE_LOAD_REQUEST",get:function(){return"RANKING_ONLINE_LOAD_REQUEST"}},{key:"RANKING_ONLINE_LOAD_RESPONSE",get:function(){return"RANKING_ONLINE_LOAD_RESPONSE"}},{key:"RANKING_PLAYLIST_COLLECTION_REQUEST",get:function(){return"RANKING_PLAYLIST_COLLECTION_REQUEST"}},{key:"RANKING_PLAYLIST_COLLECTION_RESPONSE",get:function(){return"RANKING_PLAYLIST_COLLECTION_RESPONSE"}}],(n=null)&&GZ(t.prototype,n),i&&GZ(t,i),e}();function NZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var BZ=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"position",get:function(){return"position"}},{key:"top_users",get:function(){return"top_users"}},{key:"diamond",get:function(){return"diamond"}},{key:"user_name",get:function(){return"user_name"}},{key:"created",get:function(){return"created"}},{key:"active",get:function(){return"active"}},{key:"id",get:function(){return"id"}},{key:"avatar",get:function(){return"avatar"}},{key:"updated",get:function(){return"updated"}},{key:"status",get:function(){return"status"}},{key:"level",get:function(){return"level"}},{key:"experience_score",get:function(){return"experience_score"}},{key:"gender",get:function(){return"gender"}},{key:"all_time_high_score",get:function(){return"all_time_high_score"}},{key:"last_login",get:function(){return"last_login"}},{key:"weekly_high_score",get:function(){return"weekly_high_score"}},{key:"count_win",get:function(){return"count_win"}},{key:"rank",get:function(){return"rank"}},{key:"playlist_number",get:function(){return"playlist_number"}},{key:"vip",get:function(){return"vip"}}],(n=null)&&NZ(t.prototype,n),i&&NZ(t,i),e}();var jZ=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.diamond=0,this.user_name="",this.created=0,this.active=0,this.id=0,this.avatar="",this.updated=0,this.level=0,this.experience_score=0,this.playlist_number=0,this.vip=!1};function UZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var FZ=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){for(var t={position:-1,top_users:[]},n=e.getSFSArray(BZ.top_users),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=new jZ;a.user_name=o.getUtfString(BZ.user_name),a.created=o.getLong(BZ.created),a.active=o.getInt(BZ.active),a.id=o.getInt(BZ.id),a.avatar=o.getUtfString(BZ.avatar),a.updated=o.getLong(BZ.updated),o.containsKey(BZ.diamond)&&(a.diamond=o.getInt(BZ.diamond)),o.containsKey(BZ.level)&&(a.level=o.getInt(BZ.level)),o.containsKey(BZ.experience_score)&&(a.experience_score=o.getInt(BZ.experience_score)),o.containsKey(BZ.vip)&&(a.vip=o.getBool(BZ.vip)),t.top_users.push(a)}return t.position=e.getLong(BZ.position),t}}],(n=null)&&UZ(t.prototype,n),i&&UZ(t,i),e}();function ZZ(e){return(ZZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HZ(e,t,n){return(HZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VZ(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function VZ(e){return(VZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WZ(e,t,n){return t&&QZ(e.prototype,t),n&&QZ(e,n),e}function qZ(e,t){return(qZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var zZ=function(e){function t(e,n,i){var o,a,s,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(o=!(s=VZ(t).call(this,game,null))||"object"!==ZZ(s)&&"function"!=typeof s?KZ(a):s).data=e,o.positionRanking=JSON.parse(game.cache.getText("positionRanking"));var l=0;if(l=i===GH.TOP_DIAMOND?t.DIAMOND:t.LEVEL,o.tween=null,o.idx=n,o.ava=new zc,o.ava.setSize(65*oe.instance().scale,65*oe.instance().scale),o.ava.x=149*oe.instance().scale,o.ava.y=32*oe.instance().scale,o.btnMaskAva=new Phaser.Button(game,o.ava.x,o.ava.y,null,o.chooseAva,KZ(KZ(o))),o.btnMaskAva.width=o.ava.width,o.btnMaskAva.height=o.ava.height,o.addChild(o.btnMaskAva),0===n?(o.bg=new Bt(o.positionRanking.item_ranking_bg_top1),o.addChild(o.bg),o.addChild(o.ava),o.bgTopAvata=new Bt(o.positionRanking.item_ranking_avatar_top1)):1===n?(o.bg=new Bt(o.positionRanking.item_ranking_bg_top2),o.addChild(o.bg),o.addChild(o.ava),o.bgTopAvata=new Bt(o.positionRanking.item_ranking_avatar_top2)):2===n?(o.bg=new Bt(o.positionRanking.item_ranking_bg_top3),o.addChild(o.bg),o.addChild(o.ava),o.bgTopAvata=new Bt(o.positionRanking.item_ranking_avatar_top3)):(o.addChild(o.ava),o.ava.x=137*oe.instance().scale,o.ava.y=27*oe.instance().scale,o.bgTopAvata=new Bt(o.positionRanking.item_ranking_avatar_top4),o.line=new Bt(o.positionRanking.item_ranking_line_space),o.addChild(o.line)),o.addChild(o.bgTopAvata),n<3?(o.txtStt=new Qt(o.positionRanking.item_ranking_text_top123,n+1),o.txtStt.setTextBounds(0,0,28*oe.instance().scale,27*oe.instance().scale),o.txtUserName=new Qt(o.positionRanking.item_ranking_text_user_name123,o.formatName(e.user_name,15))):(o.txtStt=new Qt(o.positionRanking.item_ranking_text_top4,n+1),o.txtUserName=new Qt(o.positionRanking.item_ranking_text_user_name4,o.formatName(e.user_name,15))),l===t.DIAMOND)o.btnDiamond=new qn(n<3?o.positionRanking.item_ranking_btn_level_top:o.positionRanking.item_ranking_btn_level_top4,e.playlist_number),o.addChild(o.btnDiamond),o.txtUserName.setTextBounds(0,0,219*oe.instance().scale,60*oe.instance().scale);else{var c="";i===GH.TOP_LEVEL&&(c=e.level),i!==GH.TOP_TURNBASE&&i!==GH.TOP_ONLINEMODE||(c=e.count_win),console.log("str : "+c),o.btnLevel=new qn(n<3?o.positionRanking.item_ranking_btn_level_top:o.positionRanking.item_ranking_btn_level_top4,c),o.addChild(o.btnLevel),o.txtUserName.setTextBounds(0,0,284*oe.instance().scale,60*oe.instance().scale)}if(o.addChild(o.txtStt),o.addChild(o.txtUserName),r?o.ava.setAvatar(e.avatar,0):o.ava.setAvatar(e.avatar,n),n<3){if(!0===o.data.vip){var h=new Phaser.Image(game,147,83,"vipSource","Label_VIP");h.anchor.set(.5),o.bgTopAvata.addChild(h)}}else if(!0===o.data.vip){var u=new Phaser.Image(game,138,68,"vipSource","Label_VIP");u.anchor.set(.5),o.bgTopAvata.addChild(u)}return!0===r||(n<8?(o.x=game.width,o.tween=game.add.tween(KZ(KZ(o))).to({x:0},250,Phaser.Easing.Power1,!0,80*(n+1))):o.x=0),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qZ(e,t)}(t,Je),WZ(t,null,[{key:"DIAMOND",get:function(){return 0}},{key:"LEVEL",get:function(){return 1}}]),WZ(t,[{key:"chooseAva",value:function(){console.log("clickAva"),jC.instance().addUserProfile(this.data.id)}},{key:"removeTween",value:function(){null!==this.tween&&(this.tween.stop(),game.tweens.remove(this.tween),this.tween=null)}},{key:"destroy",value:function(){this.removeTween(),HZ(VZ(t.prototype),"destroy",this).call(this)}},{key:"width",get:function(){return game.width}},{key:"height",get:function(){return this.idx<3?145*oe.instance().scale:127*oe.instance().scale}}]),t}();function YZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var XZ=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e,t){var n=new SFS2X.SFSObject;return n.putInt("from_idx",e),n.putInt("to_idx",t),n}}],(n=null)&&YZ(t.prototype,n),i&&YZ(t,i),e}();function JZ(e){return(JZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $Z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eH(e,t){return!t||"object"!==JZ(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tH(e,t,n){return(tH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nH(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function nH(e){return(nH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iH(e,t){return(iH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oH=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=eH(this,nH(t).call(this,game,null)),ht.instance().showLoading(),e.event={add_item:new Phaser.Signal},e.ktBuild=!1,e.ktLoadMore=!1,e.positionRanking=JSON.parse(game.cache.getText("positionRanking")),e.positionMe=-1,e.playlist_number=0,e.arrRanking=[],e.idDelay=null,e.idx=0,e.idxItem=1,e.countItem=0,e.rankMe=null,e.bgRankMe=new Bt(e.positionRanking.item_ranking_bg_rank_me),e.bgRankMe.y=game.height-110*oe.instance().scale,e.addChild(e.bgRankMe),e.txtError=new Qt(e.positionRanking.item_ranking_txt_error,de.instance().getData("126")),e.txtError.setTextBounds(0,0,game.width,38*oe.instance().scale),e.txtError.y=game.height-76*oe.instance().scale,e.addChild(e.txtError),e.txtError.visible=!1,He.instance().logEvent(He.Ranking_level),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iH(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),this.arrRanking=[],this.removeDelayBuild(),this.idx=0,this.countItem=0,this.sendGetDataServer()}},{key:"sendGetDataServer",value:function(){if(this.idxItem<100){ht.instance().showLoading();var e=this.idxItem,t=this.idxItem+9;t>100&&(t=100),dV.instance().sendData(MZ.RANKING_LEVEL_LOAD_REQUEST,XZ.begin(e,t))}}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case MZ.RANKING_LEVEL_LOAD_RESPONSE:for(var t=FZ.begin(e.params),n=0;n<t.top_users.length;n++)this.arrRanking.push(t.top_users[n]);this.idxItem=this.arrRanking.length+1,-1===this.positionMe&&(this.positionMe=t.position.rank),this.ktLoadMore=!1,this.buildListRanking()}}},{key:"removeRankMe",value:function(){null!==this.rankMe&&(this.removeChild(this.rankMe),this.rankMe.destroy(),this.rankMe=null)}},{key:"buildListRanking",value:function(){if(this.positionMe>-1){if(this.txtError.visible=!1,null===this.rankMe){var e=new jZ;e.id=dV.instance().dataMySeft.id,e.user_name=dV.instance().dataMySeft.user_name,e.avatar=dV.instance().dataMySeft.avatar,e.diamond=dV.instance().dataMySeft.diamond,e.level=dV.instance().dataMySeft.level,e.vip=dV.instance().dataMySeft.vip,this.rankMe=new zZ(e,this.positionMe-1,GH.TOP_LEVEL,!0),this.rankMe.x=0,this.rankMe.y=game.height-108*oe.instance().scale,this.addChild(this.rankMe)}}else this.txtError.visible=!0;this.buildItemPage(),game.time.events.add(1e3,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"changeIndex",value:function(e){e===this.arrRanking.length-1?!1===this.ktBuild&&(this.ktBuild=!0,this.ktLoadMore=!0):this.countItem===e+1&&!1===this.ktBuild&&this.buildItemPage()}},{key:"checkLoadMore",value:function(){!0===this.ktLoadMore?(this.ktLoadMore=!1,this.sendGetDataServer()):ht.instance().hideLoading()}},{key:"buildItemPage",value:function(){this.ktBuild=!0;for(var e=this.idx;e<this.arrRanking.length;e++){var t=new zZ(this.arrRanking[e],e,GH.TOP_LEVEL);if(this.event.add_item.dispatch(t),this.idx++,this.countItem++,this.countItem%10==0&&this.idx<this.arrRanking.length){this.ktBuild=!1;break}this.idx===this.arrRanking.length&&(this.ktBuild=!1)}}},{key:"removeDelayBuild",value:function(){null!==this.idDelay&&(game.time.events.remove(this.idDelay),this.idDelay=null)}},{key:"kill",value:function(){tH(nH(t.prototype),"kill",this).call(this)}},{key:"revive",value:function(){ht.instance().showLoading(),tH(nH(t.prototype),"revive",this).call(this),this.removeDelayBuild(),this.idx=0,this.countItem=0,this.buildListRanking()}},{key:"destroy",value:function(){rn.instance().resetLoad(),this.removeDelayBuild(),this.removeEvent(),tH(nH(t.prototype),"destroy",this).call(this)}}])&&$Z(n.prototype,i),o&&$Z(n,o),t}();var aH=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gender="",this.level=0,this.user_name="",this.all_time_high_score=0,this.last_login=0,this.weekly_high_score=0,this.id=0,this.avatar="",this.count_win=0,this.playlist_number=0,this.vip=!1};function sH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var rH=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){for(var t={position:{rank:-1,count_win:0,playlist_number:0},top_users:[]},n=e.getSFSArray(BZ.top_users),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=new aH;a.gender=o.getUtfString(BZ.gender),a.level=o.getInt(BZ.level),a.user_name=o.getUtfString(BZ.user_name),a.all_time_high_score=o.getInt(BZ.all_time_high_score),a.last_login=o.getLong(BZ.last_login),a.weekly_high_score=o.getInt(BZ.weekly_high_score),a.id=o.getInt(BZ.id),a.avatar=o.getUtfString(BZ.avatar),a.count_win=o.getLong(BZ.count_win),a.vip=o.getBool(BZ.vip),o.containsKey(BZ.playlist_number)&&(a.playlist_number=o.getLong(BZ.playlist_number)),t.top_users.push(a)}if(e.containsKey(BZ.position)){var s=e.getSFSObject(BZ.position);s.containsKey(BZ.rank)&&(t.position.rank=s.getInt(BZ.rank),s.containsKey(BZ.playlist_number)?t.position.playlist_number=s.getLong(BZ.playlist_number):t.position.count_win=s.getLong(BZ.count_win))}return t}},{key:"compareCountWin",value:function(e,t){return e.count_win>t.count_win?-1:e.count_win<t.count_win?1:0}}],(n=null)&&sH(t.prototype,n),i&&sH(t,i),e}();function lH(e){return(lH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hH(e,t){return!t||"object"!==lH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uH(e,t,n){return(uH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dH(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function dH(e){return(dH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fH(e,t){return(fH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pH=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=hH(this,dH(t).call(this,game,null)),ht.instance().showLoading(),e.event={add_item:new Phaser.Signal},e.ktLoadMore=!1,e.ktBuild=!1,e.positionRanking=oe.instance().positionRanking,e.positionMe=-1,e.playlist_number=0,e.arrRanking=[],e.idDelay=null,e.idx=0,e.idxItem=1,e.countItem=0,e.rankMe=null,e.bgRankMe=new Bt(e.positionRanking.item_ranking_bg_rank_me),e.bgRankMe.y=game.height-110*oe.instance().scale,e.addChild(e.bgRankMe),e.txtError=new Qt(e.positionRanking.item_ranking_txt_error,de.instance().getData("126")),e.txtError.setTextBounds(0,0,game.width,38*oe.instance().scale),e.txtError.y=game.height-76*oe.instance().scale,e.addChild(e.txtError),e.txtError.visible=!1,He.instance().logEvent(He.Ranking_diamond),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fH(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),this.arrRanking=[],this.removeDelayBuild(),this.idx=0,this.countItem=0,this.sendGetDataServer()}},{key:"sendGetDataServer",value:function(){if(this.idxItem<100){ht.instance().showLoading();var e=this.idxItem,t=this.idxItem+9;t>100&&(t=100),dV.instance().sendData(MZ.RANKING_PLAYLIST_COLLECTION_REQUEST,XZ.begin(e,t))}}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case MZ.RANKING_PLAYLIST_COLLECTION_RESPONSE:for(var t=rH.begin(e.params),n=0;n<t.top_users.length;n++)this.arrRanking.push(t.top_users[n]);this.idxItem=this.arrRanking.length+1,-1===this.positionMe&&(this.positionMe=t.position.rank,this.playlist_number=t.position.playlist_number),this.ktLoadMore=!1,this.buildListRanking()}}},{key:"removeRankMe",value:function(){null!==this.rankMe&&(this.removeChild(this.rankMe),this.rankMe.destroy(),this.rankMe=null)}},{key:"buildListRanking",value:function(){if(this.positionMe>-1){if(this.txtError.visible=!1,null===this.rankMe){var e=new jZ;e.id=dV.instance().dataMySeft.id,e.user_name=dV.instance().dataMySeft.user_name,e.avatar=dV.instance().dataMySeft.avatar,e.playlist_number=this.playlist_number,this.rankMe=new zZ(e,this.positionMe-1,GH.TOP_DIAMOND,!0),this.rankMe.x=0,this.rankMe.y=game.height-108*oe.instance().scale,this.addChild(this.rankMe)}}else this.txtError.visible=!0;this.buildItemPage(),game.time.events.add(1e3,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"changeIndex",value:function(e){e===this.arrRanking.length-1?!1===this.ktBuild&&(this.ktBuild=!0,this.ktLoadMore=!0):this.countItem===e+1&&!1===this.ktBuild&&this.buildItemPage()}},{key:"checkLoadMore",value:function(){!0===this.ktLoadMore?(this.ktLoadMore=!1,this.sendGetDataServer()):ht.instance().hideLoading()}},{key:"buildItemPage",value:function(){this.ktBuild=!0;for(var e=this.idx;e<this.arrRanking.length;e++){var t=new zZ(this.arrRanking[e],e,GH.TOP_DIAMOND);if(this.event.add_item.dispatch(t),this.idx++,this.countItem++,this.countItem%10==0&&this.idx<this.arrRanking.length){this.ktBuild=!1;break}this.idx===this.arrRanking.length&&(this.ktBuild=!1)}}},{key:"removeDelayBuild",value:function(){null!==this.idDelay&&(game.time.events.remove(this.idDelay),this.idDelay=null)}},{key:"kill",value:function(){uH(dH(t.prototype),"kill",this).call(this)}},{key:"revive",value:function(){ht.instance().showLoading(),uH(dH(t.prototype),"revive",this).call(this),this.removeDelayBuild(),this.idx=0,this.countItem=0,this.buildListRanking()}},{key:"destroy",value:function(){rn.instance().resetLoad(),this.removeDelayBuild(),this.removeEvent(),uH(dH(t.prototype),"destroy",this).call(this)}}])&&cH(n.prototype,i),o&&cH(n,o),t}();function gH(e){return(gH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function mH(e,t){return!t||"object"!==gH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vH(e,t,n){return(vH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wH(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wH(e){return(wH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bH(e,t){return(bH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _H=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=mH(this,wH(t).call(this,game,null)),ht.instance().showLoading(),e.event={add_item:new Phaser.Signal},e.ktBuild=!1,e.ktLoadMore=!1,e.positionRanking=JSON.parse(game.cache.getText("positionRanking")),e.positionMe=-1,e.playlist_number=0,e.arrRanking=[],e.idDelay=null,e.idx=0,e.idxItem=1,e.countItem=0,e.rankMe=null,e.bgRankMe=new Bt(e.positionRanking.item_ranking_bg_rank_me),e.bgRankMe.y=game.height-110*oe.instance().scale,e.addChild(e.bgRankMe),e.txtError=new Qt(e.positionRanking.item_ranking_txt_error,de.instance().getData("126")),e.txtError.setTextBounds(0,0,game.width,38*oe.instance().scale),e.txtError.y=game.height-76*oe.instance().scale,e.addChild(e.txtError),e.txtError.visible=!1,He.instance().logEvent(He.Ranking_turnbase),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bH(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),this.arrRanking=[],this.removeDelayBuild(),this.idx=0,this.countItem=0,this.sendGetDataServer()}},{key:"sendGetDataServer",value:function(){if(this.idxItem<100){ht.instance().showLoading();var e=this.idxItem,t=this.idxItem+9;t>100&&(t=100),dV.instance().sendData(MZ.RANKING_TURNBASE_LOAD_REQUEST,XZ.begin(e,t))}}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case MZ.RANKING_TURNBASE_LOAD_RESPONSE:for(var t=rH.begin(e.params),n=0;n<t.top_users.length;n++)this.arrRanking.push(t.top_users[n]);this.idxItem=this.arrRanking.length+1,-1===this.positionMe&&(this.positionMe=t.position.rank,this.playlist_number=t.position.count_win),this.ktLoadMore=!1,this.buildListRanking()}}},{key:"removeRankMe",value:function(){null!==this.rankMe&&(this.removeChild(this.rankMe),this.rankMe.destroy(),this.rankMe=null)}},{key:"buildListRanking",value:function(){if(this.positionMe>-1){if(this.txtError.visible=!1,null===this.rankMe){var e=new aH;e.id=dV.instance().dataMySeft.id,e.user_name=dV.instance().dataMySeft.user_name,e.avatar=dV.instance().dataMySeft.avatar,e.count_win=this.playlist_number,this.rankMe=new zZ(e,this.positionMe-1,GH.TOP_TURNBASE,!0),this.rankMe.x=0,this.rankMe.y=game.height-108*oe.instance().scale,this.addChild(this.rankMe)}}else this.txtError.visible=!0;this.buildItemPage(),game.time.events.add(1e3,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"changeIndex",value:function(e){e===this.arrRanking.length-1?!1===this.ktBuild&&(this.ktBuild=!0,this.ktLoadMore=!0):this.countItem===e+1&&!1===this.ktBuild&&this.buildItemPage()}},{key:"checkLoadMore",value:function(){!0===this.ktLoadMore?(this.ktLoadMore=!1,this.sendGetDataServer()):ht.instance().hideLoading()}},{key:"buildItemPage",value:function(){this.ktBuild=!0;for(var e=this.idx;e<this.arrRanking.length;e++){var t=new zZ(this.arrRanking[e],e,GH.TOP_TURNBASE);if(this.event.add_item.dispatch(t),this.idx++,this.countItem++,this.countItem%10==0&&this.idx<this.arrRanking.length){this.ktBuild=!1;break}this.idx===this.arrRanking.length&&(this.ktBuild=!1)}}},{key:"removeDelayBuild",value:function(){null!==this.idDelay&&(game.time.events.remove(this.idDelay),this.idDelay=null)}},{key:"kill",value:function(){vH(wH(t.prototype),"kill",this).call(this)}},{key:"revive",value:function(){ht.instance().showLoading(),vH(wH(t.prototype),"revive",this).call(this),this.removeDelayBuild(),this.idx=0,this.countItem=0,this.buildListRanking()}},{key:"destroy",value:function(){rn.instance().resetLoad(),this.removeDelayBuild(),this.removeEvent(),vH(wH(t.prototype),"destroy",this).call(this)}}])&&yH(n.prototype,i),o&&yH(n,o),t}();function SH(e){return(SH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function CH(e,t){return!t||"object"!==SH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kH(e,t,n){return(kH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PH(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function PH(e){return(PH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OH(e,t){return(OH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var RH=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=CH(this,PH(t).call(this,game,null)),ht.instance().showLoading(),e.event={add_item:new Phaser.Signal},e.ktBuild=!1,e.ktLoadMore=!1,e.positionRanking=JSON.parse(game.cache.getText("positionRanking")),e.positionMe=-1,e.playlist_number=0,e.arrRanking=[],e.idDelay=null,e.idx=0,e.idxItem=1,e.countItem=0,e.rankMe=null,e.bgRankMe=new Bt(e.positionRanking.item_ranking_bg_rank_me),e.bgRankMe.y=game.height-110*oe.instance().scale,e.addChild(e.bgRankMe),e.txtError=new Qt(e.positionRanking.item_ranking_txt_error,de.instance().getData("126")),e.txtError.setTextBounds(0,0,game.width,38*oe.instance().scale),e.txtError.y=game.height-76*oe.instance().scale,e.addChild(e.txtError),e.txtError.visible=!1,He.instance().logEvent(He.Ranking_online),e.addEvent(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OH(e,t)}(t,Je),n=t,(i=[{key:"addEvent",value:function(){dV.instance().events.onExtensionResponse.add(this.getData,this),this.arrRanking=[],this.removeDelayBuild(),this.idx=0,this.countItem=0,this.sendGetDataServer()}},{key:"sendGetDataServer",value:function(){if(this.idxItem<100){ht.instance().showLoading();var e=this.idxItem,t=this.idxItem+9;t>100&&(t=100),dV.instance().sendData(MZ.RANKING_ONLINE_LOAD_REQUEST,XZ.begin(e,t))}}},{key:"removeEvent",value:function(){dV.instance().events.onExtensionResponse.remove(this.getData,this)}},{key:"getData",value:function(e){switch(e.cmd){case MZ.RANKING_ONLINE_LOAD_RESPONSE:for(var t=rH.begin(e.params),n=0;n<t.top_users.length;n++)this.arrRanking.push(t.top_users[n]);this.idxItem=this.arrRanking.length+1,-1===this.positionMe&&(this.positionMe=t.position.rank,this.playlist_number=t.position.count_win),this.ktLoadMore=!1,this.buildListRanking()}}},{key:"removeRankMe",value:function(){null!==this.rankMe&&(this.removeChild(this.rankMe),this.rankMe.destroy(),this.rankMe=null)}},{key:"buildListRanking",value:function(){if(this.positionMe>-1){if(this.txtError.visible=!1,null===this.rankMe){var e=new aH;e.id=dV.instance().dataMySeft.id,e.id=dV.instance().dataMySeft.id,e.avatar=dV.instance().dataMySeft.avatar,e.user_name=dV.instance().dataMySeft.user_name,e.count_win=this.playlist_number,e.vip=dV.instance().dataMySeft.vip,this.rankMe=new zZ(e,this.positionMe-1,GH.TOP_ONLINEMODE,!0),this.rankMe.x=0,this.rankMe.y=game.height-108*oe.instance().scale,this.addChild(this.rankMe)}}else this.txtError.visible=!0;this.buildItemPage(),game.time.events.add(1e3,this.buildHideLoading,this)}},{key:"buildHideLoading",value:function(){ht.instance().hideLoading()}},{key:"changeIndex",value:function(e){e===this.arrRanking.length-1?!1===this.ktBuild&&(this.ktBuild=!0,this.ktLoadMore=!0):this.countItem===e+1&&!1===this.ktBuild&&this.buildItemPage()}},{key:"checkLoadMore",value:function(){!0===this.ktLoadMore?(this.ktLoadMore=!1,this.sendGetDataServer()):ht.instance().hideLoading()}},{key:"buildItemPage",value:function(){this.ktBuild=!0;for(var e=this.idx;e<this.arrRanking.length;e++){var t=new zZ(this.arrRanking[e],e,GH.TOP_ONLINEMODE);if(this.event.add_item.dispatch(t),this.idx++,this.countItem++,this.countItem%10==0&&this.idx<this.arrRanking.length){this.ktBuild=!1;break}this.idx===this.arrRanking.length&&(this.ktBuild=!1)}}},{key:"removeDelayBuild",value:function(){null!==this.idDelay&&(game.time.events.remove(this.idDelay),this.idDelay=null)}},{key:"kill",value:function(){kH(PH(t.prototype),"kill",this).call(this)}},{key:"revive",value:function(){ht.instance().showLoading(),kH(PH(t.prototype),"revive",this).call(this),this.removeDelayBuild(),this.idx=0,this.countItem=0,this.buildListRanking()}},{key:"destroy",value:function(){rn.instance().resetLoad(),this.removeDelayBuild(),this.removeEvent(),kH(PH(t.prototype),"destroy",this).call(this)}}])&&EH(n.prototype,i),o&&EH(n,o),t}();function xH(e){return(xH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function IH(e,t){return!t||"object"!==xH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AH(e,t,n){return(AH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LH(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function LH(e){return(LH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DH(e,t){return(DH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var GH=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=IH(this,LH(t).call(this,game,null))).event={back:new Phaser.Signal},e.idEvent=null,e.topLevel=null,e.topDiamond=null,e.topTurnBase=null,e.topOnlineMode=null,e.idEventCanClick,e.tabIdx=n,e.arrTabMenu=[],e.ktAddHelp=!1,e.arrStringTab=[de.instance().getData("127"),de.instance().getData("128"),de.instance().getData("129"),de.instance().getData("130")],e.arrHelp=[de.instance().getData("131"),de.instance().getData("132"),de.instance().getData("133"),de.instance().getData("134")],e.arrResource=[{type:"text",link:"img/config/positionRanking.json",key:"positionRanking"},{type:"atlas",link:"img/atlas/ranking.png",key:"ranking",linkJson:"img/atlas/ranking.json"}],e.loadResource(),e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DH(e,t)}(t,Em),n=t,o=[{key:"TOP_LEVEL",get:function(){return 0}},{key:"TOP_DIAMOND",get:function(){return 1}},{key:"TOP_TURNBASE",get:function(){return 2}},{key:"TOP_ONLINEMODE",get:function(){return 3}}],(i=[{key:"loadFileComplete",value:function(){AH(LH(t.prototype),"loadFileComplete",this).call(this),this.positionRanking=oe.instance().positionRanking,this.bg=new Phaser.Button(game,0,0,"bg_create_room"),this.addChild(this.bg);var e=new Phaser.Group(game,0,0,null);this.listRanking=new Ia(game,e,new Phaser.Rectangle(0,0,game.width,game.height-310*oe.instance().scale),{direction:"y",padding:0,searchForClicks:!0}),this.listRanking.events.changeIndex.add(this.changeIndex,this),this.listRanking.scroller.events.onInputUp.add(this.checkLoadMore,this),e.x=0,e.y=200*oe.instance().scale,this.addChild(e),this.header=new RZ,this.header.event.back.add(this.backHeader,this),this.header.event.help.add(this.chooseHelp,this),this.addChild(this.header),this.popupHelp=null,this.bgTabMenu=new Dn(this.positionRanking.menu_bg_all),this.addChild(this.bgTabMenu);var n=new Phaser.Group(game,0,0,null);this.listMenu=new Ia(game,n,new Phaser.Rectangle(0,0,game.width,100*oe.instance().scale),{direction:"x",padding:0,searchForClicks:!0}),n.x=0,n.y=100*oe.instance().scale,this.addChild(n);for(var i=0;i<this.arrStringTab.length;i++){var o=new DZ(this.arrStringTab[i],i);o.event.choose_item.add(this.chooseTabMenu,this),i===this.tabIdx?o.active():o.deactive(),i===this.arrStringTab.length-1&&o.hideLineDoc(),this.listMenu.add(o),this.arrTabMenu.push(o)}this.listMenu.tweenToItem(this.tabIdx),this.buildListTop(),be.instance().playSound(be.showranking)}},{key:"chooseHelp",value:function(){this.ktAddHelp=!this.ktAddHelp,!0===this.ktAddHelp?this.addPopupHelp():this.removePopupHelp()}},{key:"addPopupHelp",value:function(){this.removePopupHelp(),this.popupHelp=new po(this.arrHelp[this.tabIdx]),this.popupHelp.y=83*oe.instance().scale,this.popupHelp.x=game.width-this.popupHelp.width-71*oe.instance().scale,game.world.add(this.popupHelp)}},{key:"removePopupHelp",value:function(){null!==this.popupHelp&&(game.world.remove(this.popupHelp),this.popupHelp.destroy(),this.popupHelp=null)}},{key:"chooseTabMenu",value:function(e){if(e===this.tabIdx);else{for(var n=0;n<this.arrTabMenu.length;n++){var i=this.arrTabMenu[n];i.getIdx()===e?i.active():i.deactive()}if(e<this.tabIdx){var o=e-1;o<0&&(o=0),this.listMenu.tweenToItem(o)}else{var a=e+1;a>this.arrTabMenu.length-1&&(a=this.arrTabMenu.length-1),this.listMenu.tweenToItem(a)}this.tabIdx===t.TOP_LEVEL?this.topLevel.kill():this.tabIdx===t.TOP_DIAMOND?this.topDiamond.kill():this.tabIdx===t.TOP_TURNBASE?this.topTurnBase.kill():this.tabIdx===t.TOP_ONLINEMODE&&this.topOnlineMode.kill(),this.tabIdx=e,this.buildListTop()}}},{key:"buildListTop",value:function(){switch(this.removePopupHelp(),this.ktAddHelp=!1,this.listRanking.removeAll(),this.listRanking.reset(),this.tabIdx){case t.TOP_LEVEL:He.instance().logEvent(He.Ranking_level_button),this.addTopLevel();break;case t.TOP_DIAMOND:He.instance().logEvent(He.Ranking_diamond_button),this.addTopDiamond();break;case t.TOP_TURNBASE:He.instance().logEvent(He.Ranking_turnbase_button),this.addTopTurnBase();break;case t.TOP_ONLINEMODE:He.instance().logEvent(He.Ranking_online_button),this.addTopOnlineMode()}}},{key:"removeAddEvent",value:function(){null!==this.idEvent&&game.time.events.remove(this.idEvent)}},{key:"removeAll",value:function(){this.removeTopDiamond(),this.removeTopLevel(),this.removeTopOnlineMode(),this.removeTopTurnBase()}},{key:"addEventAll",value:function(){null!==this.topLevel&&this.topLevel.addEvent(),null!==this.topDiamond&&this.topDiamond.addEvent(),null!==this.topTurnBase&&this.topTurnBase.addEvent(),null!==this.topOnlineMode&&this.topOnlineMode.addEvent()}},{key:"addTopLevel",value:function(){null===this.topLevel&&(this.topLevel=new oH,this.topLevel.event.add_item.add(this.addItemRank,this),this.addChild(this.topLevel)),this.topLevel.revive(),this.addChild(this.header)}},{key:"removeTopLevel",value:function(){null!==this.topLevel&&(this.removeChild(this.topLevel),this.topLevel.event.add_item.remove(this.addItemRank,this),this.topLevel.destroy(),this.topLevel=null)}},{key:"addTopDiamond",value:function(){null===this.topDiamond&&(this.topDiamond=new pH,this.topDiamond.event.add_item.add(this.addItemRank,this),this.addChild(this.topDiamond)),this.topDiamond.revive(),this.addChild(this.header)}},{key:"removeTopDiamond",value:function(){null!==this.topDiamond&&(this.topDiamond.event.add_item.remove(this.addItemRank,this),this.removeChild(this.topDiamond),this.topDiamond.destroy(),this.topDiamond=null)}},{key:"addTopTurnBase",value:function(){null===this.topTurnBase&&(this.topTurnBase=new _H,this.topTurnBase.event.add_item.add(this.addItemRank,this),this.addChild(this.topTurnBase)),this.topTurnBase.revive(),this.addChild(this.header)}},{key:"removeTopTurnBase",value:function(){null!==this.topTurnBase&&(this.removeChild(this.topTurnBase),this.topTurnBase.event.add_item.remove(this.addItemRank,this),this.topTurnBase.destroy(),this.topTurnBase=null)}},{key:"addTopOnlineMode",value:function(){null===this.topOnlineMode&&(this.topOnlineMode=new RH,this.topOnlineMode.event.add_item.add(this.addItemRank,this),this.addChild(this.topOnlineMode)),this.topOnlineMode.revive(),this.addChild(this.header)}},{key:"removeTopOnlineMode",value:function(){null!==this.topOnlineMode&&(this.removeChild(this.topOnlineMode),this.topOnlineMode.event.add_item.remove(this.addItemRank,this),this.topOnlineMode.destroy(),this.topOnlineMode=null)}},{key:"changeIndex",value:function(){var e=this.listRanking.getIdx();this.tabIdx===t.TOP_LEVEL?this.topLevel.changeIndex(e):this.tabIdx===t.TOP_DIAMOND?this.topDiamond.changeIndex(e):this.tabIdx===t.TOP_TURNBASE?this.topTurnBase.changeIndex(e):this.tabIdx===t.TOP_ONLINEMODE&&this.topOnlineMode.changeIndex(e)}},{key:"checkLoadMore",value:function(){this.tabIdx===t.TOP_LEVEL?this.topLevel.checkLoadMore():this.tabIdx===t.TOP_DIAMOND?this.topDiamond.checkLoadMore():this.tabIdx===t.TOP_TURNBASE?this.topTurnBase.checkLoadMore():this.tabIdx===t.TOP_ONLINEMODE&&this.topOnlineMode.checkLoadMore()}},{key:"addItemRank",value:function(e){this.listRanking.add(e)}},{key:"backHeader",value:function(){FH.instance().changeScreen(De.MAIN_MENU,{})}},{key:"destroy",value:function(){oe.instance().positionRankingData=null,this.listRanking.events.changeIndex.remove(this.changeIndex,this),this.removePopupHelp(),this.removeAddEvent(),this.removeEvent(),this.removeAll(),this.listRanking.removeAll(),this.listRanking.destroy(),AH(LH(t.prototype),"destroy",this).call(this)}}])&&TH(n.prototype,i),o&&TH(n,o),t}();function MH(e){return(MH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function BH(e,t){return!t||"object"!==MH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jH(e){return(jH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UH(e,t){return(UH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var FH=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=BH(this,jH(t).call(this,game))).screen=null,e}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UH(e,t)}(t,Phaser.Group),n=t,o=[{key:"instance",value:function(){return this.controllScreen||(this.controllScreen=new t),this.controllScreen}}],(i=[{key:"removeScreen",value:function(){null!==this.screen&&(this.removeChild(this.screen),this.screen.destroy(),this.screen={},this.screen=null)}},{key:"changeScreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(this.removeScreen(),LogConsole.log(e),oe.instance().state=e,ht.instance().showLoading(),jC.instance().removeTextScroll(),e){case De.LOGIN:this.screen=new Ik;break;case De.MAIN_MENU:this.screen=new GT;break;case De.ONLINE_MODE:this.screen=new yM,jC.instance().removeAllItem();break;case De.QUEST_ACHIEVEMENT:this.screen=new zN(t);break;case De.TURN_BASE:this.screen=null!==t?new eg(t.opponent,t.type,t):new eg(t,t);break;case De.SOLO_MODE:this.screen=new fT(t);break;case De.NEW_USER:this.screen=new KB;break;case De.EVENT_MODE:this.screen=new _Z;break;case De.RANKING_ALL:this.screen=new GH}this.addChild(this.screen)}}])&&NH(n.prototype,i),o&&NH(n,o),t}();function ZH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var HH=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.user_id=0,this.user_name="",this.avatar="",this.gender="",this.experience_score=0,this.heart=0,this.diamond=0,this.ticket=0,this.weekly_high_score=0,this.all_time_high_score=0,this.online_mode_genre=0,this.level=1,this.vip=0,this.is_playing_game=!1,this.support_item=0,this.lag_value=0,this.current_level_score=0,this.next_level_score=0,this.description="",this.level_title="",this.vip_expired=0}var t,n,i;return t=e,(n=[{key:"setUserName",value:function(e){this.user_name=e,dV.instance().events.onUserVarsUpdate.dispatch()}},{key:"setGender",value:function(e){this.gender=e,dV.instance().events.onUserVarsUpdate.dispatch()}},{key:"setDescription",value:function(e){this.description=e,dV.instance().events.onUserVarsUpdate.dispatch()}},{key:"setAvatar",value:function(e){this.avatar=e,dV.instance().events.onUserVarsUpdate.dispatch()}}])&&ZH(t.prototype,n),i&&ZH(t,i),e}();function VH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var QH=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"user_id",get:function(){return"user_id"}},{key:"user_name",get:function(){return"user_name"}},{key:"avatar",get:function(){return"avatar"}},{key:"gender",get:function(){return"gender"}},{key:"experience_score",get:function(){return"experience_score"}},{key:"heart",get:function(){return"heart"}},{key:"diamond",get:function(){return"diamond"}},{key:"ticket",get:function(){return"ticket"}},{key:"weekly_high_score",get:function(){return"weekly_high_score"}},{key:"all_time_high_score",get:function(){return"all_time_high_score"}},{key:"online_mode_genre",get:function(){return"online_mode_genre"}},{key:"level",get:function(){return"level"}},{key:"level_up_to",get:function(){return"level_up_to"}},{key:"is_playing_game",get:function(){return"is_playing_game"}},{key:"message",get:function(){return"message"}},{key:"status",get:function(){return"status"}},{key:"support_item",get:function(){return"support_item"}},{key:"lag_value",get:function(){return"lag_value"}},{key:"current_level_score",get:function(){return"current_level_score"}},{key:"next_level_score",get:function(){return"next_level_score"}},{key:"description",get:function(){return"description"}},{key:"level_title",get:function(){return"level_title"}},{key:"vip_expired",get:function(){return"vip_expired"}}],(n=null)&&VH(t.prototype,n),i&&VH(t,i),e}();function WH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qH=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"begin",value:function(e){var t=new HH;(t.user_id=e.getVariable(QH.user_id).value,t.user_name=e.getVariable(QH.user_name).value,e.getVariable(QH.avatar)&&(t.avatar=e.getVariable(QH.avatar).value),e.getVariable(QH.gender)&&(t.gender=e.getVariable(QH.gender).value),e.getVariable(QH.experience_score)&&(t.experience_score=e.getVariable(QH.experience_score).value),e.getVariable(QH.heart)&&(t.heart=e.getVariable(QH.heart).value),e.getVariable(QH.diamond)&&(t.diamond=e.getVariable(QH.diamond).value),e.getVariable(QH.ticket)&&(t.ticket=e.getVariable(QH.ticket).value),e.getVariable(QH.weekly_high_score)&&(t.weekly_high_score=e.getVariable(QH.weekly_high_score).value),e.getVariable(QH.all_time_high_score)&&(t.all_time_high_score=e.getVariable(QH.all_time_high_score).value),e.getVariable(QH.online_mode_genre)&&(t.online_mode_genre=e.getVariable(QH.online_mode_genre).value),e.getVariable(QH.level)&&(t.level=e.getVariable(QH.level).value),e.getVariable(QH.is_playing_game)&&(t.is_playing_game=e.getVariable(QH.is_playing_game).value),e.getVariable(QH.support_item)&&(t.support_item=e.getVariable(QH.support_item).value),e.getVariable(QH.lag_value)&&(t.lag_value=e.getVariable(QH.lag_value).value),e.getVariable(QH.description)&&(t.description=e.getVariable(QH.description).value),e.getVariable(QH.level_title)&&(t.level_title=e.getVariable(QH.level_title).value),e.getVariable(QH.vip_expired))&&(t.vip_expired=e.getVariable(QH.vip_expired).value,Date.now()<t.vip_expired?t.vip=!0:t.vip=!1);return t}}],(n=null)&&WH(t.prototype,n),i&&WH(t,i),e}();function KH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var zH=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"handle",value:function(e){var t=new JC;if(e.containsKey(JC.get_quest)){var n=e.getSFSObject("quest");t.reward=n.getInt("reward"),t.id=n.getInt("id"),t.quest=n.getUtfString("quest"),t.required=n.getInt("required"),t.quest_type=n.getInt("quest_type"),t.order=n.getInt("order"),t.reward_type=n.getUtfString("reward_type")}return t}}],(n=null)&&KH(t.prototype,n),i&&KH(t,i),e}();function YH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var XH=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"achievement",get:function(){return"achievement"}},{key:"reward",get:function(){return"reward"}},{key:"condition",get:function(){return"condition"}},{key:"achievement_type_id",get:function(){return"achievement_type_id"}},{key:"is_done",get:function(){return"is_done"}},{key:"reward_type",get:function(){return"reward_type"}},{key:"medal",get:function(){return"medal"}},{key:"achieved",get:function(){return"achieved"}},{key:"id",get:function(){return"id"}},{key:"title",get:function(){return"title"}},{key:"required",get:function(){return"required"}},{key:"new_level",get:function(){return"new_level"}}],(n=null)&&YH(t.prototype,n),i&&YH(t,i),e}();function JH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"handle",value:function(e){var t={reward:0,reward_type:"",medal:"",title:"",new_level:0};if(e.containsKey(XH.achievement)){var n=e.getSFSObject(XH.achievement);t.reward=n.getInt(XH.reward),t.reward_type=n.getUtfString(XH.reward_type),t.medal=n.getUtfString(XH.medal),t.title=n.getUtfString(XH.title),t.new_level=n.getInt(XH.new_level)}return t}}],(n=null)&&JH(t.prototype,n),i&&JH(t,i),e}();function eV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tV=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"handle",value:function(e){var t=new MM;if(e.containsKey(MM.get_daily_quest)){var n=e.getSFSObject("daily_quest");t.reward=n.getInt("reward"),t.reward_type=n.getUtfString("reward_type"),t.id=n.getInt("id"),t.quest=n.getUtfString("quest"),t.required=n.getInt("required"),t.quest_type=n.getInt("quest_type")}return t}}],(n=null)&&eV(t.prototype,n),i&&eV(t,i),e}();function nV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var iV=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.arrNotify=[],this.isShow=!1,this.textScroll=null,this.idDelayTime=null}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.controllTextScroller||(this.controllTextScroller=new e),this.controllTextScroller}}],(n=[{key:"addNotify",value:function(e){var t={message:"",show_times:0,pending_time_in_second:0};t.message=e.getUtfString("message"),t.show_times=e.getInt("show_times"),t.pending_time_in_second=e.getInt("pending_time_in_second"),this.arrNotify.push(t),!1===this.isShow&&this.showNotify()}},{key:"showNotify",value:function(){this.arrNotify.length>0&&this.addTextScroll(this.arrNotify[0].message)}},{key:"checkShowNotify",value:function(){this.arrNotify.length>0?(this.arrNotify[0].show_times=this.arrNotify[0].show_times-1,this.arrNotify[0].show_times<1?(this.arrNotify.shift(),this.arrNotify.length>0?this.showNotify():(this.removeTextScroll(),this.isShow=!1)):(this.removeTextScroll(),this.removeDelaytime(),this.idDelayTime=game.time.events.add(Phaser.Timer.SECOND*this.arrNotify[0].pending_time_in_second,this.showNotify,this))):(this.removeTextScroll(),this.isShow=!1)}},{key:"removeDelaytime",value:function(){null!==this.idDelayTime&&(game.time.events.remove(this.idDelayTime),this.idDelayTime=null)}},{key:"addTextScroll",value:function(e){this.isShow=!0,this.removeTextScroll(),this.textScroll=new l_(e),this.textScroll.event.complete.add(this.checkShowNotify,this),Ck.instance().addChild(this.textScroll)}},{key:"removeTextScroll",value:function(){null!==this.textScroll&&(Ck.instance().removeChild(this.textScroll),this.textScroll.destroy(),this.textScroll=null)}}])&&nV(t.prototype,n),i&&nV(t,i),e}();function oV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var aV=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=null}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.controllTurnbaseRequestUpdate||(this.controllTurnbaseRequestUpdate=new e),this.controllTurnbaseRequestUpdate}}],(n=[{key:"getUpdate",value:function(e){var t=e.getInt(Ll.user_id),n=e.getUtfString(Ll.user_name),i=e.getUtfString(Ll.avatar),o=e.getSFSObject(Ll.weekly_result),a=o.getInt(Ll.user_won),s=o.getInt(Ll.opponent_won),r=e.getUtfString(Ll.status),l=e.getLong(Ll.updated),c=Gl.formatChallengeGameUpdated(l),h=e.getUtfString(Ll.challenge_msg),u=null,d=0,f=0;"THEIR_TURN"==r?e.containsKey(Ll.can_be_poked)&&(u=e.getInt(Ll.can_be_poked)):"YOUR_TURN"==r&&e.containsKey(Ll.poked)&&(d=e.getInt(Ll.poked),f=e.getLong(Ll.poked_at));var p=e.getInt(Ll.turn_count);return{opponentEntity:{id:t,userName:n,avatar:i,is_online:e.getBool(Ll.is_online),vip:e.getBool(Ll.vip)},weeklyResult:{userWon:a,opponentWon:s},turnCount:p,status:r,can_be_poked:u,poked:d,poked_at:f,updated:c,base_updated:l,challenge_request_id:e.getLong(Ll.challenge_request_id),challenge_msg:h}}}])&&oV(t.prototype,n),i&&oV(t,i),e}();function sV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var rV=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quest_log=null}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.controllQuestLogUpdate||(this.controllQuestLogUpdate=new e),this.controllQuestLogUpdate}}],(n=[{key:"getUpdate",value:function(e){var t={};if(e.containsKey("quest_log")){var n=e.getSFSObject("quest_log");t.user_id=n.getInt("user_id"),t.created=n.getLong("created"),t.quest_id=n.getInt("quest_id"),t.id=n.getLong("id"),t.state=n.getUtfString("state"),t.updated=n.getLong("updated")}return t}}])&&sV(t.prototype,n),i&&sV(t,i),e}();function lV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var cV=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.checkLoadMessages=!1}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.controllMessages||(this.controllMessages=new e),this.controllMessages}},{key:"begin",value:function(e){var t=[];if(e.containsKey("user_messages")){for(var n=e.getSFSArray("user_messages"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getInt("is_read"),s=o.getLong("created"),r=o.getInt("from"),l=o.getLong("id"),c=o.getInt("to"),h=o.getUtfString("state"),u=o.getUtfString("message"),d=o.getLong("updated");t.push({is_read:a,created:s,from:r,id:l,to:c,state:h,message:u,updated:d})}t.sort(function(e,t){return e.id-t.id})}return t}},{key:"getUsers",value:function(e){var t=[];if(e.containsKey("users"))for(var n=e.getSFSArray("users"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getInt("level"),s=o.getUtfString("user_name"),r=o.getInt("id"),l=o.getUtfString("avatar"),c=o.getBool("vip"),h=o.getBool("is_online");t.push({level:a,user_name:s,id:r,avatar:l,vip:c,is_online:h})}return t}},{key:"getSystemMessages",value:function(e){var t=[];if(e.containsKey("system_messages"))for(var n=e.getSFSArray("system_messages"),i=0;i<n.size();i++){var o=n.getSFSObject(i),a=o.getInt("is_read"),s=o.getLong("created"),r=o.getLong("message_content_id"),l=o.getUtfString("control"),c=o.getUtfString("title"),h=o.getUtfString("message");t.push({is_read:a,created:s,message_content_id:r,control:l,title:c,message:h})}return t.sort(function(e,t){return e.message_content_id-t.message_content_id}),t}}],(n=null)&&lV(t.prototype,n),i&&lV(t,i),e}();function hV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function uV(e,t,n){return t&&hV(e.prototype,t),n&&hV(e,n),e}var dV=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.socket=null,this.ktLogin=!1,this.timeBegin=0,this.idPing=null,this.events={onConnection:new Phaser.Signal,onConnectionLost:new Phaser.Signal,onLoginError:new Phaser.Signal,onLogin:new Phaser.Signal,onRoomJoinError:new Phaser.Signal,onRoomJoin:new Phaser.Signal,onPublicMessage:new Phaser.Signal,onPrivateMessage:new Phaser.Signal,onUserEnterRoom:new Phaser.Signal,onUserExitRoom:new Phaser.Signal,onUserCountChange:new Phaser.Signal,onRoomRemove:new Phaser.Signal,onRoomAdd:new Phaser.Signal,onExtensionResponse:new Phaser.Signal,onRoomCreationError:new Phaser.Signal,onRoomVarsUpdate:new Phaser.Signal,onSpectatorToPlayer:new Phaser.Signal,onSpectatorToPlayerError:new Phaser.Signal,onPlayerToSpectator:new Phaser.Signal,onPlayerToSpectatorError:new Phaser.Signal,onUserVarsUpdate:new Phaser.Signal,onGroupSubscribed:new Phaser.Signal,onGroupSubscribedError:new Phaser.Signal,onGroupUnsubscribed:new Phaser.Signal,onGroupUnsubscribedError:new Phaser.Signal,onInvitation:new Phaser.Signal,onInvitationReply:new Phaser.Signal,onInvitationReplyError:new Phaser.Signal,onRoomFindResult:new Phaser.Signal,onAdminMessage:new Phaser.Signal,onModeratorMessage:new Phaser.Signal},this.roomLobby=null,this.ktPlay=!1,this.idxPing=null,this.dataMySeft=null}return uV(e,null,[{key:"instance",value:function(){return this.socketController||(this.socketController=new e),this.socketController}}]),uV(e,[{key:"initListenerSfs",value:function(e){LogConsole.log("initListenerSfs"),this.removeAllEvent(),this.socket=null,this.configZoneServer=e.zone,this.socket=new SFS2X.SmartFox(e),oe.instance().zoneSFS=e.zone,this.addEvent(SFS2X.SFSEvent.CONNECTION,this.onConnectionCallback),this.addEvent(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLostCallback),this.addEvent(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginErrorCallback),this.addEvent(SFS2X.SFSEvent.LOGIN,this.onLoginCallback),this.addEvent(SFS2X.SFSEvent.LOGOUT,this.onLogoutCallback),this.addEvent(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinErrorCallback),this.addEvent(SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoinCallback),this.addEvent(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessageCallback),this.addEvent(SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoomCallback),this.addEvent(SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoomCallback),this.addEvent(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponseCallback),this.addEvent(SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdateCallback),this.addEvent(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdateCallback),this.addEvent(SFS2X.SFSEvent.INVITATION,this.onInvitationCallback),this.addEvent(SFS2X.SFSEvent.INVITATION_REPLY,this.onInvitationReplyCallback),this.addEvent(SFS2X.SFSEvent.INVITATION_REPLY_ERROR,this.onInvitationReplyErrorCallback),this.addEvent(SFS2X.SFSEvent.PING_PONG,this.onPingPong),this.callPingServer()}},{key:"removeAllEvent",value:function(){this.removeEvent(SFS2X.SFSEvent.CONNECTION,this.onConnectionCallback),this.removeEvent(SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLostCallback),this.removeEvent(SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginErrorCallback),this.removeEvent(SFS2X.SFSEvent.LOGIN,this.onLoginCallback),this.removeEvent(SFS2X.SFSEvent.LOGOUT,this.onLogoutCallback),this.removeEvent(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinErrorCallback),this.removeEvent(SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoinCallback),this.removeEvent(SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessageCallback),this.removeEvent(SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoomCallback),this.removeEvent(SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoomCallback),this.removeEvent(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onExtensionResponseCallback),this.removeEvent(SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdateCallback),this.removeEvent(SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdateCallback),this.removeEvent(SFS2X.SFSEvent.INVITATION,this.onInvitationCallback),this.removeEvent(SFS2X.SFSEvent.INVITATION_REPLY,this.onInvitationReplyCallback),this.removeEvent(SFS2X.SFSEvent.INVITATION_REPLY_ERROR,this.onInvitationReplyErrorCallback),this.removeEvent(SFS2X.SFSEvent.PING_PONG,this.onPingPong)}},{key:"getTime",value:function(){return(new Date).getTime()}},{key:"callPingServer",value:function(){this.timeBegin=this.getTime(),$.ajax({type:"GET",url:"https://cdn.gamezoka.com/storage/mp3/ping/pong.txt?time="+this.getTime(),data:{},dataType:"json",success:this.successPing.bind(this),error:this.errorPing.bind(this)})}},{key:"successPing",value:function(){this.checkPingServer()}},{key:"errorPing",value:function(){this.checkPingServer()}},{key:"checkPingServer",value:function(){var e=((64e3/((this.getTime()-this.timeBegin)/1e3)).toFixed(2)/1024).toFixed(2),t=((e/1024).toFixed(2),e);null!==this.dataMySeft&&(this.dataMySeft.lag_value=t),this.removeIdBadConnect(),this.idPing=game.time.events.add(2*Phaser.Timer.SECOND,this.callPingServer,this)}},{key:"removeIdBadConnect",value:function(){null!==this.idPing&&game.time.events.remove(this.idPing)}},{key:"onPingPong",value:function(e){}},{key:"onPublicMessageCallback",value:function(e){this.events.onPublicMessage.dispatch(e)}},{key:"onInvitationCallback",value:function(e){LogConsole.log("onInvitation : "+this.dataMySeft.is_playing_game),LogConsole.log(e),LogConsole.log("playScript.playing_guide : "+oe.instance().playScript.playing_guide),!0===this.dataMySeft.is_playing_game||oe.instance().playScript.playing_guide!==_o.DONE_ALL||jC.instance().addDialogInviteFriend(e.invitation),this.events.onInvitation.dispatch(e)}},{key:"onInvitationReplyCallback",value:function(e){this.events.onInvitationReply.dispatch(e)}},{key:"onInvitationReplyErrorCallback",value:function(e){LogConsole.log("onInvitationReplyError"),LogConsole.log(e),LogConsole.log(e.errorMessage),jC.instance().addDialog(e.errorMessage),this.events.onInvitationReplyError.dispatch(e)}},{key:"onRoomVarsUpdateCallback",value:function(e){this.events.onRoomVarsUpdate.dispatch(e)}},{key:"onUserVarsUpdateCallback",value:function(e){e.user.isItMe&&this.updateMySeft(),this.events.onUserVarsUpdate.dispatch(e)}},{key:"onUserEnterRoomCallback",value:function(e){this.events.onUserEnterRoom.dispatch(e)}},{key:"onUserExitRoomCallback",value:function(e){e.room.isGame&&e.user.isItMe&&(this.ktPlay=!1),this.events.onUserExitRoom.dispatch(e)}},{key:"connect",value:function(){LogConsole.log("connect sv"),ht.instance().showLoading(),this.socket.connect()}},{key:"addEvent",value:function(e,t){this.socket.addEventListener(e,t,this)}},{key:"removeEvent",value:function(e,t){null!==this.socket&&this.socket.removeEventListener(e,t,this)}},{key:"onConnectionCallback",value:function(e){this.events.onConnection.dispatch(e),Qe.instance().event.onConnectServer.dispatch()}},{key:"onConnectionLostCallback",value:function(e){this.roomLobby=null,1==oe.instance().LOGED_IN&&(jC.instance().removeAllItem(),Ck.instance().addPopupDisconnect()),this.removeReplayPing(),Ir.instance().hide(),this.events.onConnectionLost.dispatch(e)}},{key:"onLoginErrorCallback",value:function(e){LogConsole.log("onLoginErrorCallback-------------------"),LogConsole.log(e),this.events.onLoginError.dispatch(e)}},{key:"onLoginCallback",value:function(e){LogConsole.log("onLoginCallback-------------------"),oe.instance().LOGED_IN=!0,LogConsole.log(e),this.socket.enableLagMonitor(!0),this.events.onLogin.dispatch(e)}},{key:"onLogoutCallback",value:function(e){LogConsole.log("onLogoutCallback-------------------"),LogConsole.log(e),oe.instance().LOGED_IN=!1,jC.instance().removeAllItem(),ht.instance().showLoading(),Ck.instance().removeAllItem(),oe.instance().dataServer.resetDataServer(),ak.instance().resetData(),this.removeReplayPing(),FH.instance().changeScreen(De.LOGIN)}},{key:"updateMySeft",value:function(){null!==this.socket.mySelf&&(this.dataMySeft=qH.begin(this.socket.mySelf))}},{key:"onRoomJoinErrorCallback",value:function(e){LogConsole.log("onRoomJoinErrorCallback-------------------"),LogConsole.log(e),this.events.onRoomJoinError.dispatch(e)}},{key:"onRoomJoinCallback",value:function(e){if(LogConsole.log("onRoomJoinCallback-------------------"),LogConsole.log(e),this.ktLogin=!1,null===this.roomLobby){this.roomLobby=this.socket.lastJoinedRoom,ak.instance().beginLoadData();var t=new Date,n=t.getDate()+""+(t.getMonth()+1)+t.getFullYear(),i=qr.instance().getItem(n);if("error"===i||null===i||"null"===i){i=1;var o=new Date;o.setDate(o.getDate()-1);var a=o.getDate()+""+(o.getMonth()+1)+o.getFullYear(),s=qr.instance().getItem(a);if("error"===s||null===s||"null"===s);else{tk.instance().clearPush({id:1}),qr.instance().removeItem(a)}}else i=parseInt(i)+1;if(i>0){var r="Daily"+n,l=qr.instance().getItem(r);if("error"===l||null===l||"null"===l){var c=new Date;c.setHours(mt.instance().randomNumber(8,20));var h=new Date(c.getTime());h.setDate(t.getDate()+1);var u={id:1,title:"[Wazzat]Phần thường hằng ngày đã sẵn sàng",text:"Hãy nhanh tay nhận phần thưởng",trigger:{at:h}};tk.instance().setLocalPush(u),tk.instance().ktPush&&He.instance().logEvent("LocalDailyPush"),qr.instance().setItem(r,!0)}}qr.instance().setItem(n,i)}var d=e.room;d.isGame?(this.ktPlay=!0,"OnlineMode"===d.getVariable("mode").value||"OnlineModeRoom"===d.getVariable("mode").value?(LogConsole.log("MainData.instance().state :"+oe.instance().state),oe.instance().state===De.ONLINE_MODE?this.events.onRoomJoin.dispatch(e):(oe.instance().dataJoinRoom=e,FH.instance().changeScreen(De.ONLINE_MODE))):this.events.onRoomJoin.dispatch(e)):(this.ktPlay=!1,this.events.onRoomJoin.dispatch(e))}},{key:"onExtensionResponseCallback",value:function(t){if("EVENT_MODE_LOAD_DISPLAY_PLAYERS"===t.cmd||"USER_PING"===t.cmd||(LogConsole.log("event.cmd : "+t.cmd),LogConsole.log(t.params.getDump())),"FAILED"===t.params.getUtfString(QH.status))t.cmd===sE.ONLINE_MODE_ROOM_INVITE_RESPONSE||jC.instance().addDialog(t.params.getUtfString(QH.message)),this.events.onExtensionResponse.dispatch(t);else if("WARNING"===t.params.getUtfString(QH.status))t.cmd===ki.CHALLENGE_GAME_GET_PLAYLISTS_RESPONSE?this.events.onExtensionResponse.dispatch(t):t.cmd===ki.CHALLENGE_GAME_FINISH_RESPONSE?this.events.onExtensionResponse.dispatch(t):t.cmd==ki.SOLO_MODE_PLAYLIST_SELECTED_RESPONSE?this.events.onExtensionResponse.dispatch(t):t.cmd==ki.CHALLENGE_GAME_QUESTIONS_RESPONSE?this.events.onExtensionResponse.dispatch(t):t.cmd===sE.ONLINE_MODE_ROOM_INVITE_RESPONSE?this.events.onExtensionResponse.dispatch(t):t.cmd===ki.SOLO_MODE_QUESTION_RESPONSE&&"User has no heart to play practice mode."==t.params.getUtfString(QH.message)?this.events.onExtensionResponse.dispatch(t):(jC.instance().addDialog(t.params.getUtfString(QH.message)),this.events.onExtensionResponse.dispatch(t));else{if(this.events.onExtensionResponse.dispatch(t),t.cmd==ki.QUEST_ACHIEVED_NOTIFICATION&&(LogConsole.log("QUEST_ACHIEVED_NOTIFICATION"),!0!==this.dataMySeft.is_playing_game&&setTimeout(function(){jC.instance().changeScreen(De.QUEST_CLAIM_POPUP,zH.handle(t.params))},1e3)),t.cmd==ki.DAILY_QUEST_NOTIFICATION&&!0!==this.dataMySeft.is_playing_game&&jC.instance().addDailyRewardPopup(tV.handle(t.params)),t.cmd===ki.ACHIEVEMENT_ACHIEVED_NOTIFICATION&&!0!==this.dataMySeft.is_playing_game&&jC.instance().changeScreen(De.ACHIEVEMENT_CLAIM_POPUP,$H.handle(t.params)),t.cmd===ki.ONLINE_ROOM_INVITATION&&(oe.instance().state!==De.MAIN_MENU&&oe.instance().state!==De.ONLINE_MODE||FH.instance().screen.checkShowInvite(t.params)),t.cmd===ki.LEVEL_UP_NOTIFICATION?jC.instance().addLevelUp(t.params.getInt(QH.level_up_to)):t.cmd===kt.SHOP_BUY_PLAYLIST_RESPONSE?0===t.params.getInt("is_solo_mode")&&jC.instance().addPopupBuyDone(t.params.getInt(xt.playlist_id)):t.cmd===sE.ONLINE_MODE_ROOM_INVITE_RESPONSE||(t.cmd===sE.ONLINE_MODE_ROOM_BE_KICKED?jC.instance().addDialog("Bạn đã bị kích khỏi phòng chơi."):t.cmd===nj.EVENT_MODE_EVENT_START_BROADCAST&&jC.instance().addTextScroll("Sự kiên "+t.params.getSFSObject(YC.event).getUtfString(YC.name)+" đã bắt đầu mời các bạn tham gia.")),t.cmd===ki.BROADCASH_NOTIFICATION&&iV.instance().addNotify(t.params),t.cmd===ki.USER_NOTIFICATION&&jC.instance().addDialog(t.params.getUtfString("message")),t.cmd==ki.TURNBASE_CHALLENGE_REQUEST_UPDATE){var n=aV.instance().getUpdate(t.params);if(null!==oe.instance().menuOpponentsResponse){var i=oe.instance().menuOpponentsResponse.findIndex(function(e){return e.challenge_request_id==n.challenge_request_id});-1==i?oe.instance().menuOpponentsResponse.push(n):oe.instance().menuOpponentsResponse[i]=n,Gl.filterResponseGames()}}if(t.cmd==ki.USER_MESSAGE_LOAD_RESPONSE&&function(){for(var n=cV.begin(t.params),i=cV.getUsers(t.params),o=function(t){var n=oe.instance().dataMessagesLocal.users.findIndex(function(e){return e.id==i[t].id});-1!==n?(oe.instance().dataMessagesLocal.users[n]=i[t],i[t].zone=oe.instance().zoneSFS,i[t].user_id=e.instance().dataMySeft.user_id,_t.instance().updateUserMessages(i[t])):(oe.instance().dataMessagesLocal.users.push(i[t]),i[t].zone=oe.instance().zoneSFS,i[t].user_id=e.instance().dataMySeft.user_id,_t.instance().updateUserMessages(i[t]))},a=0;a<i.length;a++)o(a);for(a=0;a<n.length;a++)oe.instance().dataMessagesLocal.dataMessages.push(n[a]),n[a].zone=oe.instance().zoneSFS,n[a].user_id=e.instance().dataMySeft.user_id,_t.instance().updateNewMessage(n[a]);cV.instance().checkLoadMessages=!1,1==Qe.instance().callMessageFromChatScreen&&(Qe.instance().event.newMessage.dispatch(),Qe.instance().callMessageFromChatScreen=!0),Qe.instance().event.loadMessagesDone.dispatch()}(),t.cmd==ki.USER_MESSAGE_RECEIVE&&this.sendRequestDataMessages(),t.cmd==ki.SYSTEM_MESSAGE_LOAD_RESPONSE)for(var o=cV.getSystemMessages(t.params),a=0;a<o.length;a++)oe.instance().systemMessagesLocal.dataMessages.push(o[a]),o[a].zone=oe.instance().zoneSFS,o[a].user_id=e.instance().dataMySeft.user_id,_t.instance().updateNewSystemMessage(o[a]);if(t.cmd==ki.QUEST_LOG_UPDATE){var s=rV.instance().getUpdate(t.params);Gl.setQuestLogs(s,ak.instance().quest_logs)}Qe.instance().event.loadSystemMessagesDone.dispatch()}}},{key:"addEventExtension",value:function(e,t){this.events.onExtensionResponse.add(e,t)}},{key:"removeEventExtension",value:function(e,t){this.events.onExtensionResponse.remove(e,t)}},{key:"sendPingServer",value:function(){this.removeReplayPing(),this.idxPing=game.time.events.add(10*Phaser.Timer.SECOND,this.sendPingServer,this),this.sendData("USER_PING",null)}},{key:"removeReplayPing",value:function(){null!==this.idxPing&&game.time.events.remove(this.idxPing)}},{key:"sendDataOneSignal",value:function(e,t){this.socket.send(new SFS2X.ExtensionRequest(e,t,this.roomLobby))}},{key:"sendData",value:function(e,t){LogConsole.log("sendData"),LogConsole.log("cmd : ---- "+e),LogConsole.log("this.ktPlay : ---- "+this.ktPlay),null!=t&&LogConsole.log("data : "+t.getDump()),this.ktPlay?this.socket.send(new SFS2X.ExtensionRequest(e,t,this.socket.lastJoinedRoom)):this.socket.send(new SFS2X.ExtensionRequest(e,t,this.roomLobby))}},{key:"sendDataGetMenu",value:function(e,t){ht.instance().showLoading(),null!==t&&LogConsole.log("data : "+t),this.ktPlay?this.socket.send(new SFS2X.ExtensionRequest(e,null,this.socket.lastJoinedRoom)):this.socket.send(new SFS2X.ExtensionRequest(e,null,this.roomLobby))}},{key:"sendLoading",value:function(e){LogConsole.log("sendLoading "+e);var t=[];t.push(new SFS2X.SFSUserVariable(b_.online_mode_loaded,e)),this.socket.send(new SFS2X.SetUserVariablesRequest(t))}},{key:"sendInvitationReply",value:function(e,t){this.socket.send(new SFS2X.InvitationReplyRequest(e,t))}},{key:"sendPublicChat",value:function(t,n){console.log("GGGGGGGGG :"+e.instance().dataMySeft.vip),n.putBool("vip",e.instance().dataMySeft.vip),this.socket.send(new SFS2X.PublicMessageRequest(t,n,this.socket.lastJoinedRoom))}},{key:"sendExitRoom",value:function(){LogConsole.log("sendExitRoom"),this.socket.send(new SFS2X.LeaveRoomRequest)}},{key:"sendLogout",value:function(){LogConsole.log("logout sfs"),this.socket.send(new SFS2X.LogoutRequest)}},{key:"loginSFSByDevice",value:function(e){if(0==this.ktLogin){var t={deviceId:"",device:dt.getNamePlatform(),referrer:oe.instance().referrer,userOneSingal:oe.instance().userOneSingal,tokenOneSignal:oe.instance().tokenOneSignal};if(!1===window.isTest){var n=prompt("Get UUID:");t.deviceId=n}else if(window.cordova&&"undefined"!=typeof device)t.deviceId=oe.instance().udid;else{var i=prompt("Get UUID:");t.deviceId=i}LogConsole.log("postData"),LogConsole.log(t),ht.instance().showLoading(),this.ajaxGetServerInfoByUUID(t,function(t){e(t)})}}},{key:"loginSFSByYanAccount",value:function(e){var t={token:"",device:dt.getNamePlatform()};t.token=oe.instance().tokenYanAccount,ht.instance().showLoading(),this.ajaxGetServerInfoByYanAccount(t,function(t){e(t)})}},{key:"ajaxGetServerInfoByUUID",value:function(e,t){$.ajax({type:"POST",url:window.RESOURCE.login_deviceId,data:e,dataType:"json",success:function(e){t(e)},error:function(e,n,i){console.error("Error get server infomation"),console.error(i),console.error(e.status),console.error(e.responseJSON),t({status:"ERROR_LOGIN"})}})}},{key:"ajaxGetServerInfoByYanAccount",value:function(e,t){$.ajax({type:"POST",url:window.RESOURCE.login_yan,data:e,dataType:"json",success:function(e){t(e)},error:function(e,n,i){console.error("Error get server infomation"),console.error(i),console.error(e.status),console.error(e.responseJSON),t({status:"ERROR_LOGIN"})}})}},{key:"loginSFS",value:function(e,t){if(0==this.ktLogin){this.ktLogin=!0,this.roomLobby=null;var n=new SFS2X.SFSObject;if(1==window.isTest?n.putUtfString("token",t):n.putUtfString("token","xipat!@#2019"),void 0!==e)this.socket.send(new SFS2X.LoginRequest(e.toString(),"",n,this.configZoneServer));else{var i=prompt("Get user id:");null==i&&(i=2),this.socket.send(new SFS2X.LoginRequest(i.toString(),"",n,this.configZoneServer))}}}},{key:"sendRequestDataMessages",value:function(){if(null===oe.instance().dataMessagesLocal)_t.instance().event.get_messages_complete.add(this.get_messages_complete,this),_t.instance().getMesseges(oe.instance().zoneSFS,e.instance().dataMySeft.user_id);else{var t=new SFS2X.SFSObject;oe.instance().dataMessagesLocal.dataMessages.length>0?t.putLong("last_user_message_id",oe.instance().dataMessagesLocal.dataMessages[oe.instance().dataMessagesLocal.dataMessages.length-1].id):t.putLong("last_user_message_id",0),e.instance().sendData(ki.USER_MESSAGE_LOAD_REQUEST,t),cV.instance().checkLoadMessages=!0}}},{key:"get_messages_complete",value:function(t){if(_t.instance().event.get_messages_complete.remove(this.get_messages_complete,this),null===t||0===t.length){var n=new SFS2X.SFSObject;oe.instance().dataMessagesLocal={user_id:e.instance().dataMySeft.user_id,dataMessages:[],users:[]},n.putLong("last_user_message_id",0),e.instance().sendData(ki.USER_MESSAGE_LOAD_REQUEST,n),cV.instance().checkLoadMessages=!0}else this.dataMessages=t,_t.instance().event.get_user_messages_complete.add(this.get_user_messages_complete,this),_t.instance().getUserMessages(oe.instance().zoneSFS,e.instance().dataMySeft.user_id)}},{key:"get_user_messages_complete",value:function(t){if(_t.instance().event.get_user_messages_complete.remove(this.get_user_messages_complete,this),null===t||0===t.length){var n=new SFS2X.SFSObject;oe.instance().dataMessagesLocal={user_id:e.instance().dataMySeft.user_id,dataMessages:[],users:[]},n.putLong("last_user_message_id",0),e.instance().sendData(ki.USER_MESSAGE_LOAD_REQUEST,n),cV.instance().checkLoadMessages=!0}else{this.dataUserMessages=t,oe.instance().dataMessagesLocal={user_id:e.instance().dataMySeft.user_id,dataMessages:this.dataMessages,users:this.dataUserMessages};var i=new SFS2X.SFSObject;oe.instance().dataMessagesLocal.dataMessages.length>0?i.putLong("last_user_message_id",oe.instance().dataMessagesLocal.dataMessages[oe.instance().dataMessagesLocal.dataMessages.length-1].id):i.putLong("last_user_message_id",0),e.instance().sendData(ki.USER_MESSAGE_LOAD_REQUEST,i),cV.instance().checkLoadMessages=!0}}},{key:"sendRequestSystemMessages",value:function(){_t.instance().event.get_system_messages_complete.add(this.get_system_messages_complete,this),_t.instance().getSystemMessages(oe.instance().zoneSFS,e.instance().dataMySeft.user_id)}},{key:"get_system_messages_complete",value:function(t){_t.instance().event.get_system_messages_complete.remove(this.get_system_messages_complete,this);var n=new SFS2X.SFSObject;null==t||0==t.length?(oe.instance().systemMessagesLocal={user_id:e.instance().dataMySeft.user_id,dataMessages:[]},n.putLong("last_message_content_id",0),e.instance().sendData(ki.SYSTEM_MESSAGE_LOAD_REQUEST,n)):(oe.instance().systemMessagesLocal={user_id:e.instance().dataMySeft.user_id,dataMessages:t},oe.instance().systemMessagesLocal.dataMessages.length>0?n.putLong("last_message_content_id",oe.instance().systemMessagesLocal.dataMessages[oe.instance().systemMessagesLocal.dataMessages.length-1].message_content_id):n.putLong("last_message_content_id",0),e.instance().sendData(ki.SYSTEM_MESSAGE_LOAD_REQUEST,n))}}]),e}();function fV(e){return(fV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gV(e,t){return!t||"object"!==fV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yV(e){return(yV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mV(e,t){return(mV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vV=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gV(this,yV(t).call(this))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mV(e,t)}(t,Phaser.State),n=t,(i=[{key:"init",value:function(e){this.loadModule=new Ae(this)}},{key:"preload",value:function(){this.loadModule.preloadForLoad(),this.loadModule.createSpritesForLoadState(),J()}},{key:"create",value:function(){game.state.start("MainGame",!0,!1,{})}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"initServer",value:function(){var e={host:"103.9.77.122",port:8096,useSSL:!1,zone:"MusicQuiz",debug:!1};this.sfsInfo&&(e.host=this.sfsInfo.sfs_host,e.port=this.sfsInfo.sfs_port,e.useSSL=this.sfsInfo.sfs_ssl,e.zone=this.sfsInfo.sfs_zone,e.debug=this.sfsInfo.sfs_debug),dV.instance().initListenerSfs(e),dV.instance().connect()}}])&&pV(n.prototype,i),o&&pV(n,o),t}();function wV(e){return(wV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _V(e,t){return!t||"object"!==wV(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function SV(e){return(SV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EV(e,t){return(EV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var CV=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_V(this,SV(t).call(this))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EV(e,t)}(t,Phaser.State),n=t,(i=[{key:"init",value:function(e){}},{key:"preload",value:function(){game.scale.pageAlignHorizontally=!0,game.time.advancedTiming=!0,game.stage.disableVisibilityChange=!0}},{key:"create",value:function(){game.input.maxPointers=1,de.instance();var e=FH.instance();this.add.existing(e);var t=jC.instance();this.add.existing(t);var n=ht.instance();this.add.existing(n);var i=Ck.instance();this.add.existing(i),FH.instance().changeScreen(De.LOGIN)}},{key:"update",value:function(){}},{key:"render",value:function(){}}])&&bV(n.prototype,i),o&&bV(n,o),t}();function kV(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var PV=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window.plugins&&window.plugins.OneSignal){console.log("OneSignalPush------------------");window.plugins.OneSignal.startInit("4cb998ce-7a56-4eb5-90f5-06f2834da6fc").handleNotificationOpened(function(e){console.log("notificationOpenedCallback: "+JSON.stringify(e))}).endInit(),window.plugins.OneSignal.getIds(function(e){if(console.log("notifyId: "+JSON.stringify(e)),oe.instance().userOneSingal=e.userId,oe.instance().tokenOneSignal=e.pushToken,console.log("userOneSingal : "+oe.instance().userOneSingal),console.log("tokenOneSignal : "+oe.instance().tokenOneSignal),null!==dV.instance().roomLobby){var t=new SFS2X.SFSObject;t.putUtfString("user_one_signal",oe.instance().userOneSingal),t.putUtfString("token_one_signal",oe.instance().tokenOneSignal),dV.instance().sendDataOneSignal(Me.ONE_SIGNAL_UPDATE_REQUEST,t)}})}}var t,n,i;return t=e,i=[{key:"instance",value:function(){return this.onesignal||(this.onesignal=new e),this.onesignal}}],(n=null)&&kV(t.prototype,n),i&&kV(t,i),e}();window.onload=function(){(window.onhashchange=function(){},Howler.mobileAutoEnable=!1,Howler.autoSuspend=!1,tk.instance(),window.cordova&&"undefined"!=typeof device)?("undefined"!=typeof StatusBar&&StatusBar.hide(),window.navigationbar&&(window.navigationbar.setUp(!1),window.navigationbar.hideNavigationBar()),device.hasOwnProperty("platform")&&null!==device.platform&&("android"===device.platform.toLowerCase()||"amazon-fireos"===device.platform.toLowerCase()?(oe.instance().platform="and",oe.instance().udid=udid.getUdid(),oe.instance().referrer=udid.getReferrer(),setTimeout(function(){screen.orientation.lock("portrait")},2e3)):"ios"===device.platform.toLowerCase()&&(oe.instance().platform="ios",oe.instance().udid=device.uuid)),"ios"===oe.instance().platform?zv.instance():"and"===oe.instance().platform&&Xv.instance(),window.plugins&&(window.plugins.insomnia&&window.plugins.insomnia.keepAwake(),window.powerManagement&&window.powerManagement.acquire(),window.plugins.uniqueDeviceID&&window.plugins.uniqueDeviceID.get(function(e){oe.instance().udid=e,oe.instance().platform="ios"})),cordova.plugins&&cordova.plugins.VolumeControl&&cordova.plugins.VolumeControl.setVolume(.7)):oe.instance().platform="web";_t.instance(),game=new Phaser.Game(window.GameConfig.GAME_WIDTH,window.GameConfig.GAME_HEIGHT,Phaser.CANVAS,"game",null,!1,!0),game.state.add("Boot",he),game.state.add("Load",vV),game.state.add("MainGame",CV),game.state.start("Boot"),document.body.addEventListener("touchend",function(){"ctx"in Howler&&null!==Howler.ctx&&("suspended"!==Howler.ctx.state&&"interrupted"!==Howler.ctx.state||(Howler.ctx.resume(),Howler._autoResume()))}),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),!1===oe.instance().isShowLoading&&Qe.instance().event.backButton.dispatch()},!1),document.addEventListener("deviceready",function(){PV.instance(),Ei.instance()},!1),document.addEventListener("pause",function(){null!==game&&(game.paused=!0)},!1),document.ontouchmove=function(e){e.preventDefault()},document.addEventListener("resume",function(){null!==game&&(game.paused=!1)},!1)}}]);